(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[287],{8918:Ou=>{Ou.exports=function y($,ee,d){function g(e,i){if(!ee[e]){if(!$[e]){if(_)return _(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var n=ee[e]={exports:{}};$[e][0].call(n.exports,function(p){return g($[e][1][p]||p)},n,n.exports,y,$,ee,d)}return ee[e].exports}for(var _=void 0,t=0;t<d.length;t++)g(d[t]);return g}({1:[function(y,$,ee){"use strict";var d=y("../src/lib"),g={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var _ in g){var t=_.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.addStyleRule(t,g[_])}},{"../src/lib":503}],2:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(y,$,ee){"use strict";$.exports=y("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(y,$,ee){"use strict";$.exports=y("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(y,$,ee){"use strict";$.exports=y("../src/traces/box")},{"../src/traces/box":679}],6:[function(y,$,ee){"use strict";$.exports=y("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(y,$,ee){"use strict";$.exports=y("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(y,$,ee){"use strict";$.exports=y("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(y,$,ee){"use strict";$.exports=y("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(y,$,ee){"use strict";$.exports=y("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(y,$,ee){"use strict";$.exports=y("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(y,$,ee){"use strict";$.exports=y("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(y,$,ee){"use strict";$.exports=y("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(y,$,ee){"use strict";$.exports=y("../src/core")},{"../src/core":481}],15:[function(y,$,ee){"use strict";$.exports=y("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(y,$,ee){"use strict";$.exports=y("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(y,$,ee){"use strict";$.exports=y("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(y,$,ee){"use strict";$.exports=y("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(y,$,ee){"use strict";$.exports=y("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(y,$,ee){"use strict";$.exports=y("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(y,$,ee){"use strict";$.exports=y("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(y,$,ee){"use strict";$.exports=y("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(y,$,ee){"use strict";$.exports=y("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(y,$,ee){"use strict";$.exports=y("../src/traces/image")},{"../src/traces/image":852}],27:[function(y,$,ee){"use strict";var d=y("./core");d.register([y("./bar"),y("./box"),y("./heatmap"),y("./histogram"),y("./histogram2d"),y("./histogram2dcontour"),y("./contour"),y("./scatterternary"),y("./violin"),y("./funnel"),y("./waterfall"),y("./image"),y("./pie"),y("./sunburst"),y("./treemap"),y("./icicle"),y("./funnelarea"),y("./scatter3d"),y("./surface"),y("./isosurface"),y("./volume"),y("./mesh3d"),y("./cone"),y("./streamtube"),y("./scattergeo"),y("./choropleth"),y("./scattergl"),y("./splom"),y("./pointcloud"),y("./heatmapgl"),y("./parcoords"),y("./parcats"),y("./scattermapbox"),y("./choroplethmapbox"),y("./densitymapbox"),y("./sankey"),y("./indicator"),y("./table"),y("./carpet"),y("./scattercarpet"),y("./contourcarpet"),y("./ohlc"),y("./candlestick"),y("./scatterpolar"),y("./scatterpolargl"),y("./barpolar"),y("./scattersmith"),y("./aggregate"),y("./filter"),y("./groupby"),y("./sort"),y("./calendars")]),$.exports=d},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(y,$,ee){"use strict";$.exports=y("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(y,$,ee){"use strict";$.exports=y("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(y,$,ee){"use strict";$.exports=y("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(y,$,ee){"use strict";$.exports=y("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(y,$,ee){"use strict";$.exports=y("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(y,$,ee){"use strict";$.exports=y("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(y,$,ee){"use strict";$.exports=y("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(y,$,ee){"use strict";$.exports=y("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(y,$,ee){"use strict";$.exports=y("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(y,$,ee){"use strict";$.exports=y("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(y,$,ee){"use strict";$.exports=y("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(y,$,ee){"use strict";$.exports=y("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(y,$,ee){"use strict";$.exports=y("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(y,$,ee){"use strict";$.exports=y("../src/traces/table")},{"../src/traces/table":1069}],52:[function(y,$,ee){"use strict";$.exports=y("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(y,$,ee){"use strict";$.exports=y("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(y,$,ee){"use strict";$.exports=y("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(y,$,ee){"use strict";$.exports=y("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(y,$,ee){var d,g;d=this,g=function(d,g,_,t,e){"use strict";function i(re){return re.target.depth}function r(re,ie){return re.sourceLinks.length?re.depth:ie-1}function o(re){return function(){return re}}e=e&&e.hasOwnProperty("default")?e.default:e;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(re){return typeof re}:function(re){return re&&"function"==typeof Symbol&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re};function p(re,ie){return a(re.source,ie.source)||re.index-ie.index}function s(re,ie){return a(re.target,ie.target)||re.index-ie.index}function a(re,ie){return re.partOfCycle===ie.partOfCycle?re.y0-ie.y0:"top"===re.circularLinkType||"bottom"===ie.circularLinkType?-1:1}function c(re){return re.value}function u(re){return(re.y0+re.y1)/2}function h(re){return u(re.source)}function v(re){return u(re.target)}function f(re){return re.index}function l(re){return re.nodes}function x(re){return re.links}function m(re,ie){var ce=re.get(ie);if(!ce)throw new Error("missing: "+ie);return ce}function w(re,ie){return ie(re)}function b(re,ie,ce){var se=0;if(null===ce){for(var de=[],ue=0;ue<re.links.length;ue++){var ge=re.links[ue],be=ge.source.index,Te=ge.target.index;de[be]||(de[be]=[]),de[Te]||(de[Te]=[]),-1===de[be].indexOf(Te)&&de[be].push(Te)}var we=e(de);we.sort(function(ve,Me){return ve.length-Me.length});var Le={};for(ue=0;ue<we.length;ue++){var fe=we[ue].slice(-2);Le[fe[0]]||(Le[fe[0]]={}),Le[fe[0]][fe[1]]=!0}re.links.forEach(function(ve){var Me=ve.target.index,ke=ve.source.index;Me===ke||Le[ke]&&Le[ke][Me]?(ve.circular=!0,ve.circularLinkID=se,se+=1):ve.circular=!1})}else re.links.forEach(function(ve){ve.source[ce]<ve.target[ce]?ve.circular=!1:(ve.circular=!0,ve.circularLinkID=se,se+=1)})}function k(re,ie){var ce=0,se=0;re.links.forEach(function(de){de.circular&&(de.circularLinkType=de.source.circularLinkType||de.target.circularLinkType?de.source.circularLinkType?de.source.circularLinkType:de.target.circularLinkType:ce<se?"top":"bottom","top"==de.circularLinkType?ce+=1:se+=1,re.nodes.forEach(function(ue){w(ue,ie)!=w(de.source,ie)&&w(ue,ie)!=w(de.target,ie)||(ue.circularLinkType=de.circularLinkType)}))}),re.links.forEach(function(de){de.circular&&(de.source.circularLinkType==de.target.circularLinkType&&(de.circularLinkType=de.source.circularLinkType),J(de,ie)&&(de.circularLinkType=de.source.circularLinkType))})}function T(re){var ie=Math.abs(re.y1-re.y0),ce=Math.abs(re.target.x0-re.source.x1);return Math.atan(ce/ie)}function L(re,ie){var ce=0;re.sourceLinks.forEach(function(de){ce=de.circular&&!J(de,ie)?ce+1:ce});var se=0;return re.targetLinks.forEach(function(de){se=de.circular&&!J(de,ie)?se+1:se}),ce+se}function A(re){var ce=0;re.source.sourceLinks.forEach(function(ue){ce=ue.circular?ce+1:ce});var de=0;return re.target.targetLinks.forEach(function(ue){de=ue.circular?de+1:de}),!(ce>1||de>1)}function I(re,ie,ce){return re.sort(S),re.forEach(function(se,de){var ue,ge,be=0;if(J(se,ce)&&A(se))se.circularPathData.verticalBuffer=be+se.width/2;else{for(var Te=0;Te<de;Te++)if(!((ue=re[de]).source.column<(ge=re[Te]).target.column||ue.target.column>ge.source.column)){var we=re[Te].circularPathData.verticalBuffer+re[Te].width/2+ie;be=we>be?we:be}se.circularPathData.verticalBuffer=be+se.width/2}}),re}function D(re,ie,ce,se){var de=g.min(re.links,function(ue){return ue.source.y0});re.links.forEach(function(ue){ue.circular&&(ue.circularPathData={})}),I(re.links.filter(function(ue){return"top"==ue.circularLinkType}),ie,se),I(re.links.filter(function(ue){return"bottom"==ue.circularLinkType}),ie,se),re.links.forEach(function(ue){if(ue.circular){if(ue.circularPathData.arcRadius=ue.width+10,ue.circularPathData.leftNodeBuffer=5,ue.circularPathData.rightNodeBuffer=5,ue.circularPathData.sourceWidth=ue.source.x1-ue.source.x0,ue.circularPathData.sourceX=ue.source.x0+ue.circularPathData.sourceWidth,ue.circularPathData.targetX=ue.target.x0,ue.circularPathData.sourceY=ue.y0,ue.circularPathData.targetY=ue.y1,J(ue,se)&&A(ue))ue.circularPathData.leftSmallArcRadius=10+ue.width/2,ue.circularPathData.leftLargeArcRadius=10+ue.width/2,ue.circularPathData.rightSmallArcRadius=10+ue.width/2,ue.circularPathData.rightLargeArcRadius=10+ue.width/2,"bottom"==ue.circularLinkType?(ue.circularPathData.verticalFullExtent=ue.source.y1+25+ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.rightLargeArcRadius):(ue.circularPathData.verticalFullExtent=ue.source.y0-25-ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.rightLargeArcRadius);else{var ge=ue.source.column,be=ue.circularLinkType,Te=re.links.filter(function(fe){return fe.source.column==ge&&fe.circularLinkType==be});Te.sort("bottom"==ue.circularLinkType?R:C);var we=0;Te.forEach(function(fe,ve){fe.circularLinkID==ue.circularLinkID&&(ue.circularPathData.leftSmallArcRadius=10+ue.width/2+we,ue.circularPathData.leftLargeArcRadius=10+ue.width/2+ve*ie+we),we+=fe.width}),ge=ue.target.column,(Te=re.links.filter(function(fe){return fe.target.column==ge&&fe.circularLinkType==be})).sort("bottom"==ue.circularLinkType?H:F),we=0,Te.forEach(function(fe,ve){fe.circularLinkID==ue.circularLinkID&&(ue.circularPathData.rightSmallArcRadius=10+ue.width/2+we,ue.circularPathData.rightLargeArcRadius=10+ue.width/2+ve*ie+we),we+=fe.width}),"bottom"==ue.circularLinkType?(ue.circularPathData.verticalFullExtent=Math.max(ce,ue.source.y1,ue.target.y1)+25+ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.rightLargeArcRadius):(ue.circularPathData.verticalFullExtent=de-25-ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.rightLargeArcRadius)}ue.circularPathData.leftInnerExtent=ue.circularPathData.sourceX+ue.circularPathData.leftNodeBuffer,ue.circularPathData.rightInnerExtent=ue.circularPathData.targetX-ue.circularPathData.rightNodeBuffer,ue.circularPathData.leftFullExtent=ue.circularPathData.sourceX+ue.circularPathData.leftLargeArcRadius+ue.circularPathData.leftNodeBuffer,ue.circularPathData.rightFullExtent=ue.circularPathData.targetX-ue.circularPathData.rightLargeArcRadius-ue.circularPathData.rightNodeBuffer}if(ue.circular)ue.path="top"==(fe=ue).circularLinkType?"M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 0 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY-fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 0 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 0 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY-fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 0 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY:"M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 1 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY+fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 1 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 1 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY+fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 1 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY;else{var Le=t.linkHorizontal().source(function(fe){return[fe.source.x0+(fe.source.x1-fe.source.x0),fe.y0]}).target(function(fe){return[fe.target.x0,fe.y1]});ue.path=Le(ue)}var fe})}function S(re,ie){return U(re)==U(ie)?"bottom"==re.circularLinkType?R(re,ie):C(re,ie):U(ie)-U(re)}function C(re,ie){return re.y0-ie.y0}function R(re,ie){return ie.y0-re.y0}function F(re,ie){return re.y1-ie.y1}function H(re,ie){return ie.y1-re.y1}function U(re){return re.target.column-re.source.column}function X(re){return re.target.x0-re.source.x1}function Z(re,ie){var ce=T(re),se=X(ie)/Math.tan(ce);return"up"==j(re)?re.y1+se:re.y1-se}function Y(re,ie){var ce=T(re),se=X(ie)/Math.tan(ce);return"up"==j(re)?re.y1-se:re.y1+se}function W(re,ie,ce,se){re.links.forEach(function(de){if(!de.circular&&de.target.column-de.source.column>1){var ue=de.source.column+1,ge=de.target.column-1,be=1,Te=ge-ue+1;for(be=1;ue<=ge;ue++,be++)re.nodes.forEach(function(we){if(we.column==ue){var Le,fe=be/(Te+1),ve=Math.pow(1-fe,3),Me=3*fe*Math.pow(1-fe,2),ke=3*Math.pow(fe,2)*(1-fe),Ce=Math.pow(fe,3),Pe=ve*de.y0+Me*de.y0+ke*de.y1+Ce*de.y1,Fe=Pe-de.width/2,qe=Pe+de.width/2;Fe>we.y0&&Fe<we.y1?(Le=we.y1-Fe+10,we=z(we,Le="bottom"==we.circularLinkType?Le:-Le,ie,ce),re.nodes.forEach(function(rt){w(rt,se)!=w(we,se)&&rt.column==we.column&&te(we,rt)&&z(rt,Le,ie,ce)})):(qe>we.y0&&qe<we.y1||Fe<we.y0&&qe>we.y1)&&(we=z(we,Le=qe-we.y0+10,ie,ce),re.nodes.forEach(function(rt){w(rt,se)!=w(we,se)&&rt.column==we.column&&rt.y0<we.y1&&rt.y1>we.y1&&z(rt,Le,ie,ce)}))}})}})}function te(re,ie){return re.y0>ie.y0&&re.y0<ie.y1||re.y1>ie.y0&&re.y1<ie.y1||re.y0<ie.y0&&re.y1>ie.y1}function z(re,ie,ce,se){return re.y0+ie>=ce&&re.y1+ie<=se&&(re.y0=re.y0+ie,re.y1=re.y1+ie,re.targetLinks.forEach(function(de){de.y1=de.y1+ie}),re.sourceLinks.forEach(function(de){de.y0=de.y0+ie})),re}function N(re,ie,ce,se){re.nodes.forEach(function(de){se&&de.y+(de.y1-de.y0)>ie&&(de.y=de.y-(de.y+(de.y1-de.y0)-ie));var ue=re.links.filter(function(Te){return w(Te.source,ce)==w(de,ce)}),ge=ue.length;ge>1&&ue.sort(function(Te,we){if(!Te.circular&&!we.circular){if(Te.target.column==we.target.column||!Q(Te,we))return Te.y1-we.y1;if(Te.target.column>we.target.column){var Le=Y(we,Te);return Te.y1-Le}if(we.target.column>Te.target.column)return Y(Te,we)-we.y1}return Te.circular&&!we.circular?"top"==Te.circularLinkType?-1:1:we.circular&&!Te.circular?"top"==we.circularLinkType?1:-1:Te.circular&&we.circular?Te.circularLinkType===we.circularLinkType&&"top"==Te.circularLinkType?Te.target.column===we.target.column?Te.target.y1-we.target.y1:we.target.column-Te.target.column:Te.circularLinkType===we.circularLinkType&&"bottom"==Te.circularLinkType?Te.target.column===we.target.column?we.target.y1-Te.target.y1:Te.target.column-we.target.column:"top"==Te.circularLinkType?-1:1:void 0});var be=de.y0;ue.forEach(function(Te){Te.y0=be+Te.width/2,be+=Te.width}),ue.forEach(function(Te,we){if("bottom"==Te.circularLinkType){for(var Le=we+1,fe=0;Le<ge;Le++)fe+=ue[Le].width;Te.y0=de.y1-fe-Te.width/2}})})}function V(re,ie,ce){re.nodes.forEach(function(se){var de=re.links.filter(function(be){return w(be.target,ce)==w(se,ce)}),ue=de.length;ue>1&&de.sort(function(be,Te){if(!be.circular&&!Te.circular){if(be.source.column==Te.source.column||!Q(be,Te))return be.y0-Te.y0;if(Te.source.column<be.source.column){var we=Z(Te,be);return be.y0-we}if(be.source.column<Te.source.column)return Z(be,Te)-Te.y0}return be.circular&&!Te.circular?"top"==be.circularLinkType?-1:1:Te.circular&&!be.circular?"top"==Te.circularLinkType?1:-1:be.circular&&Te.circular?be.circularLinkType===Te.circularLinkType&&"top"==be.circularLinkType?be.source.column===Te.source.column?be.source.y1-Te.source.y1:be.source.column-Te.source.column:be.circularLinkType===Te.circularLinkType&&"bottom"==be.circularLinkType?be.source.column===Te.source.column?be.source.y1-Te.source.y1:Te.source.column-be.source.column:"top"==be.circularLinkType?-1:1:void 0});var ge=se.y0;de.forEach(function(be){be.y1=ge+be.width/2,ge+=be.width}),de.forEach(function(be,Te){if("bottom"==be.circularLinkType){for(var we=Te+1,Le=0;we<ue;we++)Le+=de[we].width;be.y1=se.y1-Le-be.width/2}})})}function Q(re,ie){return j(re)==j(ie)}function j(re){return re.y0-re.y1>0?"up":"down"}function J(re,ie){return w(re.source,ie)==w(re.target,ie)}function K(re,ie,ce){var se=re.nodes,de=re.links,ue=!1,ge=!1;if(de.forEach(function(we){"top"==we.circularLinkType?ue=!0:"bottom"==we.circularLinkType&&(ge=!0)}),0==ue||0==ge){var be=g.min(se,function(we){return we.y0}),Te=(ce-ie)/(g.max(se,function(we){return we.y1})-be);se.forEach(function(we){var Le=(we.y1-we.y0)*Te;we.y0=(we.y0-be)*Te,we.y1=we.y0+Le}),de.forEach(function(we){we.y0=(we.y0-be)*Te,we.y1=(we.y1-be)*Te,we.width=we.width*Te})}}d.sankeyCircular=function(){var re,ie,ce=0,se=0,de=1,ue=1,ge=24,be=f,Te=r,we=l,Le=x,fe=32,ve=2,Me=null;function ke(){var ze={nodes:we.apply(null,arguments),links:Le.apply(null,arguments)};Ce(ze),b(ze,0,Me),Pe(ze),Fe(ze),k(ze,be),qe(ze,fe,be),rt(ze);for(var He=4,Xe=0;Xe<He;Xe++)N(ze,ue,be),V(ze,0,be),W(ze,se,ue,be),N(ze,ue,be),V(ze,0,be);return K(ze,se,ue),D(ze,ve,ue,be),ze}function Ce(ze){ze.nodes.forEach(function(Xe,Je){Xe.index=Je,Xe.sourceLinks=[],Xe.targetLinks=[]});var He=_.map(ze.nodes,be);return ze.links.forEach(function(Xe,Je){Xe.index=Je;var at=Xe.source,pt=Xe.target;"object"!==(void 0===at?"undefined":n(at))&&(at=Xe.source=m(He,at)),"object"!==(void 0===pt?"undefined":n(pt))&&(pt=Xe.target=m(He,pt)),at.sourceLinks.push(Xe),pt.targetLinks.push(Xe)}),ze}function Pe(ze){ze.nodes.forEach(function(He){He.partOfCycle=!1,He.value=Math.max(g.sum(He.sourceLinks,c),g.sum(He.targetLinks,c)),He.sourceLinks.forEach(function(Xe){Xe.circular&&(He.partOfCycle=!0,He.circularLinkType=Xe.circularLinkType)}),He.targetLinks.forEach(function(Xe){Xe.circular&&(He.partOfCycle=!0,He.circularLinkType=Xe.circularLinkType)})})}function Fe(ze){var He,Xe,Je;for(He=ze.nodes,Xe=[],Je=0;He.length;++Je,He=Xe,Xe=[])He.forEach(function(at){at.depth=Je,at.sourceLinks.forEach(function(pt){Xe.indexOf(pt.target)<0&&!pt.circular&&Xe.push(pt.target)})});for(He=ze.nodes,Xe=[],Je=0;He.length;++Je,He=Xe,Xe=[])He.forEach(function(at){at.height=Je,at.targetLinks.forEach(function(pt){Xe.indexOf(pt.source)<0&&!pt.circular&&Xe.push(pt.source)})});ze.nodes.forEach(function(at){at.column=Math.floor(Te.call(null,at,Je))})}function qe(ze,He,Xe){var Je=_.nest().key(function(Dt){return Dt.column}).sortKeys(g.ascending).entries(ze.nodes).map(function(Dt){return Dt.values});(function(Dt){if(ie){var ot=1/0;Je.forEach(function(nr){var Ue=ue*ie/(nr.length+1);ot=Ue<ot?Ue:ot}),re=ot}var it=g.min(Je,function(nr){return(ue-se-(nr.length-1)*re)/g.sum(nr,c)});it*=.3,ze.links.forEach(function(nr){nr.width=nr.value*it});var nr,Ue,We,Be,Qe,Ae,Et=(Ue=0,We=0,Be=0,Qe=0,Ae=g.max((nr=ze).nodes,function(De){return De.column}),nr.links.forEach(function(De){De.circular&&("top"==De.circularLinkType?Ue+=De.width:We+=De.width,0==De.target.column&&(Qe+=De.width),De.source.column==Ae&&(Be+=De.width))}),{top:Ue=Ue>0?Ue+25+10:Ue,bottom:We=We>0?We+25+10:We,left:Qe=Qe>0?Qe+25+10:Qe,right:Be=Be>0?Be+25+10:Be}),Xt=function(nr,Ue){var We=g.max(nr.nodes,function(Oe){return Oe.column}),Be=de-ce,Qe=ue-se,Ae=Be/(Be+Ue.right+Ue.left),De=Qe/(Qe+Ue.top+Ue.bottom);return ce=ce*Ae+Ue.left,de=0==Ue.right?de:de*Ae,se=se*De+Ue.top,ue*=De,nr.nodes.forEach(function(Oe){Oe.x0=ce+Oe.column*((de-ce-ge)/We),Oe.x1=Oe.x0+ge}),De}(ze,Et);it*=Xt,ze.links.forEach(function(nr){nr.width=nr.value*it}),Je.forEach(function(nr){var Ue=nr.length;nr.forEach(function(We,Be){We.depth==Je.length-1&&1==Ue||0==We.depth&&1==Ue?(We.y0=ue/2-We.value*it,We.y1=We.y0+We.value*it):We.partOfCycle?0==L(We,Dt)?(We.y0=ue/2+Be,We.y1=We.y0+We.value*it):"top"==We.circularLinkType?(We.y0=se+Be,We.y1=We.y0+We.value*it):(We.y0=ue-We.value*it-Be,We.y1=We.y0+We.value*it):0==Et.top||0==Et.bottom?(We.y0=(ue-se)/Ue*Be,We.y1=We.y0+We.value*it):(We.y0=(ue-se)/2-Ue/2+Be,We.y1=We.y0+We.value*it)})})})(Xe),Ft();for(var at=1,pt=He;pt>0;--pt)xt(at*=.99,Xe),Ft();function xt(Dt,ot){var it=Je.length;Je.forEach(function(Et){var Xt=Et.length,nr=Et[0].depth;Et.forEach(function(Ue){var We;if((Ue.sourceLinks.length||Ue.targetLinks.length)&&!(Ue.partOfCycle&&L(Ue,ot)>0))if(0==nr&&1==Xt)Ue.y0=ue/2-(We=Ue.y1-Ue.y0)/2,Ue.y1=ue/2+We/2;else if(nr==it-1&&1==Xt)Ue.y0=ue/2-(We=Ue.y1-Ue.y0)/2,Ue.y1=ue/2+We/2;else{var Be=g.mean(Ue.sourceLinks,v),Qe=g.mean(Ue.targetLinks,h),Ae=((Be&&Qe?(Be+Qe)/2:Be||Qe)-u(Ue))*Dt;Ue.y0+=Ae,Ue.y1+=Ae}})})}function Ft(){Je.forEach(function(Dt){var ot,it,Et,Xt=se,nr=Dt.length;for(Dt.sort(a),Et=0;Et<nr;++Et)(it=Xt-(ot=Dt[Et]).y0)>0&&(ot.y0+=it,ot.y1+=it),Xt=ot.y1+re;if((it=Xt-re-ue)>0)for(Xt=ot.y0-=it,ot.y1-=it,Et=nr-2;Et>=0;--Et)(it=(ot=Dt[Et]).y1+re-Xt)>0&&(ot.y0-=it,ot.y1-=it),Xt=ot.y0})}}function rt(ze){ze.nodes.forEach(function(He){He.sourceLinks.sort(s),He.targetLinks.sort(p)}),ze.nodes.forEach(function(He){var Xe=He.y0,Je=Xe,at=He.y1,pt=at;He.sourceLinks.forEach(function(xt){xt.circular?(xt.y0=at-xt.width/2,at-=xt.width):(xt.y0=Xe+xt.width/2,Xe+=xt.width)}),He.targetLinks.forEach(function(xt){xt.circular?(xt.y1=pt-xt.width/2,pt-=xt.width):(xt.y1=Je+xt.width/2,Je+=xt.width)})})}return ke.nodeId=function(ze){return arguments.length?(be="function"==typeof ze?ze:o(ze),ke):be},ke.nodeAlign=function(ze){return arguments.length?(Te="function"==typeof ze?ze:o(ze),ke):Te},ke.nodeWidth=function(ze){return arguments.length?(ge=+ze,ke):ge},ke.nodePadding=function(ze){return arguments.length?(re=+ze,ke):re},ke.nodes=function(ze){return arguments.length?(we="function"==typeof ze?ze:o(ze),ke):we},ke.links=function(ze){return arguments.length?(Le="function"==typeof ze?ze:o(ze),ke):Le},ke.size=function(ze){return arguments.length?(ce=se=0,de=+ze[0],ue=+ze[1],ke):[de-ce,ue-se]},ke.extent=function(ze){return arguments.length?(ce=+ze[0][0],de=+ze[1][0],se=+ze[0][1],ue=+ze[1][1],ke):[[ce,se],[de,ue]]},ke.iterations=function(ze){return arguments.length?(fe=+ze,ke):fe},ke.circularLinkGap=function(ze){return arguments.length?(ve=+ze,ke):ve},ke.nodePaddingRatio=function(ze){return arguments.length?(ie=+ze,ke):ie},ke.sortNodes=function(ze){return arguments.length?(Me=ze,ke):Me},ke.update=function(ze){return k(ze,be),rt(ze),ze.links.forEach(function(He){He.circular&&(He.circularLinkType=He.y0+He.y1<ue?"top":"bottom",He.source.circularLinkType=He.circularLinkType,He.target.circularLinkType=He.circularLinkType)}),N(ze,ue,be,!1),V(ze,0,be),D(ze,ve,ue,be),ze},ke},d.sankeyCenter=function(re){return re.targetLinks.length?re.depth:re.sourceLinks.length?g.min(re.sourceLinks,i)-1:0},d.sankeyLeft=function(re){return re.depth},d.sankeyRight=function(re,ie){return ie-1-re.height},d.sankeyJustify=r,Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-array"),y("d3-collection"),y("d3-shape"),y("elementary-circuits-directed-graph")):g(d.d3=d.d3||{},d.d3,d.d3,d.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(y,$,ee){var d,g;d=this,g=function(d,g,_,t){"use strict";function e(w){return w.target.depth}function i(w,b){return w.sourceLinks.length?w.depth:b-1}function r(w){return function(){return w}}function o(w,b){return p(w.source,b.source)||w.index-b.index}function n(w,b){return p(w.target,b.target)||w.index-b.index}function p(w,b){return w.y0-b.y0}function s(w){return w.value}function a(w){return(w.y0+w.y1)/2}function c(w){return a(w.source)*w.value}function u(w){return a(w.target)*w.value}function h(w){return w.index}function v(w){return w.nodes}function f(w){return w.links}function l(w,b){var k=w.get(b);if(!k)throw new Error("missing: "+b);return k}function x(w){return[w.source.x1,w.y0]}function m(w){return[w.target.x0,w.y1]}d.sankey=function(){var w=0,b=0,k=1,T=1,L=24,A=8,I=h,D=i,S=v,C=f,R=32;function F(){var W={nodes:S.apply(null,arguments),links:C.apply(null,arguments)};return H(W),U(W),X(W),Z(W),Y(W),W}function H(W){W.nodes.forEach(function(z,N){z.index=N,z.sourceLinks=[],z.targetLinks=[]});var te=_.map(W.nodes,I);W.links.forEach(function(z,N){z.index=N;var V=z.source,Q=z.target;"object"!=typeof V&&(V=z.source=l(te,V)),"object"!=typeof Q&&(Q=z.target=l(te,Q)),V.sourceLinks.push(z),Q.targetLinks.push(z)})}function U(W){W.nodes.forEach(function(te){te.value=Math.max(g.sum(te.sourceLinks,s),g.sum(te.targetLinks,s))})}function X(W){var te,z,N;for(te=W.nodes,z=[],N=0;te.length;++N,te=z,z=[])te.forEach(function(Q){Q.depth=N,Q.sourceLinks.forEach(function(j){z.indexOf(j.target)<0&&z.push(j.target)})});for(te=W.nodes,z=[],N=0;te.length;++N,te=z,z=[])te.forEach(function(Q){Q.height=N,Q.targetLinks.forEach(function(j){z.indexOf(j.source)<0&&z.push(j.source)})});var V=(k-w-L)/(N-1);W.nodes.forEach(function(Q){Q.x1=(Q.x0=w+Math.max(0,Math.min(N-1,Math.floor(D.call(null,Q,N))))*V)+L})}function Z(W){var te=_.nest().key(function(J){return J.x0}).sortKeys(g.ascending).entries(W.nodes).map(function(J){return J.values});(function(){var J=g.max(te,function(ie){return ie.length}),K=2/3*(T-b)/(J-1);A>K&&(A=K);var re=g.min(te,function(ie){return(T-b-(ie.length-1)*A)/g.sum(ie,s)});te.forEach(function(ie){ie.forEach(function(ce,se){ce.y1=(ce.y0=se)+ce.value*re})}),W.links.forEach(function(ie){ie.width=ie.value*re})})(),j();for(var z=1,N=R;N>0;--N)Q(z*=.99),j(),V(z),j();function V(J){te.forEach(function(K){K.forEach(function(re){if(re.targetLinks.length){var ie=(g.sum(re.targetLinks,c)/g.sum(re.targetLinks,s)-a(re))*J;re.y0+=ie,re.y1+=ie}})})}function Q(J){te.slice().reverse().forEach(function(K){K.forEach(function(re){if(re.sourceLinks.length){var ie=(g.sum(re.sourceLinks,u)/g.sum(re.sourceLinks,s)-a(re))*J;re.y0+=ie,re.y1+=ie}})})}function j(){te.forEach(function(J){var K,re,ie,ce=b,se=J.length;for(J.sort(p),ie=0;ie<se;++ie)(re=ce-(K=J[ie]).y0)>0&&(K.y0+=re,K.y1+=re),ce=K.y1+A;if((re=ce-A-T)>0)for(ce=K.y0-=re,K.y1-=re,ie=se-2;ie>=0;--ie)(re=(K=J[ie]).y1+A-ce)>0&&(K.y0-=re,K.y1-=re),ce=K.y0})}}function Y(W){W.nodes.forEach(function(te){te.sourceLinks.sort(n),te.targetLinks.sort(o)}),W.nodes.forEach(function(te){var z=te.y0,N=z;te.sourceLinks.forEach(function(V){V.y0=z+V.width/2,z+=V.width}),te.targetLinks.forEach(function(V){V.y1=N+V.width/2,N+=V.width})})}return F.update=function(W){return Y(W),W},F.nodeId=function(W){return arguments.length?(I="function"==typeof W?W:r(W),F):I},F.nodeAlign=function(W){return arguments.length?(D="function"==typeof W?W:r(W),F):D},F.nodeWidth=function(W){return arguments.length?(L=+W,F):L},F.nodePadding=function(W){return arguments.length?(A=+W,F):A},F.nodes=function(W){return arguments.length?(S="function"==typeof W?W:r(W),F):S},F.links=function(W){return arguments.length?(C="function"==typeof W?W:r(W),F):C},F.size=function(W){return arguments.length?(w=b=0,k=+W[0],T=+W[1],F):[k-w,T-b]},F.extent=function(W){return arguments.length?(w=+W[0][0],k=+W[1][0],b=+W[0][1],T=+W[1][1],F):[[w,b],[k,T]]},F.iterations=function(W){return arguments.length?(R=+W,F):R},F},d.sankeyCenter=function(w){return w.targetLinks.length?w.depth:w.sourceLinks.length?g.min(w.sourceLinks,e)-1:0},d.sankeyLeft=function(w){return w.depth},d.sankeyRight=function(w,b){return b-1-w.height},d.sankeyJustify=i,d.sankeyLinkHorizontal=function(){return t.linkHorizontal().source(x).target(m)},Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-array"),y("d3-collection"),y("d3-shape")):g(d.d3=d.d3||{},d.d3,d.d3,d.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(y,$,ee){(function(){var d={version:"3.8.0"},g=[].slice,_=function(le){return g.call(le)},t=self.document;function e(le){return le&&(le.ownerDocument||le.document||le).documentElement}function i(le){return le&&(le.ownerDocument&&le.ownerDocument.defaultView||le.document&&le||le.defaultView)}if(t)try{_(t.documentElement.childNodes)}catch(le){_=function(E){for(var O=E.length,B=new Array(O);O--;)B[O]=E[O];return B}}if(Date.now||(Date.now=function(){return+new Date}),t)try{t.createElement("DIV").style.setProperty("opacity",0,"")}catch(le){var r=this.Element.prototype,o=r.setAttribute,n=r.setAttributeNS,p=this.CSSStyleDeclaration.prototype,s=p.setProperty;r.setAttribute=function(E,O){o.call(this,E,O+"")},r.setAttributeNS=function(E,O,B){n.call(this,E,O,B+"")},p.setProperty=function(E,O,B){s.call(this,E,O+"",B)}}function a(le,E){return le<E?-1:le>E?1:le>=E?0:NaN}function c(le){return null===le?NaN:+le}function u(le){return!isNaN(le)}function h(le){return{left:function(E,O,B,q){for(arguments.length<3&&(B=0),arguments.length<4&&(q=E.length);B<q;){var ae=B+q>>>1;le(E[ae],O)<0?B=ae+1:q=ae}return B},right:function(E,O,B,q){for(arguments.length<3&&(B=0),arguments.length<4&&(q=E.length);B<q;){var ae=B+q>>>1;le(E[ae],O)>0?q=ae:B=ae+1}return B}}}d.ascending=a,d.descending=function(le,E){return E<le?-1:E>le?1:E>=le?0:NaN},d.min=function(le,E){var O,B,q=-1,ae=le.length;if(1===arguments.length){for(;++q<ae;)if(null!=(B=le[q])&&B>=B){O=B;break}for(;++q<ae;)null!=(B=le[q])&&O>B&&(O=B)}else{for(;++q<ae;)if(null!=(B=E.call(le,le[q],q))&&B>=B){O=B;break}for(;++q<ae;)null!=(B=E.call(le,le[q],q))&&O>B&&(O=B)}return O},d.max=function(le,E){var O,B,q=-1,ae=le.length;if(1===arguments.length){for(;++q<ae;)if(null!=(B=le[q])&&B>=B){O=B;break}for(;++q<ae;)null!=(B=le[q])&&B>O&&(O=B)}else{for(;++q<ae;)if(null!=(B=E.call(le,le[q],q))&&B>=B){O=B;break}for(;++q<ae;)null!=(B=E.call(le,le[q],q))&&B>O&&(O=B)}return O},d.extent=function(le,E){var O,B,q,ae=-1,he=le.length;if(1===arguments.length){for(;++ae<he;)if(null!=(B=le[ae])&&B>=B){O=q=B;break}for(;++ae<he;)null!=(B=le[ae])&&(O>B&&(O=B),q<B&&(q=B))}else{for(;++ae<he;)if(null!=(B=E.call(le,le[ae],ae))&&B>=B){O=q=B;break}for(;++ae<he;)null!=(B=E.call(le,le[ae],ae))&&(O>B&&(O=B),q<B&&(q=B))}return[O,q]},d.sum=function(le,E){var O,B=0,q=le.length,ae=-1;if(1===arguments.length)for(;++ae<q;)u(O=+le[ae])&&(B+=O);else for(;++ae<q;)u(O=+E.call(le,le[ae],ae))&&(B+=O);return B},d.mean=function(le,E){var O,B=0,q=le.length,ae=-1,he=q;if(1===arguments.length)for(;++ae<q;)u(O=c(le[ae]))?B+=O:--he;else for(;++ae<q;)u(O=c(E.call(le,le[ae],ae)))?B+=O:--he;if(he)return B/he},d.quantile=function(le,E){var O=(le.length-1)*E+1,B=Math.floor(O),q=+le[B-1],ae=O-B;return ae?q+ae*(le[B]-q):q},d.median=function(le,E){var O,B=[],q=le.length,ae=-1;if(1===arguments.length)for(;++ae<q;)u(O=c(le[ae]))&&B.push(O);else for(;++ae<q;)u(O=c(E.call(le,le[ae],ae)))&&B.push(O);if(B.length)return d.quantile(B.sort(a),.5)},d.variance=function(le,E){var O,B,q=le.length,ae=0,he=0,me=-1,_e=0;if(1===arguments.length)for(;++me<q;)u(O=c(le[me]))&&(he+=(B=O-ae)*(O-(ae+=B/++_e)));else for(;++me<q;)u(O=c(E.call(le,le[me],me)))&&(he+=(B=O-ae)*(O-(ae+=B/++_e)));if(_e>1)return he/(_e-1)},d.deviation=function(){var le=d.variance.apply(this,arguments);return le&&Math.sqrt(le)};var v=h(a);function f(le){return le.length}d.bisectLeft=v.left,d.bisect=d.bisectRight=v.right,d.bisector=function(le){return h(1===le.length?function(E,O){return a(le(E),O)}:le)},d.shuffle=function(le,E,O){(ae=arguments.length)<3&&(O=le.length,ae<2&&(E=0));for(var B,q,ae=O-E;ae;)q=Math.random()*ae--|0,B=le[ae+E],le[ae+E]=le[q+E],le[q+E]=B;return le},d.permute=function(le,E){for(var O=E.length,B=new Array(O);O--;)B[O]=le[E[O]];return B},d.pairs=function(le){for(var E=0,O=le.length-1,B=le[0],q=new Array(O<0?0:O);E<O;)q[E]=[B,B=le[++E]];return q},d.transpose=function(le){if(!(q=le.length))return[];for(var E=-1,O=d.min(le,f),B=new Array(O);++E<O;)for(var q,ae=-1,he=B[E]=new Array(q);++ae<q;)he[ae]=le[ae][E];return B},d.zip=function(){return d.transpose(arguments)},d.keys=function(le){var E=[];for(var O in le)E.push(O);return E},d.values=function(le){var E=[];for(var O in le)E.push(le[O]);return E},d.entries=function(le){var E=[];for(var O in le)E.push({key:O,value:le[O]});return E},d.merge=function(le){for(var E,O,B,q=le.length,ae=-1,he=0;++ae<q;)he+=le[ae].length;for(O=new Array(he);--q>=0;)for(E=(B=le[q]).length;--E>=0;)O[--he]=B[E];return O};var l=Math.abs;function x(le){for(var E=1;le*E%1;)E*=10;return E}function m(le,E){for(var O in E)Object.defineProperty(le.prototype,O,{value:E[O],enumerable:!1})}function w(){this._=Object.create(null)}function b(le){return"__proto__"==(le+="")||"\0"===le[0]?"\0"+le:le}function k(le){return"\0"===(le+="")[0]?le.slice(1):le}function T(le){return b(le)in this._}function L(le){return(le=b(le))in this._&&delete this._[le]}function A(){var le=[];for(var E in this._)le.push(k(E));return le}function I(){var le=0;for(var E in this._)++le;return le}function D(){for(var le in this._)return!1;return!0}function S(){this._=Object.create(null)}function C(le){return le}function R(le,E,O){return function(){var B=O.apply(E,arguments);return B===E?le:B}}function F(le,E){if(E in le)return E;E=E.charAt(0).toUpperCase()+E.slice(1);for(var O=0,B=H.length;O<B;++O){var q=H[O]+E;if(q in le)return q}}d.range=function(le,E,O){if(arguments.length<3&&(O=1,arguments.length<2&&(E=le,le=0)),(E-le)/O==1/0)throw new Error("infinite range");var B,q=[],ae=x(l(O)),he=-1;if(le*=ae,E*=ae,(O*=ae)<0)for(;(B=le+O*++he)>E;)q.push(B/ae);else for(;(B=le+O*++he)<E;)q.push(B/ae);return q},d.map=function(le,E){var O=new w;if(le instanceof w)le.forEach(function(me,_e){O.set(me,_e)});else if(Array.isArray(le)){var B,q=-1,ae=le.length;if(1===arguments.length)for(;++q<ae;)O.set(q,le[q]);else for(;++q<ae;)O.set(E.call(le,B=le[q],q),B)}else for(var he in le)O.set(he,le[he]);return O},m(w,{has:T,get:function(le){return this._[b(le)]},set:function(le,E){return this._[b(le)]=E},remove:L,keys:A,values:function(){var le=[];for(var E in this._)le.push(this._[E]);return le},entries:function(){var le=[];for(var E in this._)le.push({key:k(E),value:this._[E]});return le},size:I,empty:D,forEach:function(le){for(var E in this._)le.call(this,k(E),this._[E])}}),d.nest=function(){var le,E,O={},B=[],q=[];function ae(he,me,_e){if(_e>=B.length)return E?E.call(O,me):le?me.sort(le):me;for(var Se,Ve,Ke,st,At=-1,Pt=me.length,St=B[_e++],Lt=new w;++At<Pt;)(st=Lt.get(Se=St(Ve=me[At])))?st.push(Ve):Lt.set(Se,[Ve]);return he?(Ve=he(),Ke=function(kt,Ht){Ve.set(kt,ae(he,Ht,_e))}):(Ve={},Ke=function(kt,Ht){Ve[kt]=ae(he,Ht,_e)}),Lt.forEach(Ke),Ve}return O.map=function(he,me){return ae(me,he,0)},O.entries=function(he){return function me(_e,Se){if(Se>=B.length)return _e;var Ve=[],Ke=q[Se++];return _e.forEach(function(st,At){Ve.push({key:st,values:me(At,Se)})}),Ke?Ve.sort(function(st,At){return Ke(st.key,At.key)}):Ve}(ae(d.map,he,0),0)},O.key=function(he){return B.push(he),O},O.sortKeys=function(he){return q[B.length-1]=he,O},O.sortValues=function(he){return le=he,O},O.rollup=function(he){return E=he,O},O},d.set=function(le){var E=new S;if(le)for(var O=0,B=le.length;O<B;++O)E.add(le[O]);return E},m(S,{has:T,add:function(le){return this._[b(le+="")]=!0,le},remove:L,values:A,size:I,empty:D,forEach:function(le){for(var E in this._)le.call(this,k(E))}}),d.behavior={},d.rebind=function(le,E){for(var O,B=1,q=arguments.length;++B<q;)le[O=arguments[B]]=R(le,E,E[O]);return le};var H=["webkit","ms","moz","Moz","o","O"];function U(){}function X(){}function Z(le){var E=[],O=new w;function B(){for(var q,ae=E,he=-1,me=ae.length;++he<me;)(q=ae[he].on)&&q.apply(this,arguments);return le}return B.on=function(q,ae){var he,me=O.get(q);return arguments.length<2?me&&me.on:(me&&(me.on=null,E=E.slice(0,he=E.indexOf(me)).concat(E.slice(he+1)),O.remove(q)),ae&&E.push(O.set(q,{on:ae})),le)},B}function Y(){d.event.preventDefault()}function W(){for(var le,E=d.event;le=E.sourceEvent;)E=le;return E}function te(le){for(var E=new X,O=0,B=arguments.length;++O<B;)E[arguments[O]]=Z(E);return E.of=function(q,ae){return function(he){try{var me=he.sourceEvent=d.event;he.target=le,d.event=he,E[he.type].apply(q,ae)}finally{d.event=me}}},E}d.dispatch=function(){for(var le=new X,E=-1,O=arguments.length;++E<O;)le[arguments[E]]=Z(le);return le},X.prototype.on=function(le,E){var O=le.indexOf("."),B="";if(O>=0&&(B=le.slice(O+1),le=le.slice(0,O)),le)return arguments.length<2?this[le].on(B):this[le].on(B,E);if(2===arguments.length){if(null==E)for(le in this)this.hasOwnProperty(le)&&this[le].on(B,null);return this}},d.event=null,d.requote=function(le){return le.replace(z,"\\$&")};var z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,N={}.__proto__?function(le,E){le.__proto__=E}:function(le,E){for(var O in E)le[O]=E[O]};function V(le){return N(le,K),le}var Q=function(le,E){return E.querySelector(le)},j=function(le,E){return E.querySelectorAll(le)},J=function(le,E){var O=le.matches||le[F(le,"matchesSelector")];return(J=function(B,q){return O.call(B,q)})(le,E)};"function"==typeof Sizzle&&(Q=function(le,E){return Sizzle(le,E)[0]||null},j=Sizzle,J=Sizzle.matchesSelector),d.selection=function(){return d.select(t.documentElement)};var K=d.selection.prototype=[];function re(le){return"function"==typeof le?le:function(){return Q(le,this)}}function ie(le){return"function"==typeof le?le:function(){return j(le,this)}}K.select=function(le){var E,O,B,q,ae=[];le=re(le);for(var he=-1,me=this.length;++he<me;){ae.push(E=[]),E.parentNode=(B=this[he]).parentNode;for(var _e=-1,Se=B.length;++_e<Se;)(q=B[_e])?(E.push(O=le.call(q,q.__data__,_e,he)),O&&"__data__"in q&&(O.__data__=q.__data__)):E.push(null)}return V(ae)},K.selectAll=function(le){var E,O,B=[];le=ie(le);for(var q=-1,ae=this.length;++q<ae;)for(var he=this[q],me=-1,_e=he.length;++me<_e;)(O=he[me])&&(B.push(E=_(le.call(O,O.__data__,me,q))),E.parentNode=O);return V(B)};var ce="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function de(le,E){return le=d.ns.qualify(le),null==E?le.local?function(){this.removeAttributeNS(le.space,le.local)}:function(){this.removeAttribute(le)}:"function"==typeof E?le.local?function(){var O=E.apply(this,arguments);null==O?this.removeAttributeNS(le.space,le.local):this.setAttributeNS(le.space,le.local,O)}:function(){var O=E.apply(this,arguments);null==O?this.removeAttribute(le):this.setAttribute(le,O)}:le.local?function(){this.setAttributeNS(le.space,le.local,E)}:function(){this.setAttribute(le,E)}}function ue(le){return le.trim().replace(/\s+/g," ")}function ge(le){return new RegExp("(?:^|\\s+)"+d.requote(le)+"(?:\\s+|$)","g")}function be(le){return(le+"").trim().split(/^|\s+/)}function Te(le,E){var O=(le=be(le).map(we)).length;return"function"==typeof E?function(){for(var B=-1,q=E.apply(this,arguments);++B<O;)le[B](this,q)}:function(){for(var B=-1;++B<O;)le[B](this,E)}}function we(le){var E=ge(le);return function(O,B){if(q=O.classList)return B?q.add(le):q.remove(le);var q=O.getAttribute("class")||"";B?(E.lastIndex=0,E.test(q)||O.setAttribute("class",ue(q+" "+le))):O.setAttribute("class",ue(q.replace(E," ")))}}function Le(le,E,O){return null==E?function(){this.style.removeProperty(le)}:"function"==typeof E?function(){var B=E.apply(this,arguments);null==B?this.style.removeProperty(le):this.style.setProperty(le,B,O)}:function(){this.style.setProperty(le,E,O)}}function fe(le,E){return null==E?function(){delete this[le]}:"function"==typeof E?function(){var O=E.apply(this,arguments);null==O?delete this[le]:this[le]=O}:function(){this[le]=E}}function ve(le){return"function"==typeof le?le:(le=d.ns.qualify(le)).local?function(){return this.ownerDocument.createElementNS(le.space,le.local)}:function(){var E=this.ownerDocument,O=this.namespaceURI;return O===ce&&E.documentElement.namespaceURI===ce?E.createElement(le):E.createElementNS(O,le)}}function Me(){var le=this.parentNode;le&&le.removeChild(this)}function ke(le){return{__data__:le}}function Ce(le){return function(){return J(this,le)}}function Pe(le){return arguments.length||(le=a),function(E,O){return E&&O?le(E.__data__,O.__data__):!E-!O}}function Fe(le,E){for(var O=0,B=le.length;O<B;O++)for(var q,ae=le[O],he=0,me=ae.length;he<me;he++)(q=ae[he])&&E(q,he,O);return le}function qe(le){return N(le,rt),le}d.ns={prefix:se,qualify:function(le){var E=le.indexOf(":"),O=le;return E>=0&&"xmlns"!==(O=le.slice(0,E))&&(le=le.slice(E+1)),se.hasOwnProperty(O)?{space:se[O],local:le}:le}},K.attr=function(le,E){if(arguments.length<2){if("string"==typeof le){var O=this.node();return(le=d.ns.qualify(le)).local?O.getAttributeNS(le.space,le.local):O.getAttribute(le)}for(E in le)this.each(de(E,le[E]));return this}return this.each(de(le,E))},K.classed=function(le,E){if(arguments.length<2){if("string"==typeof le){var O=this.node(),B=(le=be(le)).length,q=-1;if(E=O.classList){for(;++q<B;)if(!E.contains(le[q]))return!1}else for(E=O.getAttribute("class");++q<B;)if(!ge(le[q]).test(E))return!1;return!0}for(E in le)this.each(Te(E,le[E]));return this}return this.each(Te(le,E))},K.style=function(le,E,O){var B=arguments.length;if(B<3){if("string"!=typeof le){for(O in B<2&&(E=""),le)this.each(Le(O,le[O],E));return this}if(B<2){var q=this.node();return i(q).getComputedStyle(q,null).getPropertyValue(le)}O=""}return this.each(Le(le,E,O))},K.property=function(le,E){if(arguments.length<2){if("string"==typeof le)return this.node()[le];for(E in le)this.each(fe(E,le[E]));return this}return this.each(fe(le,E))},K.text=function(le){return arguments.length?this.each("function"==typeof le?function(){var E=le.apply(this,arguments);this.textContent=null==E?"":E}:null==le?function(){this.textContent=""}:function(){this.textContent=le}):this.node().textContent},K.html=function(le){return arguments.length?this.each("function"==typeof le?function(){var E=le.apply(this,arguments);this.innerHTML=null==E?"":E}:null==le?function(){this.innerHTML=""}:function(){this.innerHTML=le}):this.node().innerHTML},K.append=function(le){return le=ve(le),this.select(function(){return this.appendChild(le.apply(this,arguments))})},K.insert=function(le,E){return le=ve(le),E=re(E),this.select(function(){return this.insertBefore(le.apply(this,arguments),E.apply(this,arguments)||null)})},K.remove=function(){return this.each(Me)},K.data=function(le,E){var O,B,q=-1,ae=this.length;if(!arguments.length){for(le=new Array(ae=(O=this[0]).length);++q<ae;)(B=O[q])&&(le[q]=B.__data__);return le}function he(Ve,Ke){var st,At,Pt,St=Ve.length,Lt=Ke.length,kt=Math.min(St,Lt),Ht=new Array(Lt),jt=new Array(Lt),Yt=new Array(St);if(E){var lr,vr=new w,Or=new Array(St);for(st=-1;++st<St;)(At=Ve[st])&&(vr.has(lr=E.call(At,At.__data__,st))?Yt[st]=At:vr.set(lr,At),Or[st]=lr);for(st=-1;++st<Lt;)(At=vr.get(lr=E.call(Ke,Pt=Ke[st],st)))?!0!==At&&(Ht[st]=At,At.__data__=Pt):jt[st]=ke(Pt),vr.set(lr,!0);for(st=-1;++st<St;)st in Or&&!0!==vr.get(Or[st])&&(Yt[st]=Ve[st])}else{for(st=-1;++st<kt;)Pt=Ke[st],(At=Ve[st])?(At.__data__=Pt,Ht[st]=At):jt[st]=ke(Pt);for(;st<Lt;++st)jt[st]=ke(Ke[st]);for(;st<St;++st)Yt[st]=Ve[st]}jt.update=Ht,jt.parentNode=Ht.parentNode=Yt.parentNode=Ve.parentNode,me.push(jt),_e.push(Ht),Se.push(Yt)}var me=qe([]),_e=V([]),Se=V([]);if("function"==typeof le)for(;++q<ae;)he(O=this[q],le.call(O,O.parentNode.__data__,q));else for(;++q<ae;)he(O=this[q],le);return _e.enter=function(){return me},_e.exit=function(){return Se},_e},K.datum=function(le){return arguments.length?this.property("__data__",le):this.property("__data__")},K.filter=function(le){var E,O,B,q=[];"function"!=typeof le&&(le=Ce(le));for(var ae=0,he=this.length;ae<he;ae++){q.push(E=[]),E.parentNode=(O=this[ae]).parentNode;for(var me=0,_e=O.length;me<_e;me++)(B=O[me])&&le.call(B,B.__data__,me,ae)&&E.push(B)}return V(q)},K.order=function(){for(var le=-1,E=this.length;++le<E;)for(var O,B=this[le],q=B.length-1,ae=B[q];--q>=0;)(O=B[q])&&(ae&&ae!==O.nextSibling&&ae.parentNode.insertBefore(O,ae),ae=O);return this},K.sort=function(le){le=Pe.apply(this,arguments);for(var E=-1,O=this.length;++E<O;)this[E].sort(le);return this.order()},K.each=function(le){return Fe(this,function(E,O,B){le.call(E,E.__data__,O,B)})},K.call=function(le){var E=_(arguments);return le.apply(E[0]=this,E),this},K.empty=function(){return!this.node()},K.node=function(){for(var le=0,E=this.length;le<E;le++)for(var O=this[le],B=0,q=O.length;B<q;B++){var ae=O[B];if(ae)return ae}return null},K.size=function(){var le=0;return Fe(this,function(){++le}),le};var rt=[];function ze(le){var E,O;return function(B,q,ae){var he,me=le[ae].update,_e=me.length;for(ae!=O&&(O=ae,E=0),q>=E&&(E=q+1);!(he=me[E])&&++E<_e;);return he}}function He(le,E,O){var B="__on"+le,q=le.indexOf("."),ae=Je;q>0&&(le=le.slice(0,q));var he=Xe.get(le);function me(){var _e=this[B];_e&&(this.removeEventListener(le,_e,_e.$),delete this[B])}return he&&(le=he,ae=at),q?E?function(){var _e=ae(E,_(arguments));me.call(this),this.addEventListener(le,this[B]=_e,_e.$=O),_e._=E}:me:E?U:function(){var _e,Se=new RegExp("^__on([^.]+)"+d.requote(le)+"$");for(var Ve in this)if(_e=Ve.match(Se)){var Ke=this[Ve];this.removeEventListener(_e[1],Ke,Ke.$),delete this[Ve]}}}d.selection.enter=qe,d.selection.enter.prototype=rt,rt.append=K.append,rt.empty=K.empty,rt.node=K.node,rt.call=K.call,rt.size=K.size,rt.select=function(le){for(var E,O,B,q,ae,he=[],me=-1,_e=this.length;++me<_e;){B=(q=this[me]).update,he.push(E=[]),E.parentNode=q.parentNode;for(var Se=-1,Ve=q.length;++Se<Ve;)(ae=q[Se])?(E.push(B[Se]=O=le.call(q.parentNode,ae.__data__,Se,me)),O.__data__=ae.__data__):E.push(null)}return V(he)},rt.insert=function(le,E){return arguments.length<2&&(E=ze(this)),K.insert.call(this,le,E)},d.select=function(le){var E;return"string"==typeof le?(E=[Q(le,t)]).parentNode=t.documentElement:(E=[le]).parentNode=e(le),V([E])},d.selectAll=function(le){var E;return"string"==typeof le?(E=_(j(le,t))).parentNode=t.documentElement:(E=_(le)).parentNode=null,V([E])},K.on=function(le,E,O){var B=arguments.length;if(B<3){if("string"!=typeof le){for(O in B<2&&(E=!1),le)this.each(He(O,le[O],E));return this}if(B<2)return(B=this.node()["__on"+le])&&B._;O=!1}return this.each(He(le,E,O))};var Xe=d.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Je(le,E){return function(O){var B=d.event;d.event=O,E[0]=this.__data__;try{le.apply(this,E)}finally{d.event=B}}}function at(le,E){var O=Je(le,E);return function(B){var q=B.relatedTarget;q&&(q===this||8&q.compareDocumentPosition(this))||O.call(this,B)}}t&&Xe.forEach(function(le){"on"+le in t&&Xe.remove(le)});var pt,xt=0;function Ft(le){var E=".dragsuppress-"+ ++xt,O="click"+E,B=d.select(i(le)).on("touchmove"+E,Y).on("dragstart"+E,Y).on("selectstart"+E,Y);if(null==pt&&(pt=!("onselectstart"in le)&&F(le.style,"userSelect")),pt){var q=e(le).style,ae=q[pt];q[pt]="none"}return function(he){if(B.on(E,null),pt&&(q[pt]=ae),he){var me=function(){B.on(O,null)};B.on(O,function(){Y(),me()},!0),setTimeout(me,0)}}}d.mouse=function(le){return ot(le,W())};var Dt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ot(le,E){E.changedTouches&&(E=E.changedTouches[0]);var O=le.ownerSVGElement||le;if(O.createSVGPoint){var B=O.createSVGPoint();if(Dt<0){var q=i(le);if(q.scrollX||q.scrollY){var ae=(O=d.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Dt=!(ae.f||ae.e),O.remove()}}return Dt?(B.x=E.pageX,B.y=E.pageY):(B.x=E.clientX,B.y=E.clientY),[(B=B.matrixTransform(le.getScreenCTM().inverse())).x,B.y]}var he=le.getBoundingClientRect();return[E.clientX-he.left-le.clientLeft,E.clientY-he.top-le.clientTop]}function it(){return d.event.changedTouches[0].identifier}d.touch=function(le,E,O){if(arguments.length<3&&(O=E,E=W().changedTouches),E)for(var B,q=0,ae=E.length;q<ae;++q)if((B=E[q]).identifier===O)return ot(le,B)},d.behavior.drag=function(){var le=te(q,"drag","dragstart","dragend"),E=null,O=ae(U,d.mouse,i,"mousemove","mouseup"),B=ae(it,d.touch,C,"touchmove","touchend");function q(){this.on("mousedown.drag",O).on("touchstart.drag",B)}function ae(he,me,_e,Se,Ve){return function(){var Ke,st=this,At=d.event.target.correspondingElement||d.event.target,Pt=st.parentNode,St=le.of(st,arguments),Lt=0,kt=he(),Ht=".drag"+(null==kt?"":"-"+kt),jt=d.select(_e(At)).on(Se+Ht,vr).on(Ve+Ht,Or),Yt=Ft(At),lr=me(Pt,kt);function vr(){var Dr,sn,on=me(Pt,kt);on&&(Lt|=(Dr=on[0]-lr[0])|(sn=on[1]-lr[1]),lr=on,St({type:"drag",x:on[0]+Ke[0],y:on[1]+Ke[1],dx:Dr,dy:sn}))}function Or(){me(Pt,kt)&&(jt.on(Se+Ht,null).on(Ve+Ht,null),Yt(Lt),St({type:"dragend"}))}Ke=E?[(Ke=E.apply(st,arguments)).x-lr[0],Ke.y-lr[1]]:[0,0],St({type:"dragstart"})}}return q.origin=function(he){return arguments.length?(E=he,q):E},d.rebind(q,le,"on")},d.touches=function(le,E){return arguments.length<2&&(E=W().touches),E?_(E).map(function(O){var B=ot(le,O);return B.identifier=O.identifier,B}):[]};var Et=1e-6,Xt=Math.PI,nr=2*Xt,Ue=nr-Et,We=Xt/2,Be=Xt/180,Qe=180/Xt;function Ae(le){return le>1?We:le<-1?-We:Math.asin(le)}function De(le){return((le=Math.exp(le))+1/le)/2}var Oe=Math.SQRT2;d.interpolateZoom=function(le,E){var O,B,q=le[0],ae=le[1],he=le[2],Se=E[2],Ve=E[0]-q,Ke=E[1]-ae,st=Ve*Ve+Ke*Ke;if(st<1e-12)B=Math.log(Se/he)/Oe,O=function(Ht){return[q+Ht*Ve,ae+Ht*Ke,he*Math.exp(Oe*Ht*B)]};else{var At=Math.sqrt(st),Pt=(Se*Se-he*he+4*st)/(2*he*2*At),St=(Se*Se-he*he-4*st)/(2*Se*2*At),Lt=Math.log(Math.sqrt(Pt*Pt+1)-Pt),kt=Math.log(Math.sqrt(St*St+1)-St);B=(kt-Lt)/Oe,O=function(Ht){var jt,Or,Yt=Ht*B,lr=De(Lt),vr=he/(2*At)*(lr*(jt=Oe*Yt+Lt,((jt=Math.exp(2*jt))-1)/(jt+1))-(Or=Lt,((Or=Math.exp(Or))-1/Or)/2));return[q+vr*Ve,ae+vr*Ke,he*lr/De(Oe*Yt+Lt)]}}return O.duration=1e3*B,O},d.behavior.zoom=function(){var le,E,O,B,q,ae,he,me,_e,Se={x:0,y:0,k:1},Ve=[960,500],Ke=ct,st=250,At=0,Pt="mousedown.zoom",St="mousemove.zoom",Lt="mouseup.zoom",kt="touchstart.zoom",Ht=te(jt,"zoomstart","zoom","zoomend");function jt(Jr){Jr.on(Pt,gn).on(et+".zoom",ti).on("dblclick.zoom",gi).on(kt,Xn)}function Yt(Jr){return[(Jr[0]-Se.x)/Se.k,(Jr[1]-Se.y)/Se.k]}function lr(Jr){Se.k=Math.max(Ke[0],Math.min(Ke[1],Jr))}function vr(Jr,Pn){var ri;Se.x+=Jr[0]-(Pn=[(ri=Pn)[0]*Se.k+Se.x,ri[1]*Se.k+Se.y])[0],Se.y+=Jr[1]-Pn[1]}function Or(Jr,Pn,ri,$n){Jr.__chart__={x:Se.x,y:Se.y,k:Se.k},lr(Math.pow(2,$n)),vr(E=Pn,ri),Jr=d.select(Jr),st>0&&(Jr=Jr.transition().duration(st)),Jr.call(jt.event)}function Dr(){he&&he.domain(ae.range().map(function(Jr){return(Jr-Se.x)/Se.k}).map(ae.invert)),_e&&_e.domain(me.range().map(function(Jr){return(Jr-Se.y)/Se.k}).map(me.invert))}function sn(Jr){At++||Jr({type:"zoomstart"})}function on(Jr){Dr(),Jr({type:"zoom",scale:Se.k,translate:[Se.x,Se.y]})}function kn(Jr){--At||(Jr({type:"zoomend"}),E=null)}function gn(){var Jr=this,Pn=Ht.of(Jr,arguments),ri=0,$n=d.select(i(Jr)).on(St,Ii).on(Lt,ai),ui=Yt(d.mouse(Jr)),_i=Ft(Jr);function Ii(){ri=1,vr(d.mouse(Jr),ui),on(Pn)}function ai(){$n.on(St,null).on(Lt,null),_i(ri),kn(Pn)}Cs.call(Jr),sn(Pn)}function Xn(){var Jr,Pn=this,ri=Ht.of(Pn,arguments),$n={},ui=0,_i=".zoom-"+d.event.changedTouches[0].identifier,Ii="touchmove"+_i,ai="touchend"+_i,Si=[],Mi=d.select(Pn),Fi=Ft(Pn);function Ci(){var Ga=d.touches(Pn);return Jr=Se.k,Ga.forEach(function(Za){Za.identifier in $n&&($n[Za.identifier]=Yt(Za))}),Ga}function Bi(){var Ga=d.event.target;d.select(Ga).on(Ii,Wi).on(ai,wa),Si.push(Ga);for(var Za=d.event.changedTouches,xa=0,Ra=Za.length;xa<Ra;++xa)$n[Za[xa].identifier]=null;var Ca=Ci(),Po=Date.now();if(1===Ca.length){if(Po-q<500){var oo=Ca[0];Or(Pn,oo,$n[oo.identifier],Math.floor(Math.log(Se.k)/Math.LN2)+1),Y()}q=Po}else if(Ca.length>1){var Xo=Ca[1],Is=(oo=Ca[0])[0]-Xo[0],Us=oo[1]-Xo[1];ui=Is*Is+Us*Us}}function Wi(){var Ga,Za,xa,Ra,Ca=d.touches(Pn);Cs.call(Pn);for(var Po=0,oo=Ca.length;Po<oo;++Po,Ra=null)if(Ra=$n[(xa=Ca[Po]).identifier]){if(Za)break;Ga=xa,Za=Ra}if(Ra){var Xo=(Xo=xa[0]-Ga[0])*Xo+(Xo=xa[1]-Ga[1])*Xo,Is=ui&&Math.sqrt(Xo/ui);Ga=[(Ga[0]+xa[0])/2,(Ga[1]+xa[1])/2],Za=[(Za[0]+Ra[0])/2,(Za[1]+Ra[1])/2],lr(Is*Jr)}q=null,vr(Ga,Za),on(ri)}function wa(){if(d.event.touches.length){for(var Ga=d.event.changedTouches,Za=0,xa=Ga.length;Za<xa;++Za)delete $n[Ga[Za].identifier];for(var Ra in $n)return void Ci()}d.selectAll(Si).on(_i,null),Mi.on(Pt,gn).on(kt,Xn),Fi(),kn(ri)}Bi(),sn(ri),Mi.on(Pt,null).on(kt,Bi)}function ti(){var Jr=Ht.of(this,arguments);B?clearTimeout(B):(Cs.call(this),le=Yt(E=O||d.mouse(this)),sn(Jr)),B=setTimeout(function(){B=null,kn(Jr)},50),Y(),lr(Math.pow(2,.002*Ie())*Se.k),vr(E,le),on(Jr)}function gi(){var Jr=d.mouse(this),Pn=Math.log(Se.k)/Math.LN2;Or(this,Jr,Yt(Jr),d.event.shiftKey?Math.ceil(Pn)-1:Math.floor(Pn)+1)}return et||(et="onwheel"in t?(Ie=function(){return-d.event.deltaY*(d.event.deltaMode?120:1)},"wheel"):"onmousewheel"in t?(Ie=function(){return d.event.wheelDelta},"mousewheel"):(Ie=function(){return-d.event.detail},"MozMousePixelScroll")),jt.event=function(Jr){Jr.each(function(){var Pn=Ht.of(this,arguments),ri=Se;ms?d.select(this).transition().each("start.zoom",function(){Se=this.__chart__||{x:0,y:0,k:1},sn(Pn)}).tween("zoom:zoom",function(){var $n=Ve[0],_i=E?E[0]:$n/2,Ii=E?E[1]:Ve[1]/2,ai=d.interpolateZoom([(_i-Se.x)/Se.k,(Ii-Se.y)/Se.k,$n/Se.k],[(_i-ri.x)/ri.k,(Ii-ri.y)/ri.k,$n/ri.k]);return function(Si){var Mi=ai(Si),Fi=$n/Mi[2];this.__chart__=Se={x:_i-Mi[0]*Fi,y:Ii-Mi[1]*Fi,k:Fi},on(Pn)}}).each("interrupt.zoom",function(){kn(Pn)}).each("end.zoom",function(){kn(Pn)}):(this.__chart__=Se,sn(Pn),on(Pn),kn(Pn))})},jt.translate=function(Jr){return arguments.length?(Se={x:+Jr[0],y:+Jr[1],k:Se.k},Dr(),jt):[Se.x,Se.y]},jt.scale=function(Jr){return arguments.length?(Se={x:Se.x,y:Se.y,k:null},lr(+Jr),Dr(),jt):Se.k},jt.scaleExtent=function(Jr){return arguments.length?(Ke=null==Jr?ct:[+Jr[0],+Jr[1]],jt):Ke},jt.center=function(Jr){return arguments.length?(O=Jr&&[+Jr[0],+Jr[1]],jt):O},jt.size=function(Jr){return arguments.length?(Ve=Jr&&[+Jr[0],+Jr[1]],jt):Ve},jt.duration=function(Jr){return arguments.length?(st=+Jr,jt):st},jt.x=function(Jr){return arguments.length?(he=Jr,ae=Jr.copy(),Se={x:0,y:0,k:1},jt):he},jt.y=function(Jr){return arguments.length?(_e=Jr,me=Jr.copy(),Se={x:0,y:0,k:1},jt):_e},d.rebind(jt,Ht,"on")};var Ie,et,ct=[0,1/0];function vt(){}function ft(le,E,O){return this instanceof ft?(this.h=+le,this.s=+E,void(this.l=+O)):arguments.length<2?le instanceof ft?new ft(le.h,le.s,le.l):_r(""+le,xr,ft):new ft(le,E,O)}d.color=vt,vt.prototype.toString=function(){return this.rgb()+""},d.hsl=ft;var It=ft.prototype=new vt;function ut(le,E,O){var B,q;function ae(he){return Math.round(255*((me=he)>360?me-=360:me<0&&(me+=360),me<60?B+(q-B)*me/60:me<180?q:me<240?B+(q-B)*(240-me)/60:B));var me}return le=isNaN(le)?0:(le%=360)<0?le+360:le,E=isNaN(E)||E<0?0:E>1?1:E,B=2*(O=O<0?0:O>1?1:O)-(q=O<=.5?O*(1+E):O+E-O*E),new Zt(ae(le+120),ae(le),ae(le-120))}function Ot(le,E,O){return this instanceof Ot?(this.h=+le,this.c=+E,void(this.l=+O)):arguments.length<2?le instanceof Ot?new Ot(le.h,le.c,le.l):Re(le instanceof yt?le.l:(le=dr((le=d.rgb(le)).r,le.g,le.b)).l,le.a,le.b):new Ot(le,E,O)}It.brighter=function(le){return le=Math.pow(.7,arguments.length?le:1),new ft(this.h,this.s,this.l/le)},It.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new ft(this.h,this.s,le*this.l)},It.rgb=function(){return ut(this.h,this.s,this.l)},d.hcl=Ot;var Rt=Ot.prototype=new vt;function $e(le,E,O){return isNaN(le)&&(le=0),isNaN(E)&&(E=0),new yt(O,Math.cos(le*=Be)*E,Math.sin(le)*E)}function yt(le,E,O){return this instanceof yt?(this.l=+le,this.a=+E,void(this.b=+O)):arguments.length<2?le instanceof yt?new yt(le.l,le.a,le.b):le instanceof Ot?$e(le.h,le.c,le.l):dr((le=Zt(le)).r,le.g,le.b):new yt(le,E,O)}Rt.brighter=function(le){return new Ot(this.h,this.c,Math.min(100,this.l+Bt*(arguments.length?le:1)))},Rt.darker=function(le){return new Ot(this.h,this.c,Math.max(0,this.l-Bt*(arguments.length?le:1)))},Rt.rgb=function(){return $e(this.h,this.c,this.l).rgb()},d.lab=yt;var Bt=18,Ut=yt.prototype=new vt;function Qt(le,E,O){var B=(le+16)/116,q=B+E/500,ae=B-O/200;return new Zt(Nt(3.2404542*(q=.95047*ht(q))-1.5371385*(B=1*ht(B))-.4985314*(ae=1.08883*ht(ae))),Nt(-.969266*q+1.8760108*B+.041556*ae),Nt(.0556434*q-.2040259*B+1.0572252*ae))}function Re(le,E,O){return le>0?new Ot(Math.atan2(O,E)*Qe,Math.sqrt(E*E+O*O),le):new Ot(NaN,NaN,le)}function ht(le){return le>.206893034?le*le*le:(le-4/29)/7.787037}function Mt(le){return le>.008856?Math.pow(le,1/3):7.787037*le+4/29}function Nt(le){return Math.round(255*(le<=.00304?12.92*le:1.055*Math.pow(le,1/2.4)-.055))}function Zt(le,E,O){return this instanceof Zt?(this.r=~~le,this.g=~~E,void(this.b=~~O)):arguments.length<2?le instanceof Zt?new Zt(le.r,le.g,le.b):_r(""+le,Zt,ut):new Zt(le,E,O)}function or(le){return new Zt(le>>16,le>>8&255,255&le)}function Wt(le){return or(le)+""}Ut.brighter=function(le){return new yt(Math.min(100,this.l+Bt*(arguments.length?le:1)),this.a,this.b)},Ut.darker=function(le){return new yt(Math.max(0,this.l-Bt*(arguments.length?le:1)),this.a,this.b)},Ut.rgb=function(){return Qt(this.l,this.a,this.b)},d.rgb=Zt;var er=Zt.prototype=new vt;function cr(le){return le<16?"0"+Math.max(0,le).toString(16):Math.min(255,le).toString(16)}function _r(le,E,O){var B,q,ae,he=0,me=0,_e=0;if(B=/([a-z]+)\((.*)\)/.exec(le=le.toLowerCase()))switch(q=B[2].split(","),B[1]){case"hsl":return O(parseFloat(q[0]),parseFloat(q[1])/100,parseFloat(q[2])/100);case"rgb":return E(br(q[0]),br(q[1]),br(q[2]))}return(ae=Nr.get(le))?E(ae.r,ae.g,ae.b):(null==le||"#"!==le.charAt(0)||isNaN(ae=parseInt(le.slice(1),16))||(4===le.length?(he=(3840&ae)>>4,he|=he>>4,me=240&ae,me|=me>>4,_e=15&ae,_e|=_e<<4):7===le.length&&(he=(16711680&ae)>>16,me=(65280&ae)>>8,_e=255&ae)),E(he,me,_e))}function xr(le,E,O){var B,q,ae=Math.min(le/=255,E/=255,O/=255),he=Math.max(le,E,O),me=he-ae,_e=(he+ae)/2;return me?(q=_e<.5?me/(he+ae):me/(2-he-ae),B=le==he?(E-O)/me+(E<O?6:0):E==he?(O-le)/me+2:(le-E)/me+4,B*=60):(B=NaN,q=_e>0&&_e<1?0:B),new ft(B,q,_e)}function dr(le,E,O){var B=Mt((.4124564*(le=pr(le))+.3575761*(E=pr(E))+.1804375*(O=pr(O)))/.95047),q=Mt((.2126729*le+.7151522*E+.072175*O)/1);return yt(116*q-16,500*(B-q),200*(q-Mt((.0193339*le+.119192*E+.9503041*O)/1.08883)))}function pr(le){return(le/=255)<=.04045?le/12.92:Math.pow((le+.055)/1.055,2.4)}function br(le){var E=parseFloat(le);return"%"===le.charAt(le.length-1)?Math.round(2.55*E):E}er.brighter=function(le){le=Math.pow(.7,arguments.length?le:1);var E=this.r,O=this.g,B=this.b,q=30;return E||O||B?(E&&E<q&&(E=q),O&&O<q&&(O=q),B&&B<q&&(B=q),new Zt(Math.min(255,E/le),Math.min(255,O/le),Math.min(255,B/le))):new Zt(q,q,q)},er.darker=function(le){return new Zt((le=Math.pow(.7,arguments.length?le:1))*this.r,le*this.g,le*this.b)},er.hsl=function(){return xr(this.r,this.g,this.b)},er.toString=function(){return"#"+cr(this.r)+cr(this.g)+cr(this.b)};var Nr=d.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function kr(le){return"function"==typeof le?le:function(){return le}}function Hr(le){return function(E,O,B){return 2===arguments.length&&"function"==typeof O&&(B=O,O=null),an(E,O,le,B)}}function an(le,E,O,B){var Ve,q={},ae=d.dispatch("beforesend","progress","load","error"),he={},me=new XMLHttpRequest,_e=null;function Se(){var Ve,st,At,Ke=me.status;if(!Ke&&((At=(st=me).responseType)&&"text"!==At?st.response:st.responseText)||Ke>=200&&Ke<300||304===Ke){try{Ve=O.call(q,me)}catch(st){return void ae.error.call(q,st)}ae.load.call(q,Ve)}else ae.error.call(q,me)}return self.XDomainRequest&&!("withCredentials"in me)&&/^(http(s)?:)?\/\//.test(le)&&(me=new XDomainRequest),"onload"in me?me.onload=me.onerror=Se:me.onreadystatechange=function(){me.readyState>3&&Se()},me.onprogress=function(Ve){var Ke=d.event;d.event=Ve;try{ae.progress.call(q,me)}finally{d.event=Ke}},q.header=function(Ve,Ke){return Ve=(Ve+"").toLowerCase(),arguments.length<2?he[Ve]:(null==Ke?delete he[Ve]:he[Ve]=Ke+"",q)},q.mimeType=function(Ve){return arguments.length?(E=null==Ve?null:Ve+"",q):E},q.responseType=function(Ve){return arguments.length?(_e=Ve,q):_e},q.response=function(Ve){return O=Ve,q},["get","post"].forEach(function(Ve){q[Ve]=function(){return q.send.apply(q,[Ve].concat(_(arguments)))}}),q.send=function(Ve,Ke,st){if(2===arguments.length&&"function"==typeof Ke&&(st=Ke,Ke=null),me.open(Ve,le,!0),null==E||"accept"in he||(he.accept=E+",*/*"),me.setRequestHeader)for(var At in he)me.setRequestHeader(At,he[At]);return null!=E&&me.overrideMimeType&&me.overrideMimeType(E),null!=_e&&(me.responseType=_e),null!=st&&q.on("error",st).on("load",function(Pt){st(null,Pt)}),ae.beforesend.call(q,me),me.send(null==Ke?null:Ke),q},q.abort=function(){return me.abort(),q},d.rebind(q,ae,"on"),null==B?q:q.get(1===(Ve=B).length?function(Ke,st){Ve(null==Ke?st:null)}:Ve)}Nr.forEach(function(le,E){Nr.set(le,or(E))}),d.functor=kr,d.xhr=Hr(C),d.dsv=function(le,E){var O=new RegExp('["'+le+"\n]"),B=le.charCodeAt(0);function q(Se,Ve,Ke){arguments.length<3&&(Ke=Ve,Ve=null);var st=an(Se,E,null==Ve?ae:he(Ve),Ke);return st.row=function(At){return arguments.length?st.response(null==(Ve=At)?ae:he(At)):Ve},st}function ae(Se){return q.parse(Se.responseText)}function he(Se){return function(Ve){return q.parse(Ve.responseText,Se)}}function me(Se){return Se.map(_e).join(le)}function _e(Se){return O.test(Se)?'"'+Se.replace(/\"/g,'""')+'"':Se}return q.parse=function(Se,Ve){var Ke;return q.parseRows(Se,function(st,At){if(Ke)return Ke(st,At-1);var Pt=function(St){for(var Lt={},kt=st.length,Ht=0;Ht<kt;++Ht)Lt[st[Ht]]=St[Ht];return Lt};Ke=Ve?function(St,Lt){return Ve(Pt(St),Lt)}:Pt})},q.parseRows=function(Se,Ve){var Ke,st,At={},Pt={},St=[],Lt=Se.length,kt=0,Ht=0;function jt(){if(kt>=Lt)return Pt;if(st)return st=!1,At;var lr=kt;if(34===Se.charCodeAt(lr)){for(var vr=lr;vr++<Lt;)if(34===Se.charCodeAt(vr)){if(34!==Se.charCodeAt(vr+1))break;++vr}return kt=vr+2,13===(Or=Se.charCodeAt(vr+1))?(st=!0,10===Se.charCodeAt(vr+2)&&++kt):10===Or&&(st=!0),Se.slice(lr+1,vr).replace(/""/g,'"')}for(;kt<Lt;){var Or,Dr=1;if(10===(Or=Se.charCodeAt(kt++)))st=!0;else if(13===Or)st=!0,10===Se.charCodeAt(kt)&&(++kt,++Dr);else if(Or!==B)continue;return Se.slice(lr,kt-Dr)}return Se.slice(lr)}for(;(Ke=jt())!==Pt;){for(var Yt=[];Ke!==At&&Ke!==Pt;)Yt.push(Ke),Ke=jt();Ve&&null==(Yt=Ve(Yt,Ht++))||St.push(Yt)}return St},q.format=function(Se){if(Array.isArray(Se[0]))return q.formatRows(Se);var Ve=new S,Ke=[];return Se.forEach(function(st){for(var At in st)Ve.has(At)||Ke.push(Ve.add(At))}),[Ke.map(_e).join(le)].concat(Se.map(function(st){return Ke.map(function(At){return _e(st[At])}).join(le)})).join("\n")},q.formatRows=function(Se){return Se.map(me).join("\n")},q},d.csv=d.dsv(",","text/csv"),d.tsv=d.dsv("\t","text/tab-separated-values");var fn,zn,Nn,In,cn=this[F(this,"requestAnimationFrame")]||function(le){setTimeout(le,17)};function jr(le,E,O){var B=arguments.length;B<2&&(E=0),B<3&&(O=Date.now());var ae={c:le,t:O+E,n:null};return zn?zn.n=ae:fn=ae,zn=ae,Nn||(In=clearTimeout(In),Nn=1,cn(Lr)),ae}function Lr(){var le=Xr(),E=Un()-le;E>24?(isFinite(E)&&(clearTimeout(In),In=setTimeout(Lr,E)),Nn=0):(Nn=1,cn(Lr))}function Xr(){for(var le=Date.now(),E=fn;E;)le>=E.t&&E.c(le-E.t)&&(E.c=null),E=E.n;return le}function Un(){for(var le,E=fn,O=1/0;E;)E.c?(E.t<O&&(O=E.t),E=(le=E).n):E=le?le.n=E.n:fn=E.n;return zn=le,O}function qr(le){return le[0]}function On(le){return le[1]}function Tn(le){for(var E,O,B,q=le.length,ae=[0,1],he=2,me=2;me<q;me++){for(;he>1&&((O=le[ae[he-1]])[0]-(E=le[ae[he-2]])[0])*((B=le[me])[1]-E[1])-(O[1]-E[1])*(B[0]-E[0])<=0;)--he;ae[he++]=me}return ae.slice(0,he)}function rn(le,E){return le[0]-E[0]||le[1]-E[1]}d.timer=function(){jr.apply(this,arguments)},d.timer.flush=function(){Xr(),Un()},d.round=function(le,E){return E?Math.round(le*(E=Math.pow(10,E)))/E:Math.round(le)},d.geom={},d.geom.hull=function(le){var E=qr,O=On;if(arguments.length)return B(le);function B(q){if(q.length<3)return[];var ae,he=kr(E),me=kr(O),_e=q.length,Se=[],Ve=[];for(ae=0;ae<_e;ae++)Se.push([+he.call(this,q[ae],ae),+me.call(this,q[ae],ae),ae]);for(Se.sort(rn),ae=0;ae<_e;ae++)Ve.push([Se[ae][0],-Se[ae][1]]);var Ke=Tn(Se),st=Tn(Ve),At=st[0]===Ke[0],Pt=st[st.length-1]===Ke[Ke.length-1],St=[];for(ae=Ke.length-1;ae>=0;--ae)St.push(q[Se[Ke[ae]][2]]);for(ae=+At;ae<st.length-Pt;++ae)St.push(q[Se[st[ae]][2]]);return St}return B.x=function(q){return arguments.length?(E=q,B):E},B.y=function(q){return arguments.length?(O=q,B):O},B},d.geom.polygon=function(le){return N(le,Vn),le};var Vn=d.geom.polygon.prototype=[];function ar(le,E,O){return(O[0]-E[0])*(le[1]-E[1])<(O[1]-E[1])*(le[0]-E[0])}function zt(le,E,O,B){var q=le[0],ae=O[0],he=E[0]-q,me=B[0]-ae,_e=le[1],Se=O[1],Ve=E[1]-_e,Ke=B[1]-Se,st=(me*(_e-Se)-Ke*(q-ae))/(Ke*he-me*Ve);return[q+st*he,_e+st*Ve]}function Gt(le){var E=le[0],O=le[le.length-1];return!(E[0]-O[0]||E[1]-O[1])}Vn.area=function(){for(var le,E=-1,O=this.length,B=this[O-1],q=0;++E<O;)q+=(le=B)[1]*(B=this[E])[0]-le[0]*B[1];return.5*q},Vn.centroid=function(le){var E,O,B=-1,q=this.length,ae=0,he=0,me=this[q-1];for(arguments.length||(le=-1/(6*this.area()));++B<q;)ae+=((E=me)[0]+(me=this[B])[0])*(O=E[0]*me[1]-me[0]*E[1]),he+=(E[1]+me[1])*O;return[ae*le,he*le]},Vn.clip=function(le){for(var E,O,B,q,ae,he,me=Gt(le),_e=-1,Se=this.length-Gt(this),Ve=this[Se-1];++_e<Se;){for(E=le.slice(),le.length=0,q=this[_e],ae=E[(B=E.length-me)-1],O=-1;++O<B;)ar(he=E[O],Ve,q)?(ar(ae,Ve,q)||le.push(zt(ae,he,Ve,q)),le.push(he)):ar(ae,Ve,q)&&le.push(zt(ae,he,Ve,q)),ae=he;me&&le.push(le[0]),Ve=q}return le};var mr,Er,tn,Qr,Cr,Mr=[],Ir=[];function Sr(){la(this),this.edge=this.site=this.circle=null}function Pr(le){var E=Mr.pop()||new Sr;return E.site=le,E}function Kr(le){Dn(le),tn.remove(le),Mr.push(le),la(le)}function vn(le){var E=le.circle,O=E.x,B=E.cy,q={x:O,y:B},ae=le.P,he=le.N,me=[le];Kr(le);for(var _e=ae;_e.circle&&l(O-_e.circle.x)<Et&&l(B-_e.circle.cy)<Et;)ae=_e.P,me.unshift(_e),Kr(_e),_e=ae;me.unshift(_e),Dn(_e);for(var Se=he;Se.circle&&l(O-Se.circle.x)<Et&&l(B-Se.circle.cy)<Et;)he=Se.N,me.push(Se),Kr(Se),Se=he;me.push(Se),Dn(Se);var Ve,Ke=me.length;for(Ve=1;Ve<Ke;++Ve)yi((Se=me[Ve]).edge,(_e=me[Ve-1]).site,Se.site,q);(Se=me[Ke-1]).edge=An((_e=me[0]).site,Se.site,null,q),Mn(_e),Mn(Se)}function Cn(le){for(var E,O,B,q,ae=le.x,he=le.y,me=tn._;me;)if((B=ln(me,he)-ae)>Et)me=me.L;else{if(!((q=ae-yn(me,he))>Et)){B>-Et?(E=me.P,O=me):q>-Et?(E=me,O=me.N):E=O=me;break}if(!me.R){E=me;break}me=me.R}var _e=Pr(le);if(tn.insert(E,_e),E||O){if(E===O)return Dn(E),O=Pr(E.site),tn.insert(_e,O),_e.edge=O.edge=An(E.site,_e.site),Mn(E),void Mn(O);if(O){Dn(E),Dn(O);var Se=E.site,Ve=Se.x,Ke=Se.y,st=le.x-Ve,At=le.y-Ke,Pt=O.site,St=Pt.x-Ve,Lt=Pt.y-Ke,kt=2*(st*Lt-At*St),Ht=st*st+At*At,jt=St*St+Lt*Lt,Yt={x:(Lt*Ht-At*jt)/kt+Ve,y:(st*jt-St*Ht)/kt+Ke};yi(O.edge,Se,Pt,Yt),_e.edge=An(Se,le,null,Yt),O.edge=An(le,Pt,null,Yt),Mn(E),Mn(O)}else _e.edge=An(E.site,_e.site)}}function ln(le,E){var O=le.site,B=O.x,q=O.y,ae=q-E;if(!ae)return B;var he=le.P;if(!he)return-1/0;var me=(O=he.site).x,_e=O.y,Se=_e-E;if(!Se)return me;var Ve=me-B,Ke=1/ae-1/Se,st=Ve/Se;return Ke?(-st+Math.sqrt(st*st-2*Ke*(Ve*Ve/(-2*Se)-_e+Se/2+q-ae/2)))/Ke+B:(B+me)/2}function yn(le,E){var O=le.N;if(O)return ln(O,E);var B=le.site;return B.y===E?B.x:1/0}function Zr(le){this.site=le,this.edges=[]}function Wr(le,E){return E.angle-le.angle}function pn(){la(this),this.x=this.y=this.arc=this.site=this.cy=null}function Mn(le){var E=le.P,O=le.N;if(E&&O){var B=E.site,q=le.site,ae=O.site;if(B!==ae){var he=q.x,me=q.y,_e=B.x-he,Se=B.y-me,Ve=ae.x-he,Ke=2*(_e*(Lt=ae.y-me)-Se*Ve);if(!(Ke>=-1e-12)){var st=_e*_e+Se*Se,At=Ve*Ve+Lt*Lt,Pt=(Lt*st-Se*At)/Ke,St=(_e*At-Ve*st)/Ke,Lt=St+me,kt=Ir.pop()||new pn;kt.arc=le,kt.site=q,kt.x=Pt+he,kt.y=Lt+Math.sqrt(Pt*Pt+St*St),kt.cy=Lt,le.circle=kt;for(var Ht=null,jt=Cr._;jt;)if(kt.y<jt.y||kt.y===jt.y&&kt.x<=jt.x){if(!jt.L){Ht=jt.P;break}jt=jt.L}else{if(!jt.R){Ht=jt;break}jt=jt.R}Cr.insert(Ht,kt),Ht||(Qr=kt)}}}}function Dn(le){var E=le.circle;E&&(E.P||(Qr=E.N),Cr.remove(E),Ir.push(E),la(E),le.circle=null)}function hi(le,E){var O=le.b;if(O)return!0;var B,q,ae=le.a,he=E[0][0],me=E[1][0],_e=E[0][1],Se=E[1][1],Ve=le.l,Ke=le.r,st=Ve.x,At=Ve.y,Pt=Ke.x,St=Ke.y,Lt=(st+Pt)/2;if(St===At){if(Lt<he||Lt>=me)return;if(st>Pt){if(ae){if(ae.y>=Se)return}else ae={x:Lt,y:_e};O={x:Lt,y:Se}}else{if(ae){if(ae.y<_e)return}else ae={x:Lt,y:Se};O={x:Lt,y:_e}}}else if(q=(At+St)/2-(B=(st-Pt)/(St-At))*Lt,B<-1||B>1)if(st>Pt){if(ae){if(ae.y>=Se)return}else ae={x:(_e-q)/B,y:_e};O={x:(Se-q)/B,y:Se}}else{if(ae){if(ae.y<_e)return}else ae={x:(Se-q)/B,y:Se};O={x:(_e-q)/B,y:_e}}else if(At<St){if(ae){if(ae.x>=me)return}else ae={x:he,y:B*he+q};O={x:me,y:B*me+q}}else{if(ae){if(ae.x<he)return}else ae={x:me,y:B*me+q};O={x:he,y:B*he+q}}return le.a=ae,le.b=O,!0}function Qn(le,E){this.l=le,this.r=E,this.a=this.b=null}function An(le,E,O,B){var q=new Qn(le,E);return mr.push(q),O&&yi(q,le,E,O),B&&yi(q,E,le,B),Er[le.i].edges.push(new Xi(q,le,E)),Er[E.i].edges.push(new Xi(q,E,le)),q}function ci(le,E,O){var B=new Qn(le,null);return B.a=E,B.b=O,mr.push(B),B}function yi(le,E,O,B){le.a||le.b?le.l===O?le.b=B:le.a=B:(le.a=B,le.l=E,le.r=O)}function Xi(le,E,O){var B=le.a,q=le.b;this.edge=le,this.site=E,this.angle=O?Math.atan2(O.y-E.y,O.x-E.x):le.l===E?Math.atan2(q.x-B.x,B.y-q.y):Math.atan2(B.x-q.x,q.y-B.y)}function Da(){this._=null}function la(le){le.U=le.C=le.L=le.R=le.P=le.N=null}function Ma(le,E){var O=E,B=E.R,q=O.U;q?q.L===O?q.L=B:q.R=B:le._=B,B.U=q,O.U=B,O.R=B.L,O.R&&(O.R.U=O),B.L=O}function Oi(le,E){var O=E,B=E.L,q=O.U;q?q.L===O?q.L=B:q.R=B:le._=B,B.U=q,O.U=B,O.L=B.R,O.L&&(O.L.U=O),B.R=O}function Yi(le){for(;le.L;)le=le.L;return le}function _a(le,E){var O,B,q,ae=le.sort(Co).pop();for(mr=[],Er=new Array(le.length),tn=new Da,Cr=new Da;;)if(q=Qr,ae&&(!q||ae.y<q.y||ae.y===q.y&&ae.x<q.x))ae.x===O&&ae.y===B||(Er[ae.i]=new Zr(ae),Cn(ae),O=ae.x,B=ae.y),ae=le.pop();else{if(!q)break;vn(q.arc)}E&&(function(me){for(var _e,Se,Ve,Ke,st,At=mr,Pt=(Se=me[0][0],Ve=me[0][1],Ke=me[1][0],st=me[1][1],function(Lt){var kt,Ht=Lt.a,jt=Lt.b,Yt=Ht.x,lr=Ht.y,vr=0,Or=1,Dr=jt.x-Yt,sn=jt.y-lr;if(kt=Se-Yt,Dr||!(kt>0)){if(kt/=Dr,Dr<0){if(kt<vr)return;kt<Or&&(Or=kt)}else if(Dr>0){if(kt>Or)return;kt>vr&&(vr=kt)}if(kt=Ke-Yt,Dr||!(kt<0)){if(kt/=Dr,Dr<0){if(kt>Or)return;kt>vr&&(vr=kt)}else if(Dr>0){if(kt<vr)return;kt<Or&&(Or=kt)}if(kt=Ve-lr,sn||!(kt>0)){if(kt/=sn,sn<0){if(kt<vr)return;kt<Or&&(Or=kt)}else if(sn>0){if(kt>Or)return;kt>vr&&(vr=kt)}if(kt=st-lr,sn||!(kt<0)){if(kt/=sn,sn<0){if(kt>Or)return;kt>vr&&(vr=kt)}else if(sn>0){if(kt<vr)return;kt<Or&&(Or=kt)}return vr>0&&(Lt.a={x:Yt+vr*Dr,y:lr+vr*sn}),Or<1&&(Lt.b={x:Yt+Or*Dr,y:lr+Or*sn}),Lt}}}}}),St=At.length;St--;)(!hi(_e=At[St],me)||!Pt(_e)||l(_e.a.x-_e.b.x)<Et&&l(_e.a.y-_e.b.y)<Et)&&(_e.a=_e.b=null,At.splice(St,1))}(E),function(me){for(var _e,Se,Ve,Ke,st,At,Pt,St,Lt,kt,Ht=me[0][0],jt=me[1][0],Yt=me[0][1],lr=me[1][1],vr=Er,Or=vr.length;Or--;)if((st=vr[Or])&&st.prepare())for(St=(Pt=st.edges).length,At=0;At<St;)Ve=(kt=Pt[At].end()).x,Ke=kt.y,_e=(Lt=Pt[++At%St].start()).x,Se=Lt.y,(l(Ve-_e)>Et||l(Ke-Se)>Et)&&(Pt.splice(At,0,new Xi(ci(st.site,kt,l(Ve-Ht)<Et&&lr-Ke>Et?{x:Ht,y:l(_e-Ht)<Et?Se:lr}:l(Ke-lr)<Et&&jt-Ve>Et?{x:l(Se-lr)<Et?_e:jt,y:lr}:l(Ve-jt)<Et&&Ke-Yt>Et?{x:jt,y:l(_e-jt)<Et?Se:Yt}:l(Ke-Yt)<Et&&Ve-Ht>Et?{x:l(Se-Yt)<Et?_e:Ht,y:Yt}:null),st.site,null)),++St)}(E));var he={cells:Er,edges:mr};return tn=Cr=mr=Er=null,he}function Co(le,E){return E.y-le.y||E.x-le.x}Zr.prototype.prepare=function(){for(var le,E=this.edges,O=E.length;O--;)(le=E[O].edge).b&&le.a||E.splice(O,1);return E.sort(Wr),E.length},Xi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Da.prototype={insert:function(le,E){var O,B,q;if(le){if(E.P=le,E.N=le.N,le.N&&(le.N.P=E),le.N=E,le.R){for(le=le.R;le.L;)le=le.L;le.L=E}else le.R=E;O=le}else this._?(le=Yi(this._),E.P=null,E.N=le,le.P=le.L=E,O=le):(E.P=E.N=null,this._=E,O=null);for(E.L=E.R=null,E.U=O,E.C=!0,le=E;O&&O.C;)O===(B=O.U).L?(q=B.R)&&q.C?(O.C=q.C=!1,B.C=!0,le=B):(le===O.R&&(Ma(this,O),O=(le=O).U),O.C=!1,B.C=!0,Oi(this,B)):(q=B.L)&&q.C?(O.C=q.C=!1,B.C=!0,le=B):(le===O.L&&(Oi(this,O),O=(le=O).U),O.C=!1,B.C=!0,Ma(this,B)),O=le.U;this._.C=!1},remove:function(le){le.N&&(le.N.P=le.P),le.P&&(le.P.N=le.N),le.N=le.P=null;var E,O,B,q=le.U,ae=le.L,he=le.R;if(O=ae?he?Yi(he):ae:he,q?q.L===le?q.L=O:q.R=O:this._=O,ae&&he?(B=O.C,O.C=le.C,O.L=ae,ae.U=O,O!==he?(q=O.U,O.U=le.U,q.L=le=O.R,O.R=he,he.U=O):(O.U=q,q=O,le=O.R)):(B=le.C,le=O),le&&(le.U=q),!B)if(le&&le.C)le.C=!1;else{do{if(le===this._)break;if(le===q.L){if((E=q.R).C&&(E.C=!1,q.C=!0,Ma(this,q),E=q.R),E.L&&E.L.C||E.R&&E.R.C){E.R&&E.R.C||(E.L.C=!1,E.C=!0,Oi(this,E),E=q.R),E.C=q.C,q.C=E.R.C=!1,Ma(this,q),le=this._;break}}else if((E=q.L).C&&(E.C=!1,q.C=!0,Oi(this,q),E=q.L),E.L&&E.L.C||E.R&&E.R.C){E.L&&E.L.C||(E.R.C=!1,E.C=!0,Ma(this,E),E=q.L),E.C=q.C,q.C=E.L.C=!1,Oi(this,q),le=this._;break}E.C=!0,le=q,q=q.U}while(!le.C);le&&(le.C=!1)}}},d.geom.voronoi=function(le){var E=qr,O=On,B=E,q=O,ae=Zo;if(le)return he(le);function he(_e){var Se=new Array(_e.length),Ve=ae[0][0],Ke=ae[0][1],st=ae[1][0],At=ae[1][1];return _a(me(_e),ae).cells.forEach(function(Pt,St){var Lt=Pt.edges,kt=Pt.site;(Se[St]=Lt.length?Lt.map(function(Ht){var jt=Ht.start();return[jt.x,jt.y]}):kt.x>=Ve&&kt.x<=st&&kt.y>=Ke&&kt.y<=At?[[Ve,At],[st,At],[st,Ke],[Ve,Ke]]:[]).point=_e[St]}),Se}function me(_e){return _e.map(function(Se,Ve){return{x:Math.round(B(Se,Ve)/Et)*Et,y:Math.round(q(Se,Ve)/Et)*Et,i:Ve}})}return he.links=function(_e){return _a(me(_e)).edges.filter(function(Se){return Se.l&&Se.r}).map(function(Se){return{source:_e[Se.l.i],target:_e[Se.r.i]}})},he.triangles=function(_e){var Se=[];return _a(me(_e)).cells.forEach(function(Ve,Ke){for(var st,At,Pt,St,Lt=Ve.site,kt=Ve.edges.sort(Wr),Ht=-1,jt=kt.length,Yt=kt[jt-1].edge,lr=Yt.l===Lt?Yt.r:Yt.l;++Ht<jt;)st=lr,lr=(Yt=kt[Ht].edge).l===Lt?Yt.r:Yt.l,Ke<st.i&&Ke<lr.i&&((At=Lt).x-(St=lr).x)*((Pt=st).y-At.y)-(At.x-Pt.x)*(St.y-At.y)<0&&Se.push([_e[Ke],_e[st.i],_e[lr.i]])}),Se},he.x=function(_e){return arguments.length?(B=kr(E=_e),he):E},he.y=function(_e){return arguments.length?(q=kr(O=_e),he):O},he.clipExtent=function(_e){return arguments.length?(ae=null==_e?Zo:_e,he):ae===Zo?null:ae},he.size=function(_e){return arguments.length?he.clipExtent(_e&&[[0,0],_e]):ae===Zo?null:ae&&ae[1]},he};var Zo=[[-1e6,-1e6],[1e6,1e6]];function Xa(le){return le.x}function to(le){return le.y}function Uo(le,E,O,B,q,ae){if(!le(E,O,B,q,ae)){var he=.5*(O+q),me=.5*(B+ae),_e=E.nodes;_e[0]&&Uo(le,_e[0],O,B,he,me),_e[1]&&Uo(le,_e[1],he,B,q,me),_e[2]&&Uo(le,_e[2],O,me,he,ae),_e[3]&&Uo(le,_e[3],he,me,q,ae)}}function Ji(le,E,O,B,q,ae,he){var me,_e=1/0;return function Se(Ve,Ke,st,At,Pt){if(!(Ke>ae||st>he||At<B||Pt<q)){if(St=Ve.point){var St,Lt=E-Ve.x,kt=O-Ve.y,Ht=Lt*Lt+kt*kt;if(Ht<_e){var jt=Math.sqrt(_e=Ht);B=E-jt,q=O-jt,ae=E+jt,he=O+jt,me=St}}for(var Yt=Ve.nodes,lr=.5*(Ke+At),vr=.5*(st+Pt),Or=(O>=vr)<<1|E>=lr,Dr=Or+4;Or<Dr;++Or)if(Ve=Yt[3&Or])switch(3&Or){case 0:Se(Ve,Ke,st,lr,vr);break;case 1:Se(Ve,lr,st,At,vr);break;case 2:Se(Ve,Ke,vr,lr,Pt);break;case 3:Se(Ve,lr,vr,At,Pt)}}}(le,B,q,ae,he),me}function Eo(le,E){le=d.rgb(le),E=d.rgb(E);var O=le.r,B=le.g,q=le.b,ae=E.r-O,he=E.g-B,me=E.b-q;return function(_e){return"#"+cr(Math.round(O+ae*_e))+cr(Math.round(B+he*_e))+cr(Math.round(q+me*_e))}}function lo(le,E){var O,B={},q={};for(O in le)O in E?B[O]=Va(le[O],E[O]):q[O]=le[O];for(O in E)O in le||(q[O]=E[O]);return function(ae){for(O in B)q[O]=B[O](ae);return q}}function Aa(le,E){return le=+le,E=+E,function(O){return le*(1-O)+E*O}}function ro(le,E){var O,B,q,ae=mo.lastIndex=Mo.lastIndex=0,he=-1,me=[],_e=[];for(le+="",E+="";(O=mo.exec(le))&&(B=Mo.exec(E));)(q=B.index)>ae&&(q=E.slice(ae,q),me[he]?me[he]+=q:me[++he]=q),(O=O[0])===(B=B[0])?me[he]?me[he]+=B:me[++he]=B:(me[++he]=null,_e.push({i:he,x:Aa(O,B)})),ae=Mo.lastIndex;return ae<E.length&&(q=E.slice(ae),me[he]?me[he]+=q:me[++he]=q),me.length<2?_e[0]?(E=_e[0].x,function(Se){return E(Se)+""}):function(){return E}:(E=_e.length,function(Se){for(var Ve,Ke=0;Ke<E;++Ke)me[(Ve=_e[Ke]).i]=Ve.x(Se);return me.join("")})}d.geom.delaunay=function(le){return d.geom.voronoi().triangles(le)},d.geom.quadtree=function(le,E,O,B,q){var ae,he=qr,me=On;if(ae=arguments.length)return he=Xa,me=to,3===ae&&(q=O,B=E,O=E=0),_e(le);function _e(Se){var Ve,Ke,st,At,Pt,St,Lt,kt,Ht,jt=kr(he),Yt=kr(me);if(null!=E)St=E,Lt=O,kt=B,Ht=q;else if(kt=Ht=-(St=Lt=1/0),Ke=[],st=[],Pt=Se.length,ae)for(At=0;At<Pt;++At)(Ve=Se[At]).x<St&&(St=Ve.x),Ve.y<Lt&&(Lt=Ve.y),Ve.x>kt&&(kt=Ve.x),Ve.y>Ht&&(Ht=Ve.y),Ke.push(Ve.x),st.push(Ve.y);else for(At=0;At<Pt;++At){var lr=+jt(Ve=Se[At],At),vr=+Yt(Ve,At);lr<St&&(St=lr),vr<Lt&&(Lt=vr),lr>kt&&(kt=lr),vr>Ht&&(Ht=vr),Ke.push(lr),st.push(vr)}var Or=kt-St,Dr=Ht-Lt;function sn(gn,Xn,ti,gi,Jr,Pn,ri,$n){if(!isNaN(ti)&&!isNaN(gi))if(gn.leaf){var ui=gn.x,_i=gn.y;if(null!=ui)if(l(ui-ti)+l(_i-gi)<.01)on(gn,Xn,ti,gi,Jr,Pn,ri,$n);else{var Ii=gn.point;gn.x=gn.y=gn.point=null,on(gn,Ii,ui,_i,Jr,Pn,ri,$n),on(gn,Xn,ti,gi,Jr,Pn,ri,$n)}else gn.x=ti,gn.y=gi,gn.point=Xn}else on(gn,Xn,ti,gi,Jr,Pn,ri,$n)}function on(gn,Xn,ti,gi,Jr,Pn,ri,$n){var ui=.5*(Jr+ri),_i=.5*(Pn+$n),Ii=ti>=ui,ai=gi>=_i,Si=ai<<1|Ii;gn.leaf=!1,Ii?Jr=ui:ri=ui,ai?Pn=_i:$n=_i,sn(gn=gn.nodes[Si]||(gn.nodes[Si]={leaf:!0,nodes:[],point:null,x:null,y:null}),Xn,ti,gi,Jr,Pn,ri,$n)}Or>Dr?Ht=Lt+Or:kt=St+Dr;var kn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(gn){sn(kn,gn,+jt(gn,++At),+Yt(gn,At),St,Lt,kt,Ht)},visit:function(gn){Uo(gn,kn,St,Lt,kt,Ht)},find:function(gn){return Ji(kn,gn[0],gn[1],St,Lt,kt,Ht)}};if(At=-1,null==E){for(;++At<Pt;)sn(kn,Se[At],Ke[At],st[At],St,Lt,kt,Ht);--At}else Se.forEach(kn.add);return Ke=st=Se=Ve=null,kn}return _e.x=function(Se){return arguments.length?(he=Se,_e):he},_e.y=function(Se){return arguments.length?(me=Se,_e):me},_e.extent=function(Se){return arguments.length?(null==Se?E=O=B=q=null:(E=+Se[0][0],O=+Se[0][1],B=+Se[1][0],q=+Se[1][1]),_e):null==E?null:[[E,O],[B,q]]},_e.size=function(Se){return arguments.length?(null==Se?E=O=B=q=null:(E=O=0,B=+Se[0],q=+Se[1]),_e):null==E?null:[B-E,q-O]},_e},d.interpolateRgb=Eo,d.interpolateObject=lo,d.interpolateNumber=Aa,d.interpolateString=ro;var mo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(mo.source,"g");function Va(le,E){for(var O,B=d.interpolators.length;--B>=0&&!(O=d.interpolators[B](le,E)););return O}function ga(le,E){var O,B=[],q=[],ae=le.length,he=E.length,me=Math.min(le.length,E.length);for(O=0;O<me;++O)B.push(Va(le[O],E[O]));for(;O<ae;++O)q[O]=le[O];for(;O<he;++O)q[O]=E[O];return function(_e){for(O=0;O<me;++O)q[O]=B[O](_e);return q}}d.interpolate=Va,d.interpolators=[function(le,E){var O=typeof E;return("string"===O?Nr.has(E.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(E)?Eo:ro:E instanceof vt?Eo:Array.isArray(E)?ga:"object"===O&&isNaN(E)?lo:Aa)(le,E)}],d.interpolateArray=ga;var Ja=function(){return C},bs=d.map({linear:Ja,poly:function(le){return function(E){return Math.pow(E,le)}},quad:function(){return Ls},cubic:function(){return es},sin:function(){return Wo},exp:function(){return go},circle:function(){return vo},elastic:function(le,E){var O;return arguments.length<2&&(E=.45),arguments.length?O=E/nr*Math.asin(1/le):(le=1,O=E/4),function(B){return 1+le*Math.pow(2,-10*B)*Math.sin((B-O)*nr/E)}},back:function(le){return le||(le=1.70158),function(E){return E*E*((le+1)*E-le)}},bounce:function(){return Lo}}),As=d.map({in:C,out:fs,"in-out":$o,"out-in":function(le){return $o(fs(le))}});function Ki(le){return function(E){return E<=0?0:E>=1?1:le(E)}}function fs(le){return function(E){return 1-le(1-E)}}function $o(le){return function(E){return.5*(E<.5?le(2*E):2-le(2-2*E))}}function Ls(le){return le*le}function es(le){return le*le*le}function ss(le){if(le<=0)return 0;if(le>=1)return 1;var E=le*le,O=E*le;return 4*(le<.5?O:3*(le-E)+O-.75)}function Wo(le){return 1-Math.cos(le*We)}function go(le){return Math.pow(2,10*(le-1))}function vo(le){return 1-Math.sqrt(1-le*le)}function Lo(le){return le<1/2.75?7.5625*le*le:le<2/2.75?7.5625*(le-=1.5/2.75)*le+.75:le<2.5/2.75?7.5625*(le-=2.25/2.75)*le+.9375:7.5625*(le-=2.625/2.75)*le+.984375}function Do(le,E){return E-=le,function(O){return Math.round(le+E*O)}}function pa(le){var E,O,B,q=[le.a,le.b],ae=[le.c,le.d],he=yo(q),me=co(q,ae),_e=yo(((E=ae)[0]+=(B=-me)*(O=q)[0],E[1]+=B*O[1],E))||0;q[0]*ae[1]<ae[0]*q[1]&&(q[0]*=-1,q[1]*=-1,he*=-1,me*=-1),this.rotate=(he?Math.atan2(q[1],q[0]):Math.atan2(-ae[0],ae[1]))*Qe,this.translate=[le.e,le.f],this.scale=[he,_e],this.skew=_e?Math.atan2(me,_e)*Qe:0}function co(le,E){return le[0]*E[0]+le[1]*E[1]}function yo(le){var E=Math.sqrt(co(le,le));return E&&(le[0]/=E,le[1]/=E),E}d.ease=function(le){var E=le.indexOf("-"),O=E>=0?le.slice(0,E):le,B=E>=0?le.slice(E+1):"in";return O=bs.get(O)||Ja,Ki((B=As.get(B)||C)(O.apply(null,g.call(arguments,1))))},d.interpolateHcl=function(le,E){le=d.hcl(le),E=d.hcl(E);var O=le.h,B=le.c,q=le.l,ae=E.h-O,he=E.c-B,me=E.l-q;return isNaN(he)&&(he=0,B=isNaN(B)?E.c:B),isNaN(ae)?(ae=0,O=isNaN(O)?E.h:O):ae>180?ae-=360:ae<-180&&(ae+=360),function(_e){return $e(O+ae*_e,B+he*_e,q+me*_e)+""}},d.interpolateHsl=function(le,E){le=d.hsl(le),E=d.hsl(E);var O=le.h,B=le.s,q=le.l,ae=E.h-O,he=E.s-B,me=E.l-q;return isNaN(he)&&(he=0,B=isNaN(B)?E.s:B),isNaN(ae)?(ae=0,O=isNaN(O)?E.h:O):ae>180?ae-=360:ae<-180&&(ae+=360),function(_e){return ut(O+ae*_e,B+he*_e,q+me*_e)+""}},d.interpolateLab=function(le,E){le=d.lab(le),E=d.lab(E);var O=le.l,B=le.a,q=le.b,ae=E.l-O,he=E.a-B,me=E.b-q;return function(_e){return Qt(O+ae*_e,B+he*_e,q+me*_e)+""}},d.interpolateRound=Do,d.transform=function(le){var E=t.createElementNS(d.ns.prefix.svg,"g");return(d.transform=function(O){if(null!=O){E.setAttribute("transform",O);var B=E.transform.baseVal.consolidate()}return new pa(B?B.matrix:ps)})(le)},pa.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ps={a:1,b:0,c:0,d:1,e:0,f:0};function uo(le){return le.length?le.pop()+",":""}function Bo(le,E){var q,ae,he,O=[],B=[];return le=d.transform(le),E=d.transform(E),function(q,ae,he,me){if(q[0]!==ae[0]||q[1]!==ae[1]){var _e=he.push("translate(",null,",",null,")");me.push({i:_e-4,x:Aa(q[0],ae[0])},{i:_e-2,x:Aa(q[1],ae[1])})}else(ae[0]||ae[1])&&he.push("translate("+ae+")")}(le.translate,E.translate,O,B),he=O,(q=le.rotate)!==(ae=E.rotate)?(q-ae>180?ae+=360:ae-q>180&&(q+=360),B.push({i:he.push(uo(he)+"rotate(",null,")")-2,x:Aa(q,ae)})):ae&&he.push(uo(he)+"rotate("+ae+")"),function(q,ae,he,me){q!==ae?me.push({i:he.push(uo(he)+"skewX(",null,")")-2,x:Aa(q,ae)}):ae&&he.push(uo(he)+"skewX("+ae+")")}(le.skew,E.skew,O,B),function(q,ae,he,me){if(q[0]!==ae[0]||q[1]!==ae[1]){var _e=he.push(uo(he)+"scale(",null,",",null,")");me.push({i:_e-4,x:Aa(q[0],ae[0])},{i:_e-2,x:Aa(q[1],ae[1])})}else 1===ae[0]&&1===ae[1]||he.push(uo(he)+"scale("+ae+")")}(le.scale,E.scale,O,B),le=E=null,function(q){for(var ae,he=-1,me=B.length;++he<me;)O[(ae=B[he]).i]=ae.x(q);return O.join("")}}function ds(le,E){return E=(E-=le=+le)||1/E,function(O){return(O-le)/E}}function Io(le,E){return E=(E-=le=+le)||1/E,function(O){return Math.max(0,Math.min(1,(O-le)/E))}}function Gi(le){for(var E=le.source,O=le.target,B=function(he,me){if(he===me)return he;for(var _e=je(he),Se=je(me),Ve=_e.pop(),Ke=Se.pop(),st=null;Ve===Ke;)st=Ve,Ve=_e.pop(),Ke=Se.pop();return st}(E,O),q=[E];E!==B;)q.push(E=E.parent);for(var ae=q.length;O!==B;)q.splice(ae,0,O),O=O.parent;return q}function je(le){for(var E=[],O=le.parent;null!=O;)E.push(le),le=O,O=O.parent;return E.push(le),E}function Ge(le){le.fixed|=2}function nt(le){le.fixed&=-7}function lt(le){le.fixed|=4,le.px=le.x,le.py=le.y}function _t(le){le.fixed&=-5}d.interpolateTransform=Bo,d.layout={},d.layout.bundle=function(){return function(le){for(var E=[],O=-1,B=le.length;++O<B;)E.push(Gi(le[O]));return E}},d.layout.chord=function(){var le,E,O,B,q,ae,he,me={},_e=0;function Se(){var Ke,st,At,Pt,St,Lt={},kt=[],Ht=d.range(B),jt=[];for(le=[],E=[],Ke=0,Pt=-1;++Pt<B;){for(st=0,St=-1;++St<B;)st+=O[Pt][St];kt.push(st),jt.push(d.range(B)),Ke+=st}for(q&&Ht.sort(function(kn,gn){return q(kt[kn],kt[gn])}),ae&&jt.forEach(function(kn,gn){kn.sort(function(Xn,ti){return ae(O[gn][Xn],O[gn][ti])})}),Ke=(nr-_e*B)/Ke,st=0,Pt=-1;++Pt<B;){for(At=st,St=-1;++St<B;){var Yt=Ht[Pt],lr=jt[Yt][St],vr=O[Yt][lr],Or=st,Dr=st+=vr*Ke;Lt[Yt+"-"+lr]={index:Yt,subindex:lr,startAngle:Or,endAngle:Dr,value:vr}}E[Yt]={index:Yt,startAngle:At,endAngle:st,value:kt[Yt]},st+=_e}for(Pt=-1;++Pt<B;)for(St=Pt-1;++St<B;){var sn=Lt[Pt+"-"+St],on=Lt[St+"-"+Pt];(sn.value||on.value)&&le.push(sn.value<on.value?{source:on,target:sn}:{source:sn,target:on})}he&&Ve()}function Ve(){le.sort(function(Ke,st){return he((Ke.source.value+Ke.target.value)/2,(st.source.value+st.target.value)/2)})}return me.matrix=function(Ke){return arguments.length?(B=(O=Ke)&&O.length,le=E=null,me):O},me.padding=function(Ke){return arguments.length?(_e=Ke,le=E=null,me):_e},me.sortGroups=function(Ke){return arguments.length?(q=Ke,le=E=null,me):q},me.sortSubgroups=function(Ke){return arguments.length?(ae=Ke,le=null,me):ae},me.sortChords=function(Ke){return arguments.length?(he=Ke,le&&Ve(),me):he},me.chords=function(){return le||Se(),le},me.groups=function(){return E||Se(),E},me},d.layout.force=function(){var le,E,O,B,q,ae,he={},me=d.dispatch("start","tick","end"),_e=[1,1],Se=.9,Ve=mt,Ke=Ct,st=-30,At=rr,Pt=.1,St=.64,Lt=[],kt=[];function Ht(Yt){return function(lr,vr,Or,Dr){if(lr.point!==Yt){var sn=lr.cx-Yt.x,on=lr.cy-Yt.y,kn=Dr-vr,gn=sn*sn+on*on;if(kn*kn/St<gn){if(gn<At){var Xn=lr.charge/gn;Yt.px-=sn*Xn,Yt.py-=on*Xn}return!0}lr.point&&gn&&gn<At&&(Yt.px-=sn*(Xn=lr.pointCharge/gn),Yt.py-=on*Xn)}return!lr.charge}}function jt(Yt){Yt.px=d.event.x,Yt.py=d.event.y,he.resume()}return he.tick=function(){if((O*=.99)<.005)return le=null,me.end({type:"end",alpha:O=0}),!0;var Yt,lr,vr,Or,Dr,sn,on,kn,gn,Xn=Lt.length,ti=kt.length;for(lr=0;lr<ti;++lr)Or=(vr=kt[lr]).source,(sn=(kn=(Dr=vr.target).x-Or.x)*kn+(gn=Dr.y-Or.y)*gn)&&(kn*=sn=O*q[lr]*((sn=Math.sqrt(sn))-B[lr])/sn,gn*=sn,Dr.x-=kn*(on=Or.weight+Dr.weight?Or.weight/(Or.weight+Dr.weight):.5),Dr.y-=gn*on,Or.x+=kn*(on=1-on),Or.y+=gn*on);if((on=O*Pt)&&(kn=_e[0]/2,gn=_e[1]/2,lr=-1,on))for(;++lr<Xn;)(vr=Lt[lr]).x+=(kn-vr.x)*on,vr.y+=(gn-vr.y)*on;if(st)for(function gi(Jr,Pn,ri){var $n=0,ui=0;if(Jr.charge=0,!Jr.leaf)for(var _i,Ii=Jr.nodes,ai=Ii.length,Si=-1;++Si<ai;)null!=(_i=Ii[Si])&&(gi(_i,Pn,ri),Jr.charge+=_i.charge,$n+=_i.charge*_i.cx,ui+=_i.charge*_i.cy);if(Jr.point){Jr.leaf||(Jr.point.x+=Math.random()-.5,Jr.point.y+=Math.random()-.5);var Mi=Pn*ri[Jr.point.index];Jr.charge+=Jr.pointCharge=Mi,$n+=Mi*Jr.point.x,ui+=Mi*Jr.point.y}Jr.cx=$n/Jr.charge,Jr.cy=ui/Jr.charge}(Yt=d.geom.quadtree(Lt),O,ae),lr=-1;++lr<Xn;)(vr=Lt[lr]).fixed||Yt.visit(Ht(vr));for(lr=-1;++lr<Xn;)(vr=Lt[lr]).fixed?(vr.x=vr.px,vr.y=vr.py):(vr.x-=(vr.px-(vr.px=vr.x))*Se,vr.y-=(vr.py-(vr.py=vr.y))*Se);me.tick({type:"tick",alpha:O})},he.nodes=function(Yt){return arguments.length?(Lt=Yt,he):Lt},he.links=function(Yt){return arguments.length?(kt=Yt,he):kt},he.size=function(Yt){return arguments.length?(_e=Yt,he):_e},he.linkDistance=function(Yt){return arguments.length?(Ve="function"==typeof Yt?Yt:+Yt,he):Ve},he.distance=he.linkDistance,he.linkStrength=function(Yt){return arguments.length?(Ke="function"==typeof Yt?Yt:+Yt,he):Ke},he.friction=function(Yt){return arguments.length?(Se=+Yt,he):Se},he.charge=function(Yt){return arguments.length?(st="function"==typeof Yt?Yt:+Yt,he):st},he.chargeDistance=function(Yt){return arguments.length?(At=Yt*Yt,he):Math.sqrt(At)},he.gravity=function(Yt){return arguments.length?(Pt=+Yt,he):Pt},he.theta=function(Yt){return arguments.length?(St=Yt*Yt,he):Math.sqrt(St)},he.alpha=function(Yt){return arguments.length?(Yt=+Yt,O?Yt>0?O=Yt:(le.c=null,le.t=NaN,le=null,me.end({type:"end",alpha:O=0})):Yt>0&&(me.start({type:"start",alpha:O=Yt}),le=jr(he.tick)),he):O},he.start=function(){var Yt,lr,vr,Or=Lt.length,Dr=kt.length,sn=_e[0],on=_e[1];for(Yt=0;Yt<Or;++Yt)(vr=Lt[Yt]).index=Yt,vr.weight=0;for(Yt=0;Yt<Dr;++Yt)"number"==typeof(vr=kt[Yt]).source&&(vr.source=Lt[vr.source]),"number"==typeof vr.target&&(vr.target=Lt[vr.target]),++vr.source.weight,++vr.target.weight;for(Yt=0;Yt<Or;++Yt)vr=Lt[Yt],isNaN(vr.x)&&(vr.x=kn("x",sn)),isNaN(vr.y)&&(vr.y=kn("y",on)),isNaN(vr.px)&&(vr.px=vr.x),isNaN(vr.py)&&(vr.py=vr.y);if(B=[],"function"==typeof Ve)for(Yt=0;Yt<Dr;++Yt)B[Yt]=+Ve.call(this,kt[Yt],Yt);else for(Yt=0;Yt<Dr;++Yt)B[Yt]=Ve;if(q=[],"function"==typeof Ke)for(Yt=0;Yt<Dr;++Yt)q[Yt]=+Ke.call(this,kt[Yt],Yt);else for(Yt=0;Yt<Dr;++Yt)q[Yt]=Ke;if(ae=[],"function"==typeof st)for(Yt=0;Yt<Or;++Yt)ae[Yt]=+st.call(this,Lt[Yt],Yt);else for(Yt=0;Yt<Or;++Yt)ae[Yt]=st;function kn(gn,Xn){if(!lr){for(lr=new Array(Or),Pn=0;Pn<Or;++Pn)lr[Pn]=[];for(Pn=0;Pn<Dr;++Pn){var ti=kt[Pn];lr[ti.source.index].push(ti.target),lr[ti.target.index].push(ti.source)}}for(var gi,Jr=lr[Yt],Pn=-1,ri=Jr.length;++Pn<ri;)if(!isNaN(gi=Jr[Pn][gn]))return gi;return Math.random()*Xn}return he.resume()},he.resume=function(){return he.alpha(.1)},he.stop=function(){return he.alpha(0)},he.drag=function(){if(E||(E=d.behavior.drag().origin(C).on("dragstart.force",Ge).on("drag.force",jt).on("dragend.force",nt)),!arguments.length)return E;this.on("mouseover.force",lt).on("mouseout.force",_t).call(E)},d.rebind(he,me,"on")};var mt=20,Ct=1,rr=1/0;function ir(le,E){return d.rebind(le,E,"sort","children","value"),le.nodes=le,le.links=Br,le}function $t(le,E){for(var O=[le];null!=(le=O.pop());)if(E(le),(q=le.children)&&(B=q.length))for(var B,q;--B>=0;)O.push(q[B])}function sr(le,E){for(var O=[le],B=[];null!=(le=O.pop());)if(B.push(le),(ae=le.children)&&(q=ae.length))for(var q,ae,he=-1;++he<q;)O.push(ae[he]);for(;null!=(le=B.pop());)E(le)}function gr(le){return le.children}function Tr(le){return le.value}function Ar(le,E){return E.value-le.value}function Br(le){return d.merge(le.map(function(E){return(E.children||[]).map(function(O){return{source:E,target:O}})}))}d.layout.hierarchy=function(){var le=Ar,E=gr,O=Tr;function B(q){var ae,he=[q],me=[];for(q.depth=0;null!=(ae=he.pop());)if(me.push(ae),(Se=E.call(B,ae,ae.depth))&&(_e=Se.length)){for(var _e,Se,Ve;--_e>=0;)he.push(Ve=Se[_e]),Ve.parent=ae,Ve.depth=ae.depth+1;O&&(ae.value=0),ae.children=Se}else O&&(ae.value=+O.call(B,ae,ae.depth)||0),delete ae.children;return sr(q,function(Ke){var st,At;le&&(st=Ke.children)&&st.sort(le),O&&(At=Ke.parent)&&(At.value+=Ke.value)}),me}return B.sort=function(q){return arguments.length?(le=q,B):le},B.children=function(q){return arguments.length?(E=q,B):E},B.value=function(q){return arguments.length?(O=q,B):O},B.revalue=function(q){return O&&($t(q,function(ae){ae.children&&(ae.value=0)}),sr(q,function(ae){var he;ae.children||(ae.value=+O.call(B,ae,ae.depth)||0),(he=ae.parent)&&(he.value+=ae.value)})),q},B},d.layout.partition=function(){var le=d.layout.hierarchy(),E=[1,1];function O(B,q){var ae=le.call(this,B,q);return function he(me,_e,Se,Ve){var Ke=me.children;if(me.x=_e,me.y=me.depth*Ve,me.dx=Se,me.dy=Ve,Ke&&(st=Ke.length)){var st,At,Pt,St=-1;for(Se=me.value?Se/me.value:0;++St<st;)he(At=Ke[St],_e,Pt=At.value*Se,Ve),_e+=Pt}}(ae[0],0,E[0],E[1]/function he(me){var _e=me.children,Se=0;if(_e&&(Ve=_e.length))for(var Ve,Ke=-1;++Ke<Ve;)Se=Math.max(Se,he(_e[Ke]));return 1+Se}(ae[0])),ae}return O.size=function(B){return arguments.length?(E=B,O):E},ir(O,le)},d.layout.pie=function(){var le=Number,E=un,O=0,B=nr,q=0;function ae(he){var me,_e=he.length,Se=he.map(function(Ht,jt){return+le.call(ae,Ht,jt)}),Ve=+("function"==typeof O?O.apply(this,arguments):O),Ke=("function"==typeof B?B.apply(this,arguments):B)-Ve,st=Math.min(Math.abs(Ke)/_e,+("function"==typeof q?q.apply(this,arguments):q)),At=st*(Ke<0?-1:1),Pt=d.sum(Se),St=Pt?(Ke-_e*At)/Pt:0,Lt=d.range(_e),kt=[];return null!=E&&Lt.sort(E===un?function(Ht,jt){return Se[jt]-Se[Ht]}:function(Ht,jt){return E(he[Ht],he[jt])}),Lt.forEach(function(Ht){kt[Ht]={data:he[Ht],value:me=Se[Ht],startAngle:Ve,endAngle:Ve+=me*St+At,padAngle:st}}),kt}return ae.value=function(he){return arguments.length?(le=he,ae):le},ae.sort=function(he){return arguments.length?(E=he,ae):E},ae.startAngle=function(he){return arguments.length?(O=he,ae):O},ae.endAngle=function(he){return arguments.length?(B=he,ae):B},ae.padAngle=function(he){return arguments.length?(q=he,ae):q},ae};var un={};function xn(le){return le.x}function Fn(le){return le.y}function Hn(le,E,O){le.y0=E,le.y=O}d.layout.stack=function(){var le=C,E=wi,O=Li,B=Hn,q=xn,ae=Fn;function he(me,_e){if(!(st=me.length))return me;var Se=me.map(function(Ht,jt){return le.call(he,Ht,jt)}),Ve=Se.map(function(Ht){return Ht.map(function(jt,Yt){return[q.call(he,jt,Yt),ae.call(he,jt,Yt)]})}),Ke=E.call(he,Ve,_e);Se=d.permute(Se,Ke),Ve=d.permute(Ve,Ke);var st,At,Pt,St,Lt=O.call(he,Ve,_e),kt=Se[0].length;for(Pt=0;Pt<kt;++Pt)for(B.call(he,Se[0][Pt],St=Lt[Pt],Ve[0][Pt][1]),At=1;At<st;++At)B.call(he,Se[At][Pt],St+=Ve[At-1][Pt][1],Ve[At][Pt][1]);return me}return he.values=function(me){return arguments.length?(le=me,he):le},he.order=function(me){return arguments.length?(E="function"==typeof me?me:Kn.get(me)||wi,he):E},he.offset=function(me){return arguments.length?(O="function"==typeof me?me:qn.get(me)||Li,he):O},he.x=function(me){return arguments.length?(q=me,he):q},he.y=function(me){return arguments.length?(ae=me,he):ae},he.out=function(me){return arguments.length?(B=me,he):B},he};var Kn=d.map({"inside-out":function(le){var E,O,B=le.length,q=le.map(Ri),ae=le.map(Hi),he=d.range(B).sort(function(Ke,st){return q[Ke]-q[st]}),me=0,_e=0,Se=[],Ve=[];for(E=0;E<B;++E)O=he[E],me<_e?(me+=ae[O],Se.push(O)):(_e+=ae[O],Ve.push(O));return Ve.reverse().concat(Se)},reverse:function(le){return d.range(le.length).reverse()},default:wi}),qn=d.map({silhouette:function(le){var E,O,B,q=le.length,ae=le[0].length,he=[],me=0,_e=[];for(O=0;O<ae;++O){for(E=0,B=0;E<q;E++)B+=le[E][O][1];B>me&&(me=B),he.push(B)}for(O=0;O<ae;++O)_e[O]=(me-he[O])/2;return _e},wiggle:function(le){var E,O,B,q,ae,he,me,_e,Se,Ve=le.length,Ke=le[0],st=Ke.length,At=[];for(At[0]=_e=Se=0,O=1;O<st;++O){for(E=0,q=0;E<Ve;++E)q+=le[E][O][1];for(E=0,ae=0,me=Ke[O][0]-Ke[O-1][0];E<Ve;++E){for(B=0,he=(le[E][O][1]-le[E][O-1][1])/(2*me);B<E;++B)he+=(le[B][O][1]-le[B][O-1][1])/me;ae+=he*le[E][O][1]}At[O]=_e-=q?ae/q*me:0,_e<Se&&(Se=_e)}for(O=0;O<st;++O)At[O]-=Se;return At},expand:function(le){var E,O,B,q=le.length,ae=le[0].length,he=1/q,me=[];for(O=0;O<ae;++O){for(E=0,B=0;E<q;E++)B+=le[E][O][1];if(B)for(E=0;E<q;E++)le[E][O][1]/=B;else for(E=0;E<q;E++)le[E][O][1]=he}for(O=0;O<ae;++O)me[O]=0;return me},zero:Li});function wi(le){return d.range(le.length)}function Li(le){for(var E=-1,O=le[0].length,B=[];++E<O;)B[E]=0;return B}function Ri(le){for(var E,O=1,B=0,q=le[0][1],ae=le.length;O<ae;++O)(E=le[O][1])>q&&(B=O,q=E);return B}function Hi(le){return le.reduce(Ui,0)}function Ui(le,E){return le+E[1]}function ba(le,E){return va(le,Math.ceil(Math.log(E.length)/Math.LN2+1))}function va(le,E){for(var O=-1,B=+le[0],q=(le[1]-B)/E,ae=[];++O<=E;)ae[O]=q*O+B;return ae}function ca(le){return[d.min(le),d.max(le)]}function ua(le,E){return le.value-E.value}function da(le,E){var O=le._pack_next;le._pack_next=E,E._pack_prev=le,E._pack_next=O,O._pack_prev=E}function Ua(le,E){le._pack_next=E,E._pack_prev=le}function no(le,E){var O=E.x-le.x,B=E.y-le.y,q=le.r+E.r;return.999*q*q>O*O+B*B}function Ha(le){if((E=le.children)&&(_e=E.length)){var E,O,B,q,ae,he,me,_e,Se=1/0,Ve=-1/0,Ke=1/0,st=-1/0;if(E.forEach(io),(O=E[0]).x=-O.r,O.y=0,jt(O),_e>1&&((B=E[1]).x=B.r,B.y=0,jt(B),_e>2))for(Ni(O,B,q=E[2]),jt(q),da(O,q),O._pack_prev=q,da(q,B),B=O._pack_next,ae=3;ae<_e;ae++){Ni(O,B,q=E[ae]);var At=0,Pt=1,St=1;for(he=B._pack_next;he!==B;he=he._pack_next,Pt++)if(no(he,q)){At=1;break}if(1==At)for(me=O._pack_prev;me!==he._pack_prev&&!no(me,q);me=me._pack_prev,St++);At?(Pt<St||Pt==St&&B.r<O.r?Ua(O,B=he):Ua(O=me,B),ae--):(da(O,q),B=q,jt(q))}var Lt=(Se+Ve)/2,kt=(Ke+st)/2,Ht=0;for(ae=0;ae<_e;ae++)(q=E[ae]).x-=Lt,q.y-=kt,Ht=Math.max(Ht,q.r+Math.sqrt(q.x*q.x+q.y*q.y));le.r=Ht,E.forEach(Ka)}function jt(Yt){Se=Math.min(Yt.x-Yt.r,Se),Ve=Math.max(Yt.x+Yt.r,Ve),Ke=Math.min(Yt.y-Yt.r,Ke),st=Math.max(Yt.y+Yt.r,st)}}function io(le){le._pack_next=le._pack_prev=le}function Ka(le){delete le._pack_next,delete le._pack_prev}function Ni(le,E,O){var B=le.r+O.r,q=E.x-le.x,ae=E.y-le.y;if(B&&(q||ae)){var he=E.r+O.r,me=q*q+ae*ae,_e=.5+((B*=B)-(he*=he))/(2*me),Se=Math.sqrt(Math.max(0,2*he*(B+me)-(B-=me)*B-he*he))/(2*me);O.x=le.x+_e*q+Se*ae,O.y=le.y+_e*ae-Se*q}else O.x=le.x+B,O.y=le.y}function gt(le,E){return le.parent==E.parent?1:2}function Vt(le){var E=le.children;return E.length?E[0]:le.t}function hr(le){var E,O=le.children;return(E=O.length)?O[E-1]:le.t}function Jt(le,E,O){var B=O/(E.i-le.i);E.c-=B,E.s+=O,le.c+=B,E.z+=O,E.m+=O}function fr(le,E,O){return le.a.parent===E.parent?le.a:O}function zr(le){return{x:le.x,y:le.y,dx:le.dx,dy:le.dy}}function Vr(le,E){var O=le.x+E[3],B=le.y+E[0],q=le.dx-E[1]-E[3],ae=le.dy-E[0]-E[2];return q<0&&(O+=q/2,q=0),ae<0&&(B+=ae/2,ae=0),{x:O,y:B,dx:q,dy:ae}}function $r(le){var E=le[0],O=le[le.length-1];return E<O?[E,O]:[O,E]}function dn(le){return le.rangeExtent?le.rangeExtent():$r(le.range())}function hn(le,E,O,B){var q=O(le[0],le[1]),ae=B(E[0],E[1]);return function(he){return ae(q(he))}}function wn(le,E){var O,B=0,q=le.length-1,ae=le[B],he=le[q];return he<ae&&(O=B,B=q,q=O,O=ae,ae=he,he=O),le[B]=E.floor(ae),le[q]=E.ceil(he),le}function Ln(le){return le?{floor:function(E){return Math.floor(E/le)*le},ceil:function(E){return Math.ceil(E/le)*le}}:mn}d.layout.histogram=function(){var le=!0,E=Number,O=ca,B=ba;function q(ae,he){for(var me,_e,Se=[],Ve=ae.map(E,this),Ke=O.call(this,Ve,he),st=B.call(this,Ke,Ve,he),At=(he=-1,Ve.length),Pt=st.length-1,St=le?1:1/At;++he<Pt;)(me=Se[he]=[]).dx=st[he+1]-(me.x=st[he]),me.y=0;if(Pt>0)for(he=-1;++he<At;)(_e=Ve[he])>=Ke[0]&&_e<=Ke[1]&&((me=Se[d.bisect(st,_e,1,Pt)-1]).y+=St,me.push(ae[he]));return Se}return q.value=function(ae){return arguments.length?(E=ae,q):E},q.range=function(ae){return arguments.length?(O=kr(ae),q):O},q.bins=function(ae){return arguments.length?(B="number"==typeof ae?function(he){return va(he,ae)}:kr(ae),q):B},q.frequency=function(ae){return arguments.length?(le=!!ae,q):le},q},d.layout.pack=function(){var le,E=d.layout.hierarchy().sort(ua),O=0,B=[1,1];function q(ae,he){var me=E.call(this,ae,he),_e=me[0],Se=B[0],Ve=B[1],Ke=null==le?Math.sqrt:"function"==typeof le?le:function(){return le};if(_e.x=_e.y=0,sr(_e,function(At){At.r=+Ke(At.value)}),sr(_e,Ha),O){var st=O*(le?1:Math.max(2*_e.r/Se,2*_e.r/Ve))/2;sr(_e,function(At){At.r+=st}),sr(_e,Ha),sr(_e,function(At){At.r-=st})}return function At(Pt,St,Lt,kt){var Ht=Pt.children;if(Pt.x=St+=kt*Pt.x,Pt.y=Lt+=kt*Pt.y,Pt.r*=kt,Ht)for(var jt=-1,Yt=Ht.length;++jt<Yt;)At(Ht[jt],St,Lt,kt)}(_e,Se/2,Ve/2,le?1:1/Math.max(2*_e.r/Se,2*_e.r/Ve)),me}return q.size=function(ae){return arguments.length?(B=ae,q):B},q.radius=function(ae){return arguments.length?(le=null==ae||"function"==typeof ae?ae:+ae,q):le},q.padding=function(ae){return arguments.length?(O=+ae,q):O},ir(q,E)},d.layout.tree=function(){var le=d.layout.hierarchy().sort(null).value(null),E=gt,O=[1,1],B=null;function q(_e,Se){var Ve=le.call(this,_e,Se),Ke=Ve[0],st=function(jt){for(var Yt,lr={A:null,children:[jt]},vr=[lr];null!=(Yt=vr.pop());)for(var Or,Dr=Yt.children,sn=0,on=Dr.length;sn<on;++sn)vr.push((Dr[sn]=Or={_:Dr[sn],parent:Yt,children:(Or=Dr[sn].children)&&Or.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:sn}).a=Or);return lr.children[0]}(Ke);if(sr(st,ae),st.parent.m=-st.z,$t(st,he),B)$t(Ke,me);else{var At=Ke,Pt=Ke,St=Ke;$t(Ke,function(jt){jt.x<At.x&&(At=jt),jt.x>Pt.x&&(Pt=jt),jt.depth>St.depth&&(St=jt)});var Lt=E(At,Pt)/2-At.x,kt=O[0]/(Pt.x+E(Pt,At)/2+Lt),Ht=O[1]/(St.depth||1);$t(Ke,function(jt){jt.x=(jt.x+Lt)*kt,jt.y=jt.depth*Ht})}return Ve}function ae(_e){var Se=_e.children,Ve=_e.parent.children,Ke=_e.i?Ve[_e.i-1]:null;if(Se.length){!function(At){for(var Pt,St=0,Lt=0,kt=At.children,Ht=kt.length;--Ht>=0;)(Pt=kt[Ht]).z+=St,Pt.m+=St,St+=Pt.s+(Lt+=Pt.c)}(_e);var st=(Se[0].z+Se[Se.length-1].z)/2;Ke?(_e.z=Ke.z+E(_e._,Ke._),_e.m=_e.z-st):_e.z=st}else Ke&&(_e.z=Ke.z+E(_e._,Ke._));_e.parent.A=function(At,Pt,St){if(Pt){for(var Lt,kt=At,Ht=At,jt=Pt,Yt=kt.parent.children[0],lr=kt.m,vr=Ht.m,Or=jt.m,Dr=Yt.m;jt=hr(jt),kt=Vt(kt),jt&&kt;)Yt=Vt(Yt),(Ht=hr(Ht)).a=At,(Lt=jt.z+Or-kt.z-lr+E(jt._,kt._))>0&&(Jt(fr(jt,At,St),At,Lt),lr+=Lt,vr+=Lt),Or+=jt.m,lr+=kt.m,Dr+=Yt.m,vr+=Ht.m;jt&&!hr(Ht)&&(Ht.t=jt,Ht.m+=Or-vr),kt&&!Vt(Yt)&&(Yt.t=kt,Yt.m+=lr-Dr,St=At)}return St}(_e,Ke,_e.parent.A||Ve[0])}function he(_e){_e._.x=_e.z+_e.parent.m,_e.m+=_e.parent.m}function me(_e){_e.x*=O[0],_e.y=_e.depth*O[1]}return q.separation=function(_e){return arguments.length?(E=_e,q):E},q.size=function(_e){return arguments.length?(B=null==(O=_e)?me:null,q):B?null:O},q.nodeSize=function(_e){return arguments.length?(B=null==(O=_e)?null:me,q):B?O:null},ir(q,le)},d.layout.cluster=function(){var le=d.layout.hierarchy().sort(null).value(null),E=gt,O=[1,1],B=!1;function q(ae,he){var me,_e=le.call(this,ae,he),Se=_e[0],Ve=0;sr(Se,function(St){var kt,Lt=St.children;Lt&&Lt.length?(St.x=(kt=Lt).reduce(function(Ht,jt){return Ht+jt.x},0)/kt.length,St.y=function(kt){return 1+d.max(kt,function(Ht){return Ht.y})}(Lt)):(St.x=me?Ve+=E(St,me):0,St.y=0,me=St)});var Ke=function St(Lt){var kt=Lt.children;return kt&&kt.length?St(kt[0]):Lt}(Se),st=function St(Lt){var kt,Ht=Lt.children;return Ht&&(kt=Ht.length)?St(Ht[kt-1]):Lt}(Se),At=Ke.x-E(Ke,st)/2,Pt=st.x+E(st,Ke)/2;return sr(Se,B?function(St){St.x=(St.x-Se.x)*O[0],St.y=(Se.y-St.y)*O[1]}:function(St){St.x=(St.x-At)/(Pt-At)*O[0],St.y=(1-(Se.y?St.y/Se.y:1))*O[1]}),_e}return q.separation=function(ae){return arguments.length?(E=ae,q):E},q.size=function(ae){return arguments.length?(B=null==(O=ae),q):B?null:O},q.nodeSize=function(ae){return arguments.length?(B=null!=(O=ae),q):B?O:null},ir(q,le)},d.layout.treemap=function(){var le,E=d.layout.hierarchy(),O=Math.round,B=[1,1],q=null,ae=zr,he=!1,me="squarify",_e=.5*(1+Math.sqrt(5));function Se(St,Lt){for(var kt,Ht,jt=-1,Yt=St.length;++jt<Yt;)Ht=(kt=St[jt]).value*(Lt<0?0:Lt),kt.area=isNaN(Ht)||Ht<=0?0:Ht}function Ve(St){var Lt=St.children;if(Lt&&Lt.length){var kt,Ht,jt,Yt=ae(St),lr=[],vr=Lt.slice(),Or=1/0,Dr="slice"===me?Yt.dx:"dice"===me?Yt.dy:"slice-dice"===me?1&St.depth?Yt.dy:Yt.dx:Math.min(Yt.dx,Yt.dy);for(Se(vr,Yt.dx*Yt.dy/St.value),lr.area=0;(jt=vr.length)>0;)lr.push(kt=vr[jt-1]),lr.area+=kt.area,"squarify"!==me||(Ht=st(lr,Dr))<=Or?(vr.pop(),Or=Ht):(lr.area-=lr.pop().area,At(lr,Dr,Yt,!1),Dr=Math.min(Yt.dx,Yt.dy),lr.length=lr.area=0,Or=1/0);lr.length&&(At(lr,Dr,Yt,!0),lr.length=lr.area=0),Lt.forEach(Ve)}}function Ke(St){var Lt=St.children;if(Lt&&Lt.length){var kt,Ht=ae(St),jt=Lt.slice(),Yt=[];for(Se(jt,Ht.dx*Ht.dy/St.value),Yt.area=0;kt=jt.pop();)Yt.push(kt),Yt.area+=kt.area,null!=kt.z&&(At(Yt,kt.z?Ht.dx:Ht.dy,Ht,!jt.length),Yt.length=Yt.area=0);Lt.forEach(Ke)}}function st(St,Lt){for(var kt,Ht=St.area,jt=0,Yt=1/0,lr=-1,vr=St.length;++lr<vr;)(kt=St[lr].area)&&(kt<Yt&&(Yt=kt),kt>jt&&(jt=kt));return Lt*=Lt,(Ht*=Ht)?Math.max(Lt*jt*_e/Ht,Ht/(Lt*Yt*_e)):1/0}function At(St,Lt,kt,Ht){var jt,Yt=-1,lr=St.length,vr=kt.x,Or=kt.y,Dr=Lt?O(St.area/Lt):0;if(Lt==kt.dx){for((Ht||Dr>kt.dy)&&(Dr=kt.dy);++Yt<lr;)(jt=St[Yt]).x=vr,jt.y=Or,jt.dy=Dr,vr+=jt.dx=Math.min(kt.x+kt.dx-vr,Dr?O(jt.area/Dr):0);jt.z=!0,jt.dx+=kt.x+kt.dx-vr,kt.y+=Dr,kt.dy-=Dr}else{for((Ht||Dr>kt.dx)&&(Dr=kt.dx);++Yt<lr;)(jt=St[Yt]).x=vr,jt.y=Or,jt.dx=Dr,Or+=jt.dy=Math.min(kt.y+kt.dy-Or,Dr?O(jt.area/Dr):0);jt.z=!1,jt.dy+=kt.y+kt.dy-Or,kt.x+=Dr,kt.dx-=Dr}}function Pt(St){var Lt=le||E(St),kt=Lt[0];return kt.x=kt.y=0,kt.value?(kt.dx=B[0],kt.dy=B[1]):kt.dx=kt.dy=0,le&&E.revalue(kt),Se([kt],kt.dx*kt.dy/kt.value),(le?Ke:Ve)(kt),he&&(le=Lt),Lt}return Pt.size=function(St){return arguments.length?(B=St,Pt):B},Pt.padding=function(St){if(!arguments.length)return q;function Lt(jt){var Yt=St.call(Pt,jt,jt.depth);return null==Yt?zr(jt):Vr(jt,"number"==typeof Yt?[Yt,Yt,Yt,Yt]:Yt)}function kt(jt){return Vr(jt,St)}var Ht;return ae=null==(q=St)?zr:"function"==(Ht=typeof St)?Lt:("number"===Ht&&(St=[St,St,St,St]),kt),Pt},Pt.round=function(St){return arguments.length?(O=St?Math.round:Number,Pt):O!=Number},Pt.sticky=function(St){return arguments.length?(he=St,le=null,Pt):he},Pt.ratio=function(St){return arguments.length?(_e=St,Pt):_e},Pt.mode=function(St){return arguments.length?(me=St+"",Pt):me},ir(Pt,E)},d.random={normal:function(le,E){var O=arguments.length;return O<2&&(E=1),O<1&&(le=0),function(){var B,q,ae;do{ae=(B=2*Math.random()-1)*B+(q=2*Math.random()-1)*q}while(!ae||ae>1);return le+E*B*Math.sqrt(-2*Math.log(ae)/ae)}},logNormal:function(){var le=d.random.normal.apply(d,arguments);return function(){return Math.exp(le())}},bates:function(le){var E=d.random.irwinHall(le);return function(){return E()/le}},irwinHall:function(le){return function(){for(var E=0,O=0;O<le;O++)E+=Math.random();return E}}},d.scale={};var mn={floor:C,ceil:C};function En(le,E,O,B){var q=[],ae=[],he=0,me=Math.min(le.length,E.length)-1;for(le[me]<le[0]&&(le=le.slice().reverse(),E=E.slice().reverse());++he<=me;)q.push(O(le[he-1],le[he])),ae.push(B(E[he-1],E[he]));return function(_e){var Se=d.bisect(le,_e,1,me)-1;return ae[Se](q[Se](_e))}}function Yn(le,E){return d.rebind(le,E,"range","rangeRound","interpolate","clamp")}function Jn(le,E){return wn(le,Ln(si(le,E)[2])),wn(le,Ln(si(le,E)[2])),le}function si(le,E){null==E&&(E=10);var O=$r(le),B=O[1]-O[0],q=Math.pow(10,Math.floor(Math.log(B/E)/Math.LN10)),ae=E/B*q;return ae<=.15?q*=10:ae<=.35?q*=5:ae<=.75&&(q*=2),O[0]=Math.ceil(O[0]/q)*q,O[1]=Math.floor(O[1]/q)*q+.5*q,O[2]=q,O}function nn(le,E){return d.range.apply(d,si(le,E))}d.scale.linear=function(){return function le(E,O,B,q){var ae,he;function me(){var Se=Math.min(E.length,O.length)>2?En:hn,Ve=q?Io:ds;return ae=Se(E,O,Ve,B),he=Se(O,E,Ve,Va),_e}function _e(Se){return ae(Se)}return _e.invert=function(Se){return he(Se)},_e.domain=function(Se){return arguments.length?(E=Se.map(Number),me()):E},_e.range=function(Se){return arguments.length?(O=Se,me()):O},_e.rangeRound=function(Se){return _e.range(Se).interpolate(Do)},_e.clamp=function(Se){return arguments.length?(q=Se,me()):q},_e.interpolate=function(Se){return arguments.length?(B=Se,me()):B},_e.ticks=function(Se){return nn(E,Se)},_e.tickFormat=function(Se,Ve){return d3_scale_linearTickFormat(E,Se,Ve)},_e.nice=function(Se){return Jn(E,Se),me()},_e.copy=function(){return le(E,O,B,q)},me()}([0,1],[0,1],Va,!1)},d.scale.log=function(){return function le(E,O,B,q){function ae(_e){return(B?Math.log(_e<0?0:_e):-Math.log(_e>0?0:-_e))/Math.log(O)}function he(_e){return B?Math.pow(O,_e):-Math.pow(O,-_e)}function me(_e){return E(ae(_e))}return me.invert=function(_e){return he(E.invert(_e))},me.domain=function(_e){return arguments.length?(B=_e[0]>=0,E.domain((q=_e.map(Number)).map(ae)),me):q},me.base=function(_e){return arguments.length?(O=+_e,E.domain(q.map(ae)),me):O},me.nice=function(){var _e=wn(q.map(ae),B?Math:oi);return E.domain(_e),q=_e.map(he),me},me.ticks=function(){var _e=$r(q),Se=[],Ve=_e[0],Ke=_e[1],st=Math.floor(ae(Ve)),At=Math.ceil(ae(Ke)),Pt=O%1?2:O;if(isFinite(At-st)){if(B){for(;st<At;st++)for(var St=1;St<Pt;St++)Se.push(he(st)*St);Se.push(he(st))}else for(Se.push(he(st));st++<At;)for(St=Pt-1;St>0;St--)Se.push(he(st)*St);for(st=0;Se[st]<Ve;st++);for(At=Se.length;Se[At-1]>Ke;At--);Se=Se.slice(st,At)}return Se},me.copy=function(){return le(E.copy(),O,B,q)},Yn(me,E)}(d.scale.linear().domain([0,1]),10,!0,[1,10])};var oi={floor:function(le){return-Math.ceil(-le)},ceil:function(le){return-Math.floor(-le)}};function Bn(le){return function(E){return E<0?-Math.pow(-E,le):Math.pow(E,le)}}d.scale.pow=function(){return function le(E,O,B){var q=Bn(O),ae=Bn(1/O);function he(me){return E(q(me))}return he.invert=function(me){return ae(E.invert(me))},he.domain=function(me){return arguments.length?(E.domain((B=me.map(Number)).map(q)),he):B},he.ticks=function(me){return nn(B,me)},he.tickFormat=function(me,_e){return d3_scale_linearTickFormat(B,me,_e)},he.nice=function(me){return he.domain(Jn(B,me))},he.exponent=function(me){return arguments.length?(q=Bn(O=me),ae=Bn(1/O),E.domain(B.map(q)),he):O},he.copy=function(){return le(E.copy(),O,B)},Yn(he,E)}(d.scale.linear(),1,[0,1])},d.scale.sqrt=function(){return d.scale.pow().exponent(.5)},d.scale.ordinal=function(){return function le(E,O){var B,q,ae;function he(_e){return q[((B.get(_e)||("range"===O.t?B.set(_e,E.push(_e)):NaN))-1)%q.length]}function me(_e,Se){return d.range(E.length).map(function(Ve){return _e+Se*Ve})}return he.domain=function(_e){if(!arguments.length)return E;E=[],B=new w;for(var Se,Ve=-1,Ke=_e.length;++Ve<Ke;)B.has(Se=_e[Ve])||B.set(Se,E.push(Se));return he[O.t].apply(he,O.a)},he.range=function(_e){return arguments.length?(q=_e,ae=0,O={t:"range",a:arguments},he):q},he.rangePoints=function(_e,Se){arguments.length<2&&(Se=0);var Ve=_e[0],Ke=_e[1],st=E.length<2?(Ve=(Ve+Ke)/2,0):(Ke-Ve)/(E.length-1+Se);return q=me(Ve+st*Se/2,st),ae=0,O={t:"rangePoints",a:arguments},he},he.rangeRoundPoints=function(_e,Se){arguments.length<2&&(Se=0);var Ve=_e[0],Ke=_e[1],st=E.length<2?(Ve=Ke=Math.round((Ve+Ke)/2),0):(Ke-Ve)/(E.length-1+Se)|0;return q=me(Ve+Math.round(st*Se/2+(Ke-Ve-(E.length-1+Se)*st)/2),st),ae=0,O={t:"rangeRoundPoints",a:arguments},he},he.rangeBands=function(_e,Se,Ve){arguments.length<2&&(Se=0),arguments.length<3&&(Ve=Se);var Ke=_e[1]<_e[0],st=_e[Ke-0],Pt=(_e[1-Ke]-st)/(E.length-Se+2*Ve);return q=me(st+Pt*Ve,Pt),Ke&&q.reverse(),ae=Pt*(1-Se),O={t:"rangeBands",a:arguments},he},he.rangeRoundBands=function(_e,Se,Ve){arguments.length<2&&(Se=0),arguments.length<3&&(Ve=Se);var Ke=_e[1]<_e[0],st=_e[Ke-0],At=_e[1-Ke],Pt=Math.floor((At-st)/(E.length-Se+2*Ve));return q=me(st+Math.round((At-st-(E.length-Se)*Pt)/2),Pt),Ke&&q.reverse(),ae=Math.round(Pt*(1-Se)),O={t:"rangeRoundBands",a:arguments},he},he.rangeBand=function(){return ae},he.rangeExtent=function(){return $r(O.a[0])},he.copy=function(){return le(E,O)},he.domain(E)}([],{t:"range",a:[[]]})},d.scale.category10=function(){return d.scale.ordinal().range(Zn)},d.scale.category20=function(){return d.scale.ordinal().range(ii)},d.scale.category20b=function(){return d.scale.ordinal().range(Ai)},d.scale.category20c=function(){return d.scale.ordinal().range(zi)};var Zn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Wt),ii=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Wt),Ai=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Wt),zi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Wt);function Rn(){return 0}d.scale.quantile=function(){return function le(E,O){var B;function q(){var he=0,me=O.length;for(B=[];++he<me;)B[he-1]=d.quantile(E,he/me);return ae}function ae(he){if(!isNaN(he=+he))return O[d.bisect(B,he)]}return ae.domain=function(he){return arguments.length?(E=he.map(c).filter(u).sort(a),q()):E},ae.range=function(he){return arguments.length?(O=he,q()):O},ae.quantiles=function(){return B},ae.invertExtent=function(he){return(he=O.indexOf(he))<0?[NaN,NaN]:[he>0?B[he-1]:E[0],he<B.length?B[he]:E[E.length-1]]},ae.copy=function(){return le(E,O)},q()}([],[])},d.scale.quantize=function(){return function le(E,O,B){var q,ae;function he(_e){return B[Math.max(0,Math.min(ae,Math.floor(q*(_e-E))))]}function me(){return q=B.length/(O-E),ae=B.length-1,he}return he.domain=function(_e){return arguments.length?(E=+_e[0],O=+_e[_e.length-1],me()):[E,O]},he.range=function(_e){return arguments.length?(B=_e,me()):B},he.invertExtent=function(_e){return[_e=(_e=B.indexOf(_e))<0?NaN:_e/q+E,_e+1/q]},he.copy=function(){return le(E,O,B)},me()}(0,1,[0,1])},d.scale.threshold=function(){return function le(E,O){function B(q){if(q<=q)return O[d.bisect(E,q)]}return B.domain=function(q){return arguments.length?(E=q,B):E},B.range=function(q){return arguments.length?(O=q,B):O},B.invertExtent=function(q){return q=O.indexOf(q),[E[q-1],E[q]]},B.copy=function(){return le(E,O)},B}([.5],[0,1])},d.scale.identity=function(){return function le(E){function O(B){return+B}return O.invert=O,O.domain=O.range=function(B){return arguments.length?(E=B.map(O),O):E},O.ticks=function(B){return nn(E,B)},O.tickFormat=function(B,q){return d3_scale_linearTickFormat(E,B,q)},O.copy=function(){return le(E)},O}([0,1])},d.svg={},d.svg.arc=function(){var le=Pi,E=xi,O=Rn,B=ji,q=Vi,ae=Di,he=ra;function me(){var Se=Math.max(0,+le.apply(this,arguments)),Ve=Math.max(0,+E.apply(this,arguments)),Ke=q.apply(this,arguments)-We,st=ae.apply(this,arguments)-We,At=Math.abs(st-Ke),Pt=Ke>st?0:1;if(Ve<Se&&(St=Ve,Ve=Se,Se=St),At>=Ue)return _e(Ve,Pt)+(Se?_e(Se,1-Pt):"")+"Z";var St,Lt,kt,Ht,jt,Yt,lr,vr,Or,Dr,sn,on,kn=0,gn=0,Xn=[];if((Ht=(+he.apply(this,arguments)||0)/2)&&(kt=B===ji?Math.sqrt(Se*Se+Ve*Ve):+B.apply(this,arguments),Pt||(gn*=-1),Ve&&(gn=Ae(kt/Ve*Math.sin(Ht))),Se&&(kn=Ae(kt/Se*Math.sin(Ht)))),Ve){jt=Ve*Math.cos(Ke+gn),Yt=Ve*Math.sin(Ke+gn),lr=Ve*Math.cos(st-gn),vr=Ve*Math.sin(st-gn);var ti=Math.abs(st-Ke-2*gn)<=Xt?0:1;if(gn&&li(jt,Yt,lr,vr)===Pt^ti){var gi=(Ke+st)/2;jt=Ve*Math.cos(gi),Yt=Ve*Math.sin(gi),lr=vr=null}}else jt=Yt=0;if(Se){Or=Se*Math.cos(st-kn),Dr=Se*Math.sin(st-kn),sn=Se*Math.cos(Ke+kn),on=Se*Math.sin(Ke+kn);var Jr=Math.abs(Ke-st+2*kn)<=Xt?0:1;if(kn&&li(Or,Dr,sn,on)===1-Pt^Jr){var Pn=(Ke+st)/2;Or=Se*Math.cos(Pn),Dr=Se*Math.sin(Pn),sn=on=null}}else Or=Dr=0;if(At>Et&&(St=Math.min(Math.abs(Ve-Se)/2,+O.apply(this,arguments)))>.001){Lt=Se<Ve^Pt?0:1;var ri=St,$n=St;if(At<Xt){var ui=null==sn?[Or,Dr]:null==lr?[jt,Yt]:zt([jt,Yt],[sn,on],[lr,vr],[Or,Dr]),_i=jt-ui[0],Ii=Yt-ui[1],ai=lr-ui[0],Si=vr-ui[1],Mi=1/Math.sin(Math.acos((_i*ai+Ii*Si)/(Math.sqrt(_i*_i+Ii*Ii)*Math.sqrt(ai*ai+Si*Si)))/2),Fi=Math.sqrt(ui[0]*ui[0]+ui[1]*ui[1]);$n=Math.min(St,(Se-Fi)/(Mi-1)),ri=Math.min(St,(Ve-Fi)/(Mi+1))}if(null!=lr){var Ci=Qi(null==sn?[Or,Dr]:[sn,on],[jt,Yt],Ve,ri,Pt),Bi=Qi([lr,vr],[Or,Dr],Ve,ri,Pt);St===ri?Xn.push("M",Ci[0],"A",ri,",",ri," 0 0,",Lt," ",Ci[1],"A",Ve,",",Ve," 0 ",1-Pt^li(Ci[1][0],Ci[1][1],Bi[1][0],Bi[1][1]),",",Pt," ",Bi[1],"A",ri,",",ri," 0 0,",Lt," ",Bi[0]):Xn.push("M",Ci[0],"A",ri,",",ri," 0 1,",Lt," ",Bi[0])}else Xn.push("M",jt,",",Yt);if(null!=sn){var Wi=Qi([jt,Yt],[sn,on],Se,-$n,Pt),wa=Qi([Or,Dr],null==lr?[jt,Yt]:[lr,vr],Se,-$n,Pt);St===$n?Xn.push("L",wa[0],"A",$n,",",$n," 0 0,",Lt," ",wa[1],"A",Se,",",Se," 0 ",Pt^li(wa[1][0],wa[1][1],Wi[1][0],Wi[1][1]),",",1-Pt," ",Wi[1],"A",$n,",",$n," 0 0,",Lt," ",Wi[0]):Xn.push("L",wa[0],"A",$n,",",$n," 0 0,",Lt," ",Wi[0])}else Xn.push("L",Or,",",Dr)}else Xn.push("M",jt,",",Yt),null!=lr&&Xn.push("A",Ve,",",Ve," 0 ",ti,",",Pt," ",lr,",",vr),Xn.push("L",Or,",",Dr),null!=sn&&Xn.push("A",Se,",",Se," 0 ",Jr,",",1-Pt," ",sn,",",on);return Xn.push("Z"),Xn.join("")}function _e(Se,Ve){return"M0,"+Se+"A"+Se+","+Se+" 0 1,"+Ve+" 0,"+-Se+"A"+Se+","+Se+" 0 1,"+Ve+" 0,"+Se}return me.innerRadius=function(Se){return arguments.length?(le=kr(Se),me):le},me.outerRadius=function(Se){return arguments.length?(E=kr(Se),me):E},me.cornerRadius=function(Se){return arguments.length?(O=kr(Se),me):O},me.padRadius=function(Se){return arguments.length?(B=Se==ji?ji:kr(Se),me):B},me.startAngle=function(Se){return arguments.length?(q=kr(Se),me):q},me.endAngle=function(Se){return arguments.length?(ae=kr(Se),me):ae},me.padAngle=function(Se){return arguments.length?(he=kr(Se),me):he},me.centroid=function(){var Se=(+le.apply(this,arguments)+ +E.apply(this,arguments))/2,Ve=(+q.apply(this,arguments)+ +ae.apply(this,arguments))/2-We;return[Math.cos(Ve)*Se,Math.sin(Ve)*Se]},me};var ji="auto";function Pi(le){return le.innerRadius}function xi(le){return le.outerRadius}function Vi(le){return le.startAngle}function Di(le){return le.endAngle}function ra(le){return le&&le.padAngle}function li(le,E,O,B){return(le-O)*E-(E-B)*le>0?0:1}function Qi(le,E,O,B,q){var ae=le[0]-E[0],he=le[1]-E[1],me=(q?B:-B)/Math.sqrt(ae*ae+he*he),_e=me*he,Se=-me*ae,Ve=le[0]+_e,Ke=le[1]+Se,st=E[0]+_e,At=E[1]+Se,Pt=(Ve+st)/2,St=(Ke+At)/2,Lt=st-Ve,kt=At-Ke,Ht=Lt*Lt+kt*kt,jt=O-B,Yt=Ve*At-st*Ke,lr=(kt<0?-1:1)*Math.sqrt(Math.max(0,jt*jt*Ht-Yt*Yt)),vr=(Yt*kt-Lt*lr)/Ht,Or=(-Yt*Lt-kt*lr)/Ht,Dr=(Yt*kt+Lt*lr)/Ht,sn=(-Yt*Lt+kt*lr)/Ht,on=vr-Pt,kn=Or-St,gn=Dr-Pt,Xn=sn-St;return on*on+kn*kn>gn*gn+Xn*Xn&&(vr=Dr,Or=sn),[[vr-_e,Or-Se],[vr*O/jt,Or*O/jt]]}function qa(){return!0}function ts(le){var E=qr,O=On,B=qa,q=xo,ae=q.key,he=.7;function me(_e){var Se,Ve=[],Ke=[],st=-1,At=_e.length,Pt=kr(E),St=kr(O);function Lt(){Ve.push("M",q(le(Ke),he))}for(;++st<At;)B.call(this,Se=_e[st],st)?Ke.push([+Pt.call(this,Se,st),+St.call(this,Se,st)]):Ke.length&&(Lt(),Ke=[]);return Ke.length&&Lt(),Ve.length?Ve.join(""):null}return me.x=function(_e){return arguments.length?(E=_e,me):E},me.y=function(_e){return arguments.length?(O=_e,me):O},me.defined=function(_e){return arguments.length?(B=_e,me):B},me.interpolate=function(_e){return arguments.length?(ae="function"==typeof _e?q=_e:(q=No.get(_e)||xo).key,me):ae},me.tension=function(_e){return arguments.length?(he=_e,me):he},me}d.svg.line=function(){return ts(C)};var No=d.map({linear:xo,"linear-closed":ki,step:function(le){for(var E=0,O=le.length,B=le[0],q=[B[0],",",B[1]];++E<O;)q.push("H",(B[0]+(B=le[E])[0])/2,"V",B[1]);return O>1&&q.push("H",B[0]),q.join("")},"step-before":ya,"step-after":ho,basis:Ya,"basis-open":function(le){if(le.length<4)return xo(le);for(var E,O=[],B=-1,q=le.length,ae=[0],he=[0];++B<3;)ae.push((E=le[B])[0]),he.push(E[1]);for(O.push(na(ao,ae)+","+na(ao,he)),--B;++B<q;)E=le[B],ae.shift(),ae.push(E[0]),he.shift(),he.push(E[1]),ls(O,ae,he);return O.join("")},"basis-closed":function(le){for(var E,O,B=-1,q=le.length,ae=q+4,he=[],me=[];++B<4;)he.push((O=le[B%q])[0]),me.push(O[1]);for(E=[na(ao,he),",",na(ao,me)],--B;++B<ae;)O=le[B%q],he.shift(),he.push(O[0]),me.shift(),me.push(O[1]),ls(E,he,me);return E.join("")},bundle:function(le,E){var O=le.length-1;if(O)for(var B,q,ae=le[0][0],he=le[0][1],me=le[O][0]-ae,_e=le[O][1]-he,Se=-1;++Se<=O;)(B=le[Se])[0]=E*B[0]+(1-E)*(ae+(q=Se/O)*me),B[1]=E*B[1]+(1-E)*(he+q*_e);return Ya(le)},cardinal:function(le,E){return le.length<3?xo(le):le[0]+Zi(le,Sa(le,E))},"cardinal-open":function(le,E){return le.length<4?xo(le):le[1]+Zi(le.slice(1,-1),Sa(le,E))},"cardinal-closed":function(le,E){return le.length<3?ki(le):le[0]+Zi((le.push(le[0]),le),Sa([le[le.length-2]].concat(le,[le[1]]),E))},monotone:function(le){return le.length<3?xo(le):le[0]+Zi(le,function(E){for(var O,B,q,ae,he=[],me=function(Ve){for(var Ke=0,st=Ve.length-1,At=[],Pt=Ve[0],St=Ve[1],Lt=At[0]=rs(Pt,St);++Ke<st;)At[Ke]=(Lt+(Lt=rs(Pt=St,St=Ve[Ke+1])))/2;return At[Ke]=Lt,At}(E),_e=-1,Se=E.length-1;++_e<Se;)O=rs(E[_e],E[_e+1]),l(O)<Et?me[_e]=me[_e+1]=0:(ae=(B=me[_e]/O)*B+(q=me[_e+1]/O)*q)>9&&(ae=3*O/Math.sqrt(ae),me[_e]=ae*B,me[_e+1]=ae*q);for(_e=-1;++_e<=Se;)ae=(E[Math.min(Se,_e+1)][0]-E[Math.max(0,_e-1)][0])/(6*(1+me[_e]*me[_e])),he.push([ae||0,me[_e]*ae||0]);return he}(le))}});function xo(le){return le.length>1?le.join("L"):le+"Z"}function ki(le){return le.join("L")+"Z"}function ya(le){for(var E=0,O=le.length,B=le[0],q=[B[0],",",B[1]];++E<O;)q.push("V",(B=le[E])[1],"H",B[0]);return q.join("")}function ho(le){for(var E=0,O=le.length,B=le[0],q=[B[0],",",B[1]];++E<O;)q.push("H",(B=le[E])[0],"V",B[1]);return q.join("")}function Zi(le,E){if(E.length<1||le.length!=E.length&&le.length!=E.length+2)return xo(le);var O=le.length!=E.length,B="",q=le[0],ae=le[1],he=E[0],me=he,_e=1;if(O&&(B+="Q"+(ae[0]-2*he[0]/3)+","+(ae[1]-2*he[1]/3)+","+ae[0]+","+ae[1],q=le[1],_e=2),E.length>1){ae=le[_e],_e++,B+="C"+(q[0]+he[0])+","+(q[1]+he[1])+","+(ae[0]-(me=E[1])[0])+","+(ae[1]-me[1])+","+ae[0]+","+ae[1];for(var Se=2;Se<E.length;Se++,_e++)B+="S"+((ae=le[_e])[0]-(me=E[Se])[0])+","+(ae[1]-me[1])+","+ae[0]+","+ae[1]}if(O){var Ve=le[_e];B+="Q"+(ae[0]+2*me[0]/3)+","+(ae[1]+2*me[1]/3)+","+Ve[0]+","+Ve[1]}return B}function Sa(le,E){for(var O,B=[],q=(1-E)/2,ae=le[0],he=le[1],me=1,_e=le.length;++me<_e;)O=ae,ae=he,B.push([q*((he=le[me])[0]-O[0]),q*(he[1]-O[1])]);return B}function Ya(le){if(le.length<3)return xo(le);var E=1,O=le.length,B=le[0],q=B[0],ae=B[1],he=[q,q,q,(B=le[1])[0]],me=[ae,ae,ae,B[1]],_e=[q,",",ae,"L",na(ao,he),",",na(ao,me)];for(le.push(le[O-1]);++E<=O;)B=le[E],he.shift(),he.push(B[0]),me.shift(),me.push(B[1]),ls(_e,he,me);return le.pop(),_e.push("L",B),_e.join("")}function na(le,E){return le[0]*E[0]+le[1]*E[1]+le[2]*E[2]+le[3]*E[3]}No.forEach(function(le,E){E.key=le,E.closed=/-closed$/.test(le)});var fo=[0,2/3,1/3,0],aa=[0,1/3,2/3,0],ao=[0,1/6,2/3,1/6];function ls(le,E,O){le.push("C",na(fo,E),",",na(fo,O),",",na(aa,E),",",na(aa,O),",",na(ao,E),",",na(ao,O))}function rs(le,E){return(E[1]-le[1])/(E[0]-le[0])}function Ps(le){for(var E,O,B,q=-1,ae=le.length;++q<ae;)O=(E=le[q])[0],B=E[1]-We,E[0]=O*Math.cos(B),E[1]=O*Math.sin(B);return le}function Ia(le){var E=qr,O=qr,B=0,q=On,ae=qa,he=xo,me=he.key,_e=he,Se="L",Ve=.7;function Ke(st){var At,Pt,St,Lt=[],kt=[],Ht=[],jt=-1,Yt=st.length,lr=kr(E),vr=kr(B),Or=E===O?function(){return Pt}:kr(O),Dr=B===q?function(){return St}:kr(q);function sn(){Lt.push("M",he(le(Ht),Ve),Se,_e(le(kt.reverse()),Ve),"Z")}for(;++jt<Yt;)ae.call(this,At=st[jt],jt)?(kt.push([Pt=+lr.call(this,At,jt),St=+vr.call(this,At,jt)]),Ht.push([+Or.call(this,At,jt),+Dr.call(this,At,jt)])):kt.length&&(sn(),kt=[],Ht=[]);return kt.length&&sn(),Lt.length?Lt.join(""):null}return Ke.x=function(st){return arguments.length?(E=O=st,Ke):O},Ke.x0=function(st){return arguments.length?(E=st,Ke):E},Ke.x1=function(st){return arguments.length?(O=st,Ke):O},Ke.y=function(st){return arguments.length?(B=q=st,Ke):q},Ke.y0=function(st){return arguments.length?(B=st,Ke):B},Ke.y1=function(st){return arguments.length?(q=st,Ke):q},Ke.defined=function(st){return arguments.length?(ae=st,Ke):ae},Ke.interpolate=function(st){return arguments.length?(me="function"==typeof st?he=st:(he=No.get(st)||xo).key,_e=he.reverse||he,Se=he.closed?"M":"L",Ke):me},Ke.tension=function(st){return arguments.length?(Ve=st,Ke):Ve},Ke}function Ss(le){return le.source}function Pa(le){return le.target}function ns(le){return le.radius}function mi(le){return[le.x,le.y]}function Ti(le){return function(){var E=le.apply(this,arguments),O=E[0],B=E[1]-We;return[O*Math.cos(B),O*Math.sin(B)]}}function Ds(){return 64}function ws(){return"circle"}function is(le){var E=Math.sqrt(le/Xt);return"M0,"+E+"A"+E+","+E+" 0 1,1 0,"+-E+"A"+E+","+E+" 0 1,1 0,"+E+"Z"}d.svg.line.radial=function(){var le=ts(Ps);return le.radius=le.x,delete le.x,le.angle=le.y,delete le.y,le},ya.reverse=ho,ho.reverse=ya,d.svg.area=function(){return Ia(C)},d.svg.area.radial=function(){var le=Ia(Ps);return le.radius=le.x,delete le.x,le.innerRadius=le.x0,delete le.x0,le.outerRadius=le.x1,delete le.x1,le.angle=le.y,delete le.y,le.startAngle=le.y0,delete le.y0,le.endAngle=le.y1,delete le.y1,le},d.svg.chord=function(){var le=Ss,E=Pa,O=ns,B=Vi,q=Di;function ae(Se,Ve){var Ke,st,At=he(this,le,Se,Ve),Pt=he(this,E,Se,Ve);return"M"+At.p0+me(At.r,At.p1,At.a1-At.a0)+((Ke=At).a0==(st=Pt).a0&&Ke.a1==st.a1?_e(0,0,0,At.p0):_e(0,0,0,Pt.p0)+me(Pt.r,Pt.p1,Pt.a1-Pt.a0)+_e(0,0,0,At.p0))+"Z"}function he(Se,Ve,Ke,st){var At=Ve.call(Se,Ke,st),Pt=O.call(Se,At,st),St=B.call(Se,At,st)-We,Lt=q.call(Se,At,st)-We;return{r:Pt,a0:St,a1:Lt,p0:[Pt*Math.cos(St),Pt*Math.sin(St)],p1:[Pt*Math.cos(Lt),Pt*Math.sin(Lt)]}}function me(Se,Ve,Ke){return"A"+Se+","+Se+" 0 "+ +(Ke>Xt)+",1 "+Ve}function _e(Se,Ve,Ke,st){return"Q 0,0 "+st}return ae.radius=function(Se){return arguments.length?(O=kr(Se),ae):O},ae.source=function(Se){return arguments.length?(le=kr(Se),ae):le},ae.target=function(Se){return arguments.length?(E=kr(Se),ae):E},ae.startAngle=function(Se){return arguments.length?(B=kr(Se),ae):B},ae.endAngle=function(Se){return arguments.length?(q=kr(Se),ae):q},ae},d.svg.diagonal=function(){var le=Ss,E=Pa,O=mi;function B(q,ae){var he=le.call(this,q,ae),me=E.call(this,q,ae),_e=(he.y+me.y)/2,Se=[he,{x:he.x,y:_e},{x:me.x,y:_e},me];return"M"+(Se=Se.map(O))[0]+"C"+Se[1]+" "+Se[2]+" "+Se[3]}return B.source=function(q){return arguments.length?(le=kr(q),B):le},B.target=function(q){return arguments.length?(E=kr(q),B):E},B.projection=function(q){return arguments.length?(O=q,B):O},B},d.svg.diagonal.radial=function(){var le=d.svg.diagonal(),E=mi,O=le.projection;return le.projection=function(B){return arguments.length?O(Ti(E=B)):E},le},d.svg.symbol=function(){var le=ws,E=Ds;function O(B,q){return(Ao.get(le.call(this,B,q))||is)(E.call(this,B,q))}return O.type=function(B){return arguments.length?(le=kr(B),O):le},O.size=function(B){return arguments.length?(E=kr(B),O):E},O};var Ao=d.map({circle:is,cross:function(le){var E=Math.sqrt(le/5)/2;return"M"+-3*E+","+-E+"H"+-E+"V"+-3*E+"H"+E+"V"+-E+"H"+3*E+"V"+E+"H"+E+"V"+3*E+"H"+-E+"V"+E+"H"+-3*E+"Z"},diamond:function(le){var E=Math.sqrt(le/(2*Vs)),O=E*Vs;return"M0,"+-E+"L"+O+",0 0,"+E+" "+-O+",0Z"},square:function(le){var E=Math.sqrt(le)/2;return"M"+-E+","+-E+"L"+E+","+-E+" "+E+","+E+" "+-E+","+E+"Z"},"triangle-down":function(le){var E=Math.sqrt(le/Ho),O=E*Ho/2;return"M0,"+O+"L"+E+","+-O+" "+-E+","+-O+"Z"},"triangle-up":function(le){var E=Math.sqrt(le/Ho),O=E*Ho/2;return"M0,"+-O+"L"+E+","+O+" "+-E+","+O+"Z"}});d.svg.symbolTypes=Ao.keys();var Ho=Math.sqrt(3),Vs=Math.tan(30*Be);K.transition=function(le){for(var E,O,B=ms||++vs,q=Ye(le),ae=[],he=gs||{time:Date.now(),ease:ss,delay:0,duration:250},me=-1,_e=this.length;++me<_e;){ae.push(E=[]);for(var Se=this[me],Ve=-1,Ke=Se.length;++Ve<Ke;)(O=Se[Ve])&&Tt(O,Ve,q,B,he),E.push(O)}return oa(ae,q,B)},K.interrupt=function(le){return this.each(null==le?Cs:$i(Ye(le)))};var Cs=$i(Ye());function $i(le){return function(){var E,O,B;(E=this[le])&&(B=E[O=E.active])&&(B.timer.c=null,B.timer.t=NaN,--E.count?delete E[O]:delete this[le],E.active+=.5,B.event&&B.event.interrupt.call(this,this.__data__,B.index))}}function oa(le,E,O){return N(le,Oa),le.namespace=E,le.id=O,le}var ms,gs,Oa=[],vs=0;function Es(le,E,O,B){var q=le.id,ae=le.namespace;return Fe(le,"function"==typeof O?function(he,me,_e){he[ae][q].tween.set(E,B(O.call(he,he.__data__,me,_e)))}:(O=B(O),function(he){he[ae][q].tween.set(E,O)}))}function ks(le){return null==le&&(le=""),function(){this.textContent=le}}function Ye(le){return null==le?"__transition__":"__transition_"+le+"__"}function Tt(le,E,O,B,q){var ae,he,me,_e,Se,Ve=le[O]||(le[O]={active:0,count:0}),Ke=Ve[B];function st(Pt){var St=Ve.active,Lt=Ve[St];for(var kt in Lt&&(Lt.timer.c=null,Lt.timer.t=NaN,--Ve.count,delete Ve[St],Lt.event&&Lt.event.interrupt.call(le,le.__data__,Lt.index)),Ve)if(+kt<B){var Ht=Ve[kt];Ht.timer.c=null,Ht.timer.t=NaN,--Ve.count,delete Ve[kt]}he.c=At,jr(function(){return he.c&&At(Pt||1)&&(he.c=null,he.t=NaN),1},0,ae),Ve.active=B,Ke.event&&Ke.event.start.call(le,le.__data__,E),Se=[],Ke.tween.forEach(function(jt,Yt){(Yt=Yt.call(le,le.__data__,E))&&Se.push(Yt)}),_e=Ke.ease,me=Ke.duration}function At(Pt){for(var St=Pt/me,Lt=_e(St),kt=Se.length;kt>0;)Se[--kt].call(le,Lt);if(St>=1)return Ke.event&&Ke.event.end.call(le,le.__data__,E),--Ve.count?delete Ve[B]:delete le[O],1}Ke||(he=jr(function(Pt){var St=Ke.delay;if(he.t=St+ae,St<=Pt)return st(Pt-St);he.c=st},0,ae=q.time),Ke=Ve[B]={tween:new w,time:ae,timer:he,delay:q.delay,duration:q.duration,ease:q.ease,index:E},q=null,++Ve.count)}Oa.call=K.call,Oa.empty=K.empty,Oa.node=K.node,Oa.size=K.size,d.transition=function(le,E){return le&&le.transition?ms?le.transition(E):le:d.selection().transition(le)},d.transition.prototype=Oa,Oa.select=function(le){var E,O,B,q=this.id,ae=this.namespace,he=[];le=re(le);for(var me=-1,_e=this.length;++me<_e;){he.push(E=[]);for(var Se=this[me],Ve=-1,Ke=Se.length;++Ve<Ke;)(B=Se[Ve])&&(O=le.call(B,B.__data__,Ve,me))?("__data__"in B&&(O.__data__=B.__data__),Tt(O,Ve,ae,q,B[ae][q]),E.push(O)):E.push(null)}return oa(he,ae,q)},Oa.selectAll=function(le){var E,O,B,q,ae,he=this.id,me=this.namespace,_e=[];le=ie(le);for(var Se=-1,Ve=this.length;++Se<Ve;)for(var Ke=this[Se],st=-1,At=Ke.length;++st<At;)if(B=Ke[st]){ae=B[me][he],O=le.call(B,B.__data__,st,Se),_e.push(E=[]);for(var Pt=-1,St=O.length;++Pt<St;)(q=O[Pt])&&Tt(q,Pt,me,he,ae),E.push(q)}return oa(_e,me,he)},Oa.filter=function(le){var E,O,B=[];"function"!=typeof le&&(le=Ce(le));for(var q=0,ae=this.length;q<ae;q++){B.push(E=[]);for(var he,me=0,_e=(he=this[q]).length;me<_e;me++)(O=he[me])&&le.call(O,O.__data__,me,q)&&E.push(O)}return oa(B,this.namespace,this.id)},Oa.tween=function(le,E){var O=this.id,B=this.namespace;return arguments.length<2?this.node()[B][O].tween.get(le):Fe(this,null==E?function(q){q[B][O].tween.remove(le)}:function(q){q[B][O].tween.set(le,E)})},Oa.attr=function(le,E){if(arguments.length<2){for(E in le)this.attr(E,le[E]);return this}var O="transform"==le?Bo:Va,B=d.ns.qualify(le);function q(){this.removeAttribute(B)}function ae(){this.removeAttributeNS(B.space,B.local)}function he(_e){return null==_e?q:(_e+="",function(){var Se,Ve=this.getAttribute(B);return Ve!==_e&&(Se=O(Ve,_e),function(Ke){this.setAttribute(B,Se(Ke))})})}function me(_e){return null==_e?ae:(_e+="",function(){var Se,Ve=this.getAttributeNS(B.space,B.local);return Ve!==_e&&(Se=O(Ve,_e),function(Ke){this.setAttributeNS(B.space,B.local,Se(Ke))})})}return Es(this,"attr."+le,E,B.local?me:he)},Oa.attrTween=function(le,E){var O=d.ns.qualify(le);return this.tween("attr."+le,O.local?function(B,q){var ae=E.call(this,B,q,this.getAttributeNS(O.space,O.local));return ae&&function(he){this.setAttributeNS(O.space,O.local,ae(he))}}:function(B,q){var ae=E.call(this,B,q,this.getAttribute(O));return ae&&function(he){this.setAttribute(O,ae(he))}})},Oa.style=function(le,E,O){var B=arguments.length;if(B<3){if("string"!=typeof le){for(O in B<2&&(E=""),le)this.style(O,le[O],E);return this}O=""}function q(){this.style.removeProperty(le)}function ae(he){return null==he?q:(he+="",function(){var me,_e=i(this).getComputedStyle(this,null).getPropertyValue(le);return _e!==he&&(me=Va(_e,he),function(Se){this.style.setProperty(le,me(Se),O)})})}return Es(this,"style."+le,E,ae)},Oa.styleTween=function(le,E,O){function B(q,ae){var he=E.call(this,q,ae,i(this).getComputedStyle(this,null).getPropertyValue(le));return he&&function(me){this.style.setProperty(le,he(me),O)}}return arguments.length<3&&(O=""),this.tween("style."+le,B)},Oa.text=function(le){return Es(this,"text",le,ks)},Oa.remove=function(){var le=this.namespace;return this.each("end.transition",function(){var E;this[le].count<2&&(E=this.parentNode)&&E.removeChild(this)})},Oa.ease=function(le){var E=this.id,O=this.namespace;return arguments.length<1?this.node()[O][E].ease:("function"!=typeof le&&(le=d.ease.apply(d,arguments)),Fe(this,function(B){B[O][E].ease=le}))},Oa.delay=function(le){var E=this.id,O=this.namespace;return arguments.length<1?this.node()[O][E].delay:Fe(this,"function"==typeof le?function(B,q,ae){B[O][E].delay=+le.call(B,B.__data__,q,ae)}:(le=+le,function(B){B[O][E].delay=le}))},Oa.duration=function(le){var E=this.id,O=this.namespace;return arguments.length<1?this.node()[O][E].duration:Fe(this,"function"==typeof le?function(B,q,ae){B[O][E].duration=Math.max(1,le.call(B,B.__data__,q,ae))}:(le=Math.max(1,le),function(B){B[O][E].duration=le}))},Oa.each=function(le,E){var O=this.id,B=this.namespace;if(arguments.length<2){var q=gs,ae=ms;try{ms=O,Fe(this,function(he,me,_e){gs=he[B][O],le.call(he,he.__data__,me,_e)})}finally{gs=q,ms=ae}}else Fe(this,function(he){var me=he[B][O];(me.event||(me.event=d.dispatch("start","end","interrupt"))).on(le,E)});return this},Oa.transition=function(){for(var le,E,O,B=this.id,q=++vs,ae=this.namespace,he=[],me=0,_e=this.length;me<_e;me++){he.push(le=[]);for(var Se,Ve=0,Ke=(Se=this[me]).length;Ve<Ke;Ve++)(E=Se[Ve])&&Tt(E,Ve,ae,q,{time:(O=E[ae][B]).time,ease:O.ease,delay:O.delay+O.duration,duration:O.duration}),le.push(E)}return oa(he,ae,q)},d.svg.axis=function(){var le,E=d.scale.linear(),O=ne,B=6,q=6,ae=3,he=[10],me=null;function _e(Se){Se.each(function(){var Ve,Ke=d.select(this),st=this.__chart__||E,At=this.__chart__=E.copy(),Pt=null==me?At.ticks?At.ticks.apply(At,he):At.domain():me,St=null==le?At.tickFormat?At.tickFormat.apply(At,he):C:le,Lt=Ke.selectAll(".tick").data(Pt,At),kt=Lt.enter().insert("g",".domain").attr("class","tick").style("opacity",Et),Ht=d.transition(Lt.exit()).style("opacity",Et).remove(),jt=d.transition(Lt.order()).style("opacity",1),Yt=Math.max(B,0)+ae,lr=dn(At),vr=Ke.selectAll(".domain").data([0]),Or=(vr.enter().append("path").attr("class","domain"),d.transition(vr));kt.append("line"),kt.append("text");var Dr,sn,on,kn,gn=kt.select("line"),Xn=jt.select("line"),ti=Lt.select("text").text(St),gi=kt.select("text"),Jr=jt.select("text"),Pn="top"===O||"left"===O?-1:1;if("bottom"===O||"top"===O?(Ve=Ze,Dr="x",on="y",sn="x2",kn="y2",ti.attr("dy",Pn<0?"0em":".71em").style("text-anchor","middle"),Or.attr("d","M"+lr[0]+","+Pn*q+"V0H"+lr[1]+"V"+Pn*q)):(Ve=bt,Dr="y",on="x",sn="y2",kn="x2",ti.attr("dy",".32em").style("text-anchor",Pn<0?"end":"start"),Or.attr("d","M"+Pn*q+","+lr[0]+"H0V"+lr[1]+"H"+Pn*q)),gn.attr(kn,Pn*B),gi.attr(on,Pn*Yt),Xn.attr(sn,0).attr(kn,Pn*B),Jr.attr(Dr,0).attr(on,Pn*Yt),At.rangeBand){var ri=At,$n=ri.rangeBand()/2;st=At=function(ui){return ri(ui)+$n}}else st.rangeBand?st=At:Ht.call(Ve,At,st);kt.call(Ve,st,At),jt.call(Ve,At,At)})}return _e.scale=function(Se){return arguments.length?(E=Se,_e):E},_e.orient=function(Se){return arguments.length?(O=Se in ye?Se+"":ne,_e):O},_e.ticks=function(){return arguments.length?(he=_(arguments),_e):he},_e.tickValues=function(Se){return arguments.length?(me=Se,_e):me},_e.tickFormat=function(Se){return arguments.length?(le=Se,_e):le},_e.tickSize=function(Se){var Ve=arguments.length;return Ve?(B=+Se,q=+arguments[Ve-1],_e):B},_e.innerTickSize=function(Se){return arguments.length?(B=+Se,_e):B},_e.outerTickSize=function(Se){return arguments.length?(q=+Se,_e):q},_e.tickPadding=function(Se){return arguments.length?(ae=+Se,_e):ae},_e.tickSubdivide=function(){return arguments.length&&_e},_e};var ne="bottom",ye={top:1,right:1,bottom:1,left:1};function Ze(le,E,O){le.attr("transform",function(B){var q=E(B);return"translate("+(isFinite(q)?q:O(B))+",0)"})}function bt(le,E,O){le.attr("transform",function(B){var q=E(B);return"translate(0,"+(isFinite(q)?q:O(B))+")"})}d.svg.brush=function(){var le,E,O=te(Ve,"brushstart","brush","brushend"),B=null,q=null,ae=[0,0],he=[0,0],me=!0,_e=!0,Se=Ur[0];function Ve(St){St.each(function(){var Lt=d.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Pt).on("touchstart.brush",Pt),kt=Lt.selectAll(".background").data([0]);kt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Lt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Ht=Lt.selectAll(".resize").data(Se,C);Ht.exit().remove(),Ht.enter().append("g").attr("class",function(vr){return"resize "+vr}).style("cursor",function(vr){return yr[vr]}).append("rect").attr("x",function(vr){return/[ew]$/.test(vr)?-3:null}).attr("y",function(vr){return/^[ns]/.test(vr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Ht.style("display",Ve.empty()?"none":null);var jt,Yt=d.transition(Lt),lr=d.transition(kt);B&&(jt=dn(B),lr.attr("x",jt[0]).attr("width",jt[1]-jt[0]),st(Yt)),q&&(jt=dn(q),lr.attr("y",jt[0]).attr("height",jt[1]-jt[0]),At(Yt)),Ke(Yt)})}function Ke(St){St.selectAll(".resize").attr("transform",function(Lt){return"translate("+ae[+/e$/.test(Lt)]+","+he[+/^s/.test(Lt)]+")"})}function st(St){St.select(".extent").attr("x",ae[0]),St.selectAll(".extent,.n>rect,.s>rect").attr("width",ae[1]-ae[0])}function At(St){St.select(".extent").attr("y",he[0]),St.selectAll(".extent,.e>rect,.w>rect").attr("height",he[1]-he[0])}function Pt(){var St,Lt,kt=this,Ht=d.select(d.event.target),jt=O.of(kt,arguments),Yt=d.select(kt),lr=Ht.datum(),vr=!/^(n|s)$/.test(lr)&&B,Or=!/^(e|w)$/.test(lr)&&q,Dr=Ht.classed("extent"),sn=Ft(kt),on=d.mouse(kt),kn=d.select(i(kt)).on("keydown.brush",ti).on("keyup.brush",gi);if(d.event.changedTouches?kn.on("touchmove.brush",Jr).on("touchend.brush",ri):kn.on("mousemove.brush",Jr).on("mouseup.brush",ri),Yt.interrupt().selectAll("*").interrupt(),Dr)on[0]=ae[0]-on[0],on[1]=he[0]-on[1];else if(lr){var gn=+/w$/.test(lr),Xn=+/^n/.test(lr);Lt=[ae[1-gn]-on[0],he[1-Xn]-on[1]],on[0]=ae[gn],on[1]=he[Xn]}else d.event.altKey&&(St=on.slice());function ti(){32==d.event.keyCode&&(Dr||(St=null,on[0]-=ae[1],on[1]-=he[1],Dr=2),Y())}function gi(){32==d.event.keyCode&&2==Dr&&(on[0]+=ae[1],on[1]+=he[1],Dr=0,Y())}function Jr(){var $n=d.mouse(kt),ui=!1;Lt&&($n[0]+=Lt[0],$n[1]+=Lt[1]),Dr||(d.event.altKey?(St||(St=[(ae[0]+ae[1])/2,(he[0]+he[1])/2]),on[0]=ae[+($n[0]<St[0])],on[1]=he[+($n[1]<St[1])]):St=null),vr&&Pn($n,B,0)&&(st(Yt),ui=!0),Or&&Pn($n,q,1)&&(At(Yt),ui=!0),ui&&(Ke(Yt),jt({type:"brush",mode:Dr?"move":"resize"}))}function Pn($n,ui,_i){var Ii,ai,Si=dn(ui),Mi=Si[0],Fi=Si[1],Ci=on[_i],Bi=_i?he:ae,Wi=Bi[1]-Bi[0];if(Dr&&(Mi-=Ci,Fi-=Wi+Ci),Ii=(_i?_e:me)?Math.max(Mi,Math.min(Fi,$n[_i])):$n[_i],Dr?ai=(Ii+=Ci)+Wi:(St&&(Ci=Math.max(Mi,Math.min(Fi,2*St[_i]-Ii))),Ci<Ii?(ai=Ii,Ii=Ci):ai=Ci),Bi[0]!=Ii||Bi[1]!=ai)return _i?E=null:le=null,Bi[0]=Ii,Bi[1]=ai,!0}function ri(){Jr(),Yt.style("pointer-events","all").selectAll(".resize").style("display",Ve.empty()?"none":null),d.select("body").style("cursor",null),kn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),sn(),jt({type:"brushend"})}Yt.style("pointer-events","none").selectAll(".resize").style("display",null),d.select("body").style("cursor",Ht.style("cursor")),jt({type:"brushstart"}),Jr()}return Ve.event=function(St){St.each(function(){var Lt=O.of(this,arguments),kt={x:ae,y:he,i:le,j:E},Ht=this.__chart__||kt;this.__chart__=kt,ms?d.select(this).transition().each("start.brush",function(){le=Ht.i,E=Ht.j,ae=Ht.x,he=Ht.y,Lt({type:"brushstart"})}).tween("brush:brush",function(){var jt=ga(ae,kt.x),Yt=ga(he,kt.y);return le=E=null,function(lr){ae=kt.x=jt(lr),he=kt.y=Yt(lr),Lt({type:"brush",mode:"resize"})}}).each("end.brush",function(){le=kt.i,E=kt.j,Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"})}):(Lt({type:"brushstart"}),Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"}))})},Ve.x=function(St){return arguments.length?(Se=Ur[!(B=St)<<1|!q],Ve):B},Ve.y=function(St){return arguments.length?(Se=Ur[!B<<1|!(q=St)],Ve):q},Ve.clamp=function(St){return arguments.length?(B&&q?(me=!!St[0],_e=!!St[1]):B?me=!!St:q&&(_e=!!St),Ve):B&&q?[me,_e]:B?me:q?_e:null},Ve.extent=function(St){var Lt,kt,Ht,jt,Yt;return arguments.length?(B&&(Lt=St[0],kt=St[1],q&&(Lt=Lt[0],kt=kt[0]),le=[Lt,kt],B.invert&&(Lt=B(Lt),kt=B(kt)),kt<Lt&&(Yt=Lt,Lt=kt,kt=Yt),Lt==ae[0]&&kt==ae[1]||(ae=[Lt,kt])),q&&(Ht=St[0],jt=St[1],B&&(Ht=Ht[1],jt=jt[1]),E=[Ht,jt],q.invert&&(Ht=q(Ht),jt=q(jt)),jt<Ht&&(Yt=Ht,Ht=jt,jt=Yt),Ht==he[0]&&jt==he[1]||(he=[Ht,jt])),Ve):(B&&(le?(Lt=le[0],kt=le[1]):(Lt=ae[0],kt=ae[1],B.invert&&(Lt=B.invert(Lt),kt=B.invert(kt)),kt<Lt&&(Yt=Lt,Lt=kt,kt=Yt))),q&&(E?(Ht=E[0],jt=E[1]):(Ht=he[0],jt=he[1],q.invert&&(Ht=q.invert(Ht),jt=q.invert(jt)),jt<Ht&&(Yt=Ht,Ht=jt,jt=Yt))),B&&q?[[Lt,Ht],[kt,jt]]:B?[Lt,kt]:q&&[Ht,jt])},Ve.clear=function(){return Ve.empty()||(ae=[0,0],he=[0,0],le=E=null),Ve},Ve.empty=function(){return!!B&&ae[0]==ae[1]||!!q&&he[0]==he[1]},d.rebind(Ve,O,"on")};var yr={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ur=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function _n(le){return JSON.parse(le.responseText)}function jn(le){var E=t.createRange();return E.selectNode(t.body),E.createContextualFragment(le.responseText)}d.text=Hr(function(le){return le.responseText}),d.json=function(le,E){return an(le,"application/json",_n,E)},d.html=function(le,E){return an(le,"text/html",jn,E)},d.xml=Hr(function(le){return le.responseXML}),"object"==typeof $&&$.exports?$.exports=d:this.d3=d}).apply(self)},{}],59:[function(y,$,ee){"use strict";$.exports=y("./quad")},{"./quad":60}],60:[function(y,$,ee){"use strict";var d=y("binary-search-bounds"),g=y("clamp"),_=y("parse-rect"),t=y("array-bounds"),e=y("pick-by-alias"),i=y("defined"),r=y("flatten-vertex-data"),o=y("is-obj"),n=y("dtype"),p=y("math-log2");function s(a,c){for(var u=c[0],h=c[1],v=1/(c[2]-u),f=1/(c[3]-h),l=new Array(a.length),x=0,m=a.length/2;x<m;x++)l[2*x]=g((a[2*x]-u)*v,0,1),l[2*x+1]=g((a[2*x+1]-h)*f,0,1);return l}$.exports=function(a,c){c||(c={}),a=r(a,"float64"),c=e(c,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=i(c.maxDepth,255),h=i(c.bounds,t(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var v,f=s(a,h),l=a.length>>>1;c.dtype||(c.dtype="array"),"string"==typeof c.dtype?v=new(n(c.dtype))(l):c.dtype&&(v=c.dtype,Array.isArray(v)&&(v.length=l));for(var x=0;x<l;++x)v[x]=x;var m=[],w=[],b=[],k=[];!function F(H,U,X,Z,Y,W){if(!Z.length)return null;var te=m[Y]||(m[Y]=[]),z=b[Y]||(b[Y]=[]),N=w[Y]||(w[Y]=[]),V=te.length;if(++Y>u||W>1073741824){for(var Q=0;Q<Z.length;Q++)te.push(Z[Q]),z.push(W),N.push(null,null,null,null);return V}if(te.push(Z[0]),z.push(W),Z.length<=1)return N.push(null,null,null,null),V;for(var j=.5*X,J=H+j,K=U+j,re=[],ie=[],ce=[],se=[],de=1,ue=Z.length;de<ue;de++){var ge=Z[de],Te=f[2*ge+1];f[2*ge]<J?Te<K?re.push(ge):ie.push(ge):Te<K?ce.push(ge):se.push(ge)}return N.push(F(H,U,j,re,Y,W<<=2),F(H,K,j,ie,Y,W+1),F(J,U,j,ce,Y,W+2),F(J,K,j,se,Y,W+3)),V}(0,0,1,v,0,1);for(var T=0,L=0;L<m.length;L++){var A=m[L];if(v.set)v.set(A,T);else for(var I=0,D=A.length;I<D;I++)v[I+T]=A[I];var S=T+m[L].length;k[L]=[T,S],T=S}return v.range=function(){for(var F,H=[],U=arguments.length;U--;)H[U]=arguments[U];if(o(H[H.length-1])){var X=H.pop();H.length||null==X.x&&null==X.l&&null==X.left||(H=[X],F={}),F=e(X,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else F={};H.length||(H=h);var ie,Z=_.apply(void 0,H),Y=[Math.min(Z.x,Z.x+Z.width),Math.min(Z.y,Z.y+Z.height),Math.max(Z.x,Z.x+Z.width),Math.max(Z.y,Z.y+Z.height)],W=Y[0],te=Y[1],z=Y[2],N=Y[3],V=s([W,te,z,N],h),Q=V[0],j=V[1],J=V[2],K=V[3],re=i(F.level,m.length);if(null!=F.d&&("number"==typeof F.d?ie=[F.d,F.d]:F.d.length&&(ie=F.d),re=Math.min(Math.max(Math.ceil(-p(Math.abs(ie[0])/(h[2]-h[0]))),Math.ceil(-p(Math.abs(ie[1])/(h[3]-h[1])))),re)),re=Math.min(re,m.length),F.lod)return C(Q,j,J,K,re);var ce=[];function se(ue,ge,be,Te,we,Le){if(null!==we&&null!==Le&&!(Q>ue+be||j>ge+be||J<ue||K<ge||Te>=re||we===Le)){var fe=m[Te];void 0===Le&&(Le=fe.length);for(var ve=we;ve<Le;ve++){var Me=fe[ve],ke=a[2*Me],Ce=a[2*Me+1];ke>=W&&ke<=z&&Ce>=te&&Ce<=N&&ce.push(Me)}var Pe=w[Te],Fe=Pe[4*we+0],qe=Pe[4*we+1],rt=Pe[4*we+2],ze=Pe[4*we+3],He=de(Pe,we+1),Xe=.5*be,Je=Te+1;se(ue,ge,Xe,Je,Fe,qe||rt||ze||He),se(ue,ge+Xe,Xe,Je,qe,rt||ze||He),se(ue+Xe,ge,Xe,Je,rt,ze||He),se(ue+Xe,ge+Xe,Xe,Je,ze,He)}}function de(ue,ge){for(var be=null,Te=0;null===be;)if(be=ue[4*ge+Te],++Te>ue.length)return null;return be}return se(0,0,1,0,0,1),ce},v;function C(F,H,U,X,Z){for(var Y=[],W=0;W<Z;W++){var te=b[W],z=k[W][0],N=R(F,H,W),V=R(U,X,W),Q=d.ge(te,N),j=d.gt(te,V,Q,te.length-1);Y[W]=[Q+z,j+z]}return Y}function R(F,H,U){for(var X=1,Z=.5,Y=.5,W=.5,te=0;te<U;te++)X<<=2,X+=F<Z?H<Y?0:1:H<Y?2:3,W*=.5,Z+=F<Z?-W:W,Y+=H<Y?-W:W;return X}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var d=y("@turf/meta");function g(e){var i=0;if(e&&e.length>0){i+=Math.abs(_(e[0]));for(var r=1;r<e.length;r++)i-=Math.abs(_(e[r]))}return i}function _(e){var i,r,o,n,p,s,a=0,c=e.length;if(c>2){for(s=0;s<c;s++)s===c-2?(o=c-2,n=c-1,p=0):s===c-1?(o=c-1,n=0,p=1):(o=s,n=s+1,p=s+2),i=e[o],r=e[n],a+=(t(e[p][0])-t(i[0]))*Math.sin(t(r[1]));a=6378137*a*6378137/2}return a}function t(e){return e*Math.PI/180}ee.default=function(e){return d.geomReduce(e,function(i,r){return i+function(o){var n,p=0;switch(o.type){case"Polygon":return g(o.coordinates);case"MultiPolygon":for(n=0;n<o.coordinates.length;n++)p+=g(o.coordinates[n]);return p;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(r)},0)}},{"@turf/meta":63}],62:[function(y,$,ee){"use strict";function d(c,u,h){void 0===h&&(h={});var v={type:"Feature"};return(0===h.id||h.id)&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.properties=u||{},v.geometry=c,v}function g(c,u,h){if(void 0===h&&(h={}),!c)throw new Error("coordinates is required");if(!Array.isArray(c))throw new Error("coordinates must be an Array");if(c.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!a(c[0])||!a(c[1]))throw new Error("coordinates must contain numbers");return d({type:"Point",coordinates:c},u,h)}function _(c,u,h){void 0===h&&(h={});for(var v=0,f=c;v<f.length;v++){var l=f[v];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<l[l.length-1].length;x++)if(l[l.length-1][x]!==l[0][x])throw new Error("First and last Position are not equivalent.")}return d({type:"Polygon",coordinates:c},u,h)}function t(c,u,h){if(void 0===h&&(h={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return d({type:"LineString",coordinates:c},u,h)}function e(c,u){void 0===u&&(u={});var h={type:"FeatureCollection"};return u.id&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.features=c,h}function i(c,u,h){return void 0===h&&(h={}),d({type:"MultiLineString",coordinates:c},u,h)}function r(c,u,h){return void 0===h&&(h={}),d({type:"MultiPoint",coordinates:c},u,h)}function o(c,u,h){return void 0===h&&(h={}),d({type:"MultiPolygon",coordinates:c},u,h)}function n(c,u){void 0===u&&(u="kilometers");var h=ee.factors[u];if(!h)throw new Error(u+" units is invalid");return c*h}function p(c,u){void 0===u&&(u="kilometers");var h=ee.factors[u];if(!h)throw new Error(u+" units is invalid");return c/h}function s(c){return c%(2*Math.PI)*180/Math.PI}function a(c){return!isNaN(c)&&null!==c&&!Array.isArray(c)}Object.defineProperty(ee,"__esModule",{value:!0}),ee.earthRadius=6371008.8,ee.factors={centimeters:100*ee.earthRadius,centimetres:100*ee.earthRadius,degrees:ee.earthRadius/111325,feet:3.28084*ee.earthRadius,inches:39.37*ee.earthRadius,kilometers:ee.earthRadius/1e3,kilometres:ee.earthRadius/1e3,meters:ee.earthRadius,metres:ee.earthRadius,miles:ee.earthRadius/1609.344,millimeters:1e3*ee.earthRadius,millimetres:1e3*ee.earthRadius,nauticalmiles:ee.earthRadius/1852,radians:1,yards:1.0936*ee.earthRadius},ee.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ee.earthRadius,yards:1.0936133},ee.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ee.feature=d,ee.geometry=function(c,u,h){switch(void 0===h&&(h={}),c){case"Point":return g(u).geometry;case"LineString":return t(u).geometry;case"Polygon":return _(u).geometry;case"MultiPoint":return r(u).geometry;case"MultiLineString":return i(u).geometry;case"MultiPolygon":return o(u).geometry;default:throw new Error(c+" is invalid")}},ee.point=g,ee.points=function(c,u,h){return void 0===h&&(h={}),e(c.map(function(v){return g(v,u)}),h)},ee.polygon=_,ee.polygons=function(c,u,h){return void 0===h&&(h={}),e(c.map(function(v){return _(v,u)}),h)},ee.lineString=t,ee.lineStrings=function(c,u,h){return void 0===h&&(h={}),e(c.map(function(v){return t(v,u)}),h)},ee.featureCollection=e,ee.multiLineString=i,ee.multiPoint=r,ee.multiPolygon=o,ee.geometryCollection=function(c,u,h){return void 0===h&&(h={}),d({type:"GeometryCollection",geometries:c},u,h)},ee.round=function(c,u){if(void 0===u&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var h=Math.pow(10,u||0);return Math.round(c*h)/h},ee.radiansToLength=n,ee.lengthToRadians=p,ee.lengthToDegrees=function(c,u){return s(p(c,u))},ee.bearingToAzimuth=function(c){var u=c%360;return u<0&&(u+=360),u},ee.radiansToDegrees=s,ee.degreesToRadians=function(c){return c%360*Math.PI/180},ee.convertLength=function(c,u,h){if(void 0===u&&(u="kilometers"),void 0===h&&(h="kilometers"),!(c>=0))throw new Error("length must be a positive number");return n(p(c,u),h)},ee.convertArea=function(c,u,h){if(void 0===u&&(u="meters"),void 0===h&&(h="kilometers"),!(c>=0))throw new Error("area must be a positive number");var v=ee.areaFactors[u];if(!v)throw new Error("invalid original units");var f=ee.areaFactors[h];if(!f)throw new Error("invalid final units");return c/v*f},ee.isNumber=a,ee.isObject=function(c){return!!c&&c.constructor===Object},ee.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(4!==c.length&&6!==c.length)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(u){if(!a(u))throw new Error("bbox must only contain numbers")})},ee.validateId=function(c){if(!c)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof c))throw new Error("id must be a number or a string")}},{}],63:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var d=y("@turf/helpers");function g(n,p,s){if(null!==n)for(var a,c,u,h,v,f,l,x,m=0,w=0,b=n.type,k="FeatureCollection"===b,T="Feature"===b,L=k?n.features.length:1,A=0;A<L;A++){v=(x=!!(l=k?n.features[A].geometry:T?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var I=0;I<v;I++){var D=0,S=0;if(null!==(h=x?l.geometries[I]:l)){f=h.coordinates;var C=h.type;switch(m=!s||"Polygon"!==C&&"MultiPolygon"!==C?0:1,C){case null:break;case"Point":if(!1===p(f,w,A,D,S))return!1;w++,D++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===p(f[a],w,A,D,S))return!1;w++,"MultiPoint"===C&&D++}"LineString"===C&&D++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(c=0;c<f[a].length-m;c++){if(!1===p(f[a][c],w,A,D,S))return!1;w++}"MultiLineString"===C&&D++,"Polygon"===C&&S++}"Polygon"===C&&D++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(S=0,c=0;c<f[a].length;c++){for(u=0;u<f[a][c].length-m;u++){if(!1===p(f[a][c][u],w,A,D,S))return!1;w++}S++}D++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===g(h.geometries[a],p,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function _(n,p){var s;switch(n.type){case"FeatureCollection":for(s=0;s<n.features.length&&!1!==p(n.features[s].properties,s);s++);break;case"Feature":p(n.properties,0)}}function t(n,p){if("Feature"===n.type)p(n,0);else if("FeatureCollection"===n.type)for(var s=0;s<n.features.length&&!1!==p(n.features[s],s);s++);}function e(n,p){var s,a,c,u,h,v,f,l,x,m,w=0,b="FeatureCollection"===n.type,k="Feature"===n.type,T=b?n.features.length:1;for(s=0;s<T;s++){for(l=b?n.features[s].properties:k?n.properties:{},x=b?n.features[s].bbox:k?n.bbox:void 0,m=b?n.features[s].id:k?n.id:void 0,h=(f=!!(v=b?n.features[s].geometry:k?n.geometry:n)&&"GeometryCollection"===v.type)?v.geometries.length:1,c=0;c<h;c++)if(null!==(u=f?v.geometries[c]:v))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===p(u,w,l,x,m))return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===p(u.geometries[a],w,l,x,m))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===p(null,w,l,x,m))return!1;w++}}function i(n,p){e(n,function(s,a,c,u,h){var v,f=null===s?null:s.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return!1!==p(d.feature(s,c,{bbox:u,id:h}),a,0)&&void 0}switch(f){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon"}for(var l=0;l<s.coordinates.length;l++)if(!1===p(d.feature({type:v,coordinates:s.coordinates[l]},c),a,l))return!1})}function r(n,p){i(n,function(s,a,c){var u=0;if(s.geometry){var h=s.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var v,f=0,l=0,x=0;return!1!==g(s,function(m,w,b,k,T){if(void 0===v||a>f||k>l||T>x)return v=m,f=a,l=k,x=T,void(u=0);var L=d.lineString([v,m],s.properties);if(!1===p(L,a,c,T,u))return!1;u++,v=m})&&void 0}}})}function o(n,p){if(!n)throw new Error("geojson is required");i(n,function(s,a,c){if(null!==s.geometry){var h=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===p(s,a,c,0,0))return!1;break;case"Polygon":for(var v=0;v<h.length;v++)if(!1===p(d.lineString(h[v],s.properties),a,c,v))return!1}}})}ee.coordEach=g,ee.coordReduce=function(n,p,s,a){var c=s;return g(n,function(u,h,v,f,l){c=0===h&&void 0===s?u:p(c,u,h,v,f,l)},a),c},ee.propEach=_,ee.propReduce=function(n,p,s){var a=s;return _(n,function(c,u){a=0===u&&void 0===s?c:p(a,c,u)}),a},ee.featureEach=t,ee.featureReduce=function(n,p,s){var a=s;return t(n,function(c,u){a=0===u&&void 0===s?c:p(a,c,u)}),a},ee.coordAll=function(n){var p=[];return g(n,function(s){p.push(s)}),p},ee.geomEach=e,ee.geomReduce=function(n,p,s){var a=s;return e(n,function(c,u,h,v,f){a=0===u&&void 0===s?c:p(a,c,u,h,v,f)}),a},ee.flattenEach=i,ee.flattenReduce=function(n,p,s){var a=s;return i(n,function(c,u,h){a=0===u&&0===h&&void 0===s?c:p(a,c,u,h)}),a},ee.segmentEach=r,ee.segmentReduce=function(n,p,s){var a=s,c=!1;return r(n,function(u,h,v,f,l){a=!1===c&&void 0===s?u:p(a,u,h,v,f,l),c=!0}),a},ee.lineEach=o,ee.lineReduce=function(n,p,s){var a=s;return o(n,function(c,u,h,v){a=0===u&&void 0===s?c:p(a,c,u,h,v)}),a},ee.findSegment=function(n,p){if(!d.isObject(p=p||{}))throw new Error("options is invalid");var s,a=p.featureIndex||0,c=p.multiFeatureIndex||0,u=p.geometryIndex||0,h=p.segmentIndex||0,v=p.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var f=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=f.length+h-1),d.lineString([f[h],f[h+1]],v,p);case"Polygon":return u<0&&(u=f.length+u),h<0&&(h=f[u].length+h-1),d.lineString([f[u][h],f[u][h+1]],v,p);case"MultiLineString":return c<0&&(c=f.length+c),h<0&&(h=f[c].length+h-1),d.lineString([f[c][h],f[c][h+1]],v,p);case"MultiPolygon":return c<0&&(c=f.length+c),u<0&&(u=f[c].length+u),h<0&&(h=f[c][u].length-h-1),d.lineString([f[c][u][h],f[c][u][h+1]],v,p)}throw new Error("geojson is invalid")},ee.findPoint=function(n,p){if(!d.isObject(p=p||{}))throw new Error("options is invalid");var s,a=p.featureIndex||0,c=p.multiFeatureIndex||0,u=p.geometryIndex||0,h=p.coordIndex||0,v=p.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var f=s.coordinates;switch(s.type){case"Point":return d.point(f,v,p);case"MultiPoint":return c<0&&(c=f.length+c),d.point(f[c],v,p);case"LineString":return h<0&&(h=f.length+h),d.point(f[h],v,p);case"Polygon":return u<0&&(u=f.length+u),h<0&&(h=f[u].length+h),d.point(f[u][h],v,p);case"MultiLineString":return c<0&&(c=f.length+c),h<0&&(h=f[c].length+h),d.point(f[c][h],v,p);case"MultiPolygon":return c<0&&(c=f.length+c),u<0&&(u=f[c].length+u),h<0&&(h=f[c][u].length-h),d.point(f[c][u][h],v,p)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var d=y("@turf/meta");function g(_){var t=[1/0,1/0,-1/0,-1/0];return d.coordEach(_,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}g.default=g,ee.default=g},{"@turf/meta":66}],65:[function(y,$,ee){arguments[4][62][0].apply(ee,arguments)},{dup:62}],66:[function(y,$,ee){arguments[4][63][0].apply(ee,arguments)},{"@turf/helpers":65,dup:63}],67:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var d=y("@turf/meta"),g=y("@turf/helpers");ee.default=function(_,t){void 0===t&&(t={});var e=0,i=0,r=0;return d.coordEach(_,function(o){e+=o[0],i+=o[1],r++}),g.point([e/r,i/r],t.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(y,$,ee){"use strict";function d(c,u,h){void 0===h&&(h={});var v={type:"Feature"};return(0===h.id||h.id)&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.properties=u||{},v.geometry=c,v}function g(c,u,h){return void 0===h&&(h={}),d({type:"Point",coordinates:c},u,h)}function _(c,u,h){void 0===h&&(h={});for(var v=0,f=c;v<f.length;v++){var l=f[v];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<l[l.length-1].length;x++)if(l[l.length-1][x]!==l[0][x])throw new Error("First and last Position are not equivalent.")}return d({type:"Polygon",coordinates:c},u,h)}function t(c,u,h){if(void 0===h&&(h={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return d({type:"LineString",coordinates:c},u,h)}function e(c,u){void 0===u&&(u={});var h={type:"FeatureCollection"};return u.id&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.features=c,h}function i(c,u,h){return void 0===h&&(h={}),d({type:"MultiLineString",coordinates:c},u,h)}function r(c,u,h){return void 0===h&&(h={}),d({type:"MultiPoint",coordinates:c},u,h)}function o(c,u,h){return void 0===h&&(h={}),d({type:"MultiPolygon",coordinates:c},u,h)}function n(c,u){void 0===u&&(u="kilometers");var h=ee.factors[u];if(!h)throw new Error(u+" units is invalid");return c*h}function p(c,u){void 0===u&&(u="kilometers");var h=ee.factors[u];if(!h)throw new Error(u+" units is invalid");return c/h}function s(c){return c%(2*Math.PI)*180/Math.PI}function a(c){return!isNaN(c)&&null!==c&&!Array.isArray(c)&&!/^\s*$/.test(c)}Object.defineProperty(ee,"__esModule",{value:!0}),ee.earthRadius=6371008.8,ee.factors={centimeters:100*ee.earthRadius,centimetres:100*ee.earthRadius,degrees:ee.earthRadius/111325,feet:3.28084*ee.earthRadius,inches:39.37*ee.earthRadius,kilometers:ee.earthRadius/1e3,kilometres:ee.earthRadius/1e3,meters:ee.earthRadius,metres:ee.earthRadius,miles:ee.earthRadius/1609.344,millimeters:1e3*ee.earthRadius,millimetres:1e3*ee.earthRadius,nauticalmiles:ee.earthRadius/1852,radians:1,yards:ee.earthRadius/1.0936},ee.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ee.earthRadius,yards:1/1.0936},ee.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ee.feature=d,ee.geometry=function(c,u,h){switch(void 0===h&&(h={}),c){case"Point":return g(u).geometry;case"LineString":return t(u).geometry;case"Polygon":return _(u).geometry;case"MultiPoint":return r(u).geometry;case"MultiLineString":return i(u).geometry;case"MultiPolygon":return o(u).geometry;default:throw new Error(c+" is invalid")}},ee.point=g,ee.points=function(c,u,h){return void 0===h&&(h={}),e(c.map(function(v){return g(v,u)}),h)},ee.polygon=_,ee.polygons=function(c,u,h){return void 0===h&&(h={}),e(c.map(function(v){return _(v,u)}),h)},ee.lineString=t,ee.lineStrings=function(c,u,h){return void 0===h&&(h={}),e(c.map(function(v){return t(v,u)}),h)},ee.featureCollection=e,ee.multiLineString=i,ee.multiPoint=r,ee.multiPolygon=o,ee.geometryCollection=function(c,u,h){return void 0===h&&(h={}),d({type:"GeometryCollection",geometries:c},u,h)},ee.round=function(c,u){if(void 0===u&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var h=Math.pow(10,u||0);return Math.round(c*h)/h},ee.radiansToLength=n,ee.lengthToRadians=p,ee.lengthToDegrees=function(c,u){return s(p(c,u))},ee.bearingToAzimuth=function(c){var u=c%360;return u<0&&(u+=360),u},ee.radiansToDegrees=s,ee.degreesToRadians=function(c){return c%360*Math.PI/180},ee.convertLength=function(c,u,h){if(void 0===u&&(u="kilometers"),void 0===h&&(h="kilometers"),!(c>=0))throw new Error("length must be a positive number");return n(p(c,u),h)},ee.convertArea=function(c,u,h){if(void 0===u&&(u="meters"),void 0===h&&(h="kilometers"),!(c>=0))throw new Error("area must be a positive number");var v=ee.areaFactors[u];if(!v)throw new Error("invalid original units");var f=ee.areaFactors[h];if(!f)throw new Error("invalid final units");return c/v*f},ee.isNumber=a,ee.isObject=function(c){return!!c&&c.constructor===Object},ee.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(4!==c.length&&6!==c.length)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(u){if(!a(u))throw new Error("bbox must only contain numbers")})},ee.validateId=function(c){if(!c)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof c))throw new Error("id must be a number or a string")},ee.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},ee.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},ee.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},ee.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},ee.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},ee.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},ee.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var d=y("@turf/helpers");function g(n,p,s){if(null!==n)for(var a,c,u,h,v,f,l,x,m=0,w=0,b=n.type,k="FeatureCollection"===b,T="Feature"===b,L=k?n.features.length:1,A=0;A<L;A++){v=(x=!!(l=k?n.features[A].geometry:T?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var I=0;I<v;I++){var D=0,S=0;if(null!==(h=x?l.geometries[I]:l)){f=h.coordinates;var C=h.type;switch(m=!s||"Polygon"!==C&&"MultiPolygon"!==C?0:1,C){case null:break;case"Point":if(!1===p(f,w,A,D,S))return!1;w++,D++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===p(f[a],w,A,D,S))return!1;w++,"MultiPoint"===C&&D++}"LineString"===C&&D++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(c=0;c<f[a].length-m;c++){if(!1===p(f[a][c],w,A,D,S))return!1;w++}"MultiLineString"===C&&D++,"Polygon"===C&&S++}"Polygon"===C&&D++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(S=0,c=0;c<f[a].length;c++){for(u=0;u<f[a][c].length-m;u++){if(!1===p(f[a][c][u],w,A,D,S))return!1;w++}S++}D++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===g(h.geometries[a],p,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function _(n,p){var s;switch(n.type){case"FeatureCollection":for(s=0;s<n.features.length&&!1!==p(n.features[s].properties,s);s++);break;case"Feature":p(n.properties,0)}}function t(n,p){if("Feature"===n.type)p(n,0);else if("FeatureCollection"===n.type)for(var s=0;s<n.features.length&&!1!==p(n.features[s],s);s++);}function e(n,p){var s,a,c,u,h,v,f,l,x,m,w=0,b="FeatureCollection"===n.type,k="Feature"===n.type,T=b?n.features.length:1;for(s=0;s<T;s++){for(l=b?n.features[s].properties:k?n.properties:{},x=b?n.features[s].bbox:k?n.bbox:void 0,m=b?n.features[s].id:k?n.id:void 0,h=(f=!!(v=b?n.features[s].geometry:k?n.geometry:n)&&"GeometryCollection"===v.type)?v.geometries.length:1,c=0;c<h;c++)if(null!==(u=f?v.geometries[c]:v))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===p(u,w,l,x,m))return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===p(u.geometries[a],w,l,x,m))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===p(null,w,l,x,m))return!1;w++}}function i(n,p){e(n,function(s,a,c,u,h){var v,f=null===s?null:s.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return!1!==p(d.feature(s,c,{bbox:u,id:h}),a,0)&&void 0}switch(f){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon"}for(var l=0;l<s.coordinates.length;l++)if(!1===p(d.feature({type:v,coordinates:s.coordinates[l]},c),a,l))return!1})}function r(n,p){i(n,function(s,a,c){var u=0;if(s.geometry){var h=s.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var v,f=0,l=0,x=0;return!1!==g(s,function(m,w,b,k,T){if(void 0===v||a>f||k>l||T>x)return v=m,f=a,l=k,x=T,void(u=0);var L=d.lineString([v,m],s.properties);if(!1===p(L,a,c,T,u))return!1;u++,v=m})&&void 0}}})}function o(n,p){if(!n)throw new Error("geojson is required");i(n,function(s,a,c){if(null!==s.geometry){var h=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===p(s,a,c,0,0))return!1;break;case"Polygon":for(var v=0;v<h.length;v++)if(!1===p(d.lineString(h[v],s.properties),a,c,v))return!1}}})}ee.coordEach=g,ee.coordReduce=function(n,p,s,a){var c=s;return g(n,function(u,h,v,f,l){c=0===h&&void 0===s?u:p(c,u,h,v,f,l)},a),c},ee.propEach=_,ee.propReduce=function(n,p,s){var a=s;return _(n,function(c,u){a=0===u&&void 0===s?c:p(a,c,u)}),a},ee.featureEach=t,ee.featureReduce=function(n,p,s){var a=s;return t(n,function(c,u){a=0===u&&void 0===s?c:p(a,c,u)}),a},ee.coordAll=function(n){var p=[];return g(n,function(s){p.push(s)}),p},ee.geomEach=e,ee.geomReduce=function(n,p,s){var a=s;return e(n,function(c,u,h,v,f){a=0===u&&void 0===s?c:p(a,c,u,h,v,f)}),a},ee.flattenEach=i,ee.flattenReduce=function(n,p,s){var a=s;return i(n,function(c,u,h){a=0===u&&0===h&&void 0===s?c:p(a,c,u,h)}),a},ee.segmentEach=r,ee.segmentReduce=function(n,p,s){var a=s,c=!1;return r(n,function(u,h,v,f,l){a=!1===c&&void 0===s?u:p(a,u,h,v,f,l),c=!0}),a},ee.lineEach=o,ee.lineReduce=function(n,p,s){var a=s;return o(n,function(c,u,h,v){a=0===u&&void 0===s?c:p(a,c,u,h,v)}),a},ee.findSegment=function(n,p){if(!d.isObject(p=p||{}))throw new Error("options is invalid");var s,a=p.featureIndex||0,c=p.multiFeatureIndex||0,u=p.geometryIndex||0,h=p.segmentIndex||0,v=p.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var f=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=f.length+h-1),d.lineString([f[h],f[h+1]],v,p);case"Polygon":return u<0&&(u=f.length+u),h<0&&(h=f[u].length+h-1),d.lineString([f[u][h],f[u][h+1]],v,p);case"MultiLineString":return c<0&&(c=f.length+c),h<0&&(h=f[c].length+h-1),d.lineString([f[c][h],f[c][h+1]],v,p);case"MultiPolygon":return c<0&&(c=f.length+c),u<0&&(u=f[c].length+u),h<0&&(h=f[c][u].length-h-1),d.lineString([f[c][u][h],f[c][u][h+1]],v,p)}throw new Error("geojson is invalid")},ee.findPoint=function(n,p){if(!d.isObject(p=p||{}))throw new Error("options is invalid");var s,a=p.featureIndex||0,c=p.multiFeatureIndex||0,u=p.geometryIndex||0,h=p.coordIndex||0,v=p.properties;switch(n.type){case"FeatureCollection":a<0&&(a=n.features.length+a),v=v||n.features[a].properties,s=n.features[a].geometry;break;case"Feature":v=v||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var f=s.coordinates;switch(s.type){case"Point":return d.point(f,v,p);case"MultiPoint":return c<0&&(c=f.length+c),d.point(f[c],v,p);case"LineString":return h<0&&(h=f.length+h),d.point(f[h],v,p);case"Polygon":return u<0&&(u=f.length+u),h<0&&(h=f[u].length+h),d.point(f[u][h],v,p);case"MultiLineString":return c<0&&(c=f.length+c),h<0&&(h=f[c].length+h),d.point(f[c][h],v,p);case"MultiPolygon":return c<0&&(c=f.length+c),u<0&&(u=f[c].length+u),h<0&&(h=f[c][u].length-h),d.point(f[c][u][h],v,p)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(y,$,ee){$.exports=function(d){var g=0,_=0,t=0,e=0;return d.map(function(i){var r=(i=i.slice())[0],o=r.toUpperCase();if(r!=o)switch(i[0]=o,r){case"a":i[6]+=t,i[7]+=e;break;case"v":i[1]+=e;break;case"h":i[1]+=t;break;default:for(var n=1;n<i.length;)i[n++]+=t,i[n++]+=e}switch(o){case"Z":t=g,e=_;break;case"H":t=i[1];break;case"V":e=i[1];break;case"M":t=g=i[1],e=_=i[2];break;default:t=i[i.length-2],e=i[i.length-1]}return i})}},{}],71:[function(y,$,ee){"use strict";$.exports=function(d,g){if(!d||null==d.length)throw Error("Argument should be an array");g=null==g?1:Math.floor(g);for(var _=Array(2*g),t=0;t<g;t++){for(var e=-1/0,i=1/0,r=t,o=d.length;r<o;r+=g)d[r]>e&&(e=d[r]),d[r]<i&&(i=d[r]);_[t]=i,_[g+t]=e}return _}},{}],72:[function(y,$,ee){"use strict";$.exports=function(d,g,_){if("function"==typeof Array.prototype.findIndex)return d.findIndex(g,_);if("function"!=typeof g)throw new TypeError("predicate must be a function");var t=Object(d),e=t.length;if(0===e)return-1;for(var i=0;i<e;i++)if(g.call(_,t[i],i,t))return i;return-1}},{}],73:[function(y,$,ee){"use strict";var d=y("array-bounds");$.exports=function(g,_,t){if(!g||null==g.length)throw Error("Argument should be an array");null==_&&(_=1),null==t&&(t=d(g,_));for(var e=0;e<_;e++){var i=t[_+e],r=t[e],o=e,n=g.length;if(i===1/0&&r===-1/0)for(o=e;o<n;o+=_)g[o]=g[o]===i?1:g[o]===r?0:.5;else if(i===1/0)for(o=e;o<n;o+=_)g[o]=g[o]===i?1:0;else if(r===-1/0)for(o=e;o<n;o+=_)g[o]=g[o]===r?0:1;else{var p=i-r;for(o=e;o<n;o+=_)isNaN(g[o])||(g[o]=0===p?.5:(g[o]-r)/p)}}return g}},{"array-bounds":71}],74:[function(y,$,ee){$.exports=function(d,g){var _="number"==typeof d,t="number"==typeof g;_&&!t?(g=d,d=0):_||t||(d=0,g=0);var e=(g|=0)-(d|=0);if(e<0)throw new Error("array length must be positive");for(var i=new Array(e),r=0,o=d;r<e;r++,o++)i[r]=o;return i}},{}],75:[function(y,$,ee){(function(d){(function(){"use strict";var g=y("object-assign");function _(k,T){if(k===T)return 0;for(var L=k.length,A=T.length,I=0,D=Math.min(L,A);I<D;++I)if(k[I]!==T[I]){L=k[I],A=T[I];break}return L<A?-1:A<L?1:0}function t(k){return d.Buffer&&"function"==typeof d.Buffer.isBuffer?d.Buffer.isBuffer(k):!(null==k||!k._isBuffer)}var e=y("util/"),i=Object.prototype.hasOwnProperty,r=Array.prototype.slice,o="foo"===function(){}.name;function n(k){return Object.prototype.toString.call(k)}function p(k){return!t(k)&&"function"==typeof d.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(k):!!k&&(k instanceof DataView||!!(k.buffer&&k.buffer instanceof ArrayBuffer)))}var s=$.exports=f,a=/\s*function\s+([^\(\s]*)\s*/;function c(k){if(e.isFunction(k)){if(o)return k.name;var T=k.toString().match(a);return T&&T[1]}}function u(k,T){return"string"==typeof k?k.length<T?k:k.slice(0,T):k}function h(k){if(o||!e.isFunction(k))return e.inspect(k);var T=c(k);return"[Function"+(T?": "+T:"")+"]"}function v(k,T,L,A,I){throw new s.AssertionError({message:L,actual:k,expected:T,operator:A,stackStartFunction:I})}function f(k,T){k||v(k,!0,T,"==",s.ok)}function l(k,T,L,A){if(k===T)return!0;if(t(k)&&t(T))return 0===_(k,T);if(e.isDate(k)&&e.isDate(T))return k.getTime()===T.getTime();if(e.isRegExp(k)&&e.isRegExp(T))return k.source===T.source&&k.global===T.global&&k.multiline===T.multiline&&k.lastIndex===T.lastIndex&&k.ignoreCase===T.ignoreCase;if(null!==k&&"object"==typeof k||null!==T&&"object"==typeof T){if(p(k)&&p(T)&&n(k)===n(T)&&!(k instanceof Float32Array||k instanceof Float64Array))return 0===_(new Uint8Array(k.buffer),new Uint8Array(T.buffer));if(t(k)!==t(T))return!1;var I=(A=A||{actual:[],expected:[]}).actual.indexOf(k);return-1!==I&&I===A.expected.indexOf(T)||(A.actual.push(k),A.expected.push(T),function(D,S,C,R){if(null==D||null==S)return!1;if(e.isPrimitive(D)||e.isPrimitive(S))return D===S;if(C&&Object.getPrototypeOf(D)!==Object.getPrototypeOf(S))return!1;var F=x(D),H=x(S);if(F&&!H||!F&&H)return!1;if(F)return l(D=r.call(D),S=r.call(S),C);var U,X,Z=b(D),Y=b(S);if(Z.length!==Y.length)return!1;for(Z.sort(),Y.sort(),X=Z.length-1;X>=0;X--)if(Z[X]!==Y[X])return!1;for(X=Z.length-1;X>=0;X--)if(!l(D[U=Z[X]],S[U],C,R))return!1;return!0}(k,T,L,A))}return L?k===T:k==T}function x(k){return"[object Arguments]"==Object.prototype.toString.call(k)}function m(k,T){if(!k||!T)return!1;if("[object RegExp]"==Object.prototype.toString.call(T))return T.test(k);try{if(k instanceof T)return!0}catch(L){}return!Error.isPrototypeOf(T)&&!0===T.call({},k)}function w(k,T,L,A){var I;if("function"!=typeof T)throw new TypeError('"block" argument must be a function');"string"==typeof L&&(A=L,L=null),I=function(C){var R;try{C()}catch(F){R=F}return R}(T),A=(L&&L.name?" ("+L.name+").":".")+(A?" "+A:"."),k&&!I&&v(I,L,"Missing expected exception"+A);var D="string"==typeof A,S=!k&&I&&!L;if((!k&&e.isError(I)&&D&&m(I,L)||S)&&v(I,L,"Got unwanted exception"+A),k&&I&&L&&!m(I,L)||!k&&I)throw I}s.AssertionError=function(k){this.name="AssertionError",this.actual=k.actual,this.expected=k.expected,this.operator=k.operator,k.message?(this.message=k.message,this.generatedMessage=!1):(this.message=u(h(this.actual),128)+" "+this.operator+" "+u(h(this.expected),128),this.generatedMessage=!0);var T=k.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var L=new Error;if(L.stack){var A=L.stack,I=c(T),D=A.indexOf("\n"+I);if(D>=0){var S=A.indexOf("\n",D+1);A=A.substring(S+1)}this.stack=A}}},e.inherits(s.AssertionError,Error),s.fail=v,s.ok=f,s.equal=function(k,T,L){k!=T&&v(k,T,L,"==",s.equal)},s.notEqual=function(k,T,L){k==T&&v(k,T,L,"!=",s.notEqual)},s.deepEqual=function(k,T,L){l(k,T,!1)||v(k,T,L,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(k,T,L){l(k,T,!0)||v(k,T,L,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(k,T,L){l(k,T,!1)&&v(k,T,L,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function k(T,L,A){l(T,L,!0)&&v(T,L,A,"notDeepStrictEqual",k)},s.strictEqual=function(k,T,L){k!==T&&v(k,T,L,"===",s.strictEqual)},s.notStrictEqual=function(k,T,L){k===T&&v(k,T,L,"!==",s.notStrictEqual)},s.throws=function(k,T,L){w(!0,k,T,L)},s.doesNotThrow=function(k,T,L){w(!1,k,T,L)},s.ifError=function(k){if(k)throw k},s.strict=g(function k(T,L){T||v(T,!0,L,"==",k)},s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var b=Object.keys||function(k){var T=[];for(var L in k)i.call(k,L)&&T.push(L);return T}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(y,$,ee){$.exports="function"==typeof Object.create?function(d,g){d.super_=g,d.prototype=Object.create(g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:function(d,g){d.super_=g;var _=function(){};_.prototype=g.prototype,d.prototype=new _,d.prototype.constructor=d}},{}],77:[function(y,$,ee){$.exports=function(d){return d&&"object"==typeof d&&"function"==typeof d.copy&&"function"==typeof d.fill&&"function"==typeof d.readUInt8}},{}],78:[function(y,$,ee){(function(d,g){(function(){var _=/%[sdj%]/g;ee.format=function(D){if(!v(D)){for(var S=[],C=0;C<arguments.length;C++)S.push(i(arguments[C]));return S.join(" ")}C=1;for(var R=arguments,F=R.length,H=String(D).replace(_,function(X){if("%%"===X)return"%";if(C>=F)return X;switch(X){case"%s":return String(R[C++]);case"%d":return Number(R[C++]);case"%j":try{return JSON.stringify(R[C++])}catch(Z){return"[Circular]"}default:return X}}),U=R[C];C<F;U=R[++C])u(U)||!x(U)?H+=" "+U:H+=" "+i(U);return H},ee.deprecate=function(D,S){if(f(g.process))return function(){return ee.deprecate(D,S).apply(this,arguments)};if(!0===d.noDeprecation)return D;var C=!1;return function(){if(!C){if(d.throwDeprecation)throw new Error(S);d.traceDeprecation?console.trace(S):console.error(S),C=!0}return D.apply(this,arguments)}};var t,e={};function i(D,S){var C={seen:[],stylize:o};return arguments.length>=3&&(C.depth=arguments[2]),arguments.length>=4&&(C.colors=arguments[3]),c(S)?C.showHidden=S:S&&ee._extend(C,S),f(C.showHidden)&&(C.showHidden=!1),f(C.depth)&&(C.depth=2),f(C.colors)&&(C.colors=!1),f(C.customInspect)&&(C.customInspect=!0),C.colors&&(C.stylize=r),n(C,D,C.depth)}function r(D,S){var C=i.styles[S];return C?"\x1b["+i.colors[C][0]+"m"+D+"\x1b["+i.colors[C][1]+"m":D}function o(D,S){return D}function n(D,S,C){if(D.customInspect&&S&&b(S.inspect)&&S.inspect!==ee.inspect&&(!S.constructor||S.constructor.prototype!==S)){var R=S.inspect(C,D);return v(R)||(R=n(D,R,C)),R}var F=function(z,N){if(f(N))return z.stylize("undefined","undefined");if(v(N)){var V="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(V,"string")}return h(N)?z.stylize(""+N,"number"):c(N)?z.stylize(""+N,"boolean"):u(N)?z.stylize("null","null"):void 0}(D,S);if(F)return F;var N,H=Object.keys(S),U=(N={},H.forEach(function(V,Q){N[V]=!0}),N);if(D.showHidden&&(H=Object.getOwnPropertyNames(S)),w(S)&&(H.indexOf("message")>=0||H.indexOf("description")>=0))return p(S);if(0===H.length){if(b(S))return D.stylize("[Function"+(S.name?": "+S.name:"")+"]","special");if(l(S))return D.stylize(RegExp.prototype.toString.call(S),"regexp");if(m(S))return D.stylize(Date.prototype.toString.call(S),"date");if(w(S))return p(S)}var Z,Y="",W=!1,te=["{","}"];return a(S)&&(W=!0,te=["[","]"]),b(S)&&(Y=" [Function"+(S.name?": "+S.name:"")+"]"),l(S)&&(Y=" "+RegExp.prototype.toString.call(S)),m(S)&&(Y=" "+Date.prototype.toUTCString.call(S)),w(S)&&(Y=" "+p(S)),0!==H.length||W&&0!=S.length?C<0?l(S)?D.stylize(RegExp.prototype.toString.call(S),"regexp"):D.stylize("[Object]","special"):(D.seen.push(S),Z=W?function(z,N,V,Q,j){for(var J=[],K=0,re=N.length;K<re;++K)I(N,String(K))?J.push(s(z,N,V,Q,String(K),!0)):J.push("");return j.forEach(function(ie){ie.match(/^\d+$/)||J.push(s(z,N,V,Q,ie,!0))}),J}(D,S,C,U,H):H.map(function(z){return s(D,S,C,U,z,W)}),D.seen.pop(),function(z,N,V){return z.reduce(function(Q,j){return j.indexOf("\n"),Q+j.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?V[0]+(""===N?"":N+"\n ")+" "+z.join(",\n  ")+" "+V[1]:V[0]+N+" "+z.join(", ")+" "+V[1]}(Z,Y,te)):te[0]+Y+te[1]}function p(D){return"["+Error.prototype.toString.call(D)+"]"}function s(D,S,C,R,F,H){var U,X,Z;if((Z=Object.getOwnPropertyDescriptor(S,F)||{value:S[F]}).get?X=D.stylize(Z.set?"[Getter/Setter]":"[Getter]","special"):Z.set&&(X=D.stylize("[Setter]","special")),I(R,F)||(U="["+F+"]"),X||(D.seen.indexOf(Z.value)<0?(X=u(C)?n(D,Z.value,null):n(D,Z.value,C-1)).indexOf("\n")>-1&&(X=H?X.split("\n").map(function(Y){return"  "+Y}).join("\n").substr(2):"\n"+X.split("\n").map(function(Y){return"   "+Y}).join("\n")):X=D.stylize("[Circular]","special")),f(U)){if(H&&F.match(/^\d+$/))return X;(U=JSON.stringify(""+F)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(U=U.substr(1,U.length-2),U=D.stylize(U,"name")):(U=U.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),U=D.stylize(U,"string"))}return U+": "+X}function a(D){return Array.isArray(D)}function c(D){return"boolean"==typeof D}function u(D){return null===D}function h(D){return"number"==typeof D}function v(D){return"string"==typeof D}function f(D){return void 0===D}function l(D){return x(D)&&"[object RegExp]"===k(D)}function x(D){return"object"==typeof D&&null!==D}function m(D){return x(D)&&"[object Date]"===k(D)}function w(D){return x(D)&&("[object Error]"===k(D)||D instanceof Error)}function b(D){return"function"==typeof D}function k(D){return Object.prototype.toString.call(D)}function T(D){return D<10?"0"+D.toString(10):D.toString(10)}ee.debuglog=function(D){if(f(t)&&(t=d.env.NODE_DEBUG||""),D=D.toUpperCase(),!e[D])if(new RegExp("\\b"+D+"\\b","i").test(t)){var S=d.pid;e[D]=function(){var C=ee.format.apply(ee,arguments);console.error("%s %d: %s",D,S,C)}}else e[D]=function(){};return e[D]},ee.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ee.isArray=a,ee.isBoolean=c,ee.isNull=u,ee.isNullOrUndefined=function(D){return null==D},ee.isNumber=h,ee.isString=v,ee.isSymbol=function(D){return"symbol"==typeof D},ee.isUndefined=f,ee.isRegExp=l,ee.isObject=x,ee.isDate=m,ee.isError=w,ee.isFunction=b,ee.isPrimitive=function(D){return null===D||"boolean"==typeof D||"number"==typeof D||"string"==typeof D||"symbol"==typeof D||void 0===D},ee.isBuffer=y("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var D=new Date,S=[T(D.getHours()),T(D.getMinutes()),T(D.getSeconds())].join(":");return[D.getDate(),L[D.getMonth()],S].join(" ")}function I(D,S){return Object.prototype.hasOwnProperty.call(D,S)}ee.log=function(){console.log("%s - %s",A(),ee.format.apply(ee,arguments))},ee.inherits=y("inherits"),ee._extend=function(D,S){if(!S||!x(S))return D;for(var C=Object.keys(S),R=C.length;R--;)D[C[R]]=S[C[R]];return D}}).call(this)}).call(this,y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(y,$,ee){"use strict";ee.byteLength=function(n){var p=r(n),a=p[1];return 3*(p[0]+a)/4-a},ee.toByteArray=function(n){var p,s,m,a=r(n),c=a[0],u=a[1],h=new _(3*(c+(m=u))/4-m),v=0,f=u>0?c-4:c;for(s=0;s<f;s+=4)p=g[n.charCodeAt(s)]<<18|g[n.charCodeAt(s+1)]<<12|g[n.charCodeAt(s+2)]<<6|g[n.charCodeAt(s+3)],h[v++]=p>>16&255,h[v++]=p>>8&255,h[v++]=255&p;return 2===u&&(p=g[n.charCodeAt(s)]<<2|g[n.charCodeAt(s+1)]>>4,h[v++]=255&p),1===u&&(p=g[n.charCodeAt(s)]<<10|g[n.charCodeAt(s+1)]<<4|g[n.charCodeAt(s+2)]>>2,h[v++]=p>>8&255,h[v++]=255&p),h},ee.fromByteArray=function(n){for(var p,s=n.length,a=s%3,c=[],u=0,h=s-a;u<h;u+=16383)c.push(o(n,u,u+16383>h?h:u+16383));return 1===a?c.push(d[(p=n[s-1])>>2]+d[p<<4&63]+"=="):2===a&&c.push(d[(p=(n[s-2]<<8)+n[s-1])>>10]+d[p>>4&63]+d[p<<2&63]+"="),c.join("")};for(var d=[],g=[],_="undefined"!=typeof Uint8Array?Uint8Array:Array,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,i=t.length;e<i;++e)d[e]=t[e],g[t.charCodeAt(e)]=e;function r(n){var p=n.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=n.indexOf("=");return-1===s&&(s=p),[s,s===p?0:4-s%4]}function o(n,p,s){for(var c,u=[],h=p;h<s;h+=3)u.push(d[(c=(n[h]<<16&16711680)+(n[h+1]<<8&65280)+(255&n[h+2]))>>18&63]+d[c>>12&63]+d[c>>6&63]+d[63&c]);return u.join("")}g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63},{}],80:[function(y,$,ee){"use strict";function d(r,o,n,p,s){for(var a=s+1;p<=s;){var c=p+s>>>1,u=r[c];(void 0!==n?n(u,o):u-o)>=0?(a=c,s=c-1):p=c+1}return a}function g(r,o,n,p,s){for(var a=s+1;p<=s;){var c=p+s>>>1,u=r[c];(void 0!==n?n(u,o):u-o)>0?(a=c,s=c-1):p=c+1}return a}function _(r,o,n,p,s){for(var a=p-1;p<=s;){var c=p+s>>>1,u=r[c];(void 0!==n?n(u,o):u-o)<0?(a=c,p=c+1):s=c-1}return a}function t(r,o,n,p,s){for(var a=p-1;p<=s;){var c=p+s>>>1,u=r[c];(void 0!==n?n(u,o):u-o)<=0?(a=c,p=c+1):s=c-1}return a}function e(r,o,n,p,s){for(;p<=s;){var a=p+s>>>1,c=r[a],u=void 0!==n?n(c,o):c-o;if(0===u)return a;u<=0?p=a+1:s=a-1}return-1}function i(r,o,n,p,s,a){return"function"==typeof n?a(r,o,n,void 0===p?0:0|p,void 0===s?r.length-1:0|s):a(r,o,void 0,void 0===n?0:0|n,void 0===p?r.length-1:0|p)}$.exports={ge:function(r,o,n,p,s){return i(r,o,n,p,s,d)},gt:function(r,o,n,p,s){return i(r,o,n,p,s,g)},lt:function(r,o,n,p,s){return i(r,o,n,p,s,_)},le:function(r,o,n,p,s){return i(r,o,n,p,s,t)},eq:function(r,o,n,p,s){return i(r,o,n,p,s,e)}}},{}],81:[function(y,$,ee){"use strict";function d(_){var t=32;return(_&=-_)&&t--,65535&_&&(t-=16),16711935&_&&(t-=8),252645135&_&&(t-=4),858993459&_&&(t-=2),1431655765&_&&(t-=1),t}ee.INT_BITS=32,ee.INT_MAX=2147483647,ee.INT_MIN=-1<<31,ee.sign=function(_){return(_>0)-(_<0)},ee.abs=function(_){var t=_>>31;return(_^t)-t},ee.min=function(_,t){return t^(_^t)&-(_<t)},ee.max=function(_,t){return _^(_^t)&-(_<t)},ee.isPow2=function(_){return!(_&_-1||!_)},ee.log2=function(_){var t,e;return t=(_>65535)<<4,t|=e=((_>>>=t)>255)<<3,t|=e=((_>>>=e)>15)<<2,(t|=e=((_>>>=e)>3)<<1)|(_>>>=e)>>1},ee.log10=function(_){return _>=1e9?9:_>=1e8?8:_>=1e7?7:_>=1e6?6:_>=1e5?5:_>=1e4?4:_>=1e3?3:_>=100?2:_>=10?1:0},ee.popCount=function(_){return 16843009*((_=(858993459&(_-=_>>>1&1431655765))+(_>>>2&858993459))+(_>>>4)&252645135)>>>24},ee.countTrailingZeros=d,ee.nextPow2=function(_){return _+=0===_,--_,_|=_>>>1,_|=_>>>2,_|=_>>>4,1+((_|=_>>>8)|_>>>16)},ee.prevPow2=function(_){return _|=_>>>1,_|=_>>>2,_|=_>>>4,_|=_>>>8,(_|=_>>>16)-(_>>>1)},ee.parity=function(_){return _^=_>>>16,_^=_>>>8,_^=_>>>4,27030>>>(_&=15)&1};var g=new Array(256);(function(_){for(var t=0;t<256;++t){var e=t,i=t,r=7;for(e>>>=1;e;e>>>=1)i<<=1,i|=1&e,--r;_[t]=i<<r&255}})(g),ee.reverse=function(_){return g[255&_]<<24|g[_>>>8&255]<<16|g[_>>>16&255]<<8|g[_>>>24&255]},ee.interleave2=function(_,t){return(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_&=65535)|_<<8))|_<<4))|_<<2))|_<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},ee.deinterleave2=function(_,t){return(_=65535&((_=16711935&((_=252645135&((_=858993459&((_=_>>>t&1431655765)|_>>>1))|_>>>2))|_>>>4))|_>>>16))<<16>>16},ee.interleave3=function(_,t,e){return _=1227133513&((_=3272356035&((_=251719695&((_=4278190335&((_&=1023)|_<<16))|_<<8))|_<<4))|_<<2),(_|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},ee.deinterleave3=function(_,t){return(_=1023&((_=4278190335&((_=251719695&((_=3272356035&((_=_>>>t&1227133513)|_>>>2))|_>>>4))|_>>>8))|_>>>16))<<22>>22},ee.nextCombination=function(_){var t=_|_-1;return t+1|(~t&-~t)-1>>>d(_)+1}},{}],82:[function(y,$,ee){"use strict";var d=y("clamp");$.exports=function(e,i){i||(i={});var r,o,n,p,s,a,u,v,f,l=null==i.cutoff?.25:i.cutoff,x=null==i.radius?8:i.radius,m=i.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!i.width||!i.height)throw Error("For raw data width and height should be provided by options");r=i.width,o=i.height,p=e,a=i.stride?i.stride:Math.floor(e.length/r/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(p=(u=e).getContext("2d").getImageData(0,0,r=u.width,o=u.height).data,a=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(p=e.getImageData(0,0,r=(u=e.canvas).width,o=u.height).data,a=4):window.ImageData&&e instanceof window.ImageData&&(r=e.width,o=e.height,p=e.data,a=4);if(n=Math.max(r,o),window.Uint8ClampedArray&&p instanceof window.Uint8ClampedArray||window.Uint8Array&&p instanceof window.Uint8Array)for(s=p,p=Array(r*o),v=0,f=s.length;v<f;v++)p[v]=s[v*a+m]/255;else if(1!==a)throw Error("Raw data can have only 1 value per pixel");var w=Array(r*o),b=Array(r*o),k=Array(n),T=Array(n),L=Array(n+1),A=Array(n);for(v=0,f=r*o;v<f;v++){var I=p[v];w[v]=1===I?0:0===I?g:Math.pow(Math.max(0,.5-I),2),b[v]=1===I?g:0===I?0:Math.pow(Math.max(0,I-.5),2)}_(w,r,o,k,T,A,L),_(b,r,o,k,T,A,L);var D=window.Float32Array?new Float32Array(r*o):new Array(r*o);for(v=0,f=r*o;v<f;v++)D[v]=d(1-((w[v]-b[v])/x+l),0,1);return D};var g=1e20;function _(e,i,r,o,n,p,s){for(var a=0;a<i;a++){for(var c=0;c<r;c++)o[c]=e[c*i+a];for(t(o,n,p,s,r),c=0;c<r;c++)e[c*i+a]=n[c]}for(c=0;c<r;c++){for(a=0;a<i;a++)o[a]=e[c*i+a];for(t(o,n,p,s,i),a=0;a<i;a++)e[c*i+a]=Math.sqrt(n[a])}}function t(e,i,r,o,n){r[0]=0,o[0]=-g,o[1]=+g;for(var p=1,s=0;p<n;p++){for(var a=(e[p]+p*p-(e[r[s]]+r[s]*r[s]))/(2*p-2*r[s]);a<=o[s];)s--,a=(e[p]+p*p-(e[r[s]]+r[s]*r[s]))/(2*p-2*r[s]);r[++s]=p,o[s]=a,o[s+1]=+g}for(p=0,s=0;p<n;p++){for(;o[s+1]<p;)s++;i[p]=(p-r[s])*(p-r[s])+e[r[s]]}}},{clamp:86}],83:[function(y,$,ee){},{}],84:[function(y,$,ee){"use strict";var d,g="object"==typeof Reflect?Reflect:null,_=g&&"function"==typeof g.apply?g.apply:function(h,v,f){return Function.prototype.apply.call(h,v,f)};d=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:function(h){return Object.getOwnPropertyNames(h)};var t=Number.isNaN||function(h){return h!=h};function e(){e.init.call(this)}$.exports=e,$.exports.once=function(h,v){return new Promise(function(f,l){function x(){void 0!==m&&h.removeListener("error",m),f([].slice.call(arguments))}var m;"error"!==v&&(m=function(w){h.removeListener(v,x),l(w)},h.once("error",m)),h.once(v,x)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var i=10;function r(h){if("function"!=typeof h)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function o(h){return void 0===h._maxListeners?e.defaultMaxListeners:h._maxListeners}function n(h,v,f,l){var x,m,w;if(r(f),void 0===(m=h._events)?(m=h._events=Object.create(null),h._eventsCount=0):(void 0!==m.newListener&&(h.emit("newListener",v,f.listener?f.listener:f),m=h._events),w=m[v]),void 0===w)w=m[v]=f,++h._eventsCount;else if("function"==typeof w?w=m[v]=l?[f,w]:[w,f]:l?w.unshift(f):w.push(f),(x=o(h))>0&&w.length>x&&!w.warned){w.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=h,k.type=v,k.count=w.length,console&&console.warn&&console.warn(k)}return h}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(h,v,f){var l={fired:!1,wrapFn:void 0,target:h,type:v,listener:f},x=p.bind(l);return x.listener=f,l.wrapFn=x,x}function a(h,v,f){var l=h._events;if(void 0===l)return[];var x=l[v];return void 0===x?[]:"function"==typeof x?f?[x.listener||x]:[x]:f?function(m){for(var w=new Array(m.length),b=0;b<w.length;++b)w[b]=m[b].listener||m[b];return w}(x):u(x,x.length)}function c(h){var v=this._events;if(void 0!==v){var f=v[h];if("function"==typeof f)return 1;if(void 0!==f)return f.length}return 0}function u(h,v){for(var f=new Array(v),l=0;l<v;++l)f[l]=h[l];return f}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(h){if("number"!=typeof h||h<0||t(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");i=h}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(h){if("number"!=typeof h||h<0||t(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this},e.prototype.getMaxListeners=function(){return o(this)},e.prototype.emit=function(h){for(var v=[],f=1;f<arguments.length;f++)v.push(arguments[f]);var l="error"===h,x=this._events;if(void 0!==x)l=l&&void 0===x.error;else if(!l)return!1;if(l){var m;if(v.length>0&&(m=v[0]),m instanceof Error)throw m;var w=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw w.context=m,w}var b=x[h];if(void 0===b)return!1;if("function"==typeof b)_(b,this,v);else{var k=b.length,T=u(b,k);for(f=0;f<k;++f)_(T[f],this,v)}return!0},e.prototype.on=e.prototype.addListener=function(h,v){return n(this,h,v,!1)},e.prototype.prependListener=function(h,v){return n(this,h,v,!0)},e.prototype.once=function(h,v){return r(v),this.on(h,s(this,h,v)),this},e.prototype.prependOnceListener=function(h,v){return r(v),this.prependListener(h,s(this,h,v)),this},e.prototype.off=e.prototype.removeListener=function(h,v){var f,l,x,m,w;if(r(v),void 0===(l=this._events))return this;if(void 0===(f=l[h]))return this;if(f===v||f.listener===v)0==--this._eventsCount?this._events=Object.create(null):(delete l[h],l.removeListener&&this.emit("removeListener",h,f.listener||v));else if("function"!=typeof f){for(x=-1,m=f.length-1;m>=0;m--)if(f[m]===v||f[m].listener===v){w=f[m].listener,x=m;break}if(x<0)return this;0===x?f.shift():function(b,k){for(;k+1<b.length;k++)b[k]=b[k+1];b.pop()}(f,x),1===f.length&&(l[h]=f[0]),void 0!==l.removeListener&&this.emit("removeListener",h,w||v)}return this},e.prototype.removeAllListeners=function(h){var v,f,l;if(void 0===(f=this._events))return this;if(void 0===f.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==f[h]&&(0==--this._eventsCount?this._events=Object.create(null):delete f[h]),this;if(0===arguments.length){var x,m=Object.keys(f);for(l=0;l<m.length;++l)"removeListener"!==(x=m[l])&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(v=f[h]))this.removeListener(h,v);else if(void 0!==v)for(l=v.length-1;l>=0;l--)this.removeListener(h,v[l]);return this},e.prototype.listeners=function(h){return a(this,h,!0)},e.prototype.rawListeners=function(h){return a(this,h,!1)},e.listenerCount=function(h,v){return"function"==typeof h.listenerCount?h.listenerCount(v):c.call(h,v)},e.prototype.listenerCount=c,e.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]}},{}],85:[function(y,$,ee){(function(d){(function(){"use strict";var g=y("base64-js"),_=y("ieee754");function t(z){if(z>2147483647)throw new RangeError('The value "'+z+'" is invalid for option "size"');var N=new Uint8Array(z);return N.__proto__=e.prototype,N}function e(z,N,V){if("number"==typeof z){if("string"==typeof N)throw new TypeError('The "string" argument must be of type string. Received type number');return o(z)}return i(z,N,V)}function i(z,N,V){if("string"==typeof z)return function(J,K){if("string"==typeof K&&""!==K||(K="utf8"),!e.isEncoding(K))throw new TypeError("Unknown encoding: "+K);var re=0|s(J,K),ie=t(re),ce=ie.write(J,K);return ce!==re&&(ie=ie.slice(0,ce)),ie}(z,N);if(ArrayBuffer.isView(z))return n(z);if(null==z)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(W(z,ArrayBuffer)||z&&W(z.buffer,ArrayBuffer))return function(J,K,re){if(K<0||J.byteLength<K)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<K+(re||0))throw new RangeError('"length" is outside of buffer bounds');var ie;return(ie=void 0===K&&void 0===re?new Uint8Array(J):void 0===re?new Uint8Array(J,K):new Uint8Array(J,K,re)).__proto__=e.prototype,ie}(z,N,V);if("number"==typeof z)throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=z.valueOf&&z.valueOf();if(null!=Q&&Q!==z)return e.from(Q,N,V);var j=function(J){if(e.isBuffer(J)){var K=0|p(J.length),re=t(K);return 0===re.length||J.copy(re,0,0,K),re}return void 0!==J.length?"number"!=typeof J.length||te(J.length)?t(0):n(J):"Buffer"===J.type&&Array.isArray(J.data)?n(J.data):void 0}(z);if(j)return j;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof z[Symbol.toPrimitive])return e.from(z[Symbol.toPrimitive]("string"),N,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}function r(z){if("number"!=typeof z)throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function o(z){return r(z),t(z<0?0:0|p(z))}function n(z){for(var N=z.length<0?0:0|p(z.length),V=t(N),Q=0;Q<N;Q+=1)V[Q]=255&z[Q];return V}function p(z){if(z>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|z}function s(z,N){if(e.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||W(z,ArrayBuffer))return z.byteLength;if("string"!=typeof z)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);var V=z.length,Q=arguments.length>2&&!0===arguments[2];if(!Q&&0===V)return 0;for(var j=!1;;)switch(N){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return X(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return Z(z).length;default:if(j)return Q?-1:X(z).length;N=(""+N).toLowerCase(),j=!0}}function a(z,N,V){var Q=!1;if((void 0===N||N<0)&&(N=0),N>this.length||((void 0===V||V>this.length)&&(V=this.length),V<=0)||(V>>>=0)<=(N>>>=0))return"";for(z||(z="utf8");;)switch(z){case"hex":return A(this,N,V);case"utf8":case"utf-8":return k(this,N,V);case"ascii":return T(this,N,V);case"latin1":case"binary":return L(this,N,V);case"base64":return b(this,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,N,V);default:if(Q)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),Q=!0}}function c(z,N,V){var Q=z[N];z[N]=z[V],z[V]=Q}function u(z,N,V,Q,j){if(0===z.length)return-1;if("string"==typeof V?(Q=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),te(V=+V)&&(V=j?0:z.length-1),V<0&&(V=z.length+V),V>=z.length){if(j)return-1;V=z.length-1}else if(V<0){if(!j)return-1;V=0}if("string"==typeof N&&(N=e.from(N,Q)),e.isBuffer(N))return 0===N.length?-1:h(z,N,V,Q,j);if("number"==typeof N)return N&=255,"function"==typeof Uint8Array.prototype.indexOf?j?Uint8Array.prototype.indexOf.call(z,N,V):Uint8Array.prototype.lastIndexOf.call(z,N,V):h(z,[N],V,Q,j);throw new TypeError("val must be string, number or Buffer")}function h(z,N,V,Q,j){var J,K=1,re=z.length,ie=N.length;if(void 0!==Q&&("ucs2"===(Q=String(Q).toLowerCase())||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(z.length<2||N.length<2)return-1;K=2,re/=2,ie/=2,V/=2}function ce(ge,be){return 1===K?ge[be]:ge.readUInt16BE(be*K)}if(j){var se=-1;for(J=V;J<re;J++)if(ce(z,J)===ce(N,-1===se?0:J-se)){if(-1===se&&(se=J),J-se+1===ie)return se*K}else-1!==se&&(J-=J-se),se=-1}else for(V+ie>re&&(V=re-ie),J=V;J>=0;J--){for(var de=!0,ue=0;ue<ie;ue++)if(ce(z,J+ue)!==ce(N,ue)){de=!1;break}if(de)return J}return-1}function v(z,N,V,Q){V=Number(V)||0;var j=z.length-V;Q?(Q=Number(Q))>j&&(Q=j):Q=j;var J=N.length;Q>J/2&&(Q=J/2);for(var K=0;K<Q;++K){var re=parseInt(N.substr(2*K,2),16);if(te(re))return K;z[V+K]=re}return K}function f(z,N,V,Q){return Y(X(N,z.length-V),z,V,Q)}function l(z,N,V,Q){return Y(function(j){for(var J=[],K=0;K<j.length;++K)J.push(255&j.charCodeAt(K));return J}(N),z,V,Q)}function x(z,N,V,Q){return l(z,N,V,Q)}function m(z,N,V,Q){return Y(Z(N),z,V,Q)}function w(z,N,V,Q){return Y(function(j,J){for(var K,re,ce=[],se=0;se<j.length&&!((J-=2)<0);++se)re=(K=j.charCodeAt(se))>>8,ce.push(K%256),ce.push(re);return ce}(N,z.length-V),z,V,Q)}function b(z,N,V){return g.fromByteArray(0===N&&V===z.length?z:z.slice(N,V))}function k(z,N,V){V=Math.min(z.length,V);for(var Q=[],j=N;j<V;){var J,K,re,ie,ce=z[j],se=null,de=ce>239?4:ce>223?3:ce>191?2:1;if(j+de<=V)switch(de){case 1:ce<128&&(se=ce);break;case 2:128==(192&(J=z[j+1]))&&(ie=(31&ce)<<6|63&J)>127&&(se=ie);break;case 3:K=z[j+2],128==(192&(J=z[j+1]))&&128==(192&K)&&(ie=(15&ce)<<12|(63&J)<<6|63&K)>2047&&(ie<55296||ie>57343)&&(se=ie);break;case 4:K=z[j+2],re=z[j+3],128==(192&(J=z[j+1]))&&128==(192&K)&&128==(192&re)&&(ie=(15&ce)<<18|(63&J)<<12|(63&K)<<6|63&re)>65535&&ie<1114112&&(se=ie)}null===se?(se=65533,de=1):se>65535&&(Q.push((se-=65536)>>>10&1023|55296),se=56320|1023&se),Q.push(se),j+=de}return function(ue){var ge=ue.length;if(ge<=4096)return String.fromCharCode.apply(String,ue);for(var be="",Te=0;Te<ge;)be+=String.fromCharCode.apply(String,ue.slice(Te,Te+=4096));return be}(Q)}function T(z,N,V){var Q="";V=Math.min(z.length,V);for(var j=N;j<V;++j)Q+=String.fromCharCode(127&z[j]);return Q}function L(z,N,V){var Q="";V=Math.min(z.length,V);for(var j=N;j<V;++j)Q+=String.fromCharCode(z[j]);return Q}function A(z,N,V){var Q=z.length;(!N||N<0)&&(N=0),(!V||V<0||V>Q)&&(V=Q);for(var j="",J=N;J<V;++J)j+=U(z[J]);return j}function I(z,N,V){for(var Q=z.slice(N,V),j="",J=0;J<Q.length;J+=2)j+=String.fromCharCode(Q[J]+256*Q[J+1]);return j}function D(z,N,V){if(z%1!=0||z<0)throw new RangeError("offset is not uint");if(z+N>V)throw new RangeError("Trying to access beyond buffer length")}function S(z,N,V,Q,j,J){if(!e.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>j||N<J)throw new RangeError('"value" argument is out of bounds');if(V+Q>z.length)throw new RangeError("Index out of range")}function C(z,N,V,Q,j,J){if(V+Q>z.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function R(z,N,V,Q,j){return N=+N,V>>>=0,j||C(z,0,V,4),_.write(z,N,V,Q,23,4),V+4}function F(z,N,V,Q,j){return N=+N,V>>>=0,j||C(z,0,V,8),_.write(z,N,V,Q,52,8),V+8}ee.Buffer=e,ee.SlowBuffer=function(z){return+z!=z&&(z=0),e.alloc(+z)},ee.INSPECT_MAX_BYTES=50,ee.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var z=new Uint8Array(1);return z.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===z.foo()}catch(N){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(z,N,V){return i(z,N,V)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(z,N,V){return j=N,J=V,r(Q=z),Q<=0?t(Q):void 0!==j?"string"==typeof J?t(Q).fill(j,J):t(Q).fill(j):t(Q);var Q,j,J},e.allocUnsafe=function(z){return o(z)},e.allocUnsafeSlow=function(z){return o(z)},e.isBuffer=function(z){return null!=z&&!0===z._isBuffer&&z!==e.prototype},e.compare=function(z,N){if(W(z,Uint8Array)&&(z=e.from(z,z.offset,z.byteLength)),W(N,Uint8Array)&&(N=e.from(N,N.offset,N.byteLength)),!e.isBuffer(z)||!e.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===N)return 0;for(var V=z.length,Q=N.length,j=0,J=Math.min(V,Q);j<J;++j)if(z[j]!==N[j]){V=z[j],Q=N[j];break}return V<Q?-1:Q<V?1:0},e.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(z,N){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(0===z.length)return e.alloc(0);var V;if(void 0===N)for(N=0,V=0;V<z.length;++V)N+=z[V].length;var Q=e.allocUnsafe(N),j=0;for(V=0;V<z.length;++V){var J=z[V];if(W(J,Uint8Array)&&(J=e.from(J)),!e.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(Q,j),j+=J.length}return Q},e.byteLength=s,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var z=this.length;if(z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<z;N+=2)c(this,N,N+1);return this},e.prototype.swap32=function(){var z=this.length;if(z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<z;N+=4)c(this,N,N+3),c(this,N+1,N+2);return this},e.prototype.swap64=function(){var z=this.length;if(z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<z;N+=8)c(this,N,N+7),c(this,N+1,N+6),c(this,N+2,N+5),c(this,N+3,N+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var z=this.length;return 0===z?"":0===arguments.length?k(this,0,z):a.apply(this,arguments)},e.prototype.equals=function(z){if(!e.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z||0===e.compare(this,z)},e.prototype.inspect=function(){var z="",N=ee.INSPECT_MAX_BYTES;return z=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(z+=" ... "),"<Buffer "+z+">"},e.prototype.compare=function(z,N,V,Q,j){if(W(z,Uint8Array)&&(z=e.from(z,z.offset,z.byteLength)),!e.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(void 0===N&&(N=0),void 0===V&&(V=z?z.length:0),void 0===Q&&(Q=0),void 0===j&&(j=this.length),N<0||V>z.length||Q<0||j>this.length)throw new RangeError("out of range index");if(Q>=j&&N>=V)return 0;if(Q>=j)return-1;if(N>=V)return 1;if(this===z)return 0;for(var J=(j>>>=0)-(Q>>>=0),K=(V>>>=0)-(N>>>=0),re=Math.min(J,K),ie=this.slice(Q,j),ce=z.slice(N,V),se=0;se<re;++se)if(ie[se]!==ce[se]){J=ie[se],K=ce[se];break}return J<K?-1:K<J?1:0},e.prototype.includes=function(z,N,V){return-1!==this.indexOf(z,N,V)},e.prototype.indexOf=function(z,N,V){return u(this,z,N,V,!0)},e.prototype.lastIndexOf=function(z,N,V){return u(this,z,N,V,!1)},e.prototype.write=function(z,N,V,Q){if(void 0===N)Q="utf8",V=this.length,N=0;else if(void 0===V&&"string"==typeof N)Q=N,V=this.length,N=0;else{if(!isFinite(N))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");N>>>=0,isFinite(V)?(V>>>=0,void 0===Q&&(Q="utf8")):(Q=V,V=void 0)}var j=this.length-N;if((void 0===V||V>j)&&(V=j),z.length>0&&(V<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");for(var J=!1;;)switch(Q){case"hex":return v(this,z,N,V);case"utf8":case"utf-8":return f(this,z,N,V);case"ascii":return l(this,z,N,V);case"latin1":case"binary":return x(this,z,N,V);case"base64":return m(this,z,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,z,N,V);default:if(J)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),J=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(z,N){var V=this.length;(z=~~z)<0?(z+=V)<0&&(z=0):z>V&&(z=V),(N=void 0===N?V:~~N)<0?(N+=V)<0&&(N=0):N>V&&(N=V),N<z&&(N=z);var Q=this.subarray(z,N);return Q.__proto__=e.prototype,Q},e.prototype.readUIntLE=function(z,N,V){z>>>=0,N>>>=0,V||D(z,N,this.length);for(var Q=this[z],j=1,J=0;++J<N&&(j*=256);)Q+=this[z+J]*j;return Q},e.prototype.readUIntBE=function(z,N,V){z>>>=0,N>>>=0,V||D(z,N,this.length);for(var Q=this[z+--N],j=1;N>0&&(j*=256);)Q+=this[z+--N]*j;return Q},e.prototype.readUInt8=function(z,N){return z>>>=0,N||D(z,1,this.length),this[z]},e.prototype.readUInt16LE=function(z,N){return z>>>=0,N||D(z,2,this.length),this[z]|this[z+1]<<8},e.prototype.readUInt16BE=function(z,N){return z>>>=0,N||D(z,2,this.length),this[z]<<8|this[z+1]},e.prototype.readUInt32LE=function(z,N){return z>>>=0,N||D(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+16777216*this[z+3]},e.prototype.readUInt32BE=function(z,N){return z>>>=0,N||D(z,4,this.length),16777216*this[z]+(this[z+1]<<16|this[z+2]<<8|this[z+3])},e.prototype.readIntLE=function(z,N,V){z>>>=0,N>>>=0,V||D(z,N,this.length);for(var Q=this[z],j=1,J=0;++J<N&&(j*=256);)Q+=this[z+J]*j;return Q>=(j*=128)&&(Q-=Math.pow(2,8*N)),Q},e.prototype.readIntBE=function(z,N,V){z>>>=0,N>>>=0,V||D(z,N,this.length);for(var Q=N,j=1,J=this[z+--Q];Q>0&&(j*=256);)J+=this[z+--Q]*j;return J>=(j*=128)&&(J-=Math.pow(2,8*N)),J},e.prototype.readInt8=function(z,N){return z>>>=0,N||D(z,1,this.length),128&this[z]?-1*(255-this[z]+1):this[z]},e.prototype.readInt16LE=function(z,N){z>>>=0,N||D(z,2,this.length);var V=this[z]|this[z+1]<<8;return 32768&V?4294901760|V:V},e.prototype.readInt16BE=function(z,N){z>>>=0,N||D(z,2,this.length);var V=this[z+1]|this[z]<<8;return 32768&V?4294901760|V:V},e.prototype.readInt32LE=function(z,N){return z>>>=0,N||D(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},e.prototype.readInt32BE=function(z,N){return z>>>=0,N||D(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},e.prototype.readFloatLE=function(z,N){return z>>>=0,N||D(z,4,this.length),_.read(this,z,!0,23,4)},e.prototype.readFloatBE=function(z,N){return z>>>=0,N||D(z,4,this.length),_.read(this,z,!1,23,4)},e.prototype.readDoubleLE=function(z,N){return z>>>=0,N||D(z,8,this.length),_.read(this,z,!0,52,8)},e.prototype.readDoubleBE=function(z,N){return z>>>=0,N||D(z,8,this.length),_.read(this,z,!1,52,8)},e.prototype.writeUIntLE=function(z,N,V,Q){z=+z,N>>>=0,V>>>=0,Q||S(this,z,N,V,Math.pow(2,8*V)-1,0);var j=1,J=0;for(this[N]=255&z;++J<V&&(j*=256);)this[N+J]=z/j&255;return N+V},e.prototype.writeUIntBE=function(z,N,V,Q){z=+z,N>>>=0,V>>>=0,Q||S(this,z,N,V,Math.pow(2,8*V)-1,0);var j=V-1,J=1;for(this[N+j]=255&z;--j>=0&&(J*=256);)this[N+j]=z/J&255;return N+V},e.prototype.writeUInt8=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,1,255,0),this[N]=255&z,N+1},e.prototype.writeUInt16LE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,2,65535,0),this[N]=255&z,this[N+1]=z>>>8,N+2},e.prototype.writeUInt16BE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,2,65535,0),this[N]=z>>>8,this[N+1]=255&z,N+2},e.prototype.writeUInt32LE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,4,4294967295,0),this[N+3]=z>>>24,this[N+2]=z>>>16,this[N+1]=z>>>8,this[N]=255&z,N+4},e.prototype.writeUInt32BE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,4,4294967295,0),this[N]=z>>>24,this[N+1]=z>>>16,this[N+2]=z>>>8,this[N+3]=255&z,N+4},e.prototype.writeIntLE=function(z,N,V,Q){if(z=+z,N>>>=0,!Q){var j=Math.pow(2,8*V-1);S(this,z,N,V,j-1,-j)}var J=0,K=1,re=0;for(this[N]=255&z;++J<V&&(K*=256);)z<0&&0===re&&0!==this[N+J-1]&&(re=1),this[N+J]=(z/K>>0)-re&255;return N+V},e.prototype.writeIntBE=function(z,N,V,Q){if(z=+z,N>>>=0,!Q){var j=Math.pow(2,8*V-1);S(this,z,N,V,j-1,-j)}var J=V-1,K=1,re=0;for(this[N+J]=255&z;--J>=0&&(K*=256);)z<0&&0===re&&0!==this[N+J+1]&&(re=1),this[N+J]=(z/K>>0)-re&255;return N+V},e.prototype.writeInt8=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,1,127,-128),z<0&&(z=255+z+1),this[N]=255&z,N+1},e.prototype.writeInt16LE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,2,32767,-32768),this[N]=255&z,this[N+1]=z>>>8,N+2},e.prototype.writeInt16BE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,2,32767,-32768),this[N]=z>>>8,this[N+1]=255&z,N+2},e.prototype.writeInt32LE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,4,2147483647,-2147483648),this[N]=255&z,this[N+1]=z>>>8,this[N+2]=z>>>16,this[N+3]=z>>>24,N+4},e.prototype.writeInt32BE=function(z,N,V){return z=+z,N>>>=0,V||S(this,z,N,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[N]=z>>>24,this[N+1]=z>>>16,this[N+2]=z>>>8,this[N+3]=255&z,N+4},e.prototype.writeFloatLE=function(z,N,V){return R(this,z,N,!0,V)},e.prototype.writeFloatBE=function(z,N,V){return R(this,z,N,!1,V)},e.prototype.writeDoubleLE=function(z,N,V){return F(this,z,N,!0,V)},e.prototype.writeDoubleBE=function(z,N,V){return F(this,z,N,!1,V)},e.prototype.copy=function(z,N,V,Q){if(!e.isBuffer(z))throw new TypeError("argument should be a Buffer");if(V||(V=0),Q||0===Q||(Q=this.length),N>=z.length&&(N=z.length),N||(N=0),Q>0&&Q<V&&(Q=V),Q===V||0===z.length||0===this.length)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),z.length-N<Q-V&&(Q=z.length-N+V);var j=Q-V;if(this===z&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(N,V,Q);else if(this===z&&V<N&&N<Q)for(var J=j-1;J>=0;--J)z[J+N]=this[J+V];else Uint8Array.prototype.set.call(z,this.subarray(V,Q),N);return j},e.prototype.fill=function(z,N,V,Q){if("string"==typeof z){if("string"==typeof N?(Q=N,N=0,V=this.length):"string"==typeof V&&(Q=V,V=this.length),void 0!==Q&&"string"!=typeof Q)throw new TypeError("encoding must be a string");if("string"==typeof Q&&!e.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(1===z.length){var j=z.charCodeAt(0);("utf8"===Q&&j<128||"latin1"===Q)&&(z=j)}}else"number"==typeof z&&(z&=255);if(N<0||this.length<N||this.length<V)throw new RangeError("Out of range index");if(V<=N)return this;var J;if(N>>>=0,V=void 0===V?this.length:V>>>0,z||(z=0),"number"==typeof z)for(J=N;J<V;++J)this[J]=z;else{var K=e.isBuffer(z)?z:e.from(z,Q),re=K.length;if(0===re)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(J=0;J<V-N;++J)this[J+N]=K[J%re]}return this};var H=/[^+/0-9A-Za-z-_]/g;function U(z){return z<16?"0"+z.toString(16):z.toString(16)}function X(z,N){var V;N=N||1/0;for(var Q=z.length,j=null,J=[],K=0;K<Q;++K){if((V=z.charCodeAt(K))>55295&&V<57344){if(!j){if(V>56319){(N-=3)>-1&&J.push(239,191,189);continue}if(K+1===Q){(N-=3)>-1&&J.push(239,191,189);continue}j=V;continue}if(V<56320){(N-=3)>-1&&J.push(239,191,189),j=V;continue}V=65536+(j-55296<<10|V-56320)}else j&&(N-=3)>-1&&J.push(239,191,189);if(j=null,V<128){if((N-=1)<0)break;J.push(V)}else if(V<2048){if((N-=2)<0)break;J.push(V>>6|192,63&V|128)}else if(V<65536){if((N-=3)<0)break;J.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;J.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return J}function Z(z){return g.toByteArray(function(N){if((N=(N=N.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;N.length%4!=0;)N+="=";return N}(z))}function Y(z,N,V,Q){for(var j=0;j<Q&&!(j+V>=N.length||j>=z.length);++j)N[j+V]=z[j];return j}function W(z,N){return z instanceof N||null!=z&&null!=z.constructor&&null!=z.constructor.name&&z.constructor.name===N.name}function te(z){return z!=z}}).call(this)}).call(this,y("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(y,$,ee){$.exports=function(d,g,_){return g<_?d<g?g:d>_?_:d:d<_?_:d>g?g:d}},{}],87:[function(y,$,ee){"use strict";var d=y("clamp");function g(_,t){null==t&&(t=!0);var e=_[0],i=_[1],r=_[2],o=_[3];return null==o&&(o=t?1:255),t&&(e*=255,i*=255,r*=255,o*=255),16777216*(e=255&d(e,0,255))+((i=255&d(i,0,255))<<16)+((r=255&d(r,0,255))<<8)+(255&d(o,0,255))}$.exports=g,$.exports.to=g,$.exports.from=function(_,t){var e=(_=+_)>>>24,i=(16711680&_)>>>16,r=(65280&_)>>>8,o=255&_;return!1===t?[e,i,r,o]:[e/255,i/255,r/255,o/255]}},{clamp:86}],88:[function(y,$,ee){"use strict";$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(y,$,ee){"use strict";var d=y("color-rgba"),g=y("clamp"),_=y("dtype");$.exports=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var o,i=new(_(e))(4),r="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=d(t))[0]/=255,t[1]/=255,t[2]/=255),(o=t)instanceof Uint8Array||o instanceof Uint8ClampedArray||Array.isArray(o)&&(o[0]>1||0===o[0])&&(o[1]>1||0===o[1])&&(o[2]>1||0===o[2])&&(!o[3]||o[3]>1)?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=null!=t[3]?t[3]:255,r&&(i[0]/=255,i[1]/=255,i[2]/=255,i[3]/=255),i):(r?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=null!=t[3]?t[3]:1):(i[0]=g(Math.floor(255*t[0]),0,255),i[1]=g(Math.floor(255*t[1]),0,255),i[2]=g(Math.floor(255*t[2]),0,255),i[3]=null==t[3]?255:g(Math.floor(255*t[3]),0,255)),i)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(y,$,ee){(function(d){(function(){"use strict";var g=y("color-name"),_=y("is-plain-obj"),t=y("defined");$.exports=function(i){var r,o,n=[],p=1;if("string"==typeof i)if(g[i])n=g[i].slice(),o="rgb";else if("transparent"===i)p=0,o="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var s=(u=i.slice(1)).length;p=1,s<=4?(n=[parseInt(u[0]+u[0],16),parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16)],4===s&&(p=parseInt(u[3]+u[3],16)/255)):(n=[parseInt(u[0]+u[1],16),parseInt(u[2]+u[3],16),parseInt(u[4]+u[5],16)],8===s&&(p=parseInt(u[6]+u[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),o="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var a=r[1],c="rgb"===a,u=a.replace(/a$/,"");o=u,s="cmyk"===u?4:"gray"===u?1:3,n=r[2].trim().split(/\s*,\s*/).map(function(v,f){if(/%$/.test(v))return f===s?parseFloat(v)/100:"rgb"===u?255*parseFloat(v)/100:parseFloat(v);if("h"===u[f]){if(/deg$/.test(v))return parseFloat(v);if(void 0!==e[v])return e[v]}return parseFloat(v)}),a===u&&n.push(1),p=c||void 0===n[s]?1:n[s],n=n.slice(0,s)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(n=i.match(/([0-9]+)/g).map(function(v){return parseFloat(v)}),o=i.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(i))if(_(i)){var h=t(i.r,i.red,i.R,null);null!==h?(o="rgb",n=[h,t(i.g,i.green,i.G),t(i.b,i.blue,i.B)]):(o="hsl",n=[t(i.h,i.hue,i.H),t(i.s,i.saturation,i.S),t(i.l,i.lightness,i.L,i.b,i.brightness)]),p=t(i.a,i.alpha,i.opacity,1),null!=i.opacity&&(p/=100)}else(Array.isArray(i)||d.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(n=[i[0],i[1],i[2]],o="rgb",p=4===i.length?i[3]:1);else o="rgb",n=[i>>>16,(65280&i)>>>8,255&i];return{space:o,values:n,alpha:p}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(y,$,ee){"use strict";var d=y("color-parse"),g=y("color-space/hsl"),_=y("clamp");$.exports=function(t){var e,i=d(t);return i.space?((e=Array(3))[0]=_(i.values[0],0,255),e[1]=_(i.values[1],0,255),e[2]=_(i.values[2],0,255),"h"===i.space[0]&&(e=g.rgb(e)),e.push(_(i.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(y,$,ee){"use strict";var d=y("./rgb");$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(g){var _,t,e,i,r,o=g[0]/360,n=g[1]/100,p=g[2]/100;if(0===n)return[r=255*p,r,r];_=2*p-(t=p<.5?p*(1+n):p+n-p*n),i=[0,0,0];for(var s=0;s<3;s++)(e=o+1/3*-(s-1))<0?e++:e>1&&e--,i[s]=255*(r=6*e<1?_+6*(t-_)*e:2*e<1?t:3*e<2?_+(t-_)*(2/3-e)*6:_);return i}},d.hsl=function(g){var _,t,e=g[0]/255,i=g[1]/255,r=g[2]/255,o=Math.min(e,i,r),n=Math.max(e,i,r),p=n-o;return n===o?_=0:e===n?_=(i-r)/p:i===n?_=2+(r-e)/p:r===n&&(_=4+(e-i)/p),(_=Math.min(60*_,360))<0&&(_+=360),t=(o+n)/2,[_,100*(n===o?0:t<=.5?p/(n+o):p/(2-n-o)),100*t]}},{"./rgb":93}],93:[function(y,$,ee){"use strict";$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(y,$,ee){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(y,$,ee){$.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(y,$,ee){$.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(y,$,ee){$.exports=["normal","italic","oblique"]},{}],98:[function(y,$,ee){$.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(y,$,ee){"use strict";$.exports={parse:y("./parse"),stringify:y("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(y,$,ee){"use strict";var d=y("css-font-size-keywords");$.exports={isSize:function(g){return/^[\d\.]/.test(g)||-1!==g.indexOf("/")||-1!==d.indexOf(g)}}},{"css-font-size-keywords":95}],101:[function(y,$,ee){"use strict";var d=y("unquote"),g=y("css-global-keywords"),_=y("css-system-font-keywords"),t=y("css-font-weight-keywords"),e=y("css-font-style-keywords"),i=y("css-font-stretch-keywords"),r=y("string-split-by"),o=y("./lib/util").isSize;$.exports=p;var n=p.cache={};function p(a){if("string"!=typeof a)throw new Error("Font argument must be a string.");if(n[a])return n[a];if(""===a)throw new Error("Cannot parse an empty string.");if(-1!==_.indexOf(a))return n[a]={system:a};for(var c,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=r(a,/\s+/);c=h.shift();){if(-1!==g.indexOf(c))return["style","variant","weight","stretch"].forEach(function(f){u[f]=c}),n[a]=u;if(-1===e.indexOf(c))if("normal"!==c&&"small-caps"!==c)if(-1===i.indexOf(c)){if(-1===t.indexOf(c)){if(o(c)){var v=r(c,"/");if(u.size=v[0],null!=v[1]?u.lineHeight=s(v[1]):"/"===h[0]&&(h.shift(),u.lineHeight=s(h.shift())),!h.length)throw new Error("Missing required font-family.");return u.family=r(h.join(" "),/\s*,\s*/).map(d),n[a]=u}throw new Error("Unknown or unsupported font token: "+c)}u.weight=c}else u.stretch=c;else u.variant=c;else u.style=c}throw new Error("Missing required font-size.")}function s(a){var c=parseFloat(a);return c.toString()===a?c:a}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(y,$,ee){"use strict";var d=y("pick-by-alias"),g=y("./lib/util").isSize,_=c(y("css-global-keywords")),t=c(y("css-system-font-keywords")),e=c(y("css-font-weight-keywords")),i=c(y("css-font-style-keywords")),r=c(y("css-font-stretch-keywords")),o={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},s="serif";function a(u,h){if(u&&!h[u]&&!_[u])throw Error("Unknown keyword `"+u+"`");return u}function c(u){for(var h={},v=0;v<u.length;v++)h[u[v]]=1;return h}$.exports=function(u){if((u=d(u,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return u.system&&a(u.system,t),u.system;if(a(u.style,i),a(u.variant,o),a(u.weight,e),a(u.stretch,r),null==u.size&&(u.size="1rem"),"number"==typeof u.size&&(u.size+="px"),!g)throw Error("Bad size value `"+u.size+"`");u.family||(u.family=s),Array.isArray(u.family)&&(u.family.length||(u.family=[s]),u.family=u.family.map(function(v){return n[v]?v:'"'+v+'"'}).join(", "));var h=[];return h.push(u.style),u.variant!==u.style&&h.push(u.variant),u.weight!==u.variant&&u.weight!==u.style&&h.push(u.weight),u.stretch!==u.weight&&u.stretch!==u.variant&&u.stretch!==u.style&&h.push(u.stretch),h.push(u.size+(null==u.lineHeight||"normal"===u.lineHeight||u.lineHeight+""=="1"?"":"/"+u.lineHeight)),h.push(u.family),h.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(y,$,ee){$.exports=["inherit","initial","unset"]},{}],104:[function(y,$,ee){$.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(y,$,ee){"use strict";var d,g=y("type/value/is"),_=y("type/value/ensure"),t=y("type/plain-function/ensure"),e=y("es5-ext/object/copy"),i=y("es5-ext/object/normalize-options"),r=y("es5-ext/object/map"),o=Function.prototype.bind,n=Object.defineProperty,p=Object.prototype.hasOwnProperty;d=function(s,a,c){var u,h=_(a)&&t(a.value);return delete(u=e(a)).writable,delete u.value,u.get=function(){return!c.overwriteDefinition&&p.call(this,s)?h:(a.value=o.call(h,c.resolveContext?c.resolveContext(this):this),n(this,s,a),this[s])},u},$.exports=function(s){var a=i(arguments[1]);return g(a.resolveContext)&&t(a.resolveContext),r(s,function(c,u){return d(u,c,a)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(y,$,ee){"use strict";var d=y("type/value/is"),g=y("type/plain-function/is"),_=y("es5-ext/object/assign"),t=y("es5-ext/object/normalize-options"),e=y("es5-ext/string/#/contains");($.exports=function(i,r){var o,n,p,s,a;return arguments.length<2||"string"!=typeof i?(s=r,r=i,i=null):s=arguments[2],d(i)?(o=e.call(i,"c"),n=e.call(i,"e"),p=e.call(i,"w")):(o=p=!0,n=!1),a={value:r,configurable:o,enumerable:n,writable:p},s?_(t(s),a):a}).gs=function(i,r,o){var n,p,s,a;return"string"!=typeof i?(s=o,o=r,r=i,i=null):s=arguments[3],d(r)?g(r)?d(o)?g(o)||(s=o,o=void 0):o=void 0:(s=r,r=o=void 0):r=void 0,d(i)?(n=e.call(i,"c"),p=e.call(i,"e")):(n=!0,p=!1),a={get:r,set:o,configurable:n,enumerable:p},s?_(t(s),a):a}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(y,$,ee){(function(d){"use strict";function g(D,S){return D<S?-1:D>S?1:D>=S?0:NaN}function _(D){var S;return 1===D.length&&(S=D,D=function(C,R){return g(S(C),R)}),{left:function(C,R,F,H){for(null==F&&(F=0),null==H&&(H=C.length);F<H;){var U=F+H>>>1;D(C[U],R)<0?F=U+1:H=U}return F},right:function(C,R,F,H){for(null==F&&(F=0),null==H&&(H=C.length);F<H;){var U=F+H>>>1;D(C[U],R)>0?H=U:F=U+1}return F}}}var t=_(g),e=t.right,i=t.left;function r(D,S){return[D,S]}function o(D){return null===D?NaN:+D}function n(D,S){var C,R,F=D.length,H=0,U=-1,X=0,Z=0;if(null==S)for(;++U<F;)isNaN(C=o(D[U]))||(Z+=(R=C-X)*(C-(X+=R/++H)));else for(;++U<F;)isNaN(C=o(S(D[U],U,D)))||(Z+=(R=C-X)*(C-(X+=R/++H)));if(H>1)return Z/(H-1)}function p(D,S){var C=n(D,S);return C&&Math.sqrt(C)}function s(D,S){var C,R,F,H=D.length,U=-1;if(null==S){for(;++U<H;)if(null!=(C=D[U])&&C>=C)for(R=F=C;++U<H;)null!=(C=D[U])&&(R>C&&(R=C),F<C&&(F=C))}else for(;++U<H;)if(null!=(C=S(D[U],U,D))&&C>=C)for(R=F=C;++U<H;)null!=(C=S(D[U],U,D))&&(R>C&&(R=C),F<C&&(F=C));return[R,F]}var a=Array.prototype,c=a.slice,u=a.map;function h(D){return function(){return D}}function v(D){return D}function f(D,S,C){D=+D,S=+S,C=(F=arguments.length)<2?(S=D,D=0,1):F<3?1:+C;for(var R=-1,F=0|Math.max(0,Math.ceil((S-D)/C)),H=new Array(F);++R<F;)H[R]=D+R*C;return H}var l=Math.sqrt(50),x=Math.sqrt(10),m=Math.sqrt(2);function w(D,S,C){var R=(S-D)/Math.max(0,C),F=Math.floor(Math.log(R)/Math.LN10),H=R/Math.pow(10,F);return F>=0?(H>=l?10:H>=x?5:H>=m?2:1)*Math.pow(10,F):-Math.pow(10,-F)/(H>=l?10:H>=x?5:H>=m?2:1)}function b(D,S,C){var R=Math.abs(S-D)/Math.max(0,C),F=Math.pow(10,Math.floor(Math.log(R)/Math.LN10)),H=R/F;return H>=l?F*=10:H>=x?F*=5:H>=m&&(F*=2),S<D?-F:F}function k(D){return Math.ceil(Math.log(D.length)/Math.LN2)+1}function T(D,S,C){if(null==C&&(C=o),R=D.length){if((S=+S)<=0||R<2)return+C(D[0],0,D);if(S>=1)return+C(D[R-1],R-1,D);var R,F=(R-1)*S,H=Math.floor(F),U=+C(D[H],H,D);return U+(+C(D[H+1],H+1,D)-U)*(F-H)}}function L(D,S){var C,R,F=D.length,H=-1;if(null==S){for(;++H<F;)if(null!=(C=D[H])&&C>=C)for(R=C;++H<F;)null!=(C=D[H])&&R>C&&(R=C)}else for(;++H<F;)if(null!=(C=S(D[H],H,D))&&C>=C)for(R=C;++H<F;)null!=(C=S(D[H],H,D))&&R>C&&(R=C);return R}function A(D){if(!(F=D.length))return[];for(var S=-1,C=L(D,I),R=new Array(C);++S<C;)for(var F,H=-1,U=R[S]=new Array(F);++H<F;)U[H]=D[H][S];return R}function I(D){return D.length}d.bisect=e,d.bisectRight=e,d.bisectLeft=i,d.ascending=g,d.bisector=_,d.cross=function(D,S,C){var R,F,H,U,X=D.length,Z=S.length,Y=new Array(X*Z);for(null==C&&(C=r),R=H=0;R<X;++R)for(U=D[R],F=0;F<Z;++F,++H)Y[H]=C(U,S[F]);return Y},d.descending=function(D,S){return S<D?-1:S>D?1:S>=D?0:NaN},d.deviation=p,d.extent=s,d.histogram=function(){var D=v,S=s,C=k;function R(F){var H,U,X=F.length,Z=new Array(X);for(H=0;H<X;++H)Z[H]=D(F[H],H,F);var Y=S(Z),W=Y[0],te=Y[1],z=C(Z,W,te);Array.isArray(z)||(z=b(W,te,z),z=f(Math.ceil(W/z)*z,te,z));for(var N=z.length;z[0]<=W;)z.shift(),--N;for(;z[N-1]>te;)z.pop(),--N;var V,Q=new Array(N+1);for(H=0;H<=N;++H)(V=Q[H]=[]).x0=H>0?z[H-1]:W,V.x1=H<N?z[H]:te;for(H=0;H<X;++H)W<=(U=Z[H])&&U<=te&&Q[e(z,U,0,N)].push(F[H]);return Q}return R.value=function(F){return arguments.length?(D="function"==typeof F?F:h(F),R):D},R.domain=function(F){return arguments.length?(S="function"==typeof F?F:h([F[0],F[1]]),R):S},R.thresholds=function(F){return arguments.length?(C="function"==typeof F?F:Array.isArray(F)?h(c.call(F)):h(F),R):C},R},d.thresholdFreedmanDiaconis=function(D,S,C){return D=u.call(D,o).sort(g),Math.ceil((C-S)/(2*(T(D,.75)-T(D,.25))*Math.pow(D.length,-1/3)))},d.thresholdScott=function(D,S,C){return Math.ceil((C-S)/(3.5*p(D)*Math.pow(D.length,-1/3)))},d.thresholdSturges=k,d.max=function(D,S){var C,R,F=D.length,H=-1;if(null==S){for(;++H<F;)if(null!=(C=D[H])&&C>=C)for(R=C;++H<F;)null!=(C=D[H])&&C>R&&(R=C)}else for(;++H<F;)if(null!=(C=S(D[H],H,D))&&C>=C)for(R=C;++H<F;)null!=(C=S(D[H],H,D))&&C>R&&(R=C);return R},d.mean=function(D,S){var C,R=D.length,F=R,H=-1,U=0;if(null==S)for(;++H<R;)isNaN(C=o(D[H]))?--F:U+=C;else for(;++H<R;)isNaN(C=o(S(D[H],H,D)))?--F:U+=C;if(F)return U/F},d.median=function(D,S){var C,R=D.length,F=-1,H=[];if(null==S)for(;++F<R;)isNaN(C=o(D[F]))||H.push(C);else for(;++F<R;)isNaN(C=o(S(D[F],F,D)))||H.push(C);return T(H.sort(g),.5)},d.merge=function(D){for(var S,C,R,F=D.length,H=-1,U=0;++H<F;)U+=D[H].length;for(C=new Array(U);--F>=0;)for(S=(R=D[F]).length;--S>=0;)C[--U]=R[S];return C},d.min=L,d.pairs=function(D,S){null==S&&(S=r);for(var C=0,R=D.length-1,F=D[0],H=new Array(R<0?0:R);C<R;)H[C]=S(F,F=D[++C]);return H},d.permute=function(D,S){for(var C=S.length,R=new Array(C);C--;)R[C]=D[S[C]];return R},d.quantile=T,d.range=f,d.scan=function(D,S){if(C=D.length){var C,R,F=0,H=0,U=D[H];for(null==S&&(S=g);++F<C;)(S(R=D[F],U)<0||0!==S(U,U))&&(U=R,H=F);return 0===S(U,U)?H:void 0}},d.shuffle=function(D,S,C){for(var R,F,H=(null==C?D.length:C)-(S=null==S?0:+S);H;)F=Math.random()*H--|0,R=D[H+S],D[H+S]=D[F+S],D[F+S]=R;return D},d.sum=function(D,S){var C,R=D.length,F=-1,H=0;if(null==S)for(;++F<R;)(C=+D[F])&&(H+=C);else for(;++F<R;)(C=+S(D[F],F,D))&&(H+=C);return H},d.ticks=function(D,S,C){var R,F,H,U,X=-1;if(C=+C,(D=+D)==(S=+S)&&C>0)return[D];if((R=S<D)&&(F=D,D=S,S=F),0===(U=w(D,S,C))||!isFinite(U))return[];if(U>0)for(D=Math.ceil(D/U),S=Math.floor(S/U),H=new Array(F=Math.ceil(S-D+1));++X<F;)H[X]=(D+X)*U;else for(D=Math.floor(D*U),S=Math.ceil(S*U),H=new Array(F=Math.ceil(D-S+1));++X<F;)H[X]=(D-X)/U;return R&&H.reverse(),H},d.tickIncrement=w,d.tickStep=b,d.transpose=A,d.variance=n,d.zip=function(){return A(arguments)},Object.defineProperty(d,"__esModule",{value:!0})})("object"==typeof ee&&void 0!==$?ee:this.d3=this.d3||{})},{}],108:[function(y,$,ee){(function(d){"use strict";function g(){}function _(s,a){var c=new g;if(s instanceof g)s.each(function(l,x){c.set(x,l)});else if(Array.isArray(s)){var u,h=-1,v=s.length;if(null==a)for(;++h<v;)c.set(h,s[h]);else for(;++h<v;)c.set(a(u=s[h],h,s),u)}else if(s)for(var f in s)c.set(f,s[f]);return c}function t(){return{}}function e(s,a,c){s[a]=c}function i(){return _()}function r(s,a,c){s.set(a,c)}function o(){}g.prototype=_.prototype={constructor:g,has:function(s){return"$"+s in this},get:function(s){return this["$"+s]},set:function(s,a){return this["$"+s]=a,this},remove:function(s){var a="$"+s;return a in this&&delete this[a]},clear:function(){for(var s in this)"$"===s[0]&&delete this[s]},keys:function(){var s=[];for(var a in this)"$"===a[0]&&s.push(a.slice(1));return s},values:function(){var s=[];for(var a in this)"$"===a[0]&&s.push(this[a]);return s},entries:function(){var s=[];for(var a in this)"$"===a[0]&&s.push({key:a.slice(1),value:this[a]});return s},size:function(){var s=0;for(var a in this)"$"===a[0]&&++s;return s},empty:function(){for(var s in this)if("$"===s[0])return!1;return!0},each:function(s){for(var a in this)"$"===a[0]&&s(this[a],a.slice(1),this)}};var n=_.prototype;function p(s,a){var c=new o;if(s instanceof o)s.each(function(v){c.add(v)});else if(s){var u=-1,h=s.length;if(null==a)for(;++u<h;)c.add(s[u]);else for(;++u<h;)c.add(a(s[u],u,s))}return c}o.prototype=p.prototype={constructor:o,has:n.has,add:function(s){return this["$"+(s+="")]=s,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each},d.nest=function(){var s,a,c,u=[],h=[];function v(f,l,x,m){if(l>=u.length)return null!=s&&f.sort(s),null!=a?a(f):f;for(var w,b,k,T=-1,L=f.length,A=u[l++],I=_(),D=x();++T<L;)(k=I.get(w=A(b=f[T])+""))?k.push(b):I.set(w,[b]);return I.each(function(S,C){m(D,C,v(S,l,x,m))}),D}return c={object:function(f){return v(f,0,t,e)},map:function(f){return v(f,0,i,r)},entries:function(f){return function l(x,m){if(++m>u.length)return x;var w,b=h[m-1];return null!=a&&m>=u.length?w=x.entries():(w=[],x.each(function(k,T){w.push({key:T,values:l(k,m)})})),null!=b?w.sort(function(k,T){return b(k.key,T.key)}):w}(v(f,0,i,r),0)},key:function(f){return u.push(f),c},sortKeys:function(f){return h[u.length-1]=f,c},sortValues:function(f){return s=f,c},rollup:function(f){return a=f,c}}},d.set=p,d.map=_,d.keys=function(s){var a=[];for(var c in s)a.push(c);return a},d.values=function(s){var a=[];for(var c in s)a.push(s[c]);return a},d.entries=function(s){var a=[];for(var c in s)a.push({key:c,value:s[c]});return a},Object.defineProperty(d,"__esModule",{value:!0})})("object"==typeof ee&&void 0!==$?ee:this.d3=this.d3||{})},{}],109:[function(y,$,ee){var d;d=this,function(d){"use strict";function g(fe,ve,Me){fe.prototype=ve.prototype=Me,Me.constructor=fe}function _(fe,ve){var Me=Object.create(fe.prototype);for(var ke in ve)Me[ke]=ve[ke];return Me}function t(){}var e="\\s*([+-]?\\d+)\\s*",i="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),p=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),s=new RegExp("^rgba\\("+[e,e,e,i]+"\\)$"),a=new RegExp("^rgba\\("+[r,r,r,i]+"\\)$"),c=new RegExp("^hsl\\("+[i,r,r]+"\\)$"),u=new RegExp("^hsla\\("+[i,r,r,i]+"\\)$"),h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function f(){return this.rgb().formatRgb()}function l(fe){var ve,Me;return fe=(fe+"").trim().toLowerCase(),(ve=o.exec(fe))?(Me=ve[1].length,ve=parseInt(ve[1],16),6===Me?x(ve):3===Me?new k(ve>>8&15|ve>>4&240,ve>>4&15|240&ve,(15&ve)<<4|15&ve,1):8===Me?m(ve>>24&255,ve>>16&255,ve>>8&255,(255&ve)/255):4===Me?m(ve>>12&15|ve>>8&240,ve>>8&15|ve>>4&240,ve>>4&15|240&ve,((15&ve)<<4|15&ve)/255):null):(ve=n.exec(fe))?new k(ve[1],ve[2],ve[3],1):(ve=p.exec(fe))?new k(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,1):(ve=s.exec(fe))?m(ve[1],ve[2],ve[3],ve[4]):(ve=a.exec(fe))?m(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,ve[4]):(ve=c.exec(fe))?I(ve[1],ve[2]/100,ve[3]/100,1):(ve=u.exec(fe))?I(ve[1],ve[2]/100,ve[3]/100,ve[4]):h.hasOwnProperty(fe)?x(h[fe]):"transparent"===fe?new k(NaN,NaN,NaN,0):null}function x(fe){return new k(fe>>16&255,fe>>8&255,255&fe,1)}function m(fe,ve,Me,ke){return ke<=0&&(fe=ve=Me=NaN),new k(fe,ve,Me,ke)}function w(fe){return fe instanceof t||(fe=l(fe)),fe?new k((fe=fe.rgb()).r,fe.g,fe.b,fe.opacity):new k}function b(fe,ve,Me,ke){return 1===arguments.length?w(fe):new k(fe,ve,Me,null==ke?1:ke)}function k(fe,ve,Me,ke){this.r=+fe,this.g=+ve,this.b=+Me,this.opacity=+ke}function T(){return"#"+A(this.r)+A(this.g)+A(this.b)}function L(){var fe=this.opacity;return(1===(fe=isNaN(fe)?1:Math.max(0,Math.min(1,fe)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===fe?")":", "+fe+")")}function A(fe){return((fe=Math.max(0,Math.min(255,Math.round(fe)||0)))<16?"0":"")+fe.toString(16)}function I(fe,ve,Me,ke){return ke<=0?fe=ve=Me=NaN:Me<=0||Me>=1?fe=ve=NaN:ve<=0&&(fe=NaN),new C(fe,ve,Me,ke)}function D(fe){if(fe instanceof C)return new C(fe.h,fe.s,fe.l,fe.opacity);if(fe instanceof t||(fe=l(fe)),!fe)return new C;if(fe instanceof C)return fe;var ve=(fe=fe.rgb()).r/255,Me=fe.g/255,ke=fe.b/255,Ce=Math.min(ve,Me,ke),Pe=Math.max(ve,Me,ke),Fe=NaN,qe=Pe-Ce,rt=(Pe+Ce)/2;return qe?(Fe=ve===Pe?(Me-ke)/qe+6*(Me<ke):Me===Pe?(ke-ve)/qe+2:(ve-Me)/qe+4,qe/=rt<.5?Pe+Ce:2-Pe-Ce,Fe*=60):qe=rt>0&&rt<1?0:Fe,new C(Fe,qe,rt,fe.opacity)}function S(fe,ve,Me,ke){return 1===arguments.length?D(fe):new C(fe,ve,Me,null==ke?1:ke)}function C(fe,ve,Me,ke){this.h=+fe,this.s=+ve,this.l=+Me,this.opacity=+ke}function R(fe,ve,Me){return 255*(fe<60?ve+(Me-ve)*fe/60:fe<180?Me:fe<240?ve+(Me-ve)*(240-fe)/60:ve)}g(t,l,{copy:function(fe){return Object.assign(new this.constructor,this,fe)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:function(){return D(this).formatHsl()},formatRgb:f,toString:f}),g(k,b,_(t,{brighter:function(fe){return fe=null==fe?1/.7:Math.pow(1/.7,fe),new k(this.r*fe,this.g*fe,this.b*fe,this.opacity)},darker:function(fe){return fe=null==fe?.7:Math.pow(.7,fe),new k(this.r*fe,this.g*fe,this.b*fe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:L,toString:L})),g(C,S,_(t,{brighter:function(fe){return fe=null==fe?1/.7:Math.pow(1/.7,fe),new C(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=null==fe?.7:Math.pow(.7,fe),new C(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=this.h%360+360*(this.h<0),ve=isNaN(fe)||isNaN(this.s)?0:this.s,Me=this.l,ke=Me+(Me<.5?Me:1-Me)*ve,Ce=2*Me-ke;return new k(R(fe>=240?fe-240:fe+120,Ce,ke),R(fe,Ce,ke),R(fe<120?fe+240:fe-120,Ce,ke),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var fe=this.opacity;return(1===(fe=isNaN(fe)?1:Math.max(0,Math.min(1,fe)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===fe?")":", "+fe+")")}}));var F=Math.PI/180,H=180/Math.PI,U=6/29,X=3*U*U;function Z(fe){if(fe instanceof W)return new W(fe.l,fe.a,fe.b,fe.opacity);if(fe instanceof J)return K(fe);fe instanceof k||(fe=w(fe));var ve,Me,ke=V(fe.r),Ce=V(fe.g),Pe=V(fe.b),Fe=te((.2225045*ke+.7168786*Ce+.0606169*Pe)/1);return ke===Ce&&Ce===Pe?ve=Me=Fe:(ve=te((.4360747*ke+.3850649*Ce+.1430804*Pe)/.96422),Me=te((.0139322*ke+.0971045*Ce+.7141733*Pe)/.82521)),new W(116*Fe-16,500*(ve-Fe),200*(Fe-Me),fe.opacity)}function Y(fe,ve,Me,ke){return 1===arguments.length?Z(fe):new W(fe,ve,Me,null==ke?1:ke)}function W(fe,ve,Me,ke){this.l=+fe,this.a=+ve,this.b=+Me,this.opacity=+ke}function te(fe){return fe>.008856451679035631?Math.pow(fe,1/3):fe/X+4/29}function z(fe){return fe>U?fe*fe*fe:X*(fe-4/29)}function N(fe){return 255*(fe<=.0031308?12.92*fe:1.055*Math.pow(fe,1/2.4)-.055)}function V(fe){return(fe/=255)<=.04045?fe/12.92:Math.pow((fe+.055)/1.055,2.4)}function Q(fe){if(fe instanceof J)return new J(fe.h,fe.c,fe.l,fe.opacity);if(fe instanceof W||(fe=Z(fe)),0===fe.a&&0===fe.b)return new J(NaN,0<fe.l&&fe.l<100?0:NaN,fe.l,fe.opacity);var ve=Math.atan2(fe.b,fe.a)*H;return new J(ve<0?ve+360:ve,Math.sqrt(fe.a*fe.a+fe.b*fe.b),fe.l,fe.opacity)}function j(fe,ve,Me,ke){return 1===arguments.length?Q(fe):new J(fe,ve,Me,null==ke?1:ke)}function J(fe,ve,Me,ke){this.h=+fe,this.c=+ve,this.l=+Me,this.opacity=+ke}function K(fe){if(isNaN(fe.h))return new W(fe.l,0,0,fe.opacity);var ve=fe.h*F;return new W(fe.l,Math.cos(ve)*fe.c,Math.sin(ve)*fe.c,fe.opacity)}g(W,Y,_(t,{brighter:function(fe){return new W(this.l+18*(null==fe?1:fe),this.a,this.b,this.opacity)},darker:function(fe){return new W(this.l-18*(null==fe?1:fe),this.a,this.b,this.opacity)},rgb:function(){var fe=(this.l+16)/116,ve=isNaN(this.a)?fe:fe+this.a/500,Me=isNaN(this.b)?fe:fe-this.b/200;return new k(N(3.1338561*(ve=.96422*z(ve))-1.6168667*(fe=1*z(fe))-.4906146*(Me=.82521*z(Me))),N(-.9787684*ve+1.9161415*fe+.033454*Me),N(.0719453*ve-.2289914*fe+1.4052427*Me),this.opacity)}})),g(J,j,_(t,{brighter:function(fe){return new J(this.h,this.c,this.l+18*(null==fe?1:fe),this.opacity)},darker:function(fe){return new J(this.h,this.c,this.l-18*(null==fe?1:fe),this.opacity)},rgb:function(){return K(this).rgb()}}));var ie=1.78277,ce=-.29227,se=-.90649,de=1.97294,ue=de*se,ge=de*ie,be=ie*ce- -.14861*se;function Te(fe){if(fe instanceof Le)return new Le(fe.h,fe.s,fe.l,fe.opacity);fe instanceof k||(fe=w(fe));var Me=fe.g/255,ke=fe.b/255,Ce=(be*ke+ue*(fe.r/255)-ge*Me)/(be+ue-ge),Pe=ke-Ce,Fe=(de*(Me-Ce)-ce*Pe)/se,qe=Math.sqrt(Fe*Fe+Pe*Pe)/(de*Ce*(1-Ce)),rt=qe?Math.atan2(Fe,Pe)*H-120:NaN;return new Le(rt<0?rt+360:rt,qe,Ce,fe.opacity)}function we(fe,ve,Me,ke){return 1===arguments.length?Te(fe):new Le(fe,ve,Me,null==ke?1:ke)}function Le(fe,ve,Me,ke){this.h=+fe,this.s=+ve,this.l=+Me,this.opacity=+ke}g(Le,we,_(t,{brighter:function(fe){return fe=null==fe?1/.7:Math.pow(1/.7,fe),new Le(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=null==fe?.7:Math.pow(.7,fe),new Le(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=isNaN(this.h)?0:(this.h+120)*F,ve=+this.l,Me=isNaN(this.s)?0:this.s*ve*(1-ve),ke=Math.cos(fe),Ce=Math.sin(fe);return new k(255*(ve+Me*(-.14861*ke+ie*Ce)),255*(ve+Me*(ce*ke+se*Ce)),255*(ve+Me*(de*ke)),this.opacity)}})),d.color=l,d.cubehelix=we,d.gray=function(fe,ve){return new W(fe,0,0,null==ve?1:ve)},d.hcl=j,d.hsl=S,d.lab=Y,d.lch=function(fe,ve,Me,ke){return 1===arguments.length?Q(fe):new J(Me,ve,fe,null==ke?1:ke)},d.rgb=b,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).d3=d.d3||{})},{}],110:[function(y,$,ee){var d;d=this,function(d){"use strict";var g={value:function(){}};function _(){for(var o,n=0,p=arguments.length,s={};n<p;++n){if(!(o=arguments[n]+"")||o in s||/[\s.]/.test(o))throw new Error("illegal type: "+o);s[o]=[]}return new t(s)}function t(o){this._=o}function e(o,n){return o.trim().split(/^|\s+/).map(function(p){var s="",a=p.indexOf(".");if(a>=0&&(s=p.slice(a+1),p=p.slice(0,a)),p&&!n.hasOwnProperty(p))throw new Error("unknown type: "+p);return{type:p,name:s}})}function i(o,n){for(var p,s=0,a=o.length;s<a;++s)if((p=o[s]).name===n)return p.value}function r(o,n,p){for(var s=0,a=o.length;s<a;++s)if(o[s].name===n){o[s]=g,o=o.slice(0,s).concat(o.slice(s+1));break}return null!=p&&o.push({name:n,value:p}),o}t.prototype=_.prototype={constructor:t,on:function(o,n){var p,s=this._,a=e(o+"",s),c=-1,u=a.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++c<u;)if(p=(o=a[c]).type)s[p]=r(s[p],o.name,n);else if(null==n)for(p in s)s[p]=r(s[p],o.name,null);return this}for(;++c<u;)if((p=(o=a[c]).type)&&(p=i(s[p],o.name)))return p},copy:function(){var o={},n=this._;for(var p in n)o[p]=n[p].slice();return new t(o)},call:function(o,n){if((p=arguments.length-2)>0)for(var p,s,a=new Array(p),c=0;c<p;++c)a[c]=arguments[c+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(c=0,p=(s=this._[o]).length;c<p;++c)s[c].value.apply(n,a)},apply:function(o,n,p){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var s=this._[o],a=0,c=s.length;a<c;++a)s[a].value.apply(n,p)}},d.dispatch=_,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).d3=d.d3||{})},{}],111:[function(y,$,ee){var d,g;d=this,g=function(d,g,_,t,e){"use strict";function i(h){return function(){return h}}function r(){return 1e-6*(Math.random()-.5)}function o(h){return h.x+h.vx}function n(h){return h.y+h.vy}function p(h){return h.index}function s(h,v){var f=h.get(v);if(!f)throw new Error("missing: "+v);return f}function a(h){return h.x}function c(h){return h.y}var u=Math.PI*(3-Math.sqrt(5));d.forceCenter=function(h,v){var f;function l(){var x,m,w=f.length,b=0,k=0;for(x=0;x<w;++x)b+=(m=f[x]).x,k+=m.y;for(b=b/w-h,k=k/w-v,x=0;x<w;++x)(m=f[x]).x-=b,m.y-=k}return null==h&&(h=0),null==v&&(v=0),l.initialize=function(x){f=x},l.x=function(x){return arguments.length?(h=+x,l):h},l.y=function(x){return arguments.length?(v=+x,l):v},l},d.forceCollide=function(h){var v,f,l=1,x=1;function m(){for(var k,T,L,A,I,D,S,C=v.length,R=0;R<x;++R)for(T=g.quadtree(v,o,n).visitAfter(w),k=0;k<C;++k)S=(D=f[(L=v[k]).index])*D,A=L.x+L.vx,I=L.y+L.vy,T.visit(F);function F(H,U,X,Z,Y){var W=H.data,te=H.r,z=D+te;if(!W)return U>A+z||Z<A-z||X>I+z||Y<I-z;if(W.index>L.index){var N=A-W.x-W.vx,V=I-W.y-W.vy,Q=N*N+V*V;Q<z*z&&(0===N&&(Q+=(N=r())*N),0===V&&(Q+=(V=r())*V),Q=(z-(Q=Math.sqrt(Q)))/Q*l,L.vx+=(N*=Q)*(z=(te*=te)/(S+te)),L.vy+=(V*=Q)*z,W.vx-=N*(z=1-z),W.vy-=V*z)}}}function w(k){if(k.data)return k.r=f[k.data.index];for(var T=k.r=0;T<4;++T)k[T]&&k[T].r>k.r&&(k.r=k[T].r)}function b(){if(v){var k,T,L=v.length;for(f=new Array(L),k=0;k<L;++k)f[(T=v[k]).index]=+h(T,k,v)}}return"function"!=typeof h&&(h=i(null==h?1:+h)),m.initialize=function(k){v=k,b()},m.iterations=function(k){return arguments.length?(x=+k,m):x},m.strength=function(k){return arguments.length?(l=+k,m):l},m.radius=function(k){return arguments.length?(h="function"==typeof k?k:i(+k),b(),m):h},m},d.forceLink=function(h){var v,f,l,x,m,w=p,b=function(S){return 1/Math.min(x[S.source.index],x[S.target.index])},k=i(30),T=1;function L(S){for(var C=0,R=h.length;C<T;++C)for(var F,H,U,X,Z,Y,W,te=0;te<R;++te)H=(F=h[te]).source,X=(U=F.target).x+U.vx-H.x-H.vx||r(),Z=U.y+U.vy-H.y-H.vy||r(),X*=Y=((Y=Math.sqrt(X*X+Z*Z))-f[te])/Y*S*v[te],Z*=Y,U.vx-=X*(W=m[te]),U.vy-=Z*W,H.vx+=X*(W=1-W),H.vy+=Z*W}function A(){if(l){var S,C,R=l.length,F=h.length,H=_.map(l,w);for(S=0,x=new Array(R);S<F;++S)(C=h[S]).index=S,"object"!=typeof C.source&&(C.source=s(H,C.source)),"object"!=typeof C.target&&(C.target=s(H,C.target)),x[C.source.index]=(x[C.source.index]||0)+1,x[C.target.index]=(x[C.target.index]||0)+1;for(S=0,m=new Array(F);S<F;++S)m[S]=x[(C=h[S]).source.index]/(x[C.source.index]+x[C.target.index]);v=new Array(F),I(),f=new Array(F),D()}}function I(){if(l)for(var S=0,C=h.length;S<C;++S)v[S]=+b(h[S],S,h)}function D(){if(l)for(var S=0,C=h.length;S<C;++S)f[S]=+k(h[S],S,h)}return null==h&&(h=[]),L.initialize=function(S){l=S,A()},L.links=function(S){return arguments.length?(h=S,A(),L):h},L.id=function(S){return arguments.length?(w=S,L):w},L.iterations=function(S){return arguments.length?(T=+S,L):T},L.strength=function(S){return arguments.length?(b="function"==typeof S?S:i(+S),I(),L):b},L.distance=function(S){return arguments.length?(k="function"==typeof S?S:i(+S),D(),L):k},L},d.forceManyBody=function(){var h,v,f,l,x=i(-30),m=1,w=1/0,b=.81;function k(I){var D,S=h.length,C=g.quadtree(h,a,c).visitAfter(L);for(f=I,D=0;D<S;++D)v=h[D],C.visit(A)}function T(){if(h){var I,D,S=h.length;for(l=new Array(S),I=0;I<S;++I)l[(D=h[I]).index]=+x(D,I,h)}}function L(I){var D,S,C,R,F,H=0,U=0;if(I.length){for(C=R=F=0;F<4;++F)(D=I[F])&&(S=Math.abs(D.value))&&(H+=D.value,U+=S,C+=S*D.x,R+=S*D.y);I.x=C/U,I.y=R/U}else{(D=I).x=D.data.x,D.y=D.data.y;do{H+=l[D.data.index]}while(D=D.next)}I.value=H}function A(I,D,S,C){if(!I.value)return!0;var R=I.x-v.x,F=I.y-v.y,H=C-D,U=R*R+F*F;if(H*H/b<U)return U<w&&(0===R&&(U+=(R=r())*R),0===F&&(U+=(F=r())*F),U<m&&(U=Math.sqrt(m*U)),v.vx+=R*I.value*f/U,v.vy+=F*I.value*f/U),!0;if(!(I.length||U>=w)){(I.data!==v||I.next)&&(0===R&&(U+=(R=r())*R),0===F&&(U+=(F=r())*F),U<m&&(U=Math.sqrt(m*U)));do{I.data!==v&&(v.vx+=R*(H=l[I.data.index]*f/U),v.vy+=F*H)}while(I=I.next)}}return k.initialize=function(I){h=I,T()},k.strength=function(I){return arguments.length?(x="function"==typeof I?I:i(+I),T(),k):x},k.distanceMin=function(I){return arguments.length?(m=I*I,k):Math.sqrt(m)},k.distanceMax=function(I){return arguments.length?(w=I*I,k):Math.sqrt(w)},k.theta=function(I){return arguments.length?(b=I*I,k):Math.sqrt(b)},k},d.forceRadial=function(h,v,f){var l,x,m,w=i(.1);function b(T){for(var L=0,A=l.length;L<A;++L){var I=l[L],D=I.x-v||1e-6,S=I.y-f||1e-6,C=Math.sqrt(D*D+S*S),R=(m[L]-C)*x[L]*T/C;I.vx+=D*R,I.vy+=S*R}}function k(){if(l){var T,L=l.length;for(x=new Array(L),m=new Array(L),T=0;T<L;++T)m[T]=+h(l[T],T,l),x[T]=isNaN(m[T])?0:+w(l[T],T,l)}}return"function"!=typeof h&&(h=i(+h)),null==v&&(v=0),null==f&&(f=0),b.initialize=function(T){l=T,k()},b.strength=function(T){return arguments.length?(w="function"==typeof T?T:i(+T),k(),b):w},b.radius=function(T){return arguments.length?(h="function"==typeof T?T:i(+T),k(),b):h},b.x=function(T){return arguments.length?(v=+T,b):v},b.y=function(T){return arguments.length?(f=+T,b):f},b},d.forceSimulation=function(h){var v,f=1,l=.001,x=1-Math.pow(l,1/300),m=0,w=.6,b=_.map(),k=e.timer(L),T=t.dispatch("tick","end");function L(){A(),T.call("tick",v),f<l&&(k.stop(),T.call("end",v))}function A(S){var C,R,F=h.length;void 0===S&&(S=1);for(var H=0;H<S;++H)for(f+=(m-f)*x,b.each(function(U){U(f)}),C=0;C<F;++C)null==(R=h[C]).fx?R.x+=R.vx*=w:(R.x=R.fx,R.vx=0),null==R.fy?R.y+=R.vy*=w:(R.y=R.fy,R.vy=0);return v}function I(){for(var S,C=0,R=h.length;C<R;++C){if((S=h[C]).index=C,null!=S.fx&&(S.x=S.fx),null!=S.fy&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var F=10*Math.sqrt(C),H=C*u;S.x=F*Math.cos(H),S.y=F*Math.sin(H)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function D(S){return S.initialize&&S.initialize(h),S}return null==h&&(h=[]),I(),v={tick:A,restart:function(){return k.restart(L),v},stop:function(){return k.stop(),v},nodes:function(S){return arguments.length?(h=S,I(),b.each(D),v):h},alpha:function(S){return arguments.length?(f=+S,v):f},alphaMin:function(S){return arguments.length?(l=+S,v):l},alphaDecay:function(S){return arguments.length?(x=+S,v):+x},alphaTarget:function(S){return arguments.length?(m=+S,v):m},velocityDecay:function(S){return arguments.length?(w=1-S,v):1-w},force:function(S,C){return arguments.length>1?(null==C?b.remove(S):b.set(S,D(C)),v):b.get(S)},find:function(S,C,R){var F,H,U,X,Z,Y=0,W=h.length;for(null==R?R=1/0:R*=R,Y=0;Y<W;++Y)(U=(F=S-(X=h[Y]).x)*F+(H=C-X.y)*H)<R&&(Z=X,R=U);return Z},on:function(S,C){return arguments.length>1?(T.on(S,C),v):T.on(S)}}},d.forceX=function(h){var v,f,l,x=i(.1);function m(b){for(var k,T=0,L=v.length;T<L;++T)(k=v[T]).vx+=(l[T]-k.x)*f[T]*b}function w(){if(v){var b,k=v.length;for(f=new Array(k),l=new Array(k),b=0;b<k;++b)f[b]=isNaN(l[b]=+h(v[b],b,v))?0:+x(v[b],b,v)}}return"function"!=typeof h&&(h=i(null==h?0:+h)),m.initialize=function(b){v=b,w()},m.strength=function(b){return arguments.length?(x="function"==typeof b?b:i(+b),w(),m):x},m.x=function(b){return arguments.length?(h="function"==typeof b?b:i(+b),w(),m):h},m},d.forceY=function(h){var v,f,l,x=i(.1);function m(b){for(var k,T=0,L=v.length;T<L;++T)(k=v[T]).vy+=(l[T]-k.y)*f[T]*b}function w(){if(v){var b,k=v.length;for(f=new Array(k),l=new Array(k),b=0;b<k;++b)f[b]=isNaN(l[b]=+h(v[b],b,v))?0:+x(v[b],b,v)}}return"function"!=typeof h&&(h=i(null==h?0:+h)),m.initialize=function(b){v=b,w()},m.strength=function(b){return arguments.length?(x="function"==typeof b?b:i(+b),w(),m):x},m.y=function(b){return arguments.length?(h="function"==typeof b?b:i(+b),w(),m):h},m},Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-quadtree"),y("d3-collection"),y("d3-dispatch"),y("d3-timer")):g(d.d3=d.d3||{},d.d3,d.d3,d.d3,d.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(y,$,ee){var d;d=this,function(d){"use strict";function g(v,f){if((l=(v=f?v.toExponential(f-1):v.toExponential()).indexOf("e"))<0)return null;var l,x=v.slice(0,l);return[x.length>1?x[0]+x.slice(2):x,+v.slice(l+1)]}function _(v){return(v=g(Math.abs(v)))?v[1]:NaN}var t,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(v){if(!(f=e.exec(v)))throw new Error("invalid format: "+v);var f;return new r({fill:f[1],align:f[2],sign:f[3],symbol:f[4],zero:f[5],width:f[6],comma:f[7],precision:f[8]&&f[8].slice(1),trim:f[9],type:f[10]})}function r(v){this.fill=void 0===v.fill?" ":v.fill+"",this.align=void 0===v.align?">":v.align+"",this.sign=void 0===v.sign?"-":v.sign+"",this.symbol=void 0===v.symbol?"":v.symbol+"",this.zero=!!v.zero,this.width=void 0===v.width?void 0:+v.width,this.comma=!!v.comma,this.precision=void 0===v.precision?void 0:+v.precision,this.trim=!!v.trim,this.type=void 0===v.type?"":v.type+""}function o(v,f){var l=g(v,f);if(!l)return v+"";var x=l[0],m=l[1];return m<0?"0."+new Array(-m).join("0")+x:x.length>m+1?x.slice(0,m+1)+"."+x.slice(m+1):x+new Array(m-x.length+2).join("0")}i.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var n={"%":function(v,f){return(100*v).toFixed(f)},b:function(v){return Math.round(v).toString(2)},c:function(v){return v+""},d:function(v){return Math.abs(v=Math.round(v))>=1e21?v.toLocaleString("en").replace(/,/g,""):v.toString(10)},e:function(v,f){return v.toExponential(f)},f:function(v,f){return v.toFixed(f)},g:function(v,f){return v.toPrecision(f)},o:function(v){return Math.round(v).toString(8)},p:function(v,f){return o(100*v,f)},r:o,s:function(v,f){var l=g(v,f);if(!l)return v+"";var x=l[0],m=l[1],w=m-(t=3*Math.max(-8,Math.min(8,Math.floor(m/3))))+1,b=x.length;return w===b?x:w>b?x+new Array(w-b+1).join("0"):w>0?x.slice(0,w)+"."+x.slice(w):"0."+new Array(1-w).join("0")+g(v,Math.max(0,f+w-1))[0]},X:function(v){return Math.round(v).toString(16).toUpperCase()},x:function(v){return Math.round(v).toString(16)}};function p(v){return v}var s,a=Array.prototype.map,c=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function u(v){var f,l,D,x=void 0===v.grouping||void 0===v.thousands?p:(f=a.call(v.grouping,Number),l=v.thousands+"",function(D,S){for(var C=D.length,R=[],F=0,H=f[0],U=0;C>0&&H>0&&(U+H+1>S&&(H=Math.max(1,S-U)),R.push(D.substring(C-=H,C+H)),!((U+=H+1)>S));)H=f[F=(F+1)%f.length];return R.reverse().join(l)}),m=void 0===v.currency?"":v.currency[0]+"",w=void 0===v.currency?"":v.currency[1]+"",b=void 0===v.decimal?".":v.decimal+"",k=void 0===v.numerals?p:(D=a.call(v.numerals,String),function(S){return S.replace(/[0-9]/g,function(C){return D[+C]})}),T=void 0===v.percent?"%":v.percent+"",L=void 0===v.minus?"-":v.minus+"",A=void 0===v.nan?"NaN":v.nan+"";function I(D){var S=(D=i(D)).fill,C=D.align,R=D.sign,F=D.symbol,H=D.zero,U=D.width,X=D.comma,Z=D.precision,Y=D.trim,W=D.type;"n"===W?(X=!0,W="g"):n[W]||(void 0===Z&&(Z=12),Y=!0,W="g"),(H||"0"===S&&"="===C)&&(H=!0,S="0",C="=");var te="$"===F?m:"#"===F&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",z="$"===F?w:/[%p]/.test(W)?T:"",N=n[W],V=/[defgprs%]/.test(W);function Q(j){var J,K,re,ie=te,ce=z;if("c"===W)ce=N(j)+ce,j="";else{var se=(j=+j)<0||1/j<0;if(j=isNaN(j)?A:N(Math.abs(j),Z),Y&&(j=function(ge){e:for(var be,Te=ge.length,we=1,Le=-1;we<Te;++we)switch(ge[we]){case".":Le=be=we;break;case"0":0===Le&&(Le=we),be=we;break;default:if(!+ge[we])break e;Le>0&&(Le=0)}return Le>0?ge.slice(0,Le)+ge.slice(be+1):ge}(j)),se&&0==+j&&"+"!==R&&(se=!1),ie=(se?"("===R?R:L:"-"===R||"("===R?"":R)+ie,ce=("s"===W?c[8+t/3]:"")+ce+(se&&"("===R?")":""),V)for(J=-1,K=j.length;++J<K;)if(48>(re=j.charCodeAt(J))||re>57){ce=(46===re?b+j.slice(J+1):j.slice(J))+ce,j=j.slice(0,J);break}}X&&!H&&(j=x(j,1/0));var de=ie.length+j.length+ce.length,ue=de<U?new Array(U-de+1).join(S):"";switch(X&&H&&(j=x(ue+j,ue.length?U-ce.length:1/0),ue=""),C){case"<":j=ie+j+ce+ue;break;case"=":j=ie+ue+j+ce;break;case"^":j=ue.slice(0,de=ue.length>>1)+ie+j+ce+ue.slice(de);break;default:j=ue+ie+j+ce}return k(j)}return Z=void 0===Z?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,Z)):Math.max(0,Math.min(20,Z)),Q.toString=function(){return D+""},Q}return{format:I,formatPrefix:function(D,S){var C=I(((D=i(D)).type="f",D)),R=3*Math.max(-8,Math.min(8,Math.floor(_(S)/3))),F=Math.pow(10,-R),H=c[8+R/3];return function(U){return C(F*U)+H}}}}function h(v){return s=u(v),d.format=s.format,d.formatPrefix=s.formatPrefix,s}h({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),d.FormatSpecifier=r,d.formatDefaultLocale=h,d.formatLocale=u,d.formatSpecifier=i,d.precisionFixed=function(v){return Math.max(0,-_(Math.abs(v)))},d.precisionPrefix=function(v,f){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_(f)/3)))-_(Math.abs(v)))},d.precisionRound=function(v,f){return v=Math.abs(v),f=Math.abs(f)-v,Math.max(0,_(f)-_(v))+1},Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d="undefined"!=typeof globalThis?globalThis:d||self).d3=d.d3||{})},{}],113:[function(y,$,ee){var d,g;d=this,g=function(d,g,_){"use strict";var t=Math.abs,e=Math.atan,i=Math.atan2,r=Math.cos,o=Math.exp,n=Math.floor,p=Math.log,s=Math.max,a=Math.min,c=Math.pow,u=Math.round,h=Math.sign||function(je){return je>0?1:je<0?-1:0},v=Math.sin,f=Math.tan,l=1e-6,x=Math.PI,m=x/2,w=x/4,b=Math.SQRT1_2,k=C(2),T=C(x),L=2*x,A=180/x,I=x/180;function D(je){return je>1?m:je<-1?-m:Math.asin(je)}function S(je){return je>1?0:je<-1?x:Math.acos(je)}function C(je){return je>0?Math.sqrt(je):0}function R(je){return(o(je)-o(-je))/2}function F(je){return(o(je)+o(-je))/2}function H(je){var Ge=f(je/2),nt=2*p(r(je/2))/(Ge*Ge);function lt(_t,mt){var Ct=r(_t),rr=r(mt),ir=v(mt),$t=rr*Ct,sr=-((1-$t?p((1+$t)/2)/(1-$t):-.5)+nt/(1+$t));return[sr*rr*v(_t),sr*ir]}return lt.invert=function(_t,mt){var Ct,rr=C(_t*_t+mt*mt),ir=-je/2,$t=50;if(!rr)return[0,0];do{var sr=ir/2,gr=r(sr),Tr=v(sr),Ar=Tr/gr,Br=-p(t(gr));ir-=Ct=(2/Ar*Br-nt*Ar-rr)/(-Br/(Tr*Tr)+1-nt/(2*gr*gr))*(gr<0?.7:1)}while(t(Ct)>l&&--$t>0);var un=v(ir);return[i(_t*un,rr*r(ir)),D(mt*un/rr)]},lt}function U(je,Ge){var _t,nt=r(Ge),lt=(_t=S(nt*r(je/=2)))?_t/Math.sin(_t):1;return[2*nt*v(je)*lt,v(Ge)*lt]}function X(je){var Ge=v(je),nt=r(je),lt=je>=0?1:-1,_t=f(lt*je),mt=(1+Ge-nt)/2;function Ct(rr,ir){var $t=r(ir),sr=r(rr/=2);return[(1+$t)*v(rr),(lt*ir>-i(sr,_t)-.001?0:10*-lt)+mt+v(ir)*nt-(1+$t)*Ge*sr]}return Ct.invert=function(rr,ir){var $t=0,sr=0,gr=50;do{var Tr=r($t),Ar=v($t),Br=r(sr),un=v(sr),xn=1+Br,Fn=xn*Ar-rr,Hn=mt+un*nt-xn*Ge*Tr-ir,Kn=xn*Tr/2,qn=-Ar*un,wi=Ge*xn*Ar/2,Li=nt*Br+Ge*Tr*un,Ri=qn*wi-Li*Kn,Hi=(Hn*qn-Fn*Li)/Ri/2,Ui=(Fn*wi-Hn*Kn)/Ri;t(Ui)>2&&(Ui/=2),$t-=Hi,sr-=Ui}while((t(Hi)>l||t(Ui)>l)&&--gr>0);return lt*sr>-i(r($t),_t)-.001?[2*$t,sr]:null},Ct}function Z(je,Ge){var nt=f(Ge/2),lt=C(1-nt*nt),_t=1+lt*r(je/=2),mt=v(je)*lt/_t,Ct=nt/_t,rr=mt*mt,ir=Ct*Ct;return[4/3*mt*(3+rr-3*ir),4/3*Ct*(3+3*rr-ir)]}U.invert=function(je,Ge){if(!(je*je+4*Ge*Ge>x*x+l)){var nt=je,lt=Ge,_t=25;do{var mt,Ct=v(nt),rr=v(nt/2),ir=r(nt/2),$t=v(lt),sr=r(lt),gr=v(2*lt),Tr=$t*$t,Ar=sr*sr,Br=rr*rr,un=1-Ar*ir*ir,xn=un?S(sr*ir)*C(mt=1/un):mt=0,Fn=2*xn*sr*rr-je,Hn=xn*$t-Ge,Kn=mt*(Ar*Br+xn*sr*ir*Tr),qn=mt*(.5*Ct*gr-2*xn*$t*rr),wi=.25*mt*(gr*rr-xn*$t*Ar*Ct),Li=mt*(Tr*ir+xn*Br*sr),Ri=qn*wi-Li*Kn;if(!Ri)break;var Hi=(Hn*qn-Fn*Li)/Ri,Ui=(Fn*wi-Hn*Kn)/Ri;nt-=Hi,lt-=Ui}while((t(Hi)>l||t(Ui)>l)&&--_t>0);return[nt,lt]}},Z.invert=function(je,Ge){if(Ge*=3/8,!(je*=3/8)&&t(Ge)>1)return null;var $t,nt=1+je*je+Ge*Ge,lt=C((nt-C(nt*nt-4*Ge*Ge))/2),_t=D(lt)/3,mt=lt?($t=t(Ge/lt),p($t+C($t*$t-1))/3):function($t){return p($t+C($t*$t+1))}(t(je))/3,Ct=r(_t),rr=F(mt),ir=rr*rr-Ct*Ct;return[2*h(je)*i(R(mt)*Ct,.25-ir),2*h(Ge)*i(rr*v(_t),.25+ir)]};var Y=C(8),W=p(1+k);function te(je,Ge){var nt=t(Ge);return nt<w?[je,p(f(w+Ge/2))]:[je*r(nt)*(2*k-1/v(nt)),h(Ge)*(2*k*(nt-w)-p(f(nt/2)))]}function z(je){var Ge=2*x/je;function nt(lt,_t){var mt=g.geoAzimuthalEquidistantRaw(lt,_t);if(t(lt)>m){var Ct=i(mt[1],mt[0]),rr=C(mt[0]*mt[0]+mt[1]*mt[1]),ir=Ge*u((Ct-m)/Ge)+m,$t=i(v(Ct-=ir),2-r(Ct));Ct=ir+D(x/rr*v($t))-$t,mt[0]=rr*r(Ct),mt[1]=rr*v(Ct)}return mt}return nt.invert=function(lt,_t){var mt=C(lt*lt+_t*_t);if(mt>m){var Ct=i(_t,lt),rr=Ge*u((Ct-m)/Ge)+m,ir=Ct>rr?-1:1,$t=mt*r(rr-Ct),sr=1/f(ir*S(($t-x)/C(x*(x-2*$t)+mt*mt)));Ct=rr+2*e((sr+ir*C(sr*sr-3))/3),lt=mt*r(Ct),_t=mt*v(Ct)}return g.geoAzimuthalEquidistantRaw.invert(lt,_t)},nt}function N(je,Ge){if(arguments.length<2&&(Ge=je),1===Ge)return g.geoAzimuthalEqualAreaRaw;if(Ge===1/0)return V;function nt(lt,_t){var mt=g.geoAzimuthalEqualAreaRaw(lt/Ge,_t);return mt[0]*=je,mt}return nt.invert=function(lt,_t){var mt=g.geoAzimuthalEqualAreaRaw.invert(lt/je,_t);return mt[0]*=Ge,mt},nt}function V(je,Ge){return[je*r(Ge)/r(Ge/=2),2*v(Ge)]}function Q(je,Ge,nt){var lt,_t,mt,Ct=100;nt=void 0===nt?0:+nt,Ge=+Ge;do{(_t=je(nt))===(mt=je(nt+l))&&(mt=_t+l),nt-=lt=-1*l*(_t-Ge)/(_t-mt)}while(Ct-- >0&&t(lt)>l);return Ct<0?NaN:nt}function j(je,Ge,nt){return void 0===Ge&&(Ge=40),void 0===nt&&(nt=1e-12),function(lt,_t,mt,Ct){var rr,ir,$t;mt=void 0===mt?0:+mt,Ct=void 0===Ct?0:+Ct;for(var sr=0;sr<Ge;sr++){var gr=je(mt,Ct),Tr=gr[0]-lt,Ar=gr[1]-_t;if(t(Tr)<nt&&t(Ar)<nt)break;var Br=Tr*Tr+Ar*Ar;if(Br>rr)mt-=ir/=2,Ct-=$t/=2;else{rr=Br;var un=(mt>0?-1:1)*nt,xn=(Ct>0?-1:1)*nt,Fn=je(mt+un,Ct),Hn=je(mt,Ct+xn),Kn=(Fn[0]-gr[0])/un,qn=(Fn[1]-gr[1])/un,wi=(Hn[0]-gr[0])/xn,Li=(Hn[1]-gr[1])/xn,Ri=Li*Kn-qn*wi,Hi=(t(Ri)<.5?.5:1)/Ri;if(mt+=ir=(Ar*wi-Tr*Li)*Hi,Ct+=$t=(Tr*qn-Ar*Kn)*Hi,t(ir)<nt&&t($t)<nt)break}}return[mt,Ct]}}function J(){var je=N(1.68,2);function Ge(nt,lt){if(nt+lt<-1.4){var _t=(nt-lt+1.6)*(nt+lt+1.4)/8;nt+=_t,lt-=.8*_t*v(lt+x/2)}var mt=je(nt,lt),Ct=(1-r(nt*lt))/12;return mt[1]<0&&(mt[0]*=1+Ct),mt[1]>0&&(mt[1]*=1+Ct/1.5*mt[0]*mt[0]),mt}return Ge.invert=j(Ge),Ge}function K(je,Ge){var nt,lt=je*v(Ge),_t=30;do{Ge-=nt=(Ge+v(Ge)-lt)/(1+r(Ge))}while(t(nt)>l&&--_t>0);return Ge/2}function re(je,Ge,nt){function lt(_t,mt){return[je*_t*r(mt=K(nt,mt)),Ge*v(mt)]}return lt.invert=function(_t,mt){return mt=D(mt/Ge),[_t/(je*r(mt)),D((2*mt+v(2*mt))/nt)]},lt}te.invert=function(je,Ge){if((lt=t(Ge))<W)return[je,2*e(o(Ge))-m];var nt,lt,_t=w,mt=25;do{var Ct=r(_t/2),rr=f(_t/2);_t-=nt=(Y*(_t-w)-p(rr)-lt)/(Y-Ct*Ct/(2*rr))}while(t(nt)>1e-12&&--mt>0);return[je/(r(_t)*(Y-1/v(_t))),h(Ge)*_t]},V.invert=function(je,Ge){var nt=2*D(Ge/2);return[je*r(nt/2)/r(nt),nt]};var ie=re(k/m,k,x),ce=2.00276;function de(je,Ge){var nt=K(x,Ge);return[ce*je/(1/r(Ge)+1.11072/r(nt)),(Ge+k*v(nt))/ce]}function ue(je){var Ge=0,nt=g.geoProjectionMutator(je),lt=nt(Ge);return lt.parallel=function(_t){return arguments.length?nt(Ge=_t*I):Ge*A},lt}function ge(je,Ge){return[je*r(Ge),Ge]}function be(je){if(!je)return ge;var Ge=1/f(je);function nt(lt,_t){var mt=Ge+je-_t,Ct=mt&&lt*r(_t)/mt;return[mt*v(Ct),Ge-mt*r(Ct)]}return nt.invert=function(lt,_t){var mt=C(lt*lt+(_t=Ge-_t)*_t),Ct=Ge+je-mt;return[mt/r(Ct)*i(lt,_t),Ct]},nt}function Te(je){function Ge(nt,lt){var _t=m-lt,mt=_t&&nt*je*v(_t)/_t;return[_t*v(mt)/je,m-_t*r(mt)]}return Ge.invert=function(nt,lt){var _t=nt*je,mt=m-lt,Ct=C(_t*_t+mt*mt),rr=i(_t,mt);return[(Ct?Ct/v(Ct):1)*rr/je,m-Ct]},Ge}de.invert=function(je,Ge){var nt,lt,_t=ce*Ge,mt=Ge<0?-w:w,Ct=25;do{lt=_t-k*v(mt),mt-=nt=(v(2*mt)+2*mt-x*v(lt))/(2*r(2*mt)+2+x*r(lt)*k*r(mt))}while(t(nt)>l&&--Ct>0);return lt=_t-k*v(mt),[je*(1/r(lt)+1.11072/r(mt))/ce,lt]},ge.invert=function(je,Ge){return[je/r(Ge),Ge]};var we=re(1,4/x,x);function Le(je,Ge,nt,lt,_t,mt){var Ct,rr=r(mt);if(t(je)>1||t(mt)>1)Ct=S(nt*_t+Ge*lt*rr);else{var ir=v(je/2),$t=v(mt/2);Ct=2*D(C(ir*ir+Ge*lt*$t*$t))}return t(Ct)>l?[Ct,i(lt*v(mt),Ge*_t-nt*lt*rr)]:[0,0]}function fe(je,Ge,nt){return S((je*je+Ge*Ge-nt*nt)/(2*je*Ge))}function ve(je){return je-2*x*n((je+x)/(2*x))}function Me(je,Ge,nt){for(var lt,_t=[[je[0],je[1],v(je[1]),r(je[1])],[Ge[0],Ge[1],v(Ge[1]),r(Ge[1])],[nt[0],nt[1],v(nt[1]),r(nt[1])]],mt=_t[2],Ct=0;Ct<3;++Ct,mt=lt)mt.v=Le((lt=_t[Ct])[1]-mt[1],mt[3],mt[2],lt[3],lt[2],lt[0]-mt[0]),mt.point=[0,0];var rr=fe(_t[0].v[0],_t[2].v[0],_t[1].v[0]),ir=fe(_t[0].v[0],_t[1].v[0],_t[2].v[0]),$t=x-rr;_t[2].point[1]=0,_t[0].point[0]=-(_t[1].point[0]=_t[0].v[0]/2);var sr=[_t[2].point[0]=_t[0].point[0]+_t[2].v[0]*r(rr),2*(_t[0].point[1]=_t[1].point[1]=_t[2].v[0]*v(rr))];return function(gr,Tr){var Ar,Br=v(Tr),un=r(Tr),xn=new Array(3);for(Ar=0;Ar<3;++Ar){var Fn=_t[Ar];if(xn[Ar]=Le(Tr-Fn[1],Fn[3],Fn[2],un,Br,gr-Fn[0]),!xn[Ar][0])return Fn.point;xn[Ar][1]=ve(xn[Ar][1]-Fn.v[1])}var Hn=sr.slice();for(Ar=0;Ar<3;++Ar){var qn=fe(_t[Ar].v[0],xn[Ar][0],xn[2==Ar?0:Ar+1][0]);xn[Ar][1]<0&&(qn=-qn),Ar?1==Ar?(Hn[0]-=xn[Ar][0]*r(qn=ir-qn),Hn[1]-=xn[Ar][0]*v(qn)):(Hn[0]+=xn[Ar][0]*r(qn=$t-qn),Hn[1]+=xn[Ar][0]*v(qn)):(Hn[0]+=xn[Ar][0]*r(qn),Hn[1]-=xn[Ar][0]*v(qn))}return Hn[0]/=3,Hn[1]/=3,Hn}}function ke(je){return je[0]*=I,je[1]*=I,je}function Ce(je,Ge,nt){var lt=g.geoCentroid({type:"MultiPoint",coordinates:[je,Ge,nt]}),_t=[-lt[0],-lt[1]],mt=g.geoRotation(_t),Ct=Me(ke(mt(je)),ke(mt(Ge)),ke(mt(nt)));Ct.invert=j(Ct);var rr=g.geoProjection(Ct).rotate(_t),ir=rr.center;return delete rr.rotate,rr.center=function($t){return arguments.length?ir(mt($t)):mt.invert(ir())},rr.clipAngle(90)}function Pe(je,Ge){var nt=C(1-v(Ge));return[2/T*je*nt,T*(1-nt)]}function Fe(je){var Ge=f(je);function nt(lt,_t){return[lt,(lt?lt/v(lt):1)*(v(_t)*r(lt)-Ge*r(_t))]}return nt.invert=Ge?function(lt,_t){lt&&(_t*=v(lt)/lt);var mt=r(lt);return[lt,2*i(C(mt*mt+Ge*Ge-_t*_t)-mt,Ge-_t)]}:function(lt,_t){return[lt,D(lt?_t*f(lt)/lt:_t)]},nt}Pe.invert=function(je,Ge){var nt=(nt=Ge/T-1)*nt;return[nt>0?je*C(x/nt)/2:0,D(1-nt)]};var qe=C(3);function rt(je,Ge){return[qe*je*(2*r(2*Ge/3)-1)/T,qe*T*v(Ge/3)]}function ze(je){var Ge=r(je);function nt(lt,_t){return[lt*Ge,v(_t)/Ge]}return nt.invert=function(lt,_t){return[lt/Ge,D(_t*Ge)]},nt}function He(je){var Ge=r(je);function nt(lt,_t){return[lt*Ge,(1+Ge)*f(_t/2)]}return nt.invert=function(lt,_t){return[lt/Ge,2*e(_t/(1+Ge))]},nt}function Xe(je,Ge){var nt=C(8/(3*x));return[nt*je*(1-t(Ge)/x),nt*Ge]}function Je(je,Ge){var nt=C(4-3*v(t(Ge)));return[2/C(6*x)*je*nt,h(Ge)*C(2*x/3)*(2-nt)]}function at(je,Ge){var nt=C(x*(4+x));return[2/nt*je*(1+C(1-4*Ge*Ge/(x*x))),4/nt*Ge]}function pt(je,Ge){var nt=(2+m)*v(Ge);Ge/=2;for(var lt=0,_t=1/0;lt<10&&t(_t)>l;lt++){var mt=r(Ge);Ge-=_t=(Ge+v(Ge)*(mt+2)-nt)/(2*mt*(1+mt))}return[2/C(x*(4+x))*je*(1+r(Ge)),2*C(x/(4+x))*v(Ge)]}function xt(je,Ge){return[je*(1+r(Ge))/C(2+x),2*Ge/C(2+x)]}function Ft(je,Ge){for(var nt=(1+m)*v(Ge),lt=0,_t=1/0;lt<10&&t(_t)>l;lt++)Ge-=_t=(Ge+v(Ge)-nt)/(1+r(Ge));return nt=C(2+x),[je*(1+r(Ge))/nt,2*Ge/nt]}rt.invert=function(je,Ge){var nt=3*D(Ge/(qe*T));return[T*je/(qe*(2*r(2*nt/3)-1)),nt]},Xe.invert=function(je,Ge){var nt=C(8/(3*x)),lt=Ge/nt;return[je/(nt*(1-t(lt)/x)),lt]},Je.invert=function(je,Ge){var nt=2-t(Ge)/C(2*x/3);return[je*C(6*x)/(2*nt),h(Ge)*D((4-nt*nt)/3)]},at.invert=function(je,Ge){var nt=C(x*(4+x))/2;return[je*nt/(1+C(1-Ge*Ge*(4+x)/(4*x))),Ge*nt/2]},pt.invert=function(je,Ge){var nt=Ge*C((4+x)/x)/2,lt=D(nt),_t=r(lt);return[je/(2/C(x*(4+x))*(1+_t)),D((lt+nt*(_t+2))/(2+m))]},xt.invert=function(je,Ge){var nt=C(2+x),lt=Ge*nt/2;return[nt*je/(1+r(lt)),lt]},Ft.invert=function(je,Ge){var nt=1+m,lt=C(nt/2);return[2*je*lt/(1+r(Ge*=lt)),D((Ge+v(Ge))/nt)]};var Dt=3+2*k;function ot(je,Ge){var nt=v(je/=2),lt=r(je),_t=C(r(Ge)),mt=r(Ge/=2),Ct=v(Ge)/(mt+k*lt*_t),rr=C(2/(1+Ct*Ct)),ir=C((k*mt+(lt+nt)*_t)/(k*mt+(lt-nt)*_t));return[Dt*(rr*(ir-1/ir)-2*p(ir)),Dt*(rr*Ct*(ir+1/ir)-2*e(Ct))]}ot.invert=function(je,Ge){if(!(nt=Z.invert(je/1.2,1.065*Ge)))return null;var nt,lt=nt[0],_t=nt[1],mt=20;je/=Dt,Ge/=Dt;do{var Ct=lt/2,rr=_t/2,ir=v(Ct),$t=r(Ct),sr=v(rr),gr=r(rr),Tr=r(_t),Ar=C(Tr),Br=sr/(gr+k*$t*Ar),un=Br*Br,xn=C(2/(1+un)),Fn=(k*gr+($t+ir)*Ar)/(k*gr+($t-ir)*Ar),Hn=C(Fn),Kn=Hn-1/Hn,qn=Hn+1/Hn,wi=xn*Kn-2*p(Hn)-je,Li=xn*Br*qn-2*e(Br)-Ge,Ri=sr&&b*Ar*ir*un/sr,Hi=(k*$t*gr+Ar)/(2*(gr+k*$t*Ar)*(gr+k*$t*Ar)*Ar),Ui=-.5*Br*xn*xn*xn,ba=Ui*Ri,va=Ui*Hi,ca=(ca=2*gr+k*Ar*($t-ir))*ca*Hn,ua=(k*$t*gr*Ar+Tr)/ca,da=-k*ir*sr/(Ar*ca),Ua=Kn*ba-2*ua/Hn+xn*(ua+ua/Fn),no=Kn*va-2*da/Hn+xn*(da+da/Fn),Ha=Br*qn*ba-2*Ri/(1+un)+xn*qn*Ri+xn*Br*(ua-ua/Fn),io=Br*qn*va-2*Hi/(1+un)+xn*qn*Hi+xn*Br*(da-da/Fn),Ka=no*Ha-io*Ua;if(!Ka)break;var Ni=(Li*no-wi*io)/Ka,gt=(wi*Ha-Li*Ua)/Ka;lt-=Ni,_t=s(-m,a(m,_t-gt))}while((t(Ni)>l||t(gt)>l)&&--mt>0);return t(t(_t)-m)<l?[0,_t]:mt&&[lt,_t]};var it=r(35*I);function Et(je,Ge){var nt=f(Ge/2);return[je*it*C(1-nt*nt),(1+it)*nt]}function Xt(je,Ge){var nt=Ge/2,lt=r(nt);return[2*je/T*r(Ge)*lt*lt,T*f(nt)]}function nr(je){var Ge=1-je,nt=_t(x,0)[0]-_t(-x,0)[0],lt=C(2*(_t(0,m)[1]-_t(0,-m)[1])/nt);function _t(rr,ir){var $t=r(ir),sr=v(ir);return[$t/(Ge+je*$t)*rr,Ge*ir+je*sr]}function mt(rr,ir){var $t=_t(rr,ir);return[$t[0]*lt,$t[1]/lt]}function Ct(rr){return mt(0,rr)[1]}return mt.invert=function(rr,ir){var $t=Q(Ct,ir);return[rr/lt*(je+Ge/r($t)),$t]},mt}function Ue(je){return[je[0]/2,D(f(je[1]/2*I))*A]}function We(je){return[2*je[0],2*e(v(je[1]*I))*A]}function Be(je,Ge){var nt=2*x/Ge,lt=je*je;function _t(mt,Ct){var rr=g.geoAzimuthalEquidistantRaw(mt,Ct),ir=rr[0],$t=rr[1],sr=ir*ir+$t*$t;if(sr>lt){var gr=C(sr),Tr=i($t,ir),Ar=nt*u(Tr/nt),Br=Tr-Ar,un=je*r(Br),xn=(je*v(Br)-Br*v(un))/(m-un),Fn=Qe(Br,xn),Hn=(x-je)/Ae(Fn,un,x);ir=gr;var Kn,qn=50;do{ir-=Kn=(je+Ae(Fn,un,ir)*Hn-gr)/(Fn(ir)*Hn)}while(t(Kn)>l&&--qn>0);$t=Br*v(ir),ir<m&&($t-=xn*(ir-m));var wi=v(Ar),Li=r(Ar);rr[0]=ir*Li-$t*wi,rr[1]=ir*wi+$t*Li}return rr}return _t.invert=function(mt,Ct){var rr=mt*mt+Ct*Ct;if(rr>lt){var ir=C(rr),$t=i(Ct,mt),sr=nt*u($t/nt),gr=$t-sr;mt=ir*r(gr),Ct=ir*v(gr);for(var Tr=mt-m,Ar=v(mt),Br=Ct/Ar,un=mt<m?1/0:0,xn=10;;){var Fn=je*v(Br),Hn=je*r(Br),Kn=v(Hn),qn=m-Hn,wi=(Fn-Br*Kn)/qn,Li=Qe(Br,wi);if(t(un)<1e-12||!--xn)break;Br-=un=(Br*Ar-wi*Tr-Ct)/(Ar-2*Tr*(qn*(Hn+Br*Fn*r(Hn)-Kn)-Fn*(Fn-Br*Kn))/(qn*qn))}mt=(ir=je+Ae(Li,Hn,mt)*(x-je)/Ae(Li,Hn,x))*r($t=sr+Br),Ct=ir*v($t)}return g.geoAzimuthalEquidistantRaw.invert(mt,Ct)},_t}function Qe(je,Ge){return function(nt){var lt=je*r(nt);return nt<m&&(lt-=Ge),C(1+lt*lt)}}function Ae(je,Ge,nt){for(var lt=(nt-Ge)/50,_t=je(Ge)+je(nt),mt=1,Ct=Ge;mt<50;++mt)_t+=2*je(Ct+=lt);return.5*_t*lt}function De(je,Ge,nt,lt,_t,mt,Ct,rr){function ir($t,sr){if(!sr)return[je*$t/x,0];var gr=sr*sr,Tr=je+gr*(Ge+gr*(nt+gr*lt)),Ar=sr*(_t-1+gr*(mt-rr+gr*Ct)),Br=(Tr*Tr+Ar*Ar)/(2*Ar),un=$t*D(Tr/Br)/x;return[Br*v(un),sr*(1+gr*rr)+Br*(1-r(un))]}return arguments.length<8&&(rr=0),ir.invert=function($t,sr){var gr,Tr,Ar=x*$t/je,Br=sr,un=50;do{var xn=Br*Br,Fn=je+xn*(Ge+xn*(nt+xn*lt)),Hn=Br*(_t-1+xn*(mt-rr+xn*Ct)),Kn=Fn*Fn+Hn*Hn,qn=2*Hn,wi=Kn/qn,Li=wi*wi,Ri=D(Fn/wi)/x,Hi=Ar*Ri,Ui=Fn*Fn,ba=(2*Ge+xn*(4*nt+6*xn*lt))*Br,va=_t+xn*(3*mt+5*xn*Ct),ca=(2*(Fn*ba+Hn*(va-1))*qn-Kn*(2*(va-1)))/(qn*qn),ua=r(Hi),da=v(Hi),Ua=wi*ua,no=wi*da,Ha=Ar/x*(1/C(1-Ui/Li))*(ba*wi-Fn*ca)/Li,io=no-$t,Ka=Br*(1+xn*rr)+wi-Ua-sr,Ni=ca*da+Ua*Ha,gt=Ua*Ri,Vt=1+ca-(ca*ua-no*Ha),hr=no*Ri,Jt=Ni*hr-Vt*gt;if(!Jt)break;Ar-=gr=(Ka*Ni-io*Vt)/Jt,Br-=Tr=(io*hr-Ka*gt)/Jt}while((t(gr)>l||t(Tr)>l)&&--un>0);return[Ar,Br]},ir}Et.invert=function(je,Ge){var nt=Ge/(1+it);return[je&&je/(it*C(1-nt*nt)),2*e(nt)]},Xt.invert=function(je,Ge){var nt=e(Ge/T),lt=r(nt),_t=2*nt;return[je*T/2/(r(_t)*lt*lt),_t]};var Oe=De(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ie=De(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),et=De(5/6*x,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ct(je,Ge){var nt=je*je,lt=Ge*Ge;return[je*(1-.162388*lt)*(.87-952426e-9*nt*nt),Ge*(1+lt/12)]}ct.invert=function(je,Ge){var nt,lt=je,_t=Ge,mt=50;do{var Ct=_t*_t;_t-=nt=(_t*(1+Ct/12)-Ge)/(1+Ct/4)}while(t(nt)>l&&--mt>0);mt=50,je/=1-.162388*Ct;do{var rr=(rr=lt*lt)*rr;lt-=nt=(lt*(.87-952426e-9*rr)-je)/(.87-.00476213*rr)}while(t(nt)>l&&--mt>0);return[lt,_t]};var vt=De(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ft(je){var Ge=je(m,0)[0]-je(-m,0)[0];function nt(lt,_t){var mt=lt>0?-.5:.5,Ct=je(lt+mt*x,_t);return Ct[0]-=mt*Ge,Ct}return je.invert&&(nt.invert=function(lt,_t){var mt=lt>0?-.5:.5,Ct=je.invert(lt+mt*Ge,_t),rr=Ct[0]-mt*x;return rr<-x?rr+=2*x:rr>x&&(rr-=2*x),Ct[0]=rr,Ct}),nt}function It(je,Ge){var nt=h(je),lt=h(Ge),_t=r(Ge),mt=r(je)*_t,Ct=v(je)*_t,rr=v(lt*Ge);je=t(i(Ct,rr)),Ge=D(mt),t(je-m)>l&&(je%=m);var ir=function($t,sr){if(sr===m)return[0,0];var gr,Tr,Ar=v(sr),Br=Ar*Ar,un=Br*Br,xn=1+un,Fn=1+3*un,Hn=1-un,Kn=D(1/C(xn)),qn=Hn+Br*xn*Kn,wi=(1-Ar)/qn,Li=C(wi),Ri=wi*xn,Hi=C(Ri),Ui=Li*Hn;if(0===$t)return[0,-(Ui+Br*Hi)];var ba,va=r(sr),ca=1/va,ua=2*Ar*va,da=(-qn*va-(-3*Br+Kn*Fn)*ua*(1-Ar))/(qn*qn),Ua=-ca*ua,no=-ca*(Br*xn*da+wi*Fn*ua),Ha=-2*ca*(Hn*(.5*da/Li)-2*Br*Li*ua),io=4*$t/x;if($t>.222*x||sr<x/4&&$t>.175*x){if(gr=(Ui+Br*C(Ri*(1+un)-Ui*Ui))/(1+un),$t>x/4)return[gr,gr];var Ka=gr,Ni=.5*gr;gr=.5*(Ni+Ka),Tr=50;do{var Vt=gr*(Ha+Ua*C(Ri-gr*gr))+no*D(gr/Hi)-io;if(!Vt)break;Vt<0?Ni=gr:Ka=gr,gr=.5*(Ni+Ka)}while(t(Ka-Ni)>l&&--Tr>0)}else{gr=l,Tr=25;do{var hr=gr*gr,Jt=C(Ri-hr),fr=Ha+Ua*Jt,zr=gr*fr+no*D(gr/Hi)-io;gr-=ba=Jt?zr/(fr+(no-Ua*hr)/Jt):0}while(t(ba)>l&&--Tr>0)}return[gr,-Ui-Br*C(Ri-gr*gr)]}(je>x/4?m-je:je,Ge);return je>x/4&&(rr=ir[0],ir[0]=-ir[1],ir[1]=-rr),ir[0]*=nt,ir[1]*=-lt,ir}function ut(je,Ge){var nt,lt,_t,mt,Ct,rr;if(Ge<l)return[(mt=v(je))-(nt=Ge*(je-mt*(lt=r(je)))/4)*lt,lt+nt*mt,1-Ge*mt*mt/2,je-nt];if(Ge>=1-l)return nt=(1-Ge)/4,_t=1/(lt=F(je)),[(mt=((rr=o(2*(rr=je)))-1)/(rr+1))+nt*((Ct=lt*R(je))-je)/(lt*lt),_t-nt*mt*_t*(Ct-je),_t+nt*mt*_t*(Ct+je),2*e(o(je))-m+nt*(Ct-je)/lt];var ir=[1,0,0,0,0,0,0,0,0],$t=[C(Ge),0,0,0,0,0,0,0,0],sr=0;for(lt=C(1-Ge),Ct=1;t($t[sr]/ir[sr])>l&&sr<8;)nt=ir[sr++],$t[sr]=(nt-lt)/2,ir[sr]=(nt+lt)/2,lt=C(nt*lt),Ct*=2;_t=Ct*ir[sr]*je;do{_t=(D(mt=$t[sr]*v(lt=_t)/ir[sr])+_t)/2}while(--sr);return[v(_t),mt=r(_t),mt/r(_t-lt),_t]}function Ot(je,Ge){if(!Ge)return je;if(1===Ge)return p(f(je/2+w));for(var nt=1,lt=C(1-Ge),_t=C(Ge),mt=0;t(_t)>l;mt++){if(je%x){var Ct=e(lt*f(je)/nt);Ct<0&&(Ct+=x),je+=Ct+~~(je/x)*x}else je+=je;_t=(nt+lt)/2,lt=C(nt*lt),_t=((nt=_t)-lt)/2}return je/(c(2,mt)*nt)}function Rt(je,Ge){var $t,sr,gr,Tr,Ar,nt=(k-1)/(k+1),lt=C(1-nt*nt),_t=Ot(m,lt*lt),mt=p(f(x/4+t(Ge)/2)),Ct=o(-1*mt)/C(nt),rr=($t=Ct*r(-1*je),Tr=(sr=Ct*v(-1*je))+1,[.5*(($t>=0?m:-m)-i(Ar=1-(gr=$t*$t)-sr*sr,2*$t)),-.25*p(Ar*Ar+4*gr)+.5*p(Tr*Tr+gr)]),ir=function($t,sr,gr){var Tr=t($t),Ar=R(t(sr));if(Tr){var Br=1/v(Tr),un=1/(f(Tr)*f(Tr)),xn=-(un+gr*(Ar*Ar*Br*Br)-1+gr),Fn=(-xn+C(xn*xn-(gr-1)*un*4))/2;return[Ot(e(1/C(Fn)),gr)*h($t),Ot(e(C((Fn/un-1)/gr)),1-gr)*h(sr)]}return[0,Ot(e(Ar),1-gr)*h(sr)]}(rr[0],rr[1],lt*lt);return[-ir[1],(Ge>=0?1:-1)*(.5*_t-ir[0])]}function $e(je){var Ge=v(je),nt=r(je),lt=yt(je);function _t(mt,Ct){var rr=lt(mt,Ct);mt=rr[0];var ir=v(Ct=rr[1]),$t=r(Ct),sr=r(mt),gr=S(Ge*ir+nt*$t*sr),Tr=v(gr),Ar=t(Tr)>l?gr/Tr:1;return[Ar*nt*v(mt),(t(mt)>m?Ar:-Ar)*(Ge*$t-nt*ir*sr)]}return lt.invert=yt(-je),_t.invert=function(mt,Ct){var rr=C(mt*mt+Ct*Ct),ir=-v(rr),$t=r(rr),sr=rr*$t,gr=-Ct*ir,Tr=rr*Ge,Ar=C(sr*sr+gr*gr-Tr*Tr),Br=i(sr*Tr+gr*Ar,gr*Tr-sr*Ar),un=(rr>m?-1:1)*i(mt*ir,rr*r(Br)*$t+Ct*v(Br)*ir);return lt.invert(un,Br)},_t}function yt(je){var Ge=v(je),nt=r(je);return function(lt,_t){var mt=r(_t),Ct=r(lt)*mt,rr=v(lt)*mt,ir=v(_t);return[i(rr,Ct*nt-ir*Ge),D(ir*nt+Ct*Ge)]}}It.invert=function(je,Ge){t(je)>1&&(je=2*h(je)-je),t(Ge)>1&&(Ge=2*h(Ge)-Ge);var nt=h(je),lt=h(Ge),_t=-nt*je,mt=-lt*Ge,Ct=mt/_t<1,rr=function(gr,Tr){for(var Ar=0,Br=1,un=.5,xn=50;;){var Fn=un*un,Hn=C(un),Kn=D(1/C(1+Fn)),qn=1-Fn+un*(1+Fn)*Kn,wi=(1-Hn)/qn,Li=C(wi),Ri=wi*(1+Fn),Hi=Li*(1-Fn),Ui=C(Ri-gr*gr),ba=Tr+Hi+un*Ui;if(t(Br-Ar)<1e-12||0==--xn||0===ba)break;ba>0?Ar=un:Br=un,un=.5*(Ar+Br)}if(!xn)return null;var va=D(Hn),ca=r(va),ua=1/ca,da=2*Hn*ca,Ua=(-qn*ca-(-3*un+Kn*(1+3*Fn))*da*(1-Hn))/(qn*qn);return[x/4*(gr*(-2*ua*(.5*Ua/Li*(1-Fn)-2*un*Li*da)+-ua*da*Ui)+-ua*(un*(1+Fn)*Ua+wi*(1+3*Fn)*da)*D(gr/C(Ri))),va]}(Ct?mt:_t,Ct?_t:mt),ir=rr[0],$t=rr[1],sr=r($t);return Ct&&(ir=-m-ir),[nt*(i(v(ir)*sr,-v($t))+x),lt*D(r(ir)*sr)]},Rt.invert=function(je,Ge){var nt,lt,_t,mt,Ct,rr,Ar,Br,un,ir=(k-1)/(k+1),$t=C(1-ir*ir),gr=(lt=-je,_t=$t*$t,(nt=.5*Ot(m,$t*$t)-Ge)?(mt=ut(nt,_t),lt?(rr=(Ct=ut(lt,1-_t))[1]*Ct[1]+_t*mt[0]*mt[0]*Ct[0]*Ct[0],[[mt[0]*Ct[2]/rr,mt[1]*mt[2]*Ct[0]*Ct[1]/rr],[mt[1]*Ct[1]/rr,-mt[0]*mt[2]*Ct[0]*Ct[2]/rr],[mt[2]*Ct[1]*Ct[2]/rr,-_t*mt[0]*mt[1]*Ct[0]/rr]]):[[mt[0],0],[mt[1],0],[mt[2],0]]):[[0,(Ct=ut(lt,1-_t))[0]/Ct[1]],[1/Ct[1],0],[Ct[2]/Ct[1],0]]),Tr=[((Ar=gr[0])[0]*(Br=gr[1])[0]+Ar[1]*Br[1])/(un=Br[0]*Br[0]+Br[1]*Br[1]),(Ar[1]*Br[0]-Ar[0]*Br[1])/un];return[i(Tr[1],Tr[0])/-1,2*e(o(-.5*p(ir*Tr[0]*Tr[0]+ir*Tr[1]*Tr[1])))-m]};var Bt=D(1-1/3)*A,Ut=ze(0);function Qt(je){var Ge=Bt*I,nt=Pe(x,Ge)[0]-Pe(-x,Ge)[0],lt=Ut(0,Ge)[1],_t=Pe(0,Ge)[1],mt=T-_t,Ct=L/je,rr=4/L,ir=lt+mt*mt*4/L;function $t(sr,gr){var Tr,Ar=t(gr);if(Ar>Ge){var Br=a(je-1,s(0,n((sr+x)/Ct)));(Tr=Pe(sr+=x*(je-1)/je-Br*Ct,Ar))[0]=Tr[0]*L/nt-L*(je-1)/(2*je)+Br*L/je,Tr[1]=lt+4*(Tr[1]-_t)*mt/L,gr<0&&(Tr[1]=-Tr[1])}else Tr=Ut(sr,gr);return Tr[0]*=rr,Tr[1]/=ir,Tr}return $t.invert=function(sr,gr){sr/=rr;var Tr=t(gr*=ir);if(Tr>lt){var Ar=a(je-1,s(0,n((sr+x)/Ct))),Br=Pe.invert(sr=(sr+x*(je-1)/je-Ar*Ct)*nt/L,.25*(Tr-lt)*L/mt+_t);return Br[0]-=x*(je-1)/je-Ar*Ct,gr<0&&(Br[1]=-Br[1]),Br}return Ut.invert(sr,gr)},$t}function Re(je,Ge){return[je,1&Ge?90-l:Bt]}function ht(je,Ge){return[je,1&Ge?-90+l:-Bt]}function Mt(je){return[je[0]*(1-l),je[1]]}function Nt(je){var Ge,nt=1+je,lt=D(v(1/nt)),_t=2*C(x/(Ge=x+4*lt*nt)),mt=.5*_t*(nt+C(je*(2+je))),Ct=je*je,rr=nt*nt;function ir($t,sr){var gr,Tr,Ar=1-v(sr);if(Ar&&Ar<2){var Br,un=m-sr,xn=25;do{var Fn=v(un),Hn=r(un),Kn=lt+i(Fn,nt-Hn),qn=1+rr-2*nt*Hn;un-=Br=(un-Ct*lt-nt*Fn+qn*Kn-.5*Ar*Ge)/(2*nt*Fn*Kn)}while(t(Br)>1e-12&&--xn>0);gr=_t*C(qn),Tr=$t*Kn/x}else gr=_t*(je+Ar),Tr=$t*lt/x;return[gr*v(Tr),mt-gr*r(Tr)]}return ir.invert=function($t,sr){var gr=$t*$t+(sr-=mt)*sr,Tr=(1+rr-gr/(_t*_t))/(2*nt),Ar=S(Tr),Br=v(Ar),un=lt+i(Br,nt-Tr);return[D($t/C(gr))*x/un,D(1-2*(Ar-Ct*lt-nt*Br+(1+rr-2*nt*Tr)*un)/Ge)]},ir}function Zt(je,Ge){return Ge>-.7109889596207567?((je=ie(je,Ge))[1]+=.0528035274542,je):ge(je,Ge)}function or(je,Ge){return t(Ge)>.7109889596207567?((je=ie(je,Ge))[1]-=Ge>0?.0528035274542:-.0528035274542,je):ge(je,Ge)}function Wt(je,Ge,nt,lt){var _t=C(4*x/(2*nt+(1+je-Ge/2)*v(2*nt)+(je+Ge)/2*v(4*nt)+Ge/2*v(6*nt))),mt=C(lt*v(nt)*C((1+je*r(2*nt)+Ge*r(4*nt))/(1+je+Ge))),Ct=nt*ir(1);function rr(gr){return C(1+je*r(2*gr)+Ge*r(4*gr))}function ir(gr){var Tr=gr*nt;return(2*Tr+(1+je-Ge/2)*v(2*Tr)+(je+Ge)/2*v(4*Tr)+Ge/2*v(6*Tr))/nt}function $t(gr){return rr(gr)*v(gr)}var sr=function(gr,Tr){var Ar=nt*Q(ir,Ct*v(Tr)/nt,Tr/x);isNaN(Ar)&&(Ar=nt*h(Tr));var Br=_t*rr(Ar);return[Br*mt*gr/x*r(Ar),Br/mt*v(Ar)]};return sr.invert=function(gr,Tr){var Ar=Q($t,Tr*mt/_t);return[gr*x/(r(Ar)*_t*mt*rr(Ar)),D(nt*ir(Ar/nt)/Ct)]},0===nt&&(_t=C(lt/x),(sr=function(gr,Tr){return[gr*_t,v(Tr)/_t]}).invert=function(gr,Tr){return[gr/_t,D(Tr*_t)]}),sr}function cr(je,Ge,nt){function lt(Ar){return je+(1-je)*c(1-c(Ar,Ge),1/Ge)}function _t(Ar){return function(je,Ge,nt,lt,_t){void 0===lt&&(lt=1e-8),void 0===_t&&(_t=20);var mt=je(Ge),Ct=je(.5*(Ge+nt)),rr=je(nt);return function ir($t,sr,gr,Tr,Ar,Br,un,xn,Fn,Hn,Kn){if(Kn.nanEncountered)return NaN;var qn,wi,Li,Ri,Hi,Ui,ba,va,ca,ua;if(wi=$t(sr+.25*(qn=gr-sr)),Li=$t(gr-.25*qn),isNaN(wi))Kn.nanEncountered=!0;else{if(!isNaN(Li))return ua=((Ui=(Ri=qn*(Tr+4*wi+Ar)/12)+(Hi=qn*(Ar+4*Li+Br)/12))-un)/15,Hn>Fn?(Kn.maxDepthCount++,Ui+ua):Math.abs(ua)<xn?Ui+ua:(va=ir($t,sr,ba=sr+.5*qn,Tr,wi,Ar,Ri,.5*xn,Fn,Hn+1,Kn),isNaN(va)?(Kn.nanEncountered=!0,NaN):(ca=ir($t,ba,gr,Ar,Li,Br,Hi,.5*xn,Fn,Hn+1,Kn),isNaN(ca)?(Kn.nanEncountered=!0,NaN):va+ca));Kn.nanEncountered=!0}}(je,Ge,nt,mt,Ct,rr,(mt+4*Ct+rr)*(nt-Ge)/6,lt,_t,1,{maxDepthCount:0,nanEncountered:!1})}(lt,0,Ar,1e-4)}for(var mt=1/_t(1),rr=(1+1e-8)*mt,ir=[],$t=0;$t<=1e3;$t++)ir.push(_t($t/1e3)*rr);function sr(Ar){var Br=0,un=1e3,xn=500;do{ir[xn]>Ar?un=xn:Br=xn,xn=Br+un>>1}while(xn>Br);var Fn=ir[xn+1]-ir[xn];return Fn&&(Fn=(Ar-ir[xn+1])/Fn),(xn+1+Fn)/1e3}var gr=2*sr(1)/x*mt/nt,Tr=function(Ar,Br){var un=sr(t(v(Br))),xn=lt(un)*Ar;return un/=gr,[xn,Br>=0?un:-un]};return Tr.invert=function(Ar,Br){var un;return t(Br*=gr)<1&&(un=h(Br)*D(_t(t(Br))*mt)),[Ar/lt(t(Br)),un]},Tr}function _r(je,Ge){return t(je[0]-Ge[0])<l&&t(je[1]-Ge[1])<l}function xr(je,Ge){for(var nt,lt,_t,mt=-1,Ct=je.length,rr=je[0],ir=[];++mt<Ct;){lt=((nt=je[mt])[0]-rr[0])/Ge,_t=(nt[1]-rr[1])/Ge;for(var $t=0;$t<Ge;++$t)ir.push([rr[0]+$t*lt,rr[1]+$t*_t]);rr=nt}return ir.push(nt),ir}function dr(je){var Ge,nt,_t,mt,rr,ir=[],$t=je[0].length;for(rr=0;rr<$t;++rr)nt=(Ge=je[0][rr])[0][0],ir.push(xr([[nt+l,Ge[0][1]+l],[nt+l,(_t=Ge[1][1])-l],[(mt=Ge[2][0])-l,_t-l],[mt-l,Ge[2][1]+l]],30));for(rr=je[1].length-1;rr>=0;--rr)nt=(Ge=je[1][rr])[0][0],ir.push(xr([[(mt=Ge[2][0])-l,Ge[2][1]-l],[mt-l,(_t=Ge[1][1])+l],[nt+l,_t+l],[nt+l,Ge[0][1]-l]],30));return{type:"Polygon",coordinates:[_.merge(ir)]}}function pr(je,Ge,nt){var lt,_t;function mt(ir,$t){for(var sr=$t<0?-1:1,gr=Ge[+($t<0)],Tr=0,Ar=gr.length-1;Tr<Ar&&ir>gr[Tr][2][0];++Tr);var Br=je(ir-gr[Tr][1][0],$t);return Br[0]+=je(gr[Tr][1][0],sr*$t>sr*gr[Tr][0][1]?gr[Tr][0][1]:$t)[0],Br}nt?mt.invert=nt(mt):je.invert&&(mt.invert=function(ir,$t){for(var sr=_t[+($t<0)],gr=Ge[+($t<0)],Tr=0,Ar=sr.length;Tr<Ar;++Tr){var Br=sr[Tr];if(Br[0][0]<=ir&&ir<Br[1][0]&&Br[0][1]<=$t&&$t<Br[1][1]){var un=je.invert(ir-je(gr[Tr][1][0],0)[0],$t);return un[0]+=gr[Tr][1][0],_r(mt(un[0],un[1]),[ir,$t])?un:null}}});var Ct=g.geoProjection(mt),rr=Ct.stream;return Ct.stream=function(ir){var $t=Ct.rotate(),sr=rr(ir),gr=(Ct.rotate([0,0]),rr(ir));return Ct.rotate($t),sr.sphere=function(){g.geoStream(lt,gr)},sr},Ct.lobes=function(ir){return arguments.length?(lt=dr(ir),Ge=ir.map(function($t){return $t.map(function(sr){return[[sr[0][0]*I,sr[0][1]*I],[sr[1][0]*I,sr[1][1]*I],[sr[2][0]*I,sr[2][1]*I]]})}),_t=Ge.map(function($t){return $t.map(function(sr){var gr,Tr=je(sr[0][0],sr[0][1])[0],Ar=je(sr[2][0],sr[2][1])[0],Br=je(sr[1][0],sr[0][1])[1],un=je(sr[1][0],sr[1][1])[1];return Br>un&&(gr=Br,Br=un,un=gr),[[Tr,Br],[Ar,un]]})}),Ct):Ge.map(function($t){return $t.map(function(sr){return[[sr[0][0]*A,sr[0][1]*A],[sr[1][0]*A,sr[1][1]*A],[sr[2][0]*A,sr[2][1]*A]]})})},null!=Ge&&Ct.lobes(Ge),Ct}Zt.invert=function(je,Ge){return Ge>-.7109889596207567?ie.invert(je,Ge-.0528035274542):ge.invert(je,Ge)},or.invert=function(je,Ge){return t(Ge)>.7109889596207567?ie.invert(je,Ge+(Ge>0?.0528035274542:-.0528035274542)):ge.invert(je,Ge)};var br=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Nr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],kr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Hr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],an=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],fn=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function zn(je,Ge){return[3/L*je*C(x*x/3-Ge*Ge),Ge]}function Nn(je){function Ge(nt,lt){if(t(t(lt)-m)<l)return[0,lt<0?-2:2];var _t=v(lt),mt=c((1+_t)/(1-_t),je/2),Ct=.5*(mt+1/mt)+r(nt*=je);return[2*v(nt)/Ct,(mt-1/mt)/Ct]}return Ge.invert=function(nt,lt){var _t=t(lt);if(t(_t-2)<l)return nt?null:[0,h(lt)*m];if(_t>2)return null;var mt=(nt/=2)*nt,Ct=(lt/=2)*lt,rr=2*lt/(1+mt+Ct);return rr=c((1+rr)/(1-rr),1/je),[i(2*nt,1-mt-Ct)/je,D((rr-1)/(rr+1))]},Ge}zn.invert=function(je,Ge){return[L/3*je/C(x*x/3-Ge*Ge),Ge]};var In=x/k;function cn(je,Ge){return[je*(1+C(r(Ge)))/2,Ge/(r(Ge/2)*r(je/6))]}function jr(je,Ge){var nt=je*je,lt=Ge*Ge;return[je*(.975534+lt*(-.0143059*nt-.119161+-.0547009*lt)),Ge*(1.00384+nt*(.0802894+-.02855*lt+199025e-9*nt)+lt*(.0998909+-.0491032*lt))]}function Lr(je,Ge){return[v(je)/r(Ge),f(Ge)*r(je)]}function Xr(je){var Ge=r(je),nt=f(w+je/2);function lt(_t,mt){var Ct=mt-je,rr=t(Ct)<l?_t*Ge:t(rr=w+mt/2)<l||t(t(rr)-m)<l?0:_t*Ct/p(f(rr)/nt);return[rr,Ct]}return lt.invert=function(_t,mt){var Ct,rr=mt+je;return[t(mt)<l?_t/Ge:t(Ct=w+rr/2)<l||t(t(Ct)-m)<l?0:_t*p(f(Ct)/nt)/mt,rr]},lt}function Un(je,Ge){return[je,1.25*p(f(w+.4*Ge))]}function qr(je){var Ge=je.length-1;function nt(lt,_t){for(var mt,Ct=r(_t),rr=2/(1+Ct*r(lt)),ir=rr*Ct*v(lt),$t=rr*v(_t),sr=Ge,gr=je[sr],Tr=gr[0],Ar=gr[1];--sr>=0;)Tr=(gr=je[sr])[0]+ir*(mt=Tr)-$t*Ar,Ar=gr[1]+ir*Ar+$t*mt;return[Tr=ir*(mt=Tr)-$t*Ar,Ar=ir*Ar+$t*mt]}return nt.invert=function(lt,_t){var mt=20,Ct=lt,rr=_t;do{for(var ir,$t=Ge,sr=je[$t],gr=sr[0],Tr=sr[1],Ar=0,Br=0;--$t>=0;)Ar=gr+Ct*(ir=Ar)-rr*Br,Br=Tr+Ct*Br+rr*ir,gr=(sr=je[$t])[0]+Ct*(ir=gr)-rr*Tr,Tr=sr[1]+Ct*Tr+rr*ir;var un,xn,Fn=(Ar=gr+Ct*(ir=Ar)-rr*Br)*Ar+(Br=Tr+Ct*Br+rr*ir)*Br;Ct-=un=((gr=Ct*(ir=gr)-rr*Tr-lt)*Ar+(Tr=Ct*Tr+rr*ir-_t)*Br)/Fn,rr-=xn=(Tr*Ar-gr*Br)/Fn}while(t(un)+t(xn)>1e-12&&--mt>0);if(mt){var Hn=C(Ct*Ct+rr*rr),Kn=2*e(.5*Hn),qn=v(Kn);return[i(Ct*qn,Hn*r(Kn)),Hn?D(rr*qn/Hn):0]}},nt}cn.invert=function(je,Ge){var nt=t(je),lt=t(Ge),_t=l,mt=m;lt<In?mt*=lt/In:_t+=6*S(In/lt);for(var Ct=0;Ct<25;Ct++){var rr=v(mt),ir=C(r(mt)),$t=v(mt/2),sr=r(mt/2),gr=v(_t/6),Tr=r(_t/6),Ar=.5*_t*(1+ir)-nt,Br=mt/(sr*Tr)-lt,un=ir?-.25*_t*rr/ir:0,xn=.5*(1+ir),Fn=(1+.5*mt*$t/sr)/(sr*Tr),Hn=mt/sr*(gr/6)/(Tr*Tr),Kn=un*Hn-Fn*xn,qn=(Ar*Hn-Br*xn)/Kn,wi=(Br*un-Ar*Fn)/Kn;if(mt-=qn,_t-=wi,t(qn)<l&&t(wi)<l)break}return[je<0?-_t:_t,Ge<0?-mt:mt]},jr.invert=function(je,Ge){var nt=h(je)*x,lt=Ge/2,_t=50;do{var mt=nt*nt,Ct=lt*lt,rr=nt*lt,ir=nt*(.975534+Ct*(-.0143059*mt-.119161+-.0547009*Ct))-je,$t=lt*(1.00384+mt*(.0802894+-.02855*Ct+199025e-9*mt)+Ct*(.0998909+-.0491032*Ct))-Ge,sr=.975534-Ct*(.119161+3*mt*.0143059+.0547009*Ct),gr=-rr*(.238322+.2188036*Ct+.0286118*mt),Tr=rr*(.1605788+7961e-7*mt+-.0571*Ct),Ar=1.00384+mt*(.0802894+199025e-9*mt)+Ct*(3*(.0998909-.02855*mt)-.245516*Ct),Br=gr*Tr-Ar*sr,un=($t*gr-ir*Ar)/Br,xn=(ir*Tr-$t*sr)/Br;nt-=un,lt-=xn}while((t(un)>l||t(xn)>l)&&--_t>0);return _t&&[nt,lt]},Lr.invert=function(je,Ge){var nt=je*je,lt=Ge*Ge+1,_t=nt+lt,mt=je?b*C((_t-C(_t*_t-4*nt))/nt):1/C(lt);return[D(je*mt),h(Ge)*S(mt)]},Un.invert=function(je,Ge){return[je,2.5*e(o(.8*Ge))-.625*x]};var On=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Tn=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],rn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Vn=[[.9245,0],[0,0],[.01943,0]],ar=[[.721316,0],[0,0],[-.00881625,-.00617325]];function zt(je,Ge){var nt=g.geoProjection(qr(je)).rotate(Ge).clipAngle(90),lt=g.geoRotation(Ge),_t=nt.center;return delete nt.rotate,nt.center=function(mt){return arguments.length?_t(lt(mt)):lt.invert(_t())},nt}var Gt=C(6),mr=C(7);function Er(je,Ge){var nt=D(7*v(Ge)/(3*Gt));return[Gt*je*(2*r(2*nt/3)-1)/mr,9*v(nt/3)/mr]}function tn(je,Ge){for(var nt,lt=(1+b)*v(Ge),_t=Ge,mt=0;mt<25&&(_t-=nt=(v(_t/2)+v(_t)-lt)/(.5*r(_t/2)+r(_t)),!(t(nt)<l));mt++);return[je*(1+2*r(_t)/r(_t/2))/(3*k),2*C(3)*v(_t/2)/C(2+k)]}function Qr(je,Ge){for(var nt,lt=C(6/(4+x)),_t=(1+x/4)*v(Ge),mt=Ge/2,Ct=0;Ct<25&&(mt-=nt=(mt/2+v(mt)-_t)/(.5+r(mt)),!(t(nt)<l));Ct++);return[lt*(.5+r(mt))*je/1.5,lt*mt]}function Cr(je,Ge){var nt=Ge*Ge,lt=nt*nt,_t=nt*lt;return[je*(.84719-.13063*nt+_t*_t*(.05494*nt-.04515-.02326*lt+.00331*_t)),Ge*(1.01183+lt*lt*(.01926*nt-.02625-.00396*lt))]}function Mr(je,Ge){return[je*(1+r(Ge))/2,2*(Ge-f(Ge/2))]}Er.invert=function(je,Ge){var nt=3*D(Ge*mr/9);return[je*mr/(Gt*(2*r(2*nt/3)-1)),D(3*v(nt)*Gt/7)]},tn.invert=function(je,Ge){var nt=Ge*C(2+k)/(2*C(3)),lt=2*D(nt);return[3*k*je/(1+2*r(lt)/r(lt/2)),D((nt+v(lt))/(1+b))]},Qr.invert=function(je,Ge){var nt=C(6/(4+x)),lt=Ge/nt;return t(t(lt)-m)<l&&(lt=lt<0?-m:m),[1.5*je/(nt*(.5+r(lt))),D((lt/2+v(lt))/(1+x/4))]},Cr.invert=function(je,Ge){var nt,lt,_t,mt,Ct=Ge,rr=25;do{Ct-=nt=(Ct*(1.01183+(_t=(lt=Ct*Ct)*lt)*_t*(.01926*lt-.02625-.00396*_t))-Ge)/(1.01183+_t*_t*(.21186*lt-.23625+-.05148*_t))}while(t(nt)>1e-12&&--rr>0);return[je/(.84719-.13063*(lt=Ct*Ct)+(mt=lt*(_t=lt*lt))*mt*(.05494*lt-.04515-.02326*_t+.00331*mt)),Ct]},Mr.invert=function(je,Ge){for(var nt=Ge/2,lt=0,_t=1/0;lt<10&&t(_t)>l;++lt){var mt=r(Ge/2);Ge-=_t=(Ge-f(Ge/2)-nt)/(1-.5/(mt*mt))}return[2*je/(1+r(Ge)),Ge]};var Ir=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Sr(je,Ge){var nt=v(Ge),lt=r(Ge),_t=h(je);if(0===je||t(Ge)===m)return[0,Ge];if(0===Ge)return[je,0];if(t(je)===m)return[je*lt,m*nt];var mt=x/(2*je)-2*je/x,Ct=2*Ge/x,rr=(1-Ct*Ct)/(nt-Ct),ir=mt*mt,$t=rr*rr,sr=1+ir/$t,gr=1+$t/ir,Tr=(mt*nt/rr-mt/2)/sr,Ar=($t*nt/ir+rr/2)/gr,Br=Ar*Ar-($t*nt*nt/ir+rr*nt-1)/gr;return[m*(Tr+C(Tr*Tr+lt*lt/sr)*_t),m*(Ar+C(Br<0?0:Br)*h(-Ge*mt)*_t)]}function Pr(je,Ge){var nt=Ge*Ge;return[je,Ge*(1.0148+nt*nt*(.23185+nt*(.02406*nt-.14499)))]}function Kr(je,Ge){if(t(Ge)<l)return[je,0];var nt=f(Ge),lt=je*v(Ge);return[v(lt)/nt,Ge+(1-r(lt))/nt]}function Cn(je,Ge){return[je[0]*Ge[0]+je[1]*Ge[3],je[0]*Ge[1]+je[1]*Ge[4],je[0]*Ge[2]+je[1]*Ge[5]+je[2],je[3]*Ge[0]+je[4]*Ge[3],je[3]*Ge[1]+je[4]*Ge[4],je[3]*Ge[2]+je[4]*Ge[5]+je[5]]}function ln(je,Ge){return[je[0]-Ge[0],je[1]-Ge[1]]}function yn(je){return C(je[0]*je[0]+je[1]*je[1])}function Zr(je,Ge,nt){function lt(Ct,rr){var ir,$t=Ge(Ct,rr),sr=$t.project([Ct*A,rr*A]);return(ir=$t.transform)?[ir[0]*sr[0]+ir[1]*sr[1]+ir[2],-(ir[3]*sr[0]+ir[4]*sr[1]+ir[5])]:(sr[1]=-sr[1],sr)}(function Ct(rr,ir){if(rr.edges=function(Br){for(var un=Br.length,xn=[],Fn=Br[un-1],Hn=0;Hn<un;++Hn)xn.push([Fn,Fn=Br[Hn]]);return xn}(rr.face),ir.face){var $t=rr.shared=function(Br,un){for(var xn,Fn,Hn=Br.length,Kn=null,qn=0;qn<Hn;++qn){xn=Br[qn];for(var wi=un.length;--wi>=0;)if(xn[0]===(Fn=un[wi])[0]&&xn[1]===Fn[1]){if(Kn)return[Kn,xn];Kn=xn}}}(rr.face,ir.face),sr=function(je,Ge){var Ct,rr,nt=ln(je[1],je[0]),lt=ln(Ge[1],Ge[0]),_t=i((Ct=nt)[0]*(rr=lt)[1]-Ct[1]*rr[0],Ct[0]*rr[0]+Ct[1]*rr[1]),mt=yn(nt)/yn(lt);return Cn([1,0,je[0][0],0,1,je[0][1]],Cn([mt,0,0,0,mt,0],Cn([r(_t),v(_t),0,-v(_t),r(_t),0],[1,0,-Ge[0][0],0,1,-Ge[0][1]])))}($t.map(ir.project),$t.map(rr.project));rr.transform=ir.transform?Cn(ir.transform,sr):sr;for(var gr=ir.edges,Tr=0,Ar=gr.length;Tr<Ar;++Tr)Wr($t[0],gr[Tr][1])&&Wr($t[1],gr[Tr][0])&&(gr[Tr]=rr),Wr($t[0],gr[Tr][0])&&Wr($t[1],gr[Tr][1])&&(gr[Tr]=rr);for(Tr=0,Ar=(gr=rr.edges).length;Tr<Ar;++Tr)Wr($t[0],gr[Tr][0])&&Wr($t[1],gr[Tr][1])&&(gr[Tr]=ir),Wr($t[0],gr[Tr][1])&&Wr($t[1],gr[Tr][0])&&(gr[Tr]=ir)}else rr.transform=ir.transform;return rr.children&&rr.children.forEach(function(Br){Ct(Br,rr)}),rr})(je,{transform:null}),pn(je)&&(lt.invert=function(Ct,rr){var ir=function $t(sr,gr){var Kn,qn,Tr=sr.project.invert,Ar=sr.transform,Br=gr;if(Ar&&(Br=[(Ar=[(qn=1/((Kn=Ar)[0]*Kn[4]-Kn[1]*Kn[3]))*Kn[4],-qn*Kn[1],qn*(Kn[1]*Kn[5]-Kn[2]*Kn[4]),-qn*Kn[3],qn*Kn[0],qn*(Kn[2]*Kn[3]-Kn[0]*Kn[5])])[0]*Br[0]+Ar[1]*Br[1]+Ar[2],Ar[3]*Br[0]+Ar[4]*Br[1]+Ar[5]]),Tr&&sr===function(Kn){return Ge(Kn[0]*I,Kn[1]*I)}(un=Tr(Br)))return un;for(var un,xn=sr.children,Fn=0,Hn=xn&&xn.length;Fn<Hn;++Fn)if(un=$t(xn[Fn],gr))return un}(je,[Ct,-rr]);return ir&&(ir[0]*=I,ir[1]*=I,ir)});var _t=g.geoProjection(lt),mt=_t.stream;return _t.stream=function(Ct){var rr=_t.rotate(),ir=mt(Ct),$t=(_t.rotate([0,0]),mt(Ct));return _t.rotate(rr),ir.sphere=function(){$t.polygonStart(),$t.lineStart(),function sr(gr,Tr,Ar){var Br,un,xn=Tr.edges,Fn=xn.length,Hn={type:"MultiPoint",coordinates:Tr.face},Kn=Tr.face.filter(function(ba){return 90!==t(ba[1])}),qn=g.geoBounds({type:"MultiPoint",coordinates:Kn}),wi=!1,Li=-1,Ri=qn[1][0]-qn[0][0],Hi=180===Ri||360===Ri?[(qn[0][0]+qn[1][0])/2,(qn[0][1]+qn[1][1])/2]:g.geoCentroid(Hn);if(Ar)for(;++Li<Fn&&xn[Li]!==Ar;);++Li;for(var Ui=0;Ui<Fn;++Ui)un=xn[(Ui+Li)%Fn],Array.isArray(un)?(wi||(gr.point((Br=g.geoInterpolate(un[0],Hi)(l))[0],Br[1]),wi=!0),gr.point((Br=g.geoInterpolate(un[1],Hi)(l))[0],Br[1])):(wi=!1,un!==Ar&&sr(gr,un,Tr))}($t,je),$t.lineEnd(),$t.polygonEnd()},ir},_t.angle(null==nt?-30:nt*A)}function Wr(je,Ge){return je&&Ge&&je[0]===Ge[0]&&je[1]===Ge[1]}function pn(je){return je.project.invert||je.children&&je.children.some(pn)}Sr.invert=function(je,Ge){var nt=(je/=m)*je,lt=nt+(Ge/=m)*Ge,_t=x*x;return[je?(lt-1+C((1-lt)*(1-lt)+4*nt))/(2*je)*m:0,Q(function(mt){return lt*(x*v(mt)-2*mt)*x+4*mt*mt*(Ge-v(mt))+2*x*mt-_t*Ge},0)]},Pr.invert=function(je,Ge){Ge>1.790857183?Ge=1.790857183:Ge<-1.790857183&&(Ge=-1.790857183);var nt,lt=Ge;do{var _t=lt*lt;lt-=nt=(lt*(1.0148+_t*_t*(.23185+_t*(.02406*_t-.14499)))-Ge)/(1.0148+_t*_t*(5*.23185+_t*(.21654*_t-1.01493)))}while(t(nt)>l);return[je,lt]},Kr.invert=function(je,Ge){if(t(Ge)<l)return[je,0];var nt,lt=je*je+Ge*Ge,_t=.5*Ge,mt=10;do{var Ct=f(_t),rr=1/r(_t),ir=lt-2*Ge*_t+_t*_t;_t-=nt=(Ct*ir+2*(_t-Ge))/(2+ir*rr*rr+2*(_t-Ge)*Ct)}while(t(nt)>l&&--mt>0);return Ct=f(_t),[(t(Ge)<t(_t+1/Ct)?D(je*Ct):h(Ge)*h(je)*(S(t(je*Ct))+m))/v(_t),_t]};var Mn=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Dn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(je){return je.map(function(Ge){return Mn[Ge]})}),hi=2/C(3);function Qn(je,Ge){var nt=Pe(je,Ge);return[nt[0]*hi,nt[1]]}function An(je,Ge){for(var nt=0,lt=je.length,_t=0;nt<lt;++nt)_t+=je[nt]*Ge[nt];return _t}function ci(je){return[i(je[1],je[0])*A,D(s(-1,a(1,je[2])))*A]}function yi(je){var Ge=je[0]*I,nt=je[1]*I,lt=r(nt);return[lt*r(Ge),lt*v(Ge),v(nt)]}function Xi(){}function Da(je,Ge){return{type:"FeatureCollection",features:je.features.map(function(nt){return la(nt,Ge)})}}function la(je,Ge){return{type:"Feature",id:je.id,properties:je.properties,geometry:Ma(je.geometry,Ge)}}function Ma(je,Ge){if(!je)return null;if("GeometryCollection"===je.type)return _t=Ge,{type:"GeometryCollection",geometries:je.geometries.map(function(mt){return Ma(mt,_t)})};var _t,nt;switch(je.type){case"Point":case"MultiPoint":nt=_a;break;case"LineString":case"MultiLineString":nt=Co;break;case"Polygon":case"MultiPolygon":case"Sphere":nt=Zo;break;default:return null}return g.geoStream(je,Ge(nt)),nt.result()}Qn.invert=function(je,Ge){return Pe.invert(je/hi,Ge)};var Oi=[],Yi=[],_a={point:function(je,Ge){Oi.push([je,Ge])},result:function(){var je=Oi.length?Oi.length<2?{type:"Point",coordinates:Oi[0]}:{type:"MultiPoint",coordinates:Oi}:null;return Oi=[],je}},Co={lineStart:Xi,point:function(je,Ge){Oi.push([je,Ge])},lineEnd:function(){Oi.length&&(Yi.push(Oi),Oi=[])},result:function(){var je=Yi.length?Yi.length<2?{type:"LineString",coordinates:Yi[0]}:{type:"MultiLineString",coordinates:Yi}:null;return Yi=[],je}},Zo={polygonStart:Xi,lineStart:Xi,point:function(je,Ge){Oi.push([je,Ge])},lineEnd:function(){var je=Oi.length;if(je){do{Oi.push(Oi[0].slice())}while(++je<4);Yi.push(Oi),Oi=[]}},polygonEnd:Xi,result:function(){if(!Yi.length)return null;var je=[],Ge=[];return Yi.forEach(function(nt){!function(lt){if((_t=lt.length)<4)return!1;for(var _t,mt=0,Ct=lt[_t-1][1]*lt[0][0]-lt[_t-1][0]*lt[0][1];++mt<_t;)Ct+=lt[mt-1][1]*lt[mt][0]-lt[mt-1][0]*lt[mt][1];return Ct<=0}(nt)?Ge.push(nt):je.push([nt])}),Ge.forEach(function(nt){var lt=nt[0];je.some(function(_t){if(function(mt,Ct){for(var rr=Ct[0],ir=Ct[1],$t=!1,sr=0,gr=mt.length,Tr=gr-1;sr<gr;Tr=sr++){var Ar=mt[sr],Br=Ar[0],un=Ar[1],xn=mt[Tr],Hn=xn[1];un>ir^Hn>ir&&rr<(xn[0]-Br)*(ir-un)/(Hn-un)+Br&&($t=!$t)}return $t}(_t[0],lt))return _t.push(nt),!0})||je.push([nt])}),Yi=[],je.length?je.length>1?{type:"MultiPolygon",coordinates:je}:{type:"Polygon",coordinates:je[0]}:null}};function Xa(je){var Ge=je(m,0)[0]-je(-m,0)[0];function nt(lt,_t){var mt=t(lt)<m,Ct=je(mt?lt:lt>0?lt-x:lt+x,_t),rr=(Ct[0]-Ct[1])*b,ir=(Ct[0]+Ct[1])*b;if(mt)return[rr,ir];var $t=Ge*b,sr=rr>0^ir>0?-1:1;return[sr*rr-h(ir)*$t,sr*ir-h(rr)*$t]}return je.invert&&(nt.invert=function(lt,_t){var mt=(lt+_t)*b,Ct=(_t-lt)*b,rr=t(mt)<.5*Ge&&t(Ct)<.5*Ge;if(!rr){var ir=Ge*b,$t=mt>0^Ct>0?-1:1,sr=-$t*lt+(Ct>0?1:-1)*ir,gr=-$t*_t+(mt>0?1:-1)*ir;mt=(-sr-gr)*b,Ct=(sr-gr)*b}var Tr=je.invert(mt,Ct);return rr||(Tr[0]+=mt>0?x:-x),Tr}),g.geoProjection(nt).rotate([-90,-90,45]).clipAngle(179.999)}function to(){return Xa(Rt).scale(111.48)}function Uo(je){var Ge=v(je);function nt(lt,_t){var mt=Ge?f(lt*Ge/2)/Ge:lt/2;if(!_t)return[2*mt,-je];var Ct=2*e(mt*v(_t)),rr=1/f(_t);return[v(Ct)*rr,_t+(1-r(Ct))*rr-je]}return nt.invert=function(lt,_t){if(t(_t+=je)<l)return[Ge?2*e(Ge*lt/2)/Ge:lt,0];var mt,Ct=lt*lt+_t*_t,rr=0,ir=10;do{var $t=f(rr),sr=1/r(rr),gr=Ct-2*_t*rr+rr*rr;rr-=mt=($t*gr+2*(rr-_t))/(2+gr*sr*sr+2*(rr-_t)*$t)}while(t(mt)>l&&--ir>0);var Tr=lt*($t=f(rr)),Ar=f(t(_t)<t(rr+1/$t)?.5*D(Tr):.5*S(Tr)+x/4)/v(rr);return[Ge?2*e(Ge*Ar)/Ge:2*Ar,rr]},nt}var Ji=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Eo(je,Ge){var nt,lt=a(18,36*t(Ge)/x),_t=n(lt),mt=lt-_t,Ct=(nt=Ji[_t])[0],rr=nt[1],ir=(nt=Ji[++_t])[0],$t=nt[1],sr=(nt=Ji[a(19,++_t)])[0],gr=nt[1];return[je*(ir+mt*(sr-Ct)/2+mt*mt*(sr-2*ir+Ct)/2),(Ge>0?m:-m)*($t+mt*(gr-rr)/2+mt*mt*(gr-2*$t+rr)/2)]}function lo(je,Ge){var nt=function(Ct){function rr(ir,$t){var sr=r($t),gr=(Ct-1)/(Ct-sr*r(ir));return[gr*sr*v(ir),gr*v($t)]}return rr.invert=function(ir,$t){var sr=ir*ir+$t*$t,gr=C(sr),Tr=(Ct-C(1-sr*(Ct+1)/(Ct-1)))/((Ct-1)/gr+gr/(Ct-1));return[i(ir*Tr,gr*C(1-Tr*Tr)),gr?D($t*Tr/gr):0]},rr}(je);if(!Ge)return nt;var lt=r(Ge),_t=v(Ge);function mt(Ct,rr){var ir=nt(Ct,rr),$t=ir[1],sr=$t*_t/(je-1)+lt;return[ir[0]*lt/sr,$t/sr]}return mt.invert=function(Ct,rr){var ir=(je-1)/(je-1-rr*_t);return nt.invert(ir*Ct,ir*rr*lt)},mt}Ji.forEach(function(je){je[1]*=1.0144}),Eo.invert=function(je,Ge){var nt=Ge/m,lt=90*nt,_t=a(18,t(lt/5)),mt=s(0,n(_t));do{var Ct=Ji[mt][1],rr=Ji[mt+1][1],ir=Ji[a(19,mt+2)][1],$t=ir-Ct,sr=ir-2*rr+Ct,gr=2*(t(nt)-rr)/$t,Tr=sr/$t,Ar=gr*(1-Tr*gr*(1-2*Tr*gr));if(Ar>=0||1===mt){lt=(Ge>=0?5:-5)*(Ar+_t);var Br,un=50;do{Ar=(_t=a(18,t(lt)/5))-(mt=n(_t)),Ct=Ji[mt][1],rr=Ji[mt+1][1],ir=Ji[a(19,mt+2)][1],lt-=(Br=(Ge>=0?m:-m)*(rr+Ar*(ir-Ct)/2+Ar*Ar*(ir-2*rr+Ct)/2)-Ge)*A}while(t(Br)>1e-12&&--un>0);break}}while(--mt>=0);var xn=Ji[mt][0],Fn=Ji[mt+1][0],Hn=Ji[a(19,mt+2)][0];return[je/(Fn+Ar*(Hn-xn)/2+Ar*Ar*(Hn-2*Fn+xn)/2),lt*I]};var Aa=-179.9999,ro=179.9999,mo=-89.9999;function Mo(je){return je.length>0}function Va(je){return-90===je||90===je?[0,je]:[-180,(Ge=je,Math.floor(1e4*Ge)/1e4)];var Ge}function ga(je){var Ge=je[0],nt=je[1],lt=!1;return Ge<=Aa?(Ge=-180,lt=!0):Ge>=ro&&(Ge=180,lt=!0),nt<=mo?(nt=-90,lt=!0):nt>=89.9999&&(nt=90,lt=!0),lt?[Ge,nt]:je}function Ja(je){return je.map(ga)}function bs(je,Ge,nt){for(var lt=0,_t=je.length;lt<_t;++lt){var mt=je[lt].slice();nt.push({index:-1,polygon:Ge,ring:mt});for(var Ct=0,rr=mt.length;Ct<rr;++Ct){var ir=mt[Ct],$t=ir[0],sr=ir[1];if($t<=Aa||$t>=ro||sr<=mo||sr>=89.9999){mt[Ct]=ga(ir);for(var gr=Ct+1;gr<rr;++gr){var Tr=mt[gr],Ar=Tr[0],Br=Tr[1];if(Ar>Aa&&Ar<ro&&Br>mo&&Br<89.9999)break}if(gr===Ct+1)continue;if(Ct){var un={index:-1,polygon:Ge,ring:mt.slice(0,Ct+1)};un.ring[un.ring.length-1]=Va(sr),nt[nt.length-1]=un}else nt.pop();if(gr>=rr)break;nt.push({index:-1,polygon:Ge,ring:mt=mt.slice(gr-1)}),mt[0]=Va(mt[0][1]),Ct=-1,rr=mt.length}}}}function As(je){var Ge,nt,lt,_t,mt,Ct,rr=je.length,ir={},$t={};for(Ge=0;Ge<rr;++Ge)(lt=(nt=je[Ge]).ring[0])[0]!==(mt=nt.ring[nt.ring.length-1])[0]||lt[1]!==mt[1]?(nt.index=Ge,ir[lt]=$t[mt]=nt):(nt.polygon.push(nt.ring),je[Ge]=null);for(Ge=0;Ge<rr;++Ge)if(nt=je[Ge]){if(_t=$t[lt=nt.ring[0]],Ct=ir[mt=nt.ring[nt.ring.length-1]],delete ir[lt],delete $t[mt],lt[0]===mt[0]&&lt[1]===mt[1]){nt.polygon.push(nt.ring);continue}_t?(delete $t[lt],delete ir[_t.ring[0]],_t.ring.pop(),je[_t.index]=null,nt={index:-1,polygon:_t.polygon,ring:_t.ring.concat(nt.ring)},_t===Ct?nt.polygon.push(nt.ring):(nt.index=rr++,je.push(ir[nt.ring[0]]=$t[nt.ring[nt.ring.length-1]]=nt))):Ct?(delete ir[mt],delete $t[Ct.ring[Ct.ring.length-1]],nt.ring.pop(),nt={index:rr++,polygon:Ct.polygon,ring:nt.ring.concat(Ct.ring)},je[Ct.index]=null,je.push(ir[nt.ring[0]]=$t[nt.ring[nt.ring.length-1]]=nt)):(nt.ring.push(nt.ring[0]),nt.polygon.push(nt.ring))}}function Ki(je){var Ge={type:"Feature",geometry:fs(je.geometry)};return null!=je.id&&(Ge.id=je.id),null!=je.bbox&&(Ge.bbox=je.bbox),null!=je.properties&&(Ge.properties=je.properties),Ge}function fs(je){if(null==je)return je;var Ge,nt,lt,_t;switch(je.type){case"GeometryCollection":Ge={type:"GeometryCollection",geometries:je.geometries.map(fs)};break;case"Point":Ge={type:"Point",coordinates:ga(je.coordinates)};break;case"MultiPoint":case"LineString":Ge={type:je.type,coordinates:Ja(je.coordinates)};break;case"MultiLineString":Ge={type:"MultiLineString",coordinates:je.coordinates.map(Ja)};break;case"Polygon":var mt=[];bs(je.coordinates,mt,nt=[]),As(nt),Ge={type:"Polygon",coordinates:mt};break;case"MultiPolygon":nt=[],lt=-1,_t=je.coordinates.length;for(var Ct=new Array(_t);++lt<_t;)bs(je.coordinates[lt],Ct[lt]=[],nt);As(nt),Ge={type:"MultiPolygon",coordinates:Ct.filter(Mo)};break;default:return je}return null!=je.bbox&&(Ge.bbox=je.bbox),Ge}function $o(je,Ge){var nt=f(Ge/2),lt=v(w*nt);return[je*(.74482-.34588*lt*lt),1.70711*nt]}function Ls(je,Ge,nt){var lt=g.geoInterpolate(Ge,nt),_t=lt(.5),mt=g.geoRotation([-_t[0],-_t[1]])(Ge),Ct=lt.distance/2,rr=-D(v(mt[1]*I)/v(Ct)),ir=[-_t[0],-_t[1],-(mt[0]>0?x-rr:rr)*A],$t=g.geoProjection(je(Ct)).rotate(ir),sr=g.geoRotation(ir),gr=$t.center;return delete $t.rotate,$t.center=function(Tr){return arguments.length?gr(sr(Tr)):sr.invert(gr())},$t.clipAngle(90)}function es(je){var Ge=r(je);function nt(lt,_t){var mt=g.geoGnomonicRaw(lt,_t);return mt[0]*=Ge,mt}return nt.invert=function(lt,_t){return g.geoGnomonicRaw.invert(lt/Ge,_t)},nt}function ss(je,Ge){return Ls(es,je,Ge)}function Wo(je){if(!(je*=2))return g.geoAzimuthalEquidistantRaw;var Ge=-je/2,nt=-Ge,lt=je*je,_t=f(nt),mt=.5/v(nt);function Ct(rr,ir){var $t=S(r(ir)*r(rr-Ge)),sr=S(r(ir)*r(rr-nt));return[(($t*=$t)-(sr*=sr))/(2*je),(ir<0?-1:1)*C(4*lt*sr-(lt-$t+sr)*(lt-$t+sr))/(2*je)]}return Ct.invert=function(rr,ir){var $t,sr,gr=ir*ir,Tr=r(C(gr+($t=rr+Ge)*$t)),Ar=r(C(gr+($t=rr+nt)*$t));return[i(sr=Tr-Ar,$t=(Tr+Ar)*_t),(ir<0?-1:1)*S(C($t*$t+sr*sr)*mt)]},Ct}function go(je,Ge){return Ls(Wo,je,Ge)}function vo(je,Ge){if(t(Ge)<l)return[je,0];var nt=t(Ge/m),lt=D(nt);if(t(je)<l||t(t(Ge)-m)<l)return[0,h(Ge)*x*f(lt/2)];var _t=r(lt),mt=t(x/je-je/x)/2,Ct=mt*mt,rr=_t/(nt+_t-1),ir=rr*(2/nt-1),$t=ir*ir,sr=$t+Ct,gr=rr-$t,Tr=Ct+rr;return[h(je)*x*(mt*gr+C(Ct*gr*gr-sr*(rr*rr-$t)))/sr,h(Ge)*x*(ir*Tr-mt*C((Ct+1)*sr-Tr*Tr))/sr]}function Lo(je,Ge){if(t(Ge)<l)return[je,0];var nt=t(Ge/m),lt=D(nt);if(t(je)<l||t(t(Ge)-m)<l)return[0,h(Ge)*x*f(lt/2)];var _t=r(lt),mt=t(x/je-je/x)/2,Ct=mt*mt,rr=_t*(C(1+Ct)-mt*_t)/(1+Ct*nt*nt);return[h(je)*x*rr,h(Ge)*x*C(1-rr*(2*mt+rr))]}function Do(je,Ge){if(t(Ge)<l)return[je,0];var nt=Ge/m,lt=D(nt);if(t(je)<l||t(t(Ge)-m)<l)return[0,x*f(lt/2)];var _t=(x/je-je/x)/2,mt=nt/(1+r(lt));return[x*(h(je)*C(_t*_t+1-mt*mt)-_t),x*mt]}function pa(je,Ge){if(!Ge)return[je,0];var nt=t(Ge);if(!je||nt===m)return[0,Ge];var lt=nt/m,_t=lt*lt,mt=(8*lt-_t*(_t+2)-5)/(2*_t*(lt-1)),Ct=mt*mt,rr=lt*mt,ir=_t+Ct+2*rr,$t=lt+3*mt,sr=je/m,gr=sr+1/sr,Tr=h(t(je)-m)*C(gr*gr-4),Ar=Tr*Tr,Br=(Tr*(ir+Ct-1)+2*C(ir*(_t+Ct*Ar-1)+(1-_t)*(_t*($t*$t+4*Ct)+12*rr*Ct+4*Ct*Ct)))/(4*ir+Ar);return[h(je)*m*Br,h(Ge)*m*C(1+Tr*t(Br)-Br*Br)]}function co(je,Ge,nt,lt){var _t=x/3;je=s(je,l),Ge=s(Ge,l),je=a(je,m),Ge=a(Ge,x-l),nt=s(nt,0),nt=a(nt,100-l);var mt=(lt=s(lt,l))/100,Ct=S((nt/100+1)*r(_t))/_t,rr=v(je)/v(Ct*m),ir=Ge/x,$t=C(mt*v(je/2)/v(Ge/2));return function(sr,gr,Tr,Ar,Br){function un(xn,Fn){var Hn=Tr*v(Ar*Fn),Kn=C(1-Hn*Hn),qn=C(2/(1+Kn*r(xn*=Br)));return[sr*Kn*qn*v(xn),gr*Hn*qn]}return un.invert=function(xn,Fn){var Hn=xn/sr,Kn=Fn/gr,qn=C(Hn*Hn+Kn*Kn),wi=2*D(qn/2);return[i(xn*f(wi),sr*qn)/Br,qn&&D(Fn*v(wi)/(gr*Tr*qn))/Ar]},un}($t/C(ir*rr*Ct),1/($t*C(ir*rr*Ct)),rr,Ct,ir)}function yo(){var je=65*I,Ge=60*I,nt=20,lt=200,_t=g.geoProjectionMutator(co),mt=_t(je,Ge,nt,lt);return mt.poleline=function(Ct){return arguments.length?_t(je=+Ct*I,Ge,nt,lt):je*A},mt.parallels=function(Ct){return arguments.length?_t(je,Ge=+Ct*I,nt,lt):Ge*A},mt.inflation=function(Ct){return arguments.length?_t(je,Ge,nt=+Ct,lt):nt},mt.ratio=function(Ct){return arguments.length?_t(je,Ge,nt,lt=+Ct):lt},mt.scale(163.775)}$o.invert=function(je,Ge){var nt=Ge/1.70711,lt=v(w*nt);return[je/(.74482-.34588*lt*lt),2*e(nt)]},vo.invert=function(je,Ge){if(t(Ge)<l)return[je,0];if(t(je)<l)return[0,m*v(2*e(Ge/x))];var nt=(je/=x)*je,lt=(Ge/=x)*Ge,_t=nt+lt,mt=_t*_t,Ct=-t(Ge)*(1+_t),rr=Ct-2*lt+nt,ir=-2*Ct+1+2*lt+mt,$t=lt/ir+(2*rr*rr*rr/(ir*ir*ir)-9*Ct*rr/(ir*ir))/27,sr=(Ct-rr*rr/(3*ir))/ir,gr=2*C(-sr/3),Tr=S(3*$t/(sr*gr))/3;return[x*(_t-1+C(1+2*(nt-lt)+mt))/(2*je),h(Ge)*x*(-gr*r(Tr+x/3)-rr/(3*ir))]},Lo.invert=function(je,Ge){if(!je)return[0,m*v(2*e(Ge/x))];var nt=t(je/x),lt=(1-nt*nt-(Ge/=x)*Ge)/(2*nt),_t=C(lt*lt+1);return[h(je)*x*(_t-lt),h(Ge)*m*v(2*i(C((1-2*lt*nt)*(lt+_t)-nt),C(_t+lt+nt)))]},Do.invert=function(je,Ge){if(!Ge)return[je,0];var nt=Ge/x,lt=(x*x*(1-nt*nt)-je*je)/(2*x*je);return[je?x*(h(je)*C(lt*lt+1)-lt):0,m*v(2*e(nt))]},pa.invert=function(je,Ge){var nt;if(!je||!Ge)return[je,Ge];Ge/=x;var lt=h(je)*je/m,_t=(lt*lt-1+4*Ge*Ge)/t(lt),mt=_t*_t,Ct=2*Ge,rr=50;do{var ir=Ct*Ct,$t=(8*Ct-ir*(ir+2)-5)/(2*ir*(Ct-1)),sr=(3*Ct-ir*Ct-10)/(2*ir*Ct),gr=$t*$t,Tr=Ct*$t,Ar=Ct+$t,Br=Ar*Ar,un=Ct+3*$t,xn=-2*Ar*(4*Tr*gr+(1-4*ir+3*ir*ir)*(1+sr)+gr*(14*ir-6-mt+(8*ir-8-2*mt)*sr)+Tr*(12*ir-8+(10*ir-10-mt)*sr)),Fn=C(Br*(ir+gr*mt-1)+(1-ir)*(ir*(un*un+4*gr)+gr*(12*Tr+4*gr)));Ct-=nt=(_t*(Br+gr-1)+2*Fn-lt*(4*Br+mt))/(_t*(2*$t*sr+2*Ar*(1+sr))+xn/Fn-8*Ar*(_t*(-1+gr+Br)+2*Fn)*(1+sr)/(mt+4*Br))}while(nt>l&&--rr>0);return[h(je)*(C(_t*_t+4)+_t)*x/4,m*Ct]};var ps=4*x+3*C(3),uo=2*C(2*x*C(3)/ps),Bo=re(uo*C(3)/x,uo,ps/6);function ds(je,Ge){return[je*C(1-3*Ge*Ge/(x*x)),Ge]}function Io(je,Ge){var nt=r(Ge),lt=r(je)*nt,_t=1-lt,mt=r(je=i(v(je)*nt,-v(Ge))),Ct=v(je);return[Ct*(nt=C(1-lt*lt))-mt*_t,-mt*nt-Ct*_t]}function Gi(je,Ge){var nt=U(je,Ge);return[(nt[0]+je/m)/2,(nt[1]+Ge)/2]}ds.invert=function(je,Ge){return[je/C(1-3*Ge*Ge/(x*x)),Ge]},Io.invert=function(je,Ge){var nt=(je*je+Ge*Ge)/-2,lt=C(-nt*(2+nt)),_t=Ge*nt+je*lt,mt=je*nt-Ge*lt,Ct=C(mt*mt+_t*_t);return[i(lt*_t,Ct*(1+nt)),Ct?-D(lt*mt/Ct):0]},Gi.invert=function(je,Ge){var nt=je,lt=Ge,_t=25;do{var mt,Ct=r(lt),rr=v(lt),ir=v(2*lt),$t=rr*rr,sr=Ct*Ct,gr=v(nt),Tr=r(nt/2),Ar=v(nt/2),Br=Ar*Ar,un=1-sr*Tr*Tr,xn=un?S(Ct*Tr)*C(mt=1/un):mt=0,Fn=.5*(2*xn*Ct*Ar+nt/m)-je,Hn=.5*(xn*rr+lt)-Ge,Kn=.5*mt*(sr*Br+xn*Ct*Tr*$t)+.5/m,qn=mt*(gr*ir/4-xn*rr*Ar),wi=.125*mt*(ir*Ar-xn*rr*sr*gr),Li=.5*mt*($t*Tr+xn*Br*Ct)+.5,Ri=qn*wi-Li*Kn,Hi=(Hn*qn-Fn*Li)/Ri,Ui=(Fn*wi-Hn*Kn)/Ri;nt-=Hi,lt-=Ui}while((t(Hi)>l||t(Ui)>l)&&--_t>0);return[nt,lt]},d.geoNaturalEarth=g.geoNaturalEarth1,d.geoNaturalEarthRaw=g.geoNaturalEarth1Raw,d.geoAiry=function(){var je=m,Ge=g.geoProjectionMutator(H),nt=Ge(je);return nt.radius=function(lt){return arguments.length?Ge(je=lt*I):je*A},nt.scale(179.976).clipAngle(147)},d.geoAiryRaw=H,d.geoAitoff=function(){return g.geoProjection(U).scale(152.63)},d.geoAitoffRaw=U,d.geoArmadillo=function(){var je=20*I,Ge=je>=0?1:-1,nt=f(Ge*je),lt=g.geoProjectionMutator(X),_t=lt(je),mt=_t.stream;return _t.parallel=function(Ct){return arguments.length?(nt=f((Ge=(je=Ct*I)>=0?1:-1)*je),lt(je)):je*A},_t.stream=function(Ct){var rr=_t.rotate(),ir=mt(Ct),$t=(_t.rotate([0,0]),mt(Ct)),sr=_t.precision();return _t.rotate(rr),ir.sphere=function(){$t.polygonStart(),$t.lineStart();for(var gr=-180*Ge;Ge*gr<180;gr+=90*Ge)$t.point(gr,90*Ge);if(je)for(;Ge*(gr-=3*Ge*sr)>=-180;)$t.point(gr,Ge*-i(r(gr*I/2),nt)*A);$t.lineEnd(),$t.polygonEnd()},ir},_t.scale(218.695).center([0,28.0974])},d.geoArmadilloRaw=X,d.geoAugust=function(){return g.geoProjection(Z).scale(66.1603)},d.geoAugustRaw=Z,d.geoBaker=function(){return g.geoProjection(te).scale(112.314)},d.geoBakerRaw=te,d.geoBerghaus=function(){var je=5,Ge=g.geoProjectionMutator(z),nt=Ge(je),lt=nt.stream,_t=-r(.01*I),mt=v(.01*I);return nt.lobes=function(Ct){return arguments.length?Ge(je=+Ct):je},nt.stream=function(Ct){var rr=nt.rotate(),ir=lt(Ct),$t=(nt.rotate([0,0]),lt(Ct));return nt.rotate(rr),ir.sphere=function(){$t.polygonStart(),$t.lineStart();for(var sr=0,gr=360/je,Tr=2*x/je,Ar=90-180/je,Br=m;sr<je;++sr,Ar-=gr,Br-=Tr)$t.point(i(mt*r(Br),_t)*A,D(mt*v(Br))*A),Ar<-90?($t.point(-90,-180-Ar-.01),$t.point(-90,-180-Ar+.01)):($t.point(90,Ar+.01),$t.point(90,Ar-.01));$t.lineEnd(),$t.polygonEnd()},ir},nt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},d.geoBerghausRaw=z,d.geoBertin1953=function(){return g.geoProjection(J()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},d.geoBertin1953Raw=J,d.geoBoggs=function(){return g.geoProjection(de).scale(160.857)},d.geoBoggsRaw=de,d.geoBonne=function(){return ue(be).scale(123.082).center([0,26.1441]).parallel(45)},d.geoBonneRaw=be,d.geoBottomley=function(){var je=.5,Ge=g.geoProjectionMutator(Te),nt=Ge(je);return nt.fraction=function(lt){return arguments.length?Ge(je=+lt):je},nt.scale(158.837)},d.geoBottomleyRaw=Te,d.geoBromley=function(){return g.geoProjection(we).scale(152.63)},d.geoBromleyRaw=we,d.geoChamberlin=Ce,d.geoChamberlinRaw=Me,d.geoChamberlinAfrica=function(){return Ce([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},d.geoCollignon=function(){return g.geoProjection(Pe).scale(95.6464).center([0,30])},d.geoCollignonRaw=Pe,d.geoCraig=function(){return ue(Fe).scale(249.828).clipAngle(90)},d.geoCraigRaw=Fe,d.geoCraster=function(){return g.geoProjection(rt).scale(156.19)},d.geoCrasterRaw=rt,d.geoCylindricalEqualArea=function(){return ue(ze).parallel(38.58).scale(195.044)},d.geoCylindricalEqualAreaRaw=ze,d.geoCylindricalStereographic=function(){return ue(He).scale(124.75)},d.geoCylindricalStereographicRaw=He,d.geoEckert1=function(){return g.geoProjection(Xe).scale(165.664)},d.geoEckert1Raw=Xe,d.geoEckert2=function(){return g.geoProjection(Je).scale(165.664)},d.geoEckert2Raw=Je,d.geoEckert3=function(){return g.geoProjection(at).scale(180.739)},d.geoEckert3Raw=at,d.geoEckert4=function(){return g.geoProjection(pt).scale(180.739)},d.geoEckert4Raw=pt,d.geoEckert5=function(){return g.geoProjection(xt).scale(173.044)},d.geoEckert5Raw=xt,d.geoEckert6=function(){return g.geoProjection(Ft).scale(173.044)},d.geoEckert6Raw=Ft,d.geoEisenlohr=function(){return g.geoProjection(ot).scale(62.5271)},d.geoEisenlohrRaw=ot,d.geoFahey=function(){return g.geoProjection(Et).scale(137.152)},d.geoFaheyRaw=Et,d.geoFoucaut=function(){return g.geoProjection(Xt).scale(135.264)},d.geoFoucautRaw=Xt,d.geoFoucautSinusoidal=function(){var je=.5,Ge=g.geoProjectionMutator(nr),nt=Ge(je);return nt.alpha=function(lt){return arguments.length?Ge(je=+lt):je},nt.scale(168.725)},d.geoFoucautSinusoidalRaw=nr,d.geoGilbert=function(je){null==je&&(je=g.geoOrthographic);var Ge=je(),nt=g.geoEquirectangular().scale(A).precision(0).clipAngle(null).translate([0,0]);function lt(mt){return Ge(Ue(mt))}function _t(mt){lt[mt]=function(){return arguments.length?(Ge[mt].apply(Ge,arguments),lt):Ge[mt]()}}return Ge.invert&&(lt.invert=function(mt){return We(Ge.invert(mt))}),lt.stream=function(mt){var Ct=Ge.stream(mt),rr=nt.stream({point:function(ir,$t){Ct.point(ir/2,D(f(-$t/2*I))*A)},lineStart:function(){Ct.lineStart()},lineEnd:function(){Ct.lineEnd()},polygonStart:function(){Ct.polygonStart()},polygonEnd:function(){Ct.polygonEnd()}});return rr.sphere=Ct.sphere,rr},lt.rotate=function(mt){return arguments.length?(nt.rotate(mt),lt):nt.rotate()},lt.center=function(mt){return arguments.length?(Ge.center(Ue(mt)),lt):We(Ge.center())},_t("angle"),_t("clipAngle"),_t("clipExtent"),_t("fitExtent"),_t("fitHeight"),_t("fitSize"),_t("fitWidth"),_t("scale"),_t("translate"),_t("precision"),lt.scale(249.5)},d.geoGingery=function(){var je=6,Ge=30*I,nt=r(Ge),lt=v(Ge),_t=g.geoProjectionMutator(Be),mt=_t(Ge,je),Ct=mt.stream,rr=-r(.01*I),ir=v(.01*I);return mt.radius=function($t){return arguments.length?(nt=r(Ge=$t*I),lt=v(Ge),_t(Ge,je)):Ge*A},mt.lobes=function($t){return arguments.length?_t(Ge,je=+$t):je},mt.stream=function($t){var sr=mt.rotate(),gr=Ct($t),Tr=(mt.rotate([0,0]),Ct($t));return mt.rotate(sr),gr.sphere=function(){Tr.polygonStart(),Tr.lineStart();for(var Ar=0,Br=2*x/je,un=0;Ar<je;++Ar,un-=Br)Tr.point(i(ir*r(un),rr)*A,D(ir*v(un))*A),Tr.point(i(lt*r(un-Br/2),nt)*A,D(lt*v(un-Br/2))*A);Tr.lineEnd(),Tr.polygonEnd()},gr},mt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},d.geoGingeryRaw=Be,d.geoGinzburg4=function(){return g.geoProjection(Oe).scale(149.995)},d.geoGinzburg4Raw=Oe,d.geoGinzburg5=function(){return g.geoProjection(Ie).scale(153.93)},d.geoGinzburg5Raw=Ie,d.geoGinzburg6=function(){return g.geoProjection(et).scale(130.945)},d.geoGinzburg6Raw=et,d.geoGinzburg8=function(){return g.geoProjection(ct).scale(131.747)},d.geoGinzburg8Raw=ct,d.geoGinzburg9=function(){return g.geoProjection(vt).scale(131.087)},d.geoGinzburg9Raw=vt,d.geoGringorten=function(){return g.geoProjection(ft(It)).scale(239.75)},d.geoGringortenRaw=It,d.geoGuyou=function(){return g.geoProjection(ft(Rt)).scale(151.496)},d.geoGuyouRaw=Rt,d.geoHammer=function(){var je=2,Ge=g.geoProjectionMutator(N),nt=Ge(je);return nt.coefficient=function(lt){return arguments.length?Ge(je=+lt):je},nt.scale(169.529)},d.geoHammerRaw=N,d.geoHammerRetroazimuthal=function(){var je=0,Ge=g.geoProjectionMutator($e),nt=Ge(je),lt=nt.rotate,_t=nt.stream,mt=g.geoCircle();return nt.parallel=function(Ct){if(!arguments.length)return je*A;var rr=nt.rotate();return Ge(je=Ct*I).rotate(rr)},nt.rotate=function(Ct){return arguments.length?(lt.call(nt,[Ct[0],Ct[1]-je*A]),mt.center([-Ct[0],-Ct[1]]),nt):((Ct=lt.call(nt))[1]+=je*A,Ct)},nt.stream=function(Ct){return(Ct=_t(Ct)).sphere=function(){Ct.polygonStart();var rr,ir=mt.radius(89.99)().coordinates[0],$t=ir.length-1,sr=-1;for(Ct.lineStart();++sr<$t;)Ct.point((rr=ir[sr])[0],rr[1]);for(Ct.lineEnd(),$t=(ir=mt.radius(90.01)().coordinates[0]).length-1,Ct.lineStart();--sr>=0;)Ct.point((rr=ir[sr])[0],rr[1]);Ct.lineEnd(),Ct.polygonEnd()},Ct},nt.scale(79.4187).parallel(45).clipAngle(179.999)},d.geoHammerRetroazimuthalRaw=$e,d.geoHealpix=function(){var je=4,Ge=g.geoProjectionMutator(Qt),nt=Ge(je),lt=nt.stream;return nt.lobes=function(_t){return arguments.length?Ge(je=+_t):je},nt.stream=function(_t){var mt=nt.rotate(),Ct=lt(_t),rr=(nt.rotate([0,0]),lt(_t));return nt.rotate(mt),Ct.sphere=function(){var ir,$t;g.geoStream(($t=[].concat(_.range(-180,180+(ir=180/je)/2,ir).map(Re),_.range(180,-180-ir/2,-ir).map(ht)),{type:"Polygon",coordinates:[180===ir?$t.map(Mt):$t]}),rr)},Ct},nt.scale(239.75)},d.geoHealpixRaw=Qt,d.geoHill=function(){var je=1,Ge=g.geoProjectionMutator(Nt),nt=Ge(je);return nt.ratio=function(lt){return arguments.length?Ge(je=+lt):je},nt.scale(167.774).center([0,18.67])},d.geoHillRaw=Nt,d.geoHomolosine=function(){return g.geoProjection(or).scale(152.63)},d.geoHomolosineRaw=or,d.geoHufnagel=function(){var je=1,Ge=0,nt=45*I,lt=2,_t=g.geoProjectionMutator(Wt),mt=_t(je,Ge,nt,lt);return mt.a=function(Ct){return arguments.length?_t(je=+Ct,Ge,nt,lt):je},mt.b=function(Ct){return arguments.length?_t(je,Ge=+Ct,nt,lt):Ge},mt.psiMax=function(Ct){return arguments.length?_t(je,Ge,nt=+Ct*I,lt):nt*A},mt.ratio=function(Ct){return arguments.length?_t(je,Ge,nt,lt=+Ct):lt},mt.scale(180.739)},d.geoHufnagelRaw=Wt,d.geoHyperelliptical=function(){var je=0,Ge=2.5,nt=1.183136,lt=g.geoProjectionMutator(cr),_t=lt(je,Ge,nt);return _t.alpha=function(mt){return arguments.length?lt(je=+mt,Ge,nt):je},_t.k=function(mt){return arguments.length?lt(je,Ge=+mt,nt):Ge},_t.gamma=function(mt){return arguments.length?lt(je,Ge,nt=+mt):nt},_t.scale(152.63)},d.geoHyperellipticalRaw=cr,d.geoInterrupt=pr,d.geoInterruptedBoggs=function(){return pr(de,br).scale(160.857)},d.geoInterruptedHomolosine=function(){return pr(or,Nr).scale(152.63)},d.geoInterruptedMollweide=function(){return pr(ie,kr).scale(169.529)},d.geoInterruptedMollweideHemispheres=function(){return pr(ie,Hr).scale(169.529).rotate([20,0])},d.geoInterruptedSinuMollweide=function(){return pr(Zt,an,j).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},d.geoInterruptedSinusoidal=function(){return pr(ge,fn).scale(152.63).rotate([-20,0])},d.geoKavrayskiy7=function(){return g.geoProjection(zn).scale(158.837)},d.geoKavrayskiy7Raw=zn,d.geoLagrange=function(){var je=.5,Ge=g.geoProjectionMutator(Nn),nt=Ge(je);return nt.spacing=function(lt){return arguments.length?Ge(je=+lt):je},nt.scale(124.75)},d.geoLagrangeRaw=Nn,d.geoLarrivee=function(){return g.geoProjection(cn).scale(97.2672)},d.geoLarriveeRaw=cn,d.geoLaskowski=function(){return g.geoProjection(jr).scale(139.98)},d.geoLaskowskiRaw=jr,d.geoLittrow=function(){return g.geoProjection(Lr).scale(144.049).clipAngle(89.999)},d.geoLittrowRaw=Lr,d.geoLoximuthal=function(){return ue(Xr).parallel(40).scale(158.837)},d.geoLoximuthalRaw=Xr,d.geoMiller=function(){return g.geoProjection(Un).scale(108.318)},d.geoMillerRaw=Un,d.geoModifiedStereographic=zt,d.geoModifiedStereographicRaw=qr,d.geoModifiedStereographicAlaska=function(){return zt(On,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},d.geoModifiedStereographicGs48=function(){return zt(Tn,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},d.geoModifiedStereographicGs50=function(){return zt(rn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},d.geoModifiedStereographicMiller=function(){return zt(Vn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},d.geoModifiedStereographicLee=function(){return zt(ar,[165,10]).scale(250).clipAngle(130).center([-165,-10])},d.geoMollweide=function(){return g.geoProjection(ie).scale(169.529)},d.geoMollweideRaw=ie,d.geoMtFlatPolarParabolic=function(){return g.geoProjection(Er).scale(164.859)},d.geoMtFlatPolarParabolicRaw=Er,d.geoMtFlatPolarQuartic=function(){return g.geoProjection(tn).scale(188.209)},d.geoMtFlatPolarQuarticRaw=tn,d.geoMtFlatPolarSinusoidal=function(){return g.geoProjection(Qr).scale(166.518)},d.geoMtFlatPolarSinusoidalRaw=Qr,d.geoNaturalEarth2=function(){return g.geoProjection(Cr).scale(175.295)},d.geoNaturalEarth2Raw=Cr,d.geoNellHammer=function(){return g.geoProjection(Mr).scale(152.63)},d.geoNellHammerRaw=Mr,d.geoInterruptedQuarticAuthalic=function(){return pr(N(1/0),Ir).rotate([20,0]).scale(152.63)},d.geoNicolosi=function(){return g.geoProjection(Sr).scale(127.267)},d.geoNicolosiRaw=Sr,d.geoPatterson=function(){return g.geoProjection(Pr).scale(139.319)},d.geoPattersonRaw=Pr,d.geoPolyconic=function(){return g.geoProjection(Kr).scale(103.74)},d.geoPolyconicRaw=Kr,d.geoPolyhedral=Zr,d.geoPolyhedralButterfly=function(je){je=je||function(nt){var lt=g.geoCentroid({type:"MultiPoint",coordinates:nt});return g.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var Ge=Dn.map(function(nt){return{face:nt,project:je(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=Ge[nt];_t&&(_t.children||(_t.children=[])).push(Ge[lt])}),Zr(Ge[0],function(nt,lt){return Ge[nt<-x/2?lt<0?6:4:nt<0?lt<0?2:0:nt<x/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},d.geoPolyhedralCollignon=function(je){je=je||function(nt){var lt=g.geoCentroid({type:"MultiPoint",coordinates:nt});return g.geoProjection(Qn).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var Ge=Dn.map(function(nt){return{face:nt,project:je(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=Ge[nt];_t&&(_t.children||(_t.children=[])).push(Ge[lt])}),Zr(Ge[0],function(nt,lt){return Ge[nt<-x/2?lt<0?6:4:nt<0?lt<0?2:0:nt<x/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},d.geoPolyhedralWaterman=function(je){je=je||function(mt){var Ct=6===mt.length?g.geoCentroid({type:"MultiPoint",coordinates:mt}):mt[0];return g.geoGnomonic().scale(1).translate([0,0]).rotate([-Ct[0],-Ct[1]])};var Ge=Dn.map(function(mt){for(var Ct,rr=mt.map(yi),ir=rr.length,$t=rr[ir-1],sr=[],gr=0;gr<ir;++gr)sr.push(ci([.9486832980505138*$t[0]+.31622776601683794*(Ct=rr[gr])[0],.9486832980505138*$t[1]+.31622776601683794*Ct[1],.9486832980505138*$t[2]+.31622776601683794*Ct[2]]),ci([.9486832980505138*Ct[0]+.31622776601683794*$t[0],.9486832980505138*Ct[1]+.31622776601683794*$t[1],.9486832980505138*Ct[2]+.31622776601683794*$t[2]])),$t=Ct;return sr}),nt=[],lt=[-1,0,0,1,0,1,4,5];Ge.forEach(function(mt,Ct){for(var rr,ir,$t=Dn[Ct],sr=$t.length,gr=nt[Ct]=[],Tr=0;Tr<sr;++Tr)Ge.push([$t[Tr],mt[(2*Tr+2)%(2*sr)],mt[(2*Tr+1)%(2*sr)]]),lt.push(Ct),gr.push((rr=yi(mt[(2*Tr+2)%(2*sr)]),ir=yi(mt[(2*Tr+1)%(2*sr)]),[rr[1]*ir[2]-rr[2]*ir[1],rr[2]*ir[0]-rr[0]*ir[2],rr[0]*ir[1]-rr[1]*ir[0]]))});var _t=Ge.map(function(mt){return{project:je(mt),face:mt}});return lt.forEach(function(mt,Ct){var rr=_t[mt];rr&&(rr.children||(rr.children=[])).push(_t[Ct])}),Zr(_t[0],function(mt,Ct){var rr=r(Ct),ir=[rr*r(mt),rr*v(mt),v(Ct)],$t=mt<-x/2?Ct<0?6:4:mt<0?Ct<0?2:0:mt<x/2?Ct<0?3:1:Ct<0?7:5,sr=nt[$t];return _t[An(sr[0],ir)<0?8+3*$t:An(sr[1],ir)<0?8+3*$t+1:An(sr[2],ir)<0?8+3*$t+2:$t]}).angle(-30).scale(110.625).center([0,45])},d.geoProject=function(je,Ge){var nt,lt=Ge.stream;if(!lt)throw new Error("invalid projection");switch(je&&je.type){case"Feature":nt=la;break;case"FeatureCollection":nt=Da;break;default:nt=Ma}return nt(je,lt)},d.geoGringortenQuincuncial=function(){return Xa(It).scale(176.423)},d.geoPeirceQuincuncial=to,d.geoPierceQuincuncial=to,d.geoQuantize=function(je,Ge){if(!(0<=(Ge=+Ge)&&Ge<=20))throw new Error("invalid digits");function nt($t){var sr=$t.length,gr=2,Tr=new Array(sr);for(Tr[0]=+$t[0].toFixed(Ge),Tr[1]=+$t[1].toFixed(Ge);gr<sr;)Tr[gr]=$t[gr],++gr;return Tr}function lt($t){return $t.map(nt)}function _t($t){for(var sr=nt($t[0]),gr=[sr],Tr=1;Tr<$t.length;Tr++){var Ar=nt($t[Tr]);(Ar.length>2||Ar[0]!=sr[0]||Ar[1]!=sr[1])&&(gr.push(Ar),sr=Ar)}return 1===gr.length&&$t.length>1&&gr.push(nt($t[$t.length-1])),gr}function mt($t){return $t.map(_t)}function Ct($t){if(null==$t)return $t;var sr;switch($t.type){case"GeometryCollection":sr={type:"GeometryCollection",geometries:$t.geometries.map(Ct)};break;case"Point":sr={type:"Point",coordinates:nt($t.coordinates)};break;case"MultiPoint":sr={type:$t.type,coordinates:lt($t.coordinates)};break;case"LineString":sr={type:$t.type,coordinates:_t($t.coordinates)};break;case"MultiLineString":case"Polygon":sr={type:$t.type,coordinates:mt($t.coordinates)};break;case"MultiPolygon":sr={type:"MultiPolygon",coordinates:$t.coordinates.map(mt)};break;default:return $t}return null!=$t.bbox&&(sr.bbox=$t.bbox),sr}function rr($t){var sr={type:"Feature",properties:$t.properties,geometry:Ct($t.geometry)};return null!=$t.id&&(sr.id=$t.id),null!=$t.bbox&&(sr.bbox=$t.bbox),sr}if(null!=je)switch(je.type){case"Feature":return rr(je);case"FeatureCollection":var ir={type:"FeatureCollection",features:je.features.map(rr)};return null!=je.bbox&&(ir.bbox=je.bbox),ir;default:return Ct(je)}return je},d.geoQuincuncial=Xa,d.geoRectangularPolyconic=function(){return ue(Uo).scale(131.215)},d.geoRectangularPolyconicRaw=Uo,d.geoRobinson=function(){return g.geoProjection(Eo).scale(152.63)},d.geoRobinsonRaw=Eo,d.geoSatellite=function(){var je=2,Ge=0,nt=g.geoProjectionMutator(lo),lt=nt(je,Ge);return lt.distance=function(_t){return arguments.length?nt(je=+_t,Ge):je},lt.tilt=function(_t){return arguments.length?nt(je,Ge=_t*I):Ge*A},lt.scale(432.147).clipAngle(S(1/je)*A-1e-6)},d.geoSatelliteRaw=lo,d.geoSinuMollweide=function(){return g.geoProjection(Zt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},d.geoSinuMollweideRaw=Zt,d.geoSinusoidal=function(){return g.geoProjection(ge).scale(152.63)},d.geoSinusoidalRaw=ge,d.geoStitch=function(je){if(null==je)return je;switch(je.type){case"Feature":return Ki(je);case"FeatureCollection":var Ge={type:"FeatureCollection",features:je.features.map(Ki)};return null!=je.bbox&&(Ge.bbox=je.bbox),Ge;default:return fs(je)}},d.geoTimes=function(){return g.geoProjection($o).scale(146.153)},d.geoTimesRaw=$o,d.geoTwoPointAzimuthal=ss,d.geoTwoPointAzimuthalRaw=es,d.geoTwoPointAzimuthalUsa=function(){return ss([-158,21.5],[-77,39]).clipAngle(60).scale(400)},d.geoTwoPointEquidistant=go,d.geoTwoPointEquidistantRaw=Wo,d.geoTwoPointEquidistantUsa=function(){return go([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},d.geoVanDerGrinten=function(){return g.geoProjection(vo).scale(79.4183)},d.geoVanDerGrintenRaw=vo,d.geoVanDerGrinten2=function(){return g.geoProjection(Lo).scale(79.4183)},d.geoVanDerGrinten2Raw=Lo,d.geoVanDerGrinten3=function(){return g.geoProjection(Do).scale(79.4183)},d.geoVanDerGrinten3Raw=Do,d.geoVanDerGrinten4=function(){return g.geoProjection(pa).scale(127.16)},d.geoVanDerGrinten4Raw=pa,d.geoWagner=yo,d.geoWagner7=function(){return yo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},d.geoWagnerRaw=co,d.geoWagner4=function(){return g.geoProjection(Bo).scale(176.84)},d.geoWagner4Raw=Bo,d.geoWagner6=function(){return g.geoProjection(ds).scale(152.63)},d.geoWagner6Raw=ds,d.geoWiechel=function(){return g.geoProjection(Io).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},d.geoWiechelRaw=Io,d.geoWinkel3=function(){return g.geoProjection(Gi).scale(158.837)},d.geoWinkel3Raw=Gi,Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-geo"),y("d3-array")):g(d.d3=d.d3||{},d.d3,d.d3)},{"d3-array":107,"d3-geo":114}],114:[function(y,$,ee){var d,g;d=this,g=function(d,g){"use strict";function _(){return new t}function t(){this.reset()}t.prototype={constructor:t,reset:function(){this.s=this.t=0},add:function(gt){i(e,gt,this.t),i(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new t;function i(gt,Vt,hr){var Jt=gt.s=Vt+hr,fr=Jt-Vt;gt.t=Vt-(Jt-fr)+(hr-fr)}var r=1e-6,o=Math.PI,n=o/2,p=o/4,s=2*o,a=180/o,c=o/180,u=Math.abs,h=Math.atan,v=Math.atan2,f=Math.cos,l=Math.ceil,x=Math.exp,m=Math.log,w=Math.pow,b=Math.sin,k=Math.sign||function(gt){return gt>0?1:gt<0?-1:0},T=Math.sqrt,L=Math.tan;function A(gt){return gt>1?0:gt<-1?o:Math.acos(gt)}function I(gt){return gt>1?n:gt<-1?-n:Math.asin(gt)}function D(gt){return(gt=b(gt/2))*gt}function S(){}function C(gt,Vt){gt&&F.hasOwnProperty(gt.type)&&F[gt.type](gt,Vt)}var R={Feature:function(gt,Vt){C(gt.geometry,Vt)},FeatureCollection:function(gt,Vt){for(var hr=gt.features,Jt=-1,fr=hr.length;++Jt<fr;)C(hr[Jt].geometry,Vt)}},F={Sphere:function(gt,Vt){Vt.sphere()},Point:function(gt,Vt){Vt.point((gt=gt.coordinates)[0],gt[1],gt[2])},MultiPoint:function(gt,Vt){for(var hr=gt.coordinates,Jt=-1,fr=hr.length;++Jt<fr;)Vt.point((gt=hr[Jt])[0],gt[1],gt[2])},LineString:function(gt,Vt){H(gt.coordinates,Vt,0)},MultiLineString:function(gt,Vt){for(var hr=gt.coordinates,Jt=-1,fr=hr.length;++Jt<fr;)H(hr[Jt],Vt,0)},Polygon:function(gt,Vt){U(gt.coordinates,Vt)},MultiPolygon:function(gt,Vt){for(var hr=gt.coordinates,Jt=-1,fr=hr.length;++Jt<fr;)U(hr[Jt],Vt)},GeometryCollection:function(gt,Vt){for(var hr=gt.geometries,Jt=-1,fr=hr.length;++Jt<fr;)C(hr[Jt],Vt)}};function H(gt,Vt,hr){var Jt,fr=-1,zr=gt.length-hr;for(Vt.lineStart();++fr<zr;)Vt.point((Jt=gt[fr])[0],Jt[1],Jt[2]);Vt.lineEnd()}function U(gt,Vt){var hr=-1,Jt=gt.length;for(Vt.polygonStart();++hr<Jt;)H(gt[hr],Vt,1);Vt.polygonEnd()}function X(gt,Vt){gt&&R.hasOwnProperty(gt.type)?R[gt.type](gt,Vt):C(gt,Vt)}var Z,Y,W,te,z,N=_(),V=_(),Q={point:S,lineStart:S,lineEnd:S,polygonStart:function(){N.reset(),Q.lineStart=j,Q.lineEnd=J},polygonEnd:function(){var gt=+N;V.add(gt<0?s+gt:gt),this.lineStart=this.lineEnd=this.point=S},sphere:function(){V.add(s)}};function j(){Q.point=K}function J(){re(Z,Y)}function K(gt,Vt){Q.point=re,Z=gt,Y=Vt,W=gt*=c,te=f(Vt=(Vt*=c)/2+p),z=b(Vt)}function re(gt,Vt){var hr=(gt*=c)-W,Jt=hr>=0?1:-1,fr=Jt*hr,zr=f(Vt=(Vt*=c)/2+p),Vr=b(Vt),$r=z*Vr,dn=te*zr+$r*f(fr),hn=$r*Jt*b(fr);N.add(v(hn,dn)),W=gt,te=zr,z=Vr}function ie(gt){return[v(gt[1],gt[0]),I(gt[2])]}function ce(gt){var Vt=gt[0],hr=gt[1],Jt=f(hr);return[Jt*f(Vt),Jt*b(Vt),b(hr)]}function se(gt,Vt){return gt[0]*Vt[0]+gt[1]*Vt[1]+gt[2]*Vt[2]}function de(gt,Vt){return[gt[1]*Vt[2]-gt[2]*Vt[1],gt[2]*Vt[0]-gt[0]*Vt[2],gt[0]*Vt[1]-gt[1]*Vt[0]]}function ue(gt,Vt){gt[0]+=Vt[0],gt[1]+=Vt[1],gt[2]+=Vt[2]}function ge(gt,Vt){return[gt[0]*Vt,gt[1]*Vt,gt[2]*Vt]}function be(gt){var Vt=T(gt[0]*gt[0]+gt[1]*gt[1]+gt[2]*gt[2]);gt[0]/=Vt,gt[1]/=Vt,gt[2]/=Vt}var Te,we,Le,fe,ve,Me,ke,Ce,Pe,Fe,qe,rt,ze,He,Xe,Je,at,pt,xt,Ft,Dt,ot,it,Et,Xt,nr,Ue=_(),We={point:Be,lineStart:Ae,lineEnd:De,polygonStart:function(){We.point=Oe,We.lineStart=Ie,We.lineEnd=et,Ue.reset(),Q.polygonStart()},polygonEnd:function(){Q.polygonEnd(),We.point=Be,We.lineStart=Ae,We.lineEnd=De,N<0?(Te=-(Le=180),we=-(fe=90)):Ue>r?fe=90:Ue<-r&&(we=-90),Fe[0]=Te,Fe[1]=Le},sphere:function(){Te=-(Le=180),we=-(fe=90)}};function Be(gt,Vt){Pe.push(Fe=[Te=gt,Le=gt]),Vt<we&&(we=Vt),Vt>fe&&(fe=Vt)}function Qe(gt,Vt){var hr=ce([gt*c,Vt*c]);if(Ce){var Jt=de(Ce,hr),fr=de([Jt[1],-Jt[0],0],Jt);be(fr),fr=ie(fr);var zr,Vr=gt-ve,$r=Vr>0?1:-1,dn=fr[0]*a*$r,hn=u(Vr)>180;hn^($r*ve<dn&&dn<$r*gt)?(zr=fr[1]*a)>fe&&(fe=zr):hn^($r*ve<(dn=(dn+360)%360-180)&&dn<$r*gt)?(zr=-fr[1]*a)<we&&(we=zr):(Vt<we&&(we=Vt),Vt>fe&&(fe=Vt)),hn?gt<ve?ct(Te,gt)>ct(Te,Le)&&(Le=gt):ct(gt,Le)>ct(Te,Le)&&(Te=gt):Le>=Te?(gt<Te&&(Te=gt),gt>Le&&(Le=gt)):gt>ve?ct(Te,gt)>ct(Te,Le)&&(Le=gt):ct(gt,Le)>ct(Te,Le)&&(Te=gt)}else Pe.push(Fe=[Te=gt,Le=gt]);Vt<we&&(we=Vt),Vt>fe&&(fe=Vt),Ce=hr,ve=gt}function Ae(){We.point=Qe}function De(){Fe[0]=Te,Fe[1]=Le,We.point=Be,Ce=null}function Oe(gt,Vt){if(Ce){var hr=gt-ve;Ue.add(u(hr)>180?hr+(hr>0?360:-360):hr)}else Me=gt,ke=Vt;Q.point(gt,Vt),Qe(gt,Vt)}function Ie(){Q.lineStart()}function et(){Oe(Me,ke),Q.lineEnd(),u(Ue)>r&&(Te=-(Le=180)),Fe[0]=Te,Fe[1]=Le,Ce=null}function ct(gt,Vt){return(Vt-=gt)<0?Vt+360:Vt}function vt(gt,Vt){return gt[0]-Vt[0]}function ft(gt,Vt){return gt[0]<=gt[1]?gt[0]<=Vt&&Vt<=gt[1]:Vt<gt[0]||gt[1]<Vt}var It={sphere:S,point:ut,lineStart:Rt,lineEnd:Bt,polygonStart:function(){It.lineStart=Ut,It.lineEnd=Qt},polygonEnd:function(){It.lineStart=Rt,It.lineEnd=Bt}};function ut(gt,Vt){gt*=c;var hr=f(Vt*=c);Ot(hr*f(gt),hr*b(gt),b(Vt))}function Ot(gt,Vt,hr){++qe,ze+=(gt-ze)/qe,He+=(Vt-He)/qe,Xe+=(hr-Xe)/qe}function Rt(){It.point=$e}function $e(gt,Vt){gt*=c;var hr=f(Vt*=c);Et=hr*f(gt),Xt=hr*b(gt),nr=b(Vt),It.point=yt,Ot(Et,Xt,nr)}function yt(gt,Vt){gt*=c;var hr=f(Vt*=c),Jt=hr*f(gt),fr=hr*b(gt),zr=b(Vt),Vr=v(T((Vr=Xt*zr-nr*fr)*Vr+(Vr=nr*Jt-Et*zr)*Vr+(Vr=Et*fr-Xt*Jt)*Vr),Et*Jt+Xt*fr+nr*zr);rt+=Vr,Je+=Vr*(Et+(Et=Jt)),at+=Vr*(Xt+(Xt=fr)),pt+=Vr*(nr+(nr=zr)),Ot(Et,Xt,nr)}function Bt(){It.point=ut}function Ut(){It.point=Re}function Qt(){ht(ot,it),It.point=ut}function Re(gt,Vt){ot=gt,it=Vt,gt*=c,Vt*=c,It.point=ht;var hr=f(Vt);Et=hr*f(gt),Xt=hr*b(gt),nr=b(Vt),Ot(Et,Xt,nr)}function ht(gt,Vt){gt*=c;var hr=f(Vt*=c),Jt=hr*f(gt),fr=hr*b(gt),zr=b(Vt),Vr=Xt*zr-nr*fr,$r=nr*Jt-Et*zr,dn=Et*fr-Xt*Jt,hn=T(Vr*Vr+$r*$r+dn*dn),wn=I(hn),Ln=hn&&-wn/hn;xt+=Ln*Vr,Ft+=Ln*$r,Dt+=Ln*dn,rt+=wn,Je+=wn*(Et+(Et=Jt)),at+=wn*(Xt+(Xt=fr)),pt+=wn*(nr+(nr=zr)),Ot(Et,Xt,nr)}function Mt(gt){return function(){return gt}}function Nt(gt,Vt){function hr(Jt,fr){return Jt=gt(Jt,fr),Vt(Jt[0],Jt[1])}return gt.invert&&Vt.invert&&(hr.invert=function(Jt,fr){return(Jt=Vt.invert(Jt,fr))&&gt.invert(Jt[0],Jt[1])}),hr}function Zt(gt,Vt){return[u(gt)>o?gt+Math.round(-gt/s)*s:gt,Vt]}function or(gt,Vt,hr){return(gt%=s)?Vt||hr?Nt(er(gt),cr(Vt,hr)):er(gt):Vt||hr?cr(Vt,hr):Zt}function Wt(gt){return function(Vt,hr){return[(Vt+=gt)>o?Vt-s:Vt<-o?Vt+s:Vt,hr]}}function er(gt){var Vt=Wt(gt);return Vt.invert=Wt(-gt),Vt}function cr(gt,Vt){var hr=f(gt),Jt=b(gt),fr=f(Vt),zr=b(Vt);function Vr($r,dn){var hn=f(dn),wn=f($r)*hn,Ln=b($r)*hn,mn=b(dn),En=mn*hr+wn*Jt;return[v(Ln*fr-En*zr,wn*hr-mn*Jt),I(En*fr+Ln*zr)]}return Vr.invert=function($r,dn){var hn=f(dn),wn=f($r)*hn,Ln=b($r)*hn,mn=b(dn),En=mn*fr-Ln*zr;return[v(Ln*fr+mn*zr,wn*hr+En*Jt),I(En*hr-wn*Jt)]},Vr}function _r(gt){function Vt(hr){return(hr=gt(hr[0]*c,hr[1]*c))[0]*=a,hr[1]*=a,hr}return gt=or(gt[0]*c,gt[1]*c,gt.length>2?gt[2]*c:0),Vt.invert=function(hr){return(hr=gt.invert(hr[0]*c,hr[1]*c))[0]*=a,hr[1]*=a,hr},Vt}function xr(gt,Vt,hr,Jt,fr,zr){if(hr){var Vr=f(Vt),$r=b(Vt),dn=Jt*hr;null==fr?(fr=Vt+Jt*s,zr=Vt-dn/2):(fr=dr(Vr,fr),zr=dr(Vr,zr),(Jt>0?fr<zr:fr>zr)&&(fr+=Jt*s));for(var hn,wn=fr;Jt>0?wn>zr:wn<zr;wn-=dn)hn=ie([Vr,-$r*f(wn),-$r*b(wn)]),gt.point(hn[0],hn[1])}}function dr(gt,Vt){(Vt=ce(Vt))[0]-=gt,be(Vt);var hr=A(-Vt[1]);return((-Vt[2]<0?-hr:hr)+s-r)%s}function pr(){var gt,Vt=[];return{point:function(hr,Jt,fr){gt.push([hr,Jt,fr])},lineStart:function(){Vt.push(gt=[])},lineEnd:S,rejoin:function(){Vt.length>1&&Vt.push(Vt.pop().concat(Vt.shift()))},result:function(){var hr=Vt;return Vt=[],gt=null,hr}}}function br(gt,Vt){return u(gt[0]-Vt[0])<r&&u(gt[1]-Vt[1])<r}function Nr(gt,Vt,hr,Jt){this.x=gt,this.z=Vt,this.o=hr,this.e=Jt,this.v=!1,this.n=this.p=null}function kr(gt,Vt,hr,Jt,fr){var zr,Vr,$r=[],dn=[];if(gt.forEach(function(Yn){if(!((Jn=Yn.length-1)<=0)){var Jn,si,nn=Yn[0],oi=Yn[Jn];if(br(nn,oi)){if(!nn[2]&&!oi[2]){for(fr.lineStart(),zr=0;zr<Jn;++zr)fr.point((nn=Yn[zr])[0],nn[1]);return void fr.lineEnd()}oi[0]+=2*r}$r.push(si=new Nr(nn,Yn,null,!0)),dn.push(si.o=new Nr(nn,null,si,!1)),$r.push(si=new Nr(oi,Yn,null,!1)),dn.push(si.o=new Nr(oi,null,si,!0))}}),$r.length){for(dn.sort(Vt),Hr($r),Hr(dn),zr=0,Vr=dn.length;zr<Vr;++zr)dn[zr].e=hr=!hr;for(var hn,wn,Ln=$r[0];;){for(var mn=Ln,En=!0;mn.v;)if((mn=mn.n)===Ln)return;hn=mn.z,fr.lineStart();do{if(mn.v=mn.o.v=!0,mn.e){if(En)for(zr=0,Vr=hn.length;zr<Vr;++zr)fr.point((wn=hn[zr])[0],wn[1]);else Jt(mn.x,mn.n.x,1,fr);mn=mn.n}else{if(En)for(zr=(hn=mn.p.z).length-1;zr>=0;--zr)fr.point((wn=hn[zr])[0],wn[1]);else Jt(mn.x,mn.p.x,-1,fr);mn=mn.p}hn=(mn=mn.o).z,En=!En}while(!mn.v);fr.lineEnd()}}}function Hr(gt){if(Vt=gt.length){for(var Vt,hr,Jt=0,fr=gt[0];++Jt<Vt;)fr.n=hr=gt[Jt],hr.p=fr,fr=hr;fr.n=hr=gt[0],hr.p=fr}}Zt.invert=Zt;var an=_();function fn(gt){return u(gt[0])<=o?gt[0]:k(gt[0])*((u(gt[0])+o)%s-o)}function zn(gt,Vt){var hr=fn(Vt),Jt=Vt[1],fr=b(Jt),zr=[b(hr),-f(hr),0],Vr=0,$r=0;an.reset(),1===fr?Jt=n+r:-1===fr&&(Jt=-n-r);for(var dn=0,hn=gt.length;dn<hn;++dn)if(Ln=(wn=gt[dn]).length)for(var wn,Ln,mn=wn[Ln-1],En=fn(mn),Yn=mn[1]/2+p,Jn=b(Yn),si=f(Yn),nn=0;nn<Ln;++nn,En=Bn,Jn=ii,si=Ai,mn=oi){var oi=wn[nn],Bn=fn(oi),Zn=oi[1]/2+p,ii=b(Zn),Ai=f(Zn),zi=Bn-En,Rn=zi>=0?1:-1,ji=Rn*zi,Pi=ji>o,xi=Jn*ii;if(an.add(v(xi*Rn*b(ji),si*Ai+xi*f(ji))),Vr+=Pi?zi+Rn*s:zi,Pi^En>=hr^Bn>=hr){var Vi=de(ce(mn),ce(oi));be(Vi);var Di=de(zr,Vi);be(Di);var ra=(Pi^zi>=0?-1:1)*I(Di[2]);(Jt>ra||Jt===ra&&(Vi[0]||Vi[1]))&&($r+=Pi^zi>=0?1:-1)}}return(Vr<-r||Vr<r&&an<-r)^1&$r}function Nn(gt,Vt,hr,Jt){return function(fr){var zr,Vr,$r,dn=Vt(fr),hn=pr(),wn=Vt(hn),Ln=!1,mn={point:En,lineStart:Jn,lineEnd:si,polygonStart:function(){mn.point=nn,mn.lineStart=oi,mn.lineEnd=Bn,Vr=[],zr=[]},polygonEnd:function(){mn.point=En,mn.lineStart=Jn,mn.lineEnd=si,Vr=g.merge(Vr);var Zn=zn(zr,Jt);Vr.length?(Ln||(fr.polygonStart(),Ln=!0),kr(Vr,cn,Zn,hr,fr)):Zn&&(Ln||(fr.polygonStart(),Ln=!0),fr.lineStart(),hr(null,null,1,fr),fr.lineEnd()),Ln&&(fr.polygonEnd(),Ln=!1),Vr=zr=null},sphere:function(){fr.polygonStart(),fr.lineStart(),hr(null,null,1,fr),fr.lineEnd(),fr.polygonEnd()}};function En(Zn,ii){gt(Zn,ii)&&fr.point(Zn,ii)}function Yn(Zn,ii){dn.point(Zn,ii)}function Jn(){mn.point=Yn,dn.lineStart()}function si(){mn.point=En,dn.lineEnd()}function nn(Zn,ii){$r.push([Zn,ii]),wn.point(Zn,ii)}function oi(){wn.lineStart(),$r=[]}function Bn(){nn($r[0][0],$r[0][1]),wn.lineEnd();var Zn,ii,Ai,zi,Rn=wn.clean(),ji=hn.result(),Pi=ji.length;if($r.pop(),zr.push($r),$r=null,Pi)if(1&Rn){if((ii=(Ai=ji[0]).length-1)>0){for(Ln||(fr.polygonStart(),Ln=!0),fr.lineStart(),Zn=0;Zn<ii;++Zn)fr.point((zi=Ai[Zn])[0],zi[1]);fr.lineEnd()}}else Pi>1&&2&Rn&&ji.push(ji.pop().concat(ji.shift())),Vr.push(ji.filter(In))}return mn}}function In(gt){return gt.length>1}function cn(gt,Vt){return((gt=gt.x)[0]<0?gt[1]-n-r:n-gt[1])-((Vt=Vt.x)[0]<0?Vt[1]-n-r:n-Vt[1])}var jr=Nn(function(){return!0},function(gt){var Vt,hr=NaN,Jt=NaN,fr=NaN;return{lineStart:function(){gt.lineStart(),Vt=1},point:function(zr,Vr){var hn,wn,Ln,mn,En,Yn,Jn,$r=zr>0?o:-o,dn=u(zr-hr);u(dn-o)<r?(gt.point(hr,Jt=(Jt+Vr)/2>0?n:-n),gt.point(fr,Jt),gt.lineEnd(),gt.lineStart(),gt.point($r,Jt),gt.point(zr,Jt),Vt=0):fr!==$r&&dn>=o&&(u(hr-fr)<r&&(hr-=fr*r),u(zr-$r)<r&&(zr-=$r*r),wn=Jt,mn=Vr,Jn=b((hn=hr)-(Ln=zr)),Jt=u(Jn)>r?h((b(wn)*(Yn=f(mn))*b(Ln)-b(mn)*(En=f(wn))*b(hn))/(En*Yn*Jn)):(wn+mn)/2,gt.point(fr,Jt),gt.lineEnd(),gt.lineStart(),gt.point($r,Jt),Vt=0),gt.point(hr=zr,Jt=Vr),fr=$r},lineEnd:function(){gt.lineEnd(),hr=Jt=NaN},clean:function(){return 2-Vt}}},function(gt,Vt,hr,Jt){var fr;if(null==gt)Jt.point(-o,fr=hr*n),Jt.point(0,fr),Jt.point(o,fr),Jt.point(o,0),Jt.point(o,-fr),Jt.point(0,-fr),Jt.point(-o,-fr),Jt.point(-o,0),Jt.point(-o,fr);else if(u(gt[0]-Vt[0])>r){var zr=gt[0]<Vt[0]?o:-o;Jt.point(-zr,fr=hr*zr/2),Jt.point(0,fr),Jt.point(zr,fr)}else Jt.point(Vt[0],Vt[1])},[-o,-n]);function Lr(gt){var Vt=f(gt),hr=6*c,Jt=Vt>0,fr=u(Vt)>r;function zr(dn,hn){return f(dn)*f(hn)>Vt}function Vr(dn,hn,wn){var Ln=[1,0,0],mn=de(ce(dn),ce(hn)),En=se(mn,mn),Yn=mn[0],Jn=En-Yn*Yn;if(!Jn)return!wn&&dn;var si=Vt*En/Jn,nn=-Vt*Yn/Jn,oi=de(Ln,mn),Bn=ge(Ln,si);ue(Bn,ge(mn,nn));var Zn=oi,ii=se(Bn,Zn),Ai=se(Zn,Zn),zi=ii*ii-Ai*(se(Bn,Bn)-1);if(!(zi<0)){var Rn=T(zi),ji=ge(Zn,(-ii-Rn)/Ai);if(ue(ji,Bn),ji=ie(ji),!wn)return ji;var Pi,xi=dn[0],Vi=hn[0],Di=dn[1],ra=hn[1];Vi<xi&&(Pi=xi,xi=Vi,Vi=Pi);var li=Vi-xi,Qi=u(li-o)<r;if(!Qi&&ra<Di&&(Pi=Di,Di=ra,ra=Pi),Qi||li<r?Qi?Di+ra>0^ji[1]<(u(ji[0]-xi)<r?Di:ra):Di<=ji[1]&&ji[1]<=ra:li>o^(xi<=ji[0]&&ji[0]<=Vi)){var qa=ge(Zn,(-ii+Rn)/Ai);return ue(qa,Bn),[ji,ie(qa)]}}}function $r(dn,hn){var wn=Jt?gt:o-gt,Ln=0;return dn<-wn?Ln|=1:dn>wn&&(Ln|=2),hn<-wn?Ln|=4:hn>wn&&(Ln|=8),Ln}return Nn(zr,function(dn){var hn,wn,Ln,mn,En;return{lineStart:function(){mn=Ln=!1,En=1},point:function(Yn,Jn){var si,nn=[Yn,Jn],oi=zr(Yn,Jn),Bn=Jt?oi?0:$r(Yn,Jn):oi?$r(Yn+(Yn<0?o:-o),Jn):0;if(!hn&&(mn=Ln=oi)&&dn.lineStart(),oi!==Ln&&(!(si=Vr(hn,nn))||br(hn,si)||br(nn,si))&&(nn[2]=1),oi!==Ln)En=0,oi?(dn.lineStart(),si=Vr(nn,hn),dn.point(si[0],si[1])):(si=Vr(hn,nn),dn.point(si[0],si[1],2),dn.lineEnd()),hn=si;else if(fr&&hn&&Jt^oi){var Zn;Bn&wn||!(Zn=Vr(nn,hn,!0))||(En=0,Jt?(dn.lineStart(),dn.point(Zn[0][0],Zn[0][1]),dn.point(Zn[1][0],Zn[1][1]),dn.lineEnd()):(dn.point(Zn[1][0],Zn[1][1]),dn.lineEnd(),dn.lineStart(),dn.point(Zn[0][0],Zn[0][1],3)))}!oi||hn&&br(hn,nn)||dn.point(nn[0],nn[1]),hn=nn,Ln=oi,wn=Bn},lineEnd:function(){Ln&&dn.lineEnd(),hn=null},clean:function(){return En|(mn&&Ln)<<1}}},function(dn,hn,wn,Ln){xr(Ln,gt,hr,wn,dn,hn)},Jt?[0,-gt]:[-o,gt-o])}function Xr(gt,Vt,hr,Jt){function fr(hn,wn){return gt<=hn&&hn<=hr&&Vt<=wn&&wn<=Jt}function zr(hn,wn,Ln,mn){var En=0,Yn=0;if(null==hn||(En=Vr(hn,Ln))!==(Yn=Vr(wn,Ln))||dn(hn,wn)<0^Ln>0)do{mn.point(0===En||3===En?gt:hr,En>1?Jt:Vt)}while((En=(En+Ln+4)%4)!==Yn);else mn.point(wn[0],wn[1])}function Vr(hn,wn){return u(hn[0]-gt)<r?wn>0?0:3:u(hn[0]-hr)<r?wn>0?2:1:u(hn[1]-Vt)<r?wn>0?1:0:wn>0?3:2}function $r(hn,wn){return dn(hn.x,wn.x)}function dn(hn,wn){var Ln=Vr(hn,1),mn=Vr(wn,1);return Ln!==mn?Ln-mn:0===Ln?wn[1]-hn[1]:1===Ln?hn[0]-wn[0]:2===Ln?hn[1]-wn[1]:wn[0]-hn[0]}return function(hn){var wn,Ln,mn,En,Yn,Jn,si,nn,oi,Bn,Zn,ii=hn,Ai=pr(),zi={point:Rn,lineStart:function(){zi.point=ji,Ln&&Ln.push(mn=[]),Bn=!0,oi=!1,si=nn=NaN},lineEnd:function(){wn&&(ji(En,Yn),Jn&&oi&&Ai.rejoin(),wn.push(Ai.result())),zi.point=Rn,oi&&ii.lineEnd()},polygonStart:function(){ii=Ai,wn=[],Ln=[],Zn=!0},polygonEnd:function(){var Pi=function(){for(var Di=0,ra=0,li=Ln.length;ra<li;++ra)for(var Qi,qa,ts=Ln[ra],No=1,xo=ts.length,ki=ts[0],ya=ki[0],ho=ki[1];No<xo;++No)Qi=ya,qa=ho,ya=(ki=ts[No])[0],ho=ki[1],qa<=Jt?ho>Jt&&(ya-Qi)*(Jt-qa)>(ho-qa)*(gt-Qi)&&++Di:ho<=Jt&&(ya-Qi)*(Jt-qa)<(ho-qa)*(gt-Qi)&&--Di;return Di}(),xi=Zn&&Pi,Vi=(wn=g.merge(wn)).length;(xi||Vi)&&(hn.polygonStart(),xi&&(hn.lineStart(),zr(null,null,1,hn),hn.lineEnd()),Vi&&kr(wn,$r,Pi,zr,hn),hn.polygonEnd()),ii=hn,wn=Ln=mn=null}};function Rn(Pi,xi){fr(Pi,xi)&&ii.point(Pi,xi)}function ji(Pi,xi){var Vi=fr(Pi,xi);if(Ln&&mn.push([Pi,xi]),Bn)En=Pi,Yn=xi,Jn=Vi,Bn=!1,Vi&&(ii.lineStart(),ii.point(Pi,xi));else if(Vi&&oi)ii.point(Pi,xi);else{var Di=[si=Math.max(-1e9,Math.min(1e9,si)),nn=Math.max(-1e9,Math.min(1e9,nn))],ra=[Pi=Math.max(-1e9,Math.min(1e9,Pi)),xi=Math.max(-1e9,Math.min(1e9,xi))];!function(li,Qi,qa,ts,No,xo){var ki,ya=li[0],ho=li[1],Zi=0,Sa=1,Ya=Qi[0]-ya,na=Qi[1]-ho;if(ki=qa-ya,Ya||!(ki>0)){if(ki/=Ya,Ya<0){if(ki<Zi)return;ki<Sa&&(Sa=ki)}else if(Ya>0){if(ki>Sa)return;ki>Zi&&(Zi=ki)}if(ki=No-ya,Ya||!(ki<0)){if(ki/=Ya,Ya<0){if(ki>Sa)return;ki>Zi&&(Zi=ki)}else if(Ya>0){if(ki<Zi)return;ki<Sa&&(Sa=ki)}if(ki=ts-ho,na||!(ki>0)){if(ki/=na,na<0){if(ki<Zi)return;ki<Sa&&(Sa=ki)}else if(na>0){if(ki>Sa)return;ki>Zi&&(Zi=ki)}if(ki=xo-ho,na||!(ki<0)){if(ki/=na,na<0){if(ki>Sa)return;ki>Zi&&(Zi=ki)}else if(na>0){if(ki<Zi)return;ki<Sa&&(Sa=ki)}return Zi>0&&(li[0]=ya+Zi*Ya,li[1]=ho+Zi*na),Sa<1&&(Qi[0]=ya+Sa*Ya,Qi[1]=ho+Sa*na),!0}}}}}(Di,ra,gt,Vt,hr,Jt)?Vi&&(ii.lineStart(),ii.point(Pi,xi),Zn=!1):(oi||(ii.lineStart(),ii.point(Di[0],Di[1])),ii.point(ra[0],ra[1]),Vi||ii.lineEnd(),Zn=!1)}si=Pi,nn=xi,oi=Vi}return zi}}var Un,qr,On,Tn=_(),rn={sphere:S,point:S,lineStart:function(){rn.point=ar,rn.lineEnd=Vn},lineEnd:S,polygonStart:S,polygonEnd:S};function Vn(){rn.point=rn.lineEnd=S}function ar(gt,Vt){Un=gt*=c,qr=b(Vt*=c),On=f(Vt),rn.point=zt}function zt(gt,Vt){gt*=c;var hr=b(Vt*=c),Jt=f(Vt),fr=u(gt-Un),zr=f(fr),Vr=Jt*b(fr),$r=On*hr-qr*Jt*zr,dn=qr*hr+On*Jt*zr;Tn.add(v(T(Vr*Vr+$r*$r),dn)),Un=gt,qr=hr,On=Jt}function Gt(gt){return Tn.reset(),X(gt,rn),+Tn}var mr=[null,null],Er={type:"LineString",coordinates:mr};function tn(gt,Vt){return mr[0]=gt,mr[1]=Vt,Gt(Er)}var Qr={Feature:function(gt,Vt){return Mr(gt.geometry,Vt)},FeatureCollection:function(gt,Vt){for(var hr=gt.features,Jt=-1,fr=hr.length;++Jt<fr;)if(Mr(hr[Jt].geometry,Vt))return!0;return!1}},Cr={Sphere:function(){return!0},Point:function(gt,Vt){return Ir(gt.coordinates,Vt)},MultiPoint:function(gt,Vt){for(var hr=gt.coordinates,Jt=-1,fr=hr.length;++Jt<fr;)if(Ir(hr[Jt],Vt))return!0;return!1},LineString:function(gt,Vt){return Sr(gt.coordinates,Vt)},MultiLineString:function(gt,Vt){for(var hr=gt.coordinates,Jt=-1,fr=hr.length;++Jt<fr;)if(Sr(hr[Jt],Vt))return!0;return!1},Polygon:function(gt,Vt){return Pr(gt.coordinates,Vt)},MultiPolygon:function(gt,Vt){for(var hr=gt.coordinates,Jt=-1,fr=hr.length;++Jt<fr;)if(Pr(hr[Jt],Vt))return!0;return!1},GeometryCollection:function(gt,Vt){for(var hr=gt.geometries,Jt=-1,fr=hr.length;++Jt<fr;)if(Mr(hr[Jt],Vt))return!0;return!1}};function Mr(gt,Vt){return!(!gt||!Cr.hasOwnProperty(gt.type))&&Cr[gt.type](gt,Vt)}function Ir(gt,Vt){return 0===tn(gt,Vt)}function Sr(gt,Vt){for(var hr,Jt,fr,zr=0,Vr=gt.length;zr<Vr;zr++){if(0===(Jt=tn(gt[zr],Vt))||zr>0&&(fr=tn(gt[zr],gt[zr-1]))>0&&hr<=fr&&Jt<=fr&&(hr+Jt-fr)*(1-Math.pow((hr-Jt)/fr,2))<1e-12*fr)return!0;hr=Jt}return!1}function Pr(gt,Vt){return!!zn(gt.map(Kr),vn(Vt))}function Kr(gt){return(gt=gt.map(vn)).pop(),gt}function vn(gt){return[gt[0]*c,gt[1]*c]}function Cn(gt,Vt,hr){var Jt=g.range(gt,Vt-r,hr).concat(Vt);return function(fr){return Jt.map(function(zr){return[fr,zr]})}}function ln(gt,Vt,hr){var Jt=g.range(gt,Vt-r,hr).concat(Vt);return function(fr){return Jt.map(function(zr){return[zr,fr]})}}function yn(){var gt,Vt,hr,Jt,fr,zr,Vr,$r,dn,hn,wn,Ln,mn=10,En=mn,Yn=90,Jn=360,si=2.5;function nn(){return{type:"MultiLineString",coordinates:oi()}}function oi(){return g.range(l(Jt/Yn)*Yn,hr,Yn).map(wn).concat(g.range(l($r/Jn)*Jn,Vr,Jn).map(Ln)).concat(g.range(l(Vt/mn)*mn,gt,mn).filter(function(Bn){return u(Bn%Yn)>r}).map(dn)).concat(g.range(l(zr/En)*En,fr,En).filter(function(Bn){return u(Bn%Jn)>r}).map(hn))}return nn.lines=function(){return oi().map(function(Bn){return{type:"LineString",coordinates:Bn}})},nn.outline=function(){return{type:"Polygon",coordinates:[wn(Jt).concat(Ln(Vr).slice(1),wn(hr).reverse().slice(1),Ln($r).reverse().slice(1))]}},nn.extent=function(Bn){return arguments.length?nn.extentMajor(Bn).extentMinor(Bn):nn.extentMinor()},nn.extentMajor=function(Bn){return arguments.length?($r=+Bn[0][1],Vr=+Bn[1][1],(Jt=+Bn[0][0])>(hr=+Bn[1][0])&&(Bn=Jt,Jt=hr,hr=Bn),$r>Vr&&(Bn=$r,$r=Vr,Vr=Bn),nn.precision(si)):[[Jt,$r],[hr,Vr]]},nn.extentMinor=function(Bn){return arguments.length?(zr=+Bn[0][1],fr=+Bn[1][1],(Vt=+Bn[0][0])>(gt=+Bn[1][0])&&(Bn=Vt,Vt=gt,gt=Bn),zr>fr&&(Bn=zr,zr=fr,fr=Bn),nn.precision(si)):[[Vt,zr],[gt,fr]]},nn.step=function(Bn){return arguments.length?nn.stepMajor(Bn).stepMinor(Bn):nn.stepMinor()},nn.stepMajor=function(Bn){return arguments.length?(Yn=+Bn[0],Jn=+Bn[1],nn):[Yn,Jn]},nn.stepMinor=function(Bn){return arguments.length?(mn=+Bn[0],En=+Bn[1],nn):[mn,En]},nn.precision=function(Bn){return arguments.length?(si=+Bn,dn=Cn(zr,fr,90),hn=ln(Vt,gt,si),wn=Cn($r,Vr,90),Ln=ln(Jt,hr,si),nn):si},nn.extentMajor([[-180,-90+r],[180,90-r]]).extentMinor([[-180,-80-r],[180,80+r]])}function Zr(gt){return gt}var Wr,pn,Mn,Dn,hi=_(),Qn=_(),An={point:S,lineStart:S,lineEnd:S,polygonStart:function(){An.lineStart=ci,An.lineEnd=Da},polygonEnd:function(){An.lineStart=An.lineEnd=An.point=S,hi.add(u(Qn)),Qn.reset()},result:function(){var gt=hi/2;return hi.reset(),gt}};function ci(){An.point=yi}function yi(gt,Vt){An.point=Xi,Wr=Mn=gt,pn=Dn=Vt}function Xi(gt,Vt){Qn.add(Dn*gt-Mn*Vt),Mn=gt,Dn=Vt}function Da(){Xi(Wr,pn)}var Co,Zo,Xa,to,la=1/0,Ma=la,Oi=-la,Yi=Oi,_a={point:function(gt,Vt){gt<la&&(la=gt),gt>Oi&&(Oi=gt),Vt<Ma&&(Ma=Vt),Vt>Yi&&(Yi=Vt)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var gt=[[la,Ma],[Oi,Yi]];return Oi=Yi=-(Ma=la=1/0),gt}},Uo=0,Ji=0,Eo=0,lo=0,Aa=0,ro=0,mo=0,Mo=0,Va=0,ga={point:Ja,lineStart:bs,lineEnd:fs,polygonStart:function(){ga.lineStart=$o,ga.lineEnd=Ls},polygonEnd:function(){ga.point=Ja,ga.lineStart=bs,ga.lineEnd=fs},result:function(){var gt=Va?[mo/Va,Mo/Va]:ro?[lo/ro,Aa/ro]:Eo?[Uo/Eo,Ji/Eo]:[NaN,NaN];return Uo=Ji=Eo=lo=Aa=ro=mo=Mo=Va=0,gt}};function Ja(gt,Vt){Uo+=gt,Ji+=Vt,++Eo}function bs(){ga.point=As}function As(gt,Vt){ga.point=Ki,Ja(Xa=gt,to=Vt)}function Ki(gt,Vt){var hr=gt-Xa,Jt=Vt-to,fr=T(hr*hr+Jt*Jt);lo+=fr*(Xa+gt)/2,Aa+=fr*(to+Vt)/2,ro+=fr,Ja(Xa=gt,to=Vt)}function fs(){ga.point=Ja}function $o(){ga.point=es}function Ls(){ss(Co,Zo)}function es(gt,Vt){ga.point=ss,Ja(Co=Xa=gt,Zo=to=Vt)}function ss(gt,Vt){var hr=gt-Xa,Jt=Vt-to,fr=T(hr*hr+Jt*Jt);lo+=fr*(Xa+gt)/2,Aa+=fr*(to+Vt)/2,ro+=fr,mo+=(fr=to*gt-Xa*Vt)*(Xa+gt),Mo+=fr*(to+Vt),Va+=3*fr,Ja(Xa=gt,to=Vt)}function Wo(gt){this._context=gt}Wo.prototype={_radius:4.5,pointRadius:function(gt){return this._radius=gt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(gt,Vt){switch(this._point){case 0:this._context.moveTo(gt,Vt),this._point=1;break;case 1:this._context.lineTo(gt,Vt);break;default:this._context.moveTo(gt+this._radius,Vt),this._context.arc(gt,Vt,this._radius,0,s)}},result:S};var go,vo,Lo,Do,pa,co=_(),yo={point:S,lineStart:function(){yo.point=ps},lineEnd:function(){go&&uo(vo,Lo),yo.point=S},polygonStart:function(){go=!0},polygonEnd:function(){go=null},result:function(){var gt=+co;return co.reset(),gt}};function ps(gt,Vt){yo.point=uo,vo=Do=gt,Lo=pa=Vt}function uo(gt,Vt){co.add(T((Do-=gt)*Do+(pa-=Vt)*pa)),Do=gt,pa=Vt}function Bo(){this._string=[]}function ds(gt){return"m0,"+gt+"a"+gt+","+gt+" 0 1,1 0,"+-2*gt+"a"+gt+","+gt+" 0 1,1 0,"+2*gt+"z"}function Io(gt){return function(Vt){var hr=new Gi;for(var Jt in gt)hr[Jt]=gt[Jt];return hr.stream=Vt,hr}}function Gi(){}function je(gt,Vt,hr){var Jt=gt.clipExtent&&gt.clipExtent();return gt.scale(150).translate([0,0]),null!=Jt&&gt.clipExtent(null),X(hr,gt.stream(_a)),Vt(_a.result()),null!=Jt&&gt.clipExtent(Jt),gt}function Ge(gt,Vt,hr){return je(gt,function(Jt){var fr=Vt[1][0]-Vt[0][0],zr=Vt[1][1]-Vt[0][1],Vr=Math.min(fr/(Jt[1][0]-Jt[0][0]),zr/(Jt[1][1]-Jt[0][1])),$r=+Vt[0][0]+(fr-Vr*(Jt[1][0]+Jt[0][0]))/2,dn=+Vt[0][1]+(zr-Vr*(Jt[1][1]+Jt[0][1]))/2;gt.scale(150*Vr).translate([$r,dn])},hr)}function nt(gt,Vt,hr){return Ge(gt,[[0,0],Vt],hr)}function lt(gt,Vt,hr){return je(gt,function(Jt){var fr=+Vt,zr=fr/(Jt[1][0]-Jt[0][0]),Vr=(fr-zr*(Jt[1][0]+Jt[0][0]))/2,$r=-zr*Jt[0][1];gt.scale(150*zr).translate([Vr,$r])},hr)}function _t(gt,Vt,hr){return je(gt,function(Jt){var fr=+Vt,zr=fr/(Jt[1][1]-Jt[0][1]),Vr=-zr*Jt[0][0],$r=(fr-zr*(Jt[1][1]+Jt[0][1]))/2;gt.scale(150*zr).translate([Vr,$r])},hr)}Bo.prototype={_radius:4.5,_circle:ds(4.5),pointRadius:function(gt){return(gt=+gt)!==this._radius&&(this._radius=gt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(gt,Vt){switch(this._point){case 0:this._string.push("M",gt,",",Vt),this._point=1;break;case 1:this._string.push("L",gt,",",Vt);break;default:null==this._circle&&(this._circle=ds(this._radius)),this._string.push("M",gt,",",Vt,this._circle)}},result:function(){if(this._string.length){var gt=this._string.join("");return this._string=[],gt}return null}},Gi.prototype={constructor:Gi,point:function(gt,Vt){this.stream.point(gt,Vt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mt=f(30*c);function Ct(gt,Vt){return+Vt?function(hr,Jt){function fr(zr,Vr,$r,dn,hn,wn,Ln,mn,En,Yn,Jn,si,nn,oi){var Bn=Ln-zr,Zn=mn-Vr,ii=Bn*Bn+Zn*Zn;if(ii>4*Jt&&nn--){var Ai=dn+Yn,zi=hn+Jn,Rn=wn+si,ji=T(Ai*Ai+zi*zi+Rn*Rn),Pi=I(Rn/=ji),xi=u(u(Rn)-1)<r||u($r-En)<r?($r+En)/2:v(zi,Ai),Vi=hr(xi,Pi),Di=Vi[0],ra=Vi[1],li=Di-zr,Qi=ra-Vr,qa=Zn*li-Bn*Qi;(qa*qa/ii>Jt||u((Bn*li+Zn*Qi)/ii-.5)>.3||dn*Yn+hn*Jn+wn*si<mt)&&(fr(zr,Vr,$r,dn,hn,wn,Di,ra,xi,Ai/=ji,zi/=ji,Rn,nn,oi),oi.point(Di,ra),fr(Di,ra,xi,Ai,zi,Rn,Ln,mn,En,Yn,Jn,si,nn,oi))}}return function(zr){var Vr,$r,dn,hn,wn,Ln,mn,En,Yn,Jn,si,nn,oi={point:Bn,lineStart:Zn,lineEnd:Ai,polygonStart:function(){zr.polygonStart(),oi.lineStart=zi},polygonEnd:function(){zr.polygonEnd(),oi.lineStart=Zn}};function Bn(Pi,xi){Pi=hr(Pi,xi),zr.point(Pi[0],Pi[1])}function Zn(){En=NaN,oi.point=ii,zr.lineStart()}function ii(Pi,xi){var Vi=ce([Pi,xi]),Di=hr(Pi,xi);fr(En,Yn,mn,Jn,si,nn,En=Di[0],Yn=Di[1],mn=Pi,Jn=Vi[0],si=Vi[1],nn=Vi[2],16,zr),zr.point(En,Yn)}function Ai(){oi.point=Bn,zr.lineEnd()}function zi(){Zn(),oi.point=Rn,oi.lineEnd=ji}function Rn(Pi,xi){ii(Vr=Pi,xi),$r=En,dn=Yn,hn=Jn,wn=si,Ln=nn,oi.point=ii}function ji(){fr(En,Yn,mn,Jn,si,nn,$r,dn,Vr,hn,wn,Ln,16,zr),oi.lineEnd=Ai,Ai()}return oi}}(gt,Vt):(hr=gt,Io({point:function(Jt,fr){Jt=hr(Jt,fr),this.stream.point(Jt[0],Jt[1])}}));var hr}var rr=Io({point:function(gt,Vt){this.stream.point(gt*c,Vt*c)}});function ir(gt,Vt,hr,Jt,fr){function zr(Vr,$r){return[Vt+gt*(Vr*=Jt),hr-gt*($r*=fr)]}return zr.invert=function(Vr,$r){return[(Vr-Vt)/gt*Jt,(hr-$r)/gt*fr]},zr}function $t(gt,Vt,hr,Jt,fr,zr){var Vr=f(zr),$r=b(zr),dn=Vr*gt,hn=$r*gt,wn=Vr/gt,Ln=$r/gt,mn=($r*hr-Vr*Vt)/gt,En=($r*Vt+Vr*hr)/gt;function Yn(Jn,si){return[dn*(Jn*=Jt)-hn*(si*=fr)+Vt,hr-hn*Jn-dn*si]}return Yn.invert=function(Jn,si){return[Jt*(wn*Jn-Ln*si+mn),fr*(En-Ln*Jn-wn*si)]},Yn}function sr(gt){return gr(function(){return gt})()}function gr(gt){var Vt,hr,Jt,fr,zr,Vr,$r,dn,hn,wn,Ln=150,mn=480,En=250,Yn=0,Jn=0,si=0,nn=0,oi=0,Bn=0,Zn=1,ii=1,Ai=null,zi=jr,Rn=null,ji=Zr,Pi=.5;function xi(li){return dn(li[0]*c,li[1]*c)}function Vi(li){return(li=dn.invert(li[0],li[1]))&&[li[0]*a,li[1]*a]}function Di(){var li=$t(Ln,0,0,Zn,ii,Bn).apply(null,Vt(Yn,Jn)),Qi=(Bn?$t:ir)(Ln,mn-li[0],En-li[1],Zn,ii,Bn);return hr=or(si,nn,oi),$r=Nt(Vt,Qi),dn=Nt(hr,$r),Vr=Ct($r,Pi),ra()}function ra(){return hn=wn=null,xi}return xi.stream=function(li){return hn&&wn===li?hn:hn=rr((Qi=hr,Io({point:function(qa,ts){var No=Qi(qa,ts);return this.stream.point(No[0],No[1])}}))(zi(Vr(ji(wn=li)))));var Qi},xi.preclip=function(li){return arguments.length?(zi=li,Ai=void 0,ra()):zi},xi.postclip=function(li){return arguments.length?(ji=li,Rn=Jt=fr=zr=null,ra()):ji},xi.clipAngle=function(li){return arguments.length?(zi=+li?Lr(Ai=li*c):(Ai=null,jr),ra()):Ai*a},xi.clipExtent=function(li){return arguments.length?(ji=null==li?(Rn=Jt=fr=zr=null,Zr):Xr(Rn=+li[0][0],Jt=+li[0][1],fr=+li[1][0],zr=+li[1][1]),ra()):null==Rn?null:[[Rn,Jt],[fr,zr]]},xi.scale=function(li){return arguments.length?(Ln=+li,Di()):Ln},xi.translate=function(li){return arguments.length?(mn=+li[0],En=+li[1],Di()):[mn,En]},xi.center=function(li){return arguments.length?(Yn=li[0]%360*c,Jn=li[1]%360*c,Di()):[Yn*a,Jn*a]},xi.rotate=function(li){return arguments.length?(si=li[0]%360*c,nn=li[1]%360*c,oi=li.length>2?li[2]%360*c:0,Di()):[si*a,nn*a,oi*a]},xi.angle=function(li){return arguments.length?(Bn=li%360*c,Di()):Bn*a},xi.reflectX=function(li){return arguments.length?(Zn=li?-1:1,Di()):Zn<0},xi.reflectY=function(li){return arguments.length?(ii=li?-1:1,Di()):ii<0},xi.precision=function(li){return arguments.length?(Vr=Ct($r,Pi=li*li),ra()):T(Pi)},xi.fitExtent=function(li,Qi){return Ge(xi,li,Qi)},xi.fitSize=function(li,Qi){return nt(xi,li,Qi)},xi.fitWidth=function(li,Qi){return lt(xi,li,Qi)},xi.fitHeight=function(li,Qi){return _t(xi,li,Qi)},function(){return Vt=gt.apply(this,arguments),xi.invert=Vt.invert&&Vi,Di()}}function Tr(gt){var Vt=0,hr=o/3,Jt=gr(gt),fr=Jt(Vt,hr);return fr.parallels=function(zr){return arguments.length?Jt(Vt=zr[0]*c,hr=zr[1]*c):[Vt*a,hr*a]},fr}function Ar(gt,Vt){var hr=b(gt),Jt=(hr+b(Vt))/2;if(u(Jt)<r)return function($r){var dn=f($r);function hn(wn,Ln){return[wn*dn,b(Ln)/dn]}return hn.invert=function(wn,Ln){return[wn/dn,I(Ln*dn)]},hn}(gt);var fr=1+hr*(2*Jt-hr),zr=T(fr)/Jt;function Vr($r,dn){var hn=T(fr-2*Jt*b(dn))/Jt;return[hn*b($r*=Jt),zr-hn*f($r)]}return Vr.invert=function($r,dn){var hn=zr-dn,wn=v($r,u(hn))*k(hn);return hn*Jt<0&&(wn-=o*k($r)*k(hn)),[wn/Jt,I((fr-($r*$r+hn*hn)*Jt*Jt)/(2*Jt))]},Vr}function Br(){return Tr(Ar).scale(155.424).center([0,33.6442])}function un(){return Br().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xn(gt){return function(Vt,hr){var Jt=f(Vt),fr=f(hr),zr=gt(Jt*fr);return[zr*fr*b(Vt),zr*b(hr)]}}function Fn(gt){return function(Vt,hr){var Jt=T(Vt*Vt+hr*hr),fr=gt(Jt),zr=b(fr),Vr=f(fr);return[v(Vt*zr,Jt*Vr),I(Jt&&hr*zr/Jt)]}}var Hn=xn(function(gt){return T(2/(1+gt))});Hn.invert=Fn(function(gt){return 2*I(gt/2)});var Kn=xn(function(gt){return(gt=A(gt))&&gt/b(gt)});function qn(gt,Vt){return[gt,m(L((n+Vt)/2))]}function wi(gt){var Vt,hr,Jt,fr=sr(gt),zr=fr.center,Vr=fr.scale,$r=fr.translate,dn=fr.clipExtent,hn=null;function wn(){var Ln=o*Vr(),mn=fr(_r(fr.rotate()).invert([0,0]));return dn(null==hn?[[mn[0]-Ln,mn[1]-Ln],[mn[0]+Ln,mn[1]+Ln]]:gt===qn?[[Math.max(mn[0]-Ln,hn),Vt],[Math.min(mn[0]+Ln,hr),Jt]]:[[hn,Math.max(mn[1]-Ln,Vt)],[hr,Math.min(mn[1]+Ln,Jt)]])}return fr.scale=function(Ln){return arguments.length?(Vr(Ln),wn()):Vr()},fr.translate=function(Ln){return arguments.length?($r(Ln),wn()):$r()},fr.center=function(Ln){return arguments.length?(zr(Ln),wn()):zr()},fr.clipExtent=function(Ln){return arguments.length?(null==Ln?hn=Vt=hr=Jt=null:(hn=+Ln[0][0],Vt=+Ln[0][1],hr=+Ln[1][0],Jt=+Ln[1][1]),wn()):null==hn?null:[[hn,Vt],[hr,Jt]]},wn()}function Li(gt){return L((n+gt)/2)}function Ri(gt,Vt){var hr=f(gt),Jt=gt===Vt?b(gt):m(hr/f(Vt))/m(Li(Vt)/Li(gt)),fr=hr*w(Li(gt),Jt)/Jt;if(!Jt)return qn;function zr(Vr,$r){fr>0?$r<-n+r&&($r=-n+r):$r>n-r&&($r=n-r);var dn=fr/w(Li($r),Jt);return[dn*b(Jt*Vr),fr-dn*f(Jt*Vr)]}return zr.invert=function(Vr,$r){var dn=fr-$r,hn=k(Jt)*T(Vr*Vr+dn*dn),wn=v(Vr,u(dn))*k(dn);return dn*Jt<0&&(wn-=o*k(Vr)*k(dn)),[wn/Jt,2*h(w(fr/hn,1/Jt))-n]},zr}function Hi(gt,Vt){return[gt,Vt]}function Ui(gt,Vt){var hr=f(gt),Jt=gt===Vt?b(gt):(hr-f(Vt))/(Vt-gt),fr=hr/Jt+gt;if(u(Jt)<r)return Hi;function zr(Vr,$r){var dn=fr-$r,hn=Jt*Vr;return[dn*b(hn),fr-dn*f(hn)]}return zr.invert=function(Vr,$r){var dn=fr-$r,hn=v(Vr,u(dn))*k(dn);return dn*Jt<0&&(hn-=o*k(Vr)*k(dn)),[hn/Jt,fr-k(Jt)*T(Vr*Vr+dn*dn)]},zr}Kn.invert=Fn(function(gt){return gt}),qn.invert=function(gt,Vt){return[gt,2*h(x(Vt))-n]},Hi.invert=Hi;var ba=1.340264,va=-.081106,ca=893e-6,ua=.003796,da=T(3)/2;function Ua(gt,Vt){var hr=I(da*b(Vt)),Jt=hr*hr,fr=Jt*Jt*Jt;return[gt*f(hr)/(da*(ba+3*va*Jt+fr*(7*ca+9*ua*Jt))),hr*(ba+va*Jt+fr*(ca+ua*Jt))]}function no(gt,Vt){var hr=f(Vt),Jt=f(gt)*hr;return[hr*b(gt)/Jt,b(Vt)/Jt]}function Ha(gt,Vt){var hr=Vt*Vt,Jt=hr*hr;return[gt*(.8707-.131979*hr+Jt*(Jt*(.003971*hr-.001529*Jt)-.013791)),Vt*(1.007226+hr*(.015085+Jt*(.028874*hr-.044475-.005916*Jt)))]}function io(gt,Vt){return[f(Vt)*b(gt),b(Vt)]}function Ka(gt,Vt){var hr=f(Vt),Jt=1+f(gt)*hr;return[hr*b(gt)/Jt,b(Vt)/Jt]}function Ni(gt,Vt){return[m(L((n+Vt)/2)),-gt]}Ua.invert=function(gt,Vt){for(var hr,Jt=Vt,fr=Jt*Jt,zr=fr*fr*fr,Vr=0;Vr<12&&(zr=(fr=(Jt-=hr=(Jt*(ba+va*fr+zr*(ca+ua*fr))-Vt)/(ba+3*va*fr+zr*(7*ca+9*ua*fr)))*Jt)*fr*fr,!(u(hr)<1e-12));++Vr);return[da*gt*(ba+3*va*fr+zr*(7*ca+9*ua*fr))/f(Jt),I(b(Jt)/da)]},no.invert=Fn(h),Ha.invert=function(gt,Vt){var hr,Jt=Vt,fr=25;do{var zr=Jt*Jt,Vr=zr*zr;Jt-=hr=(Jt*(1.007226+zr*(.015085+Vr*(.028874*zr-.044475-.005916*Vr)))-Vt)/(1.007226+zr*(.045255+Vr*(.259866*zr-.311325-.005916*11*Vr)))}while(u(hr)>r&&--fr>0);return[gt/(.8707+(zr=Jt*Jt)*(zr*(zr*zr*zr*(.003971-.001529*zr)-.013791)-.131979)),Jt]},io.invert=Fn(I),Ka.invert=Fn(function(gt){return 2*h(gt)}),Ni.invert=function(gt,Vt){return[-Vt,2*h(x(gt))-n]},d.geoAlbers=un,d.geoAlbersUsa=function(){var gt,Vt,hr,Jt,fr,zr,Vr=un(),$r=Br().rotate([154,0]).center([-2,58.5]).parallels([55,65]),dn=Br().rotate([157,0]).center([-3,19.9]).parallels([8,18]),hn={point:function(mn,En){zr=[mn,En]}};function wn(mn){var En=mn[0],Yn=mn[1];return zr=null,hr.point(En,Yn),zr||(Jt.point(En,Yn),zr)||(fr.point(En,Yn),zr)}function Ln(){return gt=Vt=null,wn}return wn.invert=function(mn){var En=Vr.scale(),Yn=Vr.translate(),Jn=(mn[0]-Yn[0])/En,si=(mn[1]-Yn[1])/En;return(si>=.12&&si<.234&&Jn>=-.425&&Jn<-.214?$r:si>=.166&&si<.234&&Jn>=-.214&&Jn<-.115?dn:Vr).invert(mn)},wn.stream=function(mn){return gt&&Vt===mn?gt:(En=[Vr.stream(Vt=mn),$r.stream(mn),dn.stream(mn)],Yn=En.length,gt={point:function(Jn,si){for(var nn=-1;++nn<Yn;)En[nn].point(Jn,si)},sphere:function(){for(var Jn=-1;++Jn<Yn;)En[Jn].sphere()},lineStart:function(){for(var Jn=-1;++Jn<Yn;)En[Jn].lineStart()},lineEnd:function(){for(var Jn=-1;++Jn<Yn;)En[Jn].lineEnd()},polygonStart:function(){for(var Jn=-1;++Jn<Yn;)En[Jn].polygonStart()},polygonEnd:function(){for(var Jn=-1;++Jn<Yn;)En[Jn].polygonEnd()}});var En,Yn},wn.precision=function(mn){return arguments.length?(Vr.precision(mn),$r.precision(mn),dn.precision(mn),Ln()):Vr.precision()},wn.scale=function(mn){return arguments.length?(Vr.scale(mn),$r.scale(.35*mn),dn.scale(mn),wn.translate(Vr.translate())):Vr.scale()},wn.translate=function(mn){if(!arguments.length)return Vr.translate();var En=Vr.scale(),Yn=+mn[0],Jn=+mn[1];return hr=Vr.translate(mn).clipExtent([[Yn-.455*En,Jn-.238*En],[Yn+.455*En,Jn+.238*En]]).stream(hn),Jt=$r.translate([Yn-.307*En,Jn+.201*En]).clipExtent([[Yn-.425*En+r,Jn+.12*En+r],[Yn-.214*En-r,Jn+.234*En-r]]).stream(hn),fr=dn.translate([Yn-.205*En,Jn+.212*En]).clipExtent([[Yn-.214*En+r,Jn+.166*En+r],[Yn-.115*En-r,Jn+.234*En-r]]).stream(hn),Ln()},wn.fitExtent=function(mn,En){return Ge(wn,mn,En)},wn.fitSize=function(mn,En){return nt(wn,mn,En)},wn.fitWidth=function(mn,En){return lt(wn,mn,En)},wn.fitHeight=function(mn,En){return _t(wn,mn,En)},wn.scale(1070)},d.geoArea=function(gt){return V.reset(),X(gt,Q),2*V},d.geoAzimuthalEqualArea=function(){return sr(Hn).scale(124.75).clipAngle(179.999)},d.geoAzimuthalEqualAreaRaw=Hn,d.geoAzimuthalEquidistant=function(){return sr(Kn).scale(79.4188).clipAngle(179.999)},d.geoAzimuthalEquidistantRaw=Kn,d.geoBounds=function(gt){var Vt,hr,Jt,fr,zr,Vr,$r;if(fe=Le=-(Te=we=1/0),Pe=[],X(gt,We),hr=Pe.length){for(Pe.sort(vt),Vt=1,zr=[Jt=Pe[0]];Vt<hr;++Vt)ft(Jt,(fr=Pe[Vt])[0])||ft(Jt,fr[1])?(ct(Jt[0],fr[1])>ct(Jt[0],Jt[1])&&(Jt[1]=fr[1]),ct(fr[0],Jt[1])>ct(Jt[0],Jt[1])&&(Jt[0]=fr[0])):zr.push(Jt=fr);for(Vr=-1/0,Vt=0,Jt=zr[hr=zr.length-1];Vt<=hr;Jt=fr,++Vt)($r=ct(Jt[1],(fr=zr[Vt])[0]))>Vr&&(Vr=$r,Te=fr[0],Le=Jt[1])}return Pe=Fe=null,Te===1/0||we===1/0?[[NaN,NaN],[NaN,NaN]]:[[Te,we],[Le,fe]]},d.geoCentroid=function(gt){qe=rt=ze=He=Xe=Je=at=pt=xt=Ft=Dt=0,X(gt,It);var Vt=xt,hr=Ft,Jt=Dt,fr=Vt*Vt+hr*hr+Jt*Jt;return fr<1e-12&&(Vt=Je,hr=at,Jt=pt,rt<r&&(Vt=ze,hr=He,Jt=Xe),(fr=Vt*Vt+hr*hr+Jt*Jt)<1e-12)?[NaN,NaN]:[v(hr,Vt)*a,I(Jt/T(fr))*a]},d.geoCircle=function(){var gt,Vt,hr=Mt([0,0]),Jt=Mt(90),fr=Mt(6),zr={point:function($r,dn){gt.push($r=Vt($r,dn)),$r[0]*=a,$r[1]*=a}};function Vr(){var $r=hr.apply(this,arguments),dn=Jt.apply(this,arguments)*c,hn=fr.apply(this,arguments)*c;return gt=[],Vt=or(-$r[0]*c,-$r[1]*c,0).invert,xr(zr,dn,hn,1),$r={type:"Polygon",coordinates:[gt]},gt=Vt=null,$r}return Vr.center=function($r){return arguments.length?(hr="function"==typeof $r?$r:Mt([+$r[0],+$r[1]]),Vr):hr},Vr.radius=function($r){return arguments.length?(Jt="function"==typeof $r?$r:Mt(+$r),Vr):Jt},Vr.precision=function($r){return arguments.length?(fr="function"==typeof $r?$r:Mt(+$r),Vr):fr},Vr},d.geoClipAntimeridian=jr,d.geoClipCircle=Lr,d.geoClipExtent=function(){var gt,Vt,hr,Jt=0,fr=0,zr=960,Vr=500;return hr={stream:function($r){return gt&&Vt===$r?gt:gt=Xr(Jt,fr,zr,Vr)(Vt=$r)},extent:function($r){return arguments.length?(Jt=+$r[0][0],fr=+$r[0][1],zr=+$r[1][0],Vr=+$r[1][1],gt=Vt=null,hr):[[Jt,fr],[zr,Vr]]}}},d.geoClipRectangle=Xr,d.geoConicConformal=function(){return Tr(Ri).scale(109.5).parallels([30,30])},d.geoConicConformalRaw=Ri,d.geoConicEqualArea=Br,d.geoConicEqualAreaRaw=Ar,d.geoConicEquidistant=function(){return Tr(Ui).scale(131.154).center([0,13.9389])},d.geoConicEquidistantRaw=Ui,d.geoContains=function(gt,Vt){return(gt&&Qr.hasOwnProperty(gt.type)?Qr[gt.type]:Mr)(gt,Vt)},d.geoDistance=tn,d.geoEqualEarth=function(){return sr(Ua).scale(177.158)},d.geoEqualEarthRaw=Ua,d.geoEquirectangular=function(){return sr(Hi).scale(152.63)},d.geoEquirectangularRaw=Hi,d.geoGnomonic=function(){return sr(no).scale(144.049).clipAngle(60)},d.geoGnomonicRaw=no,d.geoGraticule=yn,d.geoGraticule10=function(){return yn()()},d.geoIdentity=function(){var gt,Vt,hr,Jt,fr,zr,Vr,$r=1,dn=0,hn=0,wn=1,Ln=1,mn=0,En=null,Yn=1,Jn=1,si=Io({point:function(Zn,ii){var Ai=Bn([Zn,ii]);this.stream.point(Ai[0],Ai[1])}}),nn=Zr;function oi(){return Yn=$r*wn,Jn=$r*Ln,zr=Vr=null,Bn}function Bn(Zn){var ii=Zn[0]*Yn,Ai=Zn[1]*Jn;if(mn){var zi=Ai*gt-ii*Vt;ii=ii*gt+Ai*Vt,Ai=zi}return[ii+dn,Ai+hn]}return Bn.invert=function(Zn){var ii=Zn[0]-dn,Ai=Zn[1]-hn;if(mn){var zi=Ai*gt+ii*Vt;ii=ii*gt-Ai*Vt,Ai=zi}return[ii/Yn,Ai/Jn]},Bn.stream=function(Zn){return zr&&Vr===Zn?zr:zr=si(nn(Vr=Zn))},Bn.postclip=function(Zn){return arguments.length?(nn=Zn,En=hr=Jt=fr=null,oi()):nn},Bn.clipExtent=function(Zn){return arguments.length?(nn=null==Zn?(En=hr=Jt=fr=null,Zr):Xr(En=+Zn[0][0],hr=+Zn[0][1],Jt=+Zn[1][0],fr=+Zn[1][1]),oi()):null==En?null:[[En,hr],[Jt,fr]]},Bn.scale=function(Zn){return arguments.length?($r=+Zn,oi()):$r},Bn.translate=function(Zn){return arguments.length?(dn=+Zn[0],hn=+Zn[1],oi()):[dn,hn]},Bn.angle=function(Zn){return arguments.length?(Vt=b(mn=Zn%360*c),gt=f(mn),oi()):mn*a},Bn.reflectX=function(Zn){return arguments.length?(wn=Zn?-1:1,oi()):wn<0},Bn.reflectY=function(Zn){return arguments.length?(Ln=Zn?-1:1,oi()):Ln<0},Bn.fitExtent=function(Zn,ii){return Ge(Bn,Zn,ii)},Bn.fitSize=function(Zn,ii){return nt(Bn,Zn,ii)},Bn.fitWidth=function(Zn,ii){return lt(Bn,Zn,ii)},Bn.fitHeight=function(Zn,ii){return _t(Bn,Zn,ii)},Bn},d.geoInterpolate=function(gt,Vt){var hr=gt[0]*c,Jt=gt[1]*c,fr=Vt[0]*c,zr=Vt[1]*c,Vr=f(Jt),$r=b(Jt),dn=f(zr),hn=b(zr),wn=Vr*f(hr),Ln=Vr*b(hr),mn=dn*f(fr),En=dn*b(fr),Yn=2*I(T(D(zr-Jt)+Vr*dn*D(fr-hr))),Jn=b(Yn),si=Yn?function(nn){var oi=b(nn*=Yn)/Jn,Bn=b(Yn-nn)/Jn,Zn=Bn*wn+oi*mn,ii=Bn*Ln+oi*En,Ai=Bn*$r+oi*hn;return[v(ii,Zn)*a,v(Ai,T(Zn*Zn+ii*ii))*a]}:function(){return[hr*a,Jt*a]};return si.distance=Yn,si},d.geoLength=Gt,d.geoMercator=function(){return wi(qn).scale(961/s)},d.geoMercatorRaw=qn,d.geoNaturalEarth1=function(){return sr(Ha).scale(175.295)},d.geoNaturalEarth1Raw=Ha,d.geoOrthographic=function(){return sr(io).scale(249.5).clipAngle(90+r)},d.geoOrthographicRaw=io,d.geoPath=function(gt,Vt){var hr,Jt,fr=4.5;function zr(Vr){return Vr&&("function"==typeof fr&&Jt.pointRadius(+fr.apply(this,arguments)),X(Vr,hr(Jt))),Jt.result()}return zr.area=function(Vr){return X(Vr,hr(An)),An.result()},zr.measure=function(Vr){return X(Vr,hr(yo)),yo.result()},zr.bounds=function(Vr){return X(Vr,hr(_a)),_a.result()},zr.centroid=function(Vr){return X(Vr,hr(ga)),ga.result()},zr.projection=function(Vr){return arguments.length?(hr=null==Vr?(gt=null,Zr):(gt=Vr).stream,zr):gt},zr.context=function(Vr){return arguments.length?(Jt=null==Vr?(Vt=null,new Bo):new Wo(Vt=Vr),"function"!=typeof fr&&Jt.pointRadius(fr),zr):Vt},zr.pointRadius=function(Vr){return arguments.length?(fr="function"==typeof Vr?Vr:(Jt.pointRadius(+Vr),+Vr),zr):fr},zr.projection(gt).context(Vt)},d.geoProjection=sr,d.geoProjectionMutator=gr,d.geoRotation=_r,d.geoStereographic=function(){return sr(Ka).scale(250).clipAngle(142)},d.geoStereographicRaw=Ka,d.geoStream=X,d.geoTransform=function(gt){return{stream:Io(gt)}},d.geoTransverseMercator=function(){var gt=wi(Ni),Vt=gt.center,hr=gt.rotate;return gt.center=function(Jt){return arguments.length?Vt([-Jt[1],Jt[0]]):[(Jt=Vt())[1],-Jt[0]]},gt.rotate=function(Jt){return arguments.length?hr([Jt[0],Jt[1],Jt.length>2?Jt[2]+90:90]):[(Jt=hr())[0],Jt[1],Jt[2]-90]},hr([0,0,90]).scale(159.155)},d.geoTransverseMercatorRaw=Ni,Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-array")):g((d=d||self).d3=d.d3||{},d.d3)},{"d3-array":107}],115:[function(y,$,ee){var d;d=this,function(d){"use strict";function g(se,de){return se.parent===de.parent?1:2}function _(se,de){return se+de.x}function t(se,de){return Math.max(se,de.y)}function e(se){var de=0,ue=se.children,ge=ue&&ue.length;if(ge)for(;--ge>=0;)de+=ue[ge].value;else de=1;se.value=de}function i(se,de){var ue,ge,be,Te,we,Le=new p(se),fe=+se.value&&(Le.value=se.value),ve=[Le];for(null==de&&(de=r);ue=ve.pop();)if(fe&&(ue.value=+ue.data.value),(be=de(ue.data))&&(we=be.length))for(ue.children=new Array(we),Te=we-1;Te>=0;--Te)ve.push(ge=ue.children[Te]=new p(be[Te])),ge.parent=ue,ge.depth=ue.depth+1;return Le.eachBefore(n)}function r(se){return se.children}function o(se){se.data=se.data.data}function n(se){var de=0;do{se.height=de}while((se=se.parent)&&se.height<++de)}function p(se){this.data=se,this.depth=this.height=0,this.parent=null}p.prototype=i.prototype={constructor:p,count:function(){return this.eachAfter(e)},each:function(se){var de,ue,ge,be,Te=this,we=[Te];do{for(de=we.reverse(),we=[];Te=de.pop();)if(se(Te),ue=Te.children)for(ge=0,be=ue.length;ge<be;++ge)we.push(ue[ge])}while(we.length);return this},eachAfter:function(se){for(var de,ue,ge,be=this,Te=[be],we=[];be=Te.pop();)if(we.push(be),de=be.children)for(ue=0,ge=de.length;ue<ge;++ue)Te.push(de[ue]);for(;be=we.pop();)se(be);return this},eachBefore:function(se){for(var de,ue,ge=this,be=[ge];ge=be.pop();)if(se(ge),de=ge.children)for(ue=de.length-1;ue>=0;--ue)be.push(de[ue]);return this},sum:function(se){return this.eachAfter(function(de){for(var ue=+se(de.data)||0,ge=de.children,be=ge&&ge.length;--be>=0;)ue+=ge[be].value;de.value=ue})},sort:function(se){return this.eachBefore(function(de){de.children&&de.children.sort(se)})},path:function(se){for(var de=this,ue=function(Te,we){if(Te===we)return Te;var Le=Te.ancestors(),fe=we.ancestors(),ve=null;for(Te=Le.pop(),we=fe.pop();Te===we;)ve=Te,Te=Le.pop(),we=fe.pop();return ve}(de,se),ge=[de];de!==ue;)ge.push(de=de.parent);for(var be=ge.length;se!==ue;)ge.splice(be,0,se),se=se.parent;return ge},ancestors:function(){for(var se=this,de=[se];se=se.parent;)de.push(se);return de},descendants:function(){var se=[];return this.each(function(de){se.push(de)}),se},leaves:function(){var se=[];return this.eachBefore(function(de){de.children||se.push(de)}),se},links:function(){var se=this,de=[];return se.each(function(ue){ue!==se&&de.push({source:ue.parent,target:ue})}),de},copy:function(){return i(this).eachBefore(o)}};var s=Array.prototype.slice;function a(se){for(var de,ue,ge=0,be=(se=function(we){for(var Le,fe,ve=we.length;ve;)fe=Math.random()*ve--|0,Le=we[ve],we[ve]=we[fe],we[fe]=Le;return we}(s.call(se))).length,Te=[];ge<be;)de=se[ge],ue&&h(ue,de)?++ge:(ue=f(Te=c(Te,de)),ge=0);return ue}function c(se,de){var ue,ge;if(v(de,se))return[de];for(ue=0;ue<se.length;++ue)if(u(de,se[ue])&&v(l(se[ue],de),se))return[se[ue],de];for(ue=0;ue<se.length-1;++ue)for(ge=ue+1;ge<se.length;++ge)if(u(l(se[ue],se[ge]),de)&&u(l(se[ue],de),se[ge])&&u(l(se[ge],de),se[ue])&&v(x(se[ue],se[ge],de),se))return[se[ue],se[ge],de];throw new Error}function u(se,de){var ue=se.r-de.r,ge=de.x-se.x,be=de.y-se.y;return ue<0||ue*ue<ge*ge+be*be}function h(se,de){var ue=se.r-de.r+1e-6,ge=de.x-se.x,be=de.y-se.y;return ue>0&&ue*ue>ge*ge+be*be}function v(se,de){for(var ue=0;ue<de.length;++ue)if(!h(se,de[ue]))return!1;return!0}function f(se){switch(se.length){case 1:return{x:(de=se[0]).x,y:de.y,r:de.r};case 2:return l(se[0],se[1]);case 3:return x(se[0],se[1],se[2])}var de}function l(se,de){var ue=se.x,ge=se.y,be=se.r,Te=de.x,we=de.y,Le=de.r,fe=Te-ue,ve=we-ge,Me=Le-be,ke=Math.sqrt(fe*fe+ve*ve);return{x:(ue+Te+fe/ke*Me)/2,y:(ge+we+ve/ke*Me)/2,r:(ke+be+Le)/2}}function x(se,de,ue){var ge=se.x,be=se.y,Te=se.r,we=de.x,Le=de.y,fe=de.r,ve=ue.x,Me=ue.y,ke=ue.r,Ce=ge-we,Pe=ge-ve,Fe=be-Le,qe=be-Me,rt=fe-Te,ze=ke-Te,He=ge*ge+be*be-Te*Te,Xe=He-we*we-Le*Le+fe*fe,Je=He-ve*ve-Me*Me+ke*ke,at=Pe*Fe-Ce*qe,pt=(Fe*Je-qe*Xe)/(2*at)-ge,xt=(qe*rt-Fe*ze)/at,Ft=(Pe*Xe-Ce*Je)/(2*at)-be,Dt=(Ce*ze-Pe*rt)/at,ot=xt*xt+Dt*Dt-1,it=2*(Te+pt*xt+Ft*Dt),Et=pt*pt+Ft*Ft-Te*Te,Xt=-(ot?(it+Math.sqrt(it*it-4*ot*Et))/(2*ot):Et/it);return{x:ge+pt+xt*Xt,y:be+Ft+Dt*Xt,r:Xt}}function m(se,de,ue){var ge,be,Te,we,Le=se.x-de.x,fe=se.y-de.y,ve=Le*Le+fe*fe;ve?(be=de.r+ue.r,we=se.r+ue.r,(be*=be)>(we*=we)?(ge=(ve+we-be)/(2*ve),Te=Math.sqrt(Math.max(0,we/ve-ge*ge)),ue.x=se.x-ge*Le-Te*fe,ue.y=se.y-ge*fe+Te*Le):(ge=(ve+be-we)/(2*ve),Te=Math.sqrt(Math.max(0,be/ve-ge*ge)),ue.x=de.x+ge*Le-Te*fe,ue.y=de.y+ge*fe+Te*Le)):(ue.x=de.x+ue.r,ue.y=de.y)}function w(se,de){var ue=se.r+de.r-1e-6,ge=de.x-se.x,be=de.y-se.y;return ue>0&&ue*ue>ge*ge+be*be}function b(se){var de=se._,ue=se.next._,ge=de.r+ue.r,be=(de.x*ue.r+ue.x*de.r)/ge,Te=(de.y*ue.r+ue.y*de.r)/ge;return be*be+Te*Te}function k(se){this._=se,this.next=null,this.previous=null}function T(se){if(!(be=se.length))return 0;var de,ue,ge,be,Te,we,Le,fe,ve,Me,ke;if((de=se[0]).x=0,de.y=0,!(be>1))return de.r;if(de.x=-(ue=se[1]).r,ue.x=de.r,ue.y=0,!(be>2))return de.r+ue.r;m(ue,de,ge=se[2]),de=new k(de),ue=new k(ue),ge=new k(ge),de.next=ge.previous=ue,ue.next=de.previous=ge,ge.next=ue.previous=de;e:for(Le=3;Le<be;++Le){m(de._,ue._,ge=se[Le]),ge=new k(ge),fe=ue.next,ve=de.previous,Me=ue._.r,ke=de._.r;do{if(Me<=ke){if(w(fe._,ge._)){de.next=ue=fe,ue.previous=de,--Le;continue e}Me+=fe._.r,fe=fe.next}else{if(w(ve._,ge._)){(de=ve).next=ue,ue.previous=de,--Le;continue e}ke+=ve._.r,ve=ve.previous}}while(fe!==ve.next);for(ge.previous=de,ge.next=ue,de.next=ue.previous=ue=ge,Te=b(de);(ge=ge.next)!==ue;)(we=b(ge))<Te&&(de=ge,Te=we);ue=de.next}for(de=[ue._],ge=ue;(ge=ge.next)!==ue;)de.push(ge._);for(ge=a(de),Le=0;Le<be;++Le)(de=se[Le]).x-=ge.x,de.y-=ge.y;return ge.r}function L(se){return null==se?null:A(se)}function A(se){if("function"!=typeof se)throw new Error;return se}function I(){return 0}function D(se){return function(){return se}}function S(se){return Math.sqrt(se.value)}function C(se){return function(de){de.children||(de.r=Math.max(0,+se(de)||0))}}function R(se,de){return function(ue){if(ge=ue.children){var ge,be,Te,we=ge.length,Le=se(ue)*de||0;if(Le)for(be=0;be<we;++be)ge[be].r+=Le;if(Te=T(ge),Le)for(be=0;be<we;++be)ge[be].r-=Le;ue.r=Te+Le}}}function F(se){return function(de){var ue=de.parent;de.r*=se,ue&&(de.x=ue.x+se*de.x,de.y=ue.y+se*de.y)}}function H(se){se.x0=Math.round(se.x0),se.y0=Math.round(se.y0),se.x1=Math.round(se.x1),se.y1=Math.round(se.y1)}function U(se,de,ue,ge,be){for(var Te,we=se.children,Le=-1,fe=we.length,ve=se.value&&(ge-de)/se.value;++Le<fe;)(Te=we[Le]).y0=ue,Te.y1=be,Te.x0=de,Te.x1=de+=Te.value*ve}var X={depth:-1},Z={};function Y(se){return se.id}function W(se){return se.parentId}function te(se,de){return se.parent===de.parent?1:2}function z(se){var de=se.children;return de?de[0]:se.t}function N(se){var de=se.children;return de?de[de.length-1]:se.t}function V(se,de,ue){var ge=ue/(de.i-se.i);de.c-=ge,de.s+=ue,se.c+=ge,de.z+=ue,de.m+=ue}function Q(se,de,ue){return se.a.parent===de.parent?se.a:ue}function j(se,de){this._=se,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=de}function J(se,de,ue,ge,be){for(var Te,we=se.children,Le=-1,fe=we.length,ve=se.value&&(be-ue)/se.value;++Le<fe;)(Te=we[Le]).x0=de,Te.x1=ge,Te.y0=ue,Te.y1=ue+=Te.value*ve}j.prototype=Object.create(p.prototype);var K=(1+Math.sqrt(5))/2;function re(se,de,ue,ge,be,Te){for(var we,Le,fe,ve,Me,ke,Ce,Pe,Fe,qe,rt,ze=[],He=de.children,Xe=0,Je=0,at=He.length,pt=de.value;Xe<at;){fe=be-ue,ve=Te-ge;do{Me=He[Je++].value}while(!Me&&Je<at);for(ke=Ce=Me,rt=Me*Me*(qe=Math.max(ve/fe,fe/ve)/(pt*se)),Fe=Math.max(Ce/rt,rt/ke);Je<at;++Je){if(Me+=Le=He[Je].value,Le<ke&&(ke=Le),Le>Ce&&(Ce=Le),rt=Me*Me*qe,(Pe=Math.max(Ce/rt,rt/ke))>Fe){Me-=Le;break}Fe=Pe}ze.push(we={value:Me,dice:fe<ve,children:He.slice(Xe,Je)}),we.dice?U(we,ue,ge,be,pt?ge+=ve*Me/pt:Te):J(we,ue,ge,pt?ue+=fe*Me/pt:be,Te),pt-=Me,Xe=Je}return ze}var ie=function se(de){function ue(ge,be,Te,we,Le){re(de,ge,be,Te,we,Le)}return ue.ratio=function(ge){return se((ge=+ge)>1?ge:1)},ue}(K),ce=function se(de){function ue(ge,be,Te,we,Le){if((fe=ge._squarify)&&fe.ratio===de)for(var fe,ve,Me,ke,Ce,Pe=-1,Fe=fe.length,qe=ge.value;++Pe<Fe;){for(Me=(ve=fe[Pe]).children,ke=ve.value=0,Ce=Me.length;ke<Ce;++ke)ve.value+=Me[ke].value;ve.dice?U(ve,be,Te,we,Te+=(Le-Te)*ve.value/qe):J(ve,be,Te,be+=(we-be)*ve.value/qe,Le),qe-=ve.value}else ge._squarify=fe=re(de,ge,be,Te,we,Le),fe.ratio=de}return ue.ratio=function(ge){return se((ge=+ge)>1?ge:1)},ue}(K);d.cluster=function(){var se=g,de=1,ue=1,ge=!1;function be(Te){var we,Le=0;Te.eachAfter(function(Ce){var Fe,Pe=Ce.children;Pe?(Ce.x=(Fe=Pe).reduce(_,0)/Fe.length,Ce.y=function(Fe){return 1+Fe.reduce(t,0)}(Pe)):(Ce.x=we?Le+=se(Ce,we):0,Ce.y=0,we=Ce)});var fe=function(Ce){for(var Pe;Pe=Ce.children;)Ce=Pe[0];return Ce}(Te),ve=function(Ce){for(var Pe;Pe=Ce.children;)Ce=Pe[Pe.length-1];return Ce}(Te),Me=fe.x-se(fe,ve)/2,ke=ve.x+se(ve,fe)/2;return Te.eachAfter(ge?function(Ce){Ce.x=(Ce.x-Te.x)*de,Ce.y=(Te.y-Ce.y)*ue}:function(Ce){Ce.x=(Ce.x-Me)/(ke-Me)*de,Ce.y=(1-(Te.y?Ce.y/Te.y:1))*ue})}return be.separation=function(Te){return arguments.length?(se=Te,be):se},be.size=function(Te){return arguments.length?(ge=!1,de=+Te[0],ue=+Te[1],be):ge?null:[de,ue]},be.nodeSize=function(Te){return arguments.length?(ge=!0,de=+Te[0],ue=+Te[1],be):ge?[de,ue]:null},be},d.hierarchy=i,d.pack=function(){var se=null,de=1,ue=1,ge=I;function be(Te){return Te.x=de/2,Te.y=ue/2,se?Te.eachBefore(C(se)).eachAfter(R(ge,.5)).eachBefore(F(1)):Te.eachBefore(C(S)).eachAfter(R(I,1)).eachAfter(R(ge,Te.r/Math.min(de,ue))).eachBefore(F(Math.min(de,ue)/(2*Te.r))),Te}return be.radius=function(Te){return arguments.length?(se=L(Te),be):se},be.size=function(Te){return arguments.length?(de=+Te[0],ue=+Te[1],be):[de,ue]},be.padding=function(Te){return arguments.length?(ge="function"==typeof Te?Te:D(+Te),be):ge},be},d.packEnclose=a,d.packSiblings=function(se){return T(se),se},d.partition=function(){var se=1,de=1,ue=0,ge=!1;function be(Te){var Le,fe,we=Te.height+1;return Te.x0=Te.y0=ue,Te.x1=se,Te.y1=de/we,Te.eachBefore((Le=de,fe=we,function(ve){ve.children&&U(ve,ve.x0,Le*(ve.depth+1)/fe,ve.x1,Le*(ve.depth+2)/fe);var Me=ve.x0,ke=ve.y0,Ce=ve.x1-ue,Pe=ve.y1-ue;Ce<Me&&(Me=Ce=(Me+Ce)/2),Pe<ke&&(ke=Pe=(ke+Pe)/2),ve.x0=Me,ve.y0=ke,ve.x1=Ce,ve.y1=Pe})),ge&&Te.eachBefore(H),Te}return be.round=function(Te){return arguments.length?(ge=!!Te,be):ge},be.size=function(Te){return arguments.length?(se=+Te[0],de=+Te[1],be):[se,de]},be.padding=function(Te){return arguments.length?(ue=+Te,be):ue},be},d.stratify=function(){var se=Y,de=W;function ue(ge){var be,Te,we,Le,fe,ve,Me,ke=ge.length,Ce=new Array(ke),Pe={};for(Te=0;Te<ke;++Te)fe=Ce[Te]=new p(be=ge[Te]),null!=(ve=se(be,Te,ge))&&(ve+="")&&(Pe[Me="$"+(fe.id=ve)]=Me in Pe?Z:fe);for(Te=0;Te<ke;++Te)if(fe=Ce[Te],null!=(ve=de(ge[Te],Te,ge))&&(ve+="")){if(!(Le=Pe["$"+ve]))throw new Error("missing: "+ve);if(Le===Z)throw new Error("ambiguous: "+ve);Le.children?Le.children.push(fe):Le.children=[fe],fe.parent=Le}else{if(we)throw new Error("multiple roots");we=fe}if(!we)throw new Error("no root");if(we.parent=X,we.eachBefore(function(Fe){Fe.depth=Fe.parent.depth+1,--ke}).eachBefore(n),we.parent=null,ke>0)throw new Error("cycle");return we}return ue.id=function(ge){return arguments.length?(se=A(ge),ue):se},ue.parentId=function(ge){return arguments.length?(de=A(ge),ue):de},ue},d.tree=function(){var se=te,de=1,ue=1,ge=null;function be(fe){var ve=function(ze){for(var He,Xe,Je,at,pt,xt=new j(ze,0),Ft=[xt];He=Ft.pop();)if(Je=He._.children)for(He.children=new Array(pt=Je.length),at=pt-1;at>=0;--at)Ft.push(Xe=He.children[at]=new j(Je[at],at)),Xe.parent=He;return(xt.parent=new j(null,0)).children=[xt],xt}(fe);if(ve.eachAfter(Te),ve.parent.m=-ve.z,ve.eachBefore(we),ge)fe.eachBefore(Le);else{var Me=fe,ke=fe,Ce=fe;fe.eachBefore(function(ze){ze.x<Me.x&&(Me=ze),ze.x>ke.x&&(ke=ze),ze.depth>Ce.depth&&(Ce=ze)});var Pe=Me===ke?1:se(Me,ke)/2,Fe=Pe-Me.x,qe=de/(ke.x+Pe+Fe),rt=ue/(Ce.depth||1);fe.eachBefore(function(ze){ze.x=(ze.x+Fe)*qe,ze.y=ze.depth*rt})}return fe}function Te(fe){var ve=fe.children,Me=fe.parent.children,ke=fe.i?Me[fe.i-1]:null;if(ve){!function(Pe){for(var Fe,qe=0,rt=0,ze=Pe.children,He=ze.length;--He>=0;)(Fe=ze[He]).z+=qe,Fe.m+=qe,qe+=Fe.s+(rt+=Fe.c)}(fe);var Ce=(ve[0].z+ve[ve.length-1].z)/2;ke?(fe.z=ke.z+se(fe._,ke._),fe.m=fe.z-Ce):fe.z=Ce}else ke&&(fe.z=ke.z+se(fe._,ke._));fe.parent.A=function(Pe,Fe,qe){if(Fe){for(var rt,ze=Pe,He=Pe,Xe=Fe,Je=ze.parent.children[0],at=ze.m,pt=He.m,xt=Xe.m,Ft=Je.m;Xe=N(Xe),ze=z(ze),Xe&&ze;)Je=z(Je),(He=N(He)).a=Pe,(rt=Xe.z+xt-ze.z-at+se(Xe._,ze._))>0&&(V(Q(Xe,Pe,qe),Pe,rt),at+=rt,pt+=rt),xt+=Xe.m,at+=ze.m,Ft+=Je.m,pt+=He.m;Xe&&!N(He)&&(He.t=Xe,He.m+=xt-pt),ze&&!z(Je)&&(Je.t=ze,Je.m+=at-Ft,qe=Pe)}return qe}(fe,ke,fe.parent.A||Me[0])}function we(fe){fe._.x=fe.z+fe.parent.m,fe.m+=fe.parent.m}function Le(fe){fe.x*=de,fe.y=fe.depth*ue}return be.separation=function(fe){return arguments.length?(se=fe,be):se},be.size=function(fe){return arguments.length?(ge=!1,de=+fe[0],ue=+fe[1],be):ge?null:[de,ue]},be.nodeSize=function(fe){return arguments.length?(ge=!0,de=+fe[0],ue=+fe[1],be):ge?[de,ue]:null},be},d.treemap=function(){var se=ie,de=!1,ue=1,ge=1,be=[0],Te=I,we=I,Le=I,fe=I,ve=I;function Me(Ce){return Ce.x0=Ce.y0=0,Ce.x1=ue,Ce.y1=ge,Ce.eachBefore(ke),be=[0],de&&Ce.eachBefore(H),Ce}function ke(Ce){var Pe=be[Ce.depth],Fe=Ce.x0+Pe,qe=Ce.y0+Pe,rt=Ce.x1-Pe,ze=Ce.y1-Pe;rt<Fe&&(Fe=rt=(Fe+rt)/2),ze<qe&&(qe=ze=(qe+ze)/2),Ce.x0=Fe,Ce.y0=qe,Ce.x1=rt,Ce.y1=ze,Ce.children&&(Pe=be[Ce.depth+1]=Te(Ce)/2,Fe+=ve(Ce)-Pe,qe+=we(Ce)-Pe,(rt-=Le(Ce)-Pe)<Fe&&(Fe=rt=(Fe+rt)/2),(ze-=fe(Ce)-Pe)<qe&&(qe=ze=(qe+ze)/2),se(Ce,Fe,qe,rt,ze))}return Me.round=function(Ce){return arguments.length?(de=!!Ce,Me):de},Me.size=function(Ce){return arguments.length?(ue=+Ce[0],ge=+Ce[1],Me):[ue,ge]},Me.tile=function(Ce){return arguments.length?(se=A(Ce),Me):se},Me.padding=function(Ce){return arguments.length?Me.paddingInner(Ce).paddingOuter(Ce):Me.paddingInner()},Me.paddingInner=function(Ce){return arguments.length?(Te="function"==typeof Ce?Ce:D(+Ce),Me):Te},Me.paddingOuter=function(Ce){return arguments.length?Me.paddingTop(Ce).paddingRight(Ce).paddingBottom(Ce).paddingLeft(Ce):Me.paddingTop()},Me.paddingTop=function(Ce){return arguments.length?(we="function"==typeof Ce?Ce:D(+Ce),Me):we},Me.paddingRight=function(Ce){return arguments.length?(Le="function"==typeof Ce?Ce:D(+Ce),Me):Le},Me.paddingBottom=function(Ce){return arguments.length?(fe="function"==typeof Ce?Ce:D(+Ce),Me):fe},Me.paddingLeft=function(Ce){return arguments.length?(ve="function"==typeof Ce?Ce:D(+Ce),Me):ve},Me},d.treemapBinary=function(se,de,ue,ge,be){var Te,we,Le=se.children,fe=Le.length,ve=new Array(fe+1);for(ve[0]=we=Te=0;Te<fe;++Te)ve[Te+1]=we+=Le[Te].value;!function Me(ke,Ce,Pe,Fe,qe,rt,ze){if(ke>=Ce-1){var He=Le[ke];return He.x0=Fe,He.y0=qe,He.x1=rt,void(He.y1=ze)}for(var Xe=ve[ke],Je=Pe/2+Xe,at=ke+1,pt=Ce-1;at<pt;){var xt=at+pt>>>1;ve[xt]<Je?at=xt+1:pt=xt}Je-ve[at-1]<ve[at]-Je&&ke+1<at&&--at;var Ft=ve[at]-Xe,Dt=Pe-Ft;if(rt-Fe>ze-qe){var ot=(Fe*Dt+rt*Ft)/Pe;Me(ke,at,Ft,Fe,qe,ot,ze),Me(at,Ce,Dt,ot,qe,rt,ze)}else{var it=(qe*Dt+ze*Ft)/Pe;Me(ke,at,Ft,Fe,qe,rt,it),Me(at,Ce,Dt,Fe,it,rt,ze)}}(0,fe,se.value,de,ue,ge,be)},d.treemapDice=U,d.treemapResquarify=ce,d.treemapSlice=J,d.treemapSliceDice=function(se,de,ue,ge,be){(1&se.depth?J:U)(se,de,ue,ge,be)},d.treemapSquarify=ie,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).d3=d.d3||{})},{}],116:[function(y,$,ee){var d,g;d=this,g=function(d,g){"use strict";function _(K,re,ie,ce,se){var de=K*K,ue=de*K;return((1-3*K+3*de-ue)*re+(4-6*de+3*ue)*ie+(1+3*K+3*de-3*ue)*ce+ue*se)/6}function t(K){var re=K.length-1;return function(ie){var ce=ie<=0?ie=0:ie>=1?(ie=1,re-1):Math.floor(ie*re),se=K[ce],de=K[ce+1];return _((ie-ce/re)*re,ce>0?K[ce-1]:2*se-de,se,de,ce<re-1?K[ce+2]:2*de-se)}}function e(K){var re=K.length;return function(ie){var ce=Math.floor(((ie%=1)<0?++ie:ie)*re);return _((ie-ce/re)*re,K[(ce+re-1)%re],K[ce%re],K[(ce+1)%re],K[(ce+2)%re])}}function i(K){return function(){return K}}function r(K,re){return function(ie){return K+ie*re}}function o(K,re){var ie=re-K;return ie?r(K,ie>180||ie<-180?ie-360*Math.round(ie/360):ie):i(isNaN(K)?re:K)}function p(K,re){var ie=re-K;return ie?r(K,ie):i(isNaN(K)?re:K)}var s=function K(re){var ie=function(K){return 1==(K=+K)?p:function(re,ie){return ie-re?(ce=re,se=ie,de=K,ce=Math.pow(ce,de),se=Math.pow(se,de)-ce,de=1/de,function(ue){return Math.pow(ce+ue*se,de)}):i(isNaN(re)?ie:re);var ce,se,de}}(re);function ce(se,de){var ue=ie((se=g.rgb(se)).r,(de=g.rgb(de)).r),ge=ie(se.g,de.g),be=ie(se.b,de.b),Te=p(se.opacity,de.opacity);return function(we){return se.r=ue(we),se.g=ge(we),se.b=be(we),se.opacity=Te(we),se+""}}return ce.gamma=K,ce}(1);function a(K){return function(re){var ie,ce,se=re.length,de=new Array(se),ue=new Array(se),ge=new Array(se);for(ie=0;ie<se;++ie)ce=g.rgb(re[ie]),de[ie]=ce.r||0,ue[ie]=ce.g||0,ge[ie]=ce.b||0;return de=K(de),ue=K(ue),ge=K(ge),ce.opacity=1,function(be){return ce.r=de(be),ce.g=ue(be),ce.b=ge(be),ce+""}}}var c=a(t),u=a(e);function h(K,re){re||(re=[]);var ie,ce=K?Math.min(re.length,K.length):0,se=re.slice();return function(de){for(ie=0;ie<ce;++ie)se[ie]=K[ie]*(1-de)+re[ie]*de;return se}}function v(K){return ArrayBuffer.isView(K)&&!(K instanceof DataView)}function f(K,re){var ie,ce=re?re.length:0,se=K?Math.min(ce,K.length):0,de=new Array(se),ue=new Array(ce);for(ie=0;ie<se;++ie)de[ie]=T(K[ie],re[ie]);for(;ie<ce;++ie)ue[ie]=re[ie];return function(ge){for(ie=0;ie<se;++ie)ue[ie]=de[ie](ge);return ue}}function l(K,re){var ie=new Date;return K=+K,re=+re,function(ce){return ie.setTime(K*(1-ce)+re*ce),ie}}function x(K,re){return K=+K,re=+re,function(ie){return K*(1-ie)+re*ie}}function m(K,re){var ie,ce={},se={};for(ie in null!==K&&"object"==typeof K||(K={}),null!==re&&"object"==typeof re||(re={}),re)ie in K?ce[ie]=T(K[ie],re[ie]):se[ie]=re[ie];return function(de){for(ie in ce)se[ie]=ce[ie](de);return se}}var w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(w.source,"g");function k(K,re){var ie,ce,se,Te,de=w.lastIndex=b.lastIndex=0,ue=-1,ge=[],be=[];for(K+="",re+="";(ie=w.exec(K))&&(ce=b.exec(re));)(se=ce.index)>de&&(se=re.slice(de,se),ge[ue]?ge[ue]+=se:ge[++ue]=se),(ie=ie[0])===(ce=ce[0])?ge[ue]?ge[ue]+=ce:ge[++ue]=ce:(ge[++ue]=null,be.push({i:ue,x:x(ie,ce)})),de=b.lastIndex;return de<re.length&&(se=re.slice(de),ge[ue]?ge[ue]+=se:ge[++ue]=se),ge.length<2?be[0]?(Te=be[0].x,function(we){return Te(we)+""}):function(Te){return function(){return Te}}(re):(re=be.length,function(Te){for(var we,Le=0;Le<re;++Le)ge[(we=be[Le]).i]=we.x(Te);return ge.join("")})}function T(K,re){var ie,ce=typeof re;return null==re||"boolean"===ce?i(re):("number"===ce?x:"string"===ce?(ie=g.color(re))?(re=ie,s):k:re instanceof g.color?s:re instanceof Date?l:v(re)?h:Array.isArray(re)?f:"function"!=typeof re.valueOf&&"function"!=typeof re.toString||isNaN(re)?m:x)(K,re)}var L,A,I,D,S=180/Math.PI,C={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function R(K,re,ie,ce,se,de){var ue,ge,be;return(ue=Math.sqrt(K*K+re*re))&&(K/=ue,re/=ue),(be=K*ie+re*ce)&&(ie-=K*be,ce-=re*be),(ge=Math.sqrt(ie*ie+ce*ce))&&(ie/=ge,ce/=ge,be/=ge),K*ce<re*ie&&(K=-K,re=-re,be=-be,ue=-ue),{translateX:se,translateY:de,rotate:Math.atan2(re,K)*S,skewX:Math.atan(be)*S,scaleX:ue,scaleY:ge}}function F(K,re,ie,ce){function se(de){return de.length?de.pop()+" ":""}return function(de,ue){var Te,we,Le,ge=[],be=[];return de=K(de),ue=K(ue),function(Te,we,Le,fe,ve,Me){if(Te!==Le||we!==fe){var ke=ve.push("translate(",null,re,null,ie);Me.push({i:ke-4,x:x(Te,Le)},{i:ke-2,x:x(we,fe)})}else(Le||fe)&&ve.push("translate("+Le+re+fe+ie)}(de.translateX,de.translateY,ue.translateX,ue.translateY,ge,be),Le=ge,(Te=de.rotate)!==(we=ue.rotate)?(Te-we>180?we+=360:we-Te>180&&(Te+=360),be.push({i:Le.push(se(Le)+"rotate(",null,ce)-2,x:x(Te,we)})):we&&Le.push(se(Le)+"rotate("+we+ce),function(Te,we,Le,fe){Te!==we?fe.push({i:Le.push(se(Le)+"skewX(",null,ce)-2,x:x(Te,we)}):we&&Le.push(se(Le)+"skewX("+we+ce)}(de.skewX,ue.skewX,ge,be),function(Te,we,Le,fe,ve,Me){if(Te!==Le||we!==fe){var ke=ve.push(se(ve)+"scale(",null,",",null,")");Me.push({i:ke-4,x:x(Te,Le)},{i:ke-2,x:x(we,fe)})}else 1===Le&&1===fe||ve.push(se(ve)+"scale("+Le+","+fe+")")}(de.scaleX,de.scaleY,ue.scaleX,ue.scaleY,ge,be),de=ue=null,function(Te){for(var we,Le=-1,fe=be.length;++Le<fe;)ge[(we=be[Le]).i]=we.x(Te);return ge.join("")}}}var H=F(function(K){return"none"===K?C:(L||(L=document.createElement("DIV"),A=document.documentElement,I=document.defaultView),L.style.transform=K,K=I.getComputedStyle(A.appendChild(L),null).getPropertyValue("transform"),A.removeChild(L),R(+(K=K.slice(7,-1).split(","))[0],+K[1],+K[2],+K[3],+K[4],+K[5]))},"px, ","px)","deg)"),U=F(function(K){return null==K?C:(D||(D=document.createElementNS("http://www.w3.org/2000/svg","g")),D.setAttribute("transform",K),(K=D.transform.baseVal.consolidate())?R((K=K.matrix).a,K.b,K.c,K.d,K.e,K.f):C)},", ",")",")"),X=Math.SQRT2;function Z(K){return((K=Math.exp(K))+1/K)/2}function Y(K){return function(re,ie){var ce=K((re=g.hsl(re)).h,(ie=g.hsl(ie)).h),se=p(re.s,ie.s),de=p(re.l,ie.l),ue=p(re.opacity,ie.opacity);return function(ge){return re.h=ce(ge),re.s=se(ge),re.l=de(ge),re.opacity=ue(ge),re+""}}}var W=Y(o),te=Y(p);function z(K){return function(re,ie){var ce=K((re=g.hcl(re)).h,(ie=g.hcl(ie)).h),se=p(re.c,ie.c),de=p(re.l,ie.l),ue=p(re.opacity,ie.opacity);return function(ge){return re.h=ce(ge),re.c=se(ge),re.l=de(ge),re.opacity=ue(ge),re+""}}}var N=z(o),V=z(p);function Q(K){return function re(ie){function ce(se,de){var ue=K((se=g.cubehelix(se)).h,(de=g.cubehelix(de)).h),ge=p(se.s,de.s),be=p(se.l,de.l),Te=p(se.opacity,de.opacity);return function(we){return se.h=ue(we),se.s=ge(we),se.l=be(Math.pow(we,ie)),se.opacity=Te(we),se+""}}return ie=+ie,ce.gamma=re,ce}(1)}var j=Q(o),J=Q(p);d.interpolate=T,d.interpolateArray=function(K,re){return(v(re)?h:f)(K,re)},d.interpolateBasis=t,d.interpolateBasisClosed=e,d.interpolateCubehelix=j,d.interpolateCubehelixLong=J,d.interpolateDate=l,d.interpolateDiscrete=function(K){var re=K.length;return function(ie){return K[Math.max(0,Math.min(re-1,Math.floor(ie*re)))]}},d.interpolateHcl=N,d.interpolateHclLong=V,d.interpolateHsl=W,d.interpolateHslLong=te,d.interpolateHue=function(K,re){var ie=o(+K,+re);return function(ce){var se=ie(ce);return se-360*Math.floor(se/360)}},d.interpolateLab=function(K,re){var ie=p((K=g.lab(K)).l,(re=g.lab(re)).l),ce=p(K.a,re.a),se=p(K.b,re.b),de=p(K.opacity,re.opacity);return function(ue){return K.l=ie(ue),K.a=ce(ue),K.b=se(ue),K.opacity=de(ue),K+""}},d.interpolateNumber=x,d.interpolateNumberArray=h,d.interpolateObject=m,d.interpolateRgb=s,d.interpolateRgbBasis=c,d.interpolateRgbBasisClosed=u,d.interpolateRound=function(K,re){return K=+K,re=+re,function(ie){return Math.round(K*(1-ie)+re*ie)}},d.interpolateString=k,d.interpolateTransformCss=H,d.interpolateTransformSvg=U,d.interpolateZoom=function(K,re){var ie,ce,se=K[0],de=K[1],ue=K[2],Te=re[2],we=re[0]-se,Le=re[1]-de,fe=we*we+Le*Le;if(fe<1e-12)ce=Math.log(Te/ue)/X,ie=function(Fe){return[se+Fe*we,de+Fe*Le,ue*Math.exp(X*Fe*ce)]};else{var ve=Math.sqrt(fe),Me=(Te*Te-ue*ue+4*fe)/(2*ue*2*ve),ke=(Te*Te-ue*ue-4*fe)/(2*Te*2*ve),Ce=Math.log(Math.sqrt(Me*Me+1)-Me),Pe=Math.log(Math.sqrt(ke*ke+1)-ke);ce=(Pe-Ce)/X,ie=function(Fe){var qe,Xe,rt=Fe*ce,ze=Z(Ce),He=ue/(2*ve)*(ze*(qe=X*rt+Ce,((qe=Math.exp(2*qe))-1)/(qe+1))-(Xe=Ce,((Xe=Math.exp(Xe))-1/Xe)/2));return[se+He*we,de+He*Le,ue*ze/Z(X*rt+Ce)]}}return ie.duration=1e3*ce,ie},d.piecewise=function(K,re){for(var ie=0,ce=re.length-1,se=re[0],de=new Array(ce<0?0:ce);ie<ce;)de[ie]=K(se,se=re[++ie]);return function(ue){var ge=Math.max(0,Math.min(ce-1,Math.floor(ue*=ce)));return de[ge](ue-ge)}},d.quantize=function(K,re){for(var ie=new Array(re),ce=0;ce<re;++ce)ie[ce]=K(ce/(re-1));return ie},Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-color")):g((d=d||self).d3=d.d3||{},d.d3)},{"d3-color":109}],117:[function(y,$,ee){var d;d=this,function(d){"use strict";var g=Math.PI,_=2*g,t=_-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new e}e.prototype=i.prototype={constructor:e,moveTo:function(r,o){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,o){this._+="L"+(this._x1=+r)+","+(this._y1=+o)},quadraticCurveTo:function(r,o,n,p){this._+="Q"+ +r+","+ +o+","+(this._x1=+n)+","+(this._y1=+p)},bezierCurveTo:function(r,o,n,p,s,a){this._+="C"+ +r+","+ +o+","+ +n+","+ +p+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(r,o,n,p,s){var a=this._x1,c=this._y1,u=(n=+n)-(r=+r),h=(p=+p)-(o=+o),v=a-r,f=c-o,l=v*v+f*f;if((s=+s)<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=r)+","+(this._y1=o);else if(l>1e-6)if(Math.abs(f*u-h*v)>1e-6&&s){var x=n-a,m=p-c,w=u*u+h*h,b=x*x+m*m,k=Math.sqrt(w),T=Math.sqrt(l),L=s*Math.tan((g-Math.acos((w+l-b)/(2*k*T)))/2),A=L/T,I=L/k;Math.abs(A-1)>1e-6&&(this._+="L"+(r+A*v)+","+(o+A*f)),this._+="A"+s+","+s+",0,0,"+ +(f*x>v*m)+","+(this._x1=r+I*u)+","+(this._y1=o+I*h)}else this._+="L"+(this._x1=r)+","+(this._y1=o)},arc:function(r,o,n,p,s,a){r=+r,o=+o,a=!!a;var c=(n=+n)*Math.cos(p),u=n*Math.sin(p),h=r+c,v=o+u,f=1^a,l=a?p-s:s-p;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+v:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-v)>1e-6)&&(this._+="L"+h+","+v),n&&(l<0&&(l=l%_+_),l>t?this._+="A"+n+","+n+",0,1,"+f+","+(r-c)+","+(o-u)+"A"+n+","+n+",0,1,"+f+","+(this._x1=h)+","+(this._y1=v):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=g)+","+f+","+(this._x1=r+n*Math.cos(s))+","+(this._y1=o+n*Math.sin(s))))},rect:function(r,o,n,p){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+o)+"h"+ +n+"v"+ +p+"h"+-n+"Z"},toString:function(){return this._}},d.path=i,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).d3=d.d3||{})},{}],118:[function(y,$,ee){var d;d=this,function(d){"use strict";function g(p,s,a,c){if(isNaN(s)||isNaN(a))return p;var u,h,v,f,l,x,m,w,b,k=p._root,T={data:c},L=p._x0,A=p._y0,I=p._x1,D=p._y1;if(!k)return p._root=T,p;for(;k.length;)if((x=s>=(h=(L+I)/2))?L=h:I=h,(m=a>=(v=(A+D)/2))?A=v:D=v,u=k,!(k=k[w=m<<1|x]))return u[w]=T,p;if(f=+p._x.call(null,k.data),l=+p._y.call(null,k.data),s===f&&a===l)return T.next=k,u?u[w]=T:p._root=T,p;do{u=u?u[w]=new Array(4):p._root=new Array(4),(x=s>=(h=(L+I)/2))?L=h:I=h,(m=a>=(v=(A+D)/2))?A=v:D=v}while((w=m<<1|x)==(b=(l>=v)<<1|f>=h));return u[b]=k,u[w]=T,p}function _(p,s,a,c,u){this.node=p,this.x0=s,this.y0=a,this.x1=c,this.y1=u}function t(p){return p[0]}function e(p){return p[1]}function i(p,s,a){var c=new r(null==s?t:s,null==a?e:a,NaN,NaN,NaN,NaN);return null==p?c:c.addAll(p)}function r(p,s,a,c,u,h){this._x=p,this._y=s,this._x0=a,this._y0=c,this._x1=u,this._y1=h,this._root=void 0}function o(p){for(var s={data:p.data},a=s;p=p.next;)a=a.next={data:p.data};return s}var n=i.prototype=r.prototype;n.copy=function(){var p,s,a=new r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),c=this._root;if(!c)return a;if(!c.length)return a._root=o(c),a;for(p=[{source:c,target:a._root=new Array(4)}];c=p.pop();)for(var u=0;u<4;++u)(s=c.source[u])&&(s.length?p.push({source:s,target:c.target[u]=new Array(4)}):c.target[u]=o(s));return a},n.add=function(p){var s=+this._x.call(null,p),a=+this._y.call(null,p);return g(this.cover(s,a),s,a,p)},n.addAll=function(p){var s,a,c,u,h=p.length,v=new Array(h),f=new Array(h),l=1/0,x=1/0,m=-1/0,w=-1/0;for(a=0;a<h;++a)isNaN(c=+this._x.call(null,s=p[a]))||isNaN(u=+this._y.call(null,s))||(v[a]=c,f[a]=u,c<l&&(l=c),c>m&&(m=c),u<x&&(x=u),u>w&&(w=u));if(l>m||x>w)return this;for(this.cover(l,x).cover(m,w),a=0;a<h;++a)g(this,v[a],f[a],p[a]);return this},n.cover=function(p,s){if(isNaN(p=+p)||isNaN(s=+s))return this;var a=this._x0,c=this._y0,u=this._x1,h=this._y1;if(isNaN(a))u=(a=Math.floor(p))+1,h=(c=Math.floor(s))+1;else{for(var v,f,l=u-a,x=this._root;a>p||p>=u||c>s||s>=h;)switch(f=(s<c)<<1|p<a,(v=new Array(4))[f]=x,x=v,l*=2,f){case 0:u=a+l,h=c+l;break;case 1:a=u-l,h=c+l;break;case 2:u=a+l,c=h-l;break;case 3:a=u-l,c=h-l}this._root&&this._root.length&&(this._root=x)}return this._x0=a,this._y0=c,this._x1=u,this._y1=h,this},n.data=function(){var p=[];return this.visit(function(s){if(!s.length)do{p.push(s.data)}while(s=s.next)}),p},n.extent=function(p){return arguments.length?this.cover(+p[0][0],+p[0][1]).cover(+p[1][0],+p[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(p,s,a){var c,u,h,v,f,l,x,m=this._x0,w=this._y0,b=this._x1,k=this._y1,T=[],L=this._root;for(L&&T.push(new _(L,m,w,b,k)),null==a?a=1/0:(m=p-a,w=s-a,b=p+a,k=s+a,a*=a);l=T.pop();)if(!(!(L=l.node)||(u=l.x0)>b||(h=l.y0)>k||(v=l.x1)<m||(f=l.y1)<w))if(L.length){var A=(u+v)/2,I=(h+f)/2;T.push(new _(L[3],A,I,v,f),new _(L[2],u,I,A,f),new _(L[1],A,h,v,I),new _(L[0],u,h,A,I)),(x=(s>=I)<<1|p>=A)&&(l=T[T.length-1],T[T.length-1]=T[T.length-1-x],T[T.length-1-x]=l)}else{var D=p-+this._x.call(null,L.data),S=s-+this._y.call(null,L.data),C=D*D+S*S;if(C<a){var R=Math.sqrt(a=C);m=p-R,w=s-R,b=p+R,k=s+R,c=L.data}}return c},n.remove=function(p){if(isNaN(h=+this._x.call(null,p))||isNaN(v=+this._y.call(null,p)))return this;var s,a,c,u,h,v,f,l,x,m,w,b,k=this._root,T=this._x0,L=this._y0,A=this._x1,I=this._y1;if(!k)return this;if(k.length)for(;;){if((x=h>=(f=(T+A)/2))?T=f:A=f,(m=v>=(l=(L+I)/2))?L=l:I=l,s=k,!(k=k[w=m<<1|x]))return this;if(!k.length)break;(s[w+1&3]||s[w+2&3]||s[w+3&3])&&(a=s,b=w)}for(;k.data!==p;)if(c=k,!(k=k.next))return this;return(u=k.next)&&delete k.next,c?(u?c.next=u:delete c.next,this):s?(u?s[w]=u:delete s[w],(k=s[0]||s[1]||s[2]||s[3])&&k===(s[3]||s[2]||s[1]||s[0])&&!k.length&&(a?a[b]=k:this._root=k),this):(this._root=u,this)},n.removeAll=function(p){for(var s=0,a=p.length;s<a;++s)this.remove(p[s]);return this},n.root=function(){return this._root},n.size=function(){var p=0;return this.visit(function(s){if(!s.length)do{++p}while(s=s.next)}),p},n.visit=function(p){var s,a,c,u,h,v,f=[],l=this._root;for(l&&f.push(new _(l,this._x0,this._y0,this._x1,this._y1));s=f.pop();)if(!p(l=s.node,c=s.x0,u=s.y0,h=s.x1,v=s.y1)&&l.length){var x=(c+h)/2,m=(u+v)/2;(a=l[3])&&f.push(new _(a,x,m,h,v)),(a=l[2])&&f.push(new _(a,c,m,x,v)),(a=l[1])&&f.push(new _(a,x,u,h,m)),(a=l[0])&&f.push(new _(a,c,u,x,m))}return this},n.visitAfter=function(p){var s,a=[],c=[];for(this._root&&a.push(new _(this._root,this._x0,this._y0,this._x1,this._y1));s=a.pop();){var u=s.node;if(u.length){var h,v=s.x0,f=s.y0,l=s.x1,x=s.y1,m=(v+l)/2,w=(f+x)/2;(h=u[0])&&a.push(new _(h,v,f,m,w)),(h=u[1])&&a.push(new _(h,m,f,l,w)),(h=u[2])&&a.push(new _(h,v,w,m,x)),(h=u[3])&&a.push(new _(h,m,w,l,x))}c.push(s)}for(;s=c.pop();)p(s.node,s.x0,s.y0,s.x1,s.y1);return this},n.x=function(p){return arguments.length?(this._x=p,this):this._x},n.y=function(p){return arguments.length?(this._y=p,this):this._y},d.quadtree=i,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).d3=d.d3||{})},{}],119:[function(y,$,ee){var d,g;d=this,g=function(d,g){"use strict";function _(Re){return function(){return Re}}var t=Math.abs,e=Math.atan2,i=Math.cos,r=Math.max,o=Math.min,n=Math.sin,p=Math.sqrt,s=Math.PI,a=s/2,c=2*s;function u(Re){return Re>1?0:Re<-1?s:Math.acos(Re)}function h(Re){return Re>=1?a:Re<=-1?-a:Math.asin(Re)}function v(Re){return Re.innerRadius}function f(Re){return Re.outerRadius}function l(Re){return Re.startAngle}function x(Re){return Re.endAngle}function m(Re){return Re&&Re.padAngle}function w(Re,ht,Mt,Nt,Zt,or,Wt,er){var cr=Mt-Re,_r=Nt-ht,xr=Wt-Zt,dr=er-or,pr=dr*cr-xr*_r;if(!(pr*pr<1e-12))return[Re+(pr=(xr*(ht-or)-dr*(Re-Zt))/pr)*cr,ht+pr*_r]}function b(Re,ht,Mt,Nt,Zt,or,Wt){var er=Re-Mt,cr=ht-Nt,_r=(Wt?or:-or)/p(er*er+cr*cr),xr=_r*cr,dr=-_r*er,pr=Re+xr,br=ht+dr,Nr=Mt+xr,kr=Nt+dr,Hr=(pr+Nr)/2,an=(br+kr)/2,fn=Nr-pr,zn=kr-br,Nn=fn*fn+zn*zn,In=Zt-or,cn=pr*kr-Nr*br,jr=(zn<0?-1:1)*p(r(0,In*In*Nn-cn*cn)),Lr=(cn*zn-fn*jr)/Nn,Xr=(-cn*fn-zn*jr)/Nn,Un=(cn*zn+fn*jr)/Nn,qr=(-cn*fn+zn*jr)/Nn,On=Lr-Hr,Tn=Xr-an,rn=Un-Hr,Vn=qr-an;return On*On+Tn*Tn>rn*rn+Vn*Vn&&(Lr=Un,Xr=qr),{cx:Lr,cy:Xr,x01:-xr,y01:-dr,x11:Lr*(Zt/In-1),y11:Xr*(Zt/In-1)}}function k(Re){this._context=Re}function T(Re){return new k(Re)}function L(Re){return Re[0]}function A(Re){return Re[1]}function I(){var Re=L,ht=A,Mt=_(!0),Nt=null,Zt=T,or=null;function Wt(er){var cr,_r,xr,dr=er.length,pr=!1;for(null==Nt&&(or=Zt(xr=g.path())),cr=0;cr<=dr;++cr)!(cr<dr&&Mt(_r=er[cr],cr,er))===pr&&((pr=!pr)?or.lineStart():or.lineEnd()),pr&&or.point(+Re(_r,cr,er),+ht(_r,cr,er));if(xr)return or=null,xr+""||null}return Wt.x=function(er){return arguments.length?(Re="function"==typeof er?er:_(+er),Wt):Re},Wt.y=function(er){return arguments.length?(ht="function"==typeof er?er:_(+er),Wt):ht},Wt.defined=function(er){return arguments.length?(Mt="function"==typeof er?er:_(!!er),Wt):Mt},Wt.curve=function(er){return arguments.length?(Zt=er,null!=Nt&&(or=Zt(Nt)),Wt):Zt},Wt.context=function(er){return arguments.length?(null==er?Nt=or=null:or=Zt(Nt=er),Wt):Nt},Wt}function D(){var Re=L,ht=null,Mt=_(0),Nt=A,Zt=_(!0),or=null,Wt=T,er=null;function cr(xr){var dr,pr,br,Nr,kr,Hr=xr.length,an=!1,fn=new Array(Hr),zn=new Array(Hr);for(null==or&&(er=Wt(kr=g.path())),dr=0;dr<=Hr;++dr){if(!(dr<Hr&&Zt(Nr=xr[dr],dr,xr))===an)if(an=!an)pr=dr,er.areaStart(),er.lineStart();else{for(er.lineEnd(),er.lineStart(),br=dr-1;br>=pr;--br)er.point(fn[br],zn[br]);er.lineEnd(),er.areaEnd()}an&&(fn[dr]=+Re(Nr,dr,xr),zn[dr]=+Mt(Nr,dr,xr),er.point(ht?+ht(Nr,dr,xr):fn[dr],Nt?+Nt(Nr,dr,xr):zn[dr]))}if(kr)return er=null,kr+""||null}function _r(){return I().defined(Zt).curve(Wt).context(or)}return cr.x=function(xr){return arguments.length?(Re="function"==typeof xr?xr:_(+xr),ht=null,cr):Re},cr.x0=function(xr){return arguments.length?(Re="function"==typeof xr?xr:_(+xr),cr):Re},cr.x1=function(xr){return arguments.length?(ht=null==xr?null:"function"==typeof xr?xr:_(+xr),cr):ht},cr.y=function(xr){return arguments.length?(Mt="function"==typeof xr?xr:_(+xr),Nt=null,cr):Mt},cr.y0=function(xr){return arguments.length?(Mt="function"==typeof xr?xr:_(+xr),cr):Mt},cr.y1=function(xr){return arguments.length?(Nt=null==xr?null:"function"==typeof xr?xr:_(+xr),cr):Nt},cr.lineX0=cr.lineY0=function(){return _r().x(Re).y(Mt)},cr.lineY1=function(){return _r().x(Re).y(Nt)},cr.lineX1=function(){return _r().x(ht).y(Mt)},cr.defined=function(xr){return arguments.length?(Zt="function"==typeof xr?xr:_(!!xr),cr):Zt},cr.curve=function(xr){return arguments.length?(Wt=xr,null!=or&&(er=Wt(or)),cr):Wt},cr.context=function(xr){return arguments.length?(null==xr?or=er=null:er=Wt(or=xr),cr):or},cr}function S(Re,ht){return ht<Re?-1:ht>Re?1:ht>=Re?0:NaN}function C(Re){return Re}k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ht):this._context.moveTo(Re,ht);break;case 1:this._point=2;default:this._context.lineTo(Re,ht)}}};var R=H(T);function F(Re){this._curve=Re}function H(Re){function ht(Mt){return new F(Re(Mt))}return ht._curve=Re,ht}function U(Re){var ht=Re.curve;return Re.angle=Re.x,delete Re.x,Re.radius=Re.y,delete Re.y,Re.curve=function(Mt){return arguments.length?ht(H(Mt)):ht()._curve},Re}function X(){return U(I().curve(R))}function Z(){var Re=D().curve(R),ht=Re.curve,Mt=Re.lineX0,Nt=Re.lineX1,Zt=Re.lineY0,or=Re.lineY1;return Re.angle=Re.x,delete Re.x,Re.startAngle=Re.x0,delete Re.x0,Re.endAngle=Re.x1,delete Re.x1,Re.radius=Re.y,delete Re.y,Re.innerRadius=Re.y0,delete Re.y0,Re.outerRadius=Re.y1,delete Re.y1,Re.lineStartAngle=function(){return U(Mt())},delete Re.lineX0,Re.lineEndAngle=function(){return U(Nt())},delete Re.lineX1,Re.lineInnerRadius=function(){return U(Zt())},delete Re.lineY0,Re.lineOuterRadius=function(){return U(or())},delete Re.lineY1,Re.curve=function(Wt){return arguments.length?ht(H(Wt)):ht()._curve},Re}function Y(Re,ht){return[(ht=+ht)*Math.cos(Re-=Math.PI/2),ht*Math.sin(Re)]}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Re,ht){this._curve.point(ht*Math.sin(Re),ht*-Math.cos(Re))}};var W=Array.prototype.slice;function te(Re){return Re.source}function z(Re){return Re.target}function N(Re){var ht=te,Mt=z,Nt=L,Zt=A,or=null;function Wt(){var er,cr=W.call(arguments),_r=ht.apply(this,cr),xr=Mt.apply(this,cr);if(or||(or=er=g.path()),Re(or,+Nt.apply(this,(cr[0]=_r,cr)),+Zt.apply(this,cr),+Nt.apply(this,(cr[0]=xr,cr)),+Zt.apply(this,cr)),er)return or=null,er+""||null}return Wt.source=function(er){return arguments.length?(ht=er,Wt):ht},Wt.target=function(er){return arguments.length?(Mt=er,Wt):Mt},Wt.x=function(er){return arguments.length?(Nt="function"==typeof er?er:_(+er),Wt):Nt},Wt.y=function(er){return arguments.length?(Zt="function"==typeof er?er:_(+er),Wt):Zt},Wt.context=function(er){return arguments.length?(or=null==er?null:er,Wt):or},Wt}function V(Re,ht,Mt,Nt,Zt){Re.moveTo(ht,Mt),Re.bezierCurveTo(ht=(ht+Nt)/2,Mt,ht,Zt,Nt,Zt)}function Q(Re,ht,Mt,Nt,Zt){Re.moveTo(ht,Mt),Re.bezierCurveTo(ht,Mt=(Mt+Zt)/2,Nt,Mt,Nt,Zt)}function j(Re,ht,Mt,Nt,Zt){var or=Y(ht,Mt),Wt=Y(ht,Mt=(Mt+Zt)/2),er=Y(Nt,Mt),cr=Y(Nt,Zt);Re.moveTo(or[0],or[1]),Re.bezierCurveTo(Wt[0],Wt[1],er[0],er[1],cr[0],cr[1])}var J={draw:function(Re,ht){var Mt=Math.sqrt(ht/s);Re.moveTo(Mt,0),Re.arc(0,0,Mt,0,c)}},K={draw:function(Re,ht){var Mt=Math.sqrt(ht/5)/2;Re.moveTo(-3*Mt,-Mt),Re.lineTo(-Mt,-Mt),Re.lineTo(-Mt,-3*Mt),Re.lineTo(Mt,-3*Mt),Re.lineTo(Mt,-Mt),Re.lineTo(3*Mt,-Mt),Re.lineTo(3*Mt,Mt),Re.lineTo(Mt,Mt),Re.lineTo(Mt,3*Mt),Re.lineTo(-Mt,3*Mt),Re.lineTo(-Mt,Mt),Re.lineTo(-3*Mt,Mt),Re.closePath()}},re=Math.sqrt(1/3),ie=2*re,ce={draw:function(Re,ht){var Mt=Math.sqrt(ht/ie),Nt=Mt*re;Re.moveTo(0,-Mt),Re.lineTo(Nt,0),Re.lineTo(0,Mt),Re.lineTo(-Nt,0),Re.closePath()}},se=Math.sin(s/10)/Math.sin(7*s/10),de=Math.sin(c/10)*se,ue=-Math.cos(c/10)*se,ge={draw:function(Re,ht){var Mt=Math.sqrt(.8908130915292852*ht),Nt=de*Mt,Zt=ue*Mt;Re.moveTo(0,-Mt),Re.lineTo(Nt,Zt);for(var or=1;or<5;++or){var Wt=c*or/5,er=Math.cos(Wt),cr=Math.sin(Wt);Re.lineTo(cr*Mt,-er*Mt),Re.lineTo(er*Nt-cr*Zt,cr*Nt+er*Zt)}Re.closePath()}},be={draw:function(Re,ht){var Mt=Math.sqrt(ht),Nt=-Mt/2;Re.rect(Nt,Nt,Mt,Mt)}},Te=Math.sqrt(3),we={draw:function(Re,ht){var Mt=-Math.sqrt(ht/(3*Te));Re.moveTo(0,2*Mt),Re.lineTo(-Te*Mt,-Mt),Re.lineTo(Te*Mt,-Mt),Re.closePath()}},Le=-.5,fe=Math.sqrt(3)/2,ve=1/Math.sqrt(12),Me=3*(ve/2+1),ke={draw:function(Re,ht){var Mt=Math.sqrt(ht/Me),Nt=Mt/2,Zt=Mt*ve,or=Nt,Wt=Mt*ve+Mt,er=-or,cr=Wt;Re.moveTo(Nt,Zt),Re.lineTo(or,Wt),Re.lineTo(er,cr),Re.lineTo(Le*Nt-fe*Zt,fe*Nt+Le*Zt),Re.lineTo(Le*or-fe*Wt,fe*or+Le*Wt),Re.lineTo(Le*er-fe*cr,fe*er+Le*cr),Re.lineTo(Le*Nt+fe*Zt,Le*Zt-fe*Nt),Re.lineTo(Le*or+fe*Wt,Le*Wt-fe*or),Re.lineTo(Le*er+fe*cr,Le*cr-fe*er),Re.closePath()}},Ce=[J,K,ce,be,ge,we,ke];function Pe(){}function Fe(Re,ht,Mt){Re._context.bezierCurveTo((2*Re._x0+Re._x1)/3,(2*Re._y0+Re._y1)/3,(Re._x0+2*Re._x1)/3,(Re._y0+2*Re._y1)/3,(Re._x0+4*Re._x1+ht)/6,(Re._y0+4*Re._y1+Mt)/6)}function qe(Re){this._context=Re}function rt(Re){this._context=Re}function ze(Re){this._context=Re}function He(Re,ht){this._basis=new qe(Re),this._beta=ht}qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ht):this._context.moveTo(Re,ht);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fe(this,Re,ht)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ht}},rt.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1,this._x2=Re,this._y2=ht;break;case 1:this._point=2,this._x3=Re,this._y3=ht;break;case 2:this._point=3,this._x4=Re,this._y4=ht,this._context.moveTo((this._x0+4*this._x1+Re)/6,(this._y0+4*this._y1+ht)/6);break;default:Fe(this,Re,ht)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ht}},ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Mt=(this._x0+4*this._x1+Re)/6,Nt=(this._y0+4*this._y1+ht)/6;this._line?this._context.lineTo(Mt,Nt):this._context.moveTo(Mt,Nt);break;case 3:this._point=4;default:Fe(this,Re,ht)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ht}},He.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Re=this._x,ht=this._y,Mt=Re.length-1;if(Mt>0)for(var Nt,Zt=Re[0],or=ht[0],Wt=Re[Mt]-Zt,er=ht[Mt]-or,cr=-1;++cr<=Mt;)this._basis.point(this._beta*Re[cr]+(1-this._beta)*(Zt+(Nt=cr/Mt)*Wt),this._beta*ht[cr]+(1-this._beta)*(or+Nt*er));this._x=this._y=null,this._basis.lineEnd()},point:function(Re,ht){this._x.push(+Re),this._y.push(+ht)}};var Xe=function Re(ht){function Mt(Nt){return 1===ht?new qe(Nt):new He(Nt,ht)}return Mt.beta=function(Nt){return Re(+Nt)},Mt}(.85);function Je(Re,ht,Mt){Re._context.bezierCurveTo(Re._x1+Re._k*(Re._x2-Re._x0),Re._y1+Re._k*(Re._y2-Re._y0),Re._x2+Re._k*(Re._x1-ht),Re._y2+Re._k*(Re._y1-Mt),Re._x2,Re._y2)}function at(Re,ht){this._context=Re,this._k=(1-ht)/6}at.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Je(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ht):this._context.moveTo(Re,ht);break;case 1:this._point=2,this._x1=Re,this._y1=ht;break;case 2:this._point=3;default:Je(this,Re,ht)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var pt=function Re(ht){function Mt(Nt){return new at(Nt,ht)}return Mt.tension=function(Nt){return Re(+Nt)},Mt}(0);function xt(Re,ht){this._context=Re,this._k=(1-ht)/6}xt.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1,this._x3=Re,this._y3=ht;break;case 1:this._point=2,this._context.moveTo(this._x4=Re,this._y4=ht);break;case 2:this._point=3,this._x5=Re,this._y5=ht;break;default:Je(this,Re,ht)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Ft=function Re(ht){function Mt(Nt){return new xt(Nt,ht)}return Mt.tension=function(Nt){return Re(+Nt)},Mt}(0);function Dt(Re,ht){this._context=Re,this._k=(1-ht)/6}Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Je(this,Re,ht)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var ot=function Re(ht){function Mt(Nt){return new Dt(Nt,ht)}return Mt.tension=function(Nt){return Re(+Nt)},Mt}(0);function it(Re,ht,Mt){var Nt=Re._x1,Zt=Re._y1,or=Re._x2,Wt=Re._y2;if(Re._l01_a>1e-12){var er=2*Re._l01_2a+3*Re._l01_a*Re._l12_a+Re._l12_2a,cr=3*Re._l01_a*(Re._l01_a+Re._l12_a);Nt=(Nt*er-Re._x0*Re._l12_2a+Re._x2*Re._l01_2a)/cr,Zt=(Zt*er-Re._y0*Re._l12_2a+Re._y2*Re._l01_2a)/cr}if(Re._l23_a>1e-12){var _r=2*Re._l23_2a+3*Re._l23_a*Re._l12_a+Re._l12_2a,xr=3*Re._l23_a*(Re._l23_a+Re._l12_a);or=(or*_r+Re._x1*Re._l23_2a-ht*Re._l12_2a)/xr,Wt=(Wt*_r+Re._y1*Re._l23_2a-Mt*Re._l12_2a)/xr}Re._context.bezierCurveTo(Nt,Zt,or,Wt,Re._x2,Re._y2)}function Et(Re,ht){this._context=Re,this._alpha=ht}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){if(Re=+Re,ht=+ht,this._point){var Mt=this._x2-Re,Nt=this._y2-ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Mt*Mt+Nt*Nt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ht):this._context.moveTo(Re,ht);break;case 1:this._point=2;break;case 2:this._point=3;default:it(this,Re,ht)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Xt=function Re(ht){function Mt(Nt){return ht?new Et(Nt,ht):new at(Nt,0)}return Mt.alpha=function(Nt){return Re(+Nt)},Mt}(.5);function nr(Re,ht){this._context=Re,this._alpha=ht}nr.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Re,ht){if(Re=+Re,ht=+ht,this._point){var Mt=this._x2-Re,Nt=this._y2-ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Mt*Mt+Nt*Nt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Re,this._y3=ht;break;case 1:this._point=2,this._context.moveTo(this._x4=Re,this._y4=ht);break;case 2:this._point=3,this._x5=Re,this._y5=ht;break;default:it(this,Re,ht)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Ue=function Re(ht){function Mt(Nt){return ht?new nr(Nt,ht):new xt(Nt,0)}return Mt.alpha=function(Nt){return Re(+Nt)},Mt}(.5);function We(Re,ht){this._context=Re,this._alpha=ht}We.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){if(Re=+Re,ht=+ht,this._point){var Mt=this._x2-Re,Nt=this._y2-ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Mt*Mt+Nt*Nt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:it(this,Re,ht)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Be=function Re(ht){function Mt(Nt){return ht?new We(Nt,ht):new Dt(Nt,0)}return Mt.alpha=function(Nt){return Re(+Nt)},Mt}(.5);function Qe(Re){this._context=Re}function Ae(Re){return Re<0?-1:1}function De(Re,ht,Mt){var Nt=Re._x1-Re._x0,Zt=ht-Re._x1,or=(Re._y1-Re._y0)/(Nt||Zt<0&&-0),Wt=(Mt-Re._y1)/(Zt||Nt<0&&-0),er=(or*Zt+Wt*Nt)/(Nt+Zt);return(Ae(or)+Ae(Wt))*Math.min(Math.abs(or),Math.abs(Wt),.5*Math.abs(er))||0}function Oe(Re,ht){var Mt=Re._x1-Re._x0;return Mt?(3*(Re._y1-Re._y0)/Mt-ht)/2:ht}function Ie(Re,ht,Mt){var Nt=Re._x0,or=Re._x1,Wt=Re._y1,er=(or-Nt)/3;Re._context.bezierCurveTo(Nt+er,Re._y0+er*ht,or-er,Wt-er*Mt,or,Wt)}function et(Re){this._context=Re}function ct(Re){this._context=new vt(Re)}function vt(Re){this._context=Re}function ft(Re){this._context=Re}function It(Re){var ht,Mt,Nt=Re.length-1,Zt=new Array(Nt),or=new Array(Nt),Wt=new Array(Nt);for(Zt[0]=0,or[0]=2,Wt[0]=Re[0]+2*Re[1],ht=1;ht<Nt-1;++ht)Zt[ht]=1,or[ht]=4,Wt[ht]=4*Re[ht]+2*Re[ht+1];for(Zt[Nt-1]=2,or[Nt-1]=7,Wt[Nt-1]=8*Re[Nt-1]+Re[Nt],ht=1;ht<Nt;++ht)or[ht]-=Mt=Zt[ht]/or[ht-1],Wt[ht]-=Mt*Wt[ht-1];for(Zt[Nt-1]=Wt[Nt-1]/or[Nt-1],ht=Nt-2;ht>=0;--ht)Zt[ht]=(Wt[ht]-Zt[ht+1])/or[ht];for(or[Nt-1]=(Re[Nt]+Zt[Nt-1])/2,ht=0;ht<Nt-1;++ht)or[ht]=2*Re[ht+1]-Zt[ht+1];return[Zt,or]}function ut(Re,ht){this._context=Re,this._t=ht}function Ot(Re,ht){if((Zt=Re.length)>1)for(var Mt,Nt,Zt,or=1,Wt=Re[ht[0]],er=Wt.length;or<Zt;++or)for(Nt=Wt,Wt=Re[ht[or]],Mt=0;Mt<er;++Mt)Wt[Mt][1]+=Wt[Mt][0]=isNaN(Nt[Mt][1])?Nt[Mt][0]:Nt[Mt][1]}function Rt(Re){for(var ht=Re.length,Mt=new Array(ht);--ht>=0;)Mt[ht]=ht;return Mt}function $e(Re,ht){return Re[ht]}function yt(Re){var ht=Re.map(Bt);return Rt(Re).sort(function(Mt,Nt){return ht[Mt]-ht[Nt]})}function Bt(Re){for(var ht,Mt=-1,Nt=0,Zt=Re.length,or=-1/0;++Mt<Zt;)(ht=+Re[Mt][1])>or&&(or=ht,Nt=Mt);return Nt}function Ut(Re){var ht=Re.map(Qt);return Rt(Re).sort(function(Mt,Nt){return ht[Mt]-ht[Nt]})}function Qt(Re){for(var ht,Mt=0,Nt=-1,Zt=Re.length;++Nt<Zt;)(ht=+Re[Nt][1])&&(Mt+=ht);return Mt}Qe.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Re,ht){Re=+Re,ht=+ht,this._point?this._context.lineTo(Re,ht):(this._point=1,this._context.moveTo(Re,ht))}},et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ie(this,this._t0,Oe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,ht){var Mt=NaN;if(ht=+ht,(Re=+Re)!==this._x1||ht!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ht):this._context.moveTo(Re,ht);break;case 1:this._point=2;break;case 2:this._point=3,Ie(this,Oe(this,Mt=De(this,Re,ht)),Mt);break;default:Ie(this,this._t0,Mt=De(this,Re,ht))}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=ht,this._t0=Mt}}},(ct.prototype=Object.create(et.prototype)).point=function(Re,ht){et.prototype.point.call(this,ht,Re)},vt.prototype={moveTo:function(Re,ht){this._context.moveTo(ht,Re)},closePath:function(){this._context.closePath()},lineTo:function(Re,ht){this._context.lineTo(ht,Re)},bezierCurveTo:function(Re,ht,Mt,Nt,Zt,or){this._context.bezierCurveTo(ht,Re,Nt,Mt,or,Zt)}},ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Re=this._x,ht=this._y,Mt=Re.length;if(Mt)if(this._line?this._context.lineTo(Re[0],ht[0]):this._context.moveTo(Re[0],ht[0]),2===Mt)this._context.lineTo(Re[1],ht[1]);else for(var Nt=It(Re),Zt=It(ht),or=0,Wt=1;Wt<Mt;++or,++Wt)this._context.bezierCurveTo(Nt[0][or],Zt[0][or],Nt[1][or],Zt[1][or],Re[Wt],ht[Wt]);(this._line||0!==this._line&&1===Mt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Re,ht){this._x.push(+Re),this._y.push(+ht)}},ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Re,ht){switch(Re=+Re,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,ht):this._context.moveTo(Re,ht);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,ht),this._context.lineTo(Re,ht);else{var Mt=this._x*(1-this._t)+Re*this._t;this._context.lineTo(Mt,this._y),this._context.lineTo(Mt,ht)}}this._x=Re,this._y=ht}},d.arc=function(){var Re=v,ht=f,Mt=_(0),Nt=null,Zt=l,or=x,Wt=m,er=null;function cr(){var _r,xr,dr=+Re.apply(this,arguments),pr=+ht.apply(this,arguments),br=Zt.apply(this,arguments)-a,Nr=or.apply(this,arguments)-a,kr=t(Nr-br),Hr=Nr>br;if(er||(er=_r=g.path()),pr<dr&&(xr=pr,pr=dr,dr=xr),pr>1e-12)if(kr>c-1e-12)er.moveTo(pr*i(br),pr*n(br)),er.arc(0,0,pr,br,Nr,!Hr),dr>1e-12&&(er.moveTo(dr*i(Nr),dr*n(Nr)),er.arc(0,0,dr,Nr,br,Hr));else{var an,fn,zn=br,Nn=Nr,In=br,cn=Nr,jr=kr,Lr=kr,Xr=Wt.apply(this,arguments)/2,Un=Xr>1e-12&&(Nt?+Nt.apply(this,arguments):p(dr*dr+pr*pr)),qr=o(t(pr-dr)/2,+Mt.apply(this,arguments)),On=qr,Tn=qr;if(Un>1e-12){var rn=h(Un/dr*n(Xr)),Vn=h(Un/pr*n(Xr));(jr-=2*rn)>1e-12?(In+=rn*=Hr?1:-1,cn-=rn):(jr=0,In=cn=(br+Nr)/2),(Lr-=2*Vn)>1e-12?(zn+=Vn*=Hr?1:-1,Nn-=Vn):(Lr=0,zn=Nn=(br+Nr)/2)}var ar=pr*i(zn),zt=pr*n(zn),Gt=dr*i(cn),mr=dr*n(cn);if(qr>1e-12){var Er,tn=pr*i(Nn),Qr=pr*n(Nn),Cr=dr*i(In),Mr=dr*n(In);if(kr<s&&(Er=w(ar,zt,Cr,Mr,tn,Qr,Gt,mr))){var Ir=ar-Er[0],Sr=zt-Er[1],Pr=tn-Er[0],Kr=Qr-Er[1],vn=1/n(u((Ir*Pr+Sr*Kr)/(p(Ir*Ir+Sr*Sr)*p(Pr*Pr+Kr*Kr)))/2),Cn=p(Er[0]*Er[0]+Er[1]*Er[1]);On=o(qr,(dr-Cn)/(vn-1)),Tn=o(qr,(pr-Cn)/(vn+1))}}Lr>1e-12?Tn>1e-12?(an=b(Cr,Mr,ar,zt,pr,Tn,Hr),fn=b(tn,Qr,Gt,mr,pr,Tn,Hr),er.moveTo(an.cx+an.x01,an.cy+an.y01),Tn<qr?er.arc(an.cx,an.cy,Tn,e(an.y01,an.x01),e(fn.y01,fn.x01),!Hr):(er.arc(an.cx,an.cy,Tn,e(an.y01,an.x01),e(an.y11,an.x11),!Hr),er.arc(0,0,pr,e(an.cy+an.y11,an.cx+an.x11),e(fn.cy+fn.y11,fn.cx+fn.x11),!Hr),er.arc(fn.cx,fn.cy,Tn,e(fn.y11,fn.x11),e(fn.y01,fn.x01),!Hr))):(er.moveTo(ar,zt),er.arc(0,0,pr,zn,Nn,!Hr)):er.moveTo(ar,zt),dr>1e-12&&jr>1e-12?On>1e-12?(an=b(Gt,mr,tn,Qr,dr,-On,Hr),fn=b(ar,zt,Cr,Mr,dr,-On,Hr),er.lineTo(an.cx+an.x01,an.cy+an.y01),On<qr?er.arc(an.cx,an.cy,On,e(an.y01,an.x01),e(fn.y01,fn.x01),!Hr):(er.arc(an.cx,an.cy,On,e(an.y01,an.x01),e(an.y11,an.x11),!Hr),er.arc(0,0,dr,e(an.cy+an.y11,an.cx+an.x11),e(fn.cy+fn.y11,fn.cx+fn.x11),Hr),er.arc(fn.cx,fn.cy,On,e(fn.y11,fn.x11),e(fn.y01,fn.x01),!Hr))):er.arc(0,0,dr,cn,In,Hr):er.lineTo(Gt,mr)}else er.moveTo(0,0);if(er.closePath(),_r)return er=null,_r+""||null}return cr.centroid=function(){var _r=(+Re.apply(this,arguments)+ +ht.apply(this,arguments))/2,xr=(+Zt.apply(this,arguments)+ +or.apply(this,arguments))/2-s/2;return[i(xr)*_r,n(xr)*_r]},cr.innerRadius=function(_r){return arguments.length?(Re="function"==typeof _r?_r:_(+_r),cr):Re},cr.outerRadius=function(_r){return arguments.length?(ht="function"==typeof _r?_r:_(+_r),cr):ht},cr.cornerRadius=function(_r){return arguments.length?(Mt="function"==typeof _r?_r:_(+_r),cr):Mt},cr.padRadius=function(_r){return arguments.length?(Nt=null==_r?null:"function"==typeof _r?_r:_(+_r),cr):Nt},cr.startAngle=function(_r){return arguments.length?(Zt="function"==typeof _r?_r:_(+_r),cr):Zt},cr.endAngle=function(_r){return arguments.length?(or="function"==typeof _r?_r:_(+_r),cr):or},cr.padAngle=function(_r){return arguments.length?(Wt="function"==typeof _r?_r:_(+_r),cr):Wt},cr.context=function(_r){return arguments.length?(er=null==_r?null:_r,cr):er},cr},d.area=D,d.areaRadial=Z,d.curveBasis=function(Re){return new qe(Re)},d.curveBasisClosed=function(Re){return new rt(Re)},d.curveBasisOpen=function(Re){return new ze(Re)},d.curveBundle=Xe,d.curveCardinal=pt,d.curveCardinalClosed=Ft,d.curveCardinalOpen=ot,d.curveCatmullRom=Xt,d.curveCatmullRomClosed=Ue,d.curveCatmullRomOpen=Be,d.curveLinear=T,d.curveLinearClosed=function(Re){return new Qe(Re)},d.curveMonotoneX=function(Re){return new et(Re)},d.curveMonotoneY=function(Re){return new ct(Re)},d.curveNatural=function(Re){return new ft(Re)},d.curveStep=function(Re){return new ut(Re,.5)},d.curveStepAfter=function(Re){return new ut(Re,1)},d.curveStepBefore=function(Re){return new ut(Re,0)},d.line=I,d.lineRadial=X,d.linkHorizontal=function(){return N(V)},d.linkRadial=function(){var Re=N(j);return Re.angle=Re.x,delete Re.x,Re.radius=Re.y,delete Re.y,Re},d.linkVertical=function(){return N(Q)},d.pie=function(){var Re=C,ht=S,Mt=null,Nt=_(0),Zt=_(c),or=_(0);function Wt(er){var cr,_r,xr,dr,pr,br=er.length,Nr=0,kr=new Array(br),Hr=new Array(br),an=+Nt.apply(this,arguments),fn=Math.min(c,Math.max(-c,Zt.apply(this,arguments)-an)),zn=Math.min(Math.abs(fn)/br,or.apply(this,arguments)),Nn=zn*(fn<0?-1:1);for(cr=0;cr<br;++cr)(pr=Hr[kr[cr]=cr]=+Re(er[cr],cr,er))>0&&(Nr+=pr);for(null!=ht?kr.sort(function(In,cn){return ht(Hr[In],Hr[cn])}):null!=Mt&&kr.sort(function(In,cn){return Mt(er[In],er[cn])}),cr=0,xr=Nr?(fn-br*Nn)/Nr:0;cr<br;++cr,an=dr)dr=an+((pr=Hr[_r=kr[cr]])>0?pr*xr:0)+Nn,Hr[_r]={data:er[_r],index:cr,value:pr,startAngle:an,endAngle:dr,padAngle:zn};return Hr}return Wt.value=function(er){return arguments.length?(Re="function"==typeof er?er:_(+er),Wt):Re},Wt.sortValues=function(er){return arguments.length?(ht=er,Mt=null,Wt):ht},Wt.sort=function(er){return arguments.length?(Mt=er,ht=null,Wt):Mt},Wt.startAngle=function(er){return arguments.length?(Nt="function"==typeof er?er:_(+er),Wt):Nt},Wt.endAngle=function(er){return arguments.length?(Zt="function"==typeof er?er:_(+er),Wt):Zt},Wt.padAngle=function(er){return arguments.length?(or="function"==typeof er?er:_(+er),Wt):or},Wt},d.pointRadial=Y,d.radialArea=Z,d.radialLine=X,d.stack=function(){var Re=_([]),ht=Rt,Mt=Ot,Nt=$e;function Zt(or){var Wt,er,cr=Re.apply(this,arguments),_r=or.length,xr=cr.length,dr=new Array(xr);for(Wt=0;Wt<xr;++Wt){for(var pr,br=cr[Wt],Nr=dr[Wt]=new Array(_r),kr=0;kr<_r;++kr)Nr[kr]=pr=[0,+Nt(or[kr],br,kr,or)],pr.data=or[kr];Nr.key=br}for(Wt=0,er=ht(dr);Wt<xr;++Wt)dr[er[Wt]].index=Wt;return Mt(dr,er),dr}return Zt.keys=function(or){return arguments.length?(Re="function"==typeof or?or:_(W.call(or)),Zt):Re},Zt.value=function(or){return arguments.length?(Nt="function"==typeof or?or:_(+or),Zt):Nt},Zt.order=function(or){return arguments.length?(ht=null==or?Rt:"function"==typeof or?or:_(W.call(or)),Zt):ht},Zt.offset=function(or){return arguments.length?(Mt=null==or?Ot:or,Zt):Mt},Zt},d.stackOffsetDiverging=function(Re,ht){if((er=Re.length)>0)for(var Mt,Nt,Zt,or,Wt,er,cr=0,_r=Re[ht[0]].length;cr<_r;++cr)for(or=Wt=0,Mt=0;Mt<er;++Mt)(Zt=(Nt=Re[ht[Mt]][cr])[1]-Nt[0])>0?(Nt[0]=or,Nt[1]=or+=Zt):Zt<0?(Nt[1]=Wt,Nt[0]=Wt+=Zt):(Nt[0]=0,Nt[1]=Zt)},d.stackOffsetExpand=function(Re,ht){if((Nt=Re.length)>0){for(var Mt,Nt,Zt,or=0,Wt=Re[0].length;or<Wt;++or){for(Zt=Mt=0;Mt<Nt;++Mt)Zt+=Re[Mt][or][1]||0;if(Zt)for(Mt=0;Mt<Nt;++Mt)Re[Mt][or][1]/=Zt}Ot(Re,ht)}},d.stackOffsetNone=Ot,d.stackOffsetSilhouette=function(Re,ht){if((Mt=Re.length)>0){for(var Mt,Nt=0,Zt=Re[ht[0]],or=Zt.length;Nt<or;++Nt){for(var Wt=0,er=0;Wt<Mt;++Wt)er+=Re[Wt][Nt][1]||0;Zt[Nt][1]+=Zt[Nt][0]=-er/2}Ot(Re,ht)}},d.stackOffsetWiggle=function(Re,ht){if((Zt=Re.length)>0&&(Nt=(Mt=Re[ht[0]]).length)>0){for(var Mt,Nt,Zt,or=0,Wt=1;Wt<Nt;++Wt){for(var er=0,cr=0,_r=0;er<Zt;++er){for(var xr=Re[ht[er]],dr=xr[Wt][1]||0,pr=(dr-(xr[Wt-1][1]||0))/2,br=0;br<er;++br){var Nr=Re[ht[br]];pr+=(Nr[Wt][1]||0)-(Nr[Wt-1][1]||0)}cr+=dr,_r+=pr*dr}Mt[Wt-1][1]+=Mt[Wt-1][0]=or,cr&&(or-=_r/cr)}Mt[Wt-1][1]+=Mt[Wt-1][0]=or,Ot(Re,ht)}},d.stackOrderAppearance=yt,d.stackOrderAscending=Ut,d.stackOrderDescending=function(Re){return Ut(Re).reverse()},d.stackOrderInsideOut=function(Re){var ht,Mt,Nt=Re.length,Zt=Re.map(Qt),or=yt(Re),Wt=0,er=0,cr=[],_r=[];for(ht=0;ht<Nt;++ht)Mt=or[ht],Wt<er?(Wt+=Zt[Mt],cr.push(Mt)):(er+=Zt[Mt],_r.push(Mt));return _r.reverse().concat(cr)},d.stackOrderNone=Rt,d.stackOrderReverse=function(Re){return Rt(Re).reverse()},d.symbol=function(){var Re=_(J),ht=_(64),Mt=null;function Nt(){var Zt;if(Mt||(Mt=Zt=g.path()),Re.apply(this,arguments).draw(Mt,+ht.apply(this,arguments)),Zt)return Mt=null,Zt+""||null}return Nt.type=function(Zt){return arguments.length?(Re="function"==typeof Zt?Zt:_(Zt),Nt):Re},Nt.size=function(Zt){return arguments.length?(ht="function"==typeof Zt?Zt:_(+Zt),Nt):ht},Nt.context=function(Zt){return arguments.length?(Mt=null==Zt?null:Zt,Nt):Mt},Nt},d.symbolCircle=J,d.symbolCross=K,d.symbolDiamond=ce,d.symbolSquare=be,d.symbolStar=ge,d.symbolTriangle=we,d.symbolWye=ke,d.symbols=Ce,Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-path")):g((d=d||self).d3=d.d3||{},d.d3)},{"d3-path":117}],120:[function(y,$,ee){var d,g;d=this,g=function(d,g){"use strict";function _(ot){if(0<=ot.y&&ot.y<100){var it=new Date(-1,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L);return it.setFullYear(ot.y),it}return new Date(ot.y,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L)}function t(ot){if(0<=ot.y&&ot.y<100){var it=new Date(Date.UTC(-1,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L));return it.setUTCFullYear(ot.y),it}return new Date(Date.UTC(ot.y,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L))}function e(ot,it,Et){return{y:ot,m:it,d:Et,H:0,M:0,S:0,L:0}}function i(ot){var it=ot.dateTime,Et=ot.date,Xt=ot.time,nr=ot.periods,Ue=ot.days,We=ot.shortDays,Be=ot.months,Qe=ot.shortMonths,Ae=u(nr),De=h(nr),Oe=u(Ue),Ie=h(Ue),et=u(We),ct=h(We),vt=u(Be),ft=h(Be),It=u(Qe),ut=h(Qe),Ot={a:function(Qt){return We[Qt.getDay()]},A:function(Qt){return Ue[Qt.getDay()]},b:function(Qt){return Qe[Qt.getMonth()]},B:function(Qt){return Be[Qt.getMonth()]},c:null,d:Z,e:Z,f:N,H:Y,I:W,j:te,L:z,m:V,M:Q,p:function(Qt){return nr[+(Qt.getHours()>=12)]},q:function(Qt){return 1+~~(Qt.getMonth()/3)},Q:at,s:pt,S:j,u:J,U:K,V:re,w:ie,W:ce,x:null,X:null,y:se,Y:de,Z:ue,"%":Je},Rt={a:function(Qt){return We[Qt.getUTCDay()]},A:function(Qt){return Ue[Qt.getUTCDay()]},b:function(Qt){return Qe[Qt.getUTCMonth()]},B:function(Qt){return Be[Qt.getUTCMonth()]},c:null,d:ge,e:ge,f:fe,H:be,I:Te,j:we,L:Le,m:ve,M:Me,p:function(Qt){return nr[+(Qt.getUTCHours()>=12)]},q:function(Qt){return 1+~~(Qt.getUTCMonth()/3)},Q:at,s:pt,S:ke,u:Ce,U:Pe,V:Fe,w:qe,W:rt,x:null,X:null,y:ze,Y:He,Z:Xe,"%":Je},$e={a:function(Qt,Re,ht){var Mt=et.exec(Re.slice(ht));return Mt?(Qt.w=ct[Mt[0].toLowerCase()],ht+Mt[0].length):-1},A:function(Qt,Re,ht){var Mt=Oe.exec(Re.slice(ht));return Mt?(Qt.w=Ie[Mt[0].toLowerCase()],ht+Mt[0].length):-1},b:function(Qt,Re,ht){var Mt=It.exec(Re.slice(ht));return Mt?(Qt.m=ut[Mt[0].toLowerCase()],ht+Mt[0].length):-1},B:function(Qt,Re,ht){var Mt=vt.exec(Re.slice(ht));return Mt?(Qt.m=ft[Mt[0].toLowerCase()],ht+Mt[0].length):-1},c:function(Qt,Re,ht){return Ut(Qt,it,Re,ht)},d:A,e:A,f:F,H:D,I:D,j:I,L:R,m:L,M:S,p:function(Qt,Re,ht){var Mt=Ae.exec(Re.slice(ht));return Mt?(Qt.p=De[Mt[0].toLowerCase()],ht+Mt[0].length):-1},q:T,Q:U,s:X,S:C,u:f,U:l,V:x,w:v,W:m,x:function(Qt,Re,ht){return Ut(Qt,Et,Re,ht)},X:function(Qt,Re,ht){return Ut(Qt,Xt,Re,ht)},y:b,Y:w,Z:k,"%":H};function yt(Qt,Re){return function(ht){var Mt,Nt,Zt,or=[],Wt=-1,er=0,cr=Qt.length;for(ht instanceof Date||(ht=new Date(+ht));++Wt<cr;)37===Qt.charCodeAt(Wt)&&(or.push(Qt.slice(er,Wt)),null!=(Nt=o[Mt=Qt.charAt(++Wt)])?Mt=Qt.charAt(++Wt):Nt="e"===Mt?" ":"0",(Zt=Re[Mt])&&(Mt=Zt(ht,Nt)),or.push(Mt),er=Wt+1);return or.push(Qt.slice(er,Wt)),or.join("")}}function Bt(Qt,Re){return function(ht){var Mt,Nt,Zt=e(1900,void 0,1);if(Ut(Zt,Qt,ht+="",0)!=ht.length)return null;if("Q"in Zt)return new Date(Zt.Q);if("s"in Zt)return new Date(1e3*Zt.s+("L"in Zt?Zt.L:0));if(Re&&!("Z"in Zt)&&(Zt.Z=0),"p"in Zt&&(Zt.H=Zt.H%12+12*Zt.p),void 0===Zt.m&&(Zt.m="q"in Zt?Zt.q:0),"V"in Zt){if(Zt.V<1||Zt.V>53)return null;"w"in Zt||(Zt.w=1),"Z"in Zt?(Nt=(Mt=t(e(Zt.y,0,1))).getUTCDay(),Mt=Nt>4||0===Nt?g.utcMonday.ceil(Mt):g.utcMonday(Mt),Mt=g.utcDay.offset(Mt,7*(Zt.V-1)),Zt.y=Mt.getUTCFullYear(),Zt.m=Mt.getUTCMonth(),Zt.d=Mt.getUTCDate()+(Zt.w+6)%7):(Nt=(Mt=_(e(Zt.y,0,1))).getDay(),Mt=Nt>4||0===Nt?g.timeMonday.ceil(Mt):g.timeMonday(Mt),Mt=g.timeDay.offset(Mt,7*(Zt.V-1)),Zt.y=Mt.getFullYear(),Zt.m=Mt.getMonth(),Zt.d=Mt.getDate()+(Zt.w+6)%7)}else("W"in Zt||"U"in Zt)&&("w"in Zt||(Zt.w="u"in Zt?Zt.u%7:"W"in Zt?1:0),Nt="Z"in Zt?t(e(Zt.y,0,1)).getUTCDay():_(e(Zt.y,0,1)).getDay(),Zt.m=0,Zt.d="W"in Zt?(Zt.w+6)%7+7*Zt.W-(Nt+5)%7:Zt.w+7*Zt.U-(Nt+6)%7);return"Z"in Zt?(Zt.H+=Zt.Z/100|0,Zt.M+=Zt.Z%100,t(Zt)):_(Zt)}}function Ut(Qt,Re,ht,Mt){for(var Nt,Zt,or=0,Wt=Re.length,er=ht.length;or<Wt;){if(Mt>=er)return-1;if(37===(Nt=Re.charCodeAt(or++))){if(Nt=Re.charAt(or++),!(Zt=$e[Nt in o?Re.charAt(or++):Nt])||(Mt=Zt(Qt,ht,Mt))<0)return-1}else if(Nt!=ht.charCodeAt(Mt++))return-1}return Mt}return Ot.x=yt(Et,Ot),Ot.X=yt(Xt,Ot),Ot.c=yt(it,Ot),Rt.x=yt(Et,Rt),Rt.X=yt(Xt,Rt),Rt.c=yt(it,Rt),{format:function(Qt){var Re=yt(Qt+="",Ot);return Re.toString=function(){return Qt},Re},parse:function(Qt){var Re=Bt(Qt+="",!1);return Re.toString=function(){return Qt},Re},utcFormat:function(Qt){var Re=yt(Qt+="",Rt);return Re.toString=function(){return Qt},Re},utcParse:function(Qt){var Re=Bt(Qt+="",!0);return Re.toString=function(){return Qt},Re}}}var r,o={"-":"",_:" ",0:"0"},n=/^\s*\d+/,p=/^%/,s=/[\\^$*+?|[\]().{}]/g;function a(ot,it,Et){var Xt=ot<0?"-":"",nr=(Xt?-ot:ot)+"",Ue=nr.length;return Xt+(Ue<Et?new Array(Et-Ue+1).join(it)+nr:nr)}function c(ot){return ot.replace(s,"\\$&")}function u(ot){return new RegExp("^(?:"+ot.map(c).join("|")+")","i")}function h(ot){for(var it={},Et=-1,Xt=ot.length;++Et<Xt;)it[ot[Et].toLowerCase()]=Et;return it}function v(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+1));return Xt?(ot.w=+Xt[0],Et+Xt[0].length):-1}function f(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+1));return Xt?(ot.u=+Xt[0],Et+Xt[0].length):-1}function l(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.U=+Xt[0],Et+Xt[0].length):-1}function x(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.V=+Xt[0],Et+Xt[0].length):-1}function m(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.W=+Xt[0],Et+Xt[0].length):-1}function w(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+4));return Xt?(ot.y=+Xt[0],Et+Xt[0].length):-1}function b(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.y=+Xt[0]+(+Xt[0]>68?1900:2e3),Et+Xt[0].length):-1}function k(ot,it,Et){var Xt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(it.slice(Et,Et+6));return Xt?(ot.Z=Xt[1]?0:-(Xt[2]+(Xt[3]||"00")),Et+Xt[0].length):-1}function T(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+1));return Xt?(ot.q=3*Xt[0]-3,Et+Xt[0].length):-1}function L(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.m=Xt[0]-1,Et+Xt[0].length):-1}function A(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.d=+Xt[0],Et+Xt[0].length):-1}function I(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+3));return Xt?(ot.m=0,ot.d=+Xt[0],Et+Xt[0].length):-1}function D(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.H=+Xt[0],Et+Xt[0].length):-1}function S(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.M=+Xt[0],Et+Xt[0].length):-1}function C(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+2));return Xt?(ot.S=+Xt[0],Et+Xt[0].length):-1}function R(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+3));return Xt?(ot.L=+Xt[0],Et+Xt[0].length):-1}function F(ot,it,Et){var Xt=n.exec(it.slice(Et,Et+6));return Xt?(ot.L=Math.floor(Xt[0]/1e3),Et+Xt[0].length):-1}function H(ot,it,Et){var Xt=p.exec(it.slice(Et,Et+1));return Xt?Et+Xt[0].length:-1}function U(ot,it,Et){var Xt=n.exec(it.slice(Et));return Xt?(ot.Q=+Xt[0],Et+Xt[0].length):-1}function X(ot,it,Et){var Xt=n.exec(it.slice(Et));return Xt?(ot.s=+Xt[0],Et+Xt[0].length):-1}function Z(ot,it){return a(ot.getDate(),it,2)}function Y(ot,it){return a(ot.getHours(),it,2)}function W(ot,it){return a(ot.getHours()%12||12,it,2)}function te(ot,it){return a(1+g.timeDay.count(g.timeYear(ot),ot),it,3)}function z(ot,it){return a(ot.getMilliseconds(),it,3)}function N(ot,it){return z(ot,it)+"000"}function V(ot,it){return a(ot.getMonth()+1,it,2)}function Q(ot,it){return a(ot.getMinutes(),it,2)}function j(ot,it){return a(ot.getSeconds(),it,2)}function J(ot){var it=ot.getDay();return 0===it?7:it}function K(ot,it){return a(g.timeSunday.count(g.timeYear(ot)-1,ot),it,2)}function re(ot,it){var Et=ot.getDay();return ot=Et>=4||0===Et?g.timeThursday(ot):g.timeThursday.ceil(ot),a(g.timeThursday.count(g.timeYear(ot),ot)+(4===g.timeYear(ot).getDay()),it,2)}function ie(ot){return ot.getDay()}function ce(ot,it){return a(g.timeMonday.count(g.timeYear(ot)-1,ot),it,2)}function se(ot,it){return a(ot.getFullYear()%100,it,2)}function de(ot,it){return a(ot.getFullYear()%1e4,it,4)}function ue(ot){var it=ot.getTimezoneOffset();return(it>0?"-":(it*=-1,"+"))+a(it/60|0,"0",2)+a(it%60,"0",2)}function ge(ot,it){return a(ot.getUTCDate(),it,2)}function be(ot,it){return a(ot.getUTCHours(),it,2)}function Te(ot,it){return a(ot.getUTCHours()%12||12,it,2)}function we(ot,it){return a(1+g.utcDay.count(g.utcYear(ot),ot),it,3)}function Le(ot,it){return a(ot.getUTCMilliseconds(),it,3)}function fe(ot,it){return Le(ot,it)+"000"}function ve(ot,it){return a(ot.getUTCMonth()+1,it,2)}function Me(ot,it){return a(ot.getUTCMinutes(),it,2)}function ke(ot,it){return a(ot.getUTCSeconds(),it,2)}function Ce(ot){var it=ot.getUTCDay();return 0===it?7:it}function Pe(ot,it){return a(g.utcSunday.count(g.utcYear(ot)-1,ot),it,2)}function Fe(ot,it){var Et=ot.getUTCDay();return ot=Et>=4||0===Et?g.utcThursday(ot):g.utcThursday.ceil(ot),a(g.utcThursday.count(g.utcYear(ot),ot)+(4===g.utcYear(ot).getUTCDay()),it,2)}function qe(ot){return ot.getUTCDay()}function rt(ot,it){return a(g.utcMonday.count(g.utcYear(ot)-1,ot),it,2)}function ze(ot,it){return a(ot.getUTCFullYear()%100,it,2)}function He(ot,it){return a(ot.getUTCFullYear()%1e4,it,4)}function Xe(){return"+0000"}function Je(){return"%"}function at(ot){return+ot}function pt(ot){return Math.floor(+ot/1e3)}function xt(ot){return r=i(ot),d.timeFormat=r.format,d.timeParse=r.parse,d.utcFormat=r.utcFormat,d.utcParse=r.utcParse,r}xt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ft=Date.prototype.toISOString?function(ot){return ot.toISOString()}:d.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Dt=+new Date("2000-01-01T00:00:00.000Z")?function(ot){var it=new Date(ot);return isNaN(it)?null:it}:d.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");d.isoFormat=Ft,d.isoParse=Dt,d.timeFormatDefaultLocale=xt,d.timeFormatLocale=i,Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?g(ee,y("d3-time")):g((d=d||self).d3=d.d3||{},d.d3)},{"d3-time":121}],121:[function(y,$,ee){var d;d=this,function(d){"use strict";var g=new Date,_=new Date;function t(ve,Me,ke,Ce){function Pe(Fe){return ve(Fe=0===arguments.length?new Date:new Date(+Fe)),Fe}return Pe.floor=function(Fe){return ve(Fe=new Date(+Fe)),Fe},Pe.ceil=function(Fe){return ve(Fe=new Date(Fe-1)),Me(Fe,1),ve(Fe),Fe},Pe.round=function(Fe){var qe=Pe(Fe),rt=Pe.ceil(Fe);return Fe-qe<rt-Fe?qe:rt},Pe.offset=function(Fe,qe){return Me(Fe=new Date(+Fe),null==qe?1:Math.floor(qe)),Fe},Pe.range=function(Fe,qe,rt){var ze,He=[];if(Fe=Pe.ceil(Fe),rt=null==rt?1:Math.floor(rt),!(Fe<qe&&rt>0))return He;do{He.push(ze=new Date(+Fe)),Me(Fe,rt),ve(Fe)}while(ze<Fe&&Fe<qe);return He},Pe.filter=function(Fe){return t(function(qe){if(qe>=qe)for(;ve(qe),!Fe(qe);)qe.setTime(qe-1)},function(qe,rt){if(qe>=qe)if(rt<0)for(;++rt<=0;)for(;Me(qe,-1),!Fe(qe););else for(;--rt>=0;)for(;Me(qe,1),!Fe(qe););})},ke&&(Pe.count=function(Fe,qe){return g.setTime(+Fe),_.setTime(+qe),ve(g),ve(_),Math.floor(ke(g,_))},Pe.every=function(Fe){return Fe=Math.floor(Fe),isFinite(Fe)&&Fe>0?Fe>1?Pe.filter(Ce?function(qe){return Ce(qe)%Fe==0}:function(qe){return Pe.count(0,qe)%Fe==0}):Pe:null}),Pe}var e=t(function(){},function(ve,Me){ve.setTime(+ve+Me)},function(ve,Me){return Me-ve});e.every=function(ve){return ve=Math.floor(ve),isFinite(ve)&&ve>0?ve>1?t(function(Me){Me.setTime(Math.floor(Me/ve)*ve)},function(Me,ke){Me.setTime(+Me+ke*ve)},function(Me,ke){return(ke-Me)/ve}):e:null};var i=e.range,r=t(function(ve){ve.setTime(ve-ve.getMilliseconds())},function(ve,Me){ve.setTime(+ve+1e3*Me)},function(ve,Me){return(Me-ve)/1e3},function(ve){return ve.getUTCSeconds()}),o=r.range,n=t(function(ve){ve.setTime(ve-ve.getMilliseconds()-1e3*ve.getSeconds())},function(ve,Me){ve.setTime(+ve+6e4*Me)},function(ve,Me){return(Me-ve)/6e4},function(ve){return ve.getMinutes()}),p=n.range,s=t(function(ve){ve.setTime(ve-ve.getMilliseconds()-1e3*ve.getSeconds()-6e4*ve.getMinutes())},function(ve,Me){ve.setTime(+ve+36e5*Me)},function(ve,Me){return(Me-ve)/36e5},function(ve){return ve.getHours()}),a=s.range,c=t(function(ve){ve.setHours(0,0,0,0)},function(ve,Me){ve.setDate(ve.getDate()+Me)},function(ve,Me){return(Me-ve-6e4*(Me.getTimezoneOffset()-ve.getTimezoneOffset()))/864e5},function(ve){return ve.getDate()-1}),u=c.range;function h(ve){return t(function(Me){Me.setDate(Me.getDate()-(Me.getDay()+7-ve)%7),Me.setHours(0,0,0,0)},function(Me,ke){Me.setDate(Me.getDate()+7*ke)},function(Me,ke){return(ke-Me-6e4*(ke.getTimezoneOffset()-Me.getTimezoneOffset()))/6048e5})}var v=h(0),f=h(1),l=h(2),x=h(3),m=h(4),w=h(5),b=h(6),k=v.range,T=f.range,L=l.range,A=x.range,I=m.range,D=w.range,S=b.range,C=t(function(ve){ve.setDate(1),ve.setHours(0,0,0,0)},function(ve,Me){ve.setMonth(ve.getMonth()+Me)},function(ve,Me){return Me.getMonth()-ve.getMonth()+12*(Me.getFullYear()-ve.getFullYear())},function(ve){return ve.getMonth()}),R=C.range,F=t(function(ve){ve.setMonth(0,1),ve.setHours(0,0,0,0)},function(ve,Me){ve.setFullYear(ve.getFullYear()+Me)},function(ve,Me){return Me.getFullYear()-ve.getFullYear()},function(ve){return ve.getFullYear()});F.every=function(ve){return isFinite(ve=Math.floor(ve))&&ve>0?t(function(Me){Me.setFullYear(Math.floor(Me.getFullYear()/ve)*ve),Me.setMonth(0,1),Me.setHours(0,0,0,0)},function(Me,ke){Me.setFullYear(Me.getFullYear()+ke*ve)}):null};var H=F.range,U=t(function(ve){ve.setUTCSeconds(0,0)},function(ve,Me){ve.setTime(+ve+6e4*Me)},function(ve,Me){return(Me-ve)/6e4},function(ve){return ve.getUTCMinutes()}),X=U.range,Z=t(function(ve){ve.setUTCMinutes(0,0,0)},function(ve,Me){ve.setTime(+ve+36e5*Me)},function(ve,Me){return(Me-ve)/36e5},function(ve){return ve.getUTCHours()}),Y=Z.range,W=t(function(ve){ve.setUTCHours(0,0,0,0)},function(ve,Me){ve.setUTCDate(ve.getUTCDate()+Me)},function(ve,Me){return(Me-ve)/864e5},function(ve){return ve.getUTCDate()-1}),te=W.range;function z(ve){return t(function(Me){Me.setUTCDate(Me.getUTCDate()-(Me.getUTCDay()+7-ve)%7),Me.setUTCHours(0,0,0,0)},function(Me,ke){Me.setUTCDate(Me.getUTCDate()+7*ke)},function(Me,ke){return(ke-Me)/6048e5})}var N=z(0),V=z(1),Q=z(2),j=z(3),J=z(4),K=z(5),re=z(6),ie=N.range,ce=V.range,se=Q.range,de=j.range,ue=J.range,ge=K.range,be=re.range,Te=t(function(ve){ve.setUTCDate(1),ve.setUTCHours(0,0,0,0)},function(ve,Me){ve.setUTCMonth(ve.getUTCMonth()+Me)},function(ve,Me){return Me.getUTCMonth()-ve.getUTCMonth()+12*(Me.getUTCFullYear()-ve.getUTCFullYear())},function(ve){return ve.getUTCMonth()}),we=Te.range,Le=t(function(ve){ve.setUTCMonth(0,1),ve.setUTCHours(0,0,0,0)},function(ve,Me){ve.setUTCFullYear(ve.getUTCFullYear()+Me)},function(ve,Me){return Me.getUTCFullYear()-ve.getUTCFullYear()},function(ve){return ve.getUTCFullYear()});Le.every=function(ve){return isFinite(ve=Math.floor(ve))&&ve>0?t(function(Me){Me.setUTCFullYear(Math.floor(Me.getUTCFullYear()/ve)*ve),Me.setUTCMonth(0,1),Me.setUTCHours(0,0,0,0)},function(Me,ke){Me.setUTCFullYear(Me.getUTCFullYear()+ke*ve)}):null};var fe=Le.range;d.timeDay=c,d.timeDays=u,d.timeFriday=w,d.timeFridays=D,d.timeHour=s,d.timeHours=a,d.timeInterval=t,d.timeMillisecond=e,d.timeMilliseconds=i,d.timeMinute=n,d.timeMinutes=p,d.timeMonday=f,d.timeMondays=T,d.timeMonth=C,d.timeMonths=R,d.timeSaturday=b,d.timeSaturdays=S,d.timeSecond=r,d.timeSeconds=o,d.timeSunday=v,d.timeSundays=k,d.timeThursday=m,d.timeThursdays=I,d.timeTuesday=l,d.timeTuesdays=L,d.timeWednesday=x,d.timeWednesdays=A,d.timeWeek=v,d.timeWeeks=k,d.timeYear=F,d.timeYears=H,d.utcDay=W,d.utcDays=te,d.utcFriday=K,d.utcFridays=ge,d.utcHour=Z,d.utcHours=Y,d.utcMillisecond=e,d.utcMilliseconds=i,d.utcMinute=U,d.utcMinutes=X,d.utcMonday=V,d.utcMondays=ce,d.utcMonth=Te,d.utcMonths=we,d.utcSaturday=re,d.utcSaturdays=be,d.utcSecond=r,d.utcSeconds=o,d.utcSunday=N,d.utcSundays=ie,d.utcThursday=J,d.utcThursdays=ue,d.utcTuesday=Q,d.utcTuesdays=se,d.utcWednesday=j,d.utcWednesdays=de,d.utcWeek=N,d.utcWeeks=ie,d.utcYear=Le,d.utcYears=fe,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).d3=d.d3||{})},{}],122:[function(y,$,ee){arguments[4][121][0].apply(ee,arguments)},{dup:121}],123:[function(y,$,ee){var d;d=this,function(d){"use strict";var g,_,t=0,e=0,i=0,r=0,o=0,n=0,p="object"==typeof performance&&performance.now?performance:Date,s="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(m){setTimeout(m,17)};function a(){return o||(s(c),o=p.now()+n)}function c(){o=0}function u(){this._call=this._time=this._next=null}function h(m,w,b){var k=new u;return k.restart(m,w,b),k}function v(){a(),++t;for(var m,w=g;w;)(m=o-w._time)>=0&&w._call.call(null,m),w=w._next;--t}function f(){o=(r=p.now())+n,t=e=0;try{v()}finally{t=0,function(){for(var m,w,b=g,k=1/0;b;)b._call?(k>b._time&&(k=b._time),m=b,b=b._next):(w=b._next,b._next=null,b=m?m._next=w:g=w);_=m,x(k)}(),o=0}}function l(){var m=p.now(),w=m-r;w>1e3&&(n-=w,r=m)}function x(m){t||(e&&(e=clearTimeout(e)),m-o>24?(m<1/0&&(e=setTimeout(f,m-p.now()-n)),i&&(i=clearInterval(i))):(i||(r=p.now(),i=setInterval(l,1e3)),t=1,s(f)))}u.prototype=h.prototype={constructor:u,restart:function(m,w,b){if("function"!=typeof m)throw new TypeError("callback is not a function");b=(null==b?a():+b)+(null==w?0:+w),this._next||_===this||(_?_._next=this:g=this,_=this),this._call=m,this._time=b,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}},d.interval=function(m,w,b){var k=new u,T=w;return null==w?(k.restart(m,w,b),k):(w=+w,b=null==b?a():+b,k.restart(function L(A){A+=T,k.restart(L,T+=w,b),m(A)},w,b),k)},d.now=a,d.timeout=function(m,w,b){var k=new u;return k.restart(function(T){k.stop(),m(T+w)},w=null==w?0:+w,b),k},d.timer=h,d.timerFlush=v,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).d3=d.d3||{})},{}],124:[function(y,$,ee){$.exports=function(){for(var d=0;d<arguments.length;d++)if(void 0!==arguments[d])return arguments[d]}},{}],125:[function(y,$,ee){"use strict";$.exports=_;var d=(_.canvas=document.createElement("canvas")).getContext("2d"),g=t([32,126]);function _(e,i){Array.isArray(e)&&(e=e.join(", "));var r,o={},n=16,p=.05;i&&(2===i.length&&"number"==typeof i[0]?r=t(i):Array.isArray(i)?r=i:(i.o?r=t(i.o):i.pairs&&(r=i.pairs),i.fontSize&&(n=i.fontSize),null!=i.threshold&&(p=i.threshold))),r||(r=g),d.font=n+"px "+e;for(var s=0;s<r.length;s++){var a=r[s],c=d.measureText(a[0]).width+d.measureText(a[1]).width,u=d.measureText(a).width;Math.abs(c-u)>n*p&&(o[a]=(u-c)/n*1e3)}return o}function t(e){for(var i=[],r=e[0];r<=e[1];r++)for(var o=String.fromCharCode(r),n=e[0];n<e[1];n++){var p=o+String.fromCharCode(n);i.push(p)}return i}_.createPairs=t,_.ascii=g},{}],126:[function(y,$,ee){var d=y("abs-svg-path"),g=y("normalize-svg-path"),_={M:"moveTo",C:"bezierCurveTo"};$.exports=function(t,e){t.beginPath(),g(d(e)).forEach(function(i){var r=i[0],o=i.slice(1);t[_[r]].apply(t,o)}),t.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(y,$,ee){$.exports=function(d){switch(d){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(y,$,ee){"use strict";$.exports=function(d,g){switch(void 0===g&&(g=0),typeof d){case"number":if(d>0)return function(_,t){var e,i;for(e=new Array(_),i=0;i<_;++i)e[i]=t;return e}(0|d,g);break;case"object":if("number"==typeof d.length)return function _(t,e,i){var r=0|t[i];if(r<=0)return[];var o,n=new Array(r);if(i===t.length-1)for(o=0;o<r;++o)n[o]=e;else for(o=0;o<r;++o)n[o]=_(t,e,i+1);return n}(d,g,0)}return[]}},{}],129:[function(y,$,ee){"use strict";function d(I,D,S){S=S||2;var C,R,F,H,U,X,Z,Y=D&&D.length,W=Y?D[0]*S:I.length,te=g(I,0,W,S,!0),z=[];if(!te||te.next===te.prev)return z;if(Y&&(te=function(V,Q,j,J){var K,re,se,de=[];for(K=0,re=Q.length;K<re;K++)(se=g(V,Q[K]*J,K<re-1?Q[K+1]*J:V.length,J,!1))===se.next&&(se.steiner=!0),de.push(c(se));for(de.sort(n),K=0;K<de.length;K++)p(de[K],j),j=_(j,j.next);return j}(I,D,te,S)),I.length>80*S){C=F=I[0],R=H=I[1];for(var N=S;N<W;N+=S)(U=I[N])<C&&(C=U),(X=I[N+1])<R&&(R=X),U>F&&(F=U),X>H&&(H=X);Z=0!==(Z=Math.max(F-C,H-R))?1/Z:0}return t(te,z,S,C,R,Z),z}function g(I,D,S,C,R){var F,H;if(R===A(I,D,S,C)>0)for(F=D;F<S;F+=C)H=k(F,I[F],I[F+1],H);else for(F=S-C;F>=D;F-=C)H=k(F,I[F],I[F+1],H);return H&&f(H,H.next)&&(T(H),H=H.next),H}function _(I,D){if(!I)return I;D||(D=I);var S,C=I;do{if(S=!1,C.steiner||!f(C,C.next)&&0!==v(C.prev,C,C.next))C=C.next;else{if(T(C),(C=D=C.prev)===C.next)break;S=!0}}while(S||C!==D);return D}function t(I,D,S,C,R,F,H){if(I){!H&&F&&function(Y,W,te,z){var N=Y;do{null===N.z&&(N.z=a(N.x,N.y,W,te,z)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next}while(N!==Y);N.prevZ.nextZ=null,N.prevZ=null,function(V){var Q,j,J,K,re,ie,ce,se,de=1;do{for(j=V,V=null,re=null,ie=0;j;){for(ie++,J=j,ce=0,Q=0;Q<de&&(ce++,J=J.nextZ);Q++);for(se=de;ce>0||se>0&&J;)0!==ce&&(0===se||!J||j.z<=J.z)?(K=j,j=j.nextZ,ce--):(K=J,J=J.nextZ,se--),re?re.nextZ=K:V=K,K.prevZ=re,re=K;j=J}re.nextZ=null,de*=2}while(ie>1)}(N)}(I,C,R,F);for(var U,X,Z=I;I.prev!==I.next;)if(U=I.prev,X=I.next,F?i(I,C,R,F):e(I))D.push(U.i/S),D.push(I.i/S),D.push(X.i/S),T(I),I=X.next,Z=X.next;else if((I=X)===Z){H?1===H?t(I=r(_(I),D,S),D,S,C,R,F,2):2===H&&o(I,D,S,C,R,F):t(_(I),D,S,C,R,F,1);break}}}function e(I){var D=I.prev,S=I,C=I.next;if(v(D,S,C)>=0)return!1;for(var R=I.next.next;R!==I.prev;){if(u(D.x,D.y,S.x,S.y,C.x,C.y,R.x,R.y)&&v(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function i(I,D,S,C){var R=I.prev,F=I,H=I.next;if(v(R,F,H)>=0)return!1;for(var Z=R.x>F.x?R.x>H.x?R.x:H.x:F.x>H.x?F.x:H.x,Y=R.y>F.y?R.y>H.y?R.y:H.y:F.y>H.y?F.y:H.y,W=a(R.x<F.x?R.x<H.x?R.x:H.x:F.x<H.x?F.x:H.x,R.y<F.y?R.y<H.y?R.y:H.y:F.y<H.y?F.y:H.y,D,S,C),te=a(Z,Y,D,S,C),z=I.prevZ,N=I.nextZ;z&&z.z>=W&&N&&N.z<=te;){if(z!==I.prev&&z!==I.next&&u(R.x,R.y,F.x,F.y,H.x,H.y,z.x,z.y)&&v(z.prev,z,z.next)>=0||(z=z.prevZ,N!==I.prev&&N!==I.next&&u(R.x,R.y,F.x,F.y,H.x,H.y,N.x,N.y)&&v(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;z&&z.z>=W;){if(z!==I.prev&&z!==I.next&&u(R.x,R.y,F.x,F.y,H.x,H.y,z.x,z.y)&&v(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;N&&N.z<=te;){if(N!==I.prev&&N!==I.next&&u(R.x,R.y,F.x,F.y,H.x,H.y,N.x,N.y)&&v(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function r(I,D,S){var C=I;do{var R=C.prev,F=C.next.next;!f(R,F)&&l(R,C,C.next,F)&&w(R,F)&&w(F,R)&&(D.push(R.i/S),D.push(C.i/S),D.push(F.i/S),T(C),T(C.next),C=I=F),C=C.next}while(C!==I);return _(C)}function o(I,D,S,C,R,F){var H=I;do{for(var U=H.next.next;U!==H.prev;){if(H.i!==U.i&&h(H,U)){var X=b(H,U);return H=_(H,H.next),X=_(X,X.next),t(H,D,S,C,R,F),void t(X,D,S,C,R,F)}U=U.next}H=H.next}while(H!==I)}function n(I,D){return I.x-D.x}function p(I,D){if(D=function(C,R){var F,H=R,U=C.x,X=C.y,Z=-1/0;do{if(X<=H.y&&X>=H.next.y&&H.next.y!==H.y){var Y=H.x+(X-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(Y<=U&&Y>Z){if(Z=Y,Y===U){if(X===H.y)return H;if(X===H.next.y)return H.next}F=H.x<H.next.x?H:H.next}}H=H.next}while(H!==R);if(!F)return null;if(U===Z)return F;var W,te=F,z=F.x,N=F.y,V=1/0;H=F;do{U>=H.x&&H.x>=z&&U!==H.x&&u(X<N?U:Z,X,z,N,X<N?Z:U,X,H.x,H.y)&&(W=Math.abs(X-H.y)/(U-H.x),w(H,C)&&(W<V||W===V&&(H.x>F.x||H.x===F.x&&s(F,H)))&&(F=H,V=W)),H=H.next}while(H!==te);return F}(I,D)){var S=b(D,I);_(D,D.next),_(S,S.next)}}function s(I,D){return v(I.prev,I,D.prev)<0&&v(D.next,I,I.next)<0}function a(I,D,S,C,R){return(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-S)*R)|I<<8))|I<<4))|I<<2))|I<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-C)*R)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function c(I){var D=I,S=I;do{(D.x<S.x||D.x===S.x&&D.y<S.y)&&(S=D),D=D.next}while(D!==I);return S}function u(I,D,S,C,R,F,H,U){return(R-H)*(D-U)-(I-H)*(F-U)>=0&&(I-H)*(C-U)-(S-H)*(D-U)>=0&&(S-H)*(F-U)-(R-H)*(C-U)>=0}function h(I,D){return I.next.i!==D.i&&I.prev.i!==D.i&&!function(S,C){var R=S;do{if(R.i!==S.i&&R.next.i!==S.i&&R.i!==C.i&&R.next.i!==C.i&&l(R,R.next,S,C))return!0;R=R.next}while(R!==S);return!1}(I,D)&&(w(I,D)&&w(D,I)&&function(S,C){var R=S,F=!1,H=(S.x+C.x)/2,U=(S.y+C.y)/2;do{R.y>U!=R.next.y>U&&R.next.y!==R.y&&H<(R.next.x-R.x)*(U-R.y)/(R.next.y-R.y)+R.x&&(F=!F),R=R.next}while(R!==S);return F}(I,D)&&(v(I.prev,I,D.prev)||v(I,D.prev,D))||f(I,D)&&v(I.prev,I,I.next)>0&&v(D.prev,D,D.next)>0)}function v(I,D,S){return(D.y-I.y)*(S.x-D.x)-(D.x-I.x)*(S.y-D.y)}function f(I,D){return I.x===D.x&&I.y===D.y}function l(I,D,S,C){var R=m(v(I,D,S)),F=m(v(I,D,C)),H=m(v(S,C,I)),U=m(v(S,C,D));return R!==F&&H!==U||!(0!==R||!x(I,S,D))||!(0!==F||!x(I,C,D))||!(0!==H||!x(S,I,C))||!(0!==U||!x(S,D,C))}function x(I,D,S){return D.x<=Math.max(I.x,S.x)&&D.x>=Math.min(I.x,S.x)&&D.y<=Math.max(I.y,S.y)&&D.y>=Math.min(I.y,S.y)}function m(I){return I>0?1:I<0?-1:0}function w(I,D){return v(I.prev,I,I.next)<0?v(I,D,I.next)>=0&&v(I,I.prev,D)>=0:v(I,D,I.prev)<0||v(I,I.next,D)<0}function b(I,D){var S=new L(I.i,I.x,I.y),C=new L(D.i,D.x,D.y),R=I.next,F=D.prev;return I.next=D,D.prev=I,S.next=R,R.prev=S,C.next=S,S.prev=C,F.next=C,C.prev=F,C}function k(I,D,S,C){var R=new L(I,D,S);return C?(R.next=C.next,R.prev=C,C.next.prev=R,C.next=R):(R.prev=R,R.next=R),R}function T(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function L(I,D,S){this.i=I,this.x=D,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(I,D,S,C){for(var R=0,F=D,H=S-C;F<S;F+=C)R+=(I[H]-I[F])*(I[F+1]+I[H+1]),H=F;return R}$.exports=d,$.exports.default=d,d.deviation=function(I,D,S,C){var R=D&&D.length,H=Math.abs(A(I,0,R?D[0]*S:I.length,S));if(R)for(var U=0,X=D.length;U<X;U++)H-=Math.abs(A(I,D[U]*S,U<X-1?D[U+1]*S:I.length,S));var W=0;for(U=0;U<C.length;U+=3){var te=C[U]*S,z=C[U+1]*S,N=C[U+2]*S;W+=Math.abs((I[te]-I[N])*(I[z+1]-I[te+1])-(I[te]-I[z])*(I[N+1]-I[te+1]))}return 0===H&&0===W?0:Math.abs((W-H)/H)},d.flatten=function(I){for(var D=I[0][0].length,S={vertices:[],holes:[],dimensions:D},C=0,R=0;R<I.length;R++){for(var F=0;F<I[R].length;F++)for(var H=0;H<D;H++)S.vertices.push(I[R][F][H]);R>0&&S.holes.push(C+=I[R-1].length)}return S}},{}],130:[function(y,$,ee){var d=y("strongly-connected-components");$.exports=function(g,_){var t,e=[],i=[],r=[],o={},n=[];function p(l){var x,m,w=!1;for(i.push(l),r[l]=!0,x=0;x<n[l].length;x++)(m=n[l][x])===t?(s(t,i),w=!0):r[m]||(w=p(m));if(w)!function k(T){r[T]=!1,o.hasOwnProperty(T)&&Object.keys(o[T]).forEach(function(L){delete o[T][L],r[L]&&k(L)})}(l);else for(x=0;x<n[l].length;x++){var b=o[m=n[l][x]];b||(o[m]=b={}),b[m]=!0}return i.pop(),w}function s(l,x){var m=[].concat(x).concat(l);_?_(p):e.push(m)}function a(l){!function(L){for(var A=0;A<g.length;A++)A<L&&(g[A]=[]),g[A]=g[A].filter(function(I){return I>=L})}(l);for(var x,m=d(g).components.filter(function(L){return L.length>1}),w=1/0,b=0;b<m.length;b++)for(var k=0;k<m[b].length;k++)m[b][k]<w&&(w=m[b][k],x=b);var T=m[x];return!!T&&{leastVertex:w,adjList:g.map(function(L,A){return-1===T.indexOf(A)?[]:L.filter(function(I){return-1!==T.indexOf(I)})})}}t=0;for(var c=g.length;t<c;){var u=a(t);if(t=u.leastVertex,n=u.adjList){for(var h=0;h<n.length;h++)for(var v=0;v<n[h].length;v++){var f=n[h][v];r[+f]=!1,o[f]={}}p(t),t+=1}else t=c}return _?void 0:e}},{"strongly-connected-components":306}],131:[function(y,$,ee){"use strict";var d=y("../../object/valid-value");$.exports=function(){return d(this).length=0,this}},{"../../object/valid-value":162}],132:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Array.from:y("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(y,$,ee){"use strict";$.exports=function(){var d,g,_=Array.from;return"function"==typeof _&&(g=_(d=["raz","dwa"]),Boolean(g&&g!==d&&"dwa"===g[1]))}},{}],134:[function(y,$,ee){"use strict";var d=y("es6-symbol").iterator,g=y("../../function/is-arguments"),_=y("../../function/is-function"),t=y("../../number/to-pos-integer"),e=y("../../object/valid-callable"),i=y("../../object/valid-value"),r=y("../../object/is-value"),o=y("../../string/is-string"),n=Array.isArray,p=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;$.exports=function(c){var u,h,v,f,l,x,m,w,b,k,T=arguments[1],L=arguments[2];if(c=Object(i(c)),r(T)&&e(T),this&&this!==Array&&_(this))u=this;else{if(!T){if(g(c))return 1!==(l=c.length)?Array.apply(null,c):((f=new Array(1))[0]=c[0],f);if(n(c)){for(f=new Array(l=c.length),h=0;h<l;++h)f[h]=c[h];return f}}f=[]}if(!n(c))if(void 0!==(b=c[d])){for(m=e(b).call(c),u&&(f=new u),w=m.next(),h=0;!w.done;)k=T?p.call(T,L,w.value,h):w.value,u?(s.value=k,a(f,h,s)):f[h]=k,w=m.next(),++h;l=h}else if(o(c)){for(l=c.length,u&&(f=new u),h=0,v=0;h<l;++h)k=c[h],h+1<l&&(x=k.charCodeAt(0))>=55296&&x<=56319&&(k+=c[++h]),k=T?p.call(T,L,k,v):k,u?(s.value=k,a(f,v,s)):f[v]=k,++v;l=v}if(void 0===l)for(l=t(c.length),u&&(f=new u(l)),h=0;h<l;++h)k=T?p.call(T,L,c[h],h):c[h],u?(s.value=k,a(f,h,s)):f[h]=k;return u&&(s.value=null,f.length=l),f}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(y,$,ee){"use strict";var d=Object.prototype.toString,g=d.call(function(){return arguments}());$.exports=function(_){return d.call(_)===g}},{}],136:[function(y,$,ee){"use strict";var d=Object.prototype.toString,g=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(_){return"function"==typeof _&&g(d.call(_))}},{}],137:[function(y,$,ee){"use strict";$.exports=function(){}},{}],138:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Math.sign:y("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(y,$,ee){"use strict";$.exports=function(){var d=Math.sign;return"function"==typeof d&&1===d(10)&&-1===d(-20)}},{}],140:[function(y,$,ee){"use strict";$.exports=function(d){return d=Number(d),isNaN(d)||0===d?d:d>0?1:-1}},{}],141:[function(y,$,ee){"use strict";var d=y("../math/sign"),g=Math.abs,_=Math.floor;$.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?d(t)*_(g(t)):t}},{"../math/sign":138}],142:[function(y,$,ee){"use strict";var d=y("./to-integer"),g=Math.max;$.exports=function(_){return g(0,d(_))}},{"./to-integer":141}],143:[function(y,$,ee){"use strict";var d=y("./valid-callable"),g=y("./valid-value"),_=Function.prototype.bind,t=Function.prototype.call,e=Object.keys,i=Object.prototype.propertyIsEnumerable;$.exports=function(r,o){return function(n,p){var s,a=arguments[2],c=arguments[3];return n=Object(g(n)),d(p),s=e(n),c&&s.sort("function"==typeof c?_.call(c,n):void 0),"function"!=typeof r&&(r=s[r]),t.call(r,s,function(u,h){return i.call(n,u)?t.call(p,a,n[u],u,n,h):o})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Object.assign:y("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(y,$,ee){"use strict";$.exports=function(){var d,g=Object.assign;return"function"==typeof g&&(g(d={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),d.foo+d.bar+d.trzy==="razdwatrzy")}},{}],146:[function(y,$,ee){"use strict";var d=y("../keys"),g=y("../valid-value"),_=Math.max;$.exports=function(t,e){var i,r,o,n=_(arguments.length,2);for(t=Object(g(t)),o=function(p){try{t[p]=e[p]}catch(s){i||(i=s)}},r=1;r<n;++r)d(e=arguments[r]).forEach(o);if(void 0!==i)throw i;return t}},{"../keys":152,"../valid-value":162}],147:[function(y,$,ee){"use strict";var d=y("../array/from"),g=y("./assign"),_=y("./valid-value");$.exports=function(t){var e=Object(_(t)),i=arguments[1],r=Object(arguments[2]);if(e!==t&&!i)return e;var o={};return i?d(i,function(n){(r.ensure||n in t)&&(o[n]=t[n])}):g(o,t),o}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(y,$,ee){"use strict";var d,g,_,t,e=Object.create;y("./set-prototype-of/is-implemented")()||(d=y("./set-prototype-of/shim")),$.exports=d?1!==d.level?e:(g={},_={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){_[i]="__proto__"!==i?t:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(g,_),Object.defineProperty(d,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:g}),function(i,r){return e(null===i?g:i,r)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(y,$,ee){"use strict";$.exports=y("./_iterate")("forEach")},{"./_iterate":143}],150:[function(y,$,ee){"use strict";var d=y("./is-value"),g={function:!0,object:!0};$.exports=function(_){return d(_)&&g[typeof _]||!1}},{"./is-value":151}],151:[function(y,$,ee){"use strict";var d=y("../function/noop")();$.exports=function(g){return g!==d&&null!==g}},{"../function/noop":137}],152:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Object.keys:y("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(y,$,ee){"use strict";$.exports=function(){try{return Object.keys("primitive"),!0}catch(d){return!1}}},{}],154:[function(y,$,ee){"use strict";var d=y("../is-value"),g=Object.keys;$.exports=function(_){return g(d(_)?Object(_):_)}},{"../is-value":151}],155:[function(y,$,ee){"use strict";var d=y("./valid-callable"),g=y("./for-each"),_=Function.prototype.call;$.exports=function(t,e){var i={},r=arguments[2];return d(e),g(t,function(o,n,p,s){i[n]=_.call(e,r,o,n,p,s)}),i}},{"./for-each":149,"./valid-callable":160}],156:[function(y,$,ee){"use strict";var d=y("./is-value"),g=Array.prototype.forEach,_=Object.create,t=function(e,i){var r;for(r in e)i[r]=e[r]};$.exports=function(e){var i=_(null);return g.call(arguments,function(r){d(r)&&t(Object(r),i)}),i}},{"./is-value":151}],157:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Object.setPrototypeOf:y("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(y,$,ee){"use strict";var d=Object.create,g=Object.getPrototypeOf,_={};$.exports=function(){var t=Object.setPrototypeOf;return"function"==typeof t&&g(t((arguments[0]||d)(null),_))===_}},{}],159:[function(y,$,ee){"use strict";var d,r,o,n,g=y("../is-object"),_=y("../valid-value"),t=Object.prototype.isPrototypeOf,e=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};d=function(r,o){if(_(r),null===o||g(o))return r;throw new TypeError("Prototype must be null or an object")},$.exports=(r=function(){var r,o=Object.create(null),n={},p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(p){try{(r=p.set).call(o,n)}catch(s){}if(Object.getPrototypeOf(o)===n)return{set:r,level:2}}return o.__proto__=n,Object.getPrototypeOf(o)===n?{level:2}:((o={}).__proto__=n,Object.getPrototypeOf(o)===n&&{level:1})}())?(2===r.level?r.set?(n=r.set,o=function(p,s){return n.call(d(p,s),s),p}):o=function(p,s){return d(p,s).__proto__=s,p}:o=function p(s,a){var c;return d(s,a),(c=t.call(p.nullPolyfill,s))&&delete p.nullPolyfill.__proto__,null===a&&(a=p.nullPolyfill),s.__proto__=a,c&&e(p.nullPolyfill,"__proto__",i),s},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:r.level})):null,y("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(y,$,ee){"use strict";$.exports=function(d){if("function"!=typeof d)throw new TypeError(d+" is not a function");return d}},{}],161:[function(y,$,ee){"use strict";var d=y("./is-object");$.exports=function(g){if(!d(g))throw new TypeError(g+" is not an Object");return g}},{"./is-object":150}],162:[function(y,$,ee){"use strict";var d=y("./is-value");$.exports=function(g){if(!d(g))throw new TypeError("Cannot use null or undefined");return g}},{"./is-value":151}],163:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?String.prototype.contains:y("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(y,$,ee){"use strict";var d="razdwatrzy";$.exports=function(){return"function"==typeof d.contains&&!0===d.contains("dwa")&&!1===d.contains("foo")}},{}],165:[function(y,$,ee){"use strict";var d=String.prototype.indexOf;$.exports=function(g){return d.call(this,g,arguments[1])>-1}},{}],166:[function(y,$,ee){"use strict";var d=Object.prototype.toString,g=d.call("");$.exports=function(_){return"string"==typeof _||_&&"object"==typeof _&&(_ instanceof String||d.call(_)===g)||!1}},{}],167:[function(y,$,ee){"use strict";var d=Object.create(null),g=Math.random;$.exports=function(){var _;do{_=g().toString(36).slice(2)}while(d[_]);return _}},{}],168:[function(y,$,ee){"use strict";var d,g=y("es5-ext/object/set-prototype-of"),_=y("es5-ext/string/#/contains"),t=y("d"),e=y("es6-symbol"),i=y("./"),r=Object.defineProperty;d=$.exports=function(o,n){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");i.call(this,o),n=n?_.call(n,"key+value")?"key+value":_.call(n,"key")?"key":"value":"value",r(this,"__kind__",t("",n))},g&&g(d,i),delete d.prototype.constructor,d.prototype=Object.create(i.prototype,{_resolve:t(function(o){return"value"===this.__kind__?this.__list__[o]:"key+value"===this.__kind__?[o,this.__list__[o]]:o})}),r(d.prototype,e.toStringTag,t("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(y,$,ee){"use strict";var d=y("es5-ext/function/is-arguments"),g=y("es5-ext/object/valid-callable"),_=y("es5-ext/string/is-string"),t=y("./get"),e=Array.isArray,i=Function.prototype.call,r=Array.prototype.some;$.exports=function(o,n){var p,s,a,c,u,h,v,f,l=arguments[2];if(e(o)||d(o)?p="array":_(o)?p="string":o=t(o),g(n),a=function(){c=!0},"array"!==p)if("string"!==p)for(s=o.next();!s.done;){if(i.call(n,l,s.value,a),c)return;s=o.next()}else for(h=o.length,u=0;u<h&&(v=o[u],u+1<h&&(f=v.charCodeAt(0))>=55296&&f<=56319&&(v+=o[++u]),i.call(n,l,v,a),!c);++u);else r.call(o,function(x){return i.call(n,l,x,a),c})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(y,$,ee){"use strict";var d=y("es5-ext/function/is-arguments"),g=y("es5-ext/string/is-string"),_=y("./array"),t=y("./string"),e=y("./valid-iterable"),i=y("es6-symbol").iterator;$.exports=function(r){return"function"==typeof e(r)[i]?r[i]():d(r)?new _(r):g(r)?new t(r):new _(r)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(y,$,ee){"use strict";var d,g=y("es5-ext/array/#/clear"),_=y("es5-ext/object/assign"),t=y("es5-ext/object/valid-callable"),e=y("es5-ext/object/valid-value"),i=y("d"),r=y("d/auto-bind"),o=y("es6-symbol"),n=Object.defineProperty,p=Object.defineProperties;$.exports=d=function(s,a){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");p(this,{__list__:i("w",e(s)),__context__:i("w",a),__nextIndex__:i("w",0)}),a&&(t(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete d.prototype.constructor,p(d.prototype,_({_next:i(function(){var s;if(this.__list__)return this.__redo__&&void 0!==(s=this.__redo__.shift())?s:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:i(function(){return this._createResult(this._next())}),_createResult:i(function(s){return void 0===s?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:i(function(s){return this.__list__[s]}),_unBind:i(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:i(function(){return"[object "+(this[o.toStringTag]||"Object")+"]"})},r({_onAdd:i(function(s){s>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,c){a>=s&&(this.__redo__[c]=++a)},this),this.__redo__.push(s)):n(this,"__redo__",i("c",[s])))}),_onDelete:i(function(s){var a;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(a=this.__redo__.indexOf(s))&&this.__redo__.splice(a,1),this.__redo__.forEach(function(c,u){c>s&&(this.__redo__[u]=--c)},this)))}),_onClear:i(function(){this.__redo__&&g.call(this.__redo__),this.__nextIndex__=0})}))),n(d.prototype,o.iterator,i(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(y,$,ee){"use strict";var d=y("es5-ext/function/is-arguments"),g=y("es5-ext/object/is-value"),_=y("es5-ext/string/is-string"),t=y("es6-symbol").iterator,e=Array.isArray;$.exports=function(i){return!(!g(i)||!e(i)&&!_(i)&&!d(i)&&"function"!=typeof i[t])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(y,$,ee){"use strict";var d,g=y("es5-ext/object/set-prototype-of"),_=y("d"),t=y("es6-symbol"),e=y("./"),i=Object.defineProperty;d=$.exports=function(r){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");r=String(r),e.call(this,r),i(this,"__length__",_("",r.length))},g&&g(d,e),delete d.prototype.constructor,d.prototype=Object.create(e.prototype,{_next:_(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:_(function(r){var o,n=this.__list__[r];return this.__nextIndex__===this.__length__?n:(o=n.charCodeAt(0))>=55296&&o<=56319?n+this.__list__[this.__nextIndex__++]:n})}),i(d.prototype,t.toStringTag,_("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(y,$,ee){"use strict";var d=y("./is-iterable");$.exports=function(g){if(!d(g))throw new TypeError(g+" is not iterable");return g}},{"./is-iterable":172}],175:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?y("ext/global-this").Symbol:y("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(y,$,ee){"use strict";var d=y("ext/global-this"),g={object:!0,symbol:!0};$.exports=function(){var _,t=d.Symbol;if("function"!=typeof t)return!1;_=t("test symbol");try{String(_)}catch(e){return!1}return!!g[typeof t.iterator]&&!!g[typeof t.toPrimitive]&&!!g[typeof t.toStringTag]}},{"ext/global-this":188}],177:[function(y,$,ee){"use strict";$.exports=function(d){return!!d&&("symbol"==typeof d||!!d.constructor&&"Symbol"===d.constructor.name&&"Symbol"===d[d.constructor.toStringTag])}},{}],178:[function(y,$,ee){"use strict";var d=y("d"),_=Object.defineProperty,t=Object.prototype,e=(0,Object.create)(null);$.exports=function(i){for(var r,o,n=0;e[i+(n||"")];)++n;return e[i+=n||""]=!0,_(t,r="@@"+i,d.gs(null,function(p){o||(o=!0,_(this,r,d(p)),o=!1)})),r}},{d:106}],179:[function(y,$,ee){"use strict";var d=y("d"),g=y("ext/global-this").Symbol;$.exports=function(_){return Object.defineProperties(_,{hasInstance:d("",g&&g.hasInstance||_("hasInstance")),isConcatSpreadable:d("",g&&g.isConcatSpreadable||_("isConcatSpreadable")),iterator:d("",g&&g.iterator||_("iterator")),match:d("",g&&g.match||_("match")),replace:d("",g&&g.replace||_("replace")),search:d("",g&&g.search||_("search")),species:d("",g&&g.species||_("species")),split:d("",g&&g.split||_("split")),toPrimitive:d("",g&&g.toPrimitive||_("toPrimitive")),toStringTag:d("",g&&g.toStringTag||_("toStringTag")),unscopables:d("",g&&g.unscopables||_("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(y,$,ee){"use strict";var d=y("d"),g=y("../../../validate-symbol"),_=Object.create(null);$.exports=function(t){return Object.defineProperties(t,{for:d(function(e){return _[e]?_[e]:_[e]=t(String(e))}),keyFor:d(function(e){var i;for(i in g(e),_)if(_[i]===e)return i})})}},{"../../../validate-symbol":182,d:106}],181:[function(y,$,ee){"use strict";var d,g,_,t=y("d"),e=y("./validate-symbol"),i=y("ext/global-this").Symbol,r=y("./lib/private/generate-name"),o=y("./lib/private/setup/standard-symbols"),n=y("./lib/private/setup/symbol-registry"),p=Object.create,s=Object.defineProperties,a=Object.defineProperty;if("function"==typeof i)try{String(i()),_=!0}catch(c){}else i=null;g=function(c){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return d(c)},$.exports=d=function c(u){var h;if(this instanceof c)throw new TypeError("Symbol is not a constructor");return _?i(u):(h=p(g.prototype),u=void 0===u?"":String(u),s(h,{__description__:t("",u),__name__:t("",r(u))}))},o(d),n(d),s(g.prototype,{constructor:t(d),toString:t("",function(){return this.__name__})}),s(d.prototype,{toString:t(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:t(function(){return e(this)})}),a(d.prototype,d.toPrimitive,t("",function(){var c=e(this);return"symbol"==typeof c?c:c.toString()})),a(d.prototype,d.toStringTag,t("c","Symbol")),a(g.prototype,d.toStringTag,t("c",d.prototype[d.toStringTag])),a(g.prototype,d.toPrimitive,t("c",d.prototype[d.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(y,$,ee){"use strict";var d=y("./is-symbol");$.exports=function(g){if(!d(g))throw new TypeError(g+" is not a symbol");return g}},{"./is-symbol":177}],183:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?WeakMap:y("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(y,$,ee){"use strict";$.exports=function(){var d,g;if("function"!=typeof WeakMap)return!1;try{d=new WeakMap([[g={},"one"],[{},"two"],[{},"three"]])}catch(_){return!1}return"[object WeakMap]"===String(d)&&"function"==typeof d.set&&d.set({},1)===d&&"function"==typeof d.delete&&"function"==typeof d.has&&"one"===d.get(g)}},{}],185:[function(y,$,ee){"use strict";$.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(y,$,ee){"use strict";var d,g=y("es5-ext/object/is-value"),_=y("es5-ext/object/set-prototype-of"),t=y("es5-ext/object/valid-object"),e=y("es5-ext/object/valid-value"),i=y("es5-ext/string/random-uniq"),r=y("d"),o=y("es6-iterator/get"),n=y("es6-iterator/for-of"),p=y("es6-symbol").toStringTag,s=y("./is-native-implemented"),a=Array.isArray,c=Object.defineProperty,u=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;$.exports=d=function(){var v,f=arguments[0];if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return v=s&&_&&WeakMap!==d?_(new WeakMap,h(this)):this,g(f)&&(a(f)||(f=o(f))),c(v,"__weakMapData__",r("c","$weakMap$"+i())),f&&n(f,function(l){e(l),v.set(l[0],l[1])}),v},s&&(_&&_(d,WeakMap),d.prototype=Object.create(WeakMap.prototype,{constructor:r(d)})),Object.defineProperties(d.prototype,{delete:r(function(v){return!!u.call(t(v),this.__weakMapData__)&&(delete v[this.__weakMapData__],!0)}),get:r(function(v){if(u.call(t(v),this.__weakMapData__))return v[this.__weakMapData__]}),has:r(function(v){return u.call(t(v),this.__weakMapData__)}),set:r(function(v,f){return c(t(v),this.__weakMapData__,r("c",f)),this}),toString:r(function(){return"[object WeakMap]"})}),c(d.prototype,p,r("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(y,$,ee){var d=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(g){return d()}try{return __global__||d()}finally{delete Object.prototype.__global__}}()},{}],188:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?globalThis:y("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(y,$,ee){"use strict";$.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(y,$,ee){"use strict";var d=y("is-string-blank");$.exports=function(g){var _=typeof g;if("string"===_){var t=g;if(0==(g=+g)&&d(t))return!1}else if("number"!==_)return!1;return g-g<1}},{"is-string-blank":237}],191:[function(y,$,ee){var d=y("dtype");$.exports=function(g,_,t){if(!g)throw new TypeError("must specify data as first parameter");if(t=0|+(t||0),Array.isArray(g)&&g[0]&&"number"==typeof g[0][0]){var e,i,r,o,n=g[0].length,p=g.length*n;_&&"string"!=typeof _||(_=new(d(_||"float32"))(p+t));var s=_.length-t;if(p!==s)throw new Error("source length "+p+" ("+n+"x"+g.length+") does not match destination length "+s);for(e=0,r=t;e<g.length;e++)for(i=0;i<n;i++)_[r++]=null===g[e][i]?NaN:g[e][i]}else if(_&&"string"!=typeof _)_.set(g,t);else{var a=d(_||"float32");if(Array.isArray(g)||"array"===_)for(e=0,r=t,o=(_=new a(g.length+t)).length;r<o;r++,e++)_[r]=null===g[e]?NaN:g[e];else 0===t?_=new a(g):(_=new a(g.length+t)).set(g,t)}return _}},{dtype:127}],192:[function(y,$,ee){"use strict";var d=y("css-font/stringify"),g=[32,126];$.exports=function(_){var t=(_=_||{}).shape?_.shape:_.canvas?[_.canvas.width,_.canvas.height]:[512,512],e=_.canvas||document.createElement("canvas"),i=_.font,r="number"==typeof _.step?[_.step,_.step]:_.step||[32,32],o=_.chars||g;if(i&&"string"!=typeof i&&(i=d(i)),Array.isArray(o)){if(2===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]){for(var n=[],p=o[0],s=0;p<=o[1];p++)n[s++]=String.fromCharCode(p);o=n}}else o=String(o).split("");t=t.slice(),e.width=t[0],e.height=t[1];var a=e.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,e.width,e.height),a.font=i,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var c=r[0]/2,u=r[1]/2;for(p=0;p<o.length;p++)a.fillText(o[p],c,u),(c+=r[0])>t[0]-r[0]/2&&(c=r[0]/2,u+=r[1]);return e}},{"css-font/stringify":102}],193:[function(y,$,ee){"use strict";function d(e,i){i||(i={}),("string"==typeof e||Array.isArray(e))&&(i.family=e);var r=Array.isArray(i.family)?i.family.join(", "):i.family;if(!r)throw Error("`family` must be defined");var o=i.size||i.fontSize||i.em||48,p=(e=[i.style||i.fontStyle||"",i.weight||i.fontWeight||"",o].join(" ")+"px "+r,i.origin||"top");if(d.cache[r]&&o<=d.cache[r].em)return g(d.cache[r],p);var s=i.canvas||d.canvas,a=s.getContext("2d"),c={upper:void 0!==i.upper?i.upper:"H",lower:void 0!==i.lower?i.lower:"x",descent:void 0!==i.descent?i.descent:"p",ascent:void 0!==i.ascent?i.ascent:"h",tittle:void 0!==i.tittle?i.tittle:"i",overshoot:void 0!==i.overshoot?i.overshoot:"O"},u=Math.ceil(1.5*o);s.height=u,s.width=.5*u,a.font=e;var h={top:0};a.clearRect(0,0,u,u),a.textBaseline="top",a.fillStyle="black",a.fillText("H",0,0);var v=_(a.getImageData(0,0,u,u));a.clearRect(0,0,u,u),a.textBaseline="bottom",a.fillText("H",0,u);var f=_(a.getImageData(0,0,u,u));h.lineHeight=h.bottom=u-f+v,a.clearRect(0,0,u,u),a.textBaseline="alphabetic",a.fillText("H",0,u);var l=u-_(a.getImageData(0,0,u,u))-1+v;h.baseline=h.alphabetic=l,a.clearRect(0,0,u,u),a.textBaseline="middle",a.fillText("H",0,.5*u);var x=_(a.getImageData(0,0,u,u));h.median=h.middle=u-x-1+v-.5*u,a.clearRect(0,0,u,u),a.textBaseline="hanging",a.fillText("H",0,.5*u);var m=_(a.getImageData(0,0,u,u));h.hanging=u-m-1+v-.5*u,a.clearRect(0,0,u,u),a.textBaseline="ideographic",a.fillText("H",0,u);var w=_(a.getImageData(0,0,u,u));if(h.ideographic=u-w-1+v,c.upper&&(a.clearRect(0,0,u,u),a.textBaseline="top",a.fillText(c.upper,0,0),h.upper=_(a.getImageData(0,0,u,u)),h.capHeight=h.baseline-h.upper),c.lower&&(a.clearRect(0,0,u,u),a.textBaseline="top",a.fillText(c.lower,0,0),h.lower=_(a.getImageData(0,0,u,u)),h.xHeight=h.baseline-h.lower),c.tittle&&(a.clearRect(0,0,u,u),a.textBaseline="top",a.fillText(c.tittle,0,0),h.tittle=_(a.getImageData(0,0,u,u))),c.ascent&&(a.clearRect(0,0,u,u),a.textBaseline="top",a.fillText(c.ascent,0,0),h.ascent=_(a.getImageData(0,0,u,u))),c.descent&&(a.clearRect(0,0,u,u),a.textBaseline="top",a.fillText(c.descent,0,0),h.descent=t(a.getImageData(0,0,u,u))),c.overshoot){a.clearRect(0,0,u,u),a.textBaseline="top",a.fillText(c.overshoot,0,0);var b=t(a.getImageData(0,0,u,u));h.overshoot=b-l}for(var k in h)h[k]/=o;return h.em=o,d.cache[r]=h,g(h,p)}function g(e,i){var r={};for(var o in"string"==typeof i&&(i=e[i]),e)"em"!==o&&(r[o]=e[o]-i);return r}function _(e){for(var i=e.height,r=e.data,o=3;o<r.length;o+=4)if(0!==r[o])return Math.floor(.25*(o-3)/i)}function t(e){for(var i=e.height,r=e.data,o=r.length-1;o>0;o-=4)if(0!==r[o])return Math.floor(.25*(o-3)/i)}$.exports=d,d.canvas=document.createElement("canvas"),d.cache={}},{}],194:[function(y,$,ee){$.exports=function(d,g){if("string"!=typeof d)throw new TypeError("must specify type string");if(g=g||{},"undefined"==typeof document&&!g.canvas)return null;var _=g.canvas||document.createElement("canvas");"number"==typeof g.width&&(_.width=g.width),"number"==typeof g.height&&(_.height=g.height);var t,e=g;try{var i=[d];0===d.indexOf("webgl")&&i.push("experimental-"+d);for(var r=0;r<i.length;r++)if(t=_.getContext(i[r],e))return t}catch(o){t=null}return t||null}},{}],195:[function(y,$,ee){$.exports=function(d,g){var _=g[0],t=g[1],e=g[2],i=g[3],r=g[4],o=g[5],n=g[6],p=g[7],s=g[8],a=g[9],c=g[10],u=g[11],h=g[12],v=g[13],f=g[14],l=g[15];return d[0]=o*(c*l-u*f)-a*(n*l-p*f)+v*(n*u-p*c),d[1]=-(t*(c*l-u*f)-a*(e*l-i*f)+v*(e*u-i*c)),d[2]=t*(n*l-p*f)-o*(e*l-i*f)+v*(e*p-i*n),d[3]=-(t*(n*u-p*c)-o*(e*u-i*c)+a*(e*p-i*n)),d[4]=-(r*(c*l-u*f)-s*(n*l-p*f)+h*(n*u-p*c)),d[5]=_*(c*l-u*f)-s*(e*l-i*f)+h*(e*u-i*c),d[6]=-(_*(n*l-p*f)-r*(e*l-i*f)+h*(e*p-i*n)),d[7]=_*(n*u-p*c)-r*(e*u-i*c)+s*(e*p-i*n),d[8]=r*(a*l-u*v)-s*(o*l-p*v)+h*(o*u-p*a),d[9]=-(_*(a*l-u*v)-s*(t*l-i*v)+h*(t*u-i*a)),d[10]=_*(o*l-p*v)-r*(t*l-i*v)+h*(t*p-i*o),d[11]=-(_*(o*u-p*a)-r*(t*u-i*a)+s*(t*p-i*o)),d[12]=-(r*(a*f-c*v)-s*(o*f-n*v)+h*(o*c-n*a)),d[13]=_*(a*f-c*v)-s*(t*f-e*v)+h*(t*c-e*a),d[14]=-(_*(o*f-n*v)-r*(t*f-e*v)+h*(t*n-e*o)),d[15]=_*(o*c-n*a)-r*(t*c-e*a)+s*(t*n-e*o),d}},{}],196:[function(y,$,ee){$.exports=function(d){var g=new Float32Array(16);return g[0]=d[0],g[1]=d[1],g[2]=d[2],g[3]=d[3],g[4]=d[4],g[5]=d[5],g[6]=d[6],g[7]=d[7],g[8]=d[8],g[9]=d[9],g[10]=d[10],g[11]=d[11],g[12]=d[12],g[13]=d[13],g[14]=d[14],g[15]=d[15],g}},{}],197:[function(y,$,ee){$.exports=function(d,g){return d[0]=g[0],d[1]=g[1],d[2]=g[2],d[3]=g[3],d[4]=g[4],d[5]=g[5],d[6]=g[6],d[7]=g[7],d[8]=g[8],d[9]=g[9],d[10]=g[10],d[11]=g[11],d[12]=g[12],d[13]=g[13],d[14]=g[14],d[15]=g[15],d}},{}],198:[function(y,$,ee){$.exports=function(){var d=new Float32Array(16);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}},{}],199:[function(y,$,ee){$.exports=function(d){var g=d[0],_=d[1],t=d[2],e=d[3],i=d[4],r=d[5],o=d[6],n=d[7],p=d[8],s=d[9],a=d[10],c=d[11],u=d[12],h=d[13],v=d[14],f=d[15];return(g*r-_*i)*(a*f-c*v)-(g*o-t*i)*(s*f-c*h)+(g*n-e*i)*(s*v-a*h)+(_*o-t*r)*(p*f-c*u)-(_*n-e*r)*(p*v-a*u)+(t*n-e*o)*(p*h-s*u)}},{}],200:[function(y,$,ee){$.exports=function(d,g){var _=g[0],t=g[1],e=g[2],i=g[3],r=_+_,o=t+t,n=e+e,p=_*r,s=t*r,a=t*o,c=e*r,u=e*o,h=e*n,v=i*r,f=i*o,l=i*n;return d[0]=1-a-h,d[1]=s+l,d[2]=c-f,d[3]=0,d[4]=s-l,d[5]=1-p-h,d[6]=u+v,d[7]=0,d[8]=c+f,d[9]=u-v,d[10]=1-p-a,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}},{}],201:[function(y,$,ee){$.exports=function(d,g,_){var t,e,i,r=_[0],o=_[1],n=_[2],p=Math.sqrt(r*r+o*o+n*n);return Math.abs(p)<1e-6?null:(r*=p=1/p,o*=p,n*=p,t=Math.sin(g),e=Math.cos(g),d[0]=r*r*(i=1-e)+e,d[1]=o*r*i+n*t,d[2]=n*r*i-o*t,d[3]=0,d[4]=r*o*i-n*t,d[5]=o*o*i+e,d[6]=n*o*i+r*t,d[7]=0,d[8]=r*n*i+o*t,d[9]=o*n*i-r*t,d[10]=n*n*i+e,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d)}},{}],202:[function(y,$,ee){$.exports=function(d,g,_){var t=g[0],e=g[1],i=g[2],r=g[3],o=t+t,n=e+e,p=i+i,s=t*o,a=t*n,c=t*p,u=e*n,h=e*p,v=i*p,f=r*o,l=r*n,x=r*p;return d[0]=1-(u+v),d[1]=a+x,d[2]=c-l,d[3]=0,d[4]=a-x,d[5]=1-(s+v),d[6]=h+f,d[7]=0,d[8]=c+l,d[9]=h-f,d[10]=1-(s+u),d[11]=0,d[12]=_[0],d[13]=_[1],d[14]=_[2],d[15]=1,d}},{}],203:[function(y,$,ee){$.exports=function(d,g){return d[0]=g[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=g[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=g[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}},{}],204:[function(y,$,ee){$.exports=function(d,g){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=g[0],d[13]=g[1],d[14]=g[2],d[15]=1,d}},{}],205:[function(y,$,ee){$.exports=function(d,g){var _=Math.sin(g),t=Math.cos(g);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=t,d[6]=_,d[7]=0,d[8]=0,d[9]=-_,d[10]=t,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}},{}],206:[function(y,$,ee){$.exports=function(d,g){var _=Math.sin(g),t=Math.cos(g);return d[0]=t,d[1]=0,d[2]=-_,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=_,d[9]=0,d[10]=t,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}},{}],207:[function(y,$,ee){$.exports=function(d,g){var _=Math.sin(g),t=Math.cos(g);return d[0]=t,d[1]=_,d[2]=0,d[3]=0,d[4]=-_,d[5]=t,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}},{}],208:[function(y,$,ee){$.exports=function(d,g,_,t,e,i,r){var o=1/(_-g),n=1/(e-t),p=1/(i-r);return d[0]=2*i*o,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=2*i*n,d[6]=0,d[7]=0,d[8]=(_+g)*o,d[9]=(e+t)*n,d[10]=(r+i)*p,d[11]=-1,d[12]=0,d[13]=0,d[14]=r*i*2*p,d[15]=0,d}},{}],209:[function(y,$,ee){$.exports=function(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}},{}],210:[function(y,$,ee){$.exports={create:y("./create"),clone:y("./clone"),copy:y("./copy"),identity:y("./identity"),transpose:y("./transpose"),invert:y("./invert"),adjoint:y("./adjoint"),determinant:y("./determinant"),multiply:y("./multiply"),translate:y("./translate"),scale:y("./scale"),rotate:y("./rotate"),rotateX:y("./rotateX"),rotateY:y("./rotateY"),rotateZ:y("./rotateZ"),fromRotation:y("./fromRotation"),fromRotationTranslation:y("./fromRotationTranslation"),fromScaling:y("./fromScaling"),fromTranslation:y("./fromTranslation"),fromXRotation:y("./fromXRotation"),fromYRotation:y("./fromYRotation"),fromZRotation:y("./fromZRotation"),fromQuat:y("./fromQuat"),frustum:y("./frustum"),perspective:y("./perspective"),perspectiveFromFieldOfView:y("./perspectiveFromFieldOfView"),ortho:y("./ortho"),lookAt:y("./lookAt"),str:y("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(y,$,ee){$.exports=function(d,g){var _=g[0],t=g[1],e=g[2],i=g[3],r=g[4],o=g[5],n=g[6],p=g[7],s=g[8],a=g[9],c=g[10],u=g[11],h=g[12],v=g[13],f=g[14],l=g[15],x=_*o-t*r,m=_*n-e*r,w=_*p-i*r,b=t*n-e*o,k=t*p-i*o,T=e*p-i*n,L=s*v-a*h,A=s*f-c*h,I=s*l-u*h,D=a*f-c*v,S=a*l-u*v,C=c*l-u*f,R=x*C-m*S+w*D+b*I-k*A+T*L;return R?(d[0]=(o*C-n*S+p*D)*(R=1/R),d[1]=(e*S-t*C-i*D)*R,d[2]=(v*T-f*k+l*b)*R,d[3]=(c*k-a*T-u*b)*R,d[4]=(n*I-r*C-p*A)*R,d[5]=(_*C-e*I+i*A)*R,d[6]=(f*w-h*T-l*m)*R,d[7]=(s*T-c*w+u*m)*R,d[8]=(r*S-o*I+p*L)*R,d[9]=(t*I-_*S-i*L)*R,d[10]=(h*k-v*w+l*x)*R,d[11]=(a*w-s*k-u*x)*R,d[12]=(o*A-r*D-n*L)*R,d[13]=(_*D-t*A+e*L)*R,d[14]=(v*m-h*b-f*x)*R,d[15]=(s*b-a*m+c*x)*R,d):null}},{}],212:[function(y,$,ee){var d=y("./identity");$.exports=function(g,_,t,e){var i,r,o,n,p,s,a,c,u,h,v=_[0],f=_[1],l=_[2],x=e[0],m=e[1],w=e[2],b=t[0],k=t[1],T=t[2];return Math.abs(v-b)<1e-6&&Math.abs(f-k)<1e-6&&Math.abs(l-T)<1e-6?d(g):(a=v-b,c=f-k,u=l-T,i=m*(u*=h=1/Math.sqrt(a*a+c*c+u*u))-w*(c*=h),r=w*(a*=h)-x*u,o=x*c-m*a,(h=Math.sqrt(i*i+r*r+o*o))?(i*=h=1/h,r*=h,o*=h):(i=0,r=0,o=0),n=c*o-u*r,p=u*i-a*o,s=a*r-c*i,(h=Math.sqrt(n*n+p*p+s*s))?(n*=h=1/h,p*=h,s*=h):(n=0,p=0,s=0),g[0]=i,g[1]=n,g[2]=a,g[3]=0,g[4]=r,g[5]=p,g[6]=c,g[7]=0,g[8]=o,g[9]=s,g[10]=u,g[11]=0,g[12]=-(i*v+r*f+o*l),g[13]=-(n*v+p*f+s*l),g[14]=-(a*v+c*f+u*l),g[15]=1,g)}},{"./identity":209}],213:[function(y,$,ee){$.exports=function(d,g,_){var t=g[0],e=g[1],i=g[2],r=g[3],o=g[4],n=g[5],p=g[6],s=g[7],a=g[8],c=g[9],u=g[10],h=g[11],v=g[12],f=g[13],l=g[14],x=g[15],m=_[0],w=_[1],b=_[2],k=_[3];return d[0]=m*t+w*o+b*a+k*v,d[1]=m*e+w*n+b*c+k*f,d[2]=m*i+w*p+b*u+k*l,d[3]=m*r+w*s+b*h+k*x,d[4]=(m=_[4])*t+(w=_[5])*o+(b=_[6])*a+(k=_[7])*v,d[5]=m*e+w*n+b*c+k*f,d[6]=m*i+w*p+b*u+k*l,d[7]=m*r+w*s+b*h+k*x,d[8]=(m=_[8])*t+(w=_[9])*o+(b=_[10])*a+(k=_[11])*v,d[9]=m*e+w*n+b*c+k*f,d[10]=m*i+w*p+b*u+k*l,d[11]=m*r+w*s+b*h+k*x,d[12]=(m=_[12])*t+(w=_[13])*o+(b=_[14])*a+(k=_[15])*v,d[13]=m*e+w*n+b*c+k*f,d[14]=m*i+w*p+b*u+k*l,d[15]=m*r+w*s+b*h+k*x,d}},{}],214:[function(y,$,ee){$.exports=function(d,g,_,t,e,i,r){var o=1/(g-_),n=1/(t-e),p=1/(i-r);return d[0]=-2*o,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*n,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*p,d[11]=0,d[12]=(g+_)*o,d[13]=(e+t)*n,d[14]=(r+i)*p,d[15]=1,d}},{}],215:[function(y,$,ee){$.exports=function(d,g,_,t,e){var i=1/Math.tan(g/2),r=1/(t-e);return d[0]=i/_,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=i,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=(e+t)*r,d[11]=-1,d[12]=0,d[13]=0,d[14]=2*e*t*r,d[15]=0,d}},{}],216:[function(y,$,ee){$.exports=function(d,g,_,t){var e=Math.tan(g.upDegrees*Math.PI/180),i=Math.tan(g.downDegrees*Math.PI/180),r=Math.tan(g.leftDegrees*Math.PI/180),o=Math.tan(g.rightDegrees*Math.PI/180),n=2/(r+o),p=2/(e+i);return d[0]=n,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=p,d[6]=0,d[7]=0,d[8]=-(r-o)*n*.5,d[9]=(e-i)*p*.5,d[10]=t/(_-t),d[11]=-1,d[12]=0,d[13]=0,d[14]=t*_/(_-t),d[15]=0,d}},{}],217:[function(y,$,ee){$.exports=function(d,g,_,t){var e,i,r,o,n,p,s,a,c,u,h,v,f,l,x,m,w,b,k,T,L,A,I,D,S=t[0],C=t[1],R=t[2],F=Math.sqrt(S*S+C*C+R*R);return Math.abs(F)<1e-6?null:(S*=F=1/F,C*=F,R*=F,e=Math.sin(_),i=Math.cos(_),n=g[1],p=g[2],s=g[3],c=g[5],u=g[6],h=g[7],f=g[9],l=g[10],x=g[11],k=S*C*(r=1-i)-R*e,T=C*C*r+i,L=R*C*r+S*e,A=S*R*r+C*e,I=C*R*r-S*e,D=R*R*r+i,d[0]=(o=g[0])*(m=S*S*r+i)+(a=g[4])*(w=C*S*r+R*e)+(v=g[8])*(b=R*S*r-C*e),d[1]=n*m+c*w+f*b,d[2]=p*m+u*w+l*b,d[3]=s*m+h*w+x*b,d[4]=o*k+a*T+v*L,d[5]=n*k+c*T+f*L,d[6]=p*k+u*T+l*L,d[7]=s*k+h*T+x*L,d[8]=o*A+a*I+v*D,d[9]=n*A+c*I+f*D,d[10]=p*A+u*I+l*D,d[11]=s*A+h*I+x*D,g!==d&&(d[12]=g[12],d[13]=g[13],d[14]=g[14],d[15]=g[15]),d)}},{}],218:[function(y,$,ee){$.exports=function(d,g,_){var t=Math.sin(_),e=Math.cos(_),i=g[4],r=g[5],o=g[6],n=g[7],p=g[8],s=g[9],a=g[10],c=g[11];return g!==d&&(d[0]=g[0],d[1]=g[1],d[2]=g[2],d[3]=g[3],d[12]=g[12],d[13]=g[13],d[14]=g[14],d[15]=g[15]),d[4]=i*e+p*t,d[5]=r*e+s*t,d[6]=o*e+a*t,d[7]=n*e+c*t,d[8]=p*e-i*t,d[9]=s*e-r*t,d[10]=a*e-o*t,d[11]=c*e-n*t,d}},{}],219:[function(y,$,ee){$.exports=function(d,g,_){var t=Math.sin(_),e=Math.cos(_),i=g[0],r=g[1],o=g[2],n=g[3],p=g[8],s=g[9],a=g[10],c=g[11];return g!==d&&(d[4]=g[4],d[5]=g[5],d[6]=g[6],d[7]=g[7],d[12]=g[12],d[13]=g[13],d[14]=g[14],d[15]=g[15]),d[0]=i*e-p*t,d[1]=r*e-s*t,d[2]=o*e-a*t,d[3]=n*e-c*t,d[8]=i*t+p*e,d[9]=r*t+s*e,d[10]=o*t+a*e,d[11]=n*t+c*e,d}},{}],220:[function(y,$,ee){$.exports=function(d,g,_){var t=Math.sin(_),e=Math.cos(_),i=g[0],r=g[1],o=g[2],n=g[3],p=g[4],s=g[5],a=g[6],c=g[7];return g!==d&&(d[8]=g[8],d[9]=g[9],d[10]=g[10],d[11]=g[11],d[12]=g[12],d[13]=g[13],d[14]=g[14],d[15]=g[15]),d[0]=i*e+p*t,d[1]=r*e+s*t,d[2]=o*e+a*t,d[3]=n*e+c*t,d[4]=p*e-i*t,d[5]=s*e-r*t,d[6]=a*e-o*t,d[7]=c*e-n*t,d}},{}],221:[function(y,$,ee){$.exports=function(d,g,_){var t=_[0],e=_[1],i=_[2];return d[0]=g[0]*t,d[1]=g[1]*t,d[2]=g[2]*t,d[3]=g[3]*t,d[4]=g[4]*e,d[5]=g[5]*e,d[6]=g[6]*e,d[7]=g[7]*e,d[8]=g[8]*i,d[9]=g[9]*i,d[10]=g[10]*i,d[11]=g[11]*i,d[12]=g[12],d[13]=g[13],d[14]=g[14],d[15]=g[15],d}},{}],222:[function(y,$,ee){$.exports=function(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}},{}],223:[function(y,$,ee){$.exports=function(d,g,_){var t,e,i,r,o,n,p,s,a,c,u,h,v=_[0],f=_[1],l=_[2];return g===d?(d[12]=g[0]*v+g[4]*f+g[8]*l+g[12],d[13]=g[1]*v+g[5]*f+g[9]*l+g[13],d[14]=g[2]*v+g[6]*f+g[10]*l+g[14],d[15]=g[3]*v+g[7]*f+g[11]*l+g[15]):(e=g[1],i=g[2],r=g[3],o=g[4],n=g[5],p=g[6],s=g[7],a=g[8],c=g[9],u=g[10],h=g[11],d[0]=t=g[0],d[1]=e,d[2]=i,d[3]=r,d[4]=o,d[5]=n,d[6]=p,d[7]=s,d[8]=a,d[9]=c,d[10]=u,d[11]=h,d[12]=t*v+o*f+a*l+g[12],d[13]=e*v+n*f+c*l+g[13],d[14]=i*v+p*f+u*l+g[14],d[15]=r*v+s*f+h*l+g[15]),d}},{}],224:[function(y,$,ee){$.exports=function(d,g){if(d===g){var _=g[1],t=g[2],e=g[3],i=g[6],r=g[7],o=g[11];d[1]=g[4],d[2]=g[8],d[3]=g[12],d[4]=_,d[6]=g[9],d[7]=g[13],d[8]=t,d[9]=i,d[11]=g[14],d[12]=e,d[13]=r,d[14]=o}else d[0]=g[0],d[1]=g[4],d[2]=g[8],d[3]=g[12],d[4]=g[1],d[5]=g[5],d[6]=g[9],d[7]=g[13],d[8]=g[2],d[9]=g[6],d[10]=g[10],d[11]=g[14],d[12]=g[3],d[13]=g[7],d[14]=g[11],d[15]=g[15];return d}},{}],225:[function(y,$,ee){"use strict";var d=y("css-font"),g=y("pick-by-alias"),_=y("regl"),t=y("gl-util/context"),e=y("es6-weak-map"),i=y("color-normalize"),r=y("font-atlas"),o=y("typedarray-pool"),n=y("parse-rect"),p=y("is-plain-obj"),s=y("parse-unit"),a=y("to-px"),c=y("detect-kerning"),u=y("object-assign"),h=y("font-measure"),v=y("flatten-vertex-data"),f=y("bit-twiddle").nextPow2,l=new e,x=!1;if(document.body){var m=document.body.appendChild(document.createElement("div"));m.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(m).fontStretch&&(x=!0),document.body.removeChild(m)}var w=function(b){var k;this.gl="function"==typeof(k=b)&&k._gl&&k.prop&&k.texture&&k.buffer?(b={regl:b}).regl._gl:t(b),this.shader=l.get(this.gl),this.regl=this.shader?this.shader.regl:b.regl||_({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),l.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(p(b)?b:{})};w.prototype.createShader=function(){var b=this.regl,k=b({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:b.prop("count"),offset:b.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:b.this("sizeBuffer")},width:{offset:0,stride:8,buffer:b.this("sizeBuffer")},char:b.this("charBuffer"),position:b.this("position")},uniforms:{atlasSize:function(T,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(T,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(T,L){return L.atlas.texture},charStep:function(T,L){return L.atlas.step},em:function(T,L){return L.atlas.em},color:b.prop("color"),opacity:b.prop("opacity"),viewport:b.this("viewportArray"),scale:b.this("scale"),align:b.prop("align"),baseline:b.prop("baseline"),translate:b.this("translate"),positionOffset:b.prop("positionOffset")},primitive:"points",viewport:b.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:b,draw:k,atlas:{}}},w.prototype.update=function(b){var k=this;if("string"==typeof b)b={text:b};else if(!b)return;null!=(b=g(b,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(b.opacity)?b.opacity.map(function(ve){return parseFloat(ve)}):parseFloat(b.opacity)),null!=b.viewport&&(this.viewport=n(b.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=b.kerning&&(this.kerning=b.kerning),null!=b.offset&&("number"==typeof b.offset&&(b.offset=[b.offset,0]),this.positionOffset=v(b.offset)),b.direction&&(this.direction=b.direction),b.range&&(this.range=b.range,this.scale=[1/(b.range[2]-b.range[0]),1/(b.range[3]-b.range[1])],this.translate=[-b.range[0],-b.range[1]]),b.scale&&(this.scale=b.scale),b.translate&&(this.translate=b.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||b.font||(b.font=w.baseFontSize+"px sans-serif");var T,L=!1,A=!1;if(b.font&&(Array.isArray(b.font)?b.font:[b.font]).forEach(function(ve,Me){if("string"==typeof ve)try{ve=d.parse(ve)}catch(rt){ve=d.parse(w.baseFontSize+"px "+ve)}else ve=d.parse(d.stringify(ve));var ke=d.stringify({size:w.baseFontSize,family:ve.family,stretch:x?ve.stretch:void 0,variant:ve.variant,weight:ve.weight,style:ve.style}),Ce=s(ve.size),Pe=Math.round(Ce[0]*a(Ce[1]));if(Pe!==k.fontSize[Me]&&(A=!0,k.fontSize[Me]=Pe),!(k.font[Me]&&ke==k.font[Me].baseString||(L=!0,k.font[Me]=w.fonts[ke],k.font[Me]))){var Fe=ve.family.join(", "),qe=[ve.style];ve.style!=ve.variant&&qe.push(ve.variant),ve.variant!=ve.weight&&qe.push(ve.weight),x&&ve.weight!=ve.stretch&&qe.push(ve.stretch),k.font[Me]={baseString:ke,family:Fe,weight:ve.weight,stretch:ve.stretch,style:ve.style,variant:ve.variant,width:{},kerning:{},metrics:h(Fe,{origin:"top",fontSize:w.baseFontSize,fontStyle:qe.join(" ")})},w.fonts[ke]=k.font[Me]}}),(L||A)&&this.font.forEach(function(ve,Me){var ke=d.stringify({size:k.fontSize[Me],family:ve.family,stretch:x?ve.stretch:void 0,variant:ve.variant,weight:ve.weight,style:ve.style});k.fontAtlas[Me]=k.shader.atlas[ke],k.fontAtlas[Me]||(k.shader.atlas[ke]=k.fontAtlas[Me]={fontString:ke,step:2*Math.ceil(k.fontSize[Me]*ve.metrics.bottom*.5),em:k.fontSize[Me],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:k.regl.texture()}),null==b.text&&(b.text=k.text)}),"string"==typeof b.text&&b.position&&b.position.length>2){for(var I=Array(.5*b.position.length),D=0;D<I.length;D++)I[D]=b.text;b.text=I}if(null!=b.text||L){if(this.textOffsets=[0],Array.isArray(b.text)){this.count=b.text[0].length,this.counts=[this.count];for(var S=1;S<b.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+b.text[S-1].length,this.count+=b.text[S].length,this.counts.push(b.text[S].length);this.text=b.text.join("")}else this.text=b.text,this.count=this.text.length,this.counts=[this.count];T=[],this.font.forEach(function(ve,Me){w.atlasContext.font=ve.baseString;for(var ke=k.fontAtlas[Me],Ce=0;Ce<k.text.length;Ce++){var Pe=k.text.charAt(Ce);if(null==ke.ids[Pe]&&(ke.ids[Pe]=ke.chars.length,ke.chars.push(Pe),T.push(Pe)),null==ve.width[Pe]&&(ve.width[Pe]=w.atlasContext.measureText(Pe).width/w.baseFontSize,k.kerning)){var Fe=[];for(var qe in ve.width)Fe.push(qe+Pe,Pe+qe);u(ve.kerning,c(ve.family,{pairs:Fe}))}}})}if(b.position)if(b.position.length>2){for(var C=!b.position[0].length,R=o.mallocFloat(2*this.count),F=0,H=0;F<this.counts.length;F++){var U=this.counts[F];if(C)for(var X=0;X<U;X++)R[H++]=b.position[2*F],R[H++]=b.position[2*F+1];else for(var Z=0;Z<U;Z++)R[H++]=b.position[F][0],R[H++]=b.position[F][1]}this.position.call?this.position({type:"float",data:R}):this.position=this.regl.buffer({type:"float",data:R}),o.freeFloat(R)}else this.position.destroy&&this.position.destroy(),this.position={constant:b.position};if(b.text||L){var Y=o.mallocUint8(this.count),W=o.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,z=0;te<this.counts.length;te++){for(var N=this.counts[te],V=this.font[te]||this.font[0],Q=this.fontAtlas[te]||this.fontAtlas[0],j=0;j<N;j++){var J=this.text.charAt(z),K=this.text.charAt(z-1);if(Y[z]=Q.ids[J],W[2*z]=V.width[J],j){var ce=W[2*z-1]+.5*W[2*z-2]+.5*W[2*z];if(this.kerning){var se=V.kerning[K+J];se&&(ce+=.001*se)}W[2*z+1]=ce}else W[2*z+1]=.5*W[2*z];z++}this.textWidth.push(W.length?.5*W[2*z-2]+W[2*z-1]:0)}b.align||(b.align=this.align),this.charBuffer({data:Y,type:"uint8",usage:"stream"}),this.sizeBuffer({data:W,type:"float",usage:"stream"}),o.freeUint8(Y),o.freeFloat(W),T.length&&this.font.forEach(function(ve,Me){var ke=k.fontAtlas[Me],Ce=ke.step,Pe=Math.floor(w.maxAtlasSize/Ce),Fe=Math.min(Pe,ke.chars.length),qe=Math.ceil(ke.chars.length/Fe),rt=f(Fe*Ce),ze=f(qe*Ce);ke.width=rt,ke.height=ze,ke.rows=qe,ke.cols=Fe,ke.em&&ke.texture({data:r({canvas:w.atlasCanvas,font:ke.fontString,chars:ke.chars,shape:[rt,ze],step:[Ce,Ce]})})})}if(b.align&&(this.align=b.align,this.alignOffset=this.textWidth.map(function(ve,Me){var ke=Array.isArray(k.align)?k.align.length>1?k.align[Me]:k.align[0]:k.align;if("number"==typeof ke)return ke;switch(ke){case"right":case"end":return-ve;case"center":case"centre":case"middle":return.5*-ve}return 0})),null==this.baseline&&null==b.baseline&&(b.baseline=0),null!=b.baseline&&(this.baseline=b.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ve,Me){var ke=(k.font[Me]||k.font[0]).metrics,Ce=0;return-1*((Ce+=.5*ke.bottom)+("number"==typeof ve?ve-ke.baseline:-ke[ve]))})),null!=b.color)if(b.color||(b.color="transparent"),"string"!=typeof b.color&&isNaN(b.color)){var de;if("number"==typeof b.color[0]&&b.color.length>this.counts.length){var ue=b.color.length;de=o.mallocUint8(ue);for(var ge=(b.color.subarray||b.color.slice).bind(b.color),be=0;be<ue;be+=4)de.set(i(ge(be,be+4),"uint8"),be)}else{var Te=b.color.length;de=o.mallocUint8(4*Te);for(var we=0;we<Te;we++)de.set(i(b.color[we]||0,"uint8"),4*we)}this.color=de}else this.color=i(b.color,"uint8");if(b.position||b.text||b.color||b.baseline||b.align||b.font||b.offset||b.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Le=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Le);for(var fe=0;fe<this.batch.length;fe++)this.batch[fe]={count:this.counts.length>1?this.counts[fe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[fe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*fe,4*fe+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[fe]:this.opacity,baseline:null!=this.baselineOffset[fe]?this.baselineOffset[fe]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[fe]?this.alignOffset[fe]:this.alignOffset[0]:0,atlas:this.fontAtlas[fe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*fe,2*fe+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={},$.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(y,$,ee){(function(d){(function(){"use strict";var g=y("pick-by-alias");function _(i){if(i.container)if(i.container==document.body)document.body.style.width||(i.canvas.width=i.width||i.pixelRatio*d.innerWidth),document.body.style.height||(i.canvas.height=i.height||i.pixelRatio*d.innerHeight);else{var r=i.container.getBoundingClientRect();i.canvas.width=i.width||r.right-r.left,i.canvas.height=i.height||r.bottom-r.top}}function t(i){return"function"==typeof i.getContext&&"width"in i&&"height"in i}function e(){var i=document.createElement("canvas");return i.style.position="absolute",i.style.top=0,i.style.left=0,i}$.exports=function(i){var r,n;if(i?"string"==typeof i&&(i={container:i}):i={},(i=t(i)||"string"==typeof(r=i).nodeName&&"function"==typeof r.appendChild&&"function"==typeof r.getBoundingClientRect?{container:i}:"function"==typeof(n=i).drawArrays||"function"==typeof n.drawElements?{gl:i}:g(i,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(i.pixelRatio=d.pixelRatio||1),i.gl)return i.gl;if(i.canvas&&(i.container=i.canvas.parentNode),i.container){if("string"==typeof i.container){var o=document.querySelector(i.container);if(!o)throw Error("Element "+i.container+" is not found");i.container=o}t(i.container)?(i.canvas=i.container,i.container=i.canvas.parentNode):i.canvas||(i.canvas=e(),i.container.appendChild(i.canvas),_(i))}else if(!i.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");i.container=document.body||document.documentElement,i.canvas=e(),i.container.appendChild(i.canvas),_(i)}return i.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{i.gl=i.canvas.getContext(n,i.attrs)}catch(p){}return i.gl}),i.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(y,$,ee){$.exports=function(d){"string"==typeof d&&(d=[d]);for(var g=[].slice.call(arguments,1),_=[],t=0;t<d.length-1;t++)_.push(d[t],g[t]||"");return _.push(d[t]),_.join("")}},{}],228:[function(y,$,ee){(function(d){(function(){"use strict";var g,_=y("is-browser");g="function"==typeof d.matchMedia?!d.matchMedia("(hover: none)").matches:_,$.exports=g}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(y,$,ee){"use strict";var d=y("is-browser");$.exports=d&&function(){var g=!1;try{var _=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("test",null,_),window.removeEventListener("test",null,_)}catch(t){g=!1}return g}()},{"is-browser":232}],230:[function(y,$,ee){ee.read=function(d,g,_,t,e){var i,r,o=8*e-t-1,n=(1<<o)-1,p=n>>1,s=-7,a=_?e-1:0,c=_?-1:1,u=d[g+a];for(a+=c,i=u&(1<<-s)-1,u>>=-s,s+=o;s>0;i=256*i+d[g+a],a+=c,s-=8);for(r=i&(1<<-s)-1,i>>=-s,s+=t;s>0;r=256*r+d[g+a],a+=c,s-=8);if(0===i)i=1-p;else{if(i===n)return r?NaN:1/0*(u?-1:1);r+=Math.pow(2,t),i-=p}return(u?-1:1)*r*Math.pow(2,i-t)},ee.write=function(d,g,_,t,e,i){var r,o,n,p=8*i-e-1,s=(1<<p)-1,a=s>>1,c=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,u=t?0:i-1,h=t?1:-1,v=g<0||0===g&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(o=isNaN(g)?1:0,r=s):(r=Math.floor(Math.log(g)/Math.LN2),g*(n=Math.pow(2,-r))<1&&(r--,n*=2),(g+=r+a>=1?c/n:c*Math.pow(2,1-a))*n>=2&&(r++,n/=2),r+a>=s?(o=0,r=s):r+a>=1?(o=(g*n-1)*Math.pow(2,e),r+=a):(o=g*Math.pow(2,a-1)*Math.pow(2,e),r=0));e>=8;d[_+u]=255&o,u+=h,o/=256,e-=8);for(r=r<<e|o,p+=e;p>0;d[_+u]=255&r,u+=h,r/=256,p-=8);d[_+u-h]|=128*v}},{}],231:[function(y,$,ee){$.exports="function"==typeof Object.create?function(d,g){g&&(d.super_=g,d.prototype=Object.create(g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,g){if(g){d.super_=g;var _=function(){};_.prototype=g.prototype,d.prototype=new _,d.prototype.constructor=d}}},{}],232:[function(y,$,ee){$.exports=!0},{}],233:[function(y,$,ee){"use strict";$.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(y,$,ee){"use strict";$.exports=_,$.exports.isMobile=_,$.exports.default=_;var d=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function _(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var i=t.tablet?g.test(e):d.test(e);return!i&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(i=!0),i}},{}],235:[function(y,$,ee){"use strict";$.exports=function(d){var g=typeof d;return null!==d&&("object"===g||"function"===g)}},{}],236:[function(y,$,ee){"use strict";var d=Object.prototype.toString;$.exports=function(g){var _;return"[object Object]"===d.call(g)&&(null===(_=Object.getPrototypeOf(g))||_===Object.getPrototypeOf({}))}},{}],237:[function(y,$,ee){"use strict";$.exports=function(d){for(var g,_=d.length,t=0;t<_;t++)if(((g=d.charCodeAt(t))<9||g>13)&&32!==g&&133!==g&&160!==g&&5760!==g&&6158!==g&&(g<8192||g>8205)&&8232!==g&&8233!==g&&8239!==g&&8287!==g&&8288!==g&&12288!==g&&65279!==g)return!1;return!0}},{}],238:[function(y,$,ee){"use strict";$.exports=function(d){return"string"==typeof d&&(d=d.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(d)&&/[\dz]$/i.test(d)&&d.length>4))}},{}],239:[function(y,$,ee){var d,g;d=this,g=function(){"use strict";var d,g,_;function t(e,i){if(d)if(g){var r="var sharedChunk = {}; ("+d+")(sharedChunk); ("+g+")(sharedChunk);",o={};d(o),(_=i(o)).workerUrl=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"}))}else g=i;else d=i}return t(0,function(e){function i(M,P){return M(P={exports:{}},P.exports),P.exports}var r=o;function o(M,P,G,oe){this.cx=3*M,this.bx=3*(G-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*P,this.by=3*(oe-P)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=oe,this.p2x=G,this.p2y=oe}o.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},o.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},o.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},o.prototype.solveCurveX=function(M,P){var G,oe,pe,xe,Ee;for(void 0===P&&(P=1e-6),pe=M,Ee=0;Ee<8;Ee++){if(xe=this.sampleCurveX(pe)-M,Math.abs(xe)<P)return pe;var Ne=this.sampleCurveDerivativeX(pe);if(Math.abs(Ne)<1e-6)break;pe-=xe/Ne}if((pe=M)<(G=0))return G;if(pe>(oe=1))return oe;for(;G<oe;){if(xe=this.sampleCurveX(pe),Math.abs(xe-M)<P)return pe;M>xe?G=pe:oe=pe,pe=.5*(oe-G)+G}return pe},o.prototype.solve=function(M,P){return this.sampleCurveY(this.solveCurveX(M,P))};var n=p;function p(M,P){this.x=M,this.y=P}function s(M,P,G,oe){var pe=new r(M,P,G,oe);return function(xe){return pe.solve(xe)}}p.prototype={clone:function(){return new p(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,P){return this.clone()._rotateAround(M,P)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var P=M.x-this.x,G=M.y-this.y;return P*P+G*G},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,P){return Math.atan2(this.x*P-this.y*M,this.x*M+this.y*P)},_matMult:function(M){var G=M[2]*this.x+M[3]*this.y;return this.x=M[0]*this.x+M[1]*this.y,this.y=G,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var P=Math.cos(M),G=Math.sin(M),pe=G*this.x+P*this.y;return this.x=P*this.x-G*this.y,this.y=pe,this},_rotateAround:function(M,P){var G=Math.cos(M),oe=Math.sin(M),xe=P.y+oe*(this.x-P.x)+G*(this.y-P.y);return this.x=P.x+G*(this.x-P.x)-oe*(this.y-P.y),this.y=xe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(M){return M instanceof p?M:Array.isArray(M)?new p(M[0],M[1]):M};var a=s(.25,.1,.25,1);function c(M,P,G){return Math.min(G,Math.max(P,M))}function u(M,P,G){var oe=G-P,pe=((M-P)%oe+oe)%oe+P;return pe===P?G:pe}function h(M){for(var P=[],G=arguments.length-1;G-- >0;)P[G]=arguments[G+1];for(var oe=0,pe=P;oe<pe.length;oe+=1){var xe=pe[oe];for(var Ee in xe)M[Ee]=xe[Ee]}return M}var v=1;function f(){return v++}function l(){return function M(P){return P?(P^16*Math.random()>>P/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function x(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function m(M,P){M.forEach(function(G){P[G]&&(P[G]=P[G].bind(P))})}function w(M,P){return-1!==M.indexOf(P,M.length-P.length)}function b(M,P,G){var oe={};for(var pe in M)oe[pe]=P.call(G||this,M[pe],pe,M);return oe}function k(M,P,G){var oe={};for(var pe in M)P.call(G||this,M[pe],pe,M)&&(oe[pe]=M[pe]);return oe}function T(M){return Array.isArray(M)?M.map(T):"object"==typeof M&&M?b(M,T):M}var L={};function A(M){L[M]||("undefined"!=typeof console&&console.warn(M),L[M]=!0)}function I(M,P,G){return(G.y-M.y)*(P.x-M.x)>(P.y-M.y)*(G.x-M.x)}function D(M){for(var P=0,G=0,oe=M.length,pe=oe-1,xe=void 0,Ee=void 0;G<oe;pe=G++)P+=((Ee=M[pe]).x-(xe=M[G]).x)*(xe.y+Ee.y);return P}function S(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function C(M){var P={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(oe,pe,xe,Ee){var Ne=xe||Ee;return P[pe]=!Ne||Ne.toLowerCase(),""}),P["max-age"]){var G=parseInt(P["max-age"],10);isNaN(G)?delete P["max-age"]:P["max-age"]=G}return P}var R=null;function F(M){if(null==R){var P=M.navigator?M.navigator.userAgent:null;R=!!M.safari||!(!P||!(/\b(iPad|iPhone|iPod)\b/.test(P)||P.match("Safari")&&!P.match("Chrome")))}return R}function H(M){try{var P=self[M];return P.setItem("_mapbox_test_",1),P.removeItem("_mapbox_test_"),!0}catch(G){return!1}}var U,X,Z,Y,W=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),te=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,z=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,N={now:W,frame:function(M){var P=te(M);return{cancel:function(){return z(P)}}},getImageData:function(M,P){void 0===P&&(P=0);var G=self.document.createElement("canvas"),oe=G.getContext("2d");if(!oe)throw new Error("failed to create canvas 2d context");return G.width=M.width,G.height=M.height,oe.drawImage(M,0,0,M.width,M.height),oe.getImageData(-P,-P,M.width+2*P,M.height+2*P)},resolveURL:function(M){return U||(U=self.document.createElement("a")),U.href=M,U.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==X&&(X=self.matchMedia("(prefers-reduced-motion: reduce)")),X.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Q={supported:!1,testSupport:function(M){j||!Y||(J?K(M):Z=M)}},j=!1,J=!1;function K(M){var P=M.createTexture();M.bindTexture(M.TEXTURE_2D,P);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,Y),M.isContextLost())return;Q.supported=!0}catch(G){}M.deleteTexture(P),j=!0}self.document&&((Y=self.document.createElement("img")).onload=function(){Z&&K(Z),Z=null,J=!0},Y.onerror=function(){j=!0,Z=null},Y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ie=function(M,P){this._transformRequestFn=M,this._customAccessToken=P,this._createSkuToken()};function ce(M){return 0===M.indexOf("mapbox:")}ie.prototype._createSkuToken=function(){var M=function(){for(var P="",G=0;G<10;G++)P+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,P].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ie.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ie.prototype.transformRequest=function(M,P){return this._transformRequestFn&&this._transformRequestFn(M,P)||{url:M}},ie.prototype.normalizeStyleURL=function(M,P){if(!ce(M))return M;var G=ge(M);return G.path="/styles/v1"+G.path,this._makeAPIURL(G,this._customAccessToken||P)},ie.prototype.normalizeGlyphsURL=function(M,P){if(!ce(M))return M;var G=ge(M);return G.path="/fonts/v1"+G.path,this._makeAPIURL(G,this._customAccessToken||P)},ie.prototype.normalizeSourceURL=function(M,P){if(!ce(M))return M;var G=ge(M);return G.path="/v4/"+G.authority+".json",G.params.push("secure"),this._makeAPIURL(G,this._customAccessToken||P)},ie.prototype.normalizeSpriteURL=function(M,P,G,oe){var pe=ge(M);return ce(M)?(pe.path="/styles/v1"+pe.path+"/sprite"+P+G,this._makeAPIURL(pe,this._customAccessToken||oe)):(pe.path+=""+P+G,be(pe))},ie.prototype.normalizeTileURL=function(M,P){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!ce(M))return M;var G=ge(M);G.path=G.path.replace(/(\.(png|jpg)\d*)(?=$)/,(N.devicePixelRatio>=2||512===P?"@2x":"")+(Q.supported?".webp":"$1")),G.path=G.path.replace(/^.+\/v4\//,"/"),G.path="/v4"+G.path;var xe=this._customAccessToken||function(Ee){for(var Ne=0,tt=Ee;Ne<tt.length;Ne+=1){var dt=tt[Ne].match(/^access_token=(.*)$/);if(dt)return dt[1]}return null}(G.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&xe&&this._skuToken&&G.params.push("sku="+this._skuToken),this._makeAPIURL(G,xe)},ie.prototype.canonicalizeTileURL=function(M,P){var G=ge(M);if(!G.path.match(/(^\/v4\/)/)||!G.path.match(/\.[\w]+$/))return M;var oe="mapbox://tiles/";oe+=G.path.replace("/v4/","");var pe=G.params;return P&&(pe=pe.filter(function(xe){return!xe.match(/^access_token=/)})),pe.length&&(oe+="?"+pe.join("&")),oe},ie.prototype.canonicalizeTileset=function(M,P){for(var G=!!P&&ce(P),oe=[],pe=0,xe=M.tiles||[];pe<xe.length;pe+=1){var Ee=xe[pe];de(Ee)?oe.push(this.canonicalizeTileURL(Ee,G)):oe.push(Ee)}return oe},ie.prototype._makeAPIURL=function(M,P){var G="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",oe=ge(V.API_URL);if(M.protocol=oe.protocol,M.authority=oe.authority,"/"!==oe.path&&(M.path=""+oe.path+M.path),!V.REQUIRE_ACCESS_TOKEN)return be(M);if(!(P=P||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+G);if("s"===P[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+G);return M.params=M.params.filter(function(pe){return-1===pe.indexOf("access_token")}),M.params.push("access_token="+P),be(M)};var se=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function de(M){return se.test(M)}var ue=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ge(M){var P=M.match(ue);if(!P)throw new Error("Unable to parse URL object");return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}function be(M){var P=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+P}function Te(M){if(!M)return null;var G=M.split(".");if(!G||3!==G.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(G[1]).split("").map(function(oe){return"%"+("00"+oe.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(oe){return null}}var we=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};we.prototype.getStorageKey=function(M){var oe,G=Te(V.ACCESS_TOKEN);return oe=G&&G.u?self.btoa(encodeURIComponent(G.u).replace(/%([0-9A-F]{2})/g,function(pe,xe){return String.fromCharCode(Number("0x"+xe))})):V.ACCESS_TOKEN||"",M?"mapbox.eventData."+M+":"+oe:"mapbox.eventData:"+oe},we.prototype.fetchEventData=function(){var M=H("localStorage"),P=this.getStorageKey(),G=this.getStorageKey("uuid");if(M)try{var oe=self.localStorage.getItem(P);oe&&(this.eventData=JSON.parse(oe));var pe=self.localStorage.getItem(G);pe&&(this.anonId=pe)}catch(xe){A("Unable to read from LocalStorage")}},we.prototype.saveEventData=function(){var M=H("localStorage"),P=this.getStorageKey(),G=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(G,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(P,JSON.stringify(this.eventData))}catch(oe){A("Unable to write to LocalStorage")}},we.prototype.processRequests=function(M){},we.prototype.postEvent=function(M,P,G,oe){var pe=this;if(V.EVENTS_URL){var xe=ge(V.EVENTS_URL);xe.params.push("access_token="+(oe||V.ACCESS_TOKEN||""));var Ee={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:re,userId:this.anonId},Ne=P?h(Ee,P):Ee,tt={url:be(xe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ne])};this.pendingRequest=Xt(tt,function(dt){pe.pendingRequest=null,G(dt),pe.saveEventData(),pe.processRequests(oe)})}},we.prototype.queueRequest=function(M,P){this.queue.push(M),this.processRequests(P)};var Le,fe,ve=function(M){function P(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.postMapLoadEvent=function(G,oe,pe,xe){this.skuToken=pe,(V.EVENTS_URL&&xe||V.ACCESS_TOKEN&&Array.isArray(G)&&G.some(function(Ee){return ce(Ee)||de(Ee)}))&&this.queueRequest({id:oe,timestamp:Date.now()},xe)},P.prototype.processRequests=function(G){var oe=this;if(!this.pendingRequest&&0!==this.queue.length){var pe=this.queue.shift(),xe=pe.id,Ee=pe.timestamp;xe&&this.success[xe]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=l()),this.postEvent(Ee,{skuToken:this.skuToken},function(Ne){Ne||xe&&(oe.success[xe]=!0)},G))}},P}(we),Me=new(function(M){function P(G){M.call(this,"appUserTurnstile"),this._customAccessToken=G}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.postTurnstileEvent=function(G,oe){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(G)&&G.some(function(pe){return ce(pe)||de(pe)})&&this.queueRequest(Date.now(),oe)},P.prototype.processRequests=function(G){var oe=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var pe=Te(V.ACCESS_TOKEN),xe=pe?pe.u:V.ACCESS_TOKEN,Ee=xe!==this.eventData.tokenU;x(this.anonId)||(this.anonId=l(),Ee=!0);var Ne=this.queue.shift();if(this.eventData.lastSuccess){var tt=new Date(this.eventData.lastSuccess),dt=new Date(Ne),wt=(Ne-this.eventData.lastSuccess)/864e5;Ee=Ee||wt>=1||wt<-1||tt.getDate()!==dt.getDate()}else Ee=!0;if(!Ee)return this.processRequests();this.postEvent(Ne,{"enabled.telemetry":!1},function(qt){qt||(oe.eventData.lastSuccess=Ne,oe.eventData.tokenU=xe)},G)}},P}(we)),ke=Me.postTurnstileEvent.bind(Me),Ce=new ve,Pe=Ce.postMapLoadEvent.bind(Ce),Fe=500,qe=50;function rt(){self.caches&&!Le&&(Le=self.caches.open("mapbox-tiles"))}function He(M){var P=M.indexOf("?");return P<0?M:M.slice(0,P)}var Je,at=1/0;function pt(){return null==Je&&(Je=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Je}var xt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xt);var Ft=function(M){function P(G,oe,pe){401===oe&&de(pe)&&(G+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,G),this.status=oe,this.url=pe,this.name=this.constructor.name,this.message=G}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},P}(Error),Dt=S()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ot(M,P){var G,oe=new self.AbortController,pe=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:Dt(),signal:oe.signal}),xe=!1,Ee=!1,Ne=(G=pe.url).indexOf("sku=")>0&&de(G);"json"===M.type&&pe.headers.set("Accept","application/json");var tt=function(wt,qt,tr){if(!Ee){if(wt&&"SecurityError"!==wt.message&&A(wt),qt&&tr)return dt(qt);var Kt=Date.now();self.fetch(pe).then(function(ur){if(ur.ok){var wr=Ne?ur.clone():null;return dt(ur,wr,Kt)}return P(new Ft(ur.statusText,ur.status,M.url))}).catch(function(ur){20!==ur.code&&P(new Error(ur.message))})}},dt=function(wt,qt,tr){("arrayBuffer"===M.type?wt.arrayBuffer():"json"===M.type?wt.json():wt.text()).then(function(Kt){Ee||(qt&&tr&&function(M,P,G){if(rt(),Le){var oe={status:P.status,statusText:P.statusText,headers:new self.Headers};P.headers.forEach(function(xe,Ee){return oe.headers.set(Ee,xe)});var pe=C(P.headers.get("Cache-Control")||"");pe["no-store"]||(pe["max-age"]&&oe.headers.set("Expires",new Date(G+1e3*pe["max-age"]).toUTCString()),new Date(oe.headers.get("Expires")).getTime()-G<42e4||function(xe,Ee){if(void 0===fe)try{new Response(new ReadableStream),fe=!0}catch(Ne){fe=!1}fe?Ee(xe.body):xe.blob().then(Ee)}(P,function(xe){var Ee=new self.Response(xe,oe);rt(),Le&&Le.then(function(Ne){return Ne.put(He(M.url),Ee)}).catch(function(Ne){return A(Ne.message)})}))}}(pe,qt,tr),xe=!0,P(null,Kt,wt.headers.get("Cache-Control"),wt.headers.get("Expires")))}).catch(function(Kt){Ee||P(new Error(Kt.message))})};return Ne?function(M,P){if(rt(),!Le)return P(null);var G=He(M.url);Le.then(function(oe){oe.match(G).then(function(pe){var xe=function(Ee){if(!Ee)return!1;var Ne=new Date(Ee.headers.get("Expires")||0),tt=C(Ee.headers.get("Cache-Control")||"");return Ne>Date.now()&&!tt["no-cache"]}(pe);oe.delete(G),xe&&oe.put(G,pe.clone()),P(null,pe,xe)}).catch(P)}).catch(P)}(pe,tt):tt(null,null),{cancel:function(){Ee=!0,xe||oe.abort()}}}var nr,Ue,it=function(M,P){if(!(/^file:/.test(G=M.url)||/^file:/.test(Dt())&&!/^\w+:/.test(G))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ot(M,P);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,P,void 0,!0)}var G;return function(oe,pe){var xe=new self.XMLHttpRequest;for(var Ee in xe.open(oe.method||"GET",oe.url,!0),"arrayBuffer"===oe.type&&(xe.responseType="arraybuffer"),oe.headers)xe.setRequestHeader(Ee,oe.headers[Ee]);return"json"===oe.type&&(xe.responseType="text",xe.setRequestHeader("Accept","application/json")),xe.withCredentials="include"===oe.credentials,xe.onerror=function(){pe(new Error(xe.statusText))},xe.onload=function(){if((xe.status>=200&&xe.status<300||0===xe.status)&&null!==xe.response){var Ne=xe.response;if("json"===oe.type)try{Ne=JSON.parse(xe.response)}catch(tt){return pe(tt)}pe(null,Ne,xe.getResponseHeader("Cache-Control"),xe.getResponseHeader("Expires"))}else pe(new Ft(xe.statusText,xe.status,oe.url))},xe.send(oe.body),{cancel:function(){return xe.abort()}}}(M,P)},Et=function(M,P){return it(h(M,{type:"arrayBuffer"}),P)},Xt=function(M,P){return it(h(M,{method:"POST"}),P)};nr=[],Ue=0;var We=function(M,P){if(Q.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ue>=V.MAX_PARALLEL_IMAGE_REQUESTS){var G={requestParameters:M,callback:P,cancelled:!1,cancel:function(){this.cancelled=!0}};return nr.push(G),G}Ue++;var oe=!1,pe=function(){if(!oe)for(oe=!0,Ue--;nr.length&&Ue<V.MAX_PARALLEL_IMAGE_REQUESTS;){var Ee=nr.shift();Ee.cancelled||(Ee.cancel=We(Ee.requestParameters,Ee.callback).cancel)}},xe=Et(M,function(Ee,Ne,tt,dt){var qt,tr;pe(),Ee?P(Ee):Ne&&(pt()?(qt=P,tr=new self.Blob([new Uint8Array(Ne)],{type:"image/png"}),self.createImageBitmap(tr).then(function(Kt){qt(null,Kt)}).catch(function(Kt){qt(new Error("Could not load image because of "+Kt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(wt,qt,tr,Kt){var ur=new self.Image,wr=self.URL;ur.onload=function(){qt(null,ur),wr.revokeObjectURL(ur.src)},ur.onerror=function(){return qt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Fr=new self.Blob([new Uint8Array(wt)],{type:"image/png"});ur.cacheControl=tr,ur.expires=Kt,ur.src=wt.byteLength?wr.createObjectURL(Fr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ne,P,tt,dt))});return{cancel:function(){xe.cancel(),pe()}}};function Be(M,P,G){G[M]&&-1!==G[M].indexOf(P)||(G[M]=G[M]||[],G[M].push(P))}function Qe(M,P,G){if(G&&G[M]){var oe=G[M].indexOf(P);-1!==oe&&G[M].splice(oe,1)}}var Ae=function(M,P){void 0===P&&(P={}),h(this,P),this.type=M},De=function(M){function P(G,oe){void 0===oe&&(oe={}),M.call(this,"error",h({error:G},oe))}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P}(Ae),Oe=function(){};Oe.prototype.on=function(M,P){return this._listeners=this._listeners||{},Be(M,P,this._listeners),this},Oe.prototype.off=function(M,P){return Qe(M,P,this._listeners),Qe(M,P,this._oneTimeListeners),this},Oe.prototype.once=function(M,P){return this._oneTimeListeners=this._oneTimeListeners||{},Be(M,P,this._oneTimeListeners),this},Oe.prototype.fire=function(M,P){"string"==typeof M&&(M=new Ae(M,P||{}));var G=M.type;if(this.listens(G)){M.target=this;for(var oe=0,pe=this._listeners&&this._listeners[G]?this._listeners[G].slice():[];oe<pe.length;oe+=1)pe[oe].call(this,M);for(var xe=0,Ee=this._oneTimeListeners&&this._oneTimeListeners[G]?this._oneTimeListeners[G].slice():[];xe<Ee.length;xe+=1){var Ne=Ee[xe];Qe(G,Ne,this._oneTimeListeners),Ne.call(this,M)}var tt=this._eventedParent;tt&&(h(M,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),tt.fire(M))}else M instanceof De&&console.error(M.error);return this},Oe.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},Oe.prototype.setEventedParent=function(M,P){return this._eventedParent=M,this._eventedParentData=P,this};var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},et=function(M,P,G,oe){this.message=(M?M+": ":"")+G,oe&&(this.identifier=oe),null!=P&&P.__line__&&(this.line=P.__line__)};function ct(M){var G=M.value;return G?[new et(M.key,G,"constants have been deprecated as of v8")]:[]}function vt(M){for(var P=[],G=arguments.length-1;G-- >0;)P[G]=arguments[G+1];for(var oe=0,pe=P;oe<pe.length;oe+=1){var xe=pe[oe];for(var Ee in xe)M[Ee]=xe[Ee]}return M}function ft(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function It(M){if(Array.isArray(M))return M.map(It);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var P={};for(var G in M)P[G]=It(M[G]);return P}return ft(M)}var ut=function(M){function P(G,oe){M.call(this,oe),this.message=oe,this.key=G}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P}(Error),Ot=function(M,P){void 0===P&&(P=[]),this.parent=M,this.bindings={};for(var G=0,oe=P;G<oe.length;G+=1){var pe=oe[G];this.bindings[pe[0]]=pe[1]}};Ot.prototype.concat=function(M){return new Ot(this,M)},Ot.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},Ot.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Rt={kind:"null"},$e={kind:"number"},yt={kind:"string"},Bt={kind:"boolean"},Ut={kind:"color"},Qt={kind:"object"},Re={kind:"value"},ht={kind:"collator"},Mt={kind:"formatted"},Nt={kind:"resolvedImage"};function Zt(M,P){return{kind:"array",itemType:M,N:P}}function or(M){if("array"===M.kind){var P=or(M.itemType);return"number"==typeof M.N?"array<"+P+", "+M.N+">":"value"===M.itemType.kind?"array":"array<"+P+">"}return M.kind}var Wt=[Rt,$e,yt,Bt,Ut,Mt,Qt,Zt(Re),Nt];function er(M,P){if("error"===P.kind)return null;if("array"===M.kind){if("array"===P.kind&&(0===P.N&&"value"===P.itemType.kind||!er(M.itemType,P.itemType))&&("number"!=typeof M.N||M.N===P.N))return null}else{if(M.kind===P.kind)return null;if("value"===M.kind)for(var G=0,oe=Wt;G<oe.length;G+=1)if(!er(oe[G],P))return null}return"Expected "+or(M)+" but found "+or(P)+" instead."}function cr(M,P){return P.some(function(G){return G.kind===M.kind})}function _r(M,P){return P.some(function(G){return"null"===G?null===M:"array"===G?Array.isArray(M):"object"===G?M&&!Array.isArray(M)&&"object"==typeof M:G===typeof M})}var xr=i(function(M,P){var G={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function oe(tt){return(tt=Math.round(tt))<0?0:tt>255?255:tt}function xe(tt){return oe("%"===tt[tt.length-1]?parseFloat(tt)/100*255:parseInt(tt))}function Ee(tt){return function(tt){return tt<0?0:tt>1?1:tt}("%"===tt[tt.length-1]?parseFloat(tt)/100:parseFloat(tt))}function Ne(tt,dt,wt){return wt<0?wt+=1:wt>1&&(wt-=1),6*wt<1?tt+(dt-tt)*wt*6:2*wt<1?dt:3*wt<2?tt+(dt-tt)*(2/3-wt)*6:tt}try{P.parseCSSColor=function(tt){var dt,wt=tt.replace(/ /g,"").toLowerCase();if(wt in G)return G[wt].slice();if("#"===wt[0])return 4===wt.length?(dt=parseInt(wt.substr(1),16))>=0&&dt<=4095?[(3840&dt)>>4|(3840&dt)>>8,240&dt|(240&dt)>>4,15&dt|(15&dt)<<4,1]:null:7===wt.length&&(dt=parseInt(wt.substr(1),16))>=0&&dt<=16777215?[(16711680&dt)>>16,(65280&dt)>>8,255&dt,1]:null;var qt=wt.indexOf("("),tr=wt.indexOf(")");if(-1!==qt&&tr+1===wt.length){var Kt=wt.substr(0,qt),ur=wt.substr(qt+1,tr-(qt+1)).split(","),wr=1;switch(Kt){case"rgba":if(4!==ur.length)return null;wr=Ee(ur.pop());case"rgb":return 3!==ur.length?null:[xe(ur[0]),xe(ur[1]),xe(ur[2]),wr];case"hsla":if(4!==ur.length)return null;wr=Ee(ur.pop());case"hsl":if(3!==ur.length)return null;var Fr=(parseFloat(ur[0])%360+360)%360/360,Rr=Ee(ur[1]),Yr=Ee(ur[2]),Gr=Yr<=.5?Yr*(Rr+1):Yr+Rr-Yr*Rr,en=2*Yr-Gr;return[oe(255*Ne(en,Gr,Fr+1/3)),oe(255*Ne(en,Gr,Fr)),oe(255*Ne(en,Gr,Fr-1/3)),wr];default:return null}}return null}}catch(tt){}}).parseCSSColor,dr=function(M,P,G,oe){void 0===oe&&(oe=1),this.r=M,this.g=P,this.b=G,this.a=oe};dr.parse=function(M){if(M){if(M instanceof dr)return M;if("string"==typeof M){var P=xr(M);if(P)return new dr(P[0]/255*P[3],P[1]/255*P[3],P[2]/255*P[3],P[3])}}},dr.prototype.toString=function(){var M=this.toArray(),G=M[1],oe=M[2],pe=M[3];return"rgba("+Math.round(M[0])+","+Math.round(G)+","+Math.round(oe)+","+pe+")"},dr.prototype.toArray=function(){var oe=this.a;return 0===oe?[0,0,0,0]:[255*this.r/oe,255*this.g/oe,255*this.b/oe,oe]},dr.black=new dr(0,0,0,1),dr.white=new dr(1,1,1,1),dr.transparent=new dr(0,0,0,0),dr.red=new dr(1,0,0,1);var pr=function(M,P,G){this.sensitivity=M?P?"variant":"case":P?"accent":"base",this.locale=G,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};pr.prototype.compare=function(M,P){return this.collator.compare(M,P)},pr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var br=function(M,P,G,oe,pe){this.text=M,this.image=P,this.scale=G,this.fontStack=oe,this.textColor=pe},Nr=function(M){this.sections=M};Nr.fromString=function(M){return new Nr([new br(M,null,null,null,null)])},Nr.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(M){return 0!==M.text.length||M.image&&0!==M.image.name.length})},Nr.factory=function(M){return M instanceof Nr?M:Nr.fromString(M)},Nr.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(M){return M.text}).join("")},Nr.prototype.serialize=function(){for(var M=["format"],P=0,G=this.sections;P<G.length;P+=1){var oe=G[P];if(oe.image)M.push(["image",oe.image.name]);else{M.push(oe.text);var pe={};oe.fontStack&&(pe["text-font"]=["literal",oe.fontStack.split(",")]),oe.scale&&(pe["font-scale"]=oe.scale),oe.textColor&&(pe["text-color"]=["rgba"].concat(oe.textColor.toArray())),M.push(pe)}}return M};var kr=function(M){this.name=M.name,this.available=M.available};function Hr(M,P,G,oe){return"number"==typeof M&&M>=0&&M<=255&&"number"==typeof P&&P>=0&&P<=255&&"number"==typeof G&&G>=0&&G<=255?void 0===oe||"number"==typeof oe&&oe>=0&&oe<=1?null:"Invalid rgba value ["+[M,P,G,oe].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof oe?[M,P,G,oe]:[M,P,G]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function an(M){if(null===M||"string"==typeof M||"boolean"==typeof M||"number"==typeof M||M instanceof dr||M instanceof pr||M instanceof Nr||M instanceof kr)return!0;if(Array.isArray(M)){for(var P=0,G=M;P<G.length;P+=1)if(!an(G[P]))return!1;return!0}if("object"==typeof M){for(var oe in M)if(!an(M[oe]))return!1;return!0}return!1}function fn(M){if(null===M)return Rt;if("string"==typeof M)return yt;if("boolean"==typeof M)return Bt;if("number"==typeof M)return $e;if(M instanceof dr)return Ut;if(M instanceof pr)return ht;if(M instanceof Nr)return Mt;if(M instanceof kr)return Nt;if(Array.isArray(M)){for(var P,G=M.length,oe=0,pe=M;oe<pe.length;oe+=1){var xe=fn(pe[oe]);if(P){if(P===xe)continue;P=Re;break}P=xe}return Zt(P||Re,G)}return Qt}function zn(M){var P=typeof M;return null===M?"":"string"===P||"number"===P||"boolean"===P?String(M):M instanceof dr||M instanceof Nr||M instanceof kr?M.toString():JSON.stringify(M)}kr.prototype.toString=function(){return this.name},kr.fromString=function(M){return M?new kr({name:M,available:!1}):null},kr.prototype.serialize=function(){return["image",this.name]};var Nn=function(M,P){this.type=M,this.value=P};Nn.parse=function(M,P){if(2!==M.length)return P.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!an(M[1]))return P.error("invalid value");var G=M[1],oe=fn(G),pe=P.expectedType;return"array"!==oe.kind||0!==oe.N||!pe||"array"!==pe.kind||"number"==typeof pe.N&&0!==pe.N||(oe=pe),new Nn(oe,G)},Nn.prototype.evaluate=function(){return this.value},Nn.prototype.eachChild=function(){},Nn.prototype.outputDefined=function(){return!0},Nn.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof dr?["rgba"].concat(this.value.toArray()):this.value instanceof Nr?this.value.serialize():this.value};var In=function(M){this.name="ExpressionEvaluationError",this.message=M};In.prototype.toJSON=function(){return this.message};var cn={string:yt,number:$e,boolean:Bt,object:Qt},jr=function(M,P){this.type=M,this.args=P};jr.parse=function(M,P){if(M.length<2)return P.error("Expected at least one argument.");var G,oe=1,pe=M[0];if("array"===pe){var xe,Ee;if(M.length>2){var Ne=M[1];if("string"!=typeof Ne||!(Ne in cn)||"object"===Ne)return P.error('The item type argument of "array" must be one of string, number, boolean',1);xe=cn[Ne],oe++}else xe=Re;if(M.length>3){if(null!==M[2]&&("number"!=typeof M[2]||M[2]<0||M[2]!==Math.floor(M[2])))return P.error('The length argument to "array" must be a positive integer literal',2);Ee=M[2],oe++}G=Zt(xe,Ee)}else G=cn[pe];for(var tt=[];oe<M.length;oe++){var dt=P.parse(M[oe],oe,Re);if(!dt)return null;tt.push(dt)}return new jr(G,tt)},jr.prototype.evaluate=function(M){for(var P=0;P<this.args.length;P++){var G=this.args[P].evaluate(M);if(!er(this.type,fn(G)))return G;if(P===this.args.length-1)throw new In("Expected value to be of type "+or(this.type)+", but found "+or(fn(G))+" instead.")}return null},jr.prototype.eachChild=function(M){this.args.forEach(M)},jr.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},jr.prototype.serialize=function(){var M=this.type,P=[M.kind];if("array"===M.kind){var G=M.itemType;if("string"===G.kind||"number"===G.kind||"boolean"===G.kind){P.push(G.kind);var oe=M.N;("number"==typeof oe||this.args.length>1)&&P.push(oe)}}return P.concat(this.args.map(function(pe){return pe.serialize()}))};var Lr=function(M){this.type=Mt,this.sections=M};Lr.parse=function(M,P){if(M.length<2)return P.error("Expected at least one argument.");var G=M[1];if(!Array.isArray(G)&&"object"==typeof G)return P.error("First argument must be an image or text section.");for(var oe=[],pe=!1,xe=1;xe<=M.length-1;++xe){var Ee=M[xe];if(pe&&"object"==typeof Ee&&!Array.isArray(Ee)){pe=!1;var Ne=null;if(Ee["font-scale"]&&!(Ne=P.parse(Ee["font-scale"],1,$e)))return null;var tt=null;if(Ee["text-font"]&&!(tt=P.parse(Ee["text-font"],1,Zt(yt))))return null;var dt=null;if(Ee["text-color"]&&!(dt=P.parse(Ee["text-color"],1,Ut)))return null;var wt=oe[oe.length-1];wt.scale=Ne,wt.font=tt,wt.textColor=dt}else{var qt=P.parse(M[xe],1,Re);if(!qt)return null;var tr=qt.type.kind;if("string"!==tr&&"value"!==tr&&"null"!==tr&&"resolvedImage"!==tr)return P.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");pe=!0,oe.push({content:qt,scale:null,font:null,textColor:null})}}return new Lr(oe)},Lr.prototype.evaluate=function(M){return new Nr(this.sections.map(function(P){var G=P.content.evaluate(M);return fn(G)===Nt?new br("",G,null,null,null):new br(zn(G),null,P.scale?P.scale.evaluate(M):null,P.font?P.font.evaluate(M).join(","):null,P.textColor?P.textColor.evaluate(M):null)}))},Lr.prototype.eachChild=function(M){for(var P=0,G=this.sections;P<G.length;P+=1){var oe=G[P];M(oe.content),oe.scale&&M(oe.scale),oe.font&&M(oe.font),oe.textColor&&M(oe.textColor)}},Lr.prototype.outputDefined=function(){return!1},Lr.prototype.serialize=function(){for(var M=["format"],P=0,G=this.sections;P<G.length;P+=1){var oe=G[P];M.push(oe.content.serialize());var pe={};oe.scale&&(pe["font-scale"]=oe.scale.serialize()),oe.font&&(pe["text-font"]=oe.font.serialize()),oe.textColor&&(pe["text-color"]=oe.textColor.serialize()),M.push(pe)}return M};var Xr=function(M){this.type=Nt,this.input=M};Xr.parse=function(M,P){if(2!==M.length)return P.error("Expected two arguments.");var G=P.parse(M[1],1,yt);return G?new Xr(G):P.error("No image name provided.")},Xr.prototype.evaluate=function(M){var P=this.input.evaluate(M),G=kr.fromString(P);return G&&M.availableImages&&(G.available=M.availableImages.indexOf(P)>-1),G},Xr.prototype.eachChild=function(M){M(this.input)},Xr.prototype.outputDefined=function(){return!1},Xr.prototype.serialize=function(){return["image",this.input.serialize()]};var Un={"to-boolean":Bt,"to-color":Ut,"to-number":$e,"to-string":yt},qr=function(M,P){this.type=M,this.args=P};qr.parse=function(M,P){if(M.length<2)return P.error("Expected at least one argument.");var G=M[0];if(("to-boolean"===G||"to-string"===G)&&2!==M.length)return P.error("Expected one argument.");for(var oe=Un[G],pe=[],xe=1;xe<M.length;xe++){var Ee=P.parse(M[xe],xe,Re);if(!Ee)return null;pe.push(Ee)}return new qr(oe,pe)},qr.prototype.evaluate=function(M){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(M));if("color"===this.type.kind){for(var P,G,oe=0,pe=this.args;oe<pe.length;oe+=1){if(G=null,(P=pe[oe].evaluate(M))instanceof dr)return P;if("string"==typeof P){var xe=M.parseColor(P);if(xe)return xe}else if(Array.isArray(P)&&!(G=P.length<3||P.length>4?"Invalid rbga value "+JSON.stringify(P)+": expected an array containing either three or four numeric values.":Hr(P[0],P[1],P[2],P[3])))return new dr(P[0]/255,P[1]/255,P[2]/255,P[3])}throw new In(G||"Could not parse color from value '"+("string"==typeof P?P:String(JSON.stringify(P)))+"'")}if("number"===this.type.kind){for(var Ee=null,Ne=0,tt=this.args;Ne<tt.length;Ne+=1){if(null===(Ee=tt[Ne].evaluate(M)))return 0;var dt=Number(Ee);if(!isNaN(dt))return dt}throw new In("Could not convert "+JSON.stringify(Ee)+" to number.")}return"formatted"===this.type.kind?Nr.fromString(zn(this.args[0].evaluate(M))):"resolvedImage"===this.type.kind?kr.fromString(zn(this.args[0].evaluate(M))):zn(this.args[0].evaluate(M))},qr.prototype.eachChild=function(M){this.args.forEach(M)},qr.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},qr.prototype.serialize=function(){if("formatted"===this.type.kind)return new Lr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Xr(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(P){M.push(P.serialize())}),M};var On=["Unknown","Point","LineString","Polygon"],Tn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Tn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Tn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?On[this.feature.type]:this.feature.type:null},Tn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Tn.prototype.canonicalID=function(){return this.canonical},Tn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Tn.prototype.parseColor=function(M){var P=this._parseColorCache[M];return P||(P=this._parseColorCache[M]=dr.parse(M)),P};var rn=function(M,P,G,oe){this.name=M,this.type=P,this._evaluate=G,this.args=oe};rn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},rn.prototype.eachChild=function(M){this.args.forEach(M)},rn.prototype.outputDefined=function(){return!1},rn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},rn.parse=function(M,P){var G,oe=M[0],pe=rn.definitions[oe];if(!pe)return P.error('Unknown expression "'+oe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var xe=Array.isArray(pe)?pe[0]:pe.type,Ee=Array.isArray(pe)?[[pe[1],pe[2]]]:pe.overloads,Ne=Ee.filter(function(pi){var ni=pi[0];return!Array.isArray(ni)||ni.length===M.length-1}),tt=null,dt=0,wt=Ne;dt<wt.length;dt+=1){var qt=wt[dt],tr=qt[0],Kt=qt[1];tt=new Mn(P.registry,P.path,null,P.scope);for(var ur=[],wr=!1,Fr=1;Fr<M.length;Fr++){var Rr=M[Fr],Yr=Array.isArray(tr)?tr[Fr-1]:tr.type,Gr=tt.parse(Rr,1+ur.length,Yr);if(!Gr){wr=!0;break}ur.push(Gr)}if(!wr)if(Array.isArray(tr)&&tr.length!==ur.length)tt.error("Expected "+tr.length+" arguments, but found "+ur.length+" instead.");else{for(var en=0;en<ur.length;en++){var bn=Array.isArray(tr)?tr[en]:tr.type,Sn=ur[en];tt.concat(en+1).checkSubtype(bn,Sn.type)}if(0===tt.errors.length)return new rn(oe,xe,Kt,ur)}}if(1===Ne.length)(G=P.errors).push.apply(G,tt.errors);else{for(var Wn=(Ne.length?Ne:Ee).map(function(pi){var ni;return ni=pi[0],Array.isArray(ni)?"("+ni.map(or).join(", ")+")":"("+or(ni.type)+"...)"}).join(" | "),Gn=[],ei=1;ei<M.length;ei++){var fi=P.parse(M[ei],1+Gn.length);if(!fi)return null;Gn.push(or(fi.type))}P.error("Expected arguments of type "+Wn+", but found ("+Gn.join(", ")+") instead.")}return null},rn.register=function(M,P){for(var G in rn.definitions=P,P)M[G]=rn};var Vn=function(M,P,G){this.type=ht,this.locale=G,this.caseSensitive=M,this.diacriticSensitive=P};function ar(M,P){M[0]=Math.min(M[0],P[0]),M[1]=Math.min(M[1],P[1]),M[2]=Math.max(M[2],P[0]),M[3]=Math.max(M[3],P[1])}function zt(M,P){return!(M[0]<=P[0]||M[2]>=P[2]||M[1]<=P[1]||M[3]>=P[3])}function Gt(M,P){var oe=(180+M[0])/360,pe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,xe=Math.pow(2,P.z);return[Math.round(oe*xe*8192),Math.round(pe*xe*8192)]}function mr(M,P,G){return P[1]>M[1]!=G[1]>M[1]&&M[0]<(G[0]-P[0])*(M[1]-P[1])/(G[1]-P[1])+P[0]}function Er(M,P){for(var G,oe,pe,xe,Ee,Ne,tt,dt=!1,wt=0,qt=P.length;wt<qt;wt++)for(var tr=P[wt],Kt=0,ur=tr.length;Kt<ur-1;Kt++){if(void 0,void 0,void 0,void 0,(xe=(G=M)[0]-(oe=tr[Kt])[0])*(tt=G[1]-(pe=tr[Kt+1])[1])-(Ne=G[0]-pe[0])*(Ee=G[1]-oe[1])==0&&xe*Ne<=0&&Ee*tt<=0)return!1;mr(M,tr[Kt],tr[Kt+1])&&(dt=!dt)}return dt}function tn(M,P){for(var G=0;G<P.length;G++)if(Er(M,P[G]))return!0;return!1}function Qr(M,P,G,oe){var tt=oe[0]-G[0],dt=oe[1]-G[1],wt=(M[0]-G[0])*dt-tt*(M[1]-G[1]),qt=(P[0]-G[0])*dt-tt*(P[1]-G[1]);return wt>0&&qt<0||wt<0&&qt>0}function Cr(M,P,G){for(var oe=0,pe=G;oe<pe.length;oe+=1)for(var xe=pe[oe],Ee=0;Ee<xe.length-1;++Ee)if(void 0,void 0,(qt=[(wt=xe[Ee+1])[0]-(dt=xe[Ee])[0],wt[1]-dt[1]])[0]*(tr=[(tt=P)[0]-(Ne=M)[0],tt[1]-Ne[1]])[1]-qt[1]*tr[0]!=0&&Qr(Ne,tt,dt,wt)&&Qr(dt,wt,Ne,tt))return!0;var Ne,tt,dt,wt,qt,tr;return!1}function Mr(M,P){for(var G=0;G<M.length;++G)if(!Er(M[G],P))return!1;for(var oe=0;oe<M.length-1;++oe)if(Cr(M[oe],M[oe+1],P))return!1;return!0}function Ir(M,P){for(var G=0;G<P.length;G++)if(Mr(M,P[G]))return!0;return!1}function Sr(M,P,G){for(var oe=[],pe=0;pe<M.length;pe++){for(var xe=[],Ee=0;Ee<M[pe].length;Ee++){var Ne=Gt(M[pe][Ee],G);ar(P,Ne),xe.push(Ne)}oe.push(xe)}return oe}function Pr(M,P,G){for(var oe=[],pe=0;pe<M.length;pe++){var xe=Sr(M[pe],P,G);oe.push(xe)}return oe}function Kr(M,P,G,oe){if(M[0]<G[0]||M[0]>G[2]){var pe=.5*oe,xe=M[0]-G[0]>pe?-oe:G[0]-M[0]>pe?oe:0;0===xe&&(xe=M[0]-G[2]>pe?-oe:G[2]-M[0]>pe?oe:0),M[0]+=xe}ar(P,M)}function vn(M,P,G,oe){for(var pe=8192*Math.pow(2,oe.z),xe=[8192*oe.x,8192*oe.y],Ee=[],Ne=0,tt=M;Ne<tt.length;Ne+=1)for(var dt=0,wt=tt[Ne];dt<wt.length;dt+=1){var qt=wt[dt],tr=[qt.x+xe[0],qt.y+xe[1]];Kr(tr,P,G,pe),Ee.push(tr)}return Ee}function Cn(M,P,G,oe){for(var pe,xe=8192*Math.pow(2,oe.z),Ee=[8192*oe.x,8192*oe.y],Ne=[],tt=0,dt=M;tt<dt.length;tt+=1){for(var wt=[],qt=0,tr=dt[tt];qt<tr.length;qt+=1){var Kt=tr[qt],ur=[Kt.x+Ee[0],Kt.y+Ee[1]];ar(P,ur),wt.push(ur)}Ne.push(wt)}if(P[2]-P[0]<=xe/2){(pe=P)[0]=pe[1]=1/0,pe[2]=pe[3]=-1/0;for(var wr=0,Fr=Ne;wr<Fr.length;wr+=1)for(var Rr=0,Yr=Fr[wr];Rr<Yr.length;Rr+=1)Kr(Yr[Rr],P,G,xe)}return Ne}Vn.parse=function(M,P){if(2!==M.length)return P.error("Expected one argument.");var G=M[1];if("object"!=typeof G||Array.isArray(G))return P.error("Collator options argument must be an object.");var oe=P.parse(void 0!==G["case-sensitive"]&&G["case-sensitive"],1,Bt);if(!oe)return null;var pe=P.parse(void 0!==G["diacritic-sensitive"]&&G["diacritic-sensitive"],1,Bt);if(!pe)return null;var xe=null;return G.locale&&!(xe=P.parse(G.locale,1,yt))?null:new Vn(oe,pe,xe)},Vn.prototype.evaluate=function(M){return new pr(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},Vn.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},Vn.prototype.outputDefined=function(){return!1},Vn.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var ln=function(M,P){this.type=Bt,this.geojson=M,this.geometries=P};function yn(M){if(M instanceof rn&&("get"===M.name&&1===M.args.length||"feature-state"===M.name||"has"===M.name&&1===M.args.length||"properties"===M.name||"geometry-type"===M.name||"id"===M.name||/^filter-/.test(M.name))||M instanceof ln)return!1;var P=!0;return M.eachChild(function(G){P&&!yn(G)&&(P=!1)}),P}function Zr(M){if(M instanceof rn&&"feature-state"===M.name)return!1;var P=!0;return M.eachChild(function(G){P&&!Zr(G)&&(P=!1)}),P}function Wr(M,P){if(M instanceof rn&&P.indexOf(M.name)>=0)return!1;var G=!0;return M.eachChild(function(oe){G&&!Wr(oe,P)&&(G=!1)}),G}ln.parse=function(M,P){if(2!==M.length)return P.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(an(M[1])){var G=M[1];if("FeatureCollection"===G.type)for(var oe=0;oe<G.features.length;++oe){var pe=G.features[oe].geometry.type;if("Polygon"===pe||"MultiPolygon"===pe)return new ln(G,G.features[oe].geometry)}else if("Feature"===G.type){var xe=G.geometry.type;if("Polygon"===xe||"MultiPolygon"===xe)return new ln(G,G.geometry)}else if("Polygon"===G.type||"MultiPolygon"===G.type)return new ln(G,G)}return P.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ln.prototype.evaluate=function(M){if(null!=M.geometry()&&null!=M.canonicalID()){if("Point"===M.geometryType())return function(P,G){var oe=[1/0,1/0,-1/0,-1/0],pe=[1/0,1/0,-1/0,-1/0],xe=P.canonicalID();if("Polygon"===G.type){var Ee=Sr(G.coordinates,pe,xe),Ne=vn(P.geometry(),oe,pe,xe);if(!zt(oe,pe))return!1;for(var tt=0,dt=Ne;tt<dt.length;tt+=1)if(!Er(dt[tt],Ee))return!1}if("MultiPolygon"===G.type){var wt=Pr(G.coordinates,pe,xe),qt=vn(P.geometry(),oe,pe,xe);if(!zt(oe,pe))return!1;for(var tr=0,Kt=qt;tr<Kt.length;tr+=1)if(!tn(Kt[tr],wt))return!1}return!0}(M,this.geometries);if("LineString"===M.geometryType())return function(P,G){var oe=[1/0,1/0,-1/0,-1/0],pe=[1/0,1/0,-1/0,-1/0],xe=P.canonicalID();if("Polygon"===G.type){var Ee=Sr(G.coordinates,pe,xe),Ne=Cn(P.geometry(),oe,pe,xe);if(!zt(oe,pe))return!1;for(var tt=0,dt=Ne;tt<dt.length;tt+=1)if(!Mr(dt[tt],Ee))return!1}if("MultiPolygon"===G.type){var wt=Pr(G.coordinates,pe,xe),qt=Cn(P.geometry(),oe,pe,xe);if(!zt(oe,pe))return!1;for(var tr=0,Kt=qt;tr<Kt.length;tr+=1)if(!Ir(Kt[tr],wt))return!1}return!0}(M,this.geometries)}return!1},ln.prototype.eachChild=function(){},ln.prototype.outputDefined=function(){return!0},ln.prototype.serialize=function(){return["within",this.geojson]};var pn=function(M,P){this.type=P.type,this.name=M,this.boundExpression=P};pn.parse=function(M,P){if(2!==M.length||"string"!=typeof M[1])return P.error("'var' expression requires exactly one string literal argument.");var G=M[1];return P.scope.has(G)?new pn(G,P.scope.get(G)):P.error('Unknown variable "'+G+'". Make sure "'+G+'" has been bound in an enclosing "let" expression before using it.',1)},pn.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},pn.prototype.eachChild=function(){},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){return["var",this.name]};var Mn=function(M,P,G,oe,pe){void 0===P&&(P=[]),void 0===oe&&(oe=new Ot),void 0===pe&&(pe=[]),this.registry=M,this.path=P,this.key=P.map(function(xe){return"["+xe+"]"}).join(""),this.scope=oe,this.errors=pe,this.expectedType=G};function Dn(M,P){for(var G,pe=M.length-1,xe=0,Ee=pe,Ne=0;xe<=Ee;)if((G=M[Ne=Math.floor((xe+Ee)/2)])<=P){if(Ne===pe||P<M[Ne+1])return Ne;xe=Ne+1}else{if(!(G>P))throw new In("Input is not a number.");Ee=Ne-1}return 0}Mn.prototype.parse=function(M,P,G,oe,pe){return void 0===pe&&(pe={}),P?this.concat(P,G,oe)._parse(M,pe):this._parse(M,pe)},Mn.prototype._parse=function(M,P){function G(dt,wt,qt){return"assert"===qt?new jr(wt,[dt]):"coerce"===qt?new qr(wt,[dt]):dt}if(null!==M&&"string"!=typeof M&&"boolean"!=typeof M&&"number"!=typeof M||(M=["literal",M]),Array.isArray(M)){if(0===M.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var oe=M[0];if("string"!=typeof oe)return this.error("Expression name must be a string, but found "+typeof oe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var pe=this.registry[oe];if(pe){var xe=pe.parse(M,this);if(!xe)return null;if(this.expectedType){var Ee=this.expectedType,Ne=xe.type;if("string"!==Ee.kind&&"number"!==Ee.kind&&"boolean"!==Ee.kind&&"object"!==Ee.kind&&"array"!==Ee.kind||"value"!==Ne.kind)if("color"!==Ee.kind&&"formatted"!==Ee.kind&&"resolvedImage"!==Ee.kind||"value"!==Ne.kind&&"string"!==Ne.kind){if(this.checkSubtype(Ee,Ne))return null}else xe=G(xe,Ee,P.typeAnnotation||"coerce");else xe=G(xe,Ee,P.typeAnnotation||"assert")}if(!(xe instanceof Nn)&&"resolvedImage"!==xe.type.kind&&function dt(wt){if(wt instanceof pn)return dt(wt.boundExpression);if(wt instanceof rn&&"error"===wt.name||wt instanceof Vn||wt instanceof ln)return!1;var qt=wt instanceof qr||wt instanceof jr,tr=!0;return wt.eachChild(function(Kt){tr=qt?tr&&dt(Kt):tr&&Kt instanceof Nn}),!!tr&&yn(wt)&&Wr(wt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(xe)){var tt=new Tn;try{xe=new Nn(xe.type,xe.evaluate(tt))}catch(dt){return this.error(dt.message),null}}return xe}return this.error('Unknown expression "'+oe+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===M?"'undefined' value invalid. Use null instead.":"object"==typeof M?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof M+" instead.")},Mn.prototype.concat=function(M,P,G){var oe="number"==typeof M?this.path.concat(M):this.path,pe=G?this.scope.concat(G):this.scope;return new Mn(this.registry,oe,P||null,pe,this.errors)},Mn.prototype.error=function(M){for(var P=[],G=arguments.length-1;G-- >0;)P[G]=arguments[G+1];var oe=""+this.key+P.map(function(pe){return"["+pe+"]"}).join("");this.errors.push(new ut(oe,M))},Mn.prototype.checkSubtype=function(M,P){var G=er(M,P);return G&&this.error(G),G};var hi=function(M,P,G){this.type=M,this.input=P,this.labels=[],this.outputs=[];for(var oe=0,pe=G;oe<pe.length;oe+=1){var xe=pe[oe],Ne=xe[1];this.labels.push(xe[0]),this.outputs.push(Ne)}};function Qn(M,P,G){return M*(1-G)+P*G}hi.parse=function(M,P){if(M.length-1<4)return P.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return P.error("Expected an even number of arguments.");var G=P.parse(M[1],1,$e);if(!G)return null;var oe=[],pe=null;P.expectedType&&"value"!==P.expectedType.kind&&(pe=P.expectedType);for(var xe=1;xe<M.length;xe+=2){var Ee=1===xe?-1/0:M[xe],Ne=M[xe+1],tt=xe,dt=xe+1;if("number"!=typeof Ee)return P.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tt);if(oe.length&&oe[oe.length-1][0]>=Ee)return P.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',tt);var wt=P.parse(Ne,dt,pe);if(!wt)return null;pe=pe||wt.type,oe.push([Ee,wt])}return new hi(pe,G,oe)},hi.prototype.evaluate=function(M){var P=this.labels,G=this.outputs;if(1===P.length)return G[0].evaluate(M);var oe=this.input.evaluate(M);if(oe<=P[0])return G[0].evaluate(M);var pe=P.length;return oe>=P[pe-1]?G[pe-1].evaluate(M):G[Dn(P,oe)].evaluate(M)},hi.prototype.eachChild=function(M){M(this.input);for(var P=0,G=this.outputs;P<G.length;P+=1)M(G[P])},hi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},hi.prototype.serialize=function(){for(var M=["step",this.input.serialize()],P=0;P<this.labels.length;P++)P>0&&M.push(this.labels[P]),M.push(this.outputs[P].serialize());return M};var An=Object.freeze({__proto__:null,number:Qn,color:function(M,P,G){return new dr(Qn(M.r,P.r,G),Qn(M.g,P.g,G),Qn(M.b,P.b,G),Qn(M.a,P.a,G))},array:function(M,P,G){return M.map(function(oe,pe){return Qn(oe,P[pe],G)})}}),ci=6/29,yi=3*ci*ci,Xi=Math.PI/180,Da=180/Math.PI;function la(M){return M>.008856451679035631?Math.pow(M,1/3):M/yi+4/29}function Ma(M){return M>ci?M*M*M:yi*(M-4/29)}function Oi(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,1/2.4)-.055)}function Yi(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function _a(M){var P=Yi(M.r),G=Yi(M.g),oe=Yi(M.b),pe=la((.4124564*P+.3575761*G+.1804375*oe)/.95047),xe=la((.2126729*P+.7151522*G+.072175*oe)/1);return{l:116*xe-16,a:500*(pe-xe),b:200*(xe-la((.0193339*P+.119192*G+.9503041*oe)/1.08883)),alpha:M.a}}function Co(M){var P=(M.l+16)/116,G=isNaN(M.a)?P:P+M.a/500,oe=isNaN(M.b)?P:P-M.b/200;return P=1*Ma(P),G=.95047*Ma(G),oe=1.08883*Ma(oe),new dr(Oi(3.2404542*G-1.5371385*P-.4985314*oe),Oi(-.969266*G+1.8760108*P+.041556*oe),Oi(.0556434*G-.2040259*P+1.0572252*oe),M.alpha)}function Zo(M,P,G){var oe=P-M;return M+G*(oe>180||oe<-180?oe-360*Math.round(oe/360):oe)}var Xa={forward:_a,reverse:Co,interpolate:function(M,P,G){return{l:Qn(M.l,P.l,G),a:Qn(M.a,P.a,G),b:Qn(M.b,P.b,G),alpha:Qn(M.alpha,P.alpha,G)}}},to={forward:function(M){var P=_a(M),G=P.l,oe=P.a,pe=P.b,xe=Math.atan2(pe,oe)*Da;return{h:xe<0?xe+360:xe,c:Math.sqrt(oe*oe+pe*pe),l:G,alpha:M.a}},reverse:function(M){var P=M.h*Xi,G=M.c;return Co({l:M.l,a:Math.cos(P)*G,b:Math.sin(P)*G,alpha:M.alpha})},interpolate:function(M,P,G){return{h:Zo(M.h,P.h,G),c:Qn(M.c,P.c,G),l:Qn(M.l,P.l,G),alpha:Qn(M.alpha,P.alpha,G)}}},Uo=Object.freeze({__proto__:null,lab:Xa,hcl:to}),Ji=function(M,P,G,oe,pe){this.type=M,this.operator=P,this.interpolation=G,this.input=oe,this.labels=[],this.outputs=[];for(var xe=0,Ee=pe;xe<Ee.length;xe+=1){var Ne=Ee[xe],dt=Ne[1];this.labels.push(Ne[0]),this.outputs.push(dt)}};function Eo(M,P,G,oe){var pe=oe-G,xe=M-G;return 0===pe?0:1===P?xe/pe:(Math.pow(P,xe)-1)/(Math.pow(P,pe)-1)}Ji.interpolationFactor=function(M,P,G,oe){var pe=0;if("exponential"===M.name)pe=Eo(P,M.base,G,oe);else if("linear"===M.name)pe=Eo(P,1,G,oe);else if("cubic-bezier"===M.name){var xe=M.controlPoints;pe=new r(xe[0],xe[1],xe[2],xe[3]).solve(Eo(P,1,G,oe))}return pe},Ji.parse=function(M,P){var G=M[0],oe=M[1],pe=M[2],xe=M.slice(3);if(!Array.isArray(oe)||0===oe.length)return P.error("Expected an interpolation type expression.",1);if("linear"===oe[0])oe={name:"linear"};else if("exponential"===oe[0]){var Ee=oe[1];if("number"!=typeof Ee)return P.error("Exponential interpolation requires a numeric base.",1,1);oe={name:"exponential",base:Ee}}else{if("cubic-bezier"!==oe[0])return P.error("Unknown interpolation type "+String(oe[0]),1,0);var Ne=oe.slice(1);if(4!==Ne.length||Ne.some(function(Fr){return"number"!=typeof Fr||Fr<0||Fr>1}))return P.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);oe={name:"cubic-bezier",controlPoints:Ne}}if(M.length-1<4)return P.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return P.error("Expected an even number of arguments.");if(!(pe=P.parse(pe,2,$e)))return null;var tt=[],dt=null;"interpolate-hcl"===G||"interpolate-lab"===G?dt=Ut:P.expectedType&&"value"!==P.expectedType.kind&&(dt=P.expectedType);for(var wt=0;wt<xe.length;wt+=2){var qt=xe[wt],tr=xe[wt+1],Kt=wt+3,ur=wt+4;if("number"!=typeof qt)return P.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Kt);if(tt.length&&tt[tt.length-1][0]>=qt)return P.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Kt);var wr=P.parse(tr,ur,dt);if(!wr)return null;dt=dt||wr.type,tt.push([qt,wr])}return"number"===dt.kind||"color"===dt.kind||"array"===dt.kind&&"number"===dt.itemType.kind&&"number"==typeof dt.N?new Ji(dt,G,oe,pe,tt):P.error("Type "+or(dt)+" is not interpolatable.")},Ji.prototype.evaluate=function(M){var P=this.labels,G=this.outputs;if(1===P.length)return G[0].evaluate(M);var oe=this.input.evaluate(M);if(oe<=P[0])return G[0].evaluate(M);var pe=P.length;if(oe>=P[pe-1])return G[pe-1].evaluate(M);var xe=Dn(P,oe),tt=Ji.interpolationFactor(this.interpolation,oe,P[xe],P[xe+1]),dt=G[xe].evaluate(M),wt=G[xe+1].evaluate(M);return"interpolate"===this.operator?An[this.type.kind.toLowerCase()](dt,wt,tt):"interpolate-hcl"===this.operator?to.reverse(to.interpolate(to.forward(dt),to.forward(wt),tt)):Xa.reverse(Xa.interpolate(Xa.forward(dt),Xa.forward(wt),tt))},Ji.prototype.eachChild=function(M){M(this.input);for(var P=0,G=this.outputs;P<G.length;P+=1)M(G[P])},Ji.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Ji.prototype.serialize=function(){var M;M="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var P=[this.operator,M,this.input.serialize()],G=0;G<this.labels.length;G++)P.push(this.labels[G],this.outputs[G].serialize());return P};var lo=function(M,P){this.type=M,this.args=P};lo.parse=function(M,P){if(M.length<2)return P.error("Expectected at least one argument.");var G=null,oe=P.expectedType;oe&&"value"!==oe.kind&&(G=oe);for(var pe=[],xe=0,Ee=M.slice(1);xe<Ee.length;xe+=1){var tt=P.parse(Ee[xe],1+pe.length,G,void 0,{typeAnnotation:"omit"});if(!tt)return null;G=G||tt.type,pe.push(tt)}var dt=oe&&pe.some(function(wt){return er(oe,wt.type)});return new lo(dt?Re:G,pe)},lo.prototype.evaluate=function(M){for(var P,G=null,oe=0,pe=0,xe=this.args;pe<xe.length&&(oe++,(G=xe[pe].evaluate(M))&&G instanceof kr&&!G.available&&(P||(P=G.name),G=null,oe===this.args.length&&(G=P)),null===G);pe+=1);return G},lo.prototype.eachChild=function(M){this.args.forEach(M)},lo.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},lo.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(P){M.push(P.serialize())}),M};var Aa=function(M,P){this.type=P.type,this.bindings=[].concat(M),this.result=P};Aa.prototype.evaluate=function(M){return this.result.evaluate(M)},Aa.prototype.eachChild=function(M){for(var P=0,G=this.bindings;P<G.length;P+=1)M(G[P][1]);M(this.result)},Aa.parse=function(M,P){if(M.length<4)return P.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var G=[],oe=1;oe<M.length-1;oe+=2){var pe=M[oe];if("string"!=typeof pe)return P.error("Expected string, but found "+typeof pe+" instead.",oe);if(/[^a-zA-Z0-9_]/.test(pe))return P.error("Variable names must contain only alphanumeric characters or '_'.",oe);var xe=P.parse(M[oe+1],oe+1);if(!xe)return null;G.push([pe,xe])}var Ee=P.parse(M[M.length-1],M.length-1,P.expectedType,G);return Ee?new Aa(G,Ee):null},Aa.prototype.outputDefined=function(){return this.result.outputDefined()},Aa.prototype.serialize=function(){for(var M=["let"],P=0,G=this.bindings;P<G.length;P+=1){var oe=G[P];M.push(oe[0],oe[1].serialize())}return M.push(this.result.serialize()),M};var ro=function(M,P,G){this.type=M,this.index=P,this.input=G};ro.parse=function(M,P){if(3!==M.length)return P.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var G=P.parse(M[1],1,$e),oe=P.parse(M[2],2,Zt(P.expectedType||Re));return G&&oe?new ro(oe.type.itemType,G,oe):null},ro.prototype.evaluate=function(M){var P=this.index.evaluate(M),G=this.input.evaluate(M);if(P<0)throw new In("Array index out of bounds: "+P+" < 0.");if(P>=G.length)throw new In("Array index out of bounds: "+P+" > "+(G.length-1)+".");if(P!==Math.floor(P))throw new In("Array index must be an integer, but found "+P+" instead.");return G[P]},ro.prototype.eachChild=function(M){M(this.index),M(this.input)},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var mo=function(M,P){this.type=Bt,this.needle=M,this.haystack=P};mo.parse=function(M,P){if(3!==M.length)return P.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var G=P.parse(M[1],1,Re),oe=P.parse(M[2],2,Re);return G&&oe?cr(G.type,[Bt,yt,$e,Rt,Re])?new mo(G,oe):P.error("Expected first argument to be of type boolean, string, number or null, but found "+or(G.type)+" instead"):null},mo.prototype.evaluate=function(M){var P=this.needle.evaluate(M),G=this.haystack.evaluate(M);if(!G)return!1;if(!_r(P,["boolean","string","number","null"]))throw new In("Expected first argument to be of type boolean, string, number or null, but found "+or(fn(P))+" instead.");if(!_r(G,["string","array"]))throw new In("Expected second argument to be of type array or string, but found "+or(fn(G))+" instead.");return G.indexOf(P)>=0},mo.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},mo.prototype.outputDefined=function(){return!0},mo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Mo=function(M,P,G){this.type=$e,this.needle=M,this.haystack=P,this.fromIndex=G};Mo.parse=function(M,P){if(M.length<=2||M.length>=5)return P.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var G=P.parse(M[1],1,Re),oe=P.parse(M[2],2,Re);if(!G||!oe)return null;if(!cr(G.type,[Bt,yt,$e,Rt,Re]))return P.error("Expected first argument to be of type boolean, string, number or null, but found "+or(G.type)+" instead");if(4===M.length){var pe=P.parse(M[3],3,$e);return pe?new Mo(G,oe,pe):null}return new Mo(G,oe)},Mo.prototype.evaluate=function(M){var P=this.needle.evaluate(M),G=this.haystack.evaluate(M);if(!_r(P,["boolean","string","number","null"]))throw new In("Expected first argument to be of type boolean, string, number or null, but found "+or(fn(P))+" instead.");if(!_r(G,["string","array"]))throw new In("Expected second argument to be of type array or string, but found "+or(fn(G))+" instead.");if(this.fromIndex){var oe=this.fromIndex.evaluate(M);return G.indexOf(P,oe)}return G.indexOf(P)},Mo.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Va=function(M,P,G,oe,pe,xe){this.inputType=M,this.type=P,this.input=G,this.cases=oe,this.outputs=pe,this.otherwise=xe};Va.parse=function(M,P){if(M.length<5)return P.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return P.error("Expected an even number of arguments.");var G,oe;P.expectedType&&"value"!==P.expectedType.kind&&(oe=P.expectedType);for(var pe={},xe=[],Ee=2;Ee<M.length-1;Ee+=2){var Ne=M[Ee],tt=M[Ee+1];Array.isArray(Ne)||(Ne=[Ne]);var dt=P.concat(Ee);if(0===Ne.length)return dt.error("Expected at least one branch label.");for(var wt=0,qt=Ne;wt<qt.length;wt+=1){var tr=qt[wt];if("number"!=typeof tr&&"string"!=typeof tr)return dt.error("Branch labels must be numbers or strings.");if("number"==typeof tr&&Math.abs(tr)>Number.MAX_SAFE_INTEGER)return dt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof tr&&Math.floor(tr)!==tr)return dt.error("Numeric branch labels must be integer values.");if(G){if(dt.checkSubtype(G,fn(tr)))return null}else G=fn(tr);if(void 0!==pe[String(tr)])return dt.error("Branch labels must be unique.");pe[String(tr)]=xe.length}var Kt=P.parse(tt,Ee,oe);if(!Kt)return null;oe=oe||Kt.type,xe.push(Kt)}var ur=P.parse(M[1],1,Re);if(!ur)return null;var wr=P.parse(M[M.length-1],M.length-1,oe);return wr?"value"!==ur.type.kind&&P.concat(1).checkSubtype(G,ur.type)?null:new Va(G,oe,ur,pe,xe,wr):null},Va.prototype.evaluate=function(M){var P=this.input.evaluate(M);return(fn(P)===this.inputType&&this.outputs[this.cases[P]]||this.otherwise).evaluate(M)},Va.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Va.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Va.prototype.serialize=function(){for(var M=this,P=["match",this.input.serialize()],G=[],oe={},pe=0,xe=Object.keys(this.cases).sort();pe<xe.length;pe+=1){var Ee=xe[pe];void 0===(qt=oe[this.cases[Ee]])?(oe[this.cases[Ee]]=G.length,G.push([this.cases[Ee],[Ee]])):G[qt][1].push(Ee)}for(var Ne=function(Kt){return"number"===M.inputType.kind?Number(Kt):Kt},tt=0,dt=G;tt<dt.length;tt+=1){var wt=dt[tt],qt=wt[0],tr=wt[1];P.push(1===tr.length?Ne(tr[0]):tr.map(Ne)),P.push(this.outputs[outputIndex$1].serialize())}return P.push(this.otherwise.serialize()),P};var ga=function(M,P,G){this.type=M,this.branches=P,this.otherwise=G};ga.parse=function(M,P){if(M.length<4)return P.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return P.error("Expected an odd number of arguments.");var G;P.expectedType&&"value"!==P.expectedType.kind&&(G=P.expectedType);for(var oe=[],pe=1;pe<M.length-1;pe+=2){var xe=P.parse(M[pe],pe,Bt);if(!xe)return null;var Ee=P.parse(M[pe+1],pe+1,G);if(!Ee)return null;oe.push([xe,Ee]),G=G||Ee.type}var Ne=P.parse(M[M.length-1],M.length-1,G);return Ne?new ga(G,oe,Ne):null},ga.prototype.evaluate=function(M){for(var P=0,G=this.branches;P<G.length;P+=1){var oe=G[P],xe=oe[1];if(oe[0].evaluate(M))return xe.evaluate(M)}return this.otherwise.evaluate(M)},ga.prototype.eachChild=function(M){for(var P=0,G=this.branches;P<G.length;P+=1){var oe=G[P],xe=oe[1];M(oe[0]),M(xe)}M(this.otherwise)},ga.prototype.outputDefined=function(){return this.branches.every(function(M){return M[1].outputDefined()})&&this.otherwise.outputDefined()},ga.prototype.serialize=function(){var M=["case"];return this.eachChild(function(P){M.push(P.serialize())}),M};var Ja=function(M,P,G,oe){this.type=M,this.input=P,this.beginIndex=G,this.endIndex=oe};function bs(M,P){return"=="===M||"!="===M?"boolean"===P.kind||"string"===P.kind||"number"===P.kind||"null"===P.kind||"value"===P.kind:"string"===P.kind||"number"===P.kind||"value"===P.kind}function As(M,P,G,oe){return 0===oe.compare(P,G)}function Ki(M,P,G){var oe="=="!==M&&"!="!==M;return function(){function pe(xe,Ee,Ne){this.type=Bt,this.lhs=xe,this.rhs=Ee,this.collator=Ne,this.hasUntypedArgument="value"===xe.type.kind||"value"===Ee.type.kind}return pe.parse=function(xe,Ee){if(3!==xe.length&&4!==xe.length)return Ee.error("Expected two or three arguments.");var Ne=xe[0],tt=Ee.parse(xe[1],1,Re);if(!tt)return null;if(!bs(Ne,tt.type))return Ee.concat(1).error('"'+Ne+"\" comparisons are not supported for type '"+or(tt.type)+"'.");var dt=Ee.parse(xe[2],2,Re);if(!dt)return null;if(!bs(Ne,dt.type))return Ee.concat(2).error('"'+Ne+"\" comparisons are not supported for type '"+or(dt.type)+"'.");if(tt.type.kind!==dt.type.kind&&"value"!==tt.type.kind&&"value"!==dt.type.kind)return Ee.error("Cannot compare types '"+or(tt.type)+"' and '"+or(dt.type)+"'.");oe&&("value"===tt.type.kind&&"value"!==dt.type.kind?tt=new jr(dt.type,[tt]):"value"!==tt.type.kind&&"value"===dt.type.kind&&(dt=new jr(tt.type,[dt])));var wt=null;if(4===xe.length){if("string"!==tt.type.kind&&"string"!==dt.type.kind&&"value"!==tt.type.kind&&"value"!==dt.type.kind)return Ee.error("Cannot use collator to compare non-string types.");if(!(wt=Ee.parse(xe[3],3,ht)))return null}return new pe(tt,dt,wt)},pe.prototype.evaluate=function(xe){var Ee=this.lhs.evaluate(xe),Ne=this.rhs.evaluate(xe);if(oe&&this.hasUntypedArgument){var tt=fn(Ee),dt=fn(Ne);if(tt.kind!==dt.kind||"string"!==tt.kind&&"number"!==tt.kind)throw new In('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+tt.kind+", "+dt.kind+") instead.")}if(this.collator&&!oe&&this.hasUntypedArgument){var wt=fn(Ee),qt=fn(Ne);if("string"!==wt.kind||"string"!==qt.kind)return P(xe,Ee,Ne)}return this.collator?G(xe,Ee,Ne,this.collator.evaluate(xe)):P(xe,Ee,Ne)},pe.prototype.eachChild=function(xe){xe(this.lhs),xe(this.rhs),this.collator&&xe(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var xe=[M];return this.eachChild(function(Ee){xe.push(Ee.serialize())}),xe},pe}()}Ja.parse=function(M,P){if(M.length<=2||M.length>=5)return P.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var G=P.parse(M[1],1,Re),oe=P.parse(M[2],2,$e);if(!G||!oe)return null;if(!cr(G.type,[Zt(Re),yt,Re]))return P.error("Expected first argument to be of type array or string, but found "+or(G.type)+" instead");if(4===M.length){var pe=P.parse(M[3],3,$e);return pe?new Ja(G.type,G,oe,pe):null}return new Ja(G.type,G,oe)},Ja.prototype.evaluate=function(M){var P=this.input.evaluate(M),G=this.beginIndex.evaluate(M);if(!_r(P,["string","array"]))throw new In("Expected first argument to be of type array or string, but found "+or(fn(P))+" instead.");if(this.endIndex){var oe=this.endIndex.evaluate(M);return P.slice(G,oe)}return P.slice(G)},Ja.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},Ja.prototype.outputDefined=function(){return!1},Ja.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var fs=Ki("==",function(M,P,G){return P===G},As),$o=Ki("!=",function(M,P,G){return P!==G},function(M,P,G,oe){return!As(0,P,G,oe)}),Ls=Ki("<",function(M,P,G){return P<G},function(M,P,G,oe){return oe.compare(P,G)<0}),es=Ki(">",function(M,P,G){return P>G},function(M,P,G,oe){return oe.compare(P,G)>0}),ss=Ki("<=",function(M,P,G){return P<=G},function(M,P,G,oe){return oe.compare(P,G)<=0}),Wo=Ki(">=",function(M,P,G){return P>=G},function(M,P,G,oe){return oe.compare(P,G)>=0}),go=function(M,P,G,oe,pe){this.type=yt,this.number=M,this.locale=P,this.currency=G,this.minFractionDigits=oe,this.maxFractionDigits=pe};go.parse=function(M,P){if(3!==M.length)return P.error("Expected two arguments.");var G=P.parse(M[1],1,$e);if(!G)return null;var oe=M[2];if("object"!=typeof oe||Array.isArray(oe))return P.error("NumberFormat options argument must be an object.");var pe=null;if(oe.locale&&!(pe=P.parse(oe.locale,1,yt)))return null;var xe=null;if(oe.currency&&!(xe=P.parse(oe.currency,1,yt)))return null;var Ee=null;if(oe["min-fraction-digits"]&&!(Ee=P.parse(oe["min-fraction-digits"],1,$e)))return null;var Ne=null;return oe["max-fraction-digits"]&&!(Ne=P.parse(oe["max-fraction-digits"],1,$e))?null:new go(G,pe,xe,Ee,Ne)},go.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},go.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},go.prototype.outputDefined=function(){return!1},go.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var vo=function(M){this.type=$e,this.input=M};vo.parse=function(M,P){if(2!==M.length)return P.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var G=P.parse(M[1],1);return G?"array"!==G.type.kind&&"string"!==G.type.kind&&"value"!==G.type.kind?P.error("Expected argument of type string or array, but found "+or(G.type)+" instead."):new vo(G):null},vo.prototype.evaluate=function(M){var P=this.input.evaluate(M);if("string"==typeof P||Array.isArray(P))return P.length;throw new In("Expected value to be of type string or array, but found "+or(fn(P))+" instead.")},vo.prototype.eachChild=function(M){M(this.input)},vo.prototype.outputDefined=function(){return!1},vo.prototype.serialize=function(){var M=["length"];return this.eachChild(function(P){M.push(P.serialize())}),M};var Lo={"==":fs,"!=":$o,">":es,"<":Ls,">=":Wo,"<=":ss,array:jr,at:ro,boolean:jr,case:ga,coalesce:lo,collator:Vn,format:Lr,image:Xr,in:mo,"index-of":Mo,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:vo,let:Aa,literal:Nn,match:Va,number:jr,"number-format":go,object:jr,slice:Ja,step:hi,string:jr,"to-boolean":qr,"to-color":qr,"to-number":qr,"to-string":qr,var:pn,within:ln};function Do(M,P){var G=P[0],oe=P[1],pe=P[2],xe=P[3];G=G.evaluate(M),oe=oe.evaluate(M),pe=pe.evaluate(M);var Ee=xe?xe.evaluate(M):1,Ne=Hr(G,oe,pe,Ee);if(Ne)throw new In(Ne);return new dr(G/255*Ee,oe/255*Ee,pe/255*Ee,Ee)}function pa(M,P){return M in P}function co(M,P){var G=P[M];return void 0===G?null:G}function yo(M){return{type:M}}function ps(M){return{result:"success",value:M}}function uo(M){return{result:"error",value:M}}function Bo(M){return"data-driven"===M["property-type"]||"cross-faded-data-driven"===M["property-type"]}function ds(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function Io(M){return!!M.expression&&M.expression.interpolated}function Gi(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":null===M?"null":typeof M}function je(M){return"object"==typeof M&&null!==M&&!Array.isArray(M)}function Ge(M){return M}function nt(M,P,G){return void 0!==M?M:void 0!==P?P:void 0!==G?G:void 0}function lt(M,P,G,oe,pe){return nt(typeof G===pe?oe[G]:void 0,M.default,P.default)}function _t(M,P,G){if("number"!==Gi(G))return nt(M.default,P.default);var oe=M.stops.length;if(1===oe||G<=M.stops[0][0])return M.stops[0][1];if(G>=M.stops[oe-1][0])return M.stops[oe-1][1];var pe=Dn(M.stops.map(function(xe){return xe[0]}),G);return M.stops[pe][1]}function mt(M,P,G){var oe=void 0!==M.base?M.base:1;if("number"!==Gi(G))return nt(M.default,P.default);var pe=M.stops.length;if(1===pe||G<=M.stops[0][0])return M.stops[0][1];if(G>=M.stops[pe-1][0])return M.stops[pe-1][1];var tr,Kt,wr,Fr,xe=Dn(M.stops.map(function(qt){return qt[0]}),G),Ee=(tr=oe,Fr=G-(Kt=M.stops[xe][0]),0==(wr=M.stops[xe+1][0]-Kt)?0:1===tr?Fr/wr:(Math.pow(tr,Fr)-1)/(Math.pow(tr,wr)-1)),Ne=M.stops[xe][1],tt=M.stops[xe+1][1],dt=An[P.type]||Ge;if(M.colorSpace&&"rgb"!==M.colorSpace){var wt=Uo[M.colorSpace];dt=function(qt,tr){return wt.reverse(wt.interpolate(wt.forward(qt),wt.forward(tr),Ee))}}return"function"==typeof Ne.evaluate?{evaluate:function(){for(var qt=[],tr=arguments.length;tr--;)qt[tr]=arguments[tr];var Kt=Ne.evaluate.apply(void 0,qt),ur=tt.evaluate.apply(void 0,qt);if(void 0!==Kt&&void 0!==ur)return dt(Kt,ur,Ee)}}:dt(Ne,tt,Ee)}function Ct(M,P,G){return"color"===P.type?G=dr.parse(G):"formatted"===P.type?G=Nr.fromString(G.toString()):"resolvedImage"===P.type?G=kr.fromString(G.toString()):Gi(G)===P.type||"enum"===P.type&&P.values[G]||(G=void 0),nt(G,M.default,P.default)}rn.register(Lo,{error:[{kind:"error"},[yt],function(M,P){throw new In(P[0].evaluate(M))}],typeof:[yt,[Re],function(M,P){return or(fn(P[0].evaluate(M)))}],"to-rgba":[Zt($e,4),[Ut],function(M,P){return P[0].evaluate(M).toArray()}],rgb:[Ut,[$e,$e,$e],Do],rgba:[Ut,[$e,$e,$e,$e],Do],has:{type:Bt,overloads:[[[yt],function(M,P){return pa(P[0].evaluate(M),M.properties())}],[[yt,Qt],function(M,P){var oe=P[1];return pa(P[0].evaluate(M),oe.evaluate(M))}]]},get:{type:Re,overloads:[[[yt],function(M,P){return co(P[0].evaluate(M),M.properties())}],[[yt,Qt],function(M,P){var oe=P[1];return co(P[0].evaluate(M),oe.evaluate(M))}]]},"feature-state":[Re,[yt],function(M,P){return co(P[0].evaluate(M),M.featureState||{})}],properties:[Qt,[],function(M){return M.properties()}],"geometry-type":[yt,[],function(M){return M.geometryType()}],id:[Re,[],function(M){return M.id()}],zoom:[$e,[],function(M){return M.globals.zoom}],"heatmap-density":[$e,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[$e,[],function(M){return M.globals.lineProgress||0}],accumulated:[Re,[],function(M){return void 0===M.globals.accumulated?null:M.globals.accumulated}],"+":[$e,yo($e),function(M,P){for(var G=0,oe=0,pe=P;oe<pe.length;oe+=1)G+=pe[oe].evaluate(M);return G}],"*":[$e,yo($e),function(M,P){for(var G=1,oe=0,pe=P;oe<pe.length;oe+=1)G*=pe[oe].evaluate(M);return G}],"-":{type:$e,overloads:[[[$e,$e],function(M,P){var oe=P[1];return P[0].evaluate(M)-oe.evaluate(M)}],[[$e],function(M,P){return-P[0].evaluate(M)}]]},"/":[$e,[$e,$e],function(M,P){var oe=P[1];return P[0].evaluate(M)/oe.evaluate(M)}],"%":[$e,[$e,$e],function(M,P){var oe=P[1];return P[0].evaluate(M)%oe.evaluate(M)}],ln2:[$e,[],function(){return Math.LN2}],pi:[$e,[],function(){return Math.PI}],e:[$e,[],function(){return Math.E}],"^":[$e,[$e,$e],function(M,P){var oe=P[1];return Math.pow(P[0].evaluate(M),oe.evaluate(M))}],sqrt:[$e,[$e],function(M,P){return Math.sqrt(P[0].evaluate(M))}],log10:[$e,[$e],function(M,P){return Math.log(P[0].evaluate(M))/Math.LN10}],ln:[$e,[$e],function(M,P){return Math.log(P[0].evaluate(M))}],log2:[$e,[$e],function(M,P){return Math.log(P[0].evaluate(M))/Math.LN2}],sin:[$e,[$e],function(M,P){return Math.sin(P[0].evaluate(M))}],cos:[$e,[$e],function(M,P){return Math.cos(P[0].evaluate(M))}],tan:[$e,[$e],function(M,P){return Math.tan(P[0].evaluate(M))}],asin:[$e,[$e],function(M,P){return Math.asin(P[0].evaluate(M))}],acos:[$e,[$e],function(M,P){return Math.acos(P[0].evaluate(M))}],atan:[$e,[$e],function(M,P){return Math.atan(P[0].evaluate(M))}],min:[$e,yo($e),function(M,P){return Math.min.apply(Math,P.map(function(G){return G.evaluate(M)}))}],max:[$e,yo($e),function(M,P){return Math.max.apply(Math,P.map(function(G){return G.evaluate(M)}))}],abs:[$e,[$e],function(M,P){return Math.abs(P[0].evaluate(M))}],round:[$e,[$e],function(M,P){var G=P[0].evaluate(M);return G<0?-Math.round(-G):Math.round(G)}],floor:[$e,[$e],function(M,P){return Math.floor(P[0].evaluate(M))}],ceil:[$e,[$e],function(M,P){return Math.ceil(P[0].evaluate(M))}],"filter-==":[Bt,[yt,Re],function(M,P){var G=P[0],oe=P[1];return M.properties()[G.value]===oe.value}],"filter-id-==":[Bt,[Re],function(M,P){var G=P[0];return M.id()===G.value}],"filter-type-==":[Bt,[yt],function(M,P){var G=P[0];return M.geometryType()===G.value}],"filter-<":[Bt,[yt,Re],function(M,P){var G=P[0],oe=P[1],pe=M.properties()[G.value],xe=oe.value;return typeof pe==typeof xe&&pe<xe}],"filter-id-<":[Bt,[Re],function(M,P){var G=P[0],oe=M.id(),pe=G.value;return typeof oe==typeof pe&&oe<pe}],"filter->":[Bt,[yt,Re],function(M,P){var G=P[0],oe=P[1],pe=M.properties()[G.value],xe=oe.value;return typeof pe==typeof xe&&pe>xe}],"filter-id->":[Bt,[Re],function(M,P){var G=P[0],oe=M.id(),pe=G.value;return typeof oe==typeof pe&&oe>pe}],"filter-<=":[Bt,[yt,Re],function(M,P){var G=P[0],oe=P[1],pe=M.properties()[G.value],xe=oe.value;return typeof pe==typeof xe&&pe<=xe}],"filter-id-<=":[Bt,[Re],function(M,P){var G=P[0],oe=M.id(),pe=G.value;return typeof oe==typeof pe&&oe<=pe}],"filter->=":[Bt,[yt,Re],function(M,P){var G=P[0],oe=P[1],pe=M.properties()[G.value],xe=oe.value;return typeof pe==typeof xe&&pe>=xe}],"filter-id->=":[Bt,[Re],function(M,P){var G=P[0],oe=M.id(),pe=G.value;return typeof oe==typeof pe&&oe>=pe}],"filter-has":[Bt,[Re],function(M,P){return P[0].value in M.properties()}],"filter-has-id":[Bt,[],function(M){return null!==M.id()&&void 0!==M.id()}],"filter-type-in":[Bt,[Zt(yt)],function(M,P){return P[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Bt,[Zt(Re)],function(M,P){return P[0].value.indexOf(M.id())>=0}],"filter-in-small":[Bt,[yt,Zt(Re)],function(M,P){var G=P[0];return P[1].value.indexOf(M.properties()[G.value])>=0}],"filter-in-large":[Bt,[yt,Zt(Re)],function(M,P){var G=P[0],oe=P[1];return function(pe,xe,Ee,Ne){for(;Ee<=Ne;){var tt=Ee+Ne>>1;if(xe[tt]===pe)return!0;xe[tt]>pe?Ne=tt-1:Ee=tt+1}return!1}(M.properties()[G.value],oe.value,0,oe.value.length-1)}],all:{type:Bt,overloads:[[[Bt,Bt],function(M,P){var oe=P[1];return P[0].evaluate(M)&&oe.evaluate(M)}],[yo(Bt),function(M,P){for(var G=0,oe=P;G<oe.length;G+=1)if(!oe[G].evaluate(M))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],function(M,P){var oe=P[1];return P[0].evaluate(M)||oe.evaluate(M)}],[yo(Bt),function(M,P){for(var G=0,oe=P;G<oe.length;G+=1)if(oe[G].evaluate(M))return!0;return!1}]]},"!":[Bt,[Bt],function(M,P){return!P[0].evaluate(M)}],"is-supported-script":[Bt,[yt],function(M,P){var oe=M.globals&&M.globals.isSupportedScript;return!oe||oe(P[0].evaluate(M))}],upcase:[yt,[yt],function(M,P){return P[0].evaluate(M).toUpperCase()}],downcase:[yt,[yt],function(M,P){return P[0].evaluate(M).toLowerCase()}],concat:[yt,yo(Re),function(M,P){return P.map(function(G){return zn(G.evaluate(M))}).join("")}],"resolved-locale":[yt,[ht],function(M,P){return P[0].evaluate(M).resolvedLocale()}]});var rr=function(M,P){var G;this.expression=M,this._warningHistory={},this._evaluator=new Tn,this._defaultValue=P?"color"===(G=P).type&&je(G.default)?new dr(0,0,0,0):"color"===G.type?dr.parse(G.default)||null:void 0===G.default?null:G.default:null,this._enumValues=P&&"enum"===P.type?P.values:null};function ir(M){return Array.isArray(M)&&M.length>0&&"string"==typeof M[0]&&M[0]in Lo}function $t(M,P){var pe,xe,G=new Mn(Lo,[],P?(xe={color:Ut,string:yt,number:$e,enum:yt,boolean:Bt,formatted:Mt,resolvedImage:Nt},"array"===(pe=P).type?Zt(xe[pe.value]||Re,pe.length):xe[pe.type]):void 0),oe=G.parse(M,void 0,void 0,void 0,P&&"string"===P.type?{typeAnnotation:"coerce"}:void 0);return oe?ps(new rr(oe,P)):uo(G.errors)}rr.prototype.evaluateWithoutErrorHandling=function(M,P,G,oe,pe,xe){return this._evaluator.globals=M,this._evaluator.feature=P,this._evaluator.featureState=G,this._evaluator.canonical=oe,this._evaluator.availableImages=pe||null,this._evaluator.formattedSection=xe,this.expression.evaluate(this._evaluator)},rr.prototype.evaluate=function(M,P,G,oe,pe,xe){this._evaluator.globals=M,this._evaluator.feature=P||null,this._evaluator.featureState=G||null,this._evaluator.canonical=oe,this._evaluator.availableImages=pe||null,this._evaluator.formattedSection=xe||null;try{var Ee=this.expression.evaluate(this._evaluator);if(null==Ee||"number"==typeof Ee&&Ee!=Ee)return this._defaultValue;if(this._enumValues&&!(Ee in this._enumValues))throw new In("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ne){return JSON.stringify(Ne)}).join(", ")+", but found "+JSON.stringify(Ee)+" instead.");return Ee}catch(Ne){return this._warningHistory[Ne.message]||(this._warningHistory[Ne.message]=!0,"undefined"!=typeof console&&console.warn(Ne.message)),this._defaultValue}};var sr=function(M,P){this.kind=M,this._styleExpression=P,this.isStateDependent="constant"!==M&&!Zr(P.expression)};sr.prototype.evaluateWithoutErrorHandling=function(M,P,G,oe,pe,xe){return this._styleExpression.evaluateWithoutErrorHandling(M,P,G,oe,pe,xe)},sr.prototype.evaluate=function(M,P,G,oe,pe,xe){return this._styleExpression.evaluate(M,P,G,oe,pe,xe)};var gr=function(M,P,G,oe){this.kind=M,this.zoomStops=G,this._styleExpression=P,this.isStateDependent="camera"!==M&&!Zr(P.expression),this.interpolationType=oe};function Tr(M,P){if("error"===(M=$t(M,P)).result)return M;var G=M.value.expression,oe=yn(G);if(!oe&&!Bo(P))return uo([new ut("","data expressions not supported")]);var pe=Wr(G,["zoom"]);if(!pe&&!ds(P))return uo([new ut("","zoom expressions not supported")]);var xe=function Ne(tt){var dt=null;if(tt instanceof Aa)dt=Ne(tt.result);else if(tt instanceof lo)for(var wt=0,qt=tt.args;wt<qt.length&&!(dt=Ne(qt[wt]));wt+=1);else(tt instanceof hi||tt instanceof Ji)&&tt.input instanceof rn&&"zoom"===tt.input.name&&(dt=tt);return dt instanceof ut||tt.eachChild(function(Kt){var ur=Ne(Kt);ur instanceof ut?dt=ur:!dt&&ur?dt=new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):dt&&ur&&dt!==ur&&(dt=new ut("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),dt}(G);return xe||pe?xe instanceof ut?uo([xe]):xe instanceof Ji&&!Io(P)?uo([new ut("",'"interpolate" expressions cannot be used with this property')]):ps(xe?new gr(oe?"camera":"composite",M.value,xe.labels,xe instanceof Ji?xe.interpolation:void 0):new sr(oe?"constant":"source",M.value)):uo([new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}gr.prototype.evaluateWithoutErrorHandling=function(M,P,G,oe,pe,xe){return this._styleExpression.evaluateWithoutErrorHandling(M,P,G,oe,pe,xe)},gr.prototype.evaluate=function(M,P,G,oe,pe,xe){return this._styleExpression.evaluate(M,P,G,oe,pe,xe)},gr.prototype.interpolationFactor=function(M,P,G){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,M,P,G):0};var Ar=function(M,P){this._parameters=M,this._specification=P,vt(this,function G(oe,pe){var xe,Ee,Ne,tt="color"===pe.type,dt=oe.stops&&"object"==typeof oe.stops[0][0],qt=dt||!(dt||void 0!==oe.property),tr=oe.type||(Io(pe)?"exponential":"interval");if(tt&&((oe=vt({},oe)).stops&&(oe.stops=oe.stops.map(function(pi){return[pi[0],dr.parse(pi[1])]})),oe.default=dr.parse(oe.default?oe.default:pe.default)),oe.colorSpace&&"rgb"!==oe.colorSpace&&!Uo[oe.colorSpace])throw new Error("Unknown color space: "+oe.colorSpace);if("exponential"===tr)xe=mt;else if("interval"===tr)xe=_t;else if("categorical"===tr){xe=lt,Ee=Object.create(null);for(var Kt=0,ur=oe.stops;Kt<ur.length;Kt+=1){var wr=ur[Kt];Ee[wr[0]]=wr[1]}Ne=typeof oe.stops[0][0]}else{if("identity"!==tr)throw new Error('Unknown function type "'+tr+'"');xe=Ct}if(dt){for(var Fr={},Rr=[],Yr=0;Yr<oe.stops.length;Yr++){var Gr=oe.stops[Yr],en=Gr[0].zoom;void 0===Fr[en]&&(Fr[en]={zoom:en,type:oe.type,property:oe.property,default:oe.default,stops:[]},Rr.push(en)),Fr[en].stops.push([Gr[0].value,Gr[1]])}for(var bn=[],Sn=0,Wn=Rr;Sn<Wn.length;Sn+=1){var Gn=Wn[Sn];bn.push([Fr[Gn].zoom,G(Fr[Gn],pe)])}var ei={name:"linear"};return{kind:"composite",interpolationType:ei,interpolationFactor:Ji.interpolationFactor.bind(void 0,ei),zoomStops:bn.map(function(pi){return pi[0]}),evaluate:function(pi,ni){var bi=pi.zoom;return mt({stops:bn,base:oe.base},pe,bi).evaluate(bi,ni)}}}if(qt){var fi="exponential"===tr?{name:"exponential",base:void 0!==oe.base?oe.base:1}:null;return{kind:"camera",interpolationType:fi,interpolationFactor:Ji.interpolationFactor.bind(void 0,fi),zoomStops:oe.stops.map(function(pi){return pi[0]}),evaluate:function(pi){return xe(oe,pe,pi.zoom,Ee,Ne)}}}return{kind:"source",evaluate:function(pi,ni){var bi=ni&&ni.properties?ni.properties[oe.property]:void 0;return void 0===bi?nt(oe.default,pe.default):xe(oe,pe,bi,Ee,Ne)}}}(this._parameters,this._specification))};function Br(M){var P=M.key,G=M.value,oe=M.valueSpec||{},pe=M.objectElementValidators||{},xe=M.style,Ee=M.styleSpec,Ne=[],tt=Gi(G);if("object"!==tt)return[new et(P,G,"object expected, "+tt+" found")];for(var dt in G){var wt=dt.split(".")[0],qt=oe[wt]||oe["*"],tr=void 0;if(pe[wt])tr=pe[wt];else if(oe[wt])tr=hr;else if(pe["*"])tr=pe["*"];else{if(!oe["*"]){Ne.push(new et(P,G[dt],'unknown property "'+dt+'"'));continue}tr=hr}Ne=Ne.concat(tr({key:(P&&P+".")+dt,value:G[dt],valueSpec:qt,style:xe,styleSpec:Ee,object:G,objectKey:dt},G))}for(var Kt in oe)pe[Kt]||oe[Kt].required&&void 0===oe[Kt].default&&void 0===G[Kt]&&Ne.push(new et(P,G,'missing required property "'+Kt+'"'));return Ne}function un(M){var P=M.value,G=M.valueSpec,oe=M.style,pe=M.styleSpec,xe=M.key,Ee=M.arrayElementValidator||hr;if("array"!==Gi(P))return[new et(xe,P,"array expected, "+Gi(P)+" found")];if(G.length&&P.length!==G.length)return[new et(xe,P,"array length "+G.length+" expected, length "+P.length+" found")];if(G["min-length"]&&P.length<G["min-length"])return[new et(xe,P,"array length at least "+G["min-length"]+" expected, length "+P.length+" found")];var Ne={type:G.value,values:G.values};pe.$version<7&&(Ne.function=G.function),"object"===Gi(G.value)&&(Ne=G.value);for(var tt=[],dt=0;dt<P.length;dt++)tt=tt.concat(Ee({array:P,arrayIndex:dt,value:P[dt],valueSpec:Ne,style:oe,styleSpec:pe,key:xe+"["+dt+"]"}));return tt}function xn(M){var P=M.key,G=M.value,oe=M.valueSpec,pe=Gi(G);return"number"===pe&&G!=G&&(pe="NaN"),"number"!==pe?[new et(P,G,"number expected, "+pe+" found")]:"minimum"in oe&&G<oe.minimum?[new et(P,G,G+" is less than the minimum value "+oe.minimum)]:"maximum"in oe&&G>oe.maximum?[new et(P,G,G+" is greater than the maximum value "+oe.maximum)]:[]}function Fn(M){var P,G,oe,pe=M.valueSpec,xe=ft(M.value.type),Ee={},Ne="categorical"!==xe&&void 0===M.value.property,tt=!Ne,dt="array"===Gi(M.value.stops)&&"array"===Gi(M.value.stops[0])&&"object"===Gi(M.value.stops[0][0]),wt=Br({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Kt){if("identity"===xe)return[new et(Kt.key,Kt.value,'identity function may not have a "stops" property')];var ur=[],wr=Kt.value;return ur=ur.concat(un({key:Kt.key,value:wr,valueSpec:Kt.valueSpec,style:Kt.style,styleSpec:Kt.styleSpec,arrayElementValidator:qt})),"array"===Gi(wr)&&0===wr.length&&ur.push(new et(Kt.key,wr,"array must have at least one stop")),ur},default:function(Kt){return hr({key:Kt.key,value:Kt.value,valueSpec:pe,style:Kt.style,styleSpec:Kt.styleSpec})}}});return"identity"===xe&&Ne&&wt.push(new et(M.key,M.value,'missing required property "property"')),"identity"===xe||M.value.stops||wt.push(new et(M.key,M.value,'missing required property "stops"')),"exponential"===xe&&M.valueSpec.expression&&!Io(M.valueSpec)&&wt.push(new et(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(tt&&!Bo(M.valueSpec)?wt.push(new et(M.key,M.value,"property functions not supported")):Ne&&!ds(M.valueSpec)&&wt.push(new et(M.key,M.value,"zoom functions not supported"))),"categorical"!==xe&&!dt||void 0!==M.value.property||wt.push(new et(M.key,M.value,'"property" property is required')),wt;function qt(Kt){var ur=[],wr=Kt.value,Fr=Kt.key;if("array"!==Gi(wr))return[new et(Fr,wr,"array expected, "+Gi(wr)+" found")];if(2!==wr.length)return[new et(Fr,wr,"array length 2 expected, length "+wr.length+" found")];if(dt){if("object"!==Gi(wr[0]))return[new et(Fr,wr,"object expected, "+Gi(wr[0])+" found")];if(void 0===wr[0].zoom)return[new et(Fr,wr,"object stop key must have zoom")];if(void 0===wr[0].value)return[new et(Fr,wr,"object stop key must have value")];if(oe&&oe>ft(wr[0].zoom))return[new et(Fr,wr[0].zoom,"stop zoom values must appear in ascending order")];ft(wr[0].zoom)!==oe&&(oe=ft(wr[0].zoom),G=void 0,Ee={}),ur=ur.concat(Br({key:Fr+"[0]",value:wr[0],valueSpec:{zoom:{}},style:Kt.style,styleSpec:Kt.styleSpec,objectElementValidators:{zoom:xn,value:tr}}))}else ur=ur.concat(tr({key:Fr+"[0]",value:wr[0],valueSpec:{},style:Kt.style,styleSpec:Kt.styleSpec},wr));return ir(It(wr[1]))?ur.concat([new et(Fr+"[1]",wr[1],"expressions are not allowed in function stops.")]):ur.concat(hr({key:Fr+"[1]",value:wr[1],valueSpec:pe,style:Kt.style,styleSpec:Kt.styleSpec}))}function tr(Kt,ur){var wr=Gi(Kt.value),Fr=ft(Kt.value),Rr=null!==Kt.value?Kt.value:ur;if(P){if(wr!==P)return[new et(Kt.key,Rr,wr+" stop domain type must match previous stop domain type "+P)]}else P=wr;if("number"!==wr&&"string"!==wr&&"boolean"!==wr)return[new et(Kt.key,Rr,"stop domain value must be a number, string, or boolean")];if("number"!==wr&&"categorical"!==xe){var Yr="number expected, "+wr+" found";return Bo(pe)&&void 0===xe&&(Yr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new et(Kt.key,Rr,Yr)]}return"categorical"!==xe||"number"!==wr||isFinite(Fr)&&Math.floor(Fr)===Fr?"categorical"!==xe&&"number"===wr&&void 0!==G&&Fr<G?[new et(Kt.key,Rr,"stop domain values must appear in ascending order")]:(G=Fr,"categorical"===xe&&Fr in Ee?[new et(Kt.key,Rr,"stop domain values must be unique")]:(Ee[Fr]=!0,[])):[new et(Kt.key,Rr,"integer expected, found "+Fr)]}}function Hn(M){var P=("property"===M.expressionContext?Tr:$t)(It(M.value),M.valueSpec);if("error"===P.result)return P.value.map(function(oe){return new et(""+M.key+oe.key,M.value,oe.message)});var G=P.value.expression||P.value._styleExpression.expression;if("property"===M.expressionContext&&"text-font"===M.propertyKey&&!G.outputDefined())return[new et(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===M.expressionContext&&"layout"===M.propertyType&&!Zr(G))return[new et(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===M.expressionContext&&!Zr(G))return[new et(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&0===M.expressionContext.indexOf("cluster")){if(!Wr(G,["zoom","feature-state"]))return[new et(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===M.expressionContext&&!yn(G))return[new et(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Kn(M){var P=M.key,G=M.value,oe=M.valueSpec,pe=[];return Array.isArray(oe.values)?-1===oe.values.indexOf(ft(G))&&pe.push(new et(P,G,"expected one of ["+oe.values.join(", ")+"], "+JSON.stringify(G)+" found")):-1===Object.keys(oe.values).indexOf(ft(G))&&pe.push(new et(P,G,"expected one of ["+Object.keys(oe.values).join(", ")+"], "+JSON.stringify(G)+" found")),pe}function qn(M){if(!0===M||!1===M)return!0;if(!Array.isArray(M)||0===M.length)return!1;switch(M[0]){case"has":return M.length>=2&&"$id"!==M[1]&&"$type"!==M[1];case"in":return M.length>=3&&("string"!=typeof M[1]||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==M.length||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var P=0,G=M.slice(1);P<G.length;P+=1){var oe=G[P];if(!qn(oe)&&"boolean"!=typeof oe)return!1}return!0;default:return!0}}Ar.deserialize=function(M){return new Ar(M._parameters,M._specification)},Ar.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var wi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Li(M){if(null==M)return{filter:function(){return!0},needGeometry:!1};qn(M)||(M=Hi(M));var P=$t(M,wi);if("error"===P.result)throw new Error(P.value.map(function(G){return G.key+": "+G.message}).join(", "));return{filter:function(G,oe,pe){return P.value.evaluate(G,oe,{},pe)},needGeometry:function G(oe){if(!Array.isArray(oe))return!1;if("within"===oe[0])return!0;for(var pe=1;pe<oe.length;pe++)if(G(oe[pe]))return!0;return!1}(M)}}function Ri(M,P){return M<P?-1:M>P?1:0}function Hi(M){if(!M)return!0;var P,G=M[0];return M.length<=1?"any"!==G:"=="===G?Ui(M[1],M[2],"=="):"!="===G?ca(Ui(M[1],M[2],"==")):"<"===G||">"===G||"<="===G||">="===G?Ui(M[1],M[2],G):"any"===G?(P=M.slice(1),["any"].concat(P.map(Hi))):"all"===G?["all"].concat(M.slice(1).map(Hi)):"none"===G?["all"].concat(M.slice(1).map(Hi).map(ca)):"in"===G?ba(M[1],M.slice(2)):"!in"===G?ca(ba(M[1],M.slice(2))):"has"===G?va(M[1]):"!has"===G?ca(va(M[1])):"within"!==G||M}function Ui(M,P,G){switch(M){case"$type":return["filter-type-"+G,P];case"$id":return["filter-id-"+G,P];default:return["filter-"+G,M,P]}}function ba(M,P){if(0===P.length)return!1;switch(M){case"$type":return["filter-type-in",["literal",P]];case"$id":return["filter-id-in",["literal",P]];default:return P.length>200&&!P.some(function(G){return typeof G!=typeof P[0]})?["filter-in-large",M,["literal",P.sort(Ri)]]:["filter-in-small",M,["literal",P]]}}function va(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function ca(M){return["!",M]}function ua(M){return qn(It(M.value))?Hn(vt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function P(G){var oe=G.value,pe=G.key;if("array"!==Gi(oe))return[new et(pe,oe,"array expected, "+Gi(oe)+" found")];var xe,Ee=G.styleSpec,Ne=[];if(oe.length<1)return[new et(pe,oe,"filter array must have at least 1 element")];switch(Ne=Ne.concat(Kn({key:pe+"[0]",value:oe[0],valueSpec:Ee.filter_operator,style:G.style,styleSpec:G.styleSpec})),ft(oe[0])){case"<":case"<=":case">":case">=":oe.length>=2&&"$type"===ft(oe[1])&&Ne.push(new et(pe,oe,'"$type" cannot be use with operator "'+oe[0]+'"'));case"==":case"!=":3!==oe.length&&Ne.push(new et(pe,oe,'filter array for operator "'+oe[0]+'" must have 3 elements'));case"in":case"!in":oe.length>=2&&"string"!==(xe=Gi(oe[1]))&&Ne.push(new et(pe+"[1]",oe[1],"string expected, "+xe+" found"));for(var tt=2;tt<oe.length;tt++)xe=Gi(oe[tt]),"$type"===ft(oe[1])?Ne=Ne.concat(Kn({key:pe+"["+tt+"]",value:oe[tt],valueSpec:Ee.geometry_type,style:G.style,styleSpec:G.styleSpec})):"string"!==xe&&"number"!==xe&&"boolean"!==xe&&Ne.push(new et(pe+"["+tt+"]",oe[tt],"string, number, or boolean expected, "+xe+" found"));break;case"any":case"all":case"none":for(var dt=1;dt<oe.length;dt++)Ne=Ne.concat(P({key:pe+"["+dt+"]",value:oe[dt],style:G.style,styleSpec:G.styleSpec}));break;case"has":case"!has":xe=Gi(oe[1]),2!==oe.length?Ne.push(new et(pe,oe,'filter array for "'+oe[0]+'" operator must have 2 elements')):"string"!==xe&&Ne.push(new et(pe+"[1]",oe[1],"string expected, "+xe+" found"));break;case"within":xe=Gi(oe[1]),2!==oe.length?Ne.push(new et(pe,oe,'filter array for "'+oe[0]+'" operator must have 2 elements')):"object"!==xe&&Ne.push(new et(pe+"[1]",oe[1],"object expected, "+xe+" found"))}return Ne}(M)}function da(M,P){var G=M.key,oe=M.style,pe=M.styleSpec,xe=M.value,Ee=M.objectKey,Ne=pe[P+"_"+M.layerType];if(!Ne)return[];var tt=Ee.match(/^(.*)-transition$/);if("paint"===P&&tt&&Ne[tt[1]]&&Ne[tt[1]].transition)return hr({key:G,value:xe,valueSpec:pe.transition,style:oe,styleSpec:pe});var dt,wt=M.valueSpec||Ne[Ee];if(!wt)return[new et(G,xe,'unknown property "'+Ee+'"')];if("string"===Gi(xe)&&Bo(wt)&&!wt.tokens&&(dt=/^{([^}]+)}$/.exec(xe)))return[new et(G,xe,'"'+Ee+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(dt[1])+" }`.")];var qt=[];return"symbol"===M.layerType&&("text-field"===Ee&&oe&&!oe.glyphs&&qt.push(new et(G,xe,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ee&&je(It(xe))&&"identity"===ft(xe.type)&&qt.push(new et(G,xe,'"text-font" does not support identity functions'))),qt.concat(hr({key:M.key,value:xe,valueSpec:wt,style:oe,styleSpec:pe,expressionContext:"property",propertyType:P,propertyKey:Ee}))}function Ua(M){return da(M,"paint")}function no(M){return da(M,"layout")}function Ha(M){var P=[],G=M.value,oe=M.key,pe=M.style,xe=M.styleSpec;G.type||G.ref||P.push(new et(oe,G,'either "type" or "ref" is required'));var Ee,Ne=ft(G.type),tt=ft(G.ref);if(G.id)for(var dt=ft(G.id),wt=0;wt<M.arrayIndex;wt++){var qt=pe.layers[wt];ft(qt.id)===dt&&P.push(new et(oe,G.id,'duplicate layer id "'+G.id+'", previously used at line '+qt.id.__line__))}if("ref"in G)["type","source","source-layer","filter","layout"].forEach(function(ur){ur in G&&P.push(new et(oe,G[ur],'"'+ur+'" is prohibited for ref layers'))}),pe.layers.forEach(function(ur){ft(ur.id)===tt&&(Ee=ur)}),Ee?Ee.ref?P.push(new et(oe,G.ref,"ref cannot reference another ref layer")):Ne=ft(Ee.type):P.push(new et(oe,G.ref,'ref layer "'+tt+'" not found'));else if("background"!==Ne)if(G.source){var tr=pe.sources&&pe.sources[G.source],Kt=tr&&ft(tr.type);tr?"vector"===Kt&&"raster"===Ne?P.push(new et(oe,G.source,'layer "'+G.id+'" requires a raster source')):"raster"===Kt&&"raster"!==Ne?P.push(new et(oe,G.source,'layer "'+G.id+'" requires a vector source')):"vector"!==Kt||G["source-layer"]?"raster-dem"===Kt&&"hillshade"!==Ne?P.push(new et(oe,G.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ne||!G.paint||!G.paint["line-gradient"]||"geojson"===Kt&&tr.lineMetrics||P.push(new et(oe,G,'layer "'+G.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):P.push(new et(oe,G,'layer "'+G.id+'" must specify a "source-layer"')):P.push(new et(oe,G.source,'source "'+G.source+'" not found'))}else P.push(new et(oe,G,'missing required property "source"'));return P=P.concat(Br({key:oe,value:G,valueSpec:xe.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return hr({key:oe+".type",value:G.type,valueSpec:xe.layer.type,style:M.style,styleSpec:M.styleSpec,object:G,objectKey:"type"})},filter:ua,layout:function(ur){return Br({layer:G,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(wr){return no(vt({layerType:Ne},wr))}}})},paint:function(ur){return Br({layer:G,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(wr){return Ua(vt({layerType:Ne},wr))}}})}}}))}function io(M){var P=M.value,G=M.key,oe=Gi(P);return"string"!==oe?[new et(G,P,"string expected, "+oe+" found")]:[]}var Ka={promoteId:function(M){var P=M.key,G=M.value;if("string"===Gi(G))return io({key:P,value:G});var oe=[];for(var pe in G)oe.push.apply(oe,io({key:P+"."+pe,value:G[pe]}));return oe}};function Ni(M){var P=M.value,G=M.key,oe=M.styleSpec,pe=M.style;if(!P.type)return[new et(G,P,'"type" is required')];var xe,Ee=ft(P.type);switch(Ee){case"vector":case"raster":case"raster-dem":return Br({key:G,value:P,valueSpec:oe["source_"+Ee.replace("-","_")],style:M.style,styleSpec:oe,objectElementValidators:Ka});case"geojson":if(xe=Br({key:G,value:P,valueSpec:oe.source_geojson,style:pe,styleSpec:oe,objectElementValidators:Ka}),P.cluster)for(var Ne in P.clusterProperties){var tt=P.clusterProperties[Ne],dt=tt[0],qt="string"==typeof dt?[dt,["accumulated"],["get",Ne]]:dt;xe.push.apply(xe,Hn({key:G+"."+Ne+".map",value:tt[1],expressionContext:"cluster-map"})),xe.push.apply(xe,Hn({key:G+"."+Ne+".reduce",value:qt,expressionContext:"cluster-reduce"}))}return xe;case"video":return Br({key:G,value:P,valueSpec:oe.source_video,style:pe,styleSpec:oe});case"image":return Br({key:G,value:P,valueSpec:oe.source_image,style:pe,styleSpec:oe});case"canvas":return[new et(G,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kn({key:G+".type",value:P.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:oe})}}function gt(M){var P=M.value,G=M.styleSpec,oe=G.light,pe=M.style,xe=[],Ee=Gi(P);if(void 0===P)return xe;if("object"!==Ee)return xe.concat([new et("light",P,"object expected, "+Ee+" found")]);for(var Ne in P){var tt=Ne.match(/^(.*)-transition$/);xe=xe.concat(tt&&oe[tt[1]]&&oe[tt[1]].transition?hr({key:Ne,value:P[Ne],valueSpec:G.transition,style:pe,styleSpec:G}):oe[Ne]?hr({key:Ne,value:P[Ne],valueSpec:oe[Ne],style:pe,styleSpec:G}):[new et(Ne,P[Ne],'unknown property "'+Ne+'"')])}return xe}var Vt={"*":function(){return[]},array:un,boolean:function(M){var P=M.value,G=M.key,oe=Gi(P);return"boolean"!==oe?[new et(G,P,"boolean expected, "+oe+" found")]:[]},number:xn,color:function(M){var P=M.key,G=M.value,oe=Gi(G);return"string"!==oe?[new et(P,G,"color expected, "+oe+" found")]:null===xr(G)?[new et(P,G,'color expected, "'+G+'" found')]:[]},constants:ct,enum:Kn,filter:ua,function:Fn,layer:Ha,object:Br,source:Ni,light:gt,string:io,formatted:function(M){return 0===io(M).length?[]:Hn(M)},resolvedImage:function(M){return 0===io(M).length?[]:Hn(M)}};function hr(M){var P=M.value,G=M.valueSpec,oe=M.styleSpec;return G.expression&&je(ft(P))?Fn(M):G.expression&&ir(It(P))?Hn(M):G.type&&Vt[G.type]?Vt[G.type](M):Br(vt({},M,{valueSpec:G.type?oe[G.type]:G}))}function Jt(M){var P=M.value,G=M.key,oe=io(M);return oe.length||(-1===P.indexOf("{fontstack}")&&oe.push(new et(G,P,'"glyphs" url must include a "{fontstack}" token')),-1===P.indexOf("{range}")&&oe.push(new et(G,P,'"glyphs" url must include a "{range}" token'))),oe}function fr(M,P){void 0===P&&(P=Ie);var G=[];return G=G.concat(hr({key:"",value:M,valueSpec:P.$root,styleSpec:P,style:M,objectElementValidators:{glyphs:Jt,"*":function(){return[]}}})),M.constants&&(G=G.concat(ct({key:"constants",value:M.constants,style:M,styleSpec:P}))),zr(G)}function zr(M){return[].concat(M).sort(function(P,G){return P.line-G.line})}function Vr(M){return function(){for(var P=[],G=arguments.length;G--;)P[G]=arguments[G];return zr(M.apply(this,P))}}fr.source=Vr(Ni),fr.light=Vr(gt),fr.layer=Vr(Ha),fr.filter=Vr(ua),fr.paintProperty=Vr(Ua),fr.layoutProperty=Vr(no);var $r=fr,dn=$r.light,hn=$r.paintProperty,wn=$r.layoutProperty;function Ln(M,P){var G=!1;if(P&&P.length)for(var oe=0,pe=P;oe<pe.length;oe+=1)M.fire(new De(new Error(pe[oe].message))),G=!0;return G}var mn=En;function En(M,P,G){var oe=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var pe=new Int32Array(this.arrayBuffer);M=pe[0],this.d=(P=pe[1])+2*(G=pe[2]);for(var xe=0;xe<this.d*this.d;xe++){var Ee=pe[3+xe],Ne=pe[3+xe+1];oe.push(Ee===Ne?null:pe.subarray(Ee,Ne))}var dt=pe[3+oe.length+1];this.keys=pe.subarray(pe[3+oe.length],dt),this.bboxes=pe.subarray(dt),this.insert=this._insertReadonly}else{this.d=P+2*G;for(var wt=0;wt<this.d*this.d;wt++)oe.push([]);this.keys=[],this.bboxes=[]}this.n=P,this.extent=M,this.padding=G,this.scale=P/M,this.uid=0;var qt=G/P*M;this.min=-qt,this.max=M+qt}En.prototype.insert=function(M,P,G,oe,pe){this._forEachCell(P,G,oe,pe,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(P),this.bboxes.push(G),this.bboxes.push(oe),this.bboxes.push(pe)},En.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},En.prototype._insertCell=function(M,P,G,oe,pe,xe){this.cells[pe].push(xe)},En.prototype.query=function(M,P,G,oe,pe){var xe=this.min,Ee=this.max;if(M<=xe&&P<=xe&&Ee<=G&&Ee<=oe&&!pe)return Array.prototype.slice.call(this.keys);var Ne=[];return this._forEachCell(M,P,G,oe,this._queryCell,Ne,{},pe),Ne},En.prototype._queryCell=function(M,P,G,oe,pe,xe,Ee,Ne){var tt=this.cells[pe];if(null!==tt)for(var dt=this.keys,wt=this.bboxes,qt=0;qt<tt.length;qt++){var tr=tt[qt];if(void 0===Ee[tr]){var Kt=4*tr;(Ne?Ne(wt[Kt+0],wt[Kt+1],wt[Kt+2],wt[Kt+3]):M<=wt[Kt+2]&&P<=wt[Kt+3]&&G>=wt[Kt+0]&&oe>=wt[Kt+1])?(Ee[tr]=!0,xe.push(dt[tr])):Ee[tr]=!1}}},En.prototype._forEachCell=function(M,P,G,oe,pe,xe,Ee,Ne){for(var tt=this._convertToCellCoord(M),dt=this._convertToCellCoord(P),wt=this._convertToCellCoord(G),qt=this._convertToCellCoord(oe),tr=tt;tr<=wt;tr++)for(var Kt=dt;Kt<=qt;Kt++){var ur=this.d*Kt+tr;if((!Ne||Ne(this._convertFromCellCoord(tr),this._convertFromCellCoord(Kt),this._convertFromCellCoord(tr+1),this._convertFromCellCoord(Kt+1)))&&pe.call(this,M,P,G,oe,ur,xe,Ee,Ne))return}},En.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},En.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},En.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,P=3+this.cells.length+1+1,G=0,oe=0;oe<this.cells.length;oe++)G+=this.cells[oe].length;var pe=new Int32Array(P+G+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var xe=P,Ee=0;Ee<M.length;Ee++){var Ne=M[Ee];pe[3+Ee]=xe,pe.set(Ne,xe),xe+=Ne.length}return pe[3+M.length]=xe,pe.set(this.keys,xe),pe[3+M.length+1]=xe+=this.keys.length,pe.set(this.bboxes,xe),xe+=this.bboxes.length,pe.buffer};var Yn=self.ImageData,Jn=self.ImageBitmap,si={};function nn(M,P,G){void 0===G&&(G={}),Object.defineProperty(P,"_classRegistryKey",{value:M,writeable:!1}),si[M]={klass:P,omit:G.omit||[],shallow:G.shallow||[]}}for(var oi in nn("Object",Object),mn.serialize=function(M,P){var G=M.toArrayBuffer();return P&&P.push(G),{buffer:G}},mn.deserialize=function(M){return new mn(M.buffer)},nn("Grid",mn),nn("Color",dr),nn("Error",Error),nn("ResolvedImage",kr),nn("StylePropertyFunction",Ar),nn("StyleExpression",rr,{omit:["_evaluator"]}),nn("ZoomDependentExpression",gr),nn("ZoomConstantExpression",sr),nn("CompoundExpression",rn,{omit:["_evaluate"]}),Lo)Lo[oi]._classRegistryKey||nn("Expression_"+oi,Lo[oi]);function Bn(M){return M&&"undefined"!=typeof ArrayBuffer&&(M instanceof ArrayBuffer||M.constructor&&"ArrayBuffer"===M.constructor.name)}function Zn(M){return Jn&&M instanceof Jn}function ii(M,P){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(Bn(M)||Zn(M))return P&&P.push(M),M;if(ArrayBuffer.isView(M)){var G=M;return P&&P.push(G.buffer),G}if(M instanceof Yn)return P&&P.push(M.data.buffer),M;if(Array.isArray(M)){for(var oe=[],pe=0,xe=M;pe<xe.length;pe+=1)oe.push(ii(xe[pe],P));return oe}if("object"==typeof M){var Ne=M.constructor,tt=Ne._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var dt=Ne.serialize?Ne.serialize(M,P):{};if(!Ne.serialize){for(var wt in M)if(M.hasOwnProperty(wt)&&!(si[tt].omit.indexOf(wt)>=0)){var qt=M[wt];dt[wt]=si[tt].shallow.indexOf(wt)>=0?qt:ii(qt,P)}M instanceof Error&&(dt.message=M.message)}if(dt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==tt&&(dt.$name=tt),dt}throw new Error("can't serialize object of type "+typeof M)}function Ai(M){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||Bn(M)||Zn(M)||ArrayBuffer.isView(M)||M instanceof Yn)return M;if(Array.isArray(M))return M.map(Ai);if("object"==typeof M){var P=M.$name||"Object",G=si[P].klass;if(!G)throw new Error("can't deserialize unregistered class "+P);if(G.deserialize)return G.deserialize(M);for(var oe=Object.create(G.prototype),pe=0,xe=Object.keys(M);pe<xe.length;pe+=1){var Ee=xe[pe];if("$name"!==Ee){var Ne=M[Ee];oe[Ee]=si[P].shallow.indexOf(Ee)>=0?Ne:Ai(Ne)}}return oe}throw new Error("can't deserialize object of type "+typeof M)}var zi=function(){this.first=!0};zi.prototype.update=function(M,P){var G=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=G,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=G,!0):(this.lastFloorZoom>G?(this.lastIntegerZoom=G+1,this.lastIntegerZoomTime=P):this.lastFloorZoom<G&&(this.lastIntegerZoom=G,this.lastIntegerZoomTime=P),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=G,!0))};var Rn={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function ji(M){for(var P=0,G=M;P<G.length;P+=1)if(xi(G[P].charCodeAt(0)))return!0;return!1}function Pi(M){return!(Rn.Arabic(M)||Rn["Arabic Supplement"](M)||Rn["Arabic Extended-A"](M)||Rn["Arabic Presentation Forms-A"](M)||Rn["Arabic Presentation Forms-B"](M))}function xi(M){return!(746!==M&&747!==M&&(M<4352||!(Rn["Bopomofo Extended"](M)||Rn.Bopomofo(M)||Rn["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||Rn["CJK Compatibility Ideographs"](M)||Rn["CJK Compatibility"](M)||Rn["CJK Radicals Supplement"](M)||Rn["CJK Strokes"](M)||!(!Rn["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||12336===M)||Rn["CJK Unified Ideographs Extension A"](M)||Rn["CJK Unified Ideographs"](M)||Rn["Enclosed CJK Letters and Months"](M)||Rn["Hangul Compatibility Jamo"](M)||Rn["Hangul Jamo Extended-A"](M)||Rn["Hangul Jamo Extended-B"](M)||Rn["Hangul Jamo"](M)||Rn["Hangul Syllables"](M)||Rn.Hiragana(M)||Rn["Ideographic Description Characters"](M)||Rn.Kanbun(M)||Rn["Kangxi Radicals"](M)||Rn["Katakana Phonetic Extensions"](M)||Rn.Katakana(M)&&12540!==M||!(!Rn["Halfwidth and Fullwidth Forms"](M)||65288===M||65289===M||65293===M||M>=65306&&M<=65310||65339===M||65341===M||65343===M||M>=65371&&M<=65503||65507===M||M>=65512&&M<=65519)||!(!Rn["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||Rn["Unified Canadian Aboriginal Syllabics"](M)||Rn["Unified Canadian Aboriginal Syllabics Extended"](M)||Rn["Vertical Forms"](M)||Rn["Yijing Hexagram Symbols"](M)||Rn["Yi Syllables"](M)||Rn["Yi Radicals"](M))))}function Vi(M){return!(xi(M)||(P=M,Rn["Latin-1 Supplement"](P)&&(167===P||169===P||174===P||177===P||188===P||189===P||190===P||215===P||247===P)||Rn["General Punctuation"](P)&&(8214===P||8224===P||8225===P||8240===P||8241===P||8251===P||8252===P||8258===P||8263===P||8264===P||8265===P||8273===P)||Rn["Letterlike Symbols"](P)||Rn["Number Forms"](P)||Rn["Miscellaneous Technical"](P)&&(P>=8960&&P<=8967||P>=8972&&P<=8991||P>=8996&&P<=9e3||9003===P||P>=9085&&P<=9114||P>=9150&&P<=9165||9167===P||P>=9169&&P<=9179||P>=9186&&P<=9215)||Rn["Control Pictures"](P)&&9251!==P||Rn["Optical Character Recognition"](P)||Rn["Enclosed Alphanumerics"](P)||Rn["Geometric Shapes"](P)||Rn["Miscellaneous Symbols"](P)&&!(P>=9754&&P<=9759)||Rn["Miscellaneous Symbols and Arrows"](P)&&(P>=11026&&P<=11055||P>=11088&&P<=11097||P>=11192&&P<=11243)||Rn["CJK Symbols and Punctuation"](P)||Rn.Katakana(P)||Rn["Private Use Area"](P)||Rn["CJK Compatibility Forms"](P)||Rn["Small Form Variants"](P)||Rn["Halfwidth and Fullwidth Forms"](P)||8734===P||8756===P||8757===P||P>=9984&&P<=10087||P>=10102&&P<=10131||65532===P||65533===P));var P}function Di(M){return M>=1424&&M<=2303||Rn["Arabic Presentation Forms-A"](M)||Rn["Arabic Presentation Forms-B"](M)}function ra(M,P){return!(!P&&Di(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||Rn.Khmer(M))}function li(M){for(var P=0,G=M;P<G.length;P+=1)if(Di(G[P].charCodeAt(0)))return!0;return!1}var Qi="deferred",qa="loading",ts="loaded",xo=null,ki="unavailable",ya=null,ho=function(M){M&&"string"==typeof M&&M.indexOf("NetworkError")>-1&&(ki="error"),xo&&xo(M)};function Zi(){Sa.fire(new Ae("pluginStateChange",{pluginStatus:ki,pluginURL:ya}))}var Sa=new Oe,Ya=function(){return ki},na=function(){if(ki!==Qi||!ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ki=qa,Zi(),ya&&Et({url:ya},function(M){M?ho(M):(ki=ts,Zi())})},fo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ki===ts||null!=fo.applyArabicShaping},isLoading:function(){return ki===qa},setState:function(M){ki=M.pluginStatus,ya=M.pluginURL},isParsed:function(){return null!=fo.applyArabicShaping&&null!=fo.processBidirectionalText&&null!=fo.processStyledBidirectionalText},getPluginURL:function(){return ya}},aa=function(M,P){this.zoom=M,P?(this.now=P.now,this.fadeDuration=P.fadeDuration,this.zoomHistory=P.zoomHistory,this.transition=P.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zi,this.transition={})};aa.prototype.isSupportedScript=function(M){return function(P,G){for(var oe=0,pe=P;oe<pe.length;oe+=1)if(!ra(pe[oe].charCodeAt(0),G))return!1;return!0}(M,fo.isLoaded())},aa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},aa.prototype.getCrossfadeParameters=function(){var M=this.zoom,P=M-Math.floor(M),G=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:P+(1-P)*G}:{fromScale:.5,toScale:1,t:1-(1-G)*P}};var ao=function(M,P){this.property=M,this.value=P,this.expression=function(G,oe){if(je(G))return new Ar(G,oe);if(ir(G)){var pe=Tr(G,oe);if("error"===pe.result)throw new Error(pe.value.map(function(Ee){return Ee.key+": "+Ee.message}).join(", "));return pe.value}var xe=G;return"string"==typeof G&&"color"===oe.type&&(xe=dr.parse(G)),{kind:"constant",evaluate:function(){return xe}}}(void 0===P?M.specification.default:P,M.specification)};ao.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ao.prototype.possiblyEvaluate=function(M,P,G){return this.property.possiblyEvaluate(this,M,P,G)};var ls=function(M){this.property=M,this.value=new ao(M,void 0)};ls.prototype.transitioned=function(M,P){return new Ps(this.property,this.value,P,h({},M.transition,this.transition),M.now)},ls.prototype.untransitioned=function(){return new Ps(this.property,this.value,null,{},0)};var rs=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};rs.prototype.getValue=function(M){return T(this._values[M].value.value)},rs.prototype.setValue=function(M,P){this._values.hasOwnProperty(M)||(this._values[M]=new ls(this._values[M].property)),this._values[M].value=new ao(this._values[M].property,null===P?void 0:T(P))},rs.prototype.getTransition=function(M){return T(this._values[M].transition)},rs.prototype.setTransition=function(M,P){this._values.hasOwnProperty(M)||(this._values[M]=new ls(this._values[M].property)),this._values[M].transition=T(P)||void 0},rs.prototype.serialize=function(){for(var M={},P=0,G=Object.keys(this._values);P<G.length;P+=1){var oe=G[P],pe=this.getValue(oe);void 0!==pe&&(M[oe]=pe);var xe=this.getTransition(oe);void 0!==xe&&(M[oe+"-transition"]=xe)}return M},rs.prototype.transitioned=function(M,P){for(var G=new Ia(this._properties),oe=0,pe=Object.keys(this._values);oe<pe.length;oe+=1){var xe=pe[oe];G._values[xe]=this._values[xe].transitioned(M,P._values[xe])}return G},rs.prototype.untransitioned=function(){for(var M=new Ia(this._properties),P=0,G=Object.keys(this._values);P<G.length;P+=1){var oe=G[P];M._values[oe]=this._values[oe].untransitioned()}return M};var Ps=function(M,P,G,oe,pe){this.property=M,this.value=P,this.begin=pe+oe.delay||0,this.end=this.begin+oe.duration||0,M.specification.transition&&(oe.delay||oe.duration)&&(this.prior=G)};Ps.prototype.possiblyEvaluate=function(M,P,G){var oe=M.now||0,pe=this.value.possiblyEvaluate(M,P,G),xe=this.prior;if(xe){if(oe>this.end)return this.prior=null,pe;if(this.value.isDataDriven())return this.prior=null,pe;if(oe<this.begin)return xe.possiblyEvaluate(M,P,G);var Ee=(oe-this.begin)/(this.end-this.begin);return this.property.interpolate(xe.possiblyEvaluate(M,P,G),pe,function(Ne){if(Ne<=0)return 0;if(Ne>=1)return 1;var tt=Ne*Ne,dt=tt*Ne;return 4*(Ne<.5?dt:3*(Ne-tt)+dt-.75)}(Ee))}return pe};var Ia=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Ia.prototype.possiblyEvaluate=function(M,P,G){for(var oe=new ns(this._properties),pe=0,xe=Object.keys(this._values);pe<xe.length;pe+=1){var Ee=xe[pe];oe._values[Ee]=this._values[Ee].possiblyEvaluate(M,P,G)}return oe},Ia.prototype.hasTransition=function(){for(var M=0,P=Object.keys(this._values);M<P.length;M+=1)if(this._values[P[M]].prior)return!0;return!1};var Ss=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};Ss.prototype.getValue=function(M){return T(this._values[M].value)},Ss.prototype.setValue=function(M,P){this._values[M]=new ao(this._values[M].property,null===P?void 0:T(P))},Ss.prototype.serialize=function(){for(var M={},P=0,G=Object.keys(this._values);P<G.length;P+=1){var oe=G[P],pe=this.getValue(oe);void 0!==pe&&(M[oe]=pe)}return M},Ss.prototype.possiblyEvaluate=function(M,P,G){for(var oe=new ns(this._properties),pe=0,xe=Object.keys(this._values);pe<xe.length;pe+=1){var Ee=xe[pe];oe._values[Ee]=this._values[Ee].possiblyEvaluate(M,P,G)}return oe};var Pa=function(M,P,G){this.property=M,this.value=P,this.parameters=G};Pa.prototype.isConstant=function(){return"constant"===this.value.kind},Pa.prototype.constantOr=function(M){return"constant"===this.value.kind?this.value.value:M},Pa.prototype.evaluate=function(M,P,G,oe){return this.property.evaluate(this.value,this.parameters,M,P,G,oe)};var ns=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};ns.prototype.get=function(M){return this._values[M]};var mi=function(M){this.specification=M};mi.prototype.possiblyEvaluate=function(M,P){return M.expression.evaluate(P)},mi.prototype.interpolate=function(M,P,G){var oe=An[this.specification.type];return oe?oe(M,P,G):M};var Ti=function(M,P){this.specification=M,this.overrides=P};Ti.prototype.possiblyEvaluate=function(M,P,G,oe){return new Pa(this,"constant"===M.expression.kind||"camera"===M.expression.kind?{kind:"constant",value:M.expression.evaluate(P,null,{},G,oe)}:M.expression,P)},Ti.prototype.interpolate=function(M,P,G){if("constant"!==M.value.kind||"constant"!==P.value.kind)return M;if(void 0===M.value.value||void 0===P.value.value)return new Pa(this,{kind:"constant",value:void 0},M.parameters);var oe=An[this.specification.type];return oe?new Pa(this,{kind:"constant",value:oe(M.value.value,P.value.value,G)},M.parameters):M},Ti.prototype.evaluate=function(M,P,G,oe,pe,xe){return"constant"===M.kind?M.value:M.evaluate(P,G,oe,pe,xe)};var Ds=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.possiblyEvaluate=function(G,oe,pe,xe){if(void 0===G.value)return new Pa(this,{kind:"constant",value:void 0},oe);if("constant"===G.expression.kind){var Ee=G.expression.evaluate(oe,null,{},pe,xe),Ne="resolvedImage"===G.property.specification.type&&"string"!=typeof Ee?Ee.name:Ee,tt=this._calculate(Ne,Ne,Ne,oe);return new Pa(this,{kind:"constant",value:tt},oe)}if("camera"===G.expression.kind){var dt=this._calculate(G.expression.evaluate({zoom:oe.zoom-1}),G.expression.evaluate({zoom:oe.zoom}),G.expression.evaluate({zoom:oe.zoom+1}),oe);return new Pa(this,{kind:"constant",value:dt},oe)}return new Pa(this,G.expression,oe)},P.prototype.evaluate=function(G,oe,pe,xe,Ee,Ne){if("source"===G.kind){var tt=G.evaluate(oe,pe,xe,Ee,Ne);return this._calculate(tt,tt,tt,oe)}return"composite"===G.kind?this._calculate(G.evaluate({zoom:Math.floor(oe.zoom)-1},pe,xe),G.evaluate({zoom:Math.floor(oe.zoom)},pe,xe),G.evaluate({zoom:Math.floor(oe.zoom)+1},pe,xe),oe):G.value},P.prototype._calculate=function(G,oe,pe,xe){return xe.zoom>xe.zoomHistory.lastIntegerZoom?{from:G,to:oe}:{from:pe,to:oe}},P.prototype.interpolate=function(G){return G},P}(Ti),ws=function(M){this.specification=M};ws.prototype.possiblyEvaluate=function(M,P,G,oe){if(void 0!==M.value){if("constant"===M.expression.kind){var pe=M.expression.evaluate(P,null,{},G,oe);return this._calculate(pe,pe,pe,P)}return this._calculate(M.expression.evaluate(new aa(Math.floor(P.zoom-1),P)),M.expression.evaluate(new aa(Math.floor(P.zoom),P)),M.expression.evaluate(new aa(Math.floor(P.zoom+1),P)),P)}},ws.prototype._calculate=function(M,P,G,oe){return oe.zoom>oe.zoomHistory.lastIntegerZoom?{from:M,to:P}:{from:G,to:P}},ws.prototype.interpolate=function(M){return M};var is=function(M){this.specification=M};is.prototype.possiblyEvaluate=function(M,P,G,oe){return!!M.expression.evaluate(P,null,{},G,oe)},is.prototype.interpolate=function(){return!1};var Ao=function(M){for(var P in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var G=M[P];G.specification.overridable&&this.overridableProperties.push(P);var oe=this.defaultPropertyValues[P]=new ao(G,void 0),pe=this.defaultTransitionablePropertyValues[P]=new ls(G);this.defaultTransitioningPropertyValues[P]=pe.untransitioned(),this.defaultPossiblyEvaluatedValues[P]=oe.possiblyEvaluate({})}};nn("DataDrivenProperty",Ti),nn("DataConstantProperty",mi),nn("CrossFadedDataDrivenProperty",Ds),nn("CrossFadedProperty",ws),nn("ColorRampProperty",is);var Ho=function(M){function P(G,oe){if(M.call(this),this.id=G.id,this.type=G.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==G.type&&(this.metadata=(G=G).metadata,this.minzoom=G.minzoom,this.maxzoom=G.maxzoom,"background"!==G.type&&(this.source=G.source,this.sourceLayer=G["source-layer"],this.filter=G.filter),oe.layout&&(this._unevaluatedLayout=new Ss(oe.layout)),oe.paint)){for(var pe in this._transitionablePaint=new rs(oe.paint),G.paint)this.setPaintProperty(pe,G.paint[pe],{validate:!1});for(var xe in G.layout)this.setLayoutProperty(xe,G.layout[xe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ns(oe.paint)}}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},P.prototype.getLayoutProperty=function(G){return"visibility"===G?this.visibility:this._unevaluatedLayout.getValue(G)},P.prototype.setLayoutProperty=function(G,oe,pe){void 0===pe&&(pe={}),null!=oe&&this._validate(wn,"layers."+this.id+".layout."+G,G,oe,pe)||("visibility"!==G?this._unevaluatedLayout.setValue(G,oe):this.visibility=oe)},P.prototype.getPaintProperty=function(G){return w(G,"-transition")?this._transitionablePaint.getTransition(G.slice(0,-"-transition".length)):this._transitionablePaint.getValue(G)},P.prototype.setPaintProperty=function(G,oe,pe){if(void 0===pe&&(pe={}),null!=oe&&this._validate(hn,"layers."+this.id+".paint."+G,G,oe,pe))return!1;if(w(G,"-transition"))return this._transitionablePaint.setTransition(G.slice(0,-"-transition".length),oe||void 0),!1;var Ee=this._transitionablePaint._values[G],Ne="cross-faded-data-driven"===Ee.property.specification["property-type"],tt=Ee.value.isDataDriven(),dt=Ee.value;this._transitionablePaint.setValue(G,oe),this._handleSpecialPaintPropertyUpdate(G);var wt=this._transitionablePaint._values[G].value;return wt.isDataDriven()||tt||Ne||this._handleOverridablePaintPropertyUpdate(G,dt,wt)},P.prototype._handleSpecialPaintPropertyUpdate=function(G){},P.prototype._handleOverridablePaintPropertyUpdate=function(G,oe,pe){return!1},P.prototype.isHidden=function(G){return!!(this.minzoom&&G<this.minzoom)||!!(this.maxzoom&&G>=this.maxzoom)||"none"===this.visibility},P.prototype.updateTransitions=function(G){this._transitioningPaint=this._transitionablePaint.transitioned(G,this._transitioningPaint)},P.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},P.prototype.recalculate=function(G,oe){G.getCrossfadeParameters&&(this._crossfadeParameters=G.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(G,void 0,oe)),this.paint=this._transitioningPaint.possiblyEvaluate(G,void 0,oe)},P.prototype.serialize=function(){var G={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(G.layout=G.layout||{},G.layout.visibility=this.visibility),k(G,function(oe,pe){return!(void 0===oe||"layout"===pe&&!Object.keys(oe).length||"paint"===pe&&!Object.keys(oe).length)})},P.prototype._validate=function(G,oe,pe,xe,Ee){return void 0===Ee&&(Ee={}),(!Ee||!1!==Ee.validate)&&Ln(this,G.call($r,{key:oe,layerType:this.type,objectKey:pe,value:xe,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))},P.prototype.is3D=function(){return!1},P.prototype.isTileClipped=function(){return!1},P.prototype.hasOffscreenPass=function(){return!1},P.prototype.resize=function(){},P.prototype.isStateDependent=function(){for(var G in this.paint._values){var oe=this.paint.get(G);if(oe instanceof Pa&&Bo(oe.property.specification)&&("source"===oe.value.kind||"composite"===oe.value.kind)&&oe.value.isStateDependent)return!0}return!1},P}(Oe),Vs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Cs=function(M,P){this._structArray=M,this._pos1=P*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},$i=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function oa(M,P){void 0===P&&(P=1);var G=0,oe=0;return{members:M.map(function(pe){var Ee=Vs[pe.type].BYTES_PER_ELEMENT,Ne=G=ms(G,Math.max(P,Ee)),tt=pe.components||1;return oe=Math.max(oe,Ee),G+=Ee*tt,{name:pe.name,type:pe.type,components:tt,offset:Ne}}),size:ms(G,Math.max(oe,P)),alignment:P}}function ms(M,P){return Math.ceil(M/P)*P}$i.serialize=function(M,P){return M._trim(),P&&(M.isTransferred=!0,P.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},$i.deserialize=function(M){var P=Object.create(this.prototype);return P.arrayBuffer=M.arrayBuffer,P.length=M.length,P.capacity=M.arrayBuffer.byteLength/P.bytesPerElement,P._refreshViews(),P},$i.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},$i.prototype.clear=function(){this.length=0},$i.prototype.resize=function(M){this.reserve(M),this.length=M},$i.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var P=this.uint8;this._refreshViews(),P&&this.uint8.set(P)}},$i.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var gs=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe){var pe=this.length;return this.resize(pe+1),this.emplace(pe,G,oe)},P.prototype.emplace=function(G,oe,pe){var xe=2*G;return this.int16[xe+0]=oe,this.int16[xe+1]=pe,G},P}($i);gs.prototype.bytesPerElement=4,nn("StructArrayLayout2i4",gs);var Oa=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,G,oe,pe,xe)},P.prototype.emplace=function(G,oe,pe,xe,Ee){var Ne=4*G;return this.int16[Ne+0]=oe,this.int16[Ne+1]=pe,this.int16[Ne+2]=xe,this.int16[Ne+3]=Ee,G},P}($i);Oa.prototype.bytesPerElement=8,nn("StructArrayLayout4i8",Oa);var vs=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne){var tt=this.length;return this.resize(tt+1),this.emplace(tt,G,oe,pe,xe,Ee,Ne)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt){var dt=6*G;return this.int16[dt+0]=oe,this.int16[dt+1]=pe,this.int16[dt+2]=xe,this.int16[dt+3]=Ee,this.int16[dt+4]=Ne,this.int16[dt+5]=tt,G},P}($i);vs.prototype.bytesPerElement=12,nn("StructArrayLayout2i4i12",vs);var Es=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne){var tt=this.length;return this.resize(tt+1),this.emplace(tt,G,oe,pe,xe,Ee,Ne)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt){var dt=4*G,wt=8*G;return this.int16[dt+0]=oe,this.int16[dt+1]=pe,this.uint8[wt+4]=xe,this.uint8[wt+5]=Ee,this.uint8[wt+6]=Ne,this.uint8[wt+7]=tt,G},P}($i);Es.prototype.bytesPerElement=8,nn("StructArrayLayout2i4ub8",Es);var ks=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt){var tr=this.length;return this.resize(tr+1),this.emplace(tr,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr){var Kt=9*G,ur=18*G;return this.uint16[Kt+0]=oe,this.uint16[Kt+1]=pe,this.uint16[Kt+2]=xe,this.uint16[Kt+3]=Ee,this.uint16[Kt+4]=Ne,this.uint16[Kt+5]=tt,this.uint16[Kt+6]=dt,this.uint16[Kt+7]=wt,this.uint8[ur+16]=qt,this.uint8[ur+17]=tr,G},P}($i);ks.prototype.bytesPerElement=18,nn("StructArrayLayout8ui2ub18",ks);var Ye=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt){var ur=this.length;return this.resize(ur+1),this.emplace(ur,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur){var wr=12*G;return this.int16[wr+0]=oe,this.int16[wr+1]=pe,this.int16[wr+2]=xe,this.int16[wr+3]=Ee,this.uint16[wr+4]=Ne,this.uint16[wr+5]=tt,this.uint16[wr+6]=dt,this.uint16[wr+7]=wt,this.int16[wr+8]=qt,this.int16[wr+9]=tr,this.int16[wr+10]=Kt,this.int16[wr+11]=ur,G},P}($i);Ye.prototype.bytesPerElement=24,nn("StructArrayLayout4i4ui4i24",Ye);var Tt=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe){var xe=this.length;return this.resize(xe+1),this.emplace(xe,G,oe,pe)},P.prototype.emplace=function(G,oe,pe,xe){var Ee=3*G;return this.float32[Ee+0]=oe,this.float32[Ee+1]=pe,this.float32[Ee+2]=xe,G},P}($i);Tt.prototype.bytesPerElement=12,nn("StructArrayLayout3f12",Tt);var ne=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G){var oe=this.length;return this.resize(oe+1),this.emplace(oe,G)},P.prototype.emplace=function(G,oe){return this.uint32[1*G+0]=oe,G},P}($i);ne.prototype.bytesPerElement=4,nn("StructArrayLayout1ul4",ne);var ye=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt){var qt=this.length;return this.resize(qt+1),this.emplace(qt,G,oe,pe,xe,Ee,Ne,tt,dt,wt)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt){var tr=10*G,Kt=5*G;return this.int16[tr+0]=oe,this.int16[tr+1]=pe,this.int16[tr+2]=xe,this.int16[tr+3]=Ee,this.int16[tr+4]=Ne,this.int16[tr+5]=tt,this.uint32[Kt+3]=dt,this.uint16[tr+8]=wt,this.uint16[tr+9]=qt,G},P}($i);ye.prototype.bytesPerElement=20,nn("StructArrayLayout6i1ul2ui20",ye);var Ze=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne){var tt=this.length;return this.resize(tt+1),this.emplace(tt,G,oe,pe,xe,Ee,Ne)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt){var dt=6*G;return this.int16[dt+0]=oe,this.int16[dt+1]=pe,this.int16[dt+2]=xe,this.int16[dt+3]=Ee,this.int16[dt+4]=Ne,this.int16[dt+5]=tt,G},P}($i);Ze.prototype.bytesPerElement=12,nn("StructArrayLayout2i2i2i12",Ze);var bt=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,G,oe,pe,xe,Ee)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne){var tt=4*G,dt=8*G;return this.float32[tt+0]=oe,this.float32[tt+1]=pe,this.float32[tt+2]=xe,this.int16[dt+6]=Ee,this.int16[dt+7]=Ne,G},P}($i);bt.prototype.bytesPerElement=16,nn("StructArrayLayout2f1f2i16",bt);var yr=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,G,oe,pe,xe)},P.prototype.emplace=function(G,oe,pe,xe,Ee){var Ne=12*G,tt=3*G;return this.uint8[Ne+0]=oe,this.uint8[Ne+1]=pe,this.float32[tt+1]=xe,this.float32[tt+2]=Ee,G},P}($i);yr.prototype.bytesPerElement=12,nn("StructArrayLayout2ub2f12",yr);var Ur=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe){var xe=this.length;return this.resize(xe+1),this.emplace(xe,G,oe,pe)},P.prototype.emplace=function(G,oe,pe,xe){var Ee=3*G;return this.uint16[Ee+0]=oe,this.uint16[Ee+1]=pe,this.uint16[Ee+2]=xe,G},P}($i);Ur.prototype.bytesPerElement=6,nn("StructArrayLayout3ui6",Ur);var _n=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr,Fr,Rr,Yr){var Gr=this.length;return this.resize(Gr+1),this.emplace(Gr,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr,Fr,Rr,Yr)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr,Fr,Rr,Yr,Gr){var en=24*G,bn=12*G,Sn=48*G;return this.int16[en+0]=oe,this.int16[en+1]=pe,this.uint16[en+2]=xe,this.uint16[en+3]=Ee,this.uint32[bn+2]=Ne,this.uint32[bn+3]=tt,this.uint32[bn+4]=dt,this.uint16[en+10]=wt,this.uint16[en+11]=qt,this.uint16[en+12]=tr,this.float32[bn+7]=Kt,this.float32[bn+8]=ur,this.uint8[Sn+36]=wr,this.uint8[Sn+37]=Fr,this.uint8[Sn+38]=Rr,this.uint32[bn+10]=Yr,this.int16[en+22]=Gr,G},P}($i);_n.prototype.bytesPerElement=48,nn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",_n);var jn=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr,Fr,Rr,Yr,Gr,en,bn,Sn,Wn,Gn,ei,fi,pi,ni,bi){var vi=this.length;return this.resize(vi+1),this.emplace(vi,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr,Fr,Rr,Yr,Gr,en,bn,Sn,Wn,Gn,ei,fi,pi,ni,bi)},P.prototype.emplace=function(G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr,Fr,Rr,Yr,Gr,en,bn,Sn,Wn,Gn,ei,fi,pi,ni,bi,vi){var di=34*G,ia=17*G;return this.int16[di+0]=oe,this.int16[di+1]=pe,this.int16[di+2]=xe,this.int16[di+3]=Ee,this.int16[di+4]=Ne,this.int16[di+5]=tt,this.int16[di+6]=dt,this.int16[di+7]=wt,this.uint16[di+8]=qt,this.uint16[di+9]=tr,this.uint16[di+10]=Kt,this.uint16[di+11]=ur,this.uint16[di+12]=wr,this.uint16[di+13]=Fr,this.uint16[di+14]=Rr,this.uint16[di+15]=Yr,this.uint16[di+16]=Gr,this.uint16[di+17]=en,this.uint16[di+18]=bn,this.uint16[di+19]=Sn,this.uint16[di+20]=Wn,this.uint16[di+21]=Gn,this.uint16[di+22]=ei,this.uint32[ia+12]=fi,this.float32[ia+13]=pi,this.float32[ia+14]=ni,this.float32[ia+15]=bi,this.float32[ia+16]=vi,G},P}($i);jn.prototype.bytesPerElement=68,nn("StructArrayLayout8i15ui1ul4f68",jn);var le=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G){var oe=this.length;return this.resize(oe+1),this.emplace(oe,G)},P.prototype.emplace=function(G,oe){return this.float32[1*G+0]=oe,G},P}($i);le.prototype.bytesPerElement=4,nn("StructArrayLayout1f4",le);var E=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe){var xe=this.length;return this.resize(xe+1),this.emplace(xe,G,oe,pe)},P.prototype.emplace=function(G,oe,pe,xe){var Ee=3*G;return this.int16[Ee+0]=oe,this.int16[Ee+1]=pe,this.int16[Ee+2]=xe,G},P}($i);E.prototype.bytesPerElement=6,nn("StructArrayLayout3i6",E);var O=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe){var xe=this.length;return this.resize(xe+1),this.emplace(xe,G,oe,pe)},P.prototype.emplace=function(G,oe,pe,xe){var Ne=4*G;return this.uint32[2*G+0]=oe,this.uint16[Ne+2]=pe,this.uint16[Ne+3]=xe,G},P}($i);O.prototype.bytesPerElement=8,nn("StructArrayLayout1ul2ui8",O);var B=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe){var pe=this.length;return this.resize(pe+1),this.emplace(pe,G,oe)},P.prototype.emplace=function(G,oe,pe){var xe=2*G;return this.uint16[xe+0]=oe,this.uint16[xe+1]=pe,G},P}($i);B.prototype.bytesPerElement=4,nn("StructArrayLayout2ui4",B);var q=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G){var oe=this.length;return this.resize(oe+1),this.emplace(oe,G)},P.prototype.emplace=function(G,oe){return this.uint16[1*G+0]=oe,G},P}($i);q.prototype.bytesPerElement=2,nn("StructArrayLayout1ui2",q);var ae=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe){var pe=this.length;return this.resize(pe+1),this.emplace(pe,G,oe)},P.prototype.emplace=function(G,oe,pe){var xe=2*G;return this.float32[xe+0]=oe,this.float32[xe+1]=pe,G},P}($i);ae.prototype.bytesPerElement=8,nn("StructArrayLayout2f8",ae);var he=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(G,oe,pe,xe){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,G,oe,pe,xe)},P.prototype.emplace=function(G,oe,pe,xe,Ee){var Ne=4*G;return this.float32[Ne+0]=oe,this.float32[Ne+1]=pe,this.float32[Ne+2]=xe,this.float32[Ne+3]=Ee,G},P}($i);he.prototype.bytesPerElement=16,nn("StructArrayLayout4f16",he);var me=function(M){function P(){M.apply(this,arguments)}M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P;var G={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return G.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},G.x1.get=function(){return this._structArray.int16[this._pos2+2]},G.y1.get=function(){return this._structArray.int16[this._pos2+3]},G.x2.get=function(){return this._structArray.int16[this._pos2+4]},G.y2.get=function(){return this._structArray.int16[this._pos2+5]},G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(P.prototype,G),P}(Cs);me.prototype.size=20;var _e=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.get=function(G){return new me(this,G)},P}(ye);nn("CollisionBoxArray",_e);var Se=function(M){function P(){M.apply(this,arguments)}M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},G.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},G.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},G.segment.get=function(){return this._structArray.uint16[this._pos2+10]},G.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},G.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},G.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},G.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},G.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},G.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},G.placedOrientation.set=function(oe){this._structArray.uint8[this._pos1+37]=oe},G.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},G.hidden.set=function(oe){this._structArray.uint8[this._pos1+38]=oe},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},G.crossTileID.set=function(oe){this._structArray.uint32[this._pos4+10]=oe},G.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(P.prototype,G),P}(Cs);Se.prototype.size=48;var Ve=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.get=function(G){return new Se(this,G)},P}(_n);nn("PlacedSymbolArray",Ve);var Ke=function(M){function P(){M.apply(this,arguments)}M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},G.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},G.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},G.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},G.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},G.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},G.key.get=function(){return this._structArray.uint16[this._pos2+8]},G.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},G.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},G.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},G.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},G.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},G.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},G.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},G.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},G.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},G.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},G.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},G.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},G.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},G.crossTileID.set=function(oe){this._structArray.uint32[this._pos4+12]=oe},G.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},G.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},G.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},G.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(P.prototype,G),P}(Cs);Ke.prototype.size=68;var st=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.get=function(G){return new Ke(this,G)},P}(jn);nn("SymbolInstanceArray",st);var At=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.getoffsetX=function(G){return this.float32[1*G+0]},P}(le);nn("GlyphOffsetArray",At);var Pt=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.getx=function(G){return this.int16[3*G+0]},P.prototype.gety=function(G){return this.int16[3*G+1]},P.prototype.gettileUnitDistanceFromAnchor=function(G){return this.int16[3*G+2]},P}(E);nn("SymbolLineVertexArray",Pt);var St=function(M){function P(){M.apply(this,arguments)}M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P;var G={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(P.prototype,G),P}(Cs);St.prototype.size=8;var Lt=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.get=function(G){return new St(this,G)},P}(O);nn("FeatureIndexArray",Lt);var kt=oa([{name:"a_pos",components:2,type:"Int16"}],4).members,Ht=function(M){void 0===M&&(M=[]),this.segments=M};function jt(M,P){return 256*(M=c(Math.floor(M),0,255))+c(Math.floor(P),0,255)}Ht.prototype.prepareSegment=function(M,P,G,oe){var pe=this.segments[this.segments.length-1];return M>Ht.MAX_VERTEX_ARRAY_LENGTH&&A("Max vertices per segment is "+Ht.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!pe||pe.vertexLength+M>Ht.MAX_VERTEX_ARRAY_LENGTH||pe.sortKey!==oe)&&(pe={vertexOffset:P.length,primitiveOffset:G.length,vertexLength:0,primitiveLength:0},void 0!==oe&&(pe.sortKey=oe),this.segments.push(pe)),pe},Ht.prototype.get=function(){return this.segments},Ht.prototype.destroy=function(){for(var M=0,P=this.segments;M<P.length;M+=1){var G=P[M];for(var oe in G.vaos)G.vaos[oe].destroy()}},Ht.simpleSegment=function(M,P,G,oe){return new Ht([{vertexOffset:M,primitiveOffset:P,vertexLength:G,primitiveLength:oe,vaos:{},sortKey:0}])},Ht.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nn("SegmentVector",Ht);var Yt=oa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),lr=i(function(M){M.exports=function(P,G){var oe,pe,xe,Ee,Ne,tt,dt,wt;for(pe=P.length-(oe=3&P.length),xe=G,Ne=3432918353,tt=461845907,wt=0;wt<pe;)dt=255&P.charCodeAt(wt)|(255&P.charCodeAt(++wt))<<8|(255&P.charCodeAt(++wt))<<16|(255&P.charCodeAt(++wt))<<24,++wt,xe=27492+(65535&(Ee=5*(65535&(xe=(xe^=dt=(65535&(dt=(dt=(65535&dt)*Ne+(((dt>>>16)*Ne&65535)<<16)&4294967295)<<15|dt>>>17))*tt+(((dt>>>16)*tt&65535)<<16)&4294967295)<<13|xe>>>19))+((5*(xe>>>16)&65535)<<16)&4294967295))+((58964+(Ee>>>16)&65535)<<16);switch(dt=0,oe){case 3:dt^=(255&P.charCodeAt(wt+2))<<16;case 2:dt^=(255&P.charCodeAt(wt+1))<<8;case 1:xe^=dt=(65535&(dt=(dt=(65535&(dt^=255&P.charCodeAt(wt)))*Ne+(((dt>>>16)*Ne&65535)<<16)&4294967295)<<15|dt>>>17))*tt+(((dt>>>16)*tt&65535)<<16)&4294967295}return xe^=P.length,xe=2246822507*(65535&(xe^=xe>>>16))+((2246822507*(xe>>>16)&65535)<<16)&4294967295,xe=3266489909*(65535&(xe^=xe>>>13))+((3266489909*(xe>>>16)&65535)<<16)&4294967295,(xe^=xe>>>16)>>>0}}),vr=i(function(M){M.exports=function(P,G){for(var oe,pe=P.length,xe=G^pe,Ee=0;pe>=4;)oe=1540483477*(65535&(oe=255&P.charCodeAt(Ee)|(255&P.charCodeAt(++Ee))<<8|(255&P.charCodeAt(++Ee))<<16|(255&P.charCodeAt(++Ee))<<24))+((1540483477*(oe>>>16)&65535)<<16),xe=1540483477*(65535&xe)+((1540483477*(xe>>>16)&65535)<<16)^(oe=1540483477*(65535&(oe^=oe>>>24))+((1540483477*(oe>>>16)&65535)<<16)),pe-=4,++Ee;switch(pe){case 3:xe^=(255&P.charCodeAt(Ee+2))<<16;case 2:xe^=(255&P.charCodeAt(Ee+1))<<8;case 1:xe=1540483477*(65535&(xe^=255&P.charCodeAt(Ee)))+((1540483477*(xe>>>16)&65535)<<16)}return xe=1540483477*(65535&(xe^=xe>>>13))+((1540483477*(xe>>>16)&65535)<<16),(xe^=xe>>>15)>>>0}}),Or=lr,sn=vr;Or.murmur3=lr,Or.murmur2=sn;var on=function(){this.ids=[],this.positions=[],this.indexed=!1};on.prototype.add=function(M,P,G,oe){this.ids.push(gn(M)),this.positions.push(P,G,oe)},on.prototype.getPositions=function(M){for(var P=gn(M),G=0,oe=this.ids.length-1;G<oe;){var pe=G+oe>>1;this.ids[pe]>=P?oe=pe:G=pe+1}for(var xe=[];this.ids[G]===P;)xe.push({index:this.positions[3*G],start:this.positions[3*G+1],end:this.positions[3*G+2]}),G++;return xe},on.serialize=function(M,P){var G=new Float64Array(M.ids),oe=new Uint32Array(M.positions);return function pe(xe,Ee,Ne,tt){for(;Ne<tt;){for(var dt=xe[Ne+tt>>1],wt=Ne-1,qt=tt+1;;){do{wt++}while(xe[wt]<dt);do{qt--}while(xe[qt]>dt);if(wt>=qt)break;Xn(xe,wt,qt),Xn(Ee,3*wt,3*qt),Xn(Ee,3*wt+1,3*qt+1),Xn(Ee,3*wt+2,3*qt+2)}qt-Ne<tt-qt?(pe(xe,Ee,Ne,qt),Ne=qt+1):(pe(xe,Ee,qt+1,tt),tt=qt)}}(G,oe,0,G.length-1),P&&P.push(G.buffer,oe.buffer),{ids:G,positions:oe}},on.deserialize=function(M){var P=new on;return P.ids=M.ids,P.positions=M.positions,P.indexed=!0,P};var kn=Math.pow(2,53)-1;function gn(M){var P=+M;return!isNaN(P)&&P<=kn?P:Or(String(M))}function Xn(M,P,G){var oe=M[P];M[P]=M[G],M[G]=oe}nn("FeaturePositionMap",on);var ti=function(M,P){this.gl=M.gl,this.location=P},gi=function(M){function P(G,oe){M.call(this,G,oe),this.current=0}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.set=function(G){this.current!==G&&(this.current=G,this.gl.uniform1i(this.location,G))},P}(ti),Jr=function(M){function P(G,oe){M.call(this,G,oe),this.current=0}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.set=function(G){this.current!==G&&(this.current=G,this.gl.uniform1f(this.location,G))},P}(ti),Pn=function(M){function P(G,oe){M.call(this,G,oe),this.current=[0,0]}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]||(this.current=G,this.gl.uniform2f(this.location,G[0],G[1]))},P}(ti),ri=function(M){function P(G,oe){M.call(this,G,oe),this.current=[0,0,0]}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]&&G[2]===this.current[2]||(this.current=G,this.gl.uniform3f(this.location,G[0],G[1],G[2]))},P}(ti),$n=function(M){function P(G,oe){M.call(this,G,oe),this.current=[0,0,0,0]}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]&&G[2]===this.current[2]&&G[3]===this.current[3]||(this.current=G,this.gl.uniform4f(this.location,G[0],G[1],G[2],G[3]))},P}(ti),ui=function(M){function P(G,oe){M.call(this,G,oe),this.current=dr.transparent}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.set=function(G){G.r===this.current.r&&G.g===this.current.g&&G.b===this.current.b&&G.a===this.current.a||(this.current=G,this.gl.uniform4f(this.location,G.r,G.g,G.b,G.a))},P}(ti),_i=new Float32Array(16),Ii=function(M){function P(G,oe){M.call(this,G,oe),this.current=_i}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.set=function(G){if(G[12]!==this.current[12]||G[0]!==this.current[0])return this.current=G,void this.gl.uniformMatrix4fv(this.location,!1,G);for(var oe=1;oe<16;oe++)if(G[oe]!==this.current[oe]){this.current=G,this.gl.uniformMatrix4fv(this.location,!1,G);break}},P}(ti);function ai(M){return[jt(255*M.r,255*M.g),jt(255*M.b,255*M.a)]}var Si=function(M,P,G){this.value=M,this.uniformNames=P.map(function(oe){return"u_"+oe}),this.type=G};Si.prototype.setUniform=function(M,P,G){M.set(G.constantOr(this.value))},Si.prototype.getBinding=function(M,P,G){return"color"===this.type?new ui(M,P):new Jr(M,P)};var Mi=function(M,P){this.uniformNames=P.map(function(G){return"u_"+G}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Mi.prototype.setConstantPatternPositions=function(M,P){this.pixelRatioFrom=P.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=P.tlbr,this.patternTo=M.tlbr},Mi.prototype.setUniform=function(M,P,G,oe){var pe="u_pattern_to"===oe?this.patternTo:"u_pattern_from"===oe?this.patternFrom:"u_pixel_ratio_to"===oe?this.pixelRatioTo:"u_pixel_ratio_from"===oe?this.pixelRatioFrom:null;pe&&M.set(pe)},Mi.prototype.getBinding=function(M,P,G){return"u_pattern"===G.substr(0,9)?new $n(M,P):new Jr(M,P)};var Fi=function(M,P,G,oe){this.expression=M,this.type=G,this.maxValue=0,this.paintVertexAttributes=P.map(function(pe){return{name:"a_"+pe,type:"Float32",components:"color"===G?2:1,offset:0}}),this.paintVertexArray=new oe};Fi.prototype.populatePaintArray=function(M,P,G,oe,pe){var xe=this.paintVertexArray.length,Ee=this.expression.evaluate(new aa(0),P,{},oe,[],pe);this.paintVertexArray.resize(M),this._setPaintValue(xe,M,Ee)},Fi.prototype.updatePaintArray=function(M,P,G,oe){var pe=this.expression.evaluate({zoom:0},G,oe);this._setPaintValue(M,P,pe)},Fi.prototype._setPaintValue=function(M,P,G){if("color"===this.type)for(var oe=ai(G),pe=M;pe<P;pe++)this.paintVertexArray.emplace(pe,oe[0],oe[1]);else{for(var xe=M;xe<P;xe++)this.paintVertexArray.emplace(xe,G);this.maxValue=Math.max(this.maxValue,Math.abs(G))}},Fi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ci=function(M,P,G,oe,pe,xe){this.expression=M,this.uniformNames=P.map(function(Ee){return"u_"+Ee+"_t"}),this.type=G,this.useIntegerZoom=oe,this.zoom=pe,this.maxValue=0,this.paintVertexAttributes=P.map(function(Ee){return{name:"a_"+Ee,type:"Float32",components:"color"===G?4:2,offset:0}}),this.paintVertexArray=new xe};Ci.prototype.populatePaintArray=function(M,P,G,oe,pe){var xe=this.expression.evaluate(new aa(this.zoom),P,{},oe,[],pe),Ee=this.expression.evaluate(new aa(this.zoom+1),P,{},oe,[],pe),Ne=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Ne,M,xe,Ee)},Ci.prototype.updatePaintArray=function(M,P,G,oe){var pe=this.expression.evaluate({zoom:this.zoom},G,oe),xe=this.expression.evaluate({zoom:this.zoom+1},G,oe);this._setPaintValue(M,P,pe,xe)},Ci.prototype._setPaintValue=function(M,P,G,oe){if("color"===this.type)for(var pe=ai(G),xe=ai(oe),Ee=M;Ee<P;Ee++)this.paintVertexArray.emplace(Ee,pe[0],pe[1],xe[0],xe[1]);else{for(var Ne=M;Ne<P;Ne++)this.paintVertexArray.emplace(Ne,G,oe);this.maxValue=Math.max(this.maxValue,Math.abs(G),Math.abs(oe))}},Ci.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ci.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ci.prototype.setUniform=function(M,P){var G=this.useIntegerZoom?Math.floor(P.zoom):P.zoom,oe=c(this.expression.interpolationFactor(G,this.zoom,this.zoom+1),0,1);M.set(oe)},Ci.prototype.getBinding=function(M,P,G){return new Jr(M,P)};var Bi=function(M,P,G,oe,pe,xe){this.expression=M,this.type=P,this.useIntegerZoom=G,this.zoom=oe,this.layerId=xe,this.zoomInPaintVertexArray=new pe,this.zoomOutPaintVertexArray=new pe};Bi.prototype.populatePaintArray=function(M,P,G){var oe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(oe,M,P.patterns&&P.patterns[this.layerId],G)},Bi.prototype.updatePaintArray=function(M,P,G,oe,pe){this._setPaintValues(M,P,G.patterns&&G.patterns[this.layerId],pe)},Bi.prototype._setPaintValues=function(M,P,G,oe){if(oe&&G){var Ne=oe[G.min],tt=oe[G.mid],dt=oe[G.max];if(Ne&&tt&&dt)for(var wt=M;wt<P;wt++)this.zoomInPaintVertexArray.emplace(wt,tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],tt.pixelRatio,Ne.pixelRatio),this.zoomOutPaintVertexArray.emplace(wt,tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],dt.tl[0],dt.tl[1],dt.br[0],dt.br[1],tt.pixelRatio,dt.pixelRatio)}},Bi.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,Yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,Yt.members,this.expression.isStateDependent))},Bi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Wi=function(M,P,G,oe){this.binders={},this.layoutAttributes=oe,this._buffers=[];var pe=[];for(var xe in M.paint._values)if(G(xe)){var Ee=M.paint.get(xe);if(Ee instanceof Pa&&Bo(Ee.property.specification)){var Ne=Ga(xe,M.type),tt=Ee.value,dt=Ee.property.specification.type,wt=Ee.property.useIntegerZoom,qt=Ee.property.specification["property-type"],tr="cross-faded"===qt||"cross-faded-data-driven"===qt;if("constant"===tt.kind)this.binders[xe]=tr?new Mi(tt.value,Ne):new Si(tt.value,Ne,dt),pe.push("/u_"+xe);else if("source"===tt.kind||tr){var Kt=Za(xe,dt,"source");this.binders[xe]=tr?new Bi(tt,dt,wt,P,Kt,M.id):new Fi(tt,Ne,dt,Kt),pe.push("/a_"+xe)}else{var ur=Za(xe,dt,"composite");this.binders[xe]=new Ci(tt,Ne,dt,wt,P,ur),pe.push("/z_"+xe)}}}this.cacheKey=pe.sort().join("")};Wi.prototype.getMaxValue=function(M){var P=this.binders[M];return P instanceof Fi||P instanceof Ci?P.maxValue:0},Wi.prototype.populatePaintArrays=function(M,P,G,oe,pe){for(var xe in this.binders){var Ee=this.binders[xe];(Ee instanceof Fi||Ee instanceof Ci||Ee instanceof Bi)&&Ee.populatePaintArray(M,P,G,oe,pe)}},Wi.prototype.setConstantPatternPositions=function(M,P){for(var G in this.binders){var oe=this.binders[G];oe instanceof Mi&&oe.setConstantPatternPositions(M,P)}},Wi.prototype.updatePaintArrays=function(M,P,G,oe,pe){var xe=!1;for(var Ee in M)for(var Ne=0,tt=P.getPositions(Ee);Ne<tt.length;Ne+=1){var dt=tt[Ne],wt=G.feature(dt.index);for(var qt in this.binders){var tr=this.binders[qt];if((tr instanceof Fi||tr instanceof Ci||tr instanceof Bi)&&!0===tr.expression.isStateDependent){var Kt=oe.paint.get(qt);tr.expression=Kt.value,tr.updatePaintArray(dt.start,dt.end,wt,M[Ee],pe),xe=!0}}}return xe},Wi.prototype.defines=function(){var M=[];for(var P in this.binders){var G=this.binders[P];(G instanceof Si||G instanceof Mi)&&M.push.apply(M,G.uniformNames.map(function(oe){return"#define HAS_UNIFORM_"+oe}))}return M},Wi.prototype.getPaintVertexBuffers=function(){return this._buffers},Wi.prototype.getUniforms=function(M,P){var G=[];for(var oe in this.binders){var pe=this.binders[oe];if(pe instanceof Si||pe instanceof Mi||pe instanceof Ci)for(var xe=0,Ee=pe.uniformNames;xe<Ee.length;xe+=1){var Ne=Ee[xe];if(P[Ne]){var tt=pe.getBinding(M,P[Ne],Ne);G.push({name:Ne,property:oe,binding:tt})}}}return G},Wi.prototype.setUniforms=function(M,P,G,oe){for(var pe=0,xe=P;pe<xe.length;pe+=1){var Ee=xe[pe],Ne=Ee.name,tt=Ee.property;this.binders[tt].setUniform(Ee.binding,oe,G.get(tt),Ne)}},Wi.prototype.updatePaintBuffers=function(M){for(var P in this._buffers=[],this.binders){var G=this.binders[P];if(M&&G instanceof Bi){var oe=2===M.fromScale?G.zoomInPaintVertexBuffer:G.zoomOutPaintVertexBuffer;oe&&this._buffers.push(oe)}else(G instanceof Fi||G instanceof Ci)&&G.paintVertexBuffer&&this._buffers.push(G.paintVertexBuffer)}},Wi.prototype.upload=function(M){for(var P in this.binders){var G=this.binders[P];(G instanceof Fi||G instanceof Ci||G instanceof Bi)&&G.upload(M)}this.updatePaintBuffers()},Wi.prototype.destroy=function(){for(var M in this.binders){var P=this.binders[M];(P instanceof Fi||P instanceof Ci||P instanceof Bi)&&P.destroy()}};var wa=function(M,P,G,oe){void 0===oe&&(oe=function(){return!0}),this.programConfigurations={};for(var pe=0,xe=P;pe<xe.length;pe+=1){var Ee=xe[pe];this.programConfigurations[Ee.id]=new Wi(Ee,G,oe,M)}this.needsUpload=!1,this._featureMap=new on,this._bufferOffset=0};function Ga(M,P){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(P+"-","").replace(/-/g,"_")]}function Za(M,P,G){var pe={"line-pattern":{source:ks,composite:ks},"fill-pattern":{source:ks,composite:ks},"fill-extrusion-pattern":{source:ks,composite:ks}}[M];return pe&&pe[G]||{color:{source:ae,composite:he},number:{source:le,composite:ae}}[P][G]}wa.prototype.populatePaintArrays=function(M,P,G,oe,pe,xe){for(var Ee in this.programConfigurations)this.programConfigurations[Ee].populatePaintArrays(M,P,oe,pe,xe);void 0!==P.id&&this._featureMap.add(P.id,G,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},wa.prototype.updatePaintArrays=function(M,P,G,oe){for(var pe=0,xe=G;pe<xe.length;pe+=1){var Ee=xe[pe];this.needsUpload=this.programConfigurations[Ee.id].updatePaintArrays(M,this._featureMap,P,Ee,oe)||this.needsUpload}},wa.prototype.get=function(M){return this.programConfigurations[M]},wa.prototype.upload=function(M){if(this.needsUpload){for(var P in this.programConfigurations)this.programConfigurations[P].upload(M);this.needsUpload=!1}},wa.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},nn("ConstantBinder",Si),nn("CrossFadedConstantBinder",Mi),nn("SourceExpressionBinder",Fi),nn("CrossFadedCompositeBinder",Bi),nn("CompositeExpressionBinder",Ci),nn("ProgramConfiguration",Wi,{omit:["_buffers"]}),nn("ProgramConfigurationSet",wa);var Ra=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Ca(M){for(var P=8192/M.extent,G=M.loadGeometry(),oe=0;oe<G.length;oe++)for(var pe=G[oe],xe=0;xe<pe.length;xe++){var Ee=pe[xe];Ee.x=Math.round(Ee.x*P),Ee.y=Math.round(Ee.y*P),(Ee.x<Ra.min||Ee.x>Ra.max||Ee.y<Ra.min||Ee.y>Ra.max)&&(A("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ee.x=c(Ee.x,Ra.min,Ra.max),Ee.y=c(Ee.y,Ra.min,Ra.max))}return G}function Po(M,P,G,oe,pe){M.emplaceBack(2*P+(oe+1)/2,2*G+(pe+1)/2)}var oo=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new gs,this.indexArray=new Ur,this.segments=new Ht,this.programConfigurations=new wa(kt,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};function Xo(M,P){for(var G=0;G<M.length;G++)if(ys(P,M[G]))return!0;for(var oe=0;oe<P.length;oe++)if(ys(M,P[oe]))return!0;return!!$s(M,P)}function Is(M,P,G){return!!ys(M,P)||!!Oo(P,M,G)}function Us(M,P){if(1===M.length)return ll(P,M[0]);for(var G=0;G<P.length;G++)for(var oe=P[G],pe=0;pe<oe.length;pe++)if(ys(M,oe[pe]))return!0;for(var xe=0;xe<M.length;xe++)if(ll(P,M[xe]))return!0;for(var Ee=0;Ee<P.length;Ee++)if($s(M,P[Ee]))return!0;return!1}function sl(M,P,G){if(M.length>1){if($s(M,P))return!0;for(var oe=0;oe<P.length;oe++)if(Oo(P[oe],M,G))return!0}for(var pe=0;pe<M.length;pe++)if(Oo(M[pe],P,G))return!0;return!1}function $s(M,P){if(0===M.length||0===P.length)return!1;for(var G=0;G<M.length-1;G++)for(var oe=M[G],pe=M[G+1],xe=0;xe<P.length-1;xe++)if(el(oe,pe,P[xe],P[xe+1]))return!0;return!1}function el(M,P,G,oe){return I(M,G,oe)!==I(P,G,oe)&&I(M,P,G)!==I(M,P,oe)}function Oo(M,P,G){var oe=G*G;if(1===P.length)return M.distSqr(P[0])<oe;for(var pe=1;pe<P.length;pe++)if(Zs(M,P[pe-1],P[pe])<oe)return!0;return!1}function Zs(M,P,G){var oe=P.distSqr(G);if(0===oe)return M.distSqr(P);var pe=((M.x-P.x)*(G.x-P.x)+(M.y-P.y)*(G.y-P.y))/oe;return M.distSqr(pe<0?P:pe>1?G:G.sub(P)._mult(pe)._add(P))}function ll(M,P){for(var G,oe,pe,xe=!1,Ee=0;Ee<M.length;Ee++)for(var Ne=0,tt=(G=M[Ee]).length-1;Ne<G.length;tt=Ne++)(oe=G[Ne]).y>P.y!=(pe=G[tt]).y>P.y&&P.x<(pe.x-oe.x)*(P.y-oe.y)/(pe.y-oe.y)+oe.x&&(xe=!xe);return xe}function ys(M,P){for(var G=!1,oe=0,pe=M.length-1;oe<M.length;pe=oe++){var xe=M[oe],Ee=M[pe];xe.y>P.y!=Ee.y>P.y&&P.x<(Ee.x-xe.x)*(P.y-xe.y)/(Ee.y-xe.y)+xe.x&&(G=!G)}return G}function cl(M,P,G){var oe=G[0],pe=G[2];if(M.x<oe.x&&P.x<oe.x||M.x>pe.x&&P.x>pe.x||M.y<oe.y&&P.y<oe.y||M.y>pe.y&&P.y>pe.y)return!1;var xe=I(M,P,G[0]);return xe!==I(M,P,G[1])||xe!==I(M,P,G[2])||xe!==I(M,P,G[3])}function za(M,P,G){var oe=P.paint.get(M).value;return"constant"===oe.kind?oe.value:G.programConfigurations.get(P.id).getMaxValue(M)}function qo(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Yo(M,P,G,oe,pe){if(!P[0]&&!P[1])return M;var xe=n.convert(P)._mult(pe);"viewport"===G&&xe._rotate(-oe);for(var Ee=[],Ne=0;Ne<M.length;Ne++)Ee.push(M[Ne].sub(xe));return Ee}oo.prototype.populate=function(M,P,G){var oe=this.layers[0],pe=[],xe=null;"circle"===oe.type&&(xe=oe.layout.get("circle-sort-key"));for(var Ee=0,Ne=M;Ee<Ne.length;Ee+=1){var tt=Ne[Ee],dt=tt.feature,wt=tt.id,qt=tt.index,tr=tt.sourceLayerIndex,Kt=this.layers[0]._featureFilter.needGeometry,ur={type:dt.type,id:wt,properties:dt.properties,geometry:Kt?Ca(dt):[]};if(this.layers[0]._featureFilter.filter(new aa(this.zoom),ur,G)){Kt||(ur.geometry=Ca(dt));var wr=xe?xe.evaluate(ur,{},G):void 0;pe.push({id:wt,properties:dt.properties,type:dt.type,sourceLayerIndex:tr,index:qt,geometry:ur.geometry,patterns:{},sortKey:wr})}}xe&&pe.sort(function(ei,fi){return ei.sortKey-fi.sortKey});for(var Rr=0,Yr=pe;Rr<Yr.length;Rr+=1){var Gr=Yr[Rr],bn=Gr.geometry,Sn=Gr.index,Wn=Gr.sourceLayerIndex,Gn=M[Sn].feature;this.addFeature(Gr,bn,Sn,G),P.featureIndex.insert(Gn,bn,Sn,Wn,this.index)}},oo.prototype.update=function(M,P,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,P,this.stateDependentLayers,G)},oo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},oo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},oo.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,kt),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},oo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},oo.prototype.addFeature=function(M,P,G,oe){for(var pe=0,xe=P;pe<xe.length;pe+=1)for(var Ee=0,Ne=xe[pe];Ee<Ne.length;Ee+=1){var tt=Ne[Ee],dt=tt.x,wt=tt.y;if(!(dt<0||dt>=8192||wt<0||wt>=8192)){var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),tr=qt.vertexLength;Po(this.layoutVertexArray,dt,wt,-1,-1),Po(this.layoutVertexArray,dt,wt,1,-1),Po(this.layoutVertexArray,dt,wt,1,1),Po(this.layoutVertexArray,dt,wt,-1,1),this.indexArray.emplaceBack(tr,tr+1,tr+2),this.indexArray.emplaceBack(tr,tr+3,tr+2),qt.vertexLength+=4,qt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,{},oe)},nn("CircleBucket",oo,{omit:["layers"]});var yl=new Ao({"circle-sort-key":new Ti(Ie.layout_circle["circle-sort-key"])}),Xc={paint:new Ao({"circle-radius":new Ti(Ie.paint_circle["circle-radius"]),"circle-color":new Ti(Ie.paint_circle["circle-color"]),"circle-blur":new Ti(Ie.paint_circle["circle-blur"]),"circle-opacity":new Ti(Ie.paint_circle["circle-opacity"]),"circle-translate":new mi(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new mi(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mi(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mi(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ti(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ti(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ti(Ie.paint_circle["circle-stroke-opacity"])}),layout:yl},cs="undefined"!=typeof Float32Array?Float32Array:Array;function ql(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function ul(M,P,G){var oe=P[0],pe=P[1],xe=P[2],Ee=P[3],Ne=P[4],tt=P[5],dt=P[6],wt=P[7],qt=P[8],tr=P[9],Kt=P[10],ur=P[11],wr=P[12],Fr=P[13],Rr=P[14],Yr=P[15],Gr=G[0],en=G[1],bn=G[2],Sn=G[3];return M[0]=Gr*oe+en*Ne+bn*qt+Sn*wr,M[1]=Gr*pe+en*tt+bn*tr+Sn*Fr,M[2]=Gr*xe+en*dt+bn*Kt+Sn*Rr,M[3]=Gr*Ee+en*wt+bn*ur+Sn*Yr,M[4]=(Gr=G[4])*oe+(en=G[5])*Ne+(bn=G[6])*qt+(Sn=G[7])*wr,M[5]=Gr*pe+en*tt+bn*tr+Sn*Fr,M[6]=Gr*xe+en*dt+bn*Kt+Sn*Rr,M[7]=Gr*Ee+en*wt+bn*ur+Sn*Yr,M[8]=(Gr=G[8])*oe+(en=G[9])*Ne+(bn=G[10])*qt+(Sn=G[11])*wr,M[9]=Gr*pe+en*tt+bn*tr+Sn*Fr,M[10]=Gr*xe+en*dt+bn*Kt+Sn*Rr,M[11]=Gr*Ee+en*wt+bn*ur+Sn*Yr,M[12]=(Gr=G[12])*oe+(en=G[13])*Ne+(bn=G[14])*qt+(Sn=G[15])*wr,M[13]=Gr*pe+en*tt+bn*tr+Sn*Fr,M[14]=Gr*xe+en*dt+bn*Kt+Sn*Rr,M[15]=Gr*Ee+en*wt+bn*ur+Sn*Yr,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,P=0,G=arguments.length;G--;)P+=M[G]*M[G];return Math.sqrt(P)});var Hs,P,Jc=ul;function tl(M,P,G){var oe=P[0],pe=P[1],xe=P[2],Ee=P[3];return M[0]=G[0]*oe+G[4]*pe+G[8]*xe+G[12]*Ee,M[1]=G[1]*oe+G[5]*pe+G[9]*xe+G[13]*Ee,M[2]=G[2]*oe+G[6]*pe+G[10]*xe+G[14]*Ee,M[3]=G[3]*oe+G[7]*pe+G[11]*xe+G[15]*Ee,M}Hs=new cs(3),cs!=Float32Array&&(Hs[0]=0,Hs[1]=0,Hs[2]=0),P=new cs(4),cs!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[3]=0);var cf=(function(){var P=new cs(2);cs!=Float32Array&&(P[0]=0,P[1]=0)}(),function(M){function P(G){M.call(this,G,Xc)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.createBucket=function(G){return new oo(G)},P.prototype.queryRadius=function(G){var oe=G;return za("circle-radius",this,oe)+za("circle-stroke-width",this,oe)+qo(this.paint.get("circle-translate"))},P.prototype.queryIntersectsFeature=function(G,oe,pe,xe,Ee,Ne,tt,dt){for(var wt=Yo(G,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ne.angle,tt),qt=this.paint.get("circle-radius").evaluate(oe,pe)+this.paint.get("circle-stroke-width").evaluate(oe,pe),tr="map"===this.paint.get("circle-pitch-alignment"),Kt=tr?wt:function(Wn,Gn){return Wn.map(function(ei){return Ru(ei,Gn)})}(wt,dt),ur=tr?qt*tt:qt,wr=0,Fr=xe;wr<Fr.length;wr+=1)for(var Rr=0,Yr=Fr[wr];Rr<Yr.length;Rr+=1){var Gr=Yr[Rr],en=tr?Gr:Ru(Gr,dt),bn=ur,Sn=tl([],[Gr.x,Gr.y,0,1],dt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?bn*=Sn[3]/Ne.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(bn*=Ne.cameraToCenterDistance/Sn[3]),Is(Kt,en,bn))return!0}return!1},P}(Ho));function Ru(M,P){var G=tl([],[M.x,M.y,0,1],P);return new n(G[0]/G[3],G[1]/G[3])}var zu=function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P}(oo);function $c(M,P,G,oe){var pe=P.width,xe=P.height;if(oe){if(oe instanceof Uint8ClampedArray)oe=new Uint8Array(oe.buffer);else if(oe.length!==pe*xe*G)throw new RangeError("mismatched image size")}else oe=new Uint8Array(pe*xe*G);return M.width=pe,M.height=xe,M.data=oe,M}function Fu(M,P,G){var oe=P.width,pe=P.height;if(oe!==M.width||pe!==M.height){var xe=$c({},{width:oe,height:pe},G);eu(M,xe,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,oe),height:Math.min(M.height,pe)},G),M.width=oe,M.height=pe,M.data=xe.data}}function eu(M,P,G,oe,pe,xe){if(0===pe.width||0===pe.height)return P;if(pe.width>M.width||pe.height>M.height||G.x>M.width-pe.width||G.y>M.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>P.width||pe.height>P.height||oe.x>P.width-pe.width||oe.y>P.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ee=M.data,Ne=P.data,tt=0;tt<pe.height;tt++)for(var dt=((G.y+tt)*M.width+G.x)*xe,wt=((oe.y+tt)*P.width+oe.x)*xe,qt=0;qt<pe.width*xe;qt++)Ne[wt+qt]=Ee[dt+qt];return P}nn("HeatmapBucket",zu,{omit:["layers"]});var hl=function(M,P){$c(this,M,1,P)};hl.prototype.resize=function(M){Fu(this,M,1)},hl.prototype.clone=function(){return new hl({width:this.width,height:this.height},new Uint8Array(this.data))},hl.copy=function(M,P,G,oe,pe){eu(M,P,G,oe,pe,1)};var us=function(M,P){$c(this,M,4,P)};us.prototype.resize=function(M){Fu(this,M,4)},us.prototype.replace=function(M,P){P?this.data.set(M):this.data=M instanceof Uint8ClampedArray?new Uint8Array(M.buffer):M},us.prototype.clone=function(){return new us({width:this.width,height:this.height},new Uint8Array(this.data))},us.copy=function(M,P,G,oe,pe){eu(M,P,G,oe,pe,4)},nn("AlphaImage",hl),nn("RGBAImage",us);var uf={paint:new Ao({"heatmap-radius":new Ti(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ti(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mi(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new is(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mi(Ie.paint_heatmap["heatmap-opacity"])})};function Bu(M,P){for(var G=new Uint8Array(1024),oe={},pe=0,xe=0;pe<256;pe++,xe+=4){oe[P]=pe/255;var Ee=M.evaluate(oe);G[xe+0]=Math.floor(255*Ee.r/Ee.a),G[xe+1]=Math.floor(255*Ee.g/Ee.a),G[xe+2]=Math.floor(255*Ee.b/Ee.a),G[xe+3]=Math.floor(255*Ee.a)}return new us({width:256,height:1},G)}var hf=function(M){function P(G){M.call(this,G,uf),this._updateColorRamp()}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.createBucket=function(G){return new zu(G)},P.prototype._handleSpecialPaintPropertyUpdate=function(G){"heatmap-color"===G&&this._updateColorRamp()},P.prototype._updateColorRamp=function(){this.colorRamp=Bu(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},P.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},P}(Ho),ff={paint:new Ao({"hillshade-illumination-direction":new mi(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mi(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mi(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mi(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mi(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mi(Ie.paint_hillshade["hillshade-accent-color"])})},pf=function(M){function P(G){M.call(this,G,ff)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},P}(Ho),Nu=oa([{name:"a_pos",components:2,type:"Int16"}],4).members,tu=fc,df=fc;function fc(M,P,G){G=G||2;var oe,pe,xe,Ee,Ne,tt,dt,wt=P&&P.length,qt=wt?P[0]*G:M.length,tr=ju(M,0,qt,G,!0),Kt=[];if(!tr||tr.next===tr.prev)return Kt;if(wt&&(tr=function(wr,Fr,Rr,Yr){var Gr,en,Wn,Gn=[];for(Gr=0,en=Fr.length;Gr<en;Gr++)(Wn=ju(wr,Fr[Gr]*Yr,Gr<en-1?Fr[Gr+1]*Yr:wr.length,Yr,!1))===Wn.next&&(Wn.steiner=!0),Gn.push(wf(Wn));for(Gn.sort(xf),Gr=0;Gr<Gn.length;Gr++)_f(Gn[Gr],Rr),Rr=rl(Rr,Rr.next);return Rr}(M,P,tr,G)),M.length>80*G){oe=xe=M[0],pe=Ee=M[1];for(var ur=G;ur<qt;ur+=G)(Ne=M[ur])<oe&&(oe=Ne),(tt=M[ur+1])<pe&&(pe=tt),Ne>xe&&(xe=Ne),tt>Ee&&(Ee=tt);dt=0!==(dt=Math.max(xe-oe,Ee-pe))?1/dt:0}return Yl(tr,Kt,G,oe,pe,dt),Kt}function ju(M,P,G,oe,pe){var xe,Ee;if(pe===iu(M,P,G,oe)>0)for(xe=P;xe<G;xe+=oe)Ee=Hu(xe,M[xe],M[xe+1],Ee);else for(xe=G-oe;xe>=P;xe-=oe)Ee=Hu(xe,M[xe],M[xe+1],Ee);return Ee&&pc(Ee,Ee.next)&&(Zl(Ee),Ee=Ee.next),Ee}function rl(M,P){if(!M)return M;P||(P=M);var G,oe=M;do{if(G=!1,oe.steiner||!pc(oe,oe.next)&&0!==_o(oe.prev,oe,oe.next))oe=oe.next;else{if(Zl(oe),(oe=P=oe.prev)===oe.next)break;G=!0}}while(G||oe!==P);return P}function Yl(M,P,G,oe,pe,xe,Ee){if(M){!Ee&&xe&&function(wt,qt,tr,Kt){var ur=wt;do{null===ur.z&&(ur.z=ru(ur.x,ur.y,qt,tr,Kt)),ur.prevZ=ur.prev,ur.nextZ=ur.next,ur=ur.next}while(ur!==wt);ur.prevZ.nextZ=null,ur.prevZ=null,function(wr){var Fr,Rr,Yr,Gr,en,bn,Sn,Wn,Gn=1;do{for(Rr=wr,wr=null,en=null,bn=0;Rr;){for(bn++,Yr=Rr,Sn=0,Fr=0;Fr<Gn&&(Sn++,Yr=Yr.nextZ);Fr++);for(Wn=Gn;Sn>0||Wn>0&&Yr;)0!==Sn&&(0===Wn||!Yr||Rr.z<=Yr.z)?(Gr=Rr,Rr=Rr.nextZ,Sn--):(Gr=Yr,Yr=Yr.nextZ,Wn--),en?en.nextZ=Gr:wr=Gr,Gr.prevZ=en,en=Gr;Rr=Yr}en.nextZ=null,Gn*=2}while(bn>1)}(ur)}(M,oe,pe,xe);for(var Ne,tt,dt=M;M.prev!==M.next;)if(Ne=M.prev,tt=M.next,xe?gf(M,oe,pe,xe):mf(M))P.push(Ne.i/G),P.push(M.i/G),P.push(tt.i/G),Zl(M),M=tt.next,dt=tt.next;else if((M=tt)===dt){Ee?1===Ee?Yl(M=vf(rl(M),P,G),P,G,oe,pe,xe,2):2===Ee&&yf(M,P,G,oe,pe,xe):Yl(rl(M),P,G,oe,pe,xe,1);break}}}function mf(M){var P=M.prev,G=M,oe=M.next;if(_o(P,G,oe)>=0)return!1;for(var pe=M.next.next;pe!==M.prev;){if(xl(P.x,P.y,G.x,G.y,oe.x,oe.y,pe.x,pe.y)&&_o(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function gf(M,P,G,oe){var pe=M.prev,xe=M,Ee=M.next;if(_o(pe,xe,Ee)>=0)return!1;for(var dt=pe.x>xe.x?pe.x>Ee.x?pe.x:Ee.x:xe.x>Ee.x?xe.x:Ee.x,wt=pe.y>xe.y?pe.y>Ee.y?pe.y:Ee.y:xe.y>Ee.y?xe.y:Ee.y,qt=ru(pe.x<xe.x?pe.x<Ee.x?pe.x:Ee.x:xe.x<Ee.x?xe.x:Ee.x,pe.y<xe.y?pe.y<Ee.y?pe.y:Ee.y:xe.y<Ee.y?xe.y:Ee.y,P,G,oe),tr=ru(dt,wt,P,G,oe),Kt=M.prevZ,ur=M.nextZ;Kt&&Kt.z>=qt&&ur&&ur.z<=tr;){if(Kt!==M.prev&&Kt!==M.next&&xl(pe.x,pe.y,xe.x,xe.y,Ee.x,Ee.y,Kt.x,Kt.y)&&_o(Kt.prev,Kt,Kt.next)>=0||(Kt=Kt.prevZ,ur!==M.prev&&ur!==M.next&&xl(pe.x,pe.y,xe.x,xe.y,Ee.x,Ee.y,ur.x,ur.y)&&_o(ur.prev,ur,ur.next)>=0))return!1;ur=ur.nextZ}for(;Kt&&Kt.z>=qt;){if(Kt!==M.prev&&Kt!==M.next&&xl(pe.x,pe.y,xe.x,xe.y,Ee.x,Ee.y,Kt.x,Kt.y)&&_o(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.prevZ}for(;ur&&ur.z<=tr;){if(ur!==M.prev&&ur!==M.next&&xl(pe.x,pe.y,xe.x,xe.y,Ee.x,Ee.y,ur.x,ur.y)&&_o(ur.prev,ur,ur.next)>=0)return!1;ur=ur.nextZ}return!0}function vf(M,P,G){var oe=M;do{var pe=oe.prev,xe=oe.next.next;!pc(pe,xe)&&Vu(pe,oe,oe.next,xe)&&Gl(pe,xe)&&Gl(xe,pe)&&(P.push(pe.i/G),P.push(oe.i/G),P.push(xe.i/G),Zl(oe),Zl(oe.next),oe=M=xe),oe=oe.next}while(oe!==M);return rl(oe)}function yf(M,P,G,oe,pe,xe){var Ee=M;do{for(var Ne=Ee.next.next;Ne!==Ee.prev;){if(Ee.i!==Ne.i&&kf(Ee,Ne)){var tt=Uu(Ee,Ne);return Ee=rl(Ee,Ee.next),tt=rl(tt,tt.next),Yl(Ee,P,G,oe,pe,xe),void Yl(tt,P,G,oe,pe,xe)}Ne=Ne.next}Ee=Ee.next}while(Ee!==M)}function xf(M,P){return M.x-P.x}function _f(M,P){if(P=function(oe,pe){var xe,Ee=pe,Ne=oe.x,tt=oe.y,dt=-1/0;do{if(tt<=Ee.y&&tt>=Ee.next.y&&Ee.next.y!==Ee.y){var wt=Ee.x+(tt-Ee.y)*(Ee.next.x-Ee.x)/(Ee.next.y-Ee.y);if(wt<=Ne&&wt>dt){if(dt=wt,wt===Ne){if(tt===Ee.y)return Ee;if(tt===Ee.next.y)return Ee.next}xe=Ee.x<Ee.next.x?Ee:Ee.next}}Ee=Ee.next}while(Ee!==pe);if(!xe)return null;if(Ne===dt)return xe;var qt,tr=xe,Kt=xe.x,ur=xe.y,wr=1/0;Ee=xe;do{Ne>=Ee.x&&Ee.x>=Kt&&Ne!==Ee.x&&xl(tt<ur?Ne:dt,tt,Kt,ur,tt<ur?dt:Ne,tt,Ee.x,Ee.y)&&(qt=Math.abs(tt-Ee.y)/(Ne-Ee.x),Gl(Ee,oe)&&(qt<wr||qt===wr&&(Ee.x>xe.x||Ee.x===xe.x&&bf(xe,Ee)))&&(xe=Ee,wr=qt)),Ee=Ee.next}while(Ee!==tr);return xe}(M,P)){var G=Uu(P,M);rl(P,P.next),rl(G,G.next)}}function bf(M,P){return _o(M.prev,M,P.prev)<0&&_o(P.next,M,M.next)<0}function ru(M,P,G,oe,pe){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-G)*pe)|M<<8))|M<<4))|M<<2))|M<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-oe)*pe)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function wf(M){var P=M,G=M;do{(P.x<G.x||P.x===G.x&&P.y<G.y)&&(G=P),P=P.next}while(P!==M);return G}function xl(M,P,G,oe,pe,xe,Ee,Ne){return(pe-Ee)*(P-Ne)-(M-Ee)*(xe-Ne)>=0&&(M-Ee)*(oe-Ne)-(G-Ee)*(P-Ne)>=0&&(G-Ee)*(xe-Ne)-(pe-Ee)*(oe-Ne)>=0}function kf(M,P){return M.next.i!==P.i&&M.prev.i!==P.i&&!function(G,oe){var pe=G;do{if(pe.i!==G.i&&pe.next.i!==G.i&&pe.i!==oe.i&&pe.next.i!==oe.i&&Vu(pe,pe.next,G,oe))return!0;pe=pe.next}while(pe!==G);return!1}(M,P)&&(Gl(M,P)&&Gl(P,M)&&function(G,oe){var pe=G,xe=!1,Ee=(G.x+oe.x)/2,Ne=(G.y+oe.y)/2;do{pe.y>Ne!=pe.next.y>Ne&&pe.next.y!==pe.y&&Ee<(pe.next.x-pe.x)*(Ne-pe.y)/(pe.next.y-pe.y)+pe.x&&(xe=!xe),pe=pe.next}while(pe!==G);return xe}(M,P)&&(_o(M.prev,M,P.prev)||_o(M,P.prev,P))||pc(M,P)&&_o(M.prev,M,M.next)>0&&_o(P.prev,P,P.next)>0)}function _o(M,P,G){return(P.y-M.y)*(G.x-P.x)-(P.x-M.x)*(G.y-P.y)}function pc(M,P){return M.x===P.x&&M.y===P.y}function Vu(M,P,G,oe){var pe=mc(_o(M,P,G)),xe=mc(_o(M,P,oe)),Ee=mc(_o(G,oe,M)),Ne=mc(_o(G,oe,P));return pe!==xe&&Ee!==Ne||!(0!==pe||!dc(M,G,P))||!(0!==xe||!dc(M,oe,P))||!(0!==Ee||!dc(G,M,oe))||!(0!==Ne||!dc(G,P,oe))}function dc(M,P,G){return P.x<=Math.max(M.x,G.x)&&P.x>=Math.min(M.x,G.x)&&P.y<=Math.max(M.y,G.y)&&P.y>=Math.min(M.y,G.y)}function mc(M){return M>0?1:M<0?-1:0}function Gl(M,P){return _o(M.prev,M,M.next)<0?_o(M,P,M.next)>=0&&_o(M,M.prev,P)>=0:_o(M,P,M.prev)<0||_o(M,M.next,P)<0}function Uu(M,P){var G=new nu(M.i,M.x,M.y),oe=new nu(P.i,P.x,P.y),pe=M.next,xe=P.prev;return M.next=P,P.prev=M,G.next=pe,pe.prev=G,oe.next=G,G.prev=oe,xe.next=oe,oe.prev=xe,oe}function Hu(M,P,G,oe){var pe=new nu(M,P,G);return oe?(pe.next=oe.next,pe.prev=oe,oe.next.prev=pe,oe.next=pe):(pe.prev=pe,pe.next=pe),pe}function Zl(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function nu(M,P,G){this.i=M,this.x=P,this.y=G,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iu(M,P,G,oe){for(var pe=0,xe=P,Ee=G-oe;xe<G;xe+=oe)pe+=(M[Ee]-M[xe])*(M[xe+1]+M[Ee+1]),Ee=xe;return pe}function Tf(M,P,G,oe,pe){!function xe(Ee,Ne,tt,dt,wt){for(;dt>tt;){if(dt-tt>600){var qt=dt-tt+1,tr=Ne-tt+1,Kt=Math.log(qt),ur=.5*Math.exp(2*Kt/3),wr=.5*Math.sqrt(Kt*ur*(qt-ur)/qt)*(tr-qt/2<0?-1:1);xe(Ee,Ne,Math.max(tt,Math.floor(Ne-tr*ur/qt+wr)),Math.min(dt,Math.floor(Ne+(qt-tr)*ur/qt+wr)),wt)}var Yr=Ee[Ne],Gr=tt,en=dt;for(Wl(Ee,tt,Ne),wt(Ee[dt],Yr)>0&&Wl(Ee,tt,dt);Gr<en;){for(Wl(Ee,Gr,en),Gr++,en--;wt(Ee[Gr],Yr)<0;)Gr++;for(;wt(Ee[en],Yr)>0;)en--}0===wt(Ee[tt],Yr)?Wl(Ee,tt,en):Wl(Ee,++en,dt),en<=Ne&&(tt=en+1),Ne<=en&&(dt=en-1)}}(M,P,G||0,oe||M.length-1,pe||Mf)}function Wl(M,P,G){var oe=M[P];M[P]=M[G],M[G]=oe}function Mf(M,P){return M<P?-1:M>P?1:0}function au(M,P){var G=M.length;if(G<=1)return[M];for(var oe,pe,xe=[],Ee=0;Ee<G;Ee++){var Ne=D(M[Ee]);0!==Ne&&(M[Ee].area=Math.abs(Ne),void 0===pe&&(pe=Ne<0),pe===Ne<0?(oe&&xe.push(oe),oe=[M[Ee]]):oe.push(M[Ee]))}if(oe&&xe.push(oe),P>1)for(var tt=0;tt<xe.length;tt++)xe[tt].length<=P||(Tf(xe[tt],P,1,xe[tt].length-1,Af),xe[tt]=xe[tt].slice(0,P));return xe}function Af(M,P){return P.area-M.area}function ou(M,P,G){for(var oe=G.patternDependencies,pe=!1,xe=0,Ee=P;xe<Ee.length;xe+=1){var Ne=Ee[xe].paint.get(M+"-pattern");Ne.isConstant()||(pe=!0);var tt=Ne.constantOr(null);tt&&(pe=!0,oe[tt.to]=!0,oe[tt.from]=!0)}return pe}function su(M,P,G,oe,pe){for(var xe=pe.patternDependencies,Ee=0,Ne=P;Ee<Ne.length;Ee+=1){var tt=Ne[Ee],dt=tt.paint.get(M+"-pattern").value;if("constant"!==dt.kind){var wt=dt.evaluate({zoom:oe-1},G,{},pe.availableImages),qt=dt.evaluate({zoom:oe},G,{},pe.availableImages),tr=dt.evaluate({zoom:oe+1},G,{},pe.availableImages);qt=qt&&qt.name?qt.name:qt,tr=tr&&tr.name?tr.name:tr,xe[wt=wt&&wt.name?wt.name:wt]=!0,xe[qt]=!0,xe[tr]=!0,G.patterns[tt.id]={min:wt,mid:qt,max:tr}}}return G}fc.deviation=function(M,P,G,oe){var pe=P&&P.length,Ee=Math.abs(iu(M,0,pe?P[0]*G:M.length,G));if(pe)for(var Ne=0,tt=P.length;Ne<tt;Ne++)Ee-=Math.abs(iu(M,P[Ne]*G,Ne<tt-1?P[Ne+1]*G:M.length,G));var qt=0;for(Ne=0;Ne<oe.length;Ne+=3){var tr=oe[Ne]*G,Kt=oe[Ne+1]*G,ur=oe[Ne+2]*G;qt+=Math.abs((M[tr]-M[ur])*(M[Kt+1]-M[tr+1])-(M[tr]-M[Kt])*(M[ur+1]-M[tr+1]))}return 0===Ee&&0===qt?0:Math.abs((qt-Ee)/Ee)},fc.flatten=function(M){for(var P=M[0][0].length,G={vertices:[],holes:[],dimensions:P},oe=0,pe=0;pe<M.length;pe++){for(var xe=0;xe<M[pe].length;xe++)for(var Ee=0;Ee<P;Ee++)G.vertices.push(M[pe][xe][Ee]);pe>0&&G.holes.push(oe+=M[pe-1].length)}return G},tu.default=df;var Os=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gs,this.indexArray=new Ur,this.indexArray2=new B,this.programConfigurations=new wa(Nu,M.layers,M.zoom),this.segments=new Ht,this.segments2=new Ht,this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};Os.prototype.populate=function(M,P,G){this.hasPattern=ou("fill",this.layers,P);for(var oe=this.layers[0].layout.get("fill-sort-key"),pe=[],xe=0,Ee=M;xe<Ee.length;xe+=1){var Ne=Ee[xe],tt=Ne.feature,dt=Ne.id,wt=Ne.index,qt=Ne.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,Kt={type:tt.type,id:dt,properties:tt.properties,geometry:tr?Ca(tt):[]};if(this.layers[0]._featureFilter.filter(new aa(this.zoom),Kt,G)){tr||(Kt.geometry=Ca(tt));var ur=oe?oe.evaluate(Kt,{},G,P.availableImages):void 0;pe.push({id:dt,properties:tt.properties,type:tt.type,sourceLayerIndex:qt,index:wt,geometry:Kt.geometry,patterns:{},sortKey:ur})}}oe&&pe.sort(function(ei,fi){return ei.sortKey-fi.sortKey});for(var Fr=0,Rr=pe;Fr<Rr.length;Fr+=1){var Yr=Rr[Fr],en=Yr.geometry,bn=Yr.index,Sn=Yr.sourceLayerIndex;if(this.hasPattern){var Wn=su("fill",this.layers,Yr,this.zoom,P);this.patternFeatures.push(Wn)}else this.addFeature(Yr,en,bn,G,{});P.featureIndex.insert(M[bn].feature,en,bn,Sn,this.index)}},Os.prototype.update=function(M,P,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,P,this.stateDependentLayers,G)},Os.prototype.addFeatures=function(M,P,G){for(var oe=0,pe=this.patternFeatures;oe<pe.length;oe+=1){var xe=pe[oe];this.addFeature(xe,xe.geometry,xe.index,P,G)}},Os.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Os.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Nu),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},Os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Os.prototype.addFeature=function(M,P,G,oe,pe){for(var xe=0,Ee=au(P,500);xe<Ee.length;xe+=1){for(var Ne=Ee[xe],tt=0,dt=0,wt=Ne;dt<wt.length;dt+=1)tt+=wt[dt].length;for(var qt=this.segments.prepareSegment(tt,this.layoutVertexArray,this.indexArray),tr=qt.vertexLength,Kt=[],ur=[],wr=0,Fr=Ne;wr<Fr.length;wr+=1){var Rr=Fr[wr];if(0!==Rr.length){Rr!==Ne[0]&&ur.push(Kt.length/2);var Yr=this.segments2.prepareSegment(Rr.length,this.layoutVertexArray,this.indexArray2),Gr=Yr.vertexLength;this.layoutVertexArray.emplaceBack(Rr[0].x,Rr[0].y),this.indexArray2.emplaceBack(Gr+Rr.length-1,Gr),Kt.push(Rr[0].x),Kt.push(Rr[0].y);for(var en=1;en<Rr.length;en++)this.layoutVertexArray.emplaceBack(Rr[en].x,Rr[en].y),this.indexArray2.emplaceBack(Gr+en-1,Gr+en),Kt.push(Rr[en].x),Kt.push(Rr[en].y);Yr.vertexLength+=Rr.length,Yr.primitiveLength+=Rr.length}}for(var bn=tu(Kt,ur),Sn=0;Sn<bn.length;Sn+=3)this.indexArray.emplaceBack(tr+bn[Sn],tr+bn[Sn+1],tr+bn[Sn+2]);qt.vertexLength+=tt,qt.primitiveLength+=bn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,pe,oe)},nn("FillBucket",Os,{omit:["layers","patternFeatures"]});var Sf=new Ao({"fill-sort-key":new Ti(Ie.layout_fill["fill-sort-key"])}),Cf={paint:new Ao({"fill-antialias":new mi(Ie.paint_fill["fill-antialias"]),"fill-opacity":new Ti(Ie.paint_fill["fill-opacity"]),"fill-color":new Ti(Ie.paint_fill["fill-color"]),"fill-outline-color":new Ti(Ie.paint_fill["fill-outline-color"]),"fill-translate":new mi(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new mi(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ds(Ie.paint_fill["fill-pattern"])}),layout:Sf},Ef=function(M){function P(G){M.call(this,G,Cf)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.recalculate=function(G,oe){M.prototype.recalculate.call(this,G,oe);var pe=this.paint._values["fill-outline-color"];"constant"===pe.value.kind&&void 0===pe.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},P.prototype.createBucket=function(G){return new Os(G)},P.prototype.queryRadius=function(){return qo(this.paint.get("fill-translate"))},P.prototype.queryIntersectsFeature=function(G,oe,pe,xe,Ee,Ne,tt){return Us(Yo(G,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ne.angle,tt),xe)},P.prototype.isTileClipped=function(){return!0},P}(Ho),qu=oa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Yu=_l;function _l(M,P,G,oe,pe){this.properties={},this.extent=G,this.type=0,this._pbf=M,this._geometry=-1,this._keys=oe,this._values=pe,M.readFields(Lf,this,P)}function Lf(M,P,G){1==M?P.id=G.readVarint():2==M?function(oe,pe){for(var xe=oe.readVarint()+oe.pos;oe.pos<xe;){var Ee=pe._keys[oe.readVarint()],Ne=pe._values[oe.readVarint()];pe.properties[Ee]=Ne}}(G,P):3==M?P.type=G.readVarint():4==M&&(P._geometry=G.pos)}function Df(M){for(var P,G,oe=0,pe=0,xe=M.length,Ee=xe-1;pe<xe;Ee=pe++)oe+=((G=M[Ee]).x-(P=M[pe]).x)*(P.y+G.y);return oe}_l.types=["Unknown","Point","LineString","Polygon"],_l.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var P,G=M.readVarint()+M.pos,oe=1,pe=0,xe=0,Ee=0,Ne=[];M.pos<G;){if(pe<=0){var tt=M.readVarint();oe=7&tt,pe=tt>>3}if(pe--,1===oe||2===oe)xe+=M.readSVarint(),Ee+=M.readSVarint(),1===oe&&(P&&Ne.push(P),P=[]),P.push(new n(xe,Ee));else{if(7!==oe)throw new Error("unknown command "+oe);P&&P.push(P[0].clone())}}return P&&Ne.push(P),Ne},_l.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var P=M.readVarint()+M.pos,G=1,oe=0,pe=0,xe=0,Ee=1/0,Ne=-1/0,tt=1/0,dt=-1/0;M.pos<P;){if(oe<=0){var wt=M.readVarint();G=7&wt,oe=wt>>3}if(oe--,1===G||2===G)(pe+=M.readSVarint())<Ee&&(Ee=pe),pe>Ne&&(Ne=pe),(xe+=M.readSVarint())<tt&&(tt=xe),xe>dt&&(dt=xe);else if(7!==G)throw new Error("unknown command "+G)}return[Ee,tt,Ne,dt]},_l.prototype.toGeoJSON=function(M,P,G){var oe,pe,xe=this.extent*Math.pow(2,G),Ee=this.extent*M,Ne=this.extent*P,tt=this.loadGeometry(),dt=_l.types[this.type];function wt(Kt){for(var ur=0;ur<Kt.length;ur++){var wr=Kt[ur];Kt[ur]=[360*(wr.x+Ee)/xe-180,360/Math.PI*Math.atan(Math.exp((180-360*(wr.y+Ne)/xe)*Math.PI/180))-90]}}switch(this.type){case 1:var qt=[];for(oe=0;oe<tt.length;oe++)qt[oe]=tt[oe][0];wt(tt=qt);break;case 2:for(oe=0;oe<tt.length;oe++)wt(tt[oe]);break;case 3:for(tt=function(Kt){var ur=Kt.length;if(ur<=1)return[Kt];for(var wr,Fr,Rr=[],Yr=0;Yr<ur;Yr++){var Gr=Df(Kt[Yr]);0!==Gr&&(void 0===Fr&&(Fr=Gr<0),Fr===Gr<0?(wr&&Rr.push(wr),wr=[Kt[Yr]]):wr.push(Kt[Yr]))}return wr&&Rr.push(wr),Rr}(tt),oe=0;oe<tt.length;oe++)for(pe=0;pe<tt[oe].length;pe++)wt(tt[oe][pe])}1===tt.length?tt=tt[0]:dt="Multi"+dt;var tr={type:"Feature",geometry:{type:dt,coordinates:tt},properties:this.properties};return"id"in this&&(tr.id=this.id),tr};var Gu=Zu;function Zu(M,P){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(If,this,P),this.length=this._features.length}function If(M,P,G){15===M?P.version=G.readVarint():1===M?P.name=G.readString():5===M?P.extent=G.readVarint():2===M?P._features.push(G.pos):3===M?P._keys.push(G.readString()):4===M&&P._values.push(function(oe){for(var pe=null,xe=oe.readVarint()+oe.pos;oe.pos<xe;){var Ee=oe.readVarint()>>3;pe=1===Ee?oe.readString():2===Ee?oe.readFloat():3===Ee?oe.readDouble():4===Ee?oe.readVarint64():5===Ee?oe.readVarint():6===Ee?oe.readSVarint():7===Ee?oe.readBoolean():null}return pe}(G))}function Pf(M,P,G){if(3===M){var oe=new Gu(G,G.readVarint()+G.pos);oe.length&&(P[oe.name]=oe)}}Zu.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var P=this._pbf.readVarint()+this._pbf.pos;return new Yu(this._pbf,P,this.extent,this._keys,this._values)};var bl={VectorTile:function(M,P){this.layers=M.readFields(Pf,{},P)},VectorTileFeature:Yu,VectorTileLayer:Gu},Of=bl.VectorTileFeature.types,lu=Math.pow(2,13);function Xl(M,P,G,oe,pe,xe,Ee,Ne){M.emplaceBack(P,G,2*Math.floor(oe*lu)+Ee,pe*lu*2,xe*lu*2,Math.round(Ne))}var Rs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new vs,this.indexArray=new Ur,this.programConfigurations=new wa(qu,M.layers,M.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};function Rf(M,P){return M.x===P.x&&(M.x<0||M.x>8192)||M.y===P.y&&(M.y<0||M.y>8192)}function zf(M){return M.every(function(P){return P.x<0})||M.every(function(P){return P.x>8192})||M.every(function(P){return P.y<0})||M.every(function(P){return P.y>8192})}Rs.prototype.populate=function(M,P,G){this.features=[],this.hasPattern=ou("fill-extrusion",this.layers,P);for(var oe=0,pe=M;oe<pe.length;oe+=1){var xe=pe[oe],Ee=xe.feature,Ne=xe.id,tt=xe.index,dt=xe.sourceLayerIndex,wt=this.layers[0]._featureFilter.needGeometry,qt={type:Ee.type,id:Ne,properties:Ee.properties,geometry:wt?Ca(Ee):[]};if(this.layers[0]._featureFilter.filter(new aa(this.zoom),qt,G)){var tr={id:Ne,sourceLayerIndex:dt,index:tt,geometry:wt?qt.geometry:Ca(Ee),properties:Ee.properties,type:Ee.type,patterns:{}};void 0!==Ee.id&&(tr.id=Ee.id),this.hasPattern?this.features.push(su("fill-extrusion",this.layers,tr,this.zoom,P)):this.addFeature(tr,tr.geometry,tt,G,{}),P.featureIndex.insert(Ee,tr.geometry,tt,dt,this.index,!0)}}},Rs.prototype.addFeatures=function(M,P,G){for(var oe=0,pe=this.features;oe<pe.length;oe+=1){var xe=pe[oe];this.addFeature(xe,xe.geometry,xe.index,P,G)}},Rs.prototype.update=function(M,P,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,P,this.stateDependentLayers,G)},Rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,qu),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Rs.prototype.addFeature=function(M,P,G,oe,pe){for(var xe=0,Ee=au(P,500);xe<Ee.length;xe+=1){for(var Ne=Ee[xe],tt=0,dt=0,wt=Ne;dt<wt.length;dt+=1)tt+=wt[dt].length;for(var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),tr=0,Kt=Ne;tr<Kt.length;tr+=1){var ur=Kt[tr];if(0!==ur.length&&!zf(ur))for(var wr=0,Fr=0;Fr<ur.length;Fr++){var Rr=ur[Fr];if(Fr>=1){var Yr=ur[Fr-1];if(!Rf(Rr,Yr)){qt.vertexLength+4>Ht.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Gr=Rr.sub(Yr)._perp()._unit(),en=Yr.dist(Rr);wr+en>32768&&(wr=0),Xl(this.layoutVertexArray,Rr.x,Rr.y,Gr.x,Gr.y,0,0,wr),Xl(this.layoutVertexArray,Rr.x,Rr.y,Gr.x,Gr.y,0,1,wr),Xl(this.layoutVertexArray,Yr.x,Yr.y,Gr.x,Gr.y,0,0,wr+=en),Xl(this.layoutVertexArray,Yr.x,Yr.y,Gr.x,Gr.y,0,1,wr);var bn=qt.vertexLength;this.indexArray.emplaceBack(bn,bn+2,bn+1),this.indexArray.emplaceBack(bn+1,bn+2,bn+3),qt.vertexLength+=4,qt.primitiveLength+=2}}}}if(qt.vertexLength+tt>Ht.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(tt,this.layoutVertexArray,this.indexArray)),"Polygon"===Of[M.type]){for(var Sn=[],Wn=[],Gn=qt.vertexLength,ei=0,fi=Ne;ei<fi.length;ei+=1){var pi=fi[ei];if(0!==pi.length){pi!==Ne[0]&&Wn.push(Sn.length/2);for(var ni=0;ni<pi.length;ni++){var bi=pi[ni];Xl(this.layoutVertexArray,bi.x,bi.y,0,0,1,1,0),Sn.push(bi.x),Sn.push(bi.y)}}}for(var vi=tu(Sn,Wn),di=0;di<vi.length;di+=3)this.indexArray.emplaceBack(Gn+vi[di],Gn+vi[di+2],Gn+vi[di+1]);qt.primitiveLength+=vi.length/3,qt.vertexLength+=tt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,pe,oe)},nn("FillExtrusionBucket",Rs,{omit:["layers","features"]});var Ff={paint:new Ao({"fill-extrusion-opacity":new mi(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ti(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mi(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mi(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ds(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ti(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ti(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mi(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Bf=function(M){function P(G){M.call(this,G,Ff)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.createBucket=function(G){return new Rs(G)},P.prototype.queryRadius=function(){return qo(this.paint.get("fill-extrusion-translate"))},P.prototype.is3D=function(){return!0},P.prototype.queryIntersectsFeature=function(G,oe,pe,xe,Ee,Ne,tt,dt){var wt=Yo(G,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ne.angle,tt),qt=this.paint.get("fill-extrusion-height").evaluate(oe,pe),tr=this.paint.get("fill-extrusion-base").evaluate(oe,pe),Kt=function(wr,Fr,Rr,Yr){for(var Gr=[],en=0,bn=wr;en<bn.length;en+=1){var Sn=bn[en],Wn=[Sn.x,Sn.y,0,1];tl(Wn,Wn,Fr),Gr.push(new n(Wn[0]/Wn[3],Wn[1]/Wn[3]))}return Gr}(wt,dt),ur=function(wr,Fr,Rr,Yr){for(var Gr=[],en=[],bn=Yr[8]*Fr,Sn=Yr[9]*Fr,Wn=Yr[10]*Fr,Gn=Yr[11]*Fr,ei=Yr[8]*Rr,fi=Yr[9]*Rr,pi=Yr[10]*Rr,ni=Yr[11]*Rr,bi=0,vi=wr;bi<vi.length;bi+=1){for(var ia=[],ea=[],ha=0,Ei=vi[bi];ha<Ei.length;ha+=1){var ta=Ei[ha],La=ta.x,ka=ta.y,Ba=Yr[0]*La+Yr[4]*ka+Yr[12],Ta=Yr[1]*La+Yr[5]*ka+Yr[13],ko=Yr[2]*La+Yr[6]*ka+Yr[14],Na=Yr[3]*La+Yr[7]*ka+Yr[15],Go=ko+Wn,zo=Na+Gn,jo=Ba+ei,as=Ta+fi,Ko=ko+pi,To=Na+ni,Vo=new n((Ba+bn)/zo,(Ta+Sn)/zo);Vo.z=Go/zo,ia.push(Vo);var po=new n(jo/To,as/To);po.z=Ko/To,ea.push(po)}Gr.push(ia),en.push(ea)}return[Gr,en]}(xe,tr,qt,dt);return function(wr,Fr,Rr){var Yr=1/0;Us(Rr,Fr)&&(Yr=Wu(Rr,Fr[0]));for(var Gr=0;Gr<Fr.length;Gr++)for(var en=Fr[Gr],bn=wr[Gr],Sn=0;Sn<en.length-1;Sn++){var Wn=en[Sn],pi=[Wn,en[Sn+1],bn[Sn+1],bn[Sn],Wn];Xo(Rr,pi)&&(Yr=Math.min(Yr,Wu(Rr,pi)))}return Yr!==1/0&&Yr}(ur[0],ur[1],Kt)},P}(Ho);function Jl(M,P){return M.x*P.x+M.y*P.y}function Wu(M,P){if(1===M.length){for(var G,oe=0,pe=P[oe++];!G||pe.equals(G);)if(!(G=P[oe++]))return 1/0;for(;oe<P.length;oe++){var xe=P[oe],Ee=M[0],Ne=G.sub(pe),tt=xe.sub(pe),dt=Ee.sub(pe),wt=Jl(Ne,Ne),qt=Jl(Ne,tt),tr=Jl(tt,tt),Kt=Jl(dt,Ne),ur=Jl(dt,tt),wr=wt*tr-qt*qt,Fr=(tr*Kt-qt*ur)/wr,Rr=(wt*ur-qt*Kt)/wr,Gr=pe.z*(1-Fr-Rr)+G.z*Fr+xe.z*Rr;if(isFinite(Gr))return Gr}return 1/0}for(var en=1/0,bn=0,Sn=P;bn<Sn.length;bn+=1)en=Math.min(en,Sn[bn].z);return en}var Xu=oa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Nf=bl.VectorTileFeature.types,jf=Math.cos(Math.PI/180*37.5),Ju=Math.pow(2,14)/.5,hs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Es,this.indexArray=new Ur,this.programConfigurations=new wa(Xu,M.layers,M.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};hs.prototype.populate=function(M,P,G){this.hasPattern=ou("line",this.layers,P);for(var oe=this.layers[0].layout.get("line-sort-key"),pe=[],xe=0,Ee=M;xe<Ee.length;xe+=1){var Ne=Ee[xe],tt=Ne.feature,dt=Ne.id,wt=Ne.index,qt=Ne.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,Kt={type:tt.type,id:dt,properties:tt.properties,geometry:tr?Ca(tt):[]};if(this.layers[0]._featureFilter.filter(new aa(this.zoom),Kt,G)){tr||(Kt.geometry=Ca(tt));var ur=oe?oe.evaluate(Kt,{},G):void 0;pe.push({id:dt,properties:tt.properties,type:tt.type,sourceLayerIndex:qt,index:wt,geometry:Kt.geometry,patterns:{},sortKey:ur})}}oe&&pe.sort(function(ei,fi){return ei.sortKey-fi.sortKey});for(var Fr=0,Rr=pe;Fr<Rr.length;Fr+=1){var Yr=Rr[Fr],en=Yr.geometry,bn=Yr.index,Sn=Yr.sourceLayerIndex;if(this.hasPattern){var Wn=su("line",this.layers,Yr,this.zoom,P);this.patternFeatures.push(Wn)}else this.addFeature(Yr,en,bn,G,{});P.featureIndex.insert(M[bn].feature,en,bn,Sn,this.index)}},hs.prototype.update=function(M,P,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,P,this.stateDependentLayers,G)},hs.prototype.addFeatures=function(M,P,G){for(var oe=0,pe=this.patternFeatures;oe<pe.length;oe+=1){var xe=pe[oe];this.addFeature(xe,xe.geometry,xe.index,P,G)}},hs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Xu),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hs.prototype.addFeature=function(M,P,G,oe,pe){for(var xe=this.layers[0].layout,Ee=xe.get("line-join").evaluate(M,{}),Ne=xe.get("line-cap"),tt=xe.get("line-miter-limit"),dt=xe.get("line-round-limit"),wt=0,qt=P;wt<qt.length;wt+=1)this.addLine(qt[wt],M,Ee,Ne,tt,dt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,pe,oe)},hs.prototype.addLine=function(M,P,G,oe,pe,xe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,P.properties&&P.properties.hasOwnProperty("mapbox_clip_start")&&P.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+P.properties.mapbox_clip_start,this.clipEnd=+P.properties.mapbox_clip_end;for(var Ee=0;Ee<M.length-1;Ee++)this.totalDistance+=M[Ee].dist(M[Ee+1]);this.updateScaledDistance()}for(var Ne="Polygon"===Nf[P.type],tt=M.length;tt>=2&&M[tt-1].equals(M[tt-2]);)tt--;for(var dt=0;dt<tt-1&&M[dt].equals(M[dt+1]);)dt++;if(!(tt<(Ne?3:2))){"bevel"===G&&(pe=1.05);var wt,qt=this.overscaling<=16?122880/(512*this.overscaling):0,tr=this.segments.prepareSegment(10*tt,this.layoutVertexArray,this.indexArray),Kt=void 0,ur=void 0,wr=void 0,Fr=void 0;this.e1=this.e2=-1,Ne&&(Fr=M[dt].sub(wt=M[tt-2])._unit()._perp());for(var Rr=dt;Rr<tt;Rr++)if(!(ur=Rr===tt-1?Ne?M[dt+1]:void 0:M[Rr+1])||!M[Rr].equals(ur)){Fr&&(wr=Fr),wt&&(Kt=wt),wt=M[Rr],Fr=ur?ur.sub(wt)._unit()._perp():wr;var Yr=(wr=wr||Fr).add(Fr);0===Yr.x&&0===Yr.y||Yr._unit();var Gr=wr.x*Fr.x+wr.y*Fr.y,en=Yr.x*Fr.x+Yr.y*Fr.y,bn=0!==en?1/en:1/0,Sn=2*Math.sqrt(2-2*en),Wn=en<jf&&Kt&&ur,Gn=wr.x*Fr.y-wr.y*Fr.x>0;if(Wn&&Rr>dt){var ei=wt.dist(Kt);if(ei>2*qt){var fi=wt.sub(wt.sub(Kt)._mult(qt/ei)._round());this.updateDistance(Kt,fi),this.addCurrentVertex(fi,wr,0,0,tr),Kt=fi}}var pi=Kt&&ur,ni=pi?G:Ne?"butt":oe;if(pi&&"round"===ni&&(bn<xe?ni="miter":bn<=2&&(ni="fakeround")),"miter"===ni&&bn>pe&&(ni="bevel"),"bevel"===ni&&(bn>2&&(ni="flipbevel"),bn<pe&&(ni="miter")),Kt&&this.updateDistance(Kt,wt),"miter"===ni)Yr._mult(bn),this.addCurrentVertex(wt,Yr,0,0,tr);else if("flipbevel"===ni){if(bn>100)Yr=Fr.mult(-1);else{var bi=bn*wr.add(Fr).mag()/wr.sub(Fr).mag();Yr._perp()._mult(bi*(Gn?-1:1))}this.addCurrentVertex(wt,Yr,0,0,tr),this.addCurrentVertex(wt,Yr.mult(-1),0,0,tr)}else if("bevel"===ni||"fakeround"===ni){var vi=-Math.sqrt(bn*bn-1),di=Gn?vi:0,ia=Gn?0:vi;if(Kt&&this.addCurrentVertex(wt,wr,di,ia,tr),"fakeround"===ni)for(var ea=Math.round(180*Sn/Math.PI/20),ha=1;ha<ea;ha++){var Ei=ha/ea;if(.5!==Ei){var ta=Ei-.5;Ei+=Ei*ta*(Ei-1)*((1.0904+Gr*(Gr*(3.55645-1.43519*Gr)-3.2452))*ta*ta+(.848013+Gr*(.215638*Gr-1.06021)))}var La=Fr.sub(wr)._mult(Ei)._add(wr)._unit()._mult(Gn?-1:1);this.addHalfVertex(wt,La.x,La.y,!1,Gn,0,tr)}ur&&this.addCurrentVertex(wt,Fr,-di,-ia,tr)}else if("butt"===ni)this.addCurrentVertex(wt,Yr,0,0,tr);else if("square"===ni){var ka=Kt?1:-1;this.addCurrentVertex(wt,Yr,ka,ka,tr)}else"round"===ni&&(Kt&&(this.addCurrentVertex(wt,wr,0,0,tr),this.addCurrentVertex(wt,wr,1,1,tr,!0)),ur&&(this.addCurrentVertex(wt,Fr,-1,-1,tr,!0),this.addCurrentVertex(wt,Fr,0,0,tr)));if(Wn&&Rr<tt-1){var Ba=wt.dist(ur);if(Ba>2*qt){var Ta=wt.add(ur.sub(wt)._mult(qt/Ba)._round());this.updateDistance(wt,Ta),this.addCurrentVertex(Ta,Fr,0,0,tr),wt=Ta}}}}},hs.prototype.addCurrentVertex=function(M,P,G,oe,pe,xe){void 0===xe&&(xe=!1);var tt=P.y*oe-P.x,dt=-P.y-P.x*oe;this.addHalfVertex(M,P.x+P.y*G,P.y-P.x*G,xe,!1,G,pe),this.addHalfVertex(M,tt,dt,xe,!0,-oe,pe),this.distance>Ju/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(M,P,G,oe,pe,xe))},hs.prototype.addHalfVertex=function(M,P,G,oe,pe,xe,Ee){var dt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((M.x<<1)+(oe?1:0),(M.y<<1)+(pe?1:0),Math.round(63*P)+128,Math.round(63*G)+128,1+(0===xe?0:xe<0?-1:1)|(63&dt)<<2,dt>>6);var wt=Ee.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,wt),Ee.primitiveLength++),pe?this.e2=wt:this.e1=wt},hs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ju-1):this.distance},hs.prototype.updateDistance=function(M,P){this.distance+=M.dist(P),this.updateScaledDistance()},nn("LineBucket",hs,{omit:["layers","patternFeatures"]});var Vf=new Ao({"line-cap":new mi(Ie.layout_line["line-cap"]),"line-join":new Ti(Ie.layout_line["line-join"]),"line-miter-limit":new mi(Ie.layout_line["line-miter-limit"]),"line-round-limit":new mi(Ie.layout_line["line-round-limit"]),"line-sort-key":new Ti(Ie.layout_line["line-sort-key"])}),Ku={paint:new Ao({"line-opacity":new Ti(Ie.paint_line["line-opacity"]),"line-color":new Ti(Ie.paint_line["line-color"]),"line-translate":new mi(Ie.paint_line["line-translate"]),"line-translate-anchor":new mi(Ie.paint_line["line-translate-anchor"]),"line-width":new Ti(Ie.paint_line["line-width"]),"line-gap-width":new Ti(Ie.paint_line["line-gap-width"]),"line-offset":new Ti(Ie.paint_line["line-offset"]),"line-blur":new Ti(Ie.paint_line["line-blur"]),"line-dasharray":new ws(Ie.paint_line["line-dasharray"]),"line-pattern":new Ds(Ie.paint_line["line-pattern"]),"line-gradient":new is(Ie.paint_line["line-gradient"])}),layout:Vf},Qu=new(function(M){function P(){M.apply(this,arguments)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.possiblyEvaluate=function(G,oe){return oe=new aa(Math.floor(oe.zoom),{now:oe.now,fadeDuration:oe.fadeDuration,zoomHistory:oe.zoomHistory,transition:oe.transition}),M.prototype.possiblyEvaluate.call(this,G,oe)},P.prototype.evaluate=function(G,oe,pe,xe){return oe=h({},oe,{zoom:Math.floor(oe.zoom)}),M.prototype.evaluate.call(this,G,oe,pe,xe)},P}(Ti))(Ku.paint.properties["line-width"].specification);Qu.useIntegerZoom=!0;var Uf=function(M){function P(G){M.call(this,G,Ku)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype._handleSpecialPaintPropertyUpdate=function(G){"line-gradient"===G&&this._updateGradient()},P.prototype._updateGradient=function(){this.gradient=Bu(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},P.prototype.recalculate=function(G,oe){M.prototype.recalculate.call(this,G,oe),this.paint._values["line-floorwidth"]=Qu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,G)},P.prototype.createBucket=function(G){return new hs(G)},P.prototype.queryRadius=function(G){var oe=G,pe=$u(za("line-width",this,oe),za("line-gap-width",this,oe)),xe=za("line-offset",this,oe);return pe/2+Math.abs(xe)+qo(this.paint.get("line-translate"))},P.prototype.queryIntersectsFeature=function(G,oe,pe,xe,Ee,Ne,tt){var dt=Yo(G,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ne.angle,tt),wt=tt/2*$u(this.paint.get("line-width").evaluate(oe,pe),this.paint.get("line-gap-width").evaluate(oe,pe)),qt=this.paint.get("line-offset").evaluate(oe,pe);return qt&&(xe=function(tr,Kt){for(var ur=[],wr=new n(0,0),Fr=0;Fr<tr.length;Fr++){for(var Rr=tr[Fr],Yr=[],Gr=0;Gr<Rr.length;Gr++){var bn=Rr[Gr],Sn=Rr[Gr+1],Wn=0===Gr?wr:bn.sub(Rr[Gr-1])._unit()._perp(),Gn=Gr===Rr.length-1?wr:Sn.sub(bn)._unit()._perp(),ei=Wn._add(Gn)._unit();ei._mult(1/(ei.x*Gn.x+ei.y*Gn.y)),Yr.push(ei._mult(Kt)._add(bn))}ur.push(Yr)}return ur}(xe,qt*tt)),function(tr,Kt,ur){for(var wr=0;wr<Kt.length;wr++){var Fr=Kt[wr];if(tr.length>=3)for(var Rr=0;Rr<Fr.length;Rr++)if(ys(tr,Fr[Rr]))return!0;if(sl(tr,Fr,ur))return!0}return!1}(dt,xe,wt)},P.prototype.isTileClipped=function(){return!0},P}(Ho);function $u(M,P){return P>0?P+2*M:M}var cu=oa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hf=oa([{name:"a_projected_pos",components:3,type:"Float32"}],4),qf=(oa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),oa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),eh=(oa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),oa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Yf=oa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gf(M,P,G){return M.sections.forEach(function(oe){var pe,Ee,Ne;oe.text=(pe=oe.text,Ee=G,"uppercase"===(Ne=P.layout.get("text-transform").evaluate(Ee,{}))?pe=pe.toLocaleUpperCase():"lowercase"===Ne&&(pe=pe.toLocaleLowerCase()),fo.applyArabicShaping&&(pe=fo.applyArabicShaping(pe)),pe)}),M}oa([{name:"triangle",components:3,type:"Uint16"}]),oa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),oa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),oa([{type:"Float32",name:"offsetX"}]),oa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Kl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},th=function(M,P,G,oe,pe){var xe,Ee,Ne=8*pe-oe-1,tt=(1<<Ne)-1,dt=tt>>1,wt=-7,qt=G?pe-1:0,tr=G?-1:1,Kt=M[P+qt];for(qt+=tr,xe=Kt&(1<<-wt)-1,Kt>>=-wt,wt+=Ne;wt>0;xe=256*xe+M[P+qt],qt+=tr,wt-=8);for(Ee=xe&(1<<-wt)-1,xe>>=-wt,wt+=oe;wt>0;Ee=256*Ee+M[P+qt],qt+=tr,wt-=8);if(0===xe)xe=1-dt;else{if(xe===tt)return Ee?NaN:1/0*(Kt?-1:1);Ee+=Math.pow(2,oe),xe-=dt}return(Kt?-1:1)*Ee*Math.pow(2,xe-oe)},rh=function(M,P,G,oe,pe,xe){var Ee,Ne,tt,dt=8*xe-pe-1,wt=(1<<dt)-1,qt=wt>>1,tr=23===pe?Math.pow(2,-24)-Math.pow(2,-77):0,Kt=oe?0:xe-1,ur=oe?1:-1,wr=P<0||0===P&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(Ne=isNaN(P)?1:0,Ee=wt):(Ee=Math.floor(Math.log(P)/Math.LN2),P*(tt=Math.pow(2,-Ee))<1&&(Ee--,tt*=2),(P+=Ee+qt>=1?tr/tt:tr*Math.pow(2,1-qt))*tt>=2&&(Ee++,tt/=2),Ee+qt>=wt?(Ne=0,Ee=wt):Ee+qt>=1?(Ne=(P*tt-1)*Math.pow(2,pe),Ee+=qt):(Ne=P*Math.pow(2,qt-1)*Math.pow(2,pe),Ee=0));pe>=8;M[G+Kt]=255&Ne,Kt+=ur,Ne/=256,pe-=8);for(Ee=Ee<<pe|Ne,dt+=pe;dt>0;M[G+Kt]=255&Ee,Kt+=ur,Ee/=256,dt-=8);M[G+Kt-ur]|=128*wr},gc=Ea;function Ea(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Ea.Varint=0,Ea.Fixed64=1,Ea.Bytes=2,Ea.Fixed32=5;var nh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ws(M){return M.type===Ea.Bytes?M.readVarint()+M.pos:M.pos+1}function ih(M,P,G){var oe=P<=16383?1:P<=2097151?2:P<=268435455?3:Math.floor(Math.log(P)/(7*Math.LN2));G.realloc(oe);for(var pe=G.pos-1;pe>=M;pe--)G.buf[pe+oe]=G.buf[pe]}function Zf(M,P){for(var G=0;G<M.length;G++)P.writeVarint(M[G])}function Wf(M,P){for(var G=0;G<M.length;G++)P.writeSVarint(M[G])}function Xf(M,P){for(var G=0;G<M.length;G++)P.writeFloat(M[G])}function Jf(M,P){for(var G=0;G<M.length;G++)P.writeDouble(M[G])}function Kf(M,P){for(var G=0;G<M.length;G++)P.writeBoolean(M[G])}function Qf(M,P){for(var G=0;G<M.length;G++)P.writeFixed32(M[G])}function $f(M,P){for(var G=0;G<M.length;G++)P.writeSFixed32(M[G])}function ep(M,P){for(var G=0;G<M.length;G++)P.writeFixed64(M[G])}function tp(M,P){for(var G=0;G<M.length;G++)P.writeSFixed64(M[G])}function vc(M,P){return(M[P]|M[P+1]<<8|M[P+2]<<16)+16777216*M[P+3]}function kl(M,P,G){M[G]=P,M[G+1]=P>>>8,M[G+2]=P>>>16,M[G+3]=P>>>24}function ah(M,P){return(M[P]|M[P+1]<<8|M[P+2]<<16)+(M[P+3]<<24)}function rp(M,P,G){1===M&&G.readMessage(np,P)}function np(M,P,G){if(3===M){var oe=G.readMessage(ip,{}),Ee=oe.width,Ne=oe.height,tt=oe.left,dt=oe.top,wt=oe.advance;P.push({id:oe.id,bitmap:new hl({width:Ee+6,height:Ne+6},oe.bitmap),metrics:{width:Ee,height:Ne,left:tt,top:dt,advance:wt}})}}function ip(M,P,G){1===M?P.id=G.readVarint():2===M?P.bitmap=G.readBytes():3===M?P.width=G.readVarint():4===M?P.height=G.readVarint():5===M?P.left=G.readSVarint():6===M?P.top=G.readSVarint():7===M&&(P.advance=G.readVarint())}function oh(M){for(var P=0,G=0,oe=0,pe=M;oe<pe.length;oe+=1){var xe=pe[oe];P+=xe.w*xe.h,G=Math.max(G,xe.w)}M.sort(function(wr,Fr){return Fr.h-wr.h});for(var Ee=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(P/.95)),G),h:1/0}],Ne=0,tt=0,dt=0,wt=M;dt<wt.length;dt+=1)for(var qt=wt[dt],tr=Ee.length-1;tr>=0;tr--){var Kt=Ee[tr];if(!(qt.w>Kt.w||qt.h>Kt.h)){if(qt.x=Kt.x,qt.y=Kt.y,tt=Math.max(tt,qt.y+qt.h),Ne=Math.max(Ne,qt.x+qt.w),qt.w===Kt.w&&qt.h===Kt.h){var ur=Ee.pop();tr<Ee.length&&(Ee[tr]=ur)}else qt.h===Kt.h?(Kt.x+=qt.w,Kt.w-=qt.w):qt.w===Kt.w?(Kt.y+=qt.h,Kt.h-=qt.h):(Ee.push({x:Kt.x+qt.w,y:Kt.y,w:Kt.w-qt.w,h:qt.h}),Kt.y+=qt.h,Kt.h-=qt.h);break}}return{w:Ne,h:tt,fill:P/(Ne*tt)||0}}Ea.prototype={destroy:function(){this.buf=null},readFields:function(M,P,G){for(G=G||this.length;this.pos<G;){var oe=this.readVarint(),pe=oe>>3,xe=this.pos;this.type=7&oe,M(pe,P,this),this.pos===xe&&this.skip(oe)}return P},readMessage:function(M,P){return this.readFields(M,P,this.readVarint()+this.pos)},readFixed32:function(){var M=vc(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=ah(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=vc(this.buf,this.pos)+4294967296*vc(this.buf,this.pos+4);return this.pos+=8,M},readSFixed64:function(){var M=vc(this.buf,this.pos)+4294967296*ah(this.buf,this.pos+4);return this.pos+=8,M},readFloat:function(){var M=th(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=th(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var P,G,oe=this.buf;return P=127&(G=oe[this.pos++]),G<128?P:(P|=(127&(G=oe[this.pos++]))<<7,G<128?P:(P|=(127&(G=oe[this.pos++]))<<14,G<128?P:(P|=(127&(G=oe[this.pos++]))<<21,G<128?P:function(pe,xe,Ee){var Ne,tt,dt=Ee.buf;if(Ne=(112&(tt=dt[Ee.pos++]))>>4,tt<128||(Ne|=(127&(tt=dt[Ee.pos++]))<<3,tt<128)||(Ne|=(127&(tt=dt[Ee.pos++]))<<10,tt<128)||(Ne|=(127&(tt=dt[Ee.pos++]))<<17,tt<128)||(Ne|=(127&(tt=dt[Ee.pos++]))<<24,tt<128)||(Ne|=(1&(tt=dt[Ee.pos++]))<<31,tt<128))return function(M,P,G){return G?4294967296*P+(M>>>0):4294967296*(P>>>0)+(M>>>0)}(pe,Ne,xe);throw new Error("Expected varint not more than 10 bytes")}(P|=(15&(G=oe[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,P=this.pos;return this.pos=M,M-P>=12&&nh?nh.decode(this.buf.subarray(P,M)):function(G,oe,pe){for(var xe="",Ee=oe;Ee<pe;){var Ne,tt,dt,wt=G[Ee],qt=null,tr=wt>239?4:wt>223?3:wt>191?2:1;if(Ee+tr>pe)break;1===tr?wt<128&&(qt=wt):2===tr?128==(192&(Ne=G[Ee+1]))&&(qt=(31&wt)<<6|63&Ne)<=127&&(qt=null):3===tr?(tt=G[Ee+2],128==(192&(Ne=G[Ee+1]))&&128==(192&tt)&&((qt=(15&wt)<<12|(63&Ne)<<6|63&tt)<=2047||qt>=55296&&qt<=57343)&&(qt=null)):4===tr&&(tt=G[Ee+2],dt=G[Ee+3],128==(192&(Ne=G[Ee+1]))&&128==(192&tt)&&128==(192&dt)&&((qt=(15&wt)<<18|(63&Ne)<<12|(63&tt)<<6|63&dt)<=65535||qt>=1114112)&&(qt=null)),null===qt?(qt=65533,tr=1):qt>65535&&(qt-=65536,xe+=String.fromCharCode(qt>>>10&1023|55296),qt=56320|1023&qt),xe+=String.fromCharCode(qt),Ee+=tr}return xe}(this.buf,P,M)},readBytes:function(){var M=this.readVarint()+this.pos,P=this.buf.subarray(this.pos,M);return this.pos=M,P},readPackedVarint:function(M,P){if(this.type!==Ea.Bytes)return M.push(this.readVarint(P));var G=Ws(this);for(M=M||[];this.pos<G;)M.push(this.readVarint(P));return M},readPackedSVarint:function(M){if(this.type!==Ea.Bytes)return M.push(this.readSVarint());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Ea.Bytes)return M.push(this.readBoolean());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Ea.Bytes)return M.push(this.readFloat());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Ea.Bytes)return M.push(this.readDouble());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Ea.Bytes)return M.push(this.readFixed32());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Ea.Bytes)return M.push(this.readSFixed32());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Ea.Bytes)return M.push(this.readFixed64());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Ea.Bytes)return M.push(this.readSFixed64());var P=Ws(this);for(M=M||[];this.pos<P;)M.push(this.readSFixed64());return M},skip:function(M){var P=7&M;if(P===Ea.Varint)for(;this.buf[this.pos++]>127;);else if(P===Ea.Bytes)this.pos=this.readVarint()+this.pos;else if(P===Ea.Fixed32)this.pos+=4;else{if(P!==Ea.Fixed64)throw new Error("Unimplemented type: "+P);this.pos+=8}},writeTag:function(M,P){this.writeVarint(M<<3|P)},realloc:function(M){for(var P=this.length||16;P<this.pos+M;)P*=2;if(P!==this.length){var G=new Uint8Array(P);G.set(this.buf),this.buf=G,this.length=P}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),kl(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),kl(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),kl(this.buf,-1&M,this.pos),kl(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),kl(this.buf,-1&M,this.pos),kl(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(P,G){var oe,pe,xe,Ne;if(P>=0?(oe=P%4294967296|0,pe=P/4294967296|0):(pe=~(-P/4294967296),4294967295^(oe=~(-P%4294967296))?oe=oe+1|0:(oe=0,pe=pe+1|0)),P>=0x10000000000000000||P<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");G.realloc(10),xe=oe,(Ne=G).buf[Ne.pos++]=127&xe|128,xe>>>=7,Ne.buf[Ne.pos++]=127&xe|128,xe>>>=7,Ne.buf[Ne.pos++]=127&xe|128,xe>>>=7,Ne.buf[Ne.pos++]=127&xe|128,Ne.buf[Ne.pos]=127&(xe>>>=7),function(xe,Ee){var Ne=(7&xe)<<4;Ee.buf[Ee.pos++]|=Ne|((xe>>>=3)?128:0),xe&&(Ee.buf[Ee.pos++]=127&xe|((xe>>>=7)?128:0),xe&&(Ee.buf[Ee.pos++]=127&xe|((xe>>>=7)?128:0),xe&&(Ee.buf[Ee.pos++]=127&xe|((xe>>>=7)?128:0),xe&&(Ee.buf[Ee.pos++]=127&xe|((xe>>>=7)?128:0),xe&&(Ee.buf[Ee.pos++]=127&xe)))))}(pe,G)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var P=this.pos;this.pos=function(oe,pe,xe){for(var Ee,Ne,tt=0;tt<pe.length;tt++){if((Ee=pe.charCodeAt(tt))>55295&&Ee<57344){if(!Ne){Ee>56319||tt+1===pe.length?(oe[xe++]=239,oe[xe++]=191,oe[xe++]=189):Ne=Ee;continue}if(Ee<56320){oe[xe++]=239,oe[xe++]=191,oe[xe++]=189,Ne=Ee;continue}Ee=Ne-55296<<10|Ee-56320|65536,Ne=null}else Ne&&(oe[xe++]=239,oe[xe++]=191,oe[xe++]=189,Ne=null);Ee<128?oe[xe++]=Ee:(Ee<2048?oe[xe++]=Ee>>6|192:(Ee<65536?oe[xe++]=Ee>>12|224:(oe[xe++]=Ee>>18|240,oe[xe++]=Ee>>12&63|128),oe[xe++]=Ee>>6&63|128),oe[xe++]=63&Ee|128)}return xe}(this.buf,M,this.pos);var G=this.pos-P;G>=128&&ih(P,G,this),this.pos=P-1,this.writeVarint(G),this.pos+=G},writeFloat:function(M){this.realloc(4),rh(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),rh(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var P=M.length;this.writeVarint(P),this.realloc(P);for(var G=0;G<P;G++)this.buf[this.pos++]=M[G]},writeRawMessage:function(M,P){this.pos++;var G=this.pos;M(P,this);var oe=this.pos-G;oe>=128&&ih(G,oe,this),this.pos=G-1,this.writeVarint(oe),this.pos+=oe},writeMessage:function(M,P,G){this.writeTag(M,Ea.Bytes),this.writeRawMessage(P,G)},writePackedVarint:function(M,P){P.length&&this.writeMessage(M,Zf,P)},writePackedSVarint:function(M,P){P.length&&this.writeMessage(M,Wf,P)},writePackedBoolean:function(M,P){P.length&&this.writeMessage(M,Kf,P)},writePackedFloat:function(M,P){P.length&&this.writeMessage(M,Xf,P)},writePackedDouble:function(M,P){P.length&&this.writeMessage(M,Jf,P)},writePackedFixed32:function(M,P){P.length&&this.writeMessage(M,Qf,P)},writePackedSFixed32:function(M,P){P.length&&this.writeMessage(M,$f,P)},writePackedFixed64:function(M,P){P.length&&this.writeMessage(M,ep,P)},writePackedSFixed64:function(M,P){P.length&&this.writeMessage(M,tp,P)},writeBytesField:function(M,P){this.writeTag(M,Ea.Bytes),this.writeBytes(P)},writeFixed32Field:function(M,P){this.writeTag(M,Ea.Fixed32),this.writeFixed32(P)},writeSFixed32Field:function(M,P){this.writeTag(M,Ea.Fixed32),this.writeSFixed32(P)},writeFixed64Field:function(M,P){this.writeTag(M,Ea.Fixed64),this.writeFixed64(P)},writeSFixed64Field:function(M,P){this.writeTag(M,Ea.Fixed64),this.writeSFixed64(P)},writeVarintField:function(M,P){this.writeTag(M,Ea.Varint),this.writeVarint(P)},writeSVarintField:function(M,P){this.writeTag(M,Ea.Varint),this.writeSVarint(P)},writeStringField:function(M,P){this.writeTag(M,Ea.Bytes),this.writeString(P)},writeFloatField:function(M,P){this.writeTag(M,Ea.Fixed32),this.writeFloat(P)},writeDoubleField:function(M,P){this.writeTag(M,Ea.Fixed64),this.writeDouble(P)},writeBooleanField:function(M,P){this.writeVarintField(M,Boolean(P))}};var yc=function(M,P){var G=P.pixelRatio,oe=P.version,pe=P.stretchX,xe=P.stretchY,Ee=P.content;this.paddedRect=M,this.pixelRatio=G,this.stretchX=pe,this.stretchY=xe,this.content=Ee,this.version=oe},Ql={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ql.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ql.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ql.tlbr.get=function(){return this.tl.concat(this.br)},Ql.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yc.prototype,Ql);var $l=function(M,P){var G={},oe={};this.haveRenderCallbacks=[];var pe=[];this.addImages(M,G,pe),this.addImages(P,oe,pe);var xe=oh(pe),tt=new us({width:xe.w||1,height:xe.h||1});for(var dt in M){var wt=M[dt],qt=G[dt].paddedRect;us.copy(wt.data,tt,{x:0,y:0},{x:qt.x+1,y:qt.y+1},wt.data)}for(var tr in P){var Kt=P[tr],ur=oe[tr].paddedRect,wr=ur.x+1,Fr=ur.y+1,Rr=Kt.data.width,Yr=Kt.data.height;us.copy(Kt.data,tt,{x:0,y:0},{x:wr,y:Fr},Kt.data),us.copy(Kt.data,tt,{x:0,y:Yr-1},{x:wr,y:Fr-1},{width:Rr,height:1}),us.copy(Kt.data,tt,{x:0,y:0},{x:wr,y:Fr+Yr},{width:Rr,height:1}),us.copy(Kt.data,tt,{x:Rr-1,y:0},{x:wr-1,y:Fr},{width:1,height:Yr}),us.copy(Kt.data,tt,{x:0,y:0},{x:wr+Rr,y:Fr},{width:1,height:Yr})}this.image=tt,this.iconPositions=G,this.patternPositions=oe};$l.prototype.addImages=function(M,P,G){for(var oe in M){var pe=M[oe],xe={x:0,y:0,w:pe.data.width+2,h:pe.data.height+2};G.push(xe),P[oe]=new yc(xe,pe),pe.hasRenderCallback&&this.haveRenderCallbacks.push(oe)}},$l.prototype.patchUpdatedImages=function(M,P){for(var G in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[G],M.getImage(G),P),this.patchUpdatedImage(this.patternPositions[G],M.getImage(G),P)},$l.prototype.patchUpdatedImage=function(M,P,G){if(M&&P&&M.version!==P.version){M.version=P.version;var oe=M.tl;G.update(P.data,void 0,{x:oe[0],y:oe[1]})}},nn("ImagePosition",yc),nn("ImageAtlas",$l);var Ts={horizontal:1,vertical:2,horizontalOnly:3},Tl=function(){this.scale=1,this.fontStack="",this.imageName=null};Tl.forText=function(M,P){var G=new Tl;return G.scale=M||1,G.fontStack=P,G},Tl.forImage=function(M){var P=new Tl;return P.imageName=M,P};var Jo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xc(M,P,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr){var Fr,Rr=Jo.fromFeature(M,pe);qt===Ts.vertical&&Rr.verticalizePunctuation();var Yr=fo.processBidirectionalText,Gr=fo.processStyledBidirectionalText;if(Yr&&1===Rr.sections.length){Fr=[];for(var en=0,bn=Yr(Rr.toString(),uu(Rr,dt,xe,P,oe,Kt,ur));en<bn.length;en+=1){var Sn=bn[en],Wn=new Jo;Wn.text=Sn,Wn.sections=Rr.sections;for(var Gn=0;Gn<Sn.length;Gn++)Wn.sectionIndex.push(0);Fr.push(Wn)}}else if(Gr){Fr=[];for(var ei=0,fi=Gr(Rr.text,Rr.sectionIndex,uu(Rr,dt,xe,P,oe,Kt,ur));ei<fi.length;ei+=1){var pi=fi[ei],ni=new Jo;ni.text=pi[0],ni.sectionIndex=pi[1],ni.sections=Rr.sections,Fr.push(ni)}}else Fr=function(di,ia){for(var ea=[],ha=di.text,Ei=0,ta=0,La=ia;ta<La.length;ta+=1){var ka=La[ta];ea.push(di.substring(Ei,ka)),Ei=ka}return Ei<ha.length&&ea.push(di.substring(Ei,ha.length)),ea}(Rr,uu(Rr,dt,xe,P,oe,Kt,ur));var bi=[],vi={positionedLines:bi,text:Rr.toString(),top:wt[1],bottom:wt[1],left:wt[0],right:wt[0],writingMode:qt,iconsInText:!1,verticalizable:!1};return function(di,ia,ea,ha,Ei,ta,La,ka,Ba,Ta,ko,Na){for(var Go=0,zo=-17,jo=0,as=0,Ko="right"===ka?1:"left"===ka?0:.5,To=0,Vo=0,po=Ei;Vo<po.length;Vo+=1){var So=po[Vo];So.trim();var qi=So.getMaxScale(),sa=24*(qi-1),Qa={positionedGlyphs:[],lineOffset:0};di.positionedLines[To]=Qa;var $a=Qa.positionedGlyphs,Wa=0;if(So.length()){for(var ja=0;ja<So.length();ja++){var fa=So.getSection(ja),eo=So.getSectionIndex(ja),os=So.getCharCode(ja),_s=0,Qo=null,zs=null,Ks=null,Fo=24,Fs=!(Ba===Ts.horizontal||!ko&&!xi(os)||ko&&(_c[os]||(il=os,Rn.Arabic(il)||Rn["Arabic Supplement"](il)||Rn["Arabic Extended-A"](il)||Rn["Arabic Presentation Forms-A"](il)||Rn["Arabic Presentation Forms-B"](il))));if(fa.imageName){var Bs=ha[fa.imageName];if(!Bs)continue;Ks=fa.imageName,di.iconsInText=di.iconsInText||!0,zs=Bs.paddedRect;var Ns=Bs.displaySize;fa.scale=24*fa.scale/Na,_s=sa+(24-Ns[1]*fa.scale),Fo=(Qo={width:Ns[0],height:Ns[1],left:1,top:-3,advance:Fs?Ns[1]:Ns[0]}).advance;var Il=Fs?Ns[0]*fa.scale-24*qi:Ns[1]*fa.scale-24*qi;Il>0&&Il>Wa&&(Wa=Il)}else{var Ec=ea[fa.fontStack],ml=Ec&&Ec[os];if(ml&&ml.rect)zs=ml.rect,Qo=ml.metrics;else{var Lc=ia[fa.fontStack],Dc=Lc&&Lc[os];if(!Dc)continue;Qo=Dc.metrics}_s=24*(qi-fa.scale)}Fs?(di.verticalizable=!0,$a.push({glyph:os,imageName:Ks,x:Go,y:zo+_s,vertical:Fs,scale:fa.scale,fontStack:fa.fontStack,sectionIndex:eo,metrics:Qo,rect:zs}),Go+=Fo*fa.scale+Ta):($a.push({glyph:os,imageName:Ks,x:Go,y:zo+_s,vertical:Fs,scale:fa.scale,fontStack:fa.fontStack,sectionIndex:eo,metrics:Qo,rect:zs}),Go+=Qo.advance*fa.scale+Ta)}0!==$a.length&&(jo=Math.max(Go-Ta,jo),op($a,0,$a.length-1,Ko,Wa)),Go=0;var Pc=ta*qi+Wa;Qa.lineOffset=Math.max(Wa,sa),zo+=Pc,as=Math.max(Pc,as),++To}else zo+=ta,++To}var il,Pl=zo- -17,Oc=hu(La),Ol=Oc.horizontalAlign,al=Oc.verticalAlign;(function(rc,Rc,zc,Fc,nc,Bc,ic,Nc,ac){var Rl,jc=(Rc-zc)*nc;Rl=Bc!==ic?-Nc*Fc- -17:(-Fc*ac+.5)*ic;for(var zl=0,Fl=rc;zl<Fl.length;zl+=1)for(var Bl=0,oc=Fl[zl].positionedGlyphs;Bl<oc.length;Bl+=1){var Nl=oc[Bl];Nl.x+=jc,Nl.y+=Rl}})(di.positionedLines,Ko,Ol,al,jo,as,ta,Pl,Ei.length),di.top+=-al*Pl,di.bottom=di.top+Pl,di.left+=-Ol*jo,di.right=di.left+jo}(vi,P,G,oe,Fr,Ee,Ne,tt,qt,dt,tr,wr),!function(di){for(var ia=0,ea=di;ia<ea.length;ia+=1)if(0!==ea[ia].positionedGlyphs.length)return!1;return!0}(bi)&&vi}Jo.fromFeature=function(M,P){for(var G=new Jo,oe=0;oe<M.sections.length;oe++){var pe=M.sections[oe];pe.image?G.addImageSection(pe):G.addTextSection(pe,P)}return G},Jo.prototype.length=function(){return this.text.length},Jo.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},Jo.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},Jo.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},Jo.prototype.verticalizePunctuation=function(){this.text=function(M){for(var P="",G=0;G<M.length;G++){var oe=M.charCodeAt(G+1)||null,pe=M.charCodeAt(G-1)||null;oe&&Vi(oe)&&!Kl[M[G+1]]||pe&&Vi(pe)&&!Kl[M[G-1]]||!Kl[M[G]]?P+=M[G]:P+=Kl[M[G]]}return P}(this.text)},Jo.prototype.trim=function(){for(var M=0,P=0;P<this.text.length&&_c[this.text.charCodeAt(P)];P++)M++;for(var G=this.text.length,oe=this.text.length-1;oe>=0&&oe>=M&&_c[this.text.charCodeAt(oe)];oe--)G--;this.text=this.text.substring(M,G),this.sectionIndex=this.sectionIndex.slice(M,G)},Jo.prototype.substring=function(M,P){var G=new Jo;return G.text=this.text.substring(M,P),G.sectionIndex=this.sectionIndex.slice(M,P),G.sections=this.sections,G},Jo.prototype.toString=function(){return this.text},Jo.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(P,G){return Math.max(P,M.sections[G].scale)},0)},Jo.prototype.addTextSection=function(M,P){this.text+=M.text,this.sections.push(Tl.forText(M.scale,M.fontStack||P));for(var G=this.sections.length-1,oe=0;oe<M.text.length;++oe)this.sectionIndex.push(G)},Jo.prototype.addImageSection=function(M){var P=M.image?M.image.name:"";if(0!==P.length){var G=this.getNextImageSectionCharCode();G?(this.text+=String.fromCharCode(G),this.sections.push(Tl.forImage(P)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}else A("Can't add FormattedSection with an empty image.")},Jo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var _c={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xs={};function sh(M,P,G,oe,pe,xe){if(P.imageName){var Ee=oe[P.imageName];return Ee?Ee.displaySize[0]*P.scale*24/xe+pe:0}var Ne=G[P.fontStack],tt=Ne&&Ne[M];return tt?tt.metrics.advance*P.scale+pe:0}function lh(M,P,G,oe){var pe=Math.pow(M-P,2);return oe?M<P?pe/2:2*pe:pe+Math.abs(G)*G}function ap(M,P,G){var oe=0;return 10===M&&(oe-=1e4),G&&(oe+=150),40!==M&&65288!==M||(oe+=50),41!==P&&65289!==P||(oe+=50),oe}function ch(M,P,G,oe,pe,xe){for(var Ee=null,Ne=lh(P,G,pe,xe),tt=0,dt=oe;tt<dt.length;tt+=1){var wt=dt[tt],qt=lh(P-wt.x,G,pe,xe)+wt.badness;qt<=Ne&&(Ee=wt,Ne=qt)}return{index:M,x:P,priorBreak:Ee,badness:Ne}}function uu(M,P,G,oe,pe,xe,Ee){if("point"!==xe)return[];if(!M)return[];for(var Ne,tt=[],dt=function(Fr,Rr,Yr,Gr,en,bn){for(var Sn=0,Wn=0;Wn<Fr.length();Wn++){var Gn=Fr.getSection(Wn);Sn+=sh(Fr.getCharCode(Wn),Gn,Gr,en,Rr,bn)}return Sn/Math.max(1,Math.ceil(Sn/Yr))}(M,P,G,oe,pe,Ee),wt=M.text.indexOf("\u200b")>=0,qt=0,tr=0;tr<M.length();tr++){var Kt=M.getSection(tr),ur=M.getCharCode(tr);if(_c[ur]||(qt+=sh(ur,Kt,oe,pe,P,Ee)),tr<M.length()-1){var wr=!((Ne=ur)<11904||!(Rn["Bopomofo Extended"](Ne)||Rn.Bopomofo(Ne)||Rn["CJK Compatibility Forms"](Ne)||Rn["CJK Compatibility Ideographs"](Ne)||Rn["CJK Compatibility"](Ne)||Rn["CJK Radicals Supplement"](Ne)||Rn["CJK Strokes"](Ne)||Rn["CJK Symbols and Punctuation"](Ne)||Rn["CJK Unified Ideographs Extension A"](Ne)||Rn["CJK Unified Ideographs"](Ne)||Rn["Enclosed CJK Letters and Months"](Ne)||Rn["Halfwidth and Fullwidth Forms"](Ne)||Rn.Hiragana(Ne)||Rn["Ideographic Description Characters"](Ne)||Rn["Kangxi Radicals"](Ne)||Rn["Katakana Phonetic Extensions"](Ne)||Rn.Katakana(Ne)||Rn["Vertical Forms"](Ne)||Rn["Yi Radicals"](Ne)||Rn["Yi Syllables"](Ne)));(xs[ur]||wr||Kt.imageName)&&tt.push(ch(tr+1,qt,dt,tt,ap(ur,M.getCharCode(tr+1),wr&&wt),!1))}}return function Fr(Rr){return Rr?Fr(Rr.priorBreak).concat(Rr.index):[]}(ch(M.length(),qt,dt,tt,0,!0))}function hu(M){var P=.5,G=.5;switch(M){case"right":case"top-right":case"bottom-right":P=1;break;case"left":case"top-left":case"bottom-left":P=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":G=1;break;case"top":case"top-right":case"top-left":G=0}return{horizontalAlign:P,verticalAlign:G}}function op(M,P,G,oe,pe){if(oe||pe)for(var xe=M[G],Ne=(M[G].x+xe.metrics.advance*xe.scale)*oe,tt=P;tt<=G;tt++)M[tt].x-=Ne,M[tt].y+=pe}function uh(M,P,G,oe,pe,xe){var Ee,Ne=M.image;if(Ne.content){var tt=Ne.content,dt=Ne.pixelRatio||1;Ee=[tt[0]/dt,tt[1]/dt,Ne.displaySize[0]-tt[2]/dt,Ne.displaySize[1]-tt[3]/dt]}var wt,qt,tr,Kt,ur=P.left*xe,wr=P.right*xe;"width"===G||"both"===G?(Kt=pe[0]+ur-oe[3],qt=pe[0]+wr+oe[1]):qt=(Kt=pe[0]+(ur+wr-Ne.displaySize[0])/2)+Ne.displaySize[0];var Fr=P.top*xe,Rr=P.bottom*xe;return"height"===G||"both"===G?(wt=pe[1]+Fr-oe[0],tr=pe[1]+Rr+oe[2]):tr=(wt=pe[1]+(Fr+Rr-Ne.displaySize[1])/2)+Ne.displaySize[1],{image:Ne,top:wt,right:qt,bottom:tr,left:Kt,collisionPadding:Ee}}xs[10]=!0,xs[32]=!0,xs[38]=!0,xs[40]=!0,xs[41]=!0,xs[43]=!0,xs[45]=!0,xs[47]=!0,xs[173]=!0,xs[183]=!0,xs[8203]=!0,xs[8208]=!0,xs[8211]=!0,xs[8231]=!0;var Ml=function(M){function P(G,oe,pe,xe){M.call(this,G,oe),this.angle=pe,void 0!==xe&&(this.segment=xe)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.clone=function(){return new P(this.x,this.y,this.angle,this.segment)},P}(n);function fu(M,P){var G=P.expression;if("constant"===G.kind)return{kind:"constant",layoutSize:G.evaluate(new aa(M+1))};if("source"===G.kind)return{kind:"source"};for(var oe=G.zoomStops,pe=G.interpolationType,xe=0;xe<oe.length&&oe[xe]<=M;)xe++;for(var Ee=xe=Math.max(0,xe-1);Ee<oe.length&&oe[Ee]<M+1;)Ee++;Ee=Math.min(oe.length-1,Ee);var Ne=oe[xe],tt=oe[Ee];return"composite"===G.kind?{kind:"composite",minZoom:Ne,maxZoom:tt,interpolationType:pe}:{kind:"camera",minZoom:Ne,maxZoom:tt,minSize:G.evaluate(new aa(Ne)),maxSize:G.evaluate(new aa(tt)),interpolationType:pe}}function hh(M,P,G){var oe=P.uSize,xe=G.lowerSize;return"source"===M.kind?xe/128:"composite"===M.kind?Qn(xe/128,G.upperSize/128,P.uSizeT):oe}function fh(M,P){var G=0,oe=0;if("constant"===M.kind)oe=M.layoutSize;else if("source"!==M.kind){var pe=M.interpolationType,Ne=pe?c(Ji.interpolationFactor(pe,P,M.minZoom,M.maxZoom),0,1):0;"camera"===M.kind?oe=Qn(M.minSize,M.maxSize,Ne):G=Ne}return{uSizeT:G,uSize:oe}}nn("Anchor",Ml);var sp=Object.freeze({__proto__:null,getSizeData:fu,evaluateSizeForFeature:hh,evaluateSizeForZoom:fh,SIZE_PACK_FACTOR:128});function ph(M,P,G,oe,pe){if(void 0===P.segment)return!0;for(var xe=P,Ee=P.segment+1,Ne=0;Ne>-G/2;){if(--Ee<0)return!1;Ne-=M[Ee].dist(xe),xe=M[Ee]}Ne+=M[Ee].dist(M[Ee+1]),Ee++;for(var tt=[],dt=0;Ne<G/2;){var qt=M[Ee],tr=M[Ee+1];if(!tr)return!1;var Kt=M[Ee-1].angleTo(qt)-qt.angleTo(tr);for(Kt=Math.abs((Kt+3*Math.PI)%(2*Math.PI)-Math.PI),tt.push({distance:Ne,angleDelta:Kt}),dt+=Kt;Ne-tt[0].distance>oe;)dt-=tt.shift().angleDelta;if(dt>pe)return!1;Ee++,Ne+=qt.dist(tr)}return!0}function dh(M){for(var P=0,G=0;G<M.length-1;G++)P+=M[G].dist(M[G+1]);return P}function mh(M,P,G){return M?.6*P*G:0}function gh(M,P){return Math.max(M?M.right-M.left:0,P?P.right-P.left:0)}function lp(M,P,G,oe,pe,xe){for(var Ee=mh(G,pe,xe),Ne=gh(G,oe)*xe,tt=0,dt=dh(M)/2,wt=0;wt<M.length-1;wt++){var qt=M[wt],tr=M[wt+1],Kt=qt.dist(tr);if(tt+Kt>dt){var ur=(dt-tt)/Kt,wr=Qn(qt.x,tr.x,ur),Fr=Qn(qt.y,tr.y,ur),Rr=new Ml(wr,Fr,tr.angleTo(qt),wt);return Rr._round(),!Ee||ph(M,Rr,Ne,Ee,P)?Rr:void 0}tt+=Kt}}function cp(M,P,G,oe,pe,xe,Ee,Ne,tt){var dt=mh(oe,xe,Ee),wt=gh(oe,pe),qt=wt*Ee,tr=0===M[0].x||M[0].x===tt||0===M[0].y||M[0].y===tt;return P-qt<P/4&&(P=qt+P/4),function Kt(ur,wr,Fr,Rr,Yr,Gr,en,bn,Sn){for(var Wn=Gr/2,Gn=dh(ur),ei=0,fi=wr-Fr,pi=[],ni=0;ni<ur.length-1;ni++){for(var bi=ur[ni],vi=ur[ni+1],di=bi.dist(vi),ia=vi.angleTo(bi);fi+Fr<ei+di;){var ea=((fi+=Fr)-ei)/di,ha=Qn(bi.x,vi.x,ea),Ei=Qn(bi.y,vi.y,ea);if(ha>=0&&ha<Sn&&Ei>=0&&Ei<Sn&&fi-Wn>=0&&fi+Wn<=Gn){var ta=new Ml(ha,Ei,ia,ni);ta._round(),Rr&&!ph(ur,ta,Gr,Rr,Yr)||pi.push(ta)}}ei+=di}return bn||pi.length||en||(pi=Kt(ur,ei/2,Fr,Rr,Yr,Gr,en,!0,Sn)),pi}(M,tr?P/2*Ne%P:(wt/2+2*xe)*Ee*Ne%P,P,dt,G,qt,tr,!1,tt)}function vh(M,P,G,oe,pe){for(var xe=[],Ee=0;Ee<M.length;Ee++)for(var Ne=M[Ee],tt=void 0,dt=0;dt<Ne.length-1;dt++){var wt=Ne[dt],qt=Ne[dt+1];wt.x<P&&qt.x<P||(wt.x<P?wt=new n(P,wt.y+(P-wt.x)/(qt.x-wt.x)*(qt.y-wt.y))._round():qt.x<P&&(qt=new n(P,wt.y+(P-wt.x)/(qt.x-wt.x)*(qt.y-wt.y))._round()),wt.y<G&&qt.y<G||(wt.y<G?wt=new n(wt.x+(G-wt.y)/(qt.y-wt.y)*(qt.x-wt.x),G)._round():qt.y<G&&(qt=new n(wt.x+(G-wt.y)/(qt.y-wt.y)*(qt.x-wt.x),G)._round()),wt.x>=oe&&qt.x>=oe||(wt.x>=oe?wt=new n(oe,wt.y+(oe-wt.x)/(qt.x-wt.x)*(qt.y-wt.y))._round():qt.x>=oe&&(qt=new n(oe,wt.y+(oe-wt.x)/(qt.x-wt.x)*(qt.y-wt.y))._round()),wt.y>=pe&&qt.y>=pe||(wt.y>=pe?wt=new n(wt.x+(pe-wt.y)/(qt.y-wt.y)*(qt.x-wt.x),pe)._round():qt.y>=pe&&(qt=new n(wt.x+(pe-wt.y)/(qt.y-wt.y)*(qt.x-wt.x),pe)._round()),tt&&wt.equals(tt[tt.length-1])||xe.push(tt=[wt]),tt.push(qt)))))}return xe}function yh(M,P,G,oe){var pe=[],xe=M.image,Ee=xe.pixelRatio,Ne=xe.paddedRect.w-2,tt=xe.paddedRect.h-2,dt=M.right-M.left,wt=M.bottom-M.top,qt=xe.stretchX||[[0,Ne]],tr=xe.stretchY||[[0,tt]],Kt=function(ta,La){return ta+La[1]-La[0]},ur=qt.reduce(Kt,0),wr=tr.reduce(Kt,0),Fr=Ne-ur,Rr=tt-wr,Yr=0,Gr=ur,en=0,bn=wr,Sn=0,Wn=Fr,Gn=0,ei=Rr;if(xe.content&&oe){var fi=xe.content;Yr=bc(qt,0,fi[0]),en=bc(tr,0,fi[1]),Gr=bc(qt,fi[0],fi[2]),bn=bc(tr,fi[1],fi[3]),Sn=fi[0]-Yr,Gn=fi[1]-en,Wn=fi[2]-fi[0]-Gr,ei=fi[3]-fi[1]-bn}var pi=function(ta,La,ka,Ba){var Ta=wc(ta.stretch-Yr,Gr,dt,M.left),ko=kc(ta.fixed-Sn,Wn,ta.stretch,ur),Na=wc(La.stretch-en,bn,wt,M.top),Go=kc(La.fixed-Gn,ei,La.stretch,wr),zo=wc(ka.stretch-Yr,Gr,dt,M.left),jo=kc(ka.fixed-Sn,Wn,ka.stretch,ur),as=wc(Ba.stretch-en,bn,wt,M.top),Ko=kc(Ba.fixed-Gn,ei,Ba.stretch,wr),To=new n(Ta,Na),Vo=new n(zo,Na),po=new n(zo,as),So=new n(Ta,as),qi=new n(ko/Ee,Go/Ee),sa=new n(jo/Ee,Ko/Ee),Qa=P*Math.PI/180;if(Qa){var $a=Math.sin(Qa),Wa=Math.cos(Qa),ja=[Wa,-$a,$a,Wa];To._matMult(ja),Vo._matMult(ja),So._matMult(ja),po._matMult(ja)}var fa=ta.stretch+ta.fixed,os=La.stretch+La.fixed;return{tl:To,tr:Vo,bl:So,br:po,tex:{x:xe.paddedRect.x+1+fa,y:xe.paddedRect.y+1+os,w:ka.stretch+ka.fixed-fa,h:Ba.stretch+Ba.fixed-os},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qi,pixelOffsetBR:sa,minFontScaleX:Wn/Ee/dt,minFontScaleY:ei/Ee/wt,isSDF:G}};if(oe&&(xe.stretchX||xe.stretchY))for(var ni=xh(qt,Fr,ur),bi=xh(tr,Rr,wr),vi=0;vi<ni.length-1;vi++)for(var di=ni[vi],ia=ni[vi+1],ea=0;ea<bi.length-1;ea++)pe.push(pi(di,bi[ea],ia,bi[ea+1]));else pe.push(pi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:tt+1}));return pe}function bc(M,P,G){for(var oe=0,pe=0,xe=M;pe<xe.length;pe+=1){var Ee=xe[pe];oe+=Math.max(P,Math.min(G,Ee[1]))-Math.max(P,Math.min(G,Ee[0]))}return oe}function xh(M,P,G){for(var oe=[{fixed:-1,stretch:0}],pe=0,xe=M;pe<xe.length;pe+=1){var Ee=xe[pe],Ne=Ee[0],tt=Ee[1],dt=oe[oe.length-1];oe.push({fixed:Ne-dt.stretch,stretch:dt.stretch}),oe.push({fixed:Ne-dt.stretch,stretch:dt.stretch+(tt-Ne)})}return oe.push({fixed:P+1,stretch:G}),oe}function wc(M,P,G,oe){return M/P*G+oe}function kc(M,P,G,oe){return M-P*G/oe}var Tc=function(M,P,G,oe,pe,xe,Ee,Ne,tt,dt){if(this.boxStartIndex=M.length,tt){var wt=xe.top,qt=xe.bottom,tr=xe.collisionPadding;tr&&(wt-=tr[1],qt+=tr[3]);var Kt=qt-wt;Kt>0&&(Kt=Math.max(10,Kt),this.circleDiameter=Kt)}else{var ur=xe.top*Ee-Ne,wr=xe.bottom*Ee+Ne,Fr=xe.left*Ee-Ne,Rr=xe.right*Ee+Ne,Yr=xe.collisionPadding;if(Yr&&(Fr-=Yr[0]*Ee,ur-=Yr[1]*Ee,Rr+=Yr[2]*Ee,wr+=Yr[3]*Ee),dt){var Gr=new n(Fr,ur),en=new n(Rr,ur),bn=new n(Fr,wr),Sn=new n(Rr,wr),Wn=dt*Math.PI/180;Gr._rotate(Wn),en._rotate(Wn),bn._rotate(Wn),Sn._rotate(Wn),Fr=Math.min(Gr.x,en.x,bn.x,Sn.x),Rr=Math.max(Gr.x,en.x,bn.x,Sn.x),ur=Math.min(Gr.y,en.y,bn.y,Sn.y),wr=Math.max(Gr.y,en.y,bn.y,Sn.y)}M.emplaceBack(P.x,P.y,Fr,ur,Rr,wr,G,oe,pe)}this.boxEndIndex=M.length},Al=function(M,P){if(void 0===M&&(M=[]),void 0===P&&(P=up),this.data=M,this.length=this.data.length,this.compare=P,this.length>0)for(var G=(this.length>>1)-1;G>=0;G--)this._down(G)};function up(M,P){return M<P?-1:M>P?1:0}function hp(M,P,G){void 0===P&&(P=1),void 0===G&&(G=!1);for(var oe=1/0,pe=1/0,xe=-1/0,Ee=-1/0,Ne=M[0],tt=0;tt<Ne.length;tt++){var dt=Ne[tt];(!tt||dt.x<oe)&&(oe=dt.x),(!tt||dt.y<pe)&&(pe=dt.y),(!tt||dt.x>xe)&&(xe=dt.x),(!tt||dt.y>Ee)&&(Ee=dt.y)}var tr=Math.min(xe-oe,Ee-pe),Kt=tr/2,ur=new Al([],fp);if(0===tr)return new n(oe,pe);for(var wr=oe;wr<xe;wr+=tr)for(var Fr=pe;Fr<Ee;Fr+=tr)ur.push(new Sl(wr+Kt,Fr+Kt,Kt,M));for(var Rr=function(en){for(var bn=0,Sn=0,Wn=0,Gn=en[0],ei=0,fi=Gn.length,pi=fi-1;ei<fi;pi=ei++){var ni=Gn[ei],bi=Gn[pi],vi=ni.x*bi.y-bi.x*ni.y;Sn+=(ni.x+bi.x)*vi,Wn+=(ni.y+bi.y)*vi,bn+=3*vi}return new Sl(Sn/bn,Wn/bn,0,en)}(M),Yr=ur.length;ur.length;){var Gr=ur.pop();(Gr.d>Rr.d||!Rr.d)&&(Rr=Gr,G&&console.log("found best %d after %d probes",Math.round(1e4*Gr.d)/1e4,Yr)),Gr.max-Rr.d<=P||(ur.push(new Sl(Gr.p.x-(Kt=Gr.h/2),Gr.p.y-Kt,Kt,M)),ur.push(new Sl(Gr.p.x+Kt,Gr.p.y-Kt,Kt,M)),ur.push(new Sl(Gr.p.x-Kt,Gr.p.y+Kt,Kt,M)),ur.push(new Sl(Gr.p.x+Kt,Gr.p.y+Kt,Kt,M)),Yr+=4)}return G&&(console.log("num probes: "+Yr),console.log("best distance: "+Rr.d)),Rr.p}function fp(M,P){return P.max-M.max}function Sl(M,P,G,oe){this.p=new n(M,P),this.h=G,this.d=function(pe,xe){for(var Ee=!1,Ne=1/0,tt=0;tt<xe.length;tt++)for(var dt=xe[tt],wt=0,qt=dt.length,tr=qt-1;wt<qt;tr=wt++){var Kt=dt[wt],ur=dt[tr];Kt.y>pe.y!=ur.y>pe.y&&pe.x<(ur.x-Kt.x)*(pe.y-Kt.y)/(ur.y-Kt.y)+Kt.x&&(Ee=!Ee),Ne=Math.min(Ne,Zs(pe,Kt,ur))}return(Ee?1:-1)*Math.sqrt(Ne)}(this.p,oe),this.max=this.d+this.h*Math.SQRT2}Al.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Al.prototype.pop=function(){if(0!==this.length){var M=this.data[0],P=this.data.pop();return this.length--,this.length>0&&(this.data[0]=P,this._down(0)),M}},Al.prototype.peek=function(){return this.data[0]},Al.prototype._up=function(M){for(var P=this.data,G=this.compare,oe=P[M];M>0;){var pe=M-1>>1,xe=P[pe];if(G(oe,xe)>=0)break;P[M]=xe,M=pe}P[M]=oe},Al.prototype._down=function(M){for(var P=this.data,G=this.compare,oe=this.length>>1,pe=P[M];M<oe;){var xe=1+(M<<1),Ee=P[xe],Ne=xe+1;if(Ne<this.length&&G(P[Ne],Ee)<0&&(xe=Ne,Ee=P[Ne]),G(Ee,pe)>=0)break;P[M]=Ee,M=xe}P[M]=pe};var pu=Number.POSITIVE_INFINITY;function _h(M,P){return P[1]!==pu?function(G,oe,pe){var xe=0,Ee=0;switch(oe=Math.abs(oe),pe=Math.abs(pe),G){case"top-right":case"top-left":case"top":Ee=pe-7;break;case"bottom-right":case"bottom-left":case"bottom":Ee=7-pe}switch(G){case"top-right":case"bottom-right":case"right":xe=-oe;break;case"top-left":case"bottom-left":case"left":xe=oe}return[xe,Ee]}(M,P[0],P[1]):function(G,oe){var pe=0,xe=0;oe<0&&(oe=0);var Ee=oe/Math.sqrt(2);switch(G){case"top-right":case"top-left":xe=Ee-7;break;case"bottom-right":case"bottom-left":xe=7-Ee;break;case"bottom":xe=7-oe;break;case"top":xe=oe-7}switch(G){case"top-right":case"bottom-right":pe=-Ee;break;case"top-left":case"bottom-left":pe=Ee;break;case"left":pe=oe;break;case"right":pe=-oe}return[pe,xe]}(M,P[0])}function du(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function bh(M,P,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur){var wr=function(en,bn,Sn,Wn,Gn,ei,fi,pi){for(var ni=Wn.layout.get("text-rotate").evaluate(ei,{})*Math.PI/180,bi=[],vi=0,di=bn.positionedLines;vi<di.length;vi+=1)for(var ia=di[vi],ea=0,ha=ia.positionedGlyphs;ea<ha.length;ea+=1){var Ei=ha[ea];if(Ei.rect){var ta=Ei.rect||{},La=4,ka=!0,Ba=1,Ta=0,ko=(Gn||pi)&&Ei.vertical,Na=Ei.metrics.advance*Ei.scale/2;if(pi&&bn.verticalizable&&(Ta=ia.lineOffset/2-(Ei.imageName?-(24-Ei.metrics.width*Ei.scale)/2:24*(Ei.scale-1))),Ei.imageName){var jo=fi[Ei.imageName];ka=jo.sdf,La=1/(Ba=jo.pixelRatio)}var as=Gn?[Ei.x+Na,Ei.y]:[0,0],Ko=Gn?[0,0]:[Ei.x+Na+Sn[0],Ei.y+Sn[1]-Ta],To=[0,0];ko&&(To=Ko,Ko=[0,0]);var Vo=(Ei.metrics.left-La)*Ei.scale-Na+Ko[0],po=(-Ei.metrics.top-La)*Ei.scale+Ko[1],So=Vo+ta.w*Ei.scale/Ba,qi=po+ta.h*Ei.scale/Ba,sa=new n(Vo,po),Qa=new n(So,po),$a=new n(Vo,qi),Wa=new n(So,qi);if(ko){var ja=new n(-Na,Na- -17),fa=-Math.PI/2,eo=12-Na,_s=new n(22-eo,-(Ei.imageName?eo:0)),Qo=new(Function.prototype.bind.apply(n,[null].concat(To)));sa._rotateAround(fa,ja)._add(_s)._add(Qo),Qa._rotateAround(fa,ja)._add(_s)._add(Qo),$a._rotateAround(fa,ja)._add(_s)._add(Qo),Wa._rotateAround(fa,ja)._add(_s)._add(Qo)}if(ni){var zs=Math.sin(ni),Ks=Math.cos(ni),Fo=[Ks,-zs,zs,Ks];sa._matMult(Fo),Qa._matMult(Fo),$a._matMult(Fo),Wa._matMult(Fo)}var Fs=new n(0,0),Bs=new n(0,0);bi.push({tl:sa,tr:Qa,bl:$a,br:Wa,tex:ta,writingMode:bn.writingMode,glyphOffset:as,sectionIndex:Ei.sectionIndex,isSDF:ka,pixelOffsetTL:Fs,pixelOffsetBR:Bs,minFontScaleX:0,minFontScaleY:0})}}return bi}(0,G,Ne,pe,xe,Ee,oe,M.allowVerticalPlacement),Fr=M.textSizeData,Rr=null;"source"===Fr.kind?(Rr=[128*pe.layout.get("text-size").evaluate(Ee,{})])[0]>32640&&A(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Fr.kind&&((Rr=[128*Kt.compositeTextSizes[0].evaluate(Ee,{},ur),128*Kt.compositeTextSizes[1].evaluate(Ee,{},ur)])[0]>32640||Rr[1]>32640)&&A(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,wr,Rr,Ne,xe,Ee,dt,P,tt.lineStartIndex,tt.lineLength,tr,ur);for(var Yr=0,Gr=wt;Yr<Gr.length;Yr+=1)qt[Gr[Yr]]=M.text.placedSymbolArray.length-1;return 4*wr.length}function wh(M){for(var P in M)return M[P];return null}function pp(M,P,G,oe){var pe=M.compareText;if(P in pe){for(var xe=pe[P],Ee=xe.length-1;Ee>=0;Ee--)if(oe.dist(xe[Ee])<G)return!0}else pe[P]=[];return pe[P].push(oe),!1}var dp=bl.VectorTileFeature.types,mp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mc(M,P,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr){var Kt=Ne?Math.min(32640,Math.round(Ne[0])):0,ur=Ne?Math.min(32640,Math.round(Ne[1])):0;M.emplaceBack(P,G,Math.round(32*oe),Math.round(32*pe),xe,Ee,(Kt<<1)+(tt?1:0),ur,16*dt,16*wt,256*qt,256*tr)}function mu(M,P,G){M.emplaceBack(P.x,P.y,G),M.emplaceBack(P.x,P.y,G),M.emplaceBack(P.x,P.y,G),M.emplaceBack(P.x,P.y,G)}function gp(M){for(var P=0,G=M.sections;P<G.length;P+=1)if(li(G[P].text))return!0;return!1}var Cl=function(M){this.layoutVertexArray=new Ye,this.indexArray=new Ur,this.programConfigurations=M,this.segments=new Ht,this.dynamicLayoutVertexArray=new Tt,this.opacityVertexArray=new ne,this.placedSymbolArray=new Ve};Cl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Cl.prototype.upload=function(M,P,G,oe){this.isEmpty()||(G&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,cu.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,P),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,Hf.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,mp,!0),this.opacityVertexBuffer.itemSize=1),(G||oe)&&this.programConfigurations.upload(M))},Cl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},nn("SymbolBuffers",Cl);var ec=function(M,P,G){this.layoutVertexArray=new M,this.layoutAttributes=P,this.indexArray=new G,this.segments=new Ht,this.collisionVertexArray=new yr};ec.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,qf.members,!0)},ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},nn("CollisionBuffers",ec);var ma=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Ee){return Ee.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ql([]),this.placementViewportMatrix=ql([]);var P=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fu(this.zoom,P["text-size"]),this.iconSizeData=fu(this.zoom,P["icon-size"]);var G=this.layers[0].layout,oe=G.get("symbol-sort-key"),pe=G.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==pe&&void 0!==oe.constantOr(1),this.sortFeaturesByY=("viewport-y"===pe||"auto"===pe&&!this.sortFeaturesByKey)&&(G.get("text-allow-overlap")||G.get("icon-allow-overlap")||G.get("text-ignore-placement")||G.get("icon-ignore-placement")),"point"===G.get("symbol-placement")&&(this.writingModes=G.get("text-writing-mode").map(function(Ee){return Ts[Ee]})),this.stateDependentLayerIds=this.layers.filter(function(Ee){return Ee.isStateDependent()}).map(function(Ee){return Ee.id}),this.sourceID=M.sourceID};ma.prototype.createArrays=function(){this.text=new Cl(new wa(cu.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Cl(new wa(cu.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new At,this.lineVertexArray=new Pt,this.symbolInstances=new st},ma.prototype.calculateGlyphDependencies=function(M,P,G,oe,pe){for(var xe=0;xe<M.length;xe++)if(P[M.charCodeAt(xe)]=!0,(G||oe)&&pe){var Ee=Kl[M.charAt(xe)];Ee&&(P[Ee.charCodeAt(0)]=!0)}},ma.prototype.populate=function(M,P,G){var oe=this.layers[0],pe=oe.layout,xe=pe.get("text-font"),Ee=pe.get("text-field"),Ne=pe.get("icon-image"),tt=("constant"!==Ee.value.kind||Ee.value.value instanceof Nr&&!Ee.value.value.isEmpty()||Ee.value.value.toString().length>0)&&("constant"!==xe.value.kind||xe.value.value.length>0),dt="constant"!==Ne.value.kind||!!Ne.value.value||Object.keys(Ne.parameters).length>0,wt=pe.get("symbol-sort-key");if(this.features=[],tt||dt){for(var qt=P.iconDependencies,tr=P.glyphDependencies,Kt=P.availableImages,ur=new aa(this.zoom),wr=0,Fr=M;wr<Fr.length;wr+=1){var Rr=Fr[wr],Yr=Rr.feature,Gr=Rr.id,en=Rr.index,bn=Rr.sourceLayerIndex,Sn=oe._featureFilter.needGeometry,Wn={type:Yr.type,id:Gr,properties:Yr.properties,geometry:Sn?Ca(Yr):[]};if(oe._featureFilter.filter(ur,Wn,G)){Sn||(Wn.geometry=Ca(Yr));var Gn=void 0;if(tt){var ei=oe.getValueAndResolveTokens("text-field",Wn,G,Kt),fi=Nr.factory(ei);gp(fi)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ya()||this.hasRTLText&&fo.isParsed())&&(Gn=Gf(fi,oe,Wn))}var pi=void 0;if(dt){var ni=oe.getValueAndResolveTokens("icon-image",Wn,G,Kt);pi=ni instanceof kr?ni:kr.fromString(ni)}if(Gn||pi){var bi=this.sortFeaturesByKey?wt.evaluate(Wn,{},G):void 0,vi={id:Gr,text:Gn,icon:pi,index:en,sourceLayerIndex:bn,geometry:Ca(Yr),properties:Yr.properties,type:dp[Yr.type],sortKey:bi};if(this.features.push(vi),pi&&(qt[pi.name]=!0),Gn){var di=xe.evaluate(Wn,{},G).join(","),ia="map"===pe.get("text-rotation-alignment")&&"point"!==pe.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ts.vertical)>=0;for(var ea=0,ha=Gn.sections;ea<ha.length;ea+=1){var Ei=ha[ea];if(Ei.image)qt[Ei.image.name]=!0;else{var ta=ji(Gn.toString()),La=Ei.fontStack||di,ka=tr[La]=tr[La]||{};this.calculateGlyphDependencies(Ei.text,ka,ia,this.allowVerticalPlacement,ta)}}}}}}"line"===pe.get("symbol-placement")&&(this.features=function(Ba){var Ta={},ko={},Na=[],Go=0;function zo(Wa){Na.push(Ba[Wa]),Go++}function jo(Wa,ja,fa){var eo=ko[Wa];return delete ko[Wa],ko[ja]=eo,Na[eo].geometry[0].pop(),Na[eo].geometry[0]=Na[eo].geometry[0].concat(fa[0]),eo}function as(Wa,ja,fa){var eo=Ta[ja];return delete Ta[ja],Ta[Wa]=eo,Na[eo].geometry[0].shift(),Na[eo].geometry[0]=fa[0].concat(Na[eo].geometry[0]),eo}function Ko(Wa,ja,fa){var eo=fa?ja[0][ja[0].length-1]:ja[0][0];return Wa+":"+eo.x+":"+eo.y}for(var To=0;To<Ba.length;To++){var Vo=Ba[To],po=Vo.geometry,So=Vo.text?Vo.text.toString():null;if(So){var qi=Ko(So,po),sa=Ko(So,po,!0);if(qi in ko&&sa in Ta&&ko[qi]!==Ta[sa]){var Qa=as(qi,sa,po),$a=jo(qi,sa,Na[Qa].geometry);delete Ta[qi],delete ko[sa],ko[Ko(So,Na[$a].geometry,!0)]=$a,Na[Qa].geometry=null}else qi in ko?jo(qi,sa,po):sa in Ta?as(qi,sa,po):(zo(To),Ta[qi]=Go-1,ko[sa]=Go-1)}else zo(To)}return Na.filter(function(Wa){return Wa.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ba,Ta){return Ba.sortKey-Ta.sortKey})}},ma.prototype.update=function(M,P,G){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,P,this.layers,G),this.icon.programConfigurations.updatePaintArrays(M,P,this.layers,G))},ma.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},ma.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ma.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ma.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ma.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ma.prototype.addToLineVertexArray=function(M,P){var G=this.lineVertexArray.length;if(void 0!==M.segment){for(var oe=M.dist(P[M.segment+1]),pe=M.dist(P[M.segment]),xe={},Ee=M.segment+1;Ee<P.length;Ee++)xe[Ee]={x:P[Ee].x,y:P[Ee].y,tileUnitDistanceFromAnchor:oe},Ee<P.length-1&&(oe+=P[Ee+1].dist(P[Ee]));for(var Ne=M.segment||0;Ne>=0;Ne--)xe[Ne]={x:P[Ne].x,y:P[Ne].y,tileUnitDistanceFromAnchor:pe},Ne>0&&(pe+=P[Ne-1].dist(P[Ne]));for(var tt=0;tt<P.length;tt++){var dt=xe[tt];this.lineVertexArray.emplaceBack(dt.x,dt.y,dt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:G,lineLength:this.lineVertexArray.length-G}},ma.prototype.addSymbols=function(M,P,G,oe,pe,xe,Ee,Ne,tt,dt,wt,qt){for(var tr=M.indexArray,Kt=M.layoutVertexArray,ur=M.segments.prepareSegment(4*P.length,Kt,tr,xe.sortKey),wr=this.glyphOffsetArray.length,Fr=ur.vertexLength,Rr=this.allowVerticalPlacement&&Ee===Ts.vertical?Math.PI/2:0,Yr=xe.text&&xe.text.sections,Gr=0;Gr<P.length;Gr++){var en=P[Gr],bn=en.tl,Sn=en.tr,Wn=en.bl,Gn=en.br,ei=en.tex,fi=en.pixelOffsetTL,pi=en.pixelOffsetBR,ni=en.minFontScaleX,bi=en.minFontScaleY,vi=en.glyphOffset,di=en.isSDF,ia=en.sectionIndex,ea=ur.vertexLength,ha=vi[1];Mc(Kt,Ne.x,Ne.y,bn.x,ha+bn.y,ei.x,ei.y,G,di,fi.x,fi.y,ni,bi),Mc(Kt,Ne.x,Ne.y,Sn.x,ha+Sn.y,ei.x+ei.w,ei.y,G,di,pi.x,fi.y,ni,bi),Mc(Kt,Ne.x,Ne.y,Wn.x,ha+Wn.y,ei.x,ei.y+ei.h,G,di,fi.x,pi.y,ni,bi),Mc(Kt,Ne.x,Ne.y,Gn.x,ha+Gn.y,ei.x+ei.w,ei.y+ei.h,G,di,pi.x,pi.y,ni,bi),mu(M.dynamicLayoutVertexArray,Ne,Rr),tr.emplaceBack(ea,ea+1,ea+2),tr.emplaceBack(ea+1,ea+2,ea+3),ur.vertexLength+=4,ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vi[0]),Gr!==P.length-1&&ia===P[Gr+1].sectionIndex||M.programConfigurations.populatePaintArrays(Kt.length,xe,xe.index,{},qt,Yr&&Yr[ia])}M.placedSymbolArray.emplaceBack(Ne.x,Ne.y,wr,this.glyphOffsetArray.length-wr,Fr,tt,dt,Ne.segment,G?G[0]:0,G?G[1]:0,oe[0],oe[1],Ee,0,!1,0,wt)},ma.prototype._addCollisionDebugVertex=function(M,P,G,oe,pe,xe){return P.emplaceBack(0,0),M.emplaceBack(G.x,G.y,oe,pe,Math.round(xe.x),Math.round(xe.y))},ma.prototype.addCollisionDebugVertices=function(M,P,G,oe,pe,xe,Ee){var Ne=pe.segments.prepareSegment(4,pe.layoutVertexArray,pe.indexArray),tt=Ne.vertexLength,dt=pe.layoutVertexArray,wt=pe.collisionVertexArray,qt=Ee.anchorX,tr=Ee.anchorY;this._addCollisionDebugVertex(dt,wt,xe,qt,tr,new n(M,P)),this._addCollisionDebugVertex(dt,wt,xe,qt,tr,new n(G,P)),this._addCollisionDebugVertex(dt,wt,xe,qt,tr,new n(G,oe)),this._addCollisionDebugVertex(dt,wt,xe,qt,tr,new n(M,oe)),Ne.vertexLength+=4;var Kt=pe.indexArray;Kt.emplaceBack(tt,tt+1),Kt.emplaceBack(tt+1,tt+2),Kt.emplaceBack(tt+2,tt+3),Kt.emplaceBack(tt+3,tt),Ne.primitiveLength+=4},ma.prototype.addDebugCollisionBoxes=function(M,P,G,oe){for(var pe=M;pe<P;pe++){var xe=this.collisionBoxArray.get(pe);this.addCollisionDebugVertices(xe.x1,xe.y1,xe.x2,xe.y2,oe?this.textCollisionBox:this.iconCollisionBox,xe.anchorPoint,G)}},ma.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ec(Ze,eh.members,B),this.iconCollisionBox=new ec(Ze,eh.members,B);for(var M=0;M<this.symbolInstances.length;M++){var P=this.symbolInstances.get(M);this.addDebugCollisionBoxes(P.textBoxStartIndex,P.textBoxEndIndex,P,!0),this.addDebugCollisionBoxes(P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P,!0),this.addDebugCollisionBoxes(P.iconBoxStartIndex,P.iconBoxEndIndex,P,!1),this.addDebugCollisionBoxes(P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex,P,!1)}},ma.prototype._deserializeCollisionBoxesForSymbol=function(M,P,G,oe,pe,xe,Ee,Ne,tt){for(var dt={},wt=P;wt<G;wt++){var qt=M.get(wt);dt.textBox={x1:qt.x1,y1:qt.y1,x2:qt.x2,y2:qt.y2,anchorPointX:qt.anchorPointX,anchorPointY:qt.anchorPointY},dt.textFeatureIndex=qt.featureIndex;break}for(var tr=oe;tr<pe;tr++){var Kt=M.get(tr);dt.verticalTextBox={x1:Kt.x1,y1:Kt.y1,x2:Kt.x2,y2:Kt.y2,anchorPointX:Kt.anchorPointX,anchorPointY:Kt.anchorPointY},dt.verticalTextFeatureIndex=Kt.featureIndex;break}for(var ur=xe;ur<Ee;ur++){var wr=M.get(ur);dt.iconBox={x1:wr.x1,y1:wr.y1,x2:wr.x2,y2:wr.y2,anchorPointX:wr.anchorPointX,anchorPointY:wr.anchorPointY},dt.iconFeatureIndex=wr.featureIndex;break}for(var Fr=Ne;Fr<tt;Fr++){var Rr=M.get(Fr);dt.verticalIconBox={x1:Rr.x1,y1:Rr.y1,x2:Rr.x2,y2:Rr.y2,anchorPointX:Rr.anchorPointX,anchorPointY:Rr.anchorPointY},dt.verticalIconFeatureIndex=Rr.featureIndex;break}return dt},ma.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var P=0;P<this.symbolInstances.length;P++){var G=this.symbolInstances.get(P);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,G.textBoxStartIndex,G.textBoxEndIndex,G.verticalTextBoxStartIndex,G.verticalTextBoxEndIndex,G.iconBoxStartIndex,G.iconBoxEndIndex,G.verticalIconBoxStartIndex,G.verticalIconBoxEndIndex))}},ma.prototype.hasTextData=function(){return this.text.segments.get().length>0},ma.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ma.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ma.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ma.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ma.prototype.addIndicesForPlacedSymbol=function(M,P){for(var G=M.placedSymbolArray.get(P),oe=G.vertexStartIndex+4*G.numGlyphs,pe=G.vertexStartIndex;pe<oe;pe+=4)M.indexArray.emplaceBack(pe,pe+1,pe+2),M.indexArray.emplaceBack(pe+1,pe+2,pe+3)},ma.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var P=Math.sin(M),G=Math.cos(M),oe=[],pe=[],xe=[],Ee=0;Ee<this.symbolInstances.length;++Ee){xe.push(Ee);var Ne=this.symbolInstances.get(Ee);oe.push(0|Math.round(P*Ne.anchorX+G*Ne.anchorY)),pe.push(Ne.featureIndex)}return xe.sort(function(tt,dt){return oe[tt]-oe[dt]||pe[dt]-pe[tt]}),xe},ma.prototype.addToSortKeyRanges=function(M,P){var G=this.sortKeyRanges[this.sortKeyRanges.length-1];G&&G.sortKey===P?G.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:P,symbolInstanceStart:M,symbolInstanceEnd:M+1})},ma.prototype.sortFeatures=function(M){var P=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var G=0,oe=this.symbolInstanceIndexes;G<oe.length;G+=1){var xe=this.symbolInstances.get(oe[G]);this.featureSortOrder.push(xe.featureIndex),[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(function(Ee,Ne,tt){Ee>=0&&tt.indexOf(Ee)===Ne&&P.addIndicesForPlacedSymbol(P.text,Ee)}),xe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,xe.verticalPlacedTextSymbolIndex),xe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,xe.placedIconSymbolIndex),xe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,xe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},nn("SymbolBucket",ma,{omit:["layers","collisionBoxArray","features","compareText"]}),ma.MAX_GLYPHS=65535,ma.addDynamicAttributes=mu;var vp=new Ao({"symbol-placement":new mi(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new mi(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mi(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ti(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mi(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mi(Ie.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mi(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new mi(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mi(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ti(Ie.layout_symbol["icon-size"]),"icon-text-fit":new mi(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mi(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ti(Ie.layout_symbol["icon-image"]),"icon-rotate":new Ti(Ie.layout_symbol["icon-rotate"]),"icon-padding":new mi(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new mi(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Ti(Ie.layout_symbol["icon-offset"]),"icon-anchor":new Ti(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mi(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mi(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mi(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new Ti(Ie.layout_symbol["text-field"]),"text-font":new Ti(Ie.layout_symbol["text-font"]),"text-size":new Ti(Ie.layout_symbol["text-size"]),"text-max-width":new Ti(Ie.layout_symbol["text-max-width"]),"text-line-height":new mi(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Ti(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new Ti(Ie.layout_symbol["text-justify"]),"text-radial-offset":new Ti(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mi(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new Ti(Ie.layout_symbol["text-anchor"]),"text-max-angle":new mi(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new mi(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new Ti(Ie.layout_symbol["text-rotate"]),"text-padding":new mi(Ie.layout_symbol["text-padding"]),"text-keep-upright":new mi(Ie.layout_symbol["text-keep-upright"]),"text-transform":new Ti(Ie.layout_symbol["text-transform"]),"text-offset":new Ti(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new mi(Ie.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mi(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new mi(Ie.layout_symbol["text-optional"])}),gu={paint:new Ao({"icon-opacity":new Ti(Ie.paint_symbol["icon-opacity"]),"icon-color":new Ti(Ie.paint_symbol["icon-color"]),"icon-halo-color":new Ti(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ti(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ti(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new mi(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new mi(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ti(Ie.paint_symbol["text-opacity"]),"text-color":new Ti(Ie.paint_symbol["text-color"],{runtimeType:Ut,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Ti(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new Ti(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Ti(Ie.paint_symbol["text-halo-blur"]),"text-translate":new mi(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new mi(Ie.paint_symbol["text-translate-anchor"])}),layout:vp},El=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Rt,this.defaultValue=M};El.prototype.evaluate=function(M){if(M.formattedSection){var P=this.defaultValue.property.overrides;if(P&&P.hasOverride(M.formattedSection))return P.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},El.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},El.prototype.outputDefined=function(){return!1},El.prototype.serialize=function(){return null},nn("FormatSectionOverride",El,{omit:["defaultValue"]});var yp=function(M){function P(G){M.call(this,G,gu)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.recalculate=function(G,oe){if(M.prototype.recalculate.call(this,G,oe),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var pe=this.layout.get("text-writing-mode");if(pe){for(var xe=[],Ee=0,Ne=pe;Ee<Ne.length;Ee+=1){var tt=Ne[Ee];xe.indexOf(tt)<0&&xe.push(tt)}this.layout._values["text-writing-mode"]=xe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},P.prototype.getValueAndResolveTokens=function(G,oe,pe,xe){var tt,Ee=this.layout.get(G).evaluate(oe,{},pe,xe),Ne=this._unevaluatedLayout._values[G];return Ne.isDataDriven()||ir(Ne.value)||!Ee?Ee:(tt=oe.properties,Ee.replace(/{([^{}]+)}/g,function(wt,qt){return qt in tt?String(tt[qt]):""}))},P.prototype.createBucket=function(G){return new ma(G)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype._setPaintOverrides=function(){for(var G=0,oe=gu.paint.overridableProperties;G<oe.length;G+=1){var pe=oe[G];if(P.hasPaintOverride(this.layout,pe)){var tt,xe=this.paint.get(pe),Ee=new El(xe),Ne=new rr(Ee,xe.property.specification);tt="constant"===xe.value.kind||"source"===xe.value.kind?new sr("source",Ne):new gr("composite",Ne,xe.value.zoomStops,xe.value._interpolationType),this.paint._values[pe]=new Pa(xe.property,tt,xe.parameters)}}},P.prototype._handleOverridablePaintPropertyUpdate=function(G,oe,pe){return!(!this.layout||oe.isDataDriven()||pe.isDataDriven())&&P.hasPaintOverride(this.layout,G)},P.hasPaintOverride=function(G,oe){var pe=G.get("text-field"),xe=gu.paint.properties[oe],Ee=!1,Ne=function(wt){for(var qt=0,tr=wt;qt<tr.length;qt+=1)if(xe.overrides&&xe.overrides.hasOverride(tr[qt]))return void(Ee=!0)};if("constant"===pe.value.kind&&pe.value.value instanceof Nr)Ne(pe.value.value.sections);else if("source"===pe.value.kind){var tt=function(wt){Ee||(wt instanceof Nn&&fn(wt.value)===Mt?Ne(wt.value.sections):wt instanceof Lr?Ne(wt.sections):wt.eachChild(tt))},dt=pe.value;dt._styleExpression&&tt(dt._styleExpression.expression)}return Ee},P}(Ho),xp={paint:new Ao({"background-color":new mi(Ie.paint_background["background-color"]),"background-pattern":new ws(Ie.paint_background["background-pattern"]),"background-opacity":new mi(Ie.paint_background["background-opacity"])})},_p=function(M){function P(G){M.call(this,G,xp)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P}(Ho),bp={paint:new Ao({"raster-opacity":new mi(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new mi(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mi(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mi(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new mi(Ie.paint_raster["raster-saturation"]),"raster-contrast":new mi(Ie.paint_raster["raster-contrast"]),"raster-resampling":new mi(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new mi(Ie.paint_raster["raster-fade-duration"])})},wp=function(M){function P(G){M.call(this,G,bp)}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P}(Ho),kp=function(M){function P(G){M.call(this,G,{}),this.implementation=G}return M&&(P.__proto__=M),(P.prototype=Object.create(M&&M.prototype)).constructor=P,P.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},P.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},P.prototype.recalculate=function(){},P.prototype.updateTransitions=function(){},P.prototype.hasTransition=function(){},P.prototype.serialize=function(){},P.prototype.onAdd=function(G){this.implementation.onAdd&&this.implementation.onAdd(G,G.painter.context.gl)},P.prototype.onRemove=function(G){this.implementation.onRemove&&this.implementation.onRemove(G,G.painter.context.gl)},P}(Ho),Tp={circle:cf,heatmap:hf,hillshade:pf,fill:Ef,"fill-extrusion":Bf,line:Uf,symbol:yp,background:_p,raster:wp},kh=self.HTMLImageElement,Th=self.HTMLCanvasElement,Mh=self.HTMLVideoElement,Ah=self.ImageData,Ac=self.ImageBitmap,fl=function(M,P,G,oe){this.context=M,this.format=G,this.texture=M.gl.createTexture(),this.update(P,oe)};fl.prototype.update=function(M,P,G){var oe=M.width,pe=M.height,xe=!(this.size&&this.size[0]===oe&&this.size[1]===pe||G),Ee=this.context,Ne=Ee.gl;if(this.useMipmap=Boolean(P&&P.useMipmap),Ne.bindTexture(Ne.TEXTURE_2D,this.texture),Ee.pixelStoreUnpackFlipY.set(!1),Ee.pixelStoreUnpack.set(1),Ee.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ne.RGBA&&(!P||!1!==P.premultiply)),xe)this.size=[oe,pe],M instanceof kh||M instanceof Th||M instanceof Mh||M instanceof Ah||Ac&&M instanceof Ac?Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,this.format,Ne.UNSIGNED_BYTE,M):Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,oe,pe,0,this.format,Ne.UNSIGNED_BYTE,M.data);else{var tt=G||{x:0,y:0},dt=tt.x,wt=tt.y;M instanceof kh||M instanceof Th||M instanceof Mh||M instanceof Ah||Ac&&M instanceof Ac?Ne.texSubImage2D(Ne.TEXTURE_2D,0,dt,wt,Ne.RGBA,Ne.UNSIGNED_BYTE,M):Ne.texSubImage2D(Ne.TEXTURE_2D,0,dt,wt,oe,pe,Ne.RGBA,Ne.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ne.generateMipmap(Ne.TEXTURE_2D)},fl.prototype.bind=function(M,P,G){var oe=this.context.gl;oe.bindTexture(oe.TEXTURE_2D,this.texture),G!==oe.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(G=oe.LINEAR),M!==this.filter&&(oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,M),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,G||M),this.filter=M),P!==this.wrap&&(oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,P),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,P),this.wrap=P)},fl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},fl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var vu=function(M){var P=this;this._callback=M,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){P._triggered=!1,P._callback()})};vu.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},vu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ll=function(M,P,G){this.target=M,this.parent=P,this.mapId=G,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new vu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?M:self};function Sh(M,P,G){var oe=2*Math.PI*6378137/256/Math.pow(2,G);return[M*oe-2*Math.PI*6378137/2,P*oe-2*Math.PI*6378137/2]}Ll.prototype.send=function(M,P,G,oe,pe){var xe=this;void 0===pe&&(pe=!1);var Ee=Math.round(1e18*Math.random()).toString(36).substring(0,10);G&&(this.callbacks[Ee]=G);var Ne=F(this.globalScope)?void 0:[];return this.target.postMessage({id:Ee,type:M,hasCallback:!!G,targetMapId:oe,mustQueue:pe,sourceMapId:this.mapId,data:ii(P,Ne)},Ne),{cancel:function(){G&&delete xe.callbacks[Ee],xe.target.postMessage({id:Ee,type:"<cancel>",targetMapId:oe,sourceMapId:xe.mapId})}}},Ll.prototype.receive=function(M){var P=M.data,G=P.id;if(G&&(!P.targetMapId||this.mapId===P.targetMapId))if("<cancel>"===P.type){delete this.tasks[G];var oe=this.cancelCallbacks[G];delete this.cancelCallbacks[G],oe&&oe()}else S()||P.mustQueue?(this.tasks[G]=P,this.taskQueue.push(G),this.invoker.trigger()):this.processTask(G,P)},Ll.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),P=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),P&&this.processTask(M,P)}},Ll.prototype.processTask=function(M,P){var G=this;if("<response>"===P.type){var oe=this.callbacks[M];delete this.callbacks[M],oe&&(P.error?oe(Ai(P.error)):oe(null,Ai(P.data)))}else{var pe=!1,xe=F(this.globalScope)?void 0:[],Ee=P.hasCallback?function(wt,qt){pe=!0,delete G.cancelCallbacks[M],G.target.postMessage({id:M,type:"<response>",sourceMapId:G.mapId,error:wt?ii(wt):null,data:ii(qt,xe)},xe)}:function(wt){pe=!0},Ne=null,tt=Ai(P.data);if(this.parent[P.type])Ne=this.parent[P.type](P.sourceMapId,tt,Ee);else if(this.parent.getWorkerSource){var dt=P.type.split(".");Ne=this.parent.getWorkerSource(P.sourceMapId,dt[0],tt.source)[dt[1]](tt,Ee)}else Ee(new Error("Could not find function "+P.type));!pe&&Ne&&Ne.cancel&&(this.cancelCallbacks[M]=Ne.cancel)}},Ll.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var bo=function(M,P){M&&(P?this.setSouthWest(M).setNorthEast(P):4===M.length?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};bo.prototype.setNorthEast=function(M){return this._ne=M instanceof Fa?new Fa(M.lng,M.lat):Fa.convert(M),this},bo.prototype.setSouthWest=function(M){return this._sw=M instanceof Fa?new Fa(M.lng,M.lat):Fa.convert(M),this},bo.prototype.extend=function(M){var P,G,oe=this._sw,pe=this._ne;if(M instanceof Fa)P=M,G=M;else{if(!(M instanceof bo))return Array.isArray(M)?4===M.length||M.every(Array.isArray)?this.extend(bo.convert(M)):this.extend(Fa.convert(M)):this;if(G=M._ne,!(P=M._sw)||!G)return this}return oe||pe?(oe.lng=Math.min(P.lng,oe.lng),oe.lat=Math.min(P.lat,oe.lat),pe.lng=Math.max(G.lng,pe.lng),pe.lat=Math.max(G.lat,pe.lat)):(this._sw=new Fa(P.lng,P.lat),this._ne=new Fa(G.lng,G.lat)),this},bo.prototype.getCenter=function(){return new Fa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},bo.prototype.getSouthWest=function(){return this._sw},bo.prototype.getNorthEast=function(){return this._ne},bo.prototype.getNorthWest=function(){return new Fa(this.getWest(),this.getNorth())},bo.prototype.getSouthEast=function(){return new Fa(this.getEast(),this.getSouth())},bo.prototype.getWest=function(){return this._sw.lng},bo.prototype.getSouth=function(){return this._sw.lat},bo.prototype.getEast=function(){return this._ne.lng},bo.prototype.getNorth=function(){return this._ne.lat},bo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},bo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},bo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},bo.prototype.contains=function(M){var P=Fa.convert(M),G=P.lng,oe=P.lat,xe=this._sw.lng<=G&&G<=this._ne.lng;return this._sw.lng>this._ne.lng&&(xe=this._sw.lng>=G&&G>=this._ne.lng),this._sw.lat<=oe&&oe<=this._ne.lat&&xe},bo.convert=function(M){return!M||M instanceof bo?M:new bo(M)};var Fa=function(M,P){if(isNaN(M)||isNaN(P))throw new Error("Invalid LngLat object: ("+M+", "+P+")");if(this.lng=+M,this.lat=+P,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Fa.prototype.wrap=function(){return new Fa(u(this.lng,-180,180),this.lat)},Fa.prototype.toArray=function(){return[this.lng,this.lat]},Fa.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Fa.prototype.distanceTo=function(M){var P=Math.PI/180,G=this.lat*P,oe=M.lat*P,pe=Math.sin(G)*Math.sin(oe)+Math.cos(G)*Math.cos(oe)*Math.cos((M.lng-this.lng)*P);return 6371008.8*Math.acos(Math.min(pe,1))},Fa.prototype.toBounds=function(M){void 0===M&&(M=0);var P=360*M/40075017,G=P/Math.cos(Math.PI/180*this.lat);return new bo(new Fa(this.lng-G,this.lat-P),new Fa(this.lng+G,this.lat+P))},Fa.convert=function(M){if(M instanceof Fa)return M;if(Array.isArray(M)&&(2===M.length||3===M.length))return new Fa(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&"object"==typeof M&&null!==M)return new Fa(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ch=2*Math.PI*6371008.8;function Eh(M){return Ch*Math.cos(M*Math.PI/180)}function Lh(M){return(180+M)/360}function Dh(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function Ih(M,P){return M/Eh(P)}function yu(M){return 360/Math.PI*Math.atan(Math.exp((180-360*M)*Math.PI/180))-90}var pl=function(M,P,G){void 0===G&&(G=0),this.x=+M,this.y=+P,this.z=+G};pl.fromLngLat=function(M,P){void 0===P&&(P=0);var G=Fa.convert(M);return new pl(Lh(G.lng),Dh(G.lat),Ih(P,G.lat))},pl.prototype.toLngLat=function(){return new Fa(360*this.x-180,yu(this.y))},pl.prototype.toAltitude=function(){return this.z*Eh(yu(this.y))},pl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ch*(M=yu(this.y),1/Math.cos(M*Math.PI/180));var M};var dl=function(M,P,G){this.z=M,this.x=P,this.y=G,this.key=tc(0,M,M,P,G)};dl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},dl.prototype.url=function(M,P){var G,oe,pe,xe,Ee,Ne=(oe=this.y,pe=this.z,xe=Sh(256*(G=this.x),256*(oe=Math.pow(2,pe)-oe-1),pe),Ee=Sh(256*(G+1),256*(oe+1),pe),xe[0]+","+xe[1]+","+Ee[0]+","+Ee[1]),tt=function(dt,wt,qt){for(var tr,Kt="",ur=dt;ur>0;ur--)Kt+=(wt&(tr=1<<ur-1)?1:0)+(qt&tr?2:0);return Kt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===P?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",tt).replace("{bbox-epsg-3857}",Ne)},dl.prototype.getTilePoint=function(M){var P=Math.pow(2,this.z);return new n(8192*(M.x*P-this.x),8192*(M.y*P-this.y))},dl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ph=function(M,P){this.wrap=M,this.canonical=P,this.key=tc(M,P.z,P.z,P.x,P.y)},wo=function(M,P,G,oe,pe){this.overscaledZ=M,this.wrap=P,this.canonical=new dl(G,+oe,+pe),this.key=tc(P,M,G,oe,pe)};function tc(M,P,G,oe,pe){(M*=2)<0&&(M=-1*M-1);var xe=1<<G;return(xe*xe*M+xe*pe+oe).toString(36)+G.toString(36)+P.toString(36)}wo.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},wo.prototype.scaledTo=function(M){var P=this.canonical.z-M;return M>this.canonical.z?new wo(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wo(M,this.wrap,M,this.canonical.x>>P,this.canonical.y>>P)},wo.prototype.calculateScaledKey=function(M,P){var G=this.canonical.z-M;return M>this.canonical.z?tc(this.wrap*+P,M,this.canonical.z,this.canonical.x,this.canonical.y):tc(this.wrap*+P,M,M,this.canonical.x>>G,this.canonical.y>>G)},wo.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var P=this.canonical.z-M.canonical.z;return 0===M.overscaledZ||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>P&&M.canonical.y===this.canonical.y>>P},wo.prototype.children=function(M){if(this.overscaledZ>=M)return[new wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var P=this.canonical.z+1,G=2*this.canonical.x,oe=2*this.canonical.y;return[new wo(P,this.wrap,P,G,oe),new wo(P,this.wrap,P,G+1,oe),new wo(P,this.wrap,P,G,oe+1),new wo(P,this.wrap,P,G+1,oe+1)]},wo.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},wo.prototype.wrapped=function(){return new wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.unwrapTo=function(M){return new wo(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},wo.prototype.toUnwrapped=function(){return new Ph(this.wrap,this.canonical)},wo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},wo.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new pl(M.x-this.wrap,M.y))},nn("CanonicalTileID",dl),nn("OverscaledTileID",wo,{omit:["posMatrix"]});var Xs=function(M,P,G){if(this.uid=M,P.height!==P.width)throw new RangeError("DEM tiles must be square");if(G&&"mapbox"!==G&&"terrarium"!==G)return A('"'+G+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=P.height;var oe=this.dim=P.height-2;this.data=new Uint32Array(P.data.buffer),this.encoding=G||"mapbox";for(var pe=0;pe<oe;pe++)this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe)],this.data[this._idx(oe,pe)]=this.data[this._idx(oe-1,pe)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe,0)],this.data[this._idx(pe,oe)]=this.data[this._idx(pe,oe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(oe,-1)]=this.data[this._idx(oe-1,0)],this.data[this._idx(-1,oe)]=this.data[this._idx(0,oe-1)],this.data[this._idx(oe,oe)]=this.data[this._idx(oe-1,oe-1)]};Xs.prototype.get=function(M,P){var G=new Uint8Array(this.data.buffer),oe=4*this._idx(M,P);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(G[oe],G[oe+1],G[oe+2])},Xs.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Xs.prototype._idx=function(M,P){if(M<-1||M>=this.dim+1||P<-1||P>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(P+1)*this.stride+(M+1)},Xs.prototype._unpackMapbox=function(M,P,G){return(256*M*256+256*P+G)/10-1e4},Xs.prototype._unpackTerrarium=function(M,P,G){return 256*M+P+G/256-32768},Xs.prototype.getPixels=function(){return new us({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Xs.prototype.backfillBorder=function(M,P,G){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var oe=P*this.dim,pe=P*this.dim+this.dim,xe=G*this.dim,Ee=G*this.dim+this.dim;switch(P){case-1:oe=pe-1;break;case 1:pe=oe+1}switch(G){case-1:xe=Ee-1;break;case 1:Ee=xe+1}for(var Ne=-P*this.dim,tt=-G*this.dim,dt=xe;dt<Ee;dt++)for(var wt=oe;wt<pe;wt++)this.data[this._idx(wt,dt)]=M.data[this._idx(wt+Ne,dt+tt)]},nn("DEMData",Xs);var Sc=function(M){this._stringToNumber={},this._numberToString=[];for(var P=0;P<M.length;P++){var G=M[P];this._stringToNumber[G]=P,this._numberToString[P]=G}};Sc.prototype.encode=function(M){return this._stringToNumber[M]},Sc.prototype.decode=function(M){return this._numberToString[M]};var Cc=function(M,P,G,oe,pe){this.type="Feature",this._vectorTileFeature=M,M._z=P,M._x=G,M._y=oe,this.properties=M.properties,this.id=pe},xu={geometry:{configurable:!0}};xu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},xu.geometry.set=function(M){this._geometry=M},Cc.prototype.toJSON=function(){var M={geometry:this.geometry};for(var P in this)"_geometry"!==P&&"_vectorTileFeature"!==P&&(M[P]=this[P]);return M},Object.defineProperties(Cc.prototype,xu);var Dl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Dl.prototype.updateState=function(M,P,G){var oe=String(P);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][oe]=this.stateChanges[M][oe]||{},h(this.stateChanges[M][oe],G),null===this.deletedStates[M])for(var pe in this.deletedStates[M]={},this.state[M])pe!==oe&&(this.deletedStates[M][pe]=null);else if(this.deletedStates[M]&&null===this.deletedStates[M][oe])for(var xe in this.deletedStates[M][oe]={},this.state[M][oe])G[xe]||(this.deletedStates[M][oe][xe]=null);else for(var Ee in G)this.deletedStates[M]&&this.deletedStates[M][oe]&&null===this.deletedStates[M][oe][Ee]&&delete this.deletedStates[M][oe][Ee]},Dl.prototype.removeFeatureState=function(M,P,G){if(null!==this.deletedStates[M]){var oe=String(P);if(this.deletedStates[M]=this.deletedStates[M]||{},G&&void 0!==P)null!==this.deletedStates[M][oe]&&(this.deletedStates[M][oe]=this.deletedStates[M][oe]||{},this.deletedStates[M][oe][G]=null);else if(void 0!==P)if(this.stateChanges[M]&&this.stateChanges[M][oe])for(G in this.deletedStates[M][oe]={},this.stateChanges[M][oe])this.deletedStates[M][oe][G]=null;else this.deletedStates[M][oe]=null;else this.deletedStates[M]=null}},Dl.prototype.getState=function(M,P){var G=String(P),xe=h({},(this.state[M]||{})[G],(this.stateChanges[M]||{})[G]);if(null===this.deletedStates[M])return{};if(this.deletedStates[M]){var Ee=this.deletedStates[M][P];if(null===Ee)return{};for(var Ne in Ee)delete xe[Ne]}return xe},Dl.prototype.initializeTileState=function(M,P){M.setFeatureState(this.state,P)},Dl.prototype.coalesceChanges=function(M,P){var G={};for(var oe in this.stateChanges){this.state[oe]=this.state[oe]||{};var pe={};for(var xe in this.stateChanges[oe])this.state[oe][xe]||(this.state[oe][xe]={}),h(this.state[oe][xe],this.stateChanges[oe][xe]),pe[xe]=this.state[oe][xe];G[oe]=pe}for(var Ee in this.deletedStates){this.state[Ee]=this.state[Ee]||{};var Ne={};if(null===this.deletedStates[Ee])for(var tt in this.state[Ee])Ne[tt]={},this.state[Ee][tt]={};else for(var dt in this.deletedStates[Ee]){if(null===this.deletedStates[Ee][dt])this.state[Ee][dt]={};else for(var wt=0,qt=Object.keys(this.deletedStates[Ee][dt]);wt<qt.length;wt+=1)delete this.state[Ee][dt][qt[wt]];Ne[dt]=this.state[Ee][dt]}G[Ee]=G[Ee]||{},h(G[Ee],Ne)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(G).length)for(var Kt in M)M[Kt].setFeatureState(G,P)};var Js=function(M,P){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new mn(8192,16,0),this.grid3D=new mn(8192,16,0),this.featureIndexArray=new Lt,this.promoteId=P};function Oh(M,P,G,oe,pe){return b(M,function(xe,Ee){var Ne=P instanceof ns?P.get(Ee):null;return Ne&&Ne.evaluate?Ne.evaluate(G,oe,pe):Ne})}function Rh(M){for(var P=1/0,G=1/0,oe=-1/0,pe=-1/0,xe=0,Ee=M;xe<Ee.length;xe+=1){var Ne=Ee[xe];P=Math.min(P,Ne.x),G=Math.min(G,Ne.y),oe=Math.max(oe,Ne.x),pe=Math.max(pe,Ne.y)}return{minX:P,minY:G,maxX:oe,maxY:pe}}function Mp(M,P){return P-M}Js.prototype.insert=function(M,P,G,oe,pe,xe){var Ee=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(G,oe,pe);for(var Ne=xe?this.grid3D:this.grid,tt=0;tt<P.length;tt++){for(var dt=P[tt],wt=[1/0,1/0,-1/0,-1/0],qt=0;qt<dt.length;qt++){var tr=dt[qt];wt[0]=Math.min(wt[0],tr.x),wt[1]=Math.min(wt[1],tr.y),wt[2]=Math.max(wt[2],tr.x),wt[3]=Math.max(wt[3],tr.y)}wt[0]<8192&&wt[1]<8192&&wt[2]>=0&&wt[3]>=0&&Ne.insert(Ee,wt[0],wt[1],wt[2],wt[3])}},Js.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new bl.VectorTile(new gc(this.rawTileData)).layers,this.sourceLayerCoder=new Sc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Js.prototype.query=function(M,P,G,oe){var pe=this;this.loadVTLayers();for(var xe=M.params||{},Ee=8192/M.tileSize/M.scale,Ne=Li(xe.filter),tt=M.queryGeometry,dt=M.queryPadding*Ee,wt=Rh(tt),qt=this.grid.query(wt.minX-dt,wt.minY-dt,wt.maxX+dt,wt.maxY+dt),tr=Rh(M.cameraQueryGeometry),ur=0,wr=this.grid3D.query(tr.minX-dt,tr.minY-dt,tr.maxX+dt,tr.maxY+dt,function(bn,Sn,Wn,Gn){return function(ei,fi,pi,ni,bi){for(var vi=0,di=ei;vi<di.length;vi+=1){var ia=di[vi];if(fi<=ia.x&&pi<=ia.y&&ni>=ia.x&&bi>=ia.y)return!0}var ea=[new n(fi,pi),new n(fi,bi),new n(ni,bi),new n(ni,pi)];if(ei.length>2)for(var ha=0,Ei=ea;ha<Ei.length;ha+=1)if(ys(ei,Ei[ha]))return!0;for(var ta=0;ta<ei.length-1;ta++)if(cl(ei[ta],ei[ta+1],ea))return!0;return!1}(M.cameraQueryGeometry,bn-dt,Sn-dt,Wn+dt,Gn+dt)});ur<wr.length;ur+=1)qt.push(wr[ur]);qt.sort(Mp);for(var Rr,Yr={},Gr=function(bn){var Sn=qt[bn];if(Sn!==Rr){Rr=Sn;var Wn=pe.featureIndexArray.get(Sn),Gn=null;pe.loadMatchingFeature(Yr,Wn.bucketIndex,Wn.sourceLayerIndex,Wn.featureIndex,Ne,xe.layers,xe.availableImages,P,G,oe,function(ei,fi,pi){return Gn||(Gn=Ca(ei)),fi.queryIntersectsFeature(tt,ei,pi,Gn,pe.z,M.transform,Ee,M.pixelPosMatrix)})}},en=0;en<qt.length;en++)Gr(en);return Yr},Js.prototype.loadMatchingFeature=function(M,P,G,oe,pe,xe,Ee,Ne,tt,dt,wt){var qt=this.bucketLayerIDs[P];if(!xe||function(Wn,Gn){for(var ei=0;ei<Wn.length;ei++)if(Gn.indexOf(Wn[ei])>=0)return!0;return!1}(xe,qt)){var tr=this.sourceLayerCoder.decode(G),Kt=this.vtLayers[tr].feature(oe);if(pe.filter(new aa(this.tileID.overscaledZ),Kt))for(var ur=this.getId(Kt,tr),wr=0;wr<qt.length;wr++){var Fr=qt[wr];if(!(xe&&xe.indexOf(Fr)<0)){var Rr=Ne[Fr];if(Rr){var Yr={};void 0!==ur&&dt&&(Yr=dt.getState(Rr.sourceLayer||"_geojsonTileLayer",ur));var Gr=tt[Fr];Gr.paint=Oh(Gr.paint,Rr.paint,Kt,Yr,Ee),Gr.layout=Oh(Gr.layout,Rr.layout,Kt,Yr,Ee);var en=!wt||wt(Kt,Rr,Yr);if(en){var bn=new Cc(Kt,this.z,this.x,this.y,ur);bn.layer=Gr;var Sn=M[Fr];void 0===Sn&&(Sn=M[Fr]=[]),Sn.push({featureIndex:oe,feature:bn,intersectionZ:en})}}}}}},Js.prototype.lookupSymbolFeatures=function(M,P,G,oe,pe,xe,Ee,Ne){var tt={};this.loadVTLayers();for(var dt=Li(pe),wt=0,qt=M;wt<qt.length;wt+=1)this.loadMatchingFeature(tt,G,oe,qt[wt],dt,xe,Ee,Ne,P);return tt},Js.prototype.hasLayer=function(M){for(var P=0,G=this.bucketLayerIDs;P<G.length;P+=1)for(var oe=0,pe=G[P];oe<pe.length;oe+=1)if(M===pe[oe])return!0;return!1},Js.prototype.getId=function(M,P){var G=M.id;return this.promoteId&&"boolean"==typeof(G=M.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[P]])&&(G=Number(G)),G},nn("FeatureIndex",Js,{omit:["rawTileData","sourceLayerCoder"]});var Ro=function(M,P){this.tileID=M,this.uid=f(),this.uses=0,this.tileSize=P,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ro.prototype.registerFadeDuration=function(M){var P=M+this.timeAdded;P<N.now()||this.fadeEndTime&&P<this.fadeEndTime||(this.fadeEndTime=P)},Ro.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ro.prototype.loadVectorData=function(M,P,G){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var oe in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(dt,wt){var qt={};if(!wt)return qt;for(var tr=function(){var wr=ur[Kt],Fr=wr.layerIds.map(function(en){return wt.getLayer(en)}).filter(Boolean);if(0!==Fr.length){wr.layers=Fr,wr.stateDependentLayerIds&&(wr.stateDependentLayers=wr.stateDependentLayerIds.map(function(en){return Fr.filter(function(bn){return bn.id===en})[0]}));for(var Rr=0,Yr=Fr;Rr<Yr.length;Rr+=1)qt[Yr[Rr].id]=wr}},Kt=0,ur=dt;Kt<ur.length;Kt+=1)tr();return qt}(M.buckets,P.style),this.hasSymbolBuckets=!1,this.buckets){var pe=this.buckets[oe];if(pe instanceof ma){if(this.hasSymbolBuckets=!0,!G)break;pe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var xe in this.buckets){var Ee=this.buckets[xe];if(Ee instanceof ma&&Ee.hasRTLText){this.hasRTLText=!0,fo.isLoading()||fo.isLoaded()||"deferred"!==Ya()||na();break}}for(var Ne in this.queryPadding=0,this.buckets){var tt=this.buckets[Ne];this.queryPadding=Math.max(this.queryPadding,P.style.getLayer(Ne).queryRadius(tt))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new _e},Ro.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ro.prototype.getBucket=function(M){return this.buckets[M.id]},Ro.prototype.upload=function(M){for(var P in this.buckets){var G=this.buckets[P];G.uploadPending()&&G.upload(M)}var oe=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new fl(M,this.imageAtlas.image,oe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new fl(M,this.glyphAtlasImage,oe.ALPHA),this.glyphAtlasImage=null)},Ro.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},Ro.prototype.queryRenderedFeatures=function(M,P,G,oe,pe,xe,Ee,Ne,tt,dt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:oe,cameraQueryGeometry:pe,scale:xe,tileSize:this.tileSize,pixelPosMatrix:dt,transform:Ne,params:Ee,queryPadding:this.queryPadding*tt},M,P,G):{}},Ro.prototype.querySourceFeatures=function(M,P){var G=this.latestFeatureIndex;if(G&&G.rawTileData){var oe=G.loadVTLayers(),pe=P?P.sourceLayer:"",xe=oe._geojsonTileLayer||oe[pe];if(xe)for(var Ee=Li(P&&P.filter),Ne=this.tileID.canonical,tt=Ne.z,dt=Ne.x,wt=Ne.y,qt={z:tt,x:dt,y:wt},tr=0;tr<xe.length;tr++){var Kt=xe.feature(tr);if(Ee.filter(new aa(this.tileID.overscaledZ),Kt)){var ur=G.getId(Kt,pe),wr=new Cc(Kt,tt,dt,wt,ur);wr.tile=qt,M.push(wr)}}}},Ro.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ro.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ro.prototype.setExpiryData=function(M){var P=this.expirationTime;if(M.cacheControl){var G=C(M.cacheControl);G["max-age"]&&(this.expirationTime=Date.now()+1e3*G["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var oe=Date.now(),pe=!1;if(this.expirationTime>oe)pe=!1;else if(P)if(this.expirationTime<P)pe=!0;else{var xe=this.expirationTime-P;xe?this.expirationTime=oe+Math.max(xe,3e4):pe=!0}else pe=!0;pe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ro.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ro.prototype.setFeatureState=function(M,P){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(M).length){var G=this.latestFeatureIndex.loadVTLayers();for(var oe in this.buckets)if(P.style.hasLayer(oe)){var pe=this.buckets[oe],xe=pe.layers[0].sourceLayer||"_geojsonTileLayer",Ee=G[xe],Ne=M[xe];if(Ee&&Ne&&0!==Object.keys(Ne).length){pe.update(Ne,Ee,this.imageAtlas&&this.imageAtlas.patternPositions||{});var tt=P&&P.style&&P.style.getLayer(oe);tt&&(this.queryPadding=Math.max(this.queryPadding,tt.queryRadius(pe)))}}}},Ro.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ro.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()},Ro.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ro.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=N.now()+M},Ro.prototype.setDependencies=function(M,P){for(var G={},oe=0,pe=P;oe<pe.length;oe+=1)G[pe[oe]]=!0;this.dependencies[M]=G},Ro.prototype.hasDependency=function(M,P){for(var G=0,oe=M;G<oe.length;G+=1){var xe=this.dependencies[oe[G]];if(xe)for(var Ee=0,Ne=P;Ee<Ne.length;Ee+=1)if(xe[Ne[Ee]])return!0}return!1};var nl=self.performance,zh=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},nl.mark(this._marks.start)};zh.prototype.finish=function(){nl.mark(this._marks.end);var M=nl.getEntriesByName(this._marks.measure);return 0===M.length&&(nl.measure(this._marks.measure,this._marks.start,this._marks.end),M=nl.getEntriesByName(this._marks.measure),nl.clearMarks(this._marks.start),nl.clearMarks(this._marks.end),nl.clearMeasures(this._marks.measure)),M},e.Actor=Ll,e.AlphaImage=hl,e.CanonicalTileID=dl,e.CollisionBoxArray=_e,e.Color=dr,e.DEMData=Xs,e.DataConstantProperty=mi,e.DictionaryCoder=Sc,e.EXTENT=8192,e.ErrorEvent=De,e.EvaluationParameters=aa,e.Event=Ae,e.Evented=Oe,e.FeatureIndex=Js,e.FillBucket=Os,e.FillExtrusionBucket=Rs,e.ImageAtlas=$l,e.ImagePosition=yc,e.LineBucket=hs,e.LngLat=Fa,e.LngLatBounds=bo,e.MercatorCoordinate=pl,e.ONE_EM=24,e.OverscaledTileID=wo,e.Point=n,e.Point$1=n,e.Properties=Ao,e.Protobuf=gc,e.RGBAImage=us,e.RequestManager=ie,e.RequestPerformance=zh,e.ResourceType=xt,e.SegmentVector=Ht,e.SourceFeatureState=Dl,e.StructArrayLayout1ui2=q,e.StructArrayLayout2f1f2i16=bt,e.StructArrayLayout2i4=gs,e.StructArrayLayout3ui6=Ur,e.StructArrayLayout4i8=Oa,e.SymbolBucket=ma,e.Texture=fl,e.Tile=Ro,e.Transitionable=rs,e.Uniform1f=Jr,e.Uniform1i=gi,e.Uniform2f=Pn,e.Uniform3f=ri,e.Uniform4f=$n,e.UniformColor=ui,e.UniformMatrix4f=Ii,e.UnwrappedTileID=Ph,e.ValidationError=et,e.WritingMode=Ts,e.ZoomHistory=zi,e.add=function(M,P,G){return M[0]=P[0]+G[0],M[1]=P[1]+G[1],M[2]=P[2]+G[2],M},e.addDynamicAttributes=mu,e.asyncAll=function(M,P,G){if(!M.length)return G(null,[]);var oe=M.length,pe=new Array(M.length),xe=null;M.forEach(function(Ee,Ne){P(Ee,function(tt,dt){tt&&(xe=tt),pe[Ne]=dt,0==--oe&&G(xe,pe)})})},e.bezier=s,e.bindAll=m,e.browser=N,e.cacheEntryPossiblyAdded=function(M){++at>qe&&(M.getActor().send("enforceCacheSizeLimit",Fe),at=0)},e.clamp=c,e.clearTileCache=function(M){var P=self.caches.delete("mapbox-tiles");M&&P.catch(M).then(function(){return M()})},e.clipLine=vh,e.clone=function(M){var P=new cs(16);return P[0]=M[0],P[1]=M[1],P[2]=M[2],P[3]=M[3],P[4]=M[4],P[5]=M[5],P[6]=M[6],P[7]=M[7],P[8]=M[8],P[9]=M[9],P[10]=M[10],P[11]=M[11],P[12]=M[12],P[13]=M[13],P[14]=M[14],P[15]=M[15],P},e.clone$1=T,e.clone$2=function(M){var P=new cs(3);return P[0]=M[0],P[1]=M[1],P[2]=M[2],P},e.collisionCircleLayout=Yf,e.config=V,e.create=function(){var M=new cs(16);return cs!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},e.create$1=function(){var M=new cs(9);return cs!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},e.create$2=function(){var M=new cs(4);return cs!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},e.createCommonjsModule=i,e.createExpression=$t,e.createLayout=oa,e.createStyleLayer=function(M){return"custom"===M.type?new kp(M):new Tp[M.type](M)},e.cross=function(M,P,G){var oe=P[0],pe=P[1],xe=P[2],Ee=G[0],Ne=G[1],tt=G[2];return M[0]=pe*tt-xe*Ne,M[1]=xe*Ee-oe*tt,M[2]=oe*Ne-pe*Ee,M},e.deepEqual=function M(P,G){if(Array.isArray(P)){if(!Array.isArray(G)||P.length!==G.length)return!1;for(var oe=0;oe<P.length;oe++)if(!M(P[oe],G[oe]))return!1;return!0}if("object"==typeof P&&null!==P&&null!==G){if("object"!=typeof G||Object.keys(P).length!==Object.keys(G).length)return!1;for(var pe in P)if(!M(P[pe],G[pe]))return!1;return!0}return P===G},e.dot=function(M,P){return M[0]*P[0]+M[1]*P[1]+M[2]*P[2]},e.dot$1=function(M,P){return M[0]*P[0]+M[1]*P[1]+M[2]*P[2]+M[3]*P[3]},e.ease=a,e.emitValidationErrors=Ln,e.endsWith=w,e.enforceCacheSizeLimit=function(M){rt(),Le&&Le.then(function(P){P.keys().then(function(G){for(var oe=0;oe<G.length-M;oe++)P.delete(G[oe])})})},e.evaluateSizeForFeature=hh,e.evaluateSizeForZoom=fh,e.evaluateVariableOffset=_h,e.evented=Sa,e.extend=h,e.featureFilter=Li,e.filterObject=k,e.fromRotation=function(M,P){var G=Math.sin(P),oe=Math.cos(P);return M[0]=oe,M[1]=G,M[2]=0,M[3]=-G,M[4]=oe,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},e.getAnchorAlignment=hu,e.getAnchorJustification=du,e.getArrayBuffer=Et,e.getImage=We,e.getJSON=function(M,P){return it(h(M,{type:"json"}),P)},e.getRTLTextPluginStatus=Ya,e.getReferrer=Dt,e.getVideo=function(M,P){var G,oe,pe=self.document.createElement("video");pe.muted=!0,pe.onloadstart=function(){P(null,pe)};for(var xe=0;xe<M.length;xe++){var Ee=self.document.createElement("source");G=M[xe],oe=void 0,(oe=self.document.createElement("a")).href=G,(oe.protocol!==self.document.location.protocol||oe.host!==self.document.location.host)&&(pe.crossOrigin="Anonymous"),Ee.src=M[xe],pe.appendChild(Ee)}return{cancel:function(){}}},e.identity=ql,e.invert=function(M,P){var G=P[0],oe=P[1],pe=P[2],xe=P[3],Ee=P[4],Ne=P[5],tt=P[6],dt=P[7],wt=P[8],qt=P[9],tr=P[10],Kt=P[11],ur=P[12],wr=P[13],Fr=P[14],Rr=P[15],Yr=G*Ne-oe*Ee,Gr=G*tt-pe*Ee,en=G*dt-xe*Ee,bn=oe*tt-pe*Ne,Sn=oe*dt-xe*Ne,Wn=pe*dt-xe*tt,Gn=wt*wr-qt*ur,ei=wt*Fr-tr*ur,fi=wt*Rr-Kt*ur,pi=qt*Fr-tr*wr,ni=qt*Rr-Kt*wr,bi=tr*Rr-Kt*Fr,vi=Yr*bi-Gr*ni+en*pi+bn*fi-Sn*ei+Wn*Gn;return vi?(M[0]=(Ne*bi-tt*ni+dt*pi)*(vi=1/vi),M[1]=(pe*ni-oe*bi-xe*pi)*vi,M[2]=(wr*Wn-Fr*Sn+Rr*bn)*vi,M[3]=(tr*Sn-qt*Wn-Kt*bn)*vi,M[4]=(tt*fi-Ee*bi-dt*ei)*vi,M[5]=(G*bi-pe*fi+xe*ei)*vi,M[6]=(Fr*en-ur*Wn-Rr*Gr)*vi,M[7]=(wt*Wn-tr*en+Kt*Gr)*vi,M[8]=(Ee*ni-Ne*fi+dt*Gn)*vi,M[9]=(oe*fi-G*ni-xe*Gn)*vi,M[10]=(ur*Sn-wr*en+Rr*Yr)*vi,M[11]=(qt*en-wt*Sn-Kt*Yr)*vi,M[12]=(Ne*ei-Ee*pi-tt*Gn)*vi,M[13]=(G*pi-oe*ei+pe*Gn)*vi,M[14]=(wr*Gr-ur*bn-Fr*Yr)*vi,M[15]=(wt*bn-qt*Gr+tr*Yr)*vi,M):null},e.isChar=Rn,e.isMapboxURL=ce,e.keysDifference=function(M,P){var G=[];for(var oe in M)oe in P||G.push(oe);return G},e.makeRequest=it,e.mapObject=b,e.mercatorXfromLng=Lh,e.mercatorYfromLat=Dh,e.mercatorZfromAltitude=Ih,e.mul=Jc,e.multiply=ul,e.mvt=bl,e.normalize=function(M,P){var G=P[0],oe=P[1],pe=P[2],xe=G*G+oe*oe+pe*pe;return xe>0&&(xe=1/Math.sqrt(xe)),M[0]=P[0]*xe,M[1]=P[1]*xe,M[2]=P[2]*xe,M},e.number=Qn,e.offscreenCanvasSupported=pt,e.ortho=function(M,P,G,oe,pe,xe,Ee){var Ne=1/(P-G),tt=1/(oe-pe),dt=1/(xe-Ee);return M[0]=-2*Ne,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*tt,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*dt,M[11]=0,M[12]=(P+G)*Ne,M[13]=(pe+oe)*tt,M[14]=(Ee+xe)*dt,M[15]=1,M},e.parseGlyphPBF=function(M){return new gc(M).readFields(rp,[])},e.pbf=gc,e.performSymbolLayout=function(M,P,G,oe,pe,xe,Ee){M.createArrays(),M.tilePixelRatio=8192/(512*M.overscaling),M.compareText={},M.iconsNeedLinear=!1;var tt=M.layers[0].layout,dt=M.layers[0]._unevaluatedLayout._values,wt={};if("composite"===M.textSizeData.kind){var qt=M.textSizeData,Kt=qt.maxZoom;wt.compositeTextSizes=[dt["text-size"].possiblyEvaluate(new aa(qt.minZoom),Ee),dt["text-size"].possiblyEvaluate(new aa(Kt),Ee)]}if("composite"===M.iconSizeData.kind){var ur=M.iconSizeData,Fr=ur.maxZoom;wt.compositeIconSizes=[dt["icon-size"].possiblyEvaluate(new aa(ur.minZoom),Ee),dt["icon-size"].possiblyEvaluate(new aa(Fr),Ee)]}wt.layoutTextSize=dt["text-size"].possiblyEvaluate(new aa(M.zoom+1),Ee),wt.layoutIconSize=dt["icon-size"].possiblyEvaluate(new aa(M.zoom+1),Ee),wt.textMaxSize=dt["text-size"].possiblyEvaluate(new aa(18));for(var Rr=24*tt.get("text-line-height"),Yr="map"===tt.get("text-rotation-alignment")&&"point"!==tt.get("symbol-placement"),Gr=tt.get("text-keep-upright"),en=tt.get("text-size"),bn=function(){var Gn=Wn[Sn],ei=tt.get("text-font").evaluate(Gn,{},Ee).join(","),fi=en.evaluate(Gn,{},Ee),pi=wt.layoutTextSize.evaluate(Gn,{},Ee),ni=wt.layoutIconSize.evaluate(Gn,{},Ee),bi={horizontal:{},vertical:void 0},vi=Gn.text,di=[0,0];if(vi){var ia=vi.toString(),ea=24*tt.get("text-letter-spacing").evaluate(Gn,{},Ee),ha=function(qi){for(var sa=0,Qa=qi;sa<Qa.length;sa+=1)if(!Pi(Qa[sa].charCodeAt(0)))return!1;return!0}(ia)?ea:0,Ei=tt.get("text-anchor").evaluate(Gn,{},Ee),ta=tt.get("text-variable-anchor");if(!ta){var La=tt.get("text-radial-offset").evaluate(Gn,{},Ee);di=La?_h(Ei,[24*La,pu]):tt.get("text-offset").evaluate(Gn,{},Ee).map(function(qi){return 24*qi})}var ka=Yr?"center":tt.get("text-justify").evaluate(Gn,{},Ee),Ba=tt.get("symbol-placement"),Ta="point"===Ba?24*tt.get("text-max-width").evaluate(Gn,{},Ee):0,ko=function(){M.allowVerticalPlacement&&ji(ia)&&(bi.vertical=xc(vi,P,G,pe,ei,Ta,Rr,Ei,"left",ha,di,Ts.vertical,!0,Ba,pi,fi))};if(!Yr&&ta){for(var Na="auto"===ka?ta.map(function(qi){return du(qi)}):[ka],Go=!1,zo=0;zo<Na.length;zo++){var jo=Na[zo];if(!bi.horizontal[jo])if(Go)bi.horizontal[jo]=bi.horizontal[0];else{var as=xc(vi,P,G,pe,ei,Ta,Rr,"center",jo,ha,di,Ts.horizontal,!1,Ba,pi,fi);as&&(bi.horizontal[jo]=as,Go=1===as.positionedLines.length)}}ko()}else{"auto"===ka&&(ka=du(Ei));var Ko=xc(vi,P,G,pe,ei,Ta,Rr,Ei,ka,ha,di,Ts.horizontal,!1,Ba,pi,fi);Ko&&(bi.horizontal[ka]=Ko),ko(),ji(ia)&&Yr&&Gr&&(bi.vertical=xc(vi,P,G,pe,ei,Ta,Rr,Ei,ka,ha,di,Ts.vertical,!1,Ba,pi,fi))}}var qi,sa,$a,os,Qo,To=void 0,Vo=!1;if(Gn.icon&&Gn.icon.name){var po=oe[Gn.icon.name];po&&(qi=pe[Gn.icon.name],sa=tt.get("icon-offset").evaluate(Gn,{},Ee),$a=hu(tt.get("icon-anchor").evaluate(Gn,{},Ee)),To={image:qi,top:Qo=sa[1]-qi.displaySize[1]*$a.verticalAlign,bottom:Qo+qi.displaySize[1],left:os=sa[0]-qi.displaySize[0]*$a.horizontalAlign,right:os+qi.displaySize[0]},Vo=po.sdf,void 0===M.sdfIcons?M.sdfIcons=po.sdf:M.sdfIcons!==po.sdf&&A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(po.pixelRatio!==M.pixelRatio||0!==tt.get("icon-rotate").constantOr(1))&&(M.iconsNeedLinear=!0))}var So=wh(bi.horizontal)||bi.vertical;M.iconsInText=!!So&&So.iconsInText,(So||To)&&function(qi,sa,Qa,$a,Wa,ja,fa,eo,os,_s,Qo){var zs=ja.textMaxSize.evaluate(sa,{});void 0===zs&&(zs=fa);var Ks,Fo=qi.layers[0].layout,Fs=Fo.get("icon-offset").evaluate(sa,{},Qo),Bs=wh(Qa.horizontal),Ns=fa/24,_u=qi.tilePixelRatio*Ns,Il=qi.tilePixelRatio*zs/24,Ec=qi.tilePixelRatio*eo,ml=qi.tilePixelRatio*Fo.get("symbol-spacing"),Lc=Fo.get("text-padding")*qi.tilePixelRatio,Dc=Fo.get("icon-padding")*qi.tilePixelRatio,Ic=Fo.get("text-max-angle")/180*Math.PI,Pc="map"===Fo.get("text-rotation-alignment")&&"point"!==Fo.get("symbol-placement"),il="map"===Fo.get("icon-rotation-alignment")&&"point"!==Fo.get("symbol-placement"),Pl=Fo.get("symbol-placement"),Oc=ml/2,Ol=Fo.get("icon-text-fit");$a&&"none"!==Ol&&(qi.allowVerticalPlacement&&Qa.vertical&&(Ks=uh($a,Qa.vertical,Ol,Fo.get("icon-text-fit-padding"),Fs,Ns)),Bs&&($a=uh($a,Bs,Ol,Fo.get("icon-text-fit-padding"),Fs,Ns)));var al=function(Sp,sc){sc.x<0||sc.x>=8192||sc.y<0||sc.y>=8192||function(so,js,Cp,ol,Mu,jh,Uc,qs,Hc,lc,qc,Yc,Au,Vh,cc,Uh,Hh,qh,Yh,Gh,Ms,Gc,Zh,Ys,Ep){var Su,vl,jl,Vl,Ul,Hl=so.addToLineVertexArray(js,Cp),Wh=0,Xh=0,Jh=0,Kh=0,Cu=-1,Eu=-1,Qs={},Qh=Or(""),Lu=0,Du=0;if(void 0===qs._unevaluatedLayout.getValue("text-radial-offset")?(Lu=(Su=qs.layout.get("text-offset").evaluate(Ms,{},Ys).map(function(hc){return 24*hc}))[0],Du=Su[1]):(Lu=24*qs.layout.get("text-radial-offset").evaluate(Ms,{},Ys),Du=pu),so.allowVerticalPlacement&&ol.vertical){var $h=qs.layout.get("text-rotate").evaluate(Ms,{},Ys)+90;Vl=new Tc(Hc,js,lc,qc,Yc,ol.vertical,Au,Vh,cc,$h),Uc&&(Ul=new Tc(Hc,js,lc,qc,Yc,Uc,Hh,qh,cc,$h))}if(Mu){var Iu=qs.layout.get("icon-rotate").evaluate(Ms,{}),ef="none"!==qs.layout.get("icon-text-fit"),tf=yh(Mu,Iu,Zh,ef),Pu=Uc?yh(Uc,Iu,Zh,ef):void 0;jl=new Tc(Hc,js,lc,qc,Yc,Mu,Hh,qh,!1,Iu),Wh=4*tf.length;var rf=so.iconSizeData,uc=null;"source"===rf.kind?(uc=[128*qs.layout.get("icon-size").evaluate(Ms,{})])[0]>32640&&A(so.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===rf.kind&&((uc=[128*Gc.compositeIconSizes[0].evaluate(Ms,{},Ys),128*Gc.compositeIconSizes[1].evaluate(Ms,{},Ys)])[0]>32640||uc[1]>32640)&&A(so.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),so.addSymbols(so.icon,tf,uc,Gh,Yh,Ms,!1,js,Hl.lineStartIndex,Hl.lineLength,-1,Ys),Cu=so.icon.placedSymbolArray.length-1,Pu&&(Xh=4*Pu.length,so.addSymbols(so.icon,Pu,uc,Gh,Yh,Ms,Ts.vertical,js,Hl.lineStartIndex,Hl.lineLength,-1,Ys),Eu=so.icon.placedSymbolArray.length-1)}for(var nf in ol.horizontal){var Zc=ol.horizontal[nf];if(!vl){Qh=Or(Zc.text);var Dp=qs.layout.get("text-rotate").evaluate(Ms,{},Ys);vl=new Tc(Hc,js,lc,qc,Yc,Zc,Au,Vh,cc,Dp)}var af=1===Zc.positionedLines.length;if(Jh+=bh(so,js,Zc,jh,qs,cc,Ms,Uh,Hl,ol.vertical?Ts.horizontal:Ts.horizontalOnly,af?Object.keys(ol.horizontal):[nf],Qs,Cu,Gc,Ys),af)break}ol.vertical&&(Kh+=bh(so,js,ol.vertical,jh,qs,cc,Ms,Uh,Hl,Ts.vertical,["vertical"],Qs,Eu,Gc,Ys));var Ip=vl?vl.boxStartIndex:so.collisionBoxArray.length,Pp=vl?vl.boxEndIndex:so.collisionBoxArray.length,Op=Vl?Vl.boxStartIndex:so.collisionBoxArray.length,Rp=Vl?Vl.boxEndIndex:so.collisionBoxArray.length,zp=jl?jl.boxStartIndex:so.collisionBoxArray.length,Fp=jl?jl.boxEndIndex:so.collisionBoxArray.length,Bp=Ul?Ul.boxStartIndex:so.collisionBoxArray.length,Np=Ul?Ul.boxEndIndex:so.collisionBoxArray.length,Gs=-1,Wc=function(hc,sf){return hc&&hc.circleDiameter?Math.max(hc.circleDiameter,sf):sf};Gs=Wc(vl,Gs),Gs=Wc(Vl,Gs),Gs=Wc(jl,Gs);var of=(Gs=Wc(Ul,Gs))>-1?1:0;of&&(Gs*=Ep/24),so.glyphOffsetArray.length>=ma.MAX_GLYPHS&&A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ms.sortKey&&so.addToSortKeyRanges(so.symbolInstances.length,Ms.sortKey),so.symbolInstances.emplaceBack(js.x,js.y,Qs.right>=0?Qs.right:-1,Qs.center>=0?Qs.center:-1,Qs.left>=0?Qs.left:-1,Qs.vertical||-1,Cu,Eu,Qh,Ip,Pp,Op,Rp,zp,Fp,Bp,Np,lc,Jh,Kh,Wh,Xh,of,0,Au,Lu,Du,Gs)}(qi,sc,Sp,Qa,$a,Wa,Ks,qi.layers[0],qi.collisionBoxArray,sa.index,sa.sourceLayerIndex,qi.index,_u,Lc,Pc,os,Ec,Dc,il,Fs,sa,ja,_s,Qo,fa)};if("line"===Pl)for(var rc=0,Rc=vh(sa.geometry,0,0,8192,8192);rc<Rc.length;rc+=1)for(var zc=Rc[rc],nc=0,Bc=cp(zc,ml,Ic,Qa.vertical||Bs,$a,24,Il,qi.overscaling,8192);nc<Bc.length;nc+=1){var ic=Bc[nc];Bs&&pp(qi,Bs.text,Oc,ic)||al(zc,ic)}else if("line-center"===Pl)for(var ac=0,jc=sa.geometry;ac<jc.length;ac+=1){var Rl=jc[ac];if(Rl.length>1){var zl=lp(Rl,Ic,Qa.vertical||Bs,$a,24,Il);zl&&al(Rl,zl)}}else if("Polygon"===sa.type)for(var Fl=0,Vc=au(sa.geometry,0);Fl<Vc.length;Fl+=1){var Bl=Vc[Fl],oc=hp(Bl,16);al(Bl[0],new Ml(oc.x,oc.y,0))}else if("LineString"===sa.type)for(var Nl=0,Fh=sa.geometry;Nl<Fh.length;Nl+=1){var bu=Fh[Nl];al(bu,new Ml(bu[0].x,bu[0].y,0))}else if("Point"===sa.type)for(var wu=0,Bh=sa.geometry;wu<Bh.length;wu+=1)for(var ku=0,Nh=Bh[wu];ku<Nh.length;ku+=1){var Tu=Nh[ku];al([Tu],new Ml(Tu.x,Tu.y,0))}}(M,Gn,bi,To,oe,wt,pi,ni,di,Vo,Ee)},Sn=0,Wn=M.features;Sn<Wn.length;Sn+=1)bn();xe&&M.generateCollisionDebugBuffers()},e.perspective=function(M,P,G,oe,pe){var xe,Ee=1/Math.tan(P/2);return M[0]=Ee/G,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Ee,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,null!=pe&&pe!==1/0?(M[10]=(pe+oe)*(xe=1/(oe-pe)),M[14]=2*pe*oe*xe):(M[10]=-1,M[14]=-2*oe),M},e.pick=function(M,P){for(var G={},oe=0;oe<P.length;oe++){var pe=P[oe];pe in M&&(G[pe]=M[pe])}return G},e.plugin=fo,e.polygonIntersectsPolygon=Xo,e.postMapLoadEvent=Pe,e.postTurnstileEvent=ke,e.potpack=oh,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=nn,e.registerForPluginStateChange=function(M){return M({pluginStatus:ki,pluginURL:ya}),Sa.on("pluginStateChange",M),M},e.rotate=function(M,P,G){var oe=P[0],pe=P[1],xe=P[2],Ee=P[3],Ne=Math.sin(G),tt=Math.cos(G);return M[0]=oe*tt+xe*Ne,M[1]=pe*tt+Ee*Ne,M[2]=oe*-Ne+xe*tt,M[3]=pe*-Ne+Ee*tt,M},e.rotateX=function(M,P,G){var oe=Math.sin(G),pe=Math.cos(G),xe=P[4],Ee=P[5],Ne=P[6],tt=P[7],dt=P[8],wt=P[9],qt=P[10],tr=P[11];return P!==M&&(M[0]=P[0],M[1]=P[1],M[2]=P[2],M[3]=P[3],M[12]=P[12],M[13]=P[13],M[14]=P[14],M[15]=P[15]),M[4]=xe*pe+dt*oe,M[5]=Ee*pe+wt*oe,M[6]=Ne*pe+qt*oe,M[7]=tt*pe+tr*oe,M[8]=dt*pe-xe*oe,M[9]=wt*pe-Ee*oe,M[10]=qt*pe-Ne*oe,M[11]=tr*pe-tt*oe,M},e.rotateZ=function(M,P,G){var oe=Math.sin(G),pe=Math.cos(G),xe=P[0],Ee=P[1],Ne=P[2],tt=P[3],dt=P[4],wt=P[5],qt=P[6],tr=P[7];return P!==M&&(M[8]=P[8],M[9]=P[9],M[10]=P[10],M[11]=P[11],M[12]=P[12],M[13]=P[13],M[14]=P[14],M[15]=P[15]),M[0]=xe*pe+dt*oe,M[1]=Ee*pe+wt*oe,M[2]=Ne*pe+qt*oe,M[3]=tt*pe+tr*oe,M[4]=dt*pe-xe*oe,M[5]=wt*pe-Ee*oe,M[6]=qt*pe-Ne*oe,M[7]=tr*pe-tt*oe,M},e.scale=function(M,P,G){var oe=G[0],pe=G[1],xe=G[2];return M[0]=P[0]*oe,M[1]=P[1]*oe,M[2]=P[2]*oe,M[3]=P[3]*oe,M[4]=P[4]*pe,M[5]=P[5]*pe,M[6]=P[6]*pe,M[7]=P[7]*pe,M[8]=P[8]*xe,M[9]=P[9]*xe,M[10]=P[10]*xe,M[11]=P[11]*xe,M[12]=P[12],M[13]=P[13],M[14]=P[14],M[15]=P[15],M},e.scale$1=function(M,P,G){return M[0]=P[0]*G,M[1]=P[1]*G,M[2]=P[2]*G,M[3]=P[3]*G,M},e.scale$2=function(M,P,G){return M[0]=P[0]*G,M[1]=P[1]*G,M[2]=P[2]*G,M},e.setCacheLimits=function(M,P){Fe=M,qe=P},e.setRTLTextPlugin=function(M,P,G){if(void 0===G&&(G=!1),ki===Qi||ki===qa||ki===ts)throw new Error("setRTLTextPlugin cannot be called multiple times.");ya=N.resolveURL(M),ki=Qi,xo=P,Zi(),G||na()},e.sphericalToCartesian=function(M){var P=M[0],G=M[1],oe=M[2];return G+=90,G*=Math.PI/180,oe*=Math.PI/180,{x:P*Math.cos(G)*Math.sin(oe),y:P*Math.sin(G)*Math.sin(oe),z:P*Math.cos(oe)}},e.sqrLen=function(M){var P=M[0],G=M[1];return P*P+G*G},e.styleSpec=Ie,e.sub=function(M,P,G){return M[0]=P[0]-G[0],M[1]=P[1]-G[1],M[2]=P[2]-G[2],M},e.symbolSize=sp,e.transformMat3=function(M,P,G){var oe=P[0],pe=P[1],xe=P[2];return M[0]=oe*G[0]+pe*G[3]+xe*G[6],M[1]=oe*G[1]+pe*G[4]+xe*G[7],M[2]=oe*G[2]+pe*G[5]+xe*G[8],M},e.transformMat4=tl,e.translate=function(M,P,G){var oe,pe,xe,Ee,Ne,tt,dt,wt,qt,tr,Kt,ur,wr=G[0],Fr=G[1],Rr=G[2];return P===M?(M[12]=P[0]*wr+P[4]*Fr+P[8]*Rr+P[12],M[13]=P[1]*wr+P[5]*Fr+P[9]*Rr+P[13],M[14]=P[2]*wr+P[6]*Fr+P[10]*Rr+P[14],M[15]=P[3]*wr+P[7]*Fr+P[11]*Rr+P[15]):(pe=P[1],xe=P[2],Ee=P[3],Ne=P[4],tt=P[5],dt=P[6],wt=P[7],qt=P[8],tr=P[9],Kt=P[10],ur=P[11],M[0]=oe=P[0],M[1]=pe,M[2]=xe,M[3]=Ee,M[4]=Ne,M[5]=tt,M[6]=dt,M[7]=wt,M[8]=qt,M[9]=tr,M[10]=Kt,M[11]=ur,M[12]=oe*wr+Ne*Fr+qt*Rr+P[12],M[13]=pe*wr+tt*Fr+tr*Rr+P[13],M[14]=xe*wr+dt*Fr+Kt*Rr+P[14],M[15]=Ee*wr+wt*Fr+ur*Rr+P[15]),M},e.triggerPluginCompletionEvent=ho,e.uniqueId=f,e.validateCustomStyleLayer=function(M){var P=[],G=M.id;return void 0===G&&P.push({message:"layers."+G+': missing required property "id"'}),void 0===M.render&&P.push({message:"layers."+G+': missing required method "render"'}),M.renderingMode&&"2d"!==M.renderingMode&&"3d"!==M.renderingMode&&P.push({message:"layers."+G+': property "renderingMode" must be either "2d" or "3d"'}),P},e.validateLight=dn,e.validateStyle=$r,e.values=function(M){var P=[];for(var G in M)P.push(M[G]);return P},e.vectorTile=bl,e.version="1.10.1",e.warnOnce=A,e.webpSupported=Q,e.window=self,e.wrap=u}),t(0,function(e){function i(Ae){var De=typeof Ae;if("number"===De||"boolean"===De||"string"===De||null==Ae)return JSON.stringify(Ae);if(Array.isArray(Ae)){for(var Oe="[",Ie=0,et=Ae;Ie<et.length;Ie+=1)Oe+=i(et[Ie])+",";return Oe+"]"}for(var ct=Object.keys(Ae).sort(),vt="{",ft=0;ft<ct.length;ft++)vt+=JSON.stringify(ct[ft])+":"+i(Ae[ct[ft]])+",";return vt+"}"}function r(Ae){for(var De="",Oe=0,Ie=e.refProperties;Oe<Ie.length;Oe+=1)De+="/"+i(Ae[Ie[Oe]]);return De}var o=function(Ae){this.keyCache={},Ae&&this.replace(Ae)};o.prototype.replace=function(Ae){this._layerConfigs={},this._layers={},this.update(Ae,[])},o.prototype.update=function(Ae,De){for(var Oe=this,Ie=0,et=Ae;Ie<et.length;Ie+=1){var ct=et[Ie];this._layerConfigs[ct.id]=ct;var vt=this._layers[ct.id]=e.createStyleLayer(ct);vt._featureFilter=e.featureFilter(vt.filter),this.keyCache[ct.id]&&delete this.keyCache[ct.id]}for(var ft=0,It=De;ft<It.length;ft+=1){var ut=It[ft];delete this.keyCache[ut],delete this._layerConfigs[ut],delete this._layers[ut]}this.familiesBySource={};for(var Ot=0,Rt=function(ht,Mt){for(var Nt={},Zt=0;Zt<ht.length;Zt++){var or=Mt&&Mt[ht[Zt].id]||r(ht[Zt]);Mt&&(Mt[ht[Zt].id]=or);var Wt=Nt[or];Wt||(Wt=Nt[or]=[]),Wt.push(ht[Zt])}var er=[];for(var cr in Nt)er.push(Nt[cr]);return er}(e.values(this._layerConfigs),this.keyCache);Ot<Rt.length;Ot+=1){var $e=Rt[Ot].map(function(ht){return Oe._layers[ht.id]}),yt=$e[0];if("none"!==yt.visibility){var Bt=yt.source||"",Ut=this.familiesBySource[Bt];Ut||(Ut=this.familiesBySource[Bt]={});var Qt=yt.sourceLayer||"_geojsonTileLayer",Re=Ut[Qt];Re||(Re=Ut[Qt]=[]),Re.push($e)}}};var n=function(Ae){var De={},Oe=[];for(var Ie in Ae){var et=Ae[Ie],ct=De[Ie]={};for(var vt in et){var ft=et[+vt];if(ft&&0!==ft.bitmap.width&&0!==ft.bitmap.height){var It={x:0,y:0,w:ft.bitmap.width+2,h:ft.bitmap.height+2};Oe.push(It),ct[vt]={rect:It,metrics:ft.metrics}}}}var ut=e.potpack(Oe),$e=new e.AlphaImage({width:ut.w||1,height:ut.h||1});for(var yt in Ae){var Bt=Ae[yt];for(var Ut in Bt){var Qt=Bt[+Ut];if(Qt&&0!==Qt.bitmap.width&&0!==Qt.bitmap.height){var Re=De[yt][Ut].rect;e.AlphaImage.copy(Qt.bitmap,$e,{x:0,y:0},{x:Re.x+1,y:Re.y+1},Qt.bitmap)}}}this.image=$e,this.positions=De};e.register("GlyphAtlas",n);var p=function(Ae){this.tileID=new e.OverscaledTileID(Ae.tileID.overscaledZ,Ae.tileID.wrap,Ae.tileID.canonical.z,Ae.tileID.canonical.x,Ae.tileID.canonical.y),this.uid=Ae.uid,this.zoom=Ae.zoom,this.pixelRatio=Ae.pixelRatio,this.tileSize=Ae.tileSize,this.source=Ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ae.showCollisionBoxes,this.collectResourceTiming=!!Ae.collectResourceTiming,this.returnDependencies=!!Ae.returnDependencies,this.promoteId=Ae.promoteId};function s(Ae,De,Oe){for(var Ie=new e.EvaluationParameters(De),et=0,ct=Ae;et<ct.length;et+=1)ct[et].recalculate(Ie,Oe)}function a(Ae,De){var Oe=e.getArrayBuffer(Ae.request,function(Ie,et,ct,vt){Ie?De(Ie):et&&De(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(et)),rawData:et,cacheControl:ct,expires:vt})});return function(){Oe.cancel(),De()}}p.prototype.parse=function(Ae,De,Oe,Ie,et){var ct=this;this.status="parsing",this.data=Ae,this.collisionBoxArray=new e.CollisionBoxArray;var vt=new e.DictionaryCoder(Object.keys(Ae.layers).sort()),ft=new e.FeatureIndex(this.tileID,this.promoteId);ft.bucketLayerIDs=[];var It,ut,Ot,Rt,$e={},yt={featureIndex:ft,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Oe},Bt=De.familiesBySource[this.source];for(var Ut in Bt){var Qt=Ae.layers[Ut];if(Qt){1===Qt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Ut+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Re=vt.encode(Ut),ht=[],Mt=0;Mt<Qt.length;Mt++){var Nt=Qt.feature(Mt),Zt=ft.getId(Nt,Ut);ht.push({feature:Nt,id:Zt,index:Mt,sourceLayerIndex:Re})}for(var or=0,Wt=Bt[Ut];or<Wt.length;or+=1){var er=Wt[or],cr=er[0];cr.minzoom&&this.zoom<Math.floor(cr.minzoom)||cr.maxzoom&&this.zoom>=cr.maxzoom||"none"!==cr.visibility&&(s(er,this.zoom,Oe),($e[cr.id]=cr.createBucket({index:ft.bucketLayerIDs.length,layers:er,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Re,sourceID:this.source})).populate(ht,yt,this.tileID.canonical),ft.bucketLayerIDs.push(er.map(function(br){return br.id})))}}}var _r=e.mapObject(yt.glyphDependencies,function(br){return Object.keys(br).map(Number)});Object.keys(_r).length?Ie.send("getGlyphs",{uid:this.uid,stacks:_r},function(br,Nr){It||(It=br,ut=Nr,pr.call(ct))}):ut={};var xr=Object.keys(yt.iconDependencies);xr.length?Ie.send("getImages",{icons:xr,source:this.source,tileID:this.tileID,type:"icons"},function(br,Nr){It||(It=br,Ot=Nr,pr.call(ct))}):Ot={};var dr=Object.keys(yt.patternDependencies);function pr(){if(It)return et(It);if(ut&&Ot&&Rt){var br=new n(ut),Nr=new e.ImageAtlas(Ot,Rt);for(var kr in $e){var Hr=$e[kr];Hr instanceof e.SymbolBucket?(s(Hr.layers,this.zoom,Oe),e.performSymbolLayout(Hr,ut,br.positions,Ot,Nr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Hr.hasPattern&&(Hr instanceof e.LineBucket||Hr instanceof e.FillBucket||Hr instanceof e.FillExtrusionBucket)&&(s(Hr.layers,this.zoom,Oe),Hr.addFeatures(yt,this.tileID.canonical,Nr.patternPositions))}this.status="done",et(null,{buckets:e.values($e).filter(function(an){return!an.isEmpty()}),featureIndex:ft,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:br.image,imageAtlas:Nr,glyphMap:this.returnDependencies?ut:null,iconMap:this.returnDependencies?Ot:null,glyphPositions:this.returnDependencies?br.positions:null})}}dr.length?Ie.send("getImages",{icons:dr,source:this.source,tileID:this.tileID,type:"patterns"},function(br,Nr){It||(It=br,Rt=Nr,pr.call(ct))}):Rt={},pr.call(this)};var c=function(Ae,De,Oe,Ie){this.actor=Ae,this.layerIndex=De,this.availableImages=Oe,this.loadVectorData=Ie||a,this.loading={},this.loaded={}};c.prototype.loadTile=function(Ae,De){var Oe=this,Ie=Ae.uid;this.loading||(this.loading={});var et=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new e.RequestPerformance(Ae.request),ct=this.loading[Ie]=new p(Ae);ct.abort=this.loadVectorData(Ae,function(vt,ft){if(delete Oe.loading[Ie],vt||!ft)return ct.status="done",Oe.loaded[Ie]=ct,De(vt);var It=ft.rawData,ut={};ft.expires&&(ut.expires=ft.expires),ft.cacheControl&&(ut.cacheControl=ft.cacheControl);var Ot={};if(et){var Rt=et.finish();Rt&&(Ot.resourceTiming=JSON.parse(JSON.stringify(Rt)))}ct.vectorTile=ft.vectorTile,ct.parse(ft.vectorTile,Oe.layerIndex,Oe.availableImages,Oe.actor,function($e,yt){if($e||!yt)return De($e);De(null,e.extend({rawTileData:It.slice(0)},yt,ut,Ot))}),Oe.loaded=Oe.loaded||{},Oe.loaded[Ie]=ct})},c.prototype.reloadTile=function(Ae,De){var Oe=this,Ie=this.loaded,et=Ae.uid,ct=this;if(Ie&&Ie[et]){var vt=Ie[et];vt.showCollisionBoxes=Ae.showCollisionBoxes;var ft=function(It,ut){var Ot=vt.reloadCallback;Ot&&(delete vt.reloadCallback,vt.parse(vt.vectorTile,ct.layerIndex,Oe.availableImages,ct.actor,Ot)),De(It,ut)};"parsing"===vt.status?vt.reloadCallback=ft:"done"===vt.status&&(vt.vectorTile?vt.parse(vt.vectorTile,this.layerIndex,this.availableImages,this.actor,ft):ft())}},c.prototype.abortTile=function(Ae,De){var Oe=this.loading,Ie=Ae.uid;Oe&&Oe[Ie]&&Oe[Ie].abort&&(Oe[Ie].abort(),delete Oe[Ie]),De()},c.prototype.removeTile=function(Ae,De){var Oe=this.loaded,Ie=Ae.uid;Oe&&Oe[Ie]&&delete Oe[Ie],De()};var u=e.window.ImageBitmap,h=function(){this.loaded={}};h.prototype.loadTile=function(Ae,De){var Oe=Ae.uid,Ie=Ae.encoding,et=Ae.rawImageData,ct=u&&et instanceof u?this.getImageData(et):et,vt=new e.DEMData(Oe,ct,Ie);this.loaded=this.loaded||{},this.loaded[Oe]=vt,De(null,vt)},h.prototype.getImageData=function(Ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ae.width,Ae.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ae.width,this.offscreenCanvas.height=Ae.height,this.offscreenCanvasContext.drawImage(Ae,0,0,Ae.width,Ae.height);var De=this.offscreenCanvasContext.getImageData(-1,-1,Ae.width+2,Ae.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:De.width,height:De.height},De.data)},h.prototype.removeTile=function(Ae){var De=this.loaded,Oe=Ae.uid;De&&De[Oe]&&delete De[Oe]};var v=function Ae(De,Oe){var Ie,et=De&&De.type;if("FeatureCollection"===et)for(Ie=0;Ie<De.features.length;Ie++)Ae(De.features[Ie],Oe);else if("GeometryCollection"===et)for(Ie=0;Ie<De.geometries.length;Ie++)Ae(De.geometries[Ie],Oe);else if("Feature"===et)Ae(De.geometry,Oe);else if("Polygon"===et)f(De.coordinates,Oe);else if("MultiPolygon"===et)for(Ie=0;Ie<De.coordinates.length;Ie++)f(De.coordinates[Ie],Oe);return De};function f(Ae,De){if(0!==Ae.length){l(Ae[0],De);for(var Oe=1;Oe<Ae.length;Oe++)l(Ae[Oe],!De)}}function l(Ae,De){for(var Oe=0,Ie=0,et=Ae.length,ct=et-1;Ie<et;ct=Ie++)Oe+=(Ae[Ie][0]-Ae[ct][0])*(Ae[ct][1]+Ae[Ie][1]);Oe>=0!=!!De&&Ae.reverse()}var x=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,m=function(Ae){this._feature=Ae,this.extent=e.EXTENT,this.type=Ae.type,this.properties=Ae.tags,"id"in Ae&&!isNaN(Ae.id)&&(this.id=parseInt(Ae.id,10))};m.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Ae=[],De=0,Oe=this._feature.geometry;De<Oe.length;De+=1){var Ie=Oe[De];Ae.push([new e.Point$1(Ie[0],Ie[1])])}return Ae}for(var et=[],ct=0,vt=this._feature.geometry;ct<vt.length;ct+=1){for(var ft=[],It=0,ut=vt[ct];It<ut.length;It+=1){var Ot=ut[It];ft.push(new e.Point$1(Ot[0],Ot[1]))}et.push(ft)}return et},m.prototype.toGeoJSON=function(Ae,De,Oe){return x.call(this,Ae,De,Oe)};var w=function(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Ae.length,this._features=Ae};w.prototype.feature=function(Ae){return new m(this._features[Ae])};var b=e.vectorTile.VectorTileFeature,k=T;function T(Ae,De){this.options=De||{},this.features=Ae,this.length=Ae.length}function L(Ae,De){this.id="number"==typeof Ae.id?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=1===Ae.type?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=De||4096}T.prototype.feature=function(Ae){return new L(this.features[Ae],this.options.extent)},L.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var De=0;De<Ae.length;De++){for(var Oe=Ae[De],Ie=[],et=0;et<Oe.length;et++)Ie.push(new e.Point$1(Oe[et][0],Oe[et][1]));this.geometry.push(Ie)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,De=1/0,Oe=-1/0,Ie=1/0,et=-1/0,ct=0;ct<Ae.length;ct++)for(var vt=Ae[ct],ft=0;ft<vt.length;ft++){var It=vt[ft];De=Math.min(De,It.x),Oe=Math.max(Oe,It.x),Ie=Math.min(Ie,It.y),et=Math.max(et,It.y)}return[De,Ie,Oe,et]},L.prototype.toGeoJSON=b.prototype.toGeoJSON;var A=C,S=k;function C(Ae){var De=new e.pbf;return function(Oe,Ie){for(var et in Oe.layers)Ie.writeMessage(3,R,Oe.layers[et])}(Ae,De),De.finish()}function R(Ae,De){var Oe;De.writeVarintField(15,Ae.version||1),De.writeStringField(1,Ae.name||""),De.writeVarintField(5,Ae.extent||4096);var Ie={keys:[],values:[],keycache:{},valuecache:{}};for(Oe=0;Oe<Ae.length;Oe++)Ie.feature=Ae.feature(Oe),De.writeMessage(2,F,Ie);var et=Ie.keys;for(Oe=0;Oe<et.length;Oe++)De.writeStringField(3,et[Oe]);var ct=Ie.values;for(Oe=0;Oe<ct.length;Oe++)De.writeMessage(4,Y,ct[Oe])}function F(Ae,De){var Oe=Ae.feature;void 0!==Oe.id&&De.writeVarintField(1,Oe.id),De.writeMessage(2,H,Ae),De.writeVarintField(3,Oe.type),De.writeMessage(4,Z,Oe)}function H(Ae,De){var Oe=Ae.feature,Ie=Ae.keys,et=Ae.values,ct=Ae.keycache,vt=Ae.valuecache;for(var ft in Oe.properties){var It=ct[ft];void 0===It&&(Ie.push(ft),ct[ft]=It=Ie.length-1),De.writeVarint(It);var ut=Oe.properties[ft],Ot=typeof ut;"string"!==Ot&&"boolean"!==Ot&&"number"!==Ot&&(ut=JSON.stringify(ut));var Rt=Ot+":"+ut,$e=vt[Rt];void 0===$e&&(et.push(ut),vt[Rt]=$e=et.length-1),De.writeVarint($e)}}function U(Ae,De){return(De<<3)+(7&Ae)}function X(Ae){return Ae<<1^Ae>>31}function Z(Ae,De){for(var Oe=Ae.loadGeometry(),Ie=Ae.type,et=0,ct=0,vt=Oe.length,ft=0;ft<vt;ft++){var It=Oe[ft],ut=1;1===Ie&&(ut=It.length),De.writeVarint(U(1,ut));for(var Ot=3===Ie?It.length-1:It.length,Rt=0;Rt<Ot;Rt++){1===Rt&&1!==Ie&&De.writeVarint(U(2,Ot-1));var $e=It[Rt].x-et,yt=It[Rt].y-ct;De.writeVarint(X($e)),De.writeVarint(X(yt)),et+=$e,ct+=yt}3===Ie&&De.writeVarint(U(7,1))}}function Y(Ae,De){var Oe=typeof Ae;"string"===Oe?De.writeStringField(1,Ae):"boolean"===Oe?De.writeBooleanField(7,Ae):"number"===Oe&&(Ae%1!=0?De.writeDoubleField(3,Ae):Ae<0?De.writeSVarintField(6,Ae):De.writeVarintField(5,Ae))}function W(Ae,De,Oe,Ie,et,ct){if(!(et-Ie<=Oe)){var vt=Ie+et>>1;(function ft(It,ut,Ot,Rt,$e,yt){for(;$e>Rt;){if($e-Rt>600){var Bt=$e-Rt+1,Ut=Ot-Rt+1,Qt=Math.log(Bt),Re=.5*Math.exp(2*Qt/3),ht=.5*Math.sqrt(Qt*Re*(Bt-Re)/Bt)*(Ut-Bt/2<0?-1:1);ft(It,ut,Ot,Math.max(Rt,Math.floor(Ot-Ut*Re/Bt+ht)),Math.min($e,Math.floor(Ot+(Bt-Ut)*Re/Bt+ht)),yt)}var Zt=ut[2*Ot+yt],or=Rt,Wt=$e;for(te(It,ut,Rt,Ot),ut[2*$e+yt]>Zt&&te(It,ut,Rt,$e);or<Wt;){for(te(It,ut,or,Wt),or++,Wt--;ut[2*or+yt]<Zt;)or++;for(;ut[2*Wt+yt]>Zt;)Wt--}ut[2*Rt+yt]===Zt?te(It,ut,Rt,Wt):te(It,ut,++Wt,$e),Wt<=Ot&&(Rt=Wt+1),Ot<=Wt&&($e=Wt-1)}})(Ae,De,vt,Ie,et,ct%2),W(Ae,De,Oe,Ie,vt-1,ct+1),W(Ae,De,Oe,vt+1,et,ct+1)}}function te(Ae,De,Oe,Ie){z(Ae,Oe,Ie),z(De,2*Oe,2*Ie),z(De,2*Oe+1,2*Ie+1)}function z(Ae,De,Oe){var Ie=Ae[De];Ae[De]=Ae[Oe],Ae[Oe]=Ie}function N(Ae,De,Oe,Ie){var et=Ae-Oe,ct=De-Ie;return et*et+ct*ct}A.fromVectorTileJs=C,A.fromGeojsonVt=function(Ae,De){De=De||{};var Oe={};for(var Ie in Ae)Oe[Ie]=new k(Ae[Ie].features,De),Oe[Ie].name=Ie,Oe[Ie].version=De.version,Oe[Ie].extent=De.extent;return C({layers:Oe})},A.GeoJSONWrapper=S;var V=function(Ae){return Ae[0]},Q=function(Ae){return Ae[1]},j=function(Ae,De,Oe,Ie,et){void 0===De&&(De=V),void 0===Oe&&(Oe=Q),void 0===Ie&&(Ie=64),void 0===et&&(et=Float64Array),this.nodeSize=Ie,this.points=Ae;for(var ct=Ae.length<65536?Uint16Array:Uint32Array,vt=this.ids=new ct(Ae.length),ft=this.coords=new et(2*Ae.length),It=0;It<Ae.length;It++)vt[It]=It,ft[2*It]=De(Ae[It]),ft[2*It+1]=Oe(Ae[It]);W(vt,ft,Ie,0,vt.length-1,0)};j.prototype.range=function(Ae,De,Oe,Ie){return function(et,ct,vt,ft,It,ut,Ot){for(var Rt,$e,yt=[0,et.length-1,0],Bt=[];yt.length;){var Ut=yt.pop(),Qt=yt.pop(),Re=yt.pop();if(Qt-Re<=Ot)for(var ht=Re;ht<=Qt;ht++)$e=ct[2*ht+1],(Rt=ct[2*ht])>=vt&&Rt<=It&&$e>=ft&&$e<=ut&&Bt.push(et[ht]);else{var Mt=Math.floor((Re+Qt)/2);$e=ct[2*Mt+1],(Rt=ct[2*Mt])>=vt&&Rt<=It&&$e>=ft&&$e<=ut&&Bt.push(et[Mt]);var Nt=(Ut+1)%2;(0===Ut?vt<=Rt:ft<=$e)&&(yt.push(Re),yt.push(Mt-1),yt.push(Nt)),(0===Ut?It>=Rt:ut>=$e)&&(yt.push(Mt+1),yt.push(Qt),yt.push(Nt))}}return Bt}(this.ids,this.coords,Ae,De,Oe,Ie,this.nodeSize)},j.prototype.within=function(Ae,De,Oe){return function(Ie,et,ct,vt,ft,It){for(var ut=[0,Ie.length-1,0],Ot=[],Rt=ft*ft;ut.length;){var $e=ut.pop(),yt=ut.pop(),Bt=ut.pop();if(yt-Bt<=It)for(var Ut=Bt;Ut<=yt;Ut++)N(et[2*Ut],et[2*Ut+1],ct,vt)<=Rt&&Ot.push(Ie[Ut]);else{var Qt=Math.floor((Bt+yt)/2),Re=et[2*Qt],ht=et[2*Qt+1];N(Re,ht,ct,vt)<=Rt&&Ot.push(Ie[Qt]);var Mt=($e+1)%2;(0===$e?ct-ft<=Re:vt-ft<=ht)&&(ut.push(Bt),ut.push(Qt-1),ut.push(Mt)),(0===$e?ct+ft>=Re:vt+ft>=ht)&&(ut.push(Qt+1),ut.push(yt),ut.push(Mt))}}return Ot}(this.ids,this.coords,Ae,De,Oe,this.nodeSize)};var J={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ae){return Ae}},K=function(Ae){this.options=ge(Object.create(J),Ae),this.trees=new Array(this.options.maxZoom+1)};function re(Ae,De,Oe,Ie,et){return{x:Ae,y:De,zoom:1/0,id:Oe,parentId:-1,numPoints:Ie,properties:et}}function ie(Ae,De){var Oe=Ae.geometry.coordinates,et=Oe[1];return{x:de(Oe[0]),y:ue(et),zoom:1/0,index:De,parentId:-1}}function ce(Ae){return{type:"Feature",id:Ae.id,properties:se(Ae),geometry:{type:"Point",coordinates:[(Ie=Ae.x,360*(Ie-.5)),(De=Ae.y,Oe=(180-360*De)*Math.PI/180,360*Math.atan(Math.exp(Oe))/Math.PI-90)]}};var De,Oe,Ie}function se(Ae){var De=Ae.numPoints,Oe=De>=1e4?Math.round(De/1e3)+"k":De>=1e3?Math.round(De/100)/10+"k":De;return ge(ge({},Ae.properties),{cluster:!0,cluster_id:Ae.id,point_count:De,point_count_abbreviated:Oe})}function de(Ae){return Ae/360+.5}function ue(Ae){var De=Math.sin(Ae*Math.PI/180),Oe=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function ge(Ae,De){for(var Oe in De)Ae[Oe]=De[Oe];return Ae}function be(Ae){return Ae.x}function Te(Ae){return Ae.y}function we(Ae,De,Oe,Ie,et,ct){var vt=et-Oe,ft=ct-Ie;if(0!==vt||0!==ft){var It=((Ae-Oe)*vt+(De-Ie)*ft)/(vt*vt+ft*ft);It>1?(Oe=et,Ie=ct):It>0&&(Oe+=vt*It,Ie+=ft*It)}return(vt=Ae-Oe)*vt+(ft=De-Ie)*ft}function Le(Ae,De,Oe,Ie){var et={id:void 0===Ae?null:Ae,type:De,geometry:Oe,tags:Ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ct){var vt=ct.geometry,ft=ct.type;if("Point"===ft||"MultiPoint"===ft||"LineString"===ft)fe(ct,vt);else if("Polygon"===ft||"MultiLineString"===ft)for(var It=0;It<vt.length;It++)fe(ct,vt[It]);else if("MultiPolygon"===ft)for(It=0;It<vt.length;It++)for(var ut=0;ut<vt[It].length;ut++)fe(ct,vt[It][ut])}(et),et}function fe(Ae,De){for(var Oe=0;Oe<De.length;Oe+=3)Ae.minX=Math.min(Ae.minX,De[Oe]),Ae.minY=Math.min(Ae.minY,De[Oe+1]),Ae.maxX=Math.max(Ae.maxX,De[Oe]),Ae.maxY=Math.max(Ae.maxY,De[Oe+1])}function ve(Ae,De,Oe,Ie){if(De.geometry){var et=De.geometry.coordinates,ct=De.geometry.type,vt=Math.pow(Oe.tolerance/((1<<Oe.maxZoom)*Oe.extent),2),ft=[],It=De.id;if(Oe.promoteId?It=De.properties[Oe.promoteId]:Oe.generateId&&(It=Ie||0),"Point"===ct)Me(et,ft);else if("MultiPoint"===ct)for(var ut=0;ut<et.length;ut++)Me(et[ut],ft);else if("LineString"===ct)ke(et,ft,vt,!1);else if("MultiLineString"===ct){if(Oe.lineMetrics){for(ut=0;ut<et.length;ut++)ke(et[ut],ft=[],vt,!1),Ae.push(Le(It,"LineString",ft,De.properties));return}Ce(et,ft,vt,!1)}else if("Polygon"===ct)Ce(et,ft,vt,!0);else{if("MultiPolygon"!==ct){if("GeometryCollection"===ct){for(ut=0;ut<De.geometry.geometries.length;ut++)ve(Ae,{id:It,geometry:De.geometry.geometries[ut],properties:De.properties},Oe,Ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ut=0;ut<et.length;ut++){var Ot=[];Ce(et[ut],Ot,vt,!0),ft.push(Ot)}}Ae.push(Le(It,ct,ft,De.properties))}}function Me(Ae,De){De.push(Pe(Ae[0])),De.push(Fe(Ae[1])),De.push(0)}function ke(Ae,De,Oe,Ie){for(var et,ct,vt=0,ft=0;ft<Ae.length;ft++){var It=Pe(Ae[ft][0]),ut=Fe(Ae[ft][1]);De.push(It),De.push(ut),De.push(0),ft>0&&(vt+=Ie?(et*ut-It*ct)/2:Math.sqrt(Math.pow(It-et,2)+Math.pow(ut-ct,2))),et=It,ct=ut}var Ot=De.length-3;De[2]=1,function Rt($e,yt,Bt,Ut){for(var Qt,Re=Ut,ht=Bt-yt>>1,Mt=Bt-yt,Nt=$e[yt],Zt=$e[yt+1],or=$e[Bt],Wt=$e[Bt+1],er=yt+3;er<Bt;er+=3){var cr=we($e[er],$e[er+1],Nt,Zt,or,Wt);if(cr>Re)Qt=er,Re=cr;else if(cr===Re){var _r=Math.abs(er-ht);_r<Mt&&(Qt=er,Mt=_r)}}Re>Ut&&(Qt-yt>3&&Rt($e,yt,Qt,Ut),$e[Qt+2]=Re,Bt-Qt>3&&Rt($e,Qt,Bt,Ut))}(De,0,Ot,Oe),De[Ot+2]=1,De.size=Math.abs(vt),De.start=0,De.end=De.size}function Ce(Ae,De,Oe,Ie){for(var et=0;et<Ae.length;et++){var ct=[];ke(Ae[et],ct,Oe,Ie),De.push(ct)}}function Pe(Ae){return Ae/360+.5}function Fe(Ae){var De=Math.sin(Ae*Math.PI/180),Oe=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function qe(Ae,De,Oe,Ie,et,ct,vt,ft){if(Ie/=De,ct>=(Oe/=De)&&vt<Ie)return Ae;if(vt<Oe||ct>=Ie)return null;for(var It=[],ut=0;ut<Ae.length;ut++){var Ot=Ae[ut],Rt=Ot.geometry,$e=Ot.type,yt=0===et?Ot.minX:Ot.minY,Bt=0===et?Ot.maxX:Ot.maxY;if(yt>=Oe&&Bt<Ie)It.push(Ot);else if(!(Bt<Oe||yt>=Ie)){var Ut=[];if("Point"===$e||"MultiPoint"===$e)rt(Rt,Ut,Oe,Ie,et);else if("LineString"===$e)ze(Rt,Ut,Oe,Ie,et,!1,ft.lineMetrics);else if("MultiLineString"===$e)Xe(Rt,Ut,Oe,Ie,et,!1);else if("Polygon"===$e)Xe(Rt,Ut,Oe,Ie,et,!0);else if("MultiPolygon"===$e)for(var Qt=0;Qt<Rt.length;Qt++){var Re=[];Xe(Rt[Qt],Re,Oe,Ie,et,!0),Re.length&&Ut.push(Re)}if(Ut.length){if(ft.lineMetrics&&"LineString"===$e){for(Qt=0;Qt<Ut.length;Qt++)It.push(Le(Ot.id,$e,Ut[Qt],Ot.tags));continue}"LineString"!==$e&&"MultiLineString"!==$e||(1===Ut.length?($e="LineString",Ut=Ut[0]):$e="MultiLineString"),"Point"!==$e&&"MultiPoint"!==$e||($e=3===Ut.length?"Point":"MultiPoint"),It.push(Le(Ot.id,$e,Ut,Ot.tags))}}}return It.length?It:null}function rt(Ae,De,Oe,Ie,et){for(var ct=0;ct<Ae.length;ct+=3){var vt=Ae[ct+et];vt>=Oe&&vt<=Ie&&(De.push(Ae[ct]),De.push(Ae[ct+1]),De.push(Ae[ct+2]))}}function ze(Ae,De,Oe,Ie,et,ct,vt){for(var ft,It,ut=He(Ae),Ot=0===et?at:pt,Rt=Ae.start,$e=0;$e<Ae.length-3;$e+=3){var yt=Ae[$e],Bt=Ae[$e+1],Ut=Ae[$e+2],Qt=Ae[$e+3],Re=Ae[$e+4],ht=0===et?yt:Bt,Mt=0===et?Qt:Re,Nt=!1;vt&&(ft=Math.sqrt(Math.pow(yt-Qt,2)+Math.pow(Bt-Re,2))),ht<Oe?Mt>Oe&&(It=Ot(ut,yt,Bt,Qt,Re,Oe),vt&&(ut.start=Rt+ft*It)):ht>Ie?Mt<Ie&&(It=Ot(ut,yt,Bt,Qt,Re,Ie),vt&&(ut.start=Rt+ft*It)):Je(ut,yt,Bt,Ut),Mt<Oe&&ht>=Oe&&(It=Ot(ut,yt,Bt,Qt,Re,Oe),Nt=!0),Mt>Ie&&ht<=Ie&&(It=Ot(ut,yt,Bt,Qt,Re,Ie),Nt=!0),!ct&&Nt&&(vt&&(ut.end=Rt+ft*It),De.push(ut),ut=He(Ae)),vt&&(Rt+=ft)}var Zt=Ae.length-3;yt=Ae[Zt],Bt=Ae[Zt+1],Ut=Ae[Zt+2],(ht=0===et?yt:Bt)>=Oe&&ht<=Ie&&Je(ut,yt,Bt,Ut),Zt=ut.length-3,ct&&Zt>=3&&(ut[Zt]!==ut[0]||ut[Zt+1]!==ut[1])&&Je(ut,ut[0],ut[1],ut[2]),ut.length&&De.push(ut)}function He(Ae){var De=[];return De.size=Ae.size,De.start=Ae.start,De.end=Ae.end,De}function Xe(Ae,De,Oe,Ie,et,ct){for(var vt=0;vt<Ae.length;vt++)ze(Ae[vt],De,Oe,Ie,et,ct,!1)}function Je(Ae,De,Oe,Ie){Ae.push(De),Ae.push(Oe),Ae.push(Ie)}function at(Ae,De,Oe,Ie,et,ct){var vt=(ct-De)/(Ie-De);return Ae.push(ct),Ae.push(Oe+(et-Oe)*vt),Ae.push(1),vt}function pt(Ae,De,Oe,Ie,et,ct){var vt=(ct-Oe)/(et-Oe);return Ae.push(De+(Ie-De)*vt),Ae.push(ct),Ae.push(1),vt}function xt(Ae,De){for(var Oe=[],Ie=0;Ie<Ae.length;Ie++){var et,ct=Ae[Ie],vt=ct.type;if("Point"===vt||"MultiPoint"===vt||"LineString"===vt)et=Ft(ct.geometry,De);else if("MultiLineString"===vt||"Polygon"===vt){et=[];for(var ft=0;ft<ct.geometry.length;ft++)et.push(Ft(ct.geometry[ft],De))}else if("MultiPolygon"===vt)for(et=[],ft=0;ft<ct.geometry.length;ft++){for(var It=[],ut=0;ut<ct.geometry[ft].length;ut++)It.push(Ft(ct.geometry[ft][ut],De));et.push(It)}Oe.push(Le(ct.id,vt,et,ct.tags))}return Oe}function Ft(Ae,De){var Oe=[];Oe.size=Ae.size,void 0!==Ae.start&&(Oe.start=Ae.start,Oe.end=Ae.end);for(var Ie=0;Ie<Ae.length;Ie+=3)Oe.push(Ae[Ie]+De,Ae[Ie+1],Ae[Ie+2]);return Oe}function Dt(Ae,De){if(Ae.transformed)return Ae;var Oe,Ie,et,ct=1<<Ae.z,vt=Ae.x,ft=Ae.y;for(Oe=0;Oe<Ae.features.length;Oe++){var It=Ae.features[Oe],ut=It.geometry,Ot=It.type;if(It.geometry=[],1===Ot)for(Ie=0;Ie<ut.length;Ie+=2)It.geometry.push(ot(ut[Ie],ut[Ie+1],De,ct,vt,ft));else for(Ie=0;Ie<ut.length;Ie++){var Rt=[];for(et=0;et<ut[Ie].length;et+=2)Rt.push(ot(ut[Ie][et],ut[Ie][et+1],De,ct,vt,ft));It.geometry.push(Rt)}}return Ae.transformed=!0,Ae}function ot(Ae,De,Oe,Ie,et,ct){return[Math.round(Oe*(Ae*Ie-et)),Math.round(Oe*(De*Ie-ct))]}function it(Ae,De,Oe,Ie,et){for(var ct=De===et.maxZoom?0:et.tolerance/((1<<De)*et.extent),vt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Oe,y:Ie,z:De,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ft=0;ft<Ae.length;ft++){vt.numFeatures++,Et(vt,Ae[ft],ct,et);var It=Ae[ft].minX,ut=Ae[ft].minY,Ot=Ae[ft].maxX,Rt=Ae[ft].maxY;It<vt.minX&&(vt.minX=It),ut<vt.minY&&(vt.minY=ut),Ot>vt.maxX&&(vt.maxX=Ot),Rt>vt.maxY&&(vt.maxY=Rt)}return vt}function Et(Ae,De,Oe,Ie){var et=De.geometry,ct=De.type,vt=[];if("Point"===ct||"MultiPoint"===ct)for(var ft=0;ft<et.length;ft+=3)vt.push(et[ft]),vt.push(et[ft+1]),Ae.numPoints++,Ae.numSimplified++;else if("LineString"===ct)Xt(vt,et,Ae,Oe,!1,!1);else if("MultiLineString"===ct||"Polygon"===ct)for(ft=0;ft<et.length;ft++)Xt(vt,et[ft],Ae,Oe,"Polygon"===ct,0===ft);else if("MultiPolygon"===ct)for(var It=0;It<et.length;It++){var ut=et[It];for(ft=0;ft<ut.length;ft++)Xt(vt,ut[ft],Ae,Oe,!0,0===ft)}if(vt.length){var Ot=De.tags||null;if("LineString"===ct&&Ie.lineMetrics){for(var Rt in Ot={},De.tags)Ot[Rt]=De.tags[Rt];Ot.mapbox_clip_start=et.start/et.size,Ot.mapbox_clip_end=et.end/et.size}var $e={geometry:vt,type:"Polygon"===ct||"MultiPolygon"===ct?3:"LineString"===ct||"MultiLineString"===ct?2:1,tags:Ot};null!==De.id&&($e.id=De.id),Ae.features.push($e)}}function Xt(Ae,De,Oe,Ie,et,ct){var vt=Ie*Ie;if(Ie>0&&De.size<(et?vt:Ie))Oe.numPoints+=De.length/3;else{for(var ft=[],It=0;It<De.length;It+=3)(0===Ie||De[It+2]>vt)&&(Oe.numSimplified++,ft.push(De[It]),ft.push(De[It+1])),Oe.numPoints++;et&&function(ut,Ot){for(var Rt=0,$e=0,yt=ut.length,Bt=yt-2;$e<yt;Bt=$e,$e+=2)Rt+=(ut[$e]-ut[Bt])*(ut[$e+1]+ut[Bt+1]);if(Rt>0===Ot)for($e=0,yt=ut.length;$e<yt/2;$e+=2){var Ut=ut[$e],Qt=ut[$e+1];ut[$e]=ut[yt-2-$e],ut[$e+1]=ut[yt-1-$e],ut[yt-2-$e]=Ut,ut[yt-1-$e]=Qt}}(ft,ct),Ae.push(ft)}}function nr(Ae,De){var Oe=(De=this.options=function(et,ct){for(var vt in ct)et[vt]=ct[vt];return et}(Object.create(this.options),De)).debug;if(Oe&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");var et,ct,vt,ft,It,ut,Ie=function(et,ct){var vt=[];if("FeatureCollection"===et.type)for(var ft=0;ft<et.features.length;ft++)ve(vt,et.features[ft],ct,ft);else ve(vt,"Feature"===et.type?et:{geometry:et},ct);return vt}(Ae,De);this.tiles={},this.tileCoords=[],Oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(et=Ie,ct=De,vt=ct.buffer/ct.extent,ft=et,It=qe(et,1,-1-vt,vt,0,-1,2,ct),ut=qe(et,1,1-vt,2+vt,0,-1,2,ct),(It||ut)&&(ft=qe(et,1,-vt,1+vt,0,-1,2,ct)||[],It&&(ft=xt(It,1).concat(ft)),ut&&(ft=ft.concat(xt(ut,-1)))),Ie=ft).length&&this.splitTile(Ie,0,0,0),Oe&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ue(Ae,De,Oe){return 32*((1<<Ae)*Oe+De)+Ae}function We(Ae,De){var Oe=Ae.tileID.canonical;if(!this._geoJSONIndex)return De(null,null);var Ie=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!Ie)return De(null,null);var et=new w(Ie.features),ct=A(et);0===ct.byteOffset&&ct.byteLength===ct.buffer.byteLength||(ct=new Uint8Array(ct)),De(null,{vectorTile:et,rawData:ct.buffer})}K.prototype.load=function(Ae){var De=this.options,Oe=De.log,Ie=De.minZoom,et=De.maxZoom,ct=De.nodeSize;Oe&&console.time("total time");var vt="prepare "+Ae.length+" points";Oe&&console.time(vt),this.points=Ae;for(var ft=[],It=0;It<Ae.length;It++)Ae[It].geometry&&ft.push(ie(Ae[It],It));this.trees[et+1]=new j(ft,be,Te,ct,Float32Array),Oe&&console.timeEnd(vt);for(var ut=et;ut>=Ie;ut--){var Ot=+Date.now();ft=this._cluster(ft,ut),this.trees[ut]=new j(ft,be,Te,ct,Float32Array),Oe&&console.log("z%d: %d clusters in %dms",ut,ft.length,+Date.now()-Ot)}return Oe&&console.timeEnd("total time"),this},K.prototype.getClusters=function(Ae,De){var Oe=((Ae[0]+180)%360+360)%360-180,Ie=Math.max(-90,Math.min(90,Ae[1])),et=180===Ae[2]?180:((Ae[2]+180)%360+360)%360-180,ct=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)Oe=-180,et=180;else if(Oe>et){var vt=this.getClusters([Oe,Ie,180,ct],De),ft=this.getClusters([-180,Ie,et,ct],De);return vt.concat(ft)}for(var It=this.trees[this._limitZoom(De)],ut=[],Ot=0,Rt=It.range(de(Oe),ue(ct),de(et),ue(Ie));Ot<Rt.length;Ot+=1){var yt=It.points[Rt[Ot]];ut.push(yt.numPoints?ce(yt):this.points[yt.index])}return ut},K.prototype.getChildren=function(Ae){var De=this._getOriginId(Ae),Oe=this._getOriginZoom(Ae),Ie="No cluster with the specified id.",et=this.trees[Oe];if(!et)throw new Error(Ie);var ct=et.points[De];if(!ct)throw new Error(Ie);for(var vt=this.options.radius/(this.options.extent*Math.pow(2,Oe-1)),ft=[],It=0,ut=et.within(ct.x,ct.y,vt);It<ut.length;It+=1){var Rt=et.points[ut[It]];Rt.parentId===Ae&&ft.push(Rt.numPoints?ce(Rt):this.points[Rt.index])}if(0===ft.length)throw new Error(Ie);return ft},K.prototype.getLeaves=function(Ae,De,Oe){var Ie=[];return this._appendLeaves(Ie,Ae,De=De||10,Oe=Oe||0,0),Ie},K.prototype.getTile=function(Ae,De,Oe){var Ie=this.trees[this._limitZoom(Ae)],et=Math.pow(2,Ae),ct=this.options,ft=ct.radius/ct.extent,It=(Oe-ft)/et,ut=(Oe+1+ft)/et,Ot={features:[]};return this._addTileFeatures(Ie.range((De-ft)/et,It,(De+1+ft)/et,ut),Ie.points,De,Oe,et,Ot),0===De&&this._addTileFeatures(Ie.range(1-ft/et,It,1,ut),Ie.points,et,Oe,et,Ot),De===et-1&&this._addTileFeatures(Ie.range(0,It,ft/et,ut),Ie.points,-1,Oe,et,Ot),Ot.features.length?Ot:null},K.prototype.getClusterExpansionZoom=function(Ae){for(var De=this._getOriginZoom(Ae)-1;De<=this.options.maxZoom;){var Oe=this.getChildren(Ae);if(De++,1!==Oe.length)break;Ae=Oe[0].properties.cluster_id}return De},K.prototype._appendLeaves=function(Ae,De,Oe,Ie,et){for(var ct=0,vt=this.getChildren(De);ct<vt.length;ct+=1){var ft=vt[ct],It=ft.properties;if(It&&It.cluster?et+It.point_count<=Ie?et+=It.point_count:et=this._appendLeaves(Ae,It.cluster_id,Oe,Ie,et):et<Ie?et++:Ae.push(ft),Ae.length===Oe)break}return et},K.prototype._addTileFeatures=function(Ae,De,Oe,Ie,et,ct){for(var vt=0,ft=Ae;vt<ft.length;vt+=1){var It=De[ft[vt]],ut=It.numPoints,Ot={type:1,geometry:[[Math.round(this.options.extent*(It.x*et-Oe)),Math.round(this.options.extent*(It.y*et-Ie))]],tags:ut?se(It):this.points[It.index].properties},Rt=void 0;ut?Rt=It.id:this.options.generateId?Rt=It.index:this.points[It.index].id&&(Rt=this.points[It.index].id),void 0!==Rt&&(Ot.id=Rt),ct.features.push(Ot)}},K.prototype._limitZoom=function(Ae){return Math.max(this.options.minZoom,Math.min(Ae,this.options.maxZoom+1))},K.prototype._cluster=function(Ae,De){for(var Oe=[],Ie=this.options,vt=Ie.reduce,ft=Ie.radius/(Ie.extent*Math.pow(2,De)),It=0;It<Ae.length;It++){var ut=Ae[It];if(!(ut.zoom<=De)){ut.zoom=De;for(var Ot=this.trees[De+1],Rt=Ot.within(ut.x,ut.y,ft),$e=ut.numPoints||1,yt=ut.x*$e,Bt=ut.y*$e,Ut=vt&&$e>1?this._map(ut,!0):null,Qt=(It<<5)+(De+1)+this.points.length,Re=0,ht=Rt;Re<ht.length;Re+=1){var Nt=Ot.points[ht[Re]];if(!(Nt.zoom<=De)){Nt.zoom=De;var Zt=Nt.numPoints||1;yt+=Nt.x*Zt,Bt+=Nt.y*Zt,$e+=Zt,Nt.parentId=Qt,vt&&(Ut||(Ut=this._map(ut,!0)),vt(Ut,this._map(Nt)))}}1===$e?Oe.push(ut):(ut.parentId=Qt,Oe.push(re(yt/$e,Bt/$e,Qt,$e,Ut)))}}return Oe},K.prototype._getOriginId=function(Ae){return Ae-this.points.length>>5},K.prototype._getOriginZoom=function(Ae){return(Ae-this.points.length)%32},K.prototype._map=function(Ae,De){if(Ae.numPoints)return De?ge({},Ae.properties):Ae.properties;var Oe=this.points[Ae.index].properties,Ie=this.options.map(Oe);return De&&Ie===Oe?ge({},Ie):Ie},nr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},nr.prototype.splitTile=function(Ae,De,Oe,Ie,et,ct,vt){for(var ft=[Ae,De,Oe,Ie],It=this.options,ut=It.debug;ft.length;){Ie=ft.pop(),Oe=ft.pop(),De=ft.pop(),Ae=ft.pop();var Ot=1<<De,Rt=Ue(De,Oe,Ie),$e=this.tiles[Rt];if(!$e&&(ut>1&&console.time("creation"),$e=this.tiles[Rt]=it(Ae,De,Oe,Ie,It),this.tileCoords.push({z:De,x:Oe,y:Ie}),ut)){ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,Oe,Ie,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var yt="z"+De;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if($e.source=Ae,et){if(De===It.maxZoom||De===et)continue;var Bt=1<<et-De;if(Oe!==Math.floor(ct/Bt)||Ie!==Math.floor(vt/Bt))continue}else if(De===It.indexMaxZoom||$e.numPoints<=It.indexMaxPoints)continue;if($e.source=null,0!==Ae.length){ut>1&&console.time("clipping");var Ut,Qt,Re,ht,Mt,Nt,Zt=.5*It.buffer/It.extent,or=.5-Zt,Wt=.5+Zt,er=1+Zt;Ut=Qt=Re=ht=null,Mt=qe(Ae,Ot,Oe-Zt,Oe+Wt,0,$e.minX,$e.maxX,It),Nt=qe(Ae,Ot,Oe+or,Oe+er,0,$e.minX,$e.maxX,It),Ae=null,Mt&&(Ut=qe(Mt,Ot,Ie-Zt,Ie+Wt,1,$e.minY,$e.maxY,It),Qt=qe(Mt,Ot,Ie+or,Ie+er,1,$e.minY,$e.maxY,It),Mt=null),Nt&&(Re=qe(Nt,Ot,Ie-Zt,Ie+Wt,1,$e.minY,$e.maxY,It),ht=qe(Nt,Ot,Ie+or,Ie+er,1,$e.minY,$e.maxY,It),Nt=null),ut>1&&console.timeEnd("clipping"),ft.push(Ut||[],De+1,2*Oe,2*Ie),ft.push(Qt||[],De+1,2*Oe,2*Ie+1),ft.push(Re||[],De+1,2*Oe+1,2*Ie),ft.push(ht||[],De+1,2*Oe+1,2*Ie+1)}}},nr.prototype.getTile=function(Ae,De,Oe){var Ie=this.options,et=Ie.extent,ct=Ie.debug;if(Ae<0||Ae>24)return null;var vt=1<<Ae,ft=Ue(Ae,De=(De%vt+vt)%vt,Oe);if(this.tiles[ft])return Dt(this.tiles[ft],et);ct>1&&console.log("drilling down to z%d-%d-%d",Ae,De,Oe);for(var It,ut=Ae,Ot=De,Rt=Oe;!It&&ut>0;)ut--,Ot=Math.floor(Ot/2),Rt=Math.floor(Rt/2),It=this.tiles[Ue(ut,Ot,Rt)];return It&&It.source?(ct>1&&console.log("found parent tile z%d-%d-%d",ut,Ot,Rt),ct>1&&console.time("drilling down"),this.splitTile(It.source,ut,Ot,Rt,Ae,De,Oe),ct>1&&console.timeEnd("drilling down"),this.tiles[ft]?Dt(this.tiles[ft],et):null):null};var Be=function(Ae){function De(Oe,Ie,et,ct){Ae.call(this,Oe,Ie,et,We),ct&&(this.loadGeoJSON=ct)}return Ae&&(De.__proto__=Ae),(De.prototype=Object.create(Ae&&Ae.prototype)).constructor=De,De.prototype.loadData=function(Oe,Ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ie,this._pendingLoadDataParams=Oe,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},De.prototype._loadData=function(){var Oe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ie=this._pendingCallback,et=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ct=!!(et&&et.request&&et.request.collectResourceTiming)&&new e.RequestPerformance(et.request);this.loadGeoJSON(et,function(vt,ft){if(vt||!ft)return Ie(vt);if("object"!=typeof ft)return Ie(new Error("Input data given to '"+et.source+"' is not a valid GeoJSON object."));v(ft,!0);try{Oe._geoJSONIndex=et.cluster?new K(function(Ot){var Rt=Ot.superclusterOptions,$e=Ot.clusterProperties;if(!$e||!Rt)return Rt;for(var yt={},Bt={},Ut={accumulated:null,zoom:0},Qt={properties:null},Re=Object.keys($e),ht=0,Mt=Re;ht<Mt.length;ht+=1){var Nt=Mt[ht],Zt=$e[Nt],or=Zt[0],er=e.createExpression(Zt[1]),cr=e.createExpression("string"==typeof or?[or,["accumulated"],["get",Nt]]:or);yt[Nt]=er.value,Bt[Nt]=cr.value}return Rt.map=function(_r){Qt.properties=_r;for(var xr={},dr=0,pr=Re;dr<pr.length;dr+=1){var br=pr[dr];xr[br]=yt[br].evaluate(Ut,Qt)}return xr},Rt.reduce=function(_r,xr){Qt.properties=xr;for(var dr=0,pr=Re;dr<pr.length;dr+=1){var br=pr[dr];Ut.accumulated=_r[br],_r[br]=Bt[br].evaluate(Ut,Qt)}},Rt}(et)).load(ft.features):new nr(Ot=ft,et.geojsonVtOptions)}catch(Ot){return Ie(Ot)}var Ot;Oe.loaded={};var It={};if(ct){var ut=ct.finish();ut&&(It.resourceTiming={},It.resourceTiming[et.source]=JSON.parse(JSON.stringify(ut)))}Ie(null,It)})}},De.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},De.prototype.reloadTile=function(Oe,Ie){var et=this.loaded;return et&&et[Oe.uid]?Ae.prototype.reloadTile.call(this,Oe,Ie):this.loadTile(Oe,Ie)},De.prototype.loadGeoJSON=function(Oe,Ie){if(Oe.request)e.getJSON(Oe.request,Ie);else{if("string"!=typeof Oe.data)return Ie(new Error("Input data given to '"+Oe.source+"' is not a valid GeoJSON object."));try{return Ie(null,JSON.parse(Oe.data))}catch(et){return Ie(new Error("Input data given to '"+Oe.source+"' is not a valid GeoJSON object."))}}},De.prototype.removeSource=function(Oe,Ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ie()},De.prototype.getClusterExpansionZoom=function(Oe,Ie){try{Ie(null,this._geoJSONIndex.getClusterExpansionZoom(Oe.clusterId))}catch(et){Ie(et)}},De.prototype.getClusterChildren=function(Oe,Ie){try{Ie(null,this._geoJSONIndex.getChildren(Oe.clusterId))}catch(et){Ie(et)}},De.prototype.getClusterLeaves=function(Oe,Ie){try{Ie(null,this._geoJSONIndex.getLeaves(Oe.clusterId,Oe.limit,Oe.offset))}catch(et){Ie(et)}},De}(c),Qe=function(Ae){var De=this;this.self=Ae,this.actor=new e.Actor(Ae,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:c,geojson:Be},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Oe,Ie){if(De.workerSourceTypes[Oe])throw new Error('Worker source with name "'+Oe+'" already registered.');De.workerSourceTypes[Oe]=Ie},this.self.registerRTLTextPlugin=function(Oe){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Oe.applyArabicShaping,e.plugin.processBidirectionalText=Oe.processBidirectionalText,e.plugin.processStyledBidirectionalText=Oe.processStyledBidirectionalText}};return Qe.prototype.setReferrer=function(Ae,De){this.referrer=De},Qe.prototype.setImages=function(Ae,De,Oe){for(var Ie in this.availableImages[Ae]=De,this.workerSources[Ae]){var et=this.workerSources[Ae][Ie];for(var ct in et)et[ct].availableImages=De}Oe()},Qe.prototype.setLayers=function(Ae,De,Oe){this.getLayerIndex(Ae).replace(De),Oe()},Qe.prototype.updateLayers=function(Ae,De,Oe){this.getLayerIndex(Ae).update(De.layers,De.removedIds),Oe()},Qe.prototype.loadTile=function(Ae,De,Oe){this.getWorkerSource(Ae,De.type,De.source).loadTile(De,Oe)},Qe.prototype.loadDEMTile=function(Ae,De,Oe){this.getDEMWorkerSource(Ae,De.source).loadTile(De,Oe)},Qe.prototype.reloadTile=function(Ae,De,Oe){this.getWorkerSource(Ae,De.type,De.source).reloadTile(De,Oe)},Qe.prototype.abortTile=function(Ae,De,Oe){this.getWorkerSource(Ae,De.type,De.source).abortTile(De,Oe)},Qe.prototype.removeTile=function(Ae,De,Oe){this.getWorkerSource(Ae,De.type,De.source).removeTile(De,Oe)},Qe.prototype.removeDEMTile=function(Ae,De){this.getDEMWorkerSource(Ae,De.source).removeTile(De)},Qe.prototype.removeSource=function(Ae,De,Oe){if(this.workerSources[Ae]&&this.workerSources[Ae][De.type]&&this.workerSources[Ae][De.type][De.source]){var Ie=this.workerSources[Ae][De.type][De.source];delete this.workerSources[Ae][De.type][De.source],void 0!==Ie.removeSource?Ie.removeSource(De,Oe):Oe()}},Qe.prototype.loadWorkerSource=function(Ae,De,Oe){try{this.self.importScripts(De.url),Oe()}catch(Ie){Oe(Ie.toString())}},Qe.prototype.syncRTLPluginState=function(Ae,De,Oe){try{e.plugin.setState(De);var Ie=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Ie){this.self.importScripts(Ie);var et=e.plugin.isParsed();Oe(et?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ie),et)}}catch(ct){Oe(ct.toString())}},Qe.prototype.getAvailableImages=function(Ae){var De=this.availableImages[Ae];return De||(De=[]),De},Qe.prototype.getLayerIndex=function(Ae){var De=this.layerIndexes[Ae];return De||(De=this.layerIndexes[Ae]=new o),De},Qe.prototype.getWorkerSource=function(Ae,De,Oe){var Ie=this;return this.workerSources[Ae]||(this.workerSources[Ae]={}),this.workerSources[Ae][De]||(this.workerSources[Ae][De]={}),this.workerSources[Ae][De][Oe]||(this.workerSources[Ae][De][Oe]=new this.workerSourceTypes[De]({send:function(ct,vt,ft){Ie.actor.send(ct,vt,ft,Ae)}},this.getLayerIndex(Ae),this.getAvailableImages(Ae))),this.workerSources[Ae][De][Oe]},Qe.prototype.getDEMWorkerSource=function(Ae,De){return this.demWorkerSources[Ae]||(this.demWorkerSources[Ae]={}),this.demWorkerSources[Ae][De]||(this.demWorkerSources[Ae][De]=new h),this.demWorkerSources[Ae][De]},Qe.prototype.enforceCacheSizeLimit=function(Ae,De){e.enforceCacheSizeLimit(De)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Qe(e.window)),Qe}),t(0,function(e){var i=e.createCommonjsModule(function(E){function O(ae){return!B(ae)}function B(ae){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var he,me,_e=new Blob([""],{type:"text/javascript"}),Se=URL.createObjectURL(_e);try{me=new Worker(Se),he=!0}catch(Ve){he=!1}return me&&me.terminate(),URL.revokeObjectURL(Se),he}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var he=document.createElement("canvas");he.width=he.height=1;var me=he.getContext("2d");if(!me)return!1;var _e=me.getImageData(0,0,1,1);return _e&&_e.width===he.width}()?(void 0===q[he=ae&&ae.failIfMajorPerformanceCaveat]&&(q[he]=function(me){var Ve,Ke,st,_e=(Ve=me,Ke=document.createElement("canvas"),(st=Object.create(O.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ve,Ke.probablySupportsContext?Ke.probablySupportsContext("webgl",st)||Ke.probablySupportsContext("experimental-webgl",st):Ke.supportsContext?Ke.supportsContext("webgl",st)||Ke.supportsContext("experimental-webgl",st):Ke.getContext("webgl",st)||Ke.getContext("experimental-webgl",st));if(!_e)return!1;var Se=_e.createShader(_e.VERTEX_SHADER);return!(!Se||_e.isContextLost())&&(_e.shaderSource(Se,"void main() {}"),_e.compileShader(Se),!0===_e.getShaderParameter(Se,_e.COMPILE_STATUS))}(he)),q[he]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var he}E.exports?E.exports=O:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=O,window.mapboxgl.notSupportedReason=B);var q={};O.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),r={create:function(E,O,B){var q=e.window.document.createElement(E);return void 0!==O&&(q.className=O),B&&B.appendChild(q),q},createNS:function(E,O){return e.window.document.createElementNS(E,O)}},o=e.window.document.documentElement.style;function n(E){if(!o)return E[0];for(var O=0;O<E.length;O++)if(E[O]in o)return E[O];return E[0]}var p,s=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);r.disableDrag=function(){o&&s&&(p=o[s],o[s]="none")},r.enableDrag=function(){o&&s&&(o[s]=p)};var a=n(["transform","WebkitTransform"]);r.setTransform=function(E,O){E.style[a]=O};var c=!1;try{var u=Object.defineProperty({},"passive",{get:function(){c=!0}});e.window.addEventListener("test",u,u),e.window.removeEventListener("test",u,u)}catch(E){c=!1}r.addEventListener=function(E,O,B,q){void 0===q&&(q={}),E.addEventListener(O,B,"passive"in q&&c?q:q.capture)},r.removeEventListener=function(E,O,B,q){void 0===q&&(q={}),E.removeEventListener(O,B,"passive"in q&&c?q:q.capture)};var h=function(E){E.preventDefault(),E.stopPropagation(),e.window.removeEventListener("click",h,!0)};function v(E){var O=E.userImage;return!!(O&&O.render&&O.render())&&(E.data.replace(new Uint8Array(O.data.buffer)),!0)}r.suppressClick=function(){e.window.addEventListener("click",h,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",h,!0)},0)},r.mousePos=function(E,O){var B=E.getBoundingClientRect();return new e.Point(O.clientX-B.left-E.clientLeft,O.clientY-B.top-E.clientTop)},r.touchPos=function(E,O){for(var B=E.getBoundingClientRect(),q=[],ae=0;ae<O.length;ae++)q.push(new e.Point(O[ae].clientX-B.left-E.clientLeft,O[ae].clientY-B.top-E.clientTop));return q},r.mouseButton=function(E){return void 0!==e.window.InstallTrigger&&2===E.button&&E.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:E.button},r.remove=function(E){E.parentNode&&E.parentNode.removeChild(E)};var f=function(E){function O(){E.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.isLoaded=function(){return this.loaded},O.prototype.setLoaded=function(B){if(this.loaded!==B&&(this.loaded=B,B)){for(var q=0,ae=this.requestors;q<ae.length;q+=1){var he=ae[q];this._notify(he.ids,he.callback)}this.requestors=[]}},O.prototype.getImage=function(B){return this.images[B]},O.prototype.addImage=function(B,q){this._validate(B,q)&&(this.images[B]=q)},O.prototype._validate=function(B,q){var ae=!0;return this._validateStretch(q.stretchX,q.data&&q.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "stretchX" value'))),ae=!1),this._validateStretch(q.stretchY,q.data&&q.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "stretchY" value'))),ae=!1),this._validateContent(q.content,q)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "content" value'))),ae=!1),ae},O.prototype._validateStretch=function(B,q){if(!B)return!0;for(var ae=0,he=0,me=B;he<me.length;he+=1){var _e=me[he];if(_e[0]<ae||_e[1]<_e[0]||q<_e[1])return!1;ae=_e[1]}return!0},O.prototype._validateContent=function(B,q){return!(B&&(4!==B.length||B[0]<0||q.data.width<B[0]||B[1]<0||q.data.height<B[1]||B[2]<0||q.data.width<B[2]||B[3]<0||q.data.height<B[3]||B[2]<B[0]||B[3]<B[1]))},O.prototype.updateImage=function(B,q){q.version=this.images[B].version+1,this.images[B]=q,this.updatedImages[B]=!0},O.prototype.removeImage=function(B){var q=this.images[B];delete this.images[B],delete this.patterns[B],q.userImage&&q.userImage.onRemove&&q.userImage.onRemove()},O.prototype.listImages=function(){return Object.keys(this.images)},O.prototype.getImages=function(B,q){var ae=!0;if(!this.isLoaded())for(var he=0,me=B;he<me.length;he+=1)this.images[me[he]]||(ae=!1);this.isLoaded()||ae?this._notify(B,q):this.requestors.push({ids:B,callback:q})},O.prototype._notify=function(B,q){for(var ae={},he=0,me=B;he<me.length;he+=1){var _e=me[he];this.images[_e]||this.fire(new e.Event("styleimagemissing",{id:_e}));var Se=this.images[_e];Se?ae[_e]={data:Se.data.clone(),pixelRatio:Se.pixelRatio,sdf:Se.sdf,version:Se.version,stretchX:Se.stretchX,stretchY:Se.stretchY,content:Se.content,hasRenderCallback:Boolean(Se.userImage&&Se.userImage.render)}:e.warnOnce('Image "'+_e+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}q(null,ae)},O.prototype.getPixelSize=function(){var B=this.atlasImage;return{width:B.width,height:B.height}},O.prototype.getPattern=function(B){var q=this.patterns[B],ae=this.getImage(B);if(!ae)return null;if(q&&q.position.version===ae.version)return q.position;if(q)q.position.version=ae.version;else{var he={w:ae.data.width+2,h:ae.data.height+2,x:0,y:0},me=new e.ImagePosition(he,ae);this.patterns[B]={bin:he,position:me}}return this._updatePatternAtlas(),this.patterns[B].position},O.prototype.bind=function(B){var q=B.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(B,this.atlasImage,q.RGBA),this.atlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE)},O.prototype._updatePatternAtlas=function(){var B=[];for(var q in this.patterns)B.push(this.patterns[q].bin);var ae=e.potpack(B),he=ae.w,me=ae.h,_e=this.atlasImage;for(var Se in _e.resize({width:he||1,height:me||1}),this.patterns){var Ve=this.patterns[Se].bin,Ke=Ve.x+1,st=Ve.y+1,At=this.images[Se].data,Pt=At.width,St=At.height;e.RGBAImage.copy(At,_e,{x:0,y:0},{x:Ke,y:st},{width:Pt,height:St}),e.RGBAImage.copy(At,_e,{x:0,y:St-1},{x:Ke,y:st-1},{width:Pt,height:1}),e.RGBAImage.copy(At,_e,{x:0,y:0},{x:Ke,y:st+St},{width:Pt,height:1}),e.RGBAImage.copy(At,_e,{x:Pt-1,y:0},{x:Ke-1,y:st},{width:1,height:St}),e.RGBAImage.copy(At,_e,{x:0,y:0},{x:Ke+Pt,y:st},{width:1,height:St})}this.dirty=!0},O.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},O.prototype.dispatchRenderCallbacks=function(B){for(var q=0,ae=B;q<ae.length;q+=1){var he=ae[q];if(!this.callbackDispatchedThisFrame[he]){this.callbackDispatchedThisFrame[he]=!0;var me=this.images[he];v(me)&&this.updateImage(he,me)}}},O}(e.Evented),l=w,x=w,m=1e20;function w(E,O,B,q,ae,he){this.fontSize=E||24,this.buffer=void 0===O?3:O,this.cutoff=q||.25,this.fontFamily=ae||"sans-serif",this.fontWeight=he||"normal",this.radius=B||8;var me=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=me,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(me*me),this.gridInner=new Float64Array(me*me),this.f=new Float64Array(me),this.d=new Float64Array(me),this.z=new Float64Array(me+1),this.v=new Int16Array(me),this.middle=Math.round(me/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function b(E,O,B,q,ae,he,me){for(var _e=0;_e<O;_e++){for(var Se=0;Se<B;Se++)q[Se]=E[Se*O+_e];for(k(q,ae,he,me,B),Se=0;Se<B;Se++)E[Se*O+_e]=ae[Se]}for(Se=0;Se<B;Se++){for(_e=0;_e<O;_e++)q[_e]=E[Se*O+_e];for(k(q,ae,he,me,O),_e=0;_e<O;_e++)E[Se*O+_e]=Math.sqrt(ae[_e])}}function k(E,O,B,q,ae){B[0]=0,q[0]=-m,q[1]=+m;for(var he=1,me=0;he<ae;he++){for(var _e=(E[he]+he*he-(E[B[me]]+B[me]*B[me]))/(2*he-2*B[me]);_e<=q[me];)me--,_e=(E[he]+he*he-(E[B[me]]+B[me]*B[me]))/(2*he-2*B[me]);B[++me]=he,q[me]=_e,q[me+1]=+m}for(he=0,me=0;he<ae;he++){for(;q[me+1]<he;)me++;O[he]=(he-B[me])*(he-B[me])+E[B[me]]}}w.prototype.draw=function(E){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(E,this.buffer,this.middle);for(var O=this.ctx.getImageData(0,0,this.size,this.size),B=new Uint8ClampedArray(this.size*this.size),q=0;q<this.size*this.size;q++){var ae=O.data[4*q+3]/255;this.gridOuter[q]=1===ae?0:0===ae?m:Math.pow(Math.max(0,.5-ae),2),this.gridInner[q]=1===ae?m:0===ae?0:Math.pow(Math.max(0,ae-.5),2)}for(b(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),b(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),q=0;q<this.size*this.size;q++)B[q]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[q]-this.gridInner[q])/this.radius+this.cutoff))));return B},l.default=x;var T=function(E,O){this.requestManager=E,this.localIdeographFontFamily=O,this.entries={}};T.prototype.setURL=function(E){this.url=E},T.prototype.getGlyphs=function(E,O){var B=this,q=[];for(var ae in E)for(var he=0,me=E[ae];he<me.length;he+=1)q.push({stack:ae,id:me[he]});e.asyncAll(q,function(Se,Ve){var Ke=Se.stack,st=Se.id,At=B.entries[Ke];At||(At=B.entries[Ke]={glyphs:{},requests:{},ranges:{}});var Pt=At.glyphs[st];if(void 0===Pt){if(Pt=B._tinySDF(At,Ke,st))return At.glyphs[st]=Pt,void Ve(null,{stack:Ke,id:st,glyph:Pt});var St=Math.floor(st/256);if(256*St>65535)Ve(new Error("glyphs > 65535 not supported"));else if(At.ranges[St])Ve(null,{stack:Ke,id:st,glyph:Pt});else{var Lt=At.requests[St];Lt||(Lt=At.requests[St]=[],T.loadGlyphRange(Ke,St,B.url,B.requestManager,function(kt,Ht){if(Ht){for(var jt in Ht)B._doesCharSupportLocalGlyph(+jt)||(At.glyphs[+jt]=Ht[+jt]);At.ranges[St]=!0}for(var Yt=0,lr=Lt;Yt<lr.length;Yt+=1)(0,lr[Yt])(kt,Ht);delete At.requests[St]})),Lt.push(function(kt,Ht){kt?Ve(kt):Ht&&Ve(null,{stack:Ke,id:st,glyph:Ht[st]||null})})}}else Ve(null,{stack:Ke,id:st,glyph:Pt})},function(Se,Ve){if(Se)O(Se);else if(Ve){for(var Ke={},st=0,At=Ve;st<At.length;st+=1){var Pt=At[st],St=Pt.stack,Lt=Pt.id,kt=Pt.glyph;(Ke[St]||(Ke[St]={}))[Lt]=kt&&{id:kt.id,bitmap:kt.bitmap.clone(),metrics:kt.metrics}}O(null,Ke)}})},T.prototype._doesCharSupportLocalGlyph=function(E){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](E)||e.isChar["Hangul Syllables"](E)||e.isChar.Hiragana(E)||e.isChar.Katakana(E))},T.prototype._tinySDF=function(E,O,B){var q=this.localIdeographFontFamily;if(q&&this._doesCharSupportLocalGlyph(B)){var ae=E.tinySDF;if(!ae){var he="400";/bold/i.test(O)?he="900":/medium/i.test(O)?he="500":/light/i.test(O)&&(he="200"),ae=E.tinySDF=new T.TinySDF(24,3,8,.25,q,he)}return{id:B,bitmap:new e.AlphaImage({width:30,height:30},ae.draw(String.fromCharCode(B))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},T.loadGlyphRange=function(E,O,B,q,ae){var he=256*O,me=he+255,_e=q.transformRequest(q.normalizeGlyphsURL(B).replace("{fontstack}",E).replace("{range}",he+"-"+me),e.ResourceType.Glyphs);e.getArrayBuffer(_e,function(Se,Ve){if(Se)ae(Se);else if(Ve){for(var Ke={},st=0,At=e.parseGlyphPBF(Ve);st<At.length;st+=1){var Pt=At[st];Ke[Pt.id]=Pt}ae(null,Ke)}})},T.TinySDF=l;var L=function(){this.specification=e.styleSpec.light.position};L.prototype.possiblyEvaluate=function(E,O){return e.sphericalToCartesian(E.expression.evaluate(O))},L.prototype.interpolate=function(E,O,B){return{x:e.number(E.x,O.x,B),y:e.number(E.y,O.y,B),z:e.number(E.z,O.z,B)}};var A=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new L,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),I=function(E){function O(B){E.call(this),this._transitionable=new e.Transitionable(A),this.setLight(B),this._transitioning=this._transitionable.untransitioned()}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getLight=function(){return this._transitionable.serialize()},O.prototype.setLight=function(B,q){if(void 0===q&&(q={}),!this._validate(e.validateLight,B,q))for(var ae in B){var he=B[ae];e.endsWith(ae,"-transition")?this._transitionable.setTransition(ae.slice(0,-"-transition".length),he):this._transitionable.setValue(ae,he)}},O.prototype.updateTransitions=function(B){this._transitioning=this._transitionable.transitioned(B,this._transitioning)},O.prototype.hasTransition=function(){return this._transitioning.hasTransition()},O.prototype.recalculate=function(B){this.properties=this._transitioning.possiblyEvaluate(B)},O.prototype._validate=function(B,q,ae){return(!ae||!1!==ae.validate)&&e.emitValidationErrors(this,B.call(e.validateStyle,e.extend({value:q,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},O}(e.Evented),D=function(E,O){this.width=E,this.height=O,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(E,O){var B=E.join(",")+String(O);return this.dashEntry[B]||(this.dashEntry[B]=this.addDash(E,O)),this.dashEntry[B]},D.prototype.getDashRanges=function(E,O,B){var q=[],ae=E.length%2==1?-E[E.length-1]*B:0,he=E[0]*B,me=!0;q.push({left:ae,right:he,isDash:me,zeroLength:0===E[0]});for(var _e=E[0],Se=1;Se<E.length;Se++){var Ve=E[Se];ae=_e*B,he=(_e+=Ve)*B,q.push({left:ae,right:he,isDash:me=!me,zeroLength:0===Ve})}return q},D.prototype.addRoundDash=function(E,O,B){for(var q=O/2,ae=-B;ae<=B;ae++)for(var me=this.width*(this.nextRow+B+ae),_e=0,Se=E[_e],Ve=0;Ve<this.width;Ve++){Ve/Se.right>1&&(Se=E[++_e]);var Ke=Math.abs(Ve-Se.left),st=Math.abs(Ve-Se.right),At=Math.min(Ke,st),Pt=void 0,St=ae/B*(q+1);if(Se.isDash){var Lt=q-Math.abs(St);Pt=Math.sqrt(At*At+Lt*Lt)}else Pt=q-Math.sqrt(At*At+St*St);this.data[me+Ve]=Math.max(0,Math.min(255,Pt+128))}},D.prototype.addRegularDash=function(E){for(var O=E.length-1;O>=0;--O){var B=E[O],q=E[O+1];B.zeroLength?E.splice(O,1):q&&q.isDash===B.isDash&&(q.left=B.left,E.splice(O,1))}var ae=E[0],he=E[E.length-1];ae.isDash===he.isDash&&(ae.left=he.left-this.width,he.right=ae.right+this.width);for(var me=this.width*this.nextRow,_e=0,Se=E[_e],Ve=0;Ve<this.width;Ve++){Ve/Se.right>1&&(Se=E[++_e]);var Ke=Math.abs(Ve-Se.left),st=Math.abs(Ve-Se.right),At=Math.min(Ke,st);this.data[me+Ve]=Math.max(0,Math.min(255,(Se.isDash?At:-At)+128))}},D.prototype.addDash=function(E,O){var B=O?7:0,q=2*B+1;if(this.nextRow+q>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ae=0,he=0;he<E.length;he++)ae+=E[he];if(0!==ae){var me=this.width/ae,_e=this.getDashRanges(E,this.width,me);O?this.addRoundDash(_e,me,B):this.addRegularDash(_e)}var Se={y:(this.nextRow+B+.5)/this.height,height:2*B/this.height,width:ae};return this.nextRow+=q,this.dirty=!0,Se},D.prototype.bind=function(E){var O=E.gl;this.texture?(O.bindTexture(O.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,O.texSubImage2D(O.TEXTURE_2D,0,0,0,this.width,this.height,O.ALPHA,O.UNSIGNED_BYTE,this.data))):(this.texture=O.createTexture(),O.bindTexture(O.TEXTURE_2D,this.texture),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.REPEAT),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.REPEAT),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.LINEAR),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.LINEAR),O.texImage2D(O.TEXTURE_2D,0,O.ALPHA,this.width,this.height,0,O.ALPHA,O.UNSIGNED_BYTE,this.data))};var S=function E(O,B){this.workerPool=O,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var q=this.workerPool.acquire(this.id),ae=0;ae<q.length;ae++){var me=new E.Actor(q[ae],B,this.id);me.name="Worker "+ae,this.actors.push(me)}};function C(E,O,B){var q=function(ae,he){if(ae)return B(ae);if(he){var me=e.pick(e.extend(he,E),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);he.vector_layers&&(me.vectorLayers=he.vector_layers,me.vectorLayerIds=me.vectorLayers.map(function(_e){return _e.id})),me.tiles=O.canonicalizeTileset(me,E.url),B(null,me)}};return E.url?e.getJSON(O.transformRequest(O.normalizeSourceURL(E.url),e.ResourceType.Source),q):e.browser.frame(function(){return q(null,E)})}S.prototype.broadcast=function(E,O,B){e.asyncAll(this.actors,function(q,ae){q.send(E,O,ae)},B=B||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(E){E.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var R=function(E,O,B){this.bounds=e.LngLatBounds.convert(this.validateBounds(E)),this.minzoom=O||0,this.maxzoom=B||24};R.prototype.validateBounds=function(E){return Array.isArray(E)&&4===E.length?[Math.max(-180,E[0]),Math.max(-90,E[1]),Math.min(180,E[2]),Math.min(90,E[3])]:[-180,-90,180,90]},R.prototype.contains=function(E){var O=Math.pow(2,E.z),B=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*O),q=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*O),ae=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*O),he=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*O);return E.x>=B&&E.x<ae&&E.y>=q&&E.y<he};var F=function(E){function O(B,q,ae,he){if(E.call(this),this.id=B,this.dispatcher=ae,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(q,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},q),this._collectResourceTiming=q.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(he)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.load=function(){var B=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(q,ae){B._tileJSONRequest=null,B._loaded=!0,q?B.fire(new e.ErrorEvent(q)):ae&&(e.extend(B,ae),ae.bounds&&(B.tileBounds=new R(ae.bounds,B.minzoom,B.maxzoom)),e.postTurnstileEvent(ae.tiles,B.map._requestManager._customAccessToken),e.postMapLoadEvent(ae.tiles,B.map._getMapId(),B.map._requestManager._skuToken,B.map._requestManager._customAccessToken),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},O.prototype.loaded=function(){return this._loaded},O.prototype.hasTile=function(B){return!this.tileBounds||this.tileBounds.contains(B.canonical)},O.prototype.onAdd=function(B){this.map=B,this.load()},O.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},O.prototype.serialize=function(){return e.extend({},this._options)},O.prototype.loadTile=function(B,q){var ae=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme)),he={request:this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),uid:B.uid,tileID:B.tileID,zoom:B.tileID.overscaledZ,tileSize:this.tileSize*B.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function me(_e,Se){return delete B.request,B.aborted?q(null):_e&&404!==_e.status?q(_e):(Se&&Se.resourceTiming&&(B.resourceTiming=Se.resourceTiming),this.map._refreshExpiredTiles&&Se&&B.setExpiryData(Se),B.loadVectorData(Se,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),q(null),void(B.reloadCallback&&(this.loadTile(B,B.reloadCallback),B.reloadCallback=null)))}he.request.collectResourceTiming=this._collectResourceTiming,B.actor&&"expired"!==B.state?"loading"===B.state?B.reloadCallback=q:B.request=B.actor.send("reloadTile",he,me.bind(this)):(B.actor=this.dispatcher.getActor(),B.request=B.actor.send("loadTile",he,me.bind(this)))},O.prototype.abortTile=function(B){B.request&&(B.request.cancel(),delete B.request),B.actor&&B.actor.send("abortTile",{uid:B.uid,type:this.type,source:this.id},void 0)},O.prototype.unloadTile=function(B){B.unloadVectorData(),B.actor&&B.actor.send("removeTile",{uid:B.uid,type:this.type,source:this.id},void 0)},O.prototype.hasTransition=function(){return!1},O}(e.Evented),H=function(E){function O(B,q,ae,he){E.call(this),this.id=B,this.dispatcher=ae,this.setEventedParent(he),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},q),e.extend(this,e.pick(q,["url","scheme","tileSize"]))}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.load=function(){var B=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(q,ae){B._tileJSONRequest=null,B._loaded=!0,q?B.fire(new e.ErrorEvent(q)):ae&&(e.extend(B,ae),ae.bounds&&(B.tileBounds=new R(ae.bounds,B.minzoom,B.maxzoom)),e.postTurnstileEvent(ae.tiles),e.postMapLoadEvent(ae.tiles,B.map._getMapId(),B.map._requestManager._skuToken),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},O.prototype.loaded=function(){return this._loaded},O.prototype.onAdd=function(B){this.map=B,this.load()},O.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},O.prototype.serialize=function(){return e.extend({},this._options)},O.prototype.hasTile=function(B){return!this.tileBounds||this.tileBounds.contains(B.canonical)},O.prototype.loadTile=function(B,q){var ae=this,he=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);B.request=e.getImage(this.map._requestManager.transformRequest(he,e.ResourceType.Tile),function(me,_e){if(delete B.request,B.aborted)B.state="unloaded",q(null);else if(me)B.state="errored",q(me);else if(_e){ae.map._refreshExpiredTiles&&B.setExpiryData(_e),delete _e.cacheControl,delete _e.expires;var Se=ae.map.painter.context,Ve=Se.gl;B.texture=ae.map.painter.getTileTexture(_e.width),B.texture?B.texture.update(_e,{useMipmap:!0}):(B.texture=new e.Texture(Se,_e,Ve.RGBA,{useMipmap:!0}),B.texture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE,Ve.LINEAR_MIPMAP_NEAREST),Se.extTextureFilterAnisotropic&&Ve.texParameterf(Ve.TEXTURE_2D,Se.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Se.extTextureFilterAnisotropicMax)),B.state="loaded",e.cacheEntryPossiblyAdded(ae.dispatcher),q(null)}})},O.prototype.abortTile=function(B,q){B.request&&(B.request.cancel(),delete B.request),q()},O.prototype.unloadTile=function(B,q){B.texture&&this.map.painter.saveTileTexture(B.texture),q()},O.prototype.hasTransition=function(){return!1},O}(e.Evented),U=function(E){function O(B,q,ae,he){E.call(this,B,q,ae,he),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},q),this.encoding=q.encoding||"mapbox"}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},O.prototype.loadTile=function(B,q){var ae=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function he(me,_e){me&&(B.state="errored",q(me)),_e&&(B.dem=_e,B.needsHillshadePrepare=!0,B.state="loaded",q(null))}B.request=e.getImage(this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),function(me,_e){if(delete B.request,B.aborted)B.state="unloaded",q(null);else if(me)B.state="errored",q(me);else if(_e){this.map._refreshExpiredTiles&&B.setExpiryData(_e),delete _e.cacheControl,delete _e.expires;var Se=e.window.ImageBitmap&&_e instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?_e:e.browser.getImageData(_e,1),Ve={uid:B.uid,coord:B.tileID,source:this.id,rawImageData:Se,encoding:this.encoding};B.actor&&"expired"!==B.state||(B.actor=this.dispatcher.getActor(),B.actor.send("loadDEMTile",Ve,he.bind(this)))}}.bind(this)),B.neighboringTiles=this._getNeighboringTiles(B.tileID)},O.prototype._getNeighboringTiles=function(B){var q=B.canonical,ae=Math.pow(2,q.z),he=(q.x-1+ae)%ae,me=0===q.x?B.wrap-1:B.wrap,_e=(q.x+1+ae)%ae,Se=q.x+1===ae?B.wrap+1:B.wrap,Ve={};return Ve[new e.OverscaledTileID(B.overscaledZ,me,q.z,he,q.y).key]={backfilled:!1},Ve[new e.OverscaledTileID(B.overscaledZ,Se,q.z,_e,q.y).key]={backfilled:!1},q.y>0&&(Ve[new e.OverscaledTileID(B.overscaledZ,me,q.z,he,q.y-1).key]={backfilled:!1},Ve[new e.OverscaledTileID(B.overscaledZ,B.wrap,q.z,q.x,q.y-1).key]={backfilled:!1},Ve[new e.OverscaledTileID(B.overscaledZ,Se,q.z,_e,q.y-1).key]={backfilled:!1}),q.y+1<ae&&(Ve[new e.OverscaledTileID(B.overscaledZ,me,q.z,he,q.y+1).key]={backfilled:!1},Ve[new e.OverscaledTileID(B.overscaledZ,B.wrap,q.z,q.x,q.y+1).key]={backfilled:!1},Ve[new e.OverscaledTileID(B.overscaledZ,Se,q.z,_e,q.y+1).key]={backfilled:!1}),Ve},O.prototype.unloadTile=function(B){B.demTexture&&this.map.painter.saveTileTexture(B.demTexture),B.fbo&&(B.fbo.destroy(),delete B.fbo),B.dem&&delete B.dem,delete B.neighboringTiles,B.state="unloaded",B.actor&&B.actor.send("removeDEMTile",{uid:B.uid,source:this.id})},O}(H),X=function(E){function O(B,q,ae,he){E.call(this),this.id=B,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ae.getActor(),this.setEventedParent(he),this._data=q.data,this._options=e.extend({},q),this._collectResourceTiming=q.collectResourceTiming,this._resourceTiming=[],void 0!==q.maxzoom&&(this.maxzoom=q.maxzoom),q.type&&(this.type=q.type),q.attribution&&(this.attribution=q.attribution),this.promoteId=q.promoteId;var me=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:q.cluster||!1,geojsonVtOptions:{buffer:(void 0!==q.buffer?q.buffer:128)*me,tolerance:(void 0!==q.tolerance?q.tolerance:.375)*me,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:q.lineMetrics||!1,generateId:q.generateId||!1},superclusterOptions:{maxZoom:void 0!==q.clusterMaxZoom?Math.min(q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(q.clusterRadius||50)*me,log:!1,generateId:q.generateId||!1},clusterProperties:q.clusterProperties},q.workerOptions)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.load=function(){var B=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(q){if(q)B.fire(new e.ErrorEvent(q));else{var ae={dataType:"source",sourceDataType:"metadata"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(ae.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new e.Event("data",ae))}})},O.prototype.onAdd=function(B){this.map=B,this.load()},O.prototype.setData=function(B){var q=this;return this._data=B,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ae){if(ae)q.fire(new e.ErrorEvent(ae));else{var he={dataType:"source",sourceDataType:"content"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(he.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new e.Event("data",he))}}),this},O.prototype.getClusterExpansionZoom=function(B,q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:B,source:this.id},q),this},O.prototype.getClusterChildren=function(B,q){return this.actor.send("geojson.getClusterChildren",{clusterId:B,source:this.id},q),this},O.prototype.getClusterLeaves=function(B,q,ae,he){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:B,limit:q,offset:ae},he),this},O.prototype._updateWorkerData=function(B){var q=this;this._loaded=!1;var ae=e.extend({},this.workerOptions),he=this._data;"string"==typeof he?(ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(he),e.ResourceType.Source),ae.request.collectResourceTiming=this._collectResourceTiming):ae.data=JSON.stringify(he),this.actor.send(this.type+".loadData",ae,function(me,_e){q._removed||_e&&_e.abandoned||(q._loaded=!0,_e&&_e.resourceTiming&&_e.resourceTiming[q.id]&&(q._resourceTiming=_e.resourceTiming[q.id].slice(0)),q.actor.send(q.type+".coalesce",{source:ae.source},null),B(me))})},O.prototype.loaded=function(){return this._loaded},O.prototype.loadTile=function(B,q){var ae=this,he=B.actor?"reloadTile":"loadTile";B.actor=this.actor,B.request=this.actor.send(he,{type:this.type,uid:B.uid,tileID:B.tileID,zoom:B.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(_e,Se){return delete B.request,B.unloadVectorData(),B.aborted?q(null):_e?q(_e):(B.loadVectorData(Se,ae.map.painter,"reloadTile"===he),q(null))})},O.prototype.abortTile=function(B){B.request&&(B.request.cancel(),delete B.request),B.aborted=!0},O.prototype.unloadTile=function(B){B.unloadVectorData(),this.actor.send("removeTile",{uid:B.uid,type:this.type,source:this.id})},O.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},O.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},O.prototype.hasTransition=function(){return!1},O}(e.Evented),Z=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Y=function(E){function O(B,q,ae,he){E.call(this),this.id=B,this.dispatcher=ae,this.coordinates=q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(he),this.options=q}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.load=function(B,q){var ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(he,me){ae._loaded=!0,he?ae.fire(new e.ErrorEvent(he)):me&&(ae.image=me,B&&(ae.coordinates=B),q&&q(),ae._finishLoading())})},O.prototype.loaded=function(){return this._loaded},O.prototype.updateImage=function(B){var q=this;return this.image&&B.url?(this.options.url=B.url,this.load(B.coordinates,function(){q.texture=null}),this):this},O.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},O.prototype.onAdd=function(B){this.map=B,this.load()},O.prototype.setCoordinates=function(B){var q=this;this.coordinates=B;var ae=B.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(me){for(var _e=1/0,Se=1/0,Ve=-1/0,Ke=-1/0,st=0,At=me;st<At.length;st+=1){var Pt=At[st];_e=Math.min(_e,Pt.x),Se=Math.min(Se,Pt.y),Ve=Math.max(Ve,Pt.x),Ke=Math.max(Ke,Pt.y)}var kt=Math.max(Ve-_e,Ke-Se),Ht=Math.max(0,Math.floor(-Math.log(kt)/Math.LN2)),jt=Math.pow(2,Ht);return new e.CanonicalTileID(Ht,Math.floor((_e+Ve)/2*jt),Math.floor((Se+Ke)/2*jt))}(ae),this.minzoom=this.maxzoom=this.tileID.z;var he=ae.map(function(me){return q.tileID.getTilePoint(me)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(he[0].x,he[0].y,0,0),this._boundsArray.emplaceBack(he[1].x,he[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(he[3].x,he[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(he[2].x,he[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},O.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var B=this.map.painter.context,q=B.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(B,this.image,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE)),this.tiles){var he=this.tiles[ae];"loaded"!==he.state&&(he.state="loaded",he.texture=this.texture)}}},O.prototype.loadTile=function(B,q){this.tileID&&this.tileID.equals(B.tileID.canonical)?(this.tiles[String(B.tileID.wrap)]=B,B.buckets={},q(null)):(B.state="errored",q(null))},O.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},O.prototype.hasTransition=function(){return!1},O}(e.Evented),W=function(E){function O(B,q,ae,he){E.call(this,B,q,ae,he),this.roundZoom=!0,this.type="video",this.options=q}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.load=function(){var B=this;this._loaded=!1;var q=this.options;this.urls=[];for(var ae=0,he=q.urls;ae<he.length;ae+=1)this.urls.push(this.map._requestManager.transformRequest(he[ae],e.ResourceType.Source).url);e.getVideo(this.urls,function(_e,Se){B._loaded=!0,_e?B.fire(new e.ErrorEvent(_e)):Se&&(B.video=Se,B.video.loop=!0,B.video.addEventListener("playing",function(){B.map.triggerRepaint()}),B.map&&B.video.play(),B._finishLoading())})},O.prototype.pause=function(){this.video&&this.video.pause()},O.prototype.play=function(){this.video&&this.video.play()},O.prototype.seek=function(B){if(this.video){var q=this.video.seekable;B<q.start(0)||B>q.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+q.start(0)+" and "+q.end(0)+"-second mark."))):this.video.currentTime=B}},O.prototype.getVideo=function(){return this.video},O.prototype.onAdd=function(B){this.map||(this.map=B,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},O.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var B=this.map.painter.context,q=B.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.texSubImage2D(q.TEXTURE_2D,0,0,0,q.RGBA,q.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(B,this.video,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE)),this.tiles){var he=this.tiles[ae];"loaded"!==he.state&&(he.state="loaded",he.texture=this.texture)}}},O.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},O.prototype.hasTransition=function(){return this.video&&!this.video.paused},O}(Y),te=function(E){function O(B,q,ae,he){E.call(this,B,q,ae,he),q.coordinates?Array.isArray(q.coordinates)&&4===q.coordinates.length&&!q.coordinates.some(function(me){return!Array.isArray(me)||2!==me.length||me.some(function(_e){return"number"!=typeof _e})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'missing required property "coordinates"'))),q.animate&&"boolean"!=typeof q.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'optional "animate" property must be a boolean value'))),q.canvas?"string"==typeof q.canvas||q.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'missing required property "canvas"'))),this.options=q,this.animate=void 0===q.animate||q.animate}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},O.prototype.getCanvas=function(){return this.canvas},O.prototype.onAdd=function(B){this.map=B,this.load(),this.canvas&&this.animate&&this.play()},O.prototype.onRemove=function(){this.pause()},O.prototype.prepare=function(){var B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var q=this.map.painter.context,ae=q.gl;for(var he in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(q,this.canvas,ae.RGBA,{premultiply:!0}),this.tiles){var me=this.tiles[he];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},O.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},O.prototype.hasTransition=function(){return this._playing},O.prototype._hasInvalidDimensions=function(){for(var B=0,q=[this.canvas.width,this.canvas.height];B<q.length;B+=1){var ae=q[B];if(isNaN(ae)||ae<=0)return!0}return!1},O}(Y),z={vector:F,raster:H,"raster-dem":U,geojson:X,video:W,image:Y,canvas:te};function N(E,O){var B=e.identity([]);return e.translate(B,B,[1,1,0]),e.scale(B,B,[.5*E.width,.5*E.height,1]),e.multiply(B,B,E.calculatePosMatrix(O.toUnwrapped()))}function V(E,O,B,q,ae,he){var me=function(Lt,kt,Ht){if(Lt)for(var jt=0,Yt=Lt;jt<Yt.length;jt+=1){var lr=kt[Yt[jt]];if(lr&&lr.source===Ht&&"fill-extrusion"===lr.type)return!0}else for(var vr in kt){var Or=kt[vr];if(Or.source===Ht&&"fill-extrusion"===Or.type)return!0}return!1}(ae&&ae.layers,O,E.id),_e=he.maxPitchScaleFactor(),Se=E.tilesIn(q,_e,me);Se.sort(Q);for(var Ve=[],Ke=0,st=Se;Ke<st.length;Ke+=1){var At=st[Ke];Ve.push({wrappedTileID:At.tileID.wrapped().key,queryResults:At.tile.queryRenderedFeatures(O,B,E._state,At.queryGeometry,At.cameraQueryGeometry,At.scale,ae,he,_e,N(E.transform,At.tileID))})}var Pt=function(Lt){for(var kt={},Ht={},jt=0,Yt=Lt;jt<Yt.length;jt+=1){var lr=Yt[jt],vr=lr.queryResults,Or=lr.wrappedTileID,Dr=Ht[Or]=Ht[Or]||{};for(var sn in vr)for(var on=vr[sn],kn=Dr[sn]=Dr[sn]||{},gn=kt[sn]=kt[sn]||[],Xn=0,ti=on;Xn<ti.length;Xn+=1){var gi=ti[Xn];kn[gi.featureIndex]||(kn[gi.featureIndex]=!0,gn.push(gi))}}return kt}(Ve);for(var St in Pt)Pt[St].forEach(function(Lt){var kt=Lt.feature,Ht=E.getFeatureState(kt.layer["source-layer"],kt.id);kt.source=kt.layer.source,kt.layer["source-layer"]&&(kt.sourceLayer=kt.layer["source-layer"]),kt.state=Ht});return Pt}function Q(E,O){var B=E.tileID,q=O.tileID;return B.overscaledZ-q.overscaledZ||B.canonical.y-q.canonical.y||B.wrap-q.wrap||B.canonical.x-q.canonical.x}var j=function(E,O){this.max=E,this.onRemove=O,this.reset()};j.prototype.reset=function(){for(var E in this.data)for(var O=0,B=this.data[E];O<B.length;O+=1){var q=B[O];q.timeout&&clearTimeout(q.timeout),this.onRemove(q.value)}return this.data={},this.order=[],this},j.prototype.add=function(E,O,B){var q=this,ae=E.wrapped().key;void 0===this.data[ae]&&(this.data[ae]=[]);var he={value:O,timeout:void 0};if(void 0!==B&&(he.timeout=setTimeout(function(){q.remove(E,he)},B)),this.data[ae].push(he),this.order.push(ae),this.order.length>this.max){var me=this._getAndRemoveByKey(this.order[0]);me&&this.onRemove(me)}return this},j.prototype.has=function(E){return E.wrapped().key in this.data},j.prototype.getAndRemove=function(E){return this.has(E)?this._getAndRemoveByKey(E.wrapped().key):null},j.prototype._getAndRemoveByKey=function(E){var O=this.data[E].shift();return O.timeout&&clearTimeout(O.timeout),0===this.data[E].length&&delete this.data[E],this.order.splice(this.order.indexOf(E),1),O.value},j.prototype.getByKey=function(E){var O=this.data[E];return O?O[0].value:null},j.prototype.get=function(E){return this.has(E)?this.data[E.wrapped().key][0].value:null},j.prototype.remove=function(E,O){if(!this.has(E))return this;var B=E.wrapped().key,q=void 0===O?0:this.data[B].indexOf(O),ae=this.data[B][q];return this.data[B].splice(q,1),ae.timeout&&clearTimeout(ae.timeout),0===this.data[B].length&&delete this.data[B],this.onRemove(ae.value),this.order.splice(this.order.indexOf(B),1),this},j.prototype.setMaxSize=function(E){for(this.max=E;this.order.length>this.max;){var O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this},j.prototype.filter=function(E){var O=[];for(var B in this.data)for(var q=0,ae=this.data[B];q<ae.length;q+=1){var he=ae[q];E(he.value)||O.push(he)}for(var me=0,_e=O;me<_e.length;me+=1){var Se=_e[me];this.remove(Se.value.tileID,Se)}};var J=function(E,O,B){this.context=E;var q=E.gl;this.buffer=q.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),E.bindElementBuffer.set(this.buffer),q.bufferData(q.ELEMENT_ARRAY_BUFFER,O.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete O.arrayBuffer};J.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},J.prototype.updateData=function(E){var O=this.context.gl;this.context.unbindVAO(),this.bind(),O.bufferSubData(O.ELEMENT_ARRAY_BUFFER,0,E.arrayBuffer)},J.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var K={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(E,O,B,q){this.length=O.length,this.attributes=B,this.itemSize=O.bytesPerElement,this.dynamicDraw=q,this.context=E;var ae=E.gl;this.buffer=ae.createBuffer(),E.bindVertexBuffer.set(this.buffer),ae.bufferData(ae.ARRAY_BUFFER,O.arrayBuffer,this.dynamicDraw?ae.DYNAMIC_DRAW:ae.STATIC_DRAW),this.dynamicDraw||delete O.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(E){var O=this.context.gl;this.bind(),O.bufferSubData(O.ARRAY_BUFFER,0,E.arrayBuffer)},re.prototype.enableAttributes=function(E,O){for(var B=0;B<this.attributes.length;B++){var ae=O.attributes[this.attributes[B].name];void 0!==ae&&E.enableVertexAttribArray(ae)}},re.prototype.setVertexAttribPointers=function(E,O,B){for(var q=0;q<this.attributes.length;q++){var ae=this.attributes[q],he=O.attributes[ae.name];void 0!==he&&E.vertexAttribPointer(he,ae.components,E[K[ae.type]],!1,this.itemSize,ae.offset+this.itemSize*(B||0))}},re.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ie=function(E){this.gl=E.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ie.prototype.get=function(){return this.current},ie.prototype.set=function(E){},ie.prototype.getDefault=function(){return this.default},ie.prototype.setDefault=function(){this.set(this.default)};var ce=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return e.Color.transparent},O.prototype.set=function(B){var q=this.current;(B.r!==q.r||B.g!==q.g||B.b!==q.b||B.a!==q.a||this.dirty)&&(this.gl.clearColor(B.r,B.g,B.b,B.a),this.current=B,this.dirty=!1)},O}(ie),se=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return 1},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.clearDepth(B),this.current=B,this.dirty=!1)},O}(ie),de=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return 0},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.clearStencil(B),this.current=B,this.dirty=!1)},O}(ie),ue=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return[!0,!0,!0,!0]},O.prototype.set=function(B){var q=this.current;(B[0]!==q[0]||B[1]!==q[1]||B[2]!==q[2]||B[3]!==q[3]||this.dirty)&&(this.gl.colorMask(B[0],B[1],B[2],B[3]),this.current=B,this.dirty=!1)},O}(ie),ge=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return!0},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.depthMask(B),this.current=B,this.dirty=!1)},O}(ie),be=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return 255},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.stencilMask(B),this.current=B,this.dirty=!1)},O}(ie),Te=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},O.prototype.set=function(B){var q=this.current;(B.func!==q.func||B.ref!==q.ref||B.mask!==q.mask||this.dirty)&&(this.gl.stencilFunc(B.func,B.ref,B.mask),this.current=B,this.dirty=!1)},O}(ie),we=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){var B=this.gl;return[B.KEEP,B.KEEP,B.KEEP]},O.prototype.set=function(B){var q=this.current;(B[0]!==q[0]||B[1]!==q[1]||B[2]!==q[2]||this.dirty)&&(this.gl.stencilOp(B[0],B[1],B[2]),this.current=B,this.dirty=!1)},O}(ie),Le=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return!1},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;B?q.enable(q.STENCIL_TEST):q.disable(q.STENCIL_TEST),this.current=B,this.dirty=!1}},O}(ie),fe=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return[0,1]},O.prototype.set=function(B){var q=this.current;(B[0]!==q[0]||B[1]!==q[1]||this.dirty)&&(this.gl.depthRange(B[0],B[1]),this.current=B,this.dirty=!1)},O}(ie),ve=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return!1},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;B?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),this.current=B,this.dirty=!1}},O}(ie),Me=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return this.gl.LESS},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.depthFunc(B),this.current=B,this.dirty=!1)},O}(ie),ke=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return!1},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;B?q.enable(q.BLEND):q.disable(q.BLEND),this.current=B,this.dirty=!1}},O}(ie),Ce=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){var B=this.gl;return[B.ONE,B.ZERO]},O.prototype.set=function(B){var q=this.current;(B[0]!==q[0]||B[1]!==q[1]||this.dirty)&&(this.gl.blendFunc(B[0],B[1]),this.current=B,this.dirty=!1)},O}(ie),Pe=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return e.Color.transparent},O.prototype.set=function(B){var q=this.current;(B.r!==q.r||B.g!==q.g||B.b!==q.b||B.a!==q.a||this.dirty)&&(this.gl.blendColor(B.r,B.g,B.b,B.a),this.current=B,this.dirty=!1)},O}(ie),Fe=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return this.gl.FUNC_ADD},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.blendEquation(B),this.current=B,this.dirty=!1)},O}(ie),qe=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return!1},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;B?q.enable(q.CULL_FACE):q.disable(q.CULL_FACE),this.current=B,this.dirty=!1}},O}(ie),rt=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return this.gl.BACK},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.cullFace(B),this.current=B,this.dirty=!1)},O}(ie),ze=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return this.gl.CCW},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.frontFace(B),this.current=B,this.dirty=!1)},O}(ie),He=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.useProgram(B),this.current=B,this.dirty=!1)},O}(ie),Xe=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return this.gl.TEXTURE0},O.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.activeTexture(B),this.current=B,this.dirty=!1)},O}(ie),Je=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){var B=this.gl;return[0,0,B.drawingBufferWidth,B.drawingBufferHeight]},O.prototype.set=function(B){var q=this.current;(B[0]!==q[0]||B[1]!==q[1]||B[2]!==q[2]||B[3]!==q[3]||this.dirty)&&(this.gl.viewport(B[0],B[1],B[2],B[3]),this.current=B,this.dirty=!1)},O}(ie),at=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;q.bindFramebuffer(q.FRAMEBUFFER,B),this.current=B,this.dirty=!1}},O}(ie),pt=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;q.bindRenderbuffer(q.RENDERBUFFER,B),this.current=B,this.dirty=!1}},O}(ie),xt=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;q.bindTexture(q.TEXTURE_2D,B),this.current=B,this.dirty=!1}},O}(ie),Ft=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;q.bindBuffer(q.ARRAY_BUFFER,B),this.current=B,this.dirty=!1}},O}(ie),Dt=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O.prototype.set=function(B){var q=this.gl;q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,B),this.current=B,this.dirty=!1},O}(ie),ot=function(E){function O(B){E.call(this,B),this.vao=B.extVertexArrayObject}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O.prototype.set=function(B){this.vao&&(B!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(B),this.current=B,this.dirty=!1)},O}(ie),it=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return 4},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_ALIGNMENT,B),this.current=B,this.dirty=!1}},O}(ie),Et=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return!1},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),this.current=B,this.dirty=!1}},O}(ie),Xt=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return!1},O.prototype.set=function(B){if(B!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,B),this.current=B,this.dirty=!1}},O}(ie),nr=function(E){function O(B,q){E.call(this,B),this.context=B,this.parent=q}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getDefault=function(){return null},O}(ie),Ue=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.setDirty=function(){this.dirty=!0},O.prototype.set=function(B){if(B!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var q=this.gl;q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,B,0),this.current=B,this.dirty=!1}},O}(nr),We=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.set=function(B){if(B!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var q=this.gl;q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_ATTACHMENT,q.RENDERBUFFER,B),this.current=B,this.dirty=!1}},O}(nr),Be=function(E,O,B,q){this.context=E,this.width=O,this.height=B;var he=this.framebuffer=E.gl.createFramebuffer();this.colorAttachment=new Ue(E,he),q&&(this.depthAttachment=new We(E,he))};Be.prototype.destroy=function(){var E=this.context.gl,O=this.colorAttachment.get();if(O&&E.deleteTexture(O),this.depthAttachment){var B=this.depthAttachment.get();B&&E.deleteRenderbuffer(B)}E.deleteFramebuffer(this.framebuffer)};var Qe=function(E,O,B){this.func=E,this.mask=O,this.range=B};Qe.ReadOnly=!1,Qe.ReadWrite=!0,Qe.disabled=new Qe(519,Qe.ReadOnly,[0,1]);var Ae=function(E,O,B,q,ae,he){this.test=E,this.ref=O,this.mask=B,this.fail=q,this.depthFail=ae,this.pass=he};Ae.disabled=new Ae({func:519,mask:0},0,0,7680,7680,7680);var De=function(E,O,B){this.blendFunction=E,this.blendColor=O,this.mask=B};De.disabled=new De(De.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),De.unblended=new De(De.Replace,e.Color.transparent,[!0,!0,!0,!0]),De.alphaBlended=new De([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Oe=function(E,O,B){this.enable=E,this.mode=O,this.frontFace=B};Oe.disabled=new Oe(!1,1029,2305),Oe.backCCW=new Oe(!0,1029,2305);var Ie=function(E){this.gl=E,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ce(this),this.clearDepth=new se(this),this.clearStencil=new de(this),this.colorMask=new ue(this),this.depthMask=new ge(this),this.stencilMask=new be(this),this.stencilFunc=new Te(this),this.stencilOp=new we(this),this.stencilTest=new Le(this),this.depthRange=new fe(this),this.depthTest=new ve(this),this.depthFunc=new Me(this),this.blend=new ke(this),this.blendFunc=new Ce(this),this.blendColor=new Pe(this),this.blendEquation=new Fe(this),this.cullFace=new qe(this),this.cullFaceSide=new rt(this),this.frontFace=new ze(this),this.program=new He(this),this.activeTexture=new Xe(this),this.viewport=new Je(this),this.bindFramebuffer=new at(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new xt(this),this.bindVertexBuffer=new Ft(this),this.bindElementBuffer=new Dt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ot(this),this.pixelStoreUnpack=new it(this),this.pixelStoreUnpackPremultiplyAlpha=new Et(this),this.pixelStoreUnpackFlipY=new Xt(this),this.extTextureFilterAnisotropic=E.getExtension("EXT_texture_filter_anisotropic")||E.getExtension("MOZ_EXT_texture_filter_anisotropic")||E.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=E.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=E.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(E.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=E.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=E.getExtension("EXT_disjoint_timer_query")};Ie.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ie.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ie.prototype.createIndexBuffer=function(E,O){return new J(this,E,O)},Ie.prototype.createVertexBuffer=function(E,O,B){return new re(this,E,O,B)},Ie.prototype.createRenderbuffer=function(E,O,B){var q=this.gl,ae=q.createRenderbuffer();return this.bindRenderbuffer.set(ae),q.renderbufferStorage(q.RENDERBUFFER,E,O,B),this.bindRenderbuffer.set(null),ae},Ie.prototype.createFramebuffer=function(E,O,B){return new Be(this,E,O,B)},Ie.prototype.clear=function(E){var O=E.color,B=E.depth,q=this.gl,ae=0;O&&(ae|=q.COLOR_BUFFER_BIT,this.clearColor.set(O),this.colorMask.set([!0,!0,!0,!0])),void 0!==B&&(ae|=q.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(B),this.depthMask.set(!0)),q.clear(ae)},Ie.prototype.setCullFace=function(E){!1===E.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(E.mode),this.frontFace.set(E.frontFace))},Ie.prototype.setDepthMode=function(E){E.func!==this.gl.ALWAYS||E.mask?(this.depthTest.set(!0),this.depthFunc.set(E.func),this.depthMask.set(E.mask),this.depthRange.set(E.range)):this.depthTest.set(!1)},Ie.prototype.setStencilMode=function(E){E.test.func!==this.gl.ALWAYS||E.mask?(this.stencilTest.set(!0),this.stencilMask.set(E.mask),this.stencilOp.set([E.fail,E.depthFail,E.pass]),this.stencilFunc.set({func:E.test.func,ref:E.ref,mask:E.test.mask})):this.stencilTest.set(!1)},Ie.prototype.setColorMode=function(E){e.deepEqual(E.blendFunction,De.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(E.blendFunction),this.blendColor.set(E.blendColor)),this.colorMask.set(E.mask)},Ie.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var et=function(E){function O(B,q,ae){var he=this;E.call(this),this.id=B,this.dispatcher=ae,this.on("data",function(me){"source"===me.dataType&&"metadata"===me.sourceDataType&&(he._sourceLoaded=!0),he._sourceLoaded&&!he._paused&&"source"===me.dataType&&"content"===me.sourceDataType&&(he.reload(),he.transform&&he.update(he.transform))}),this.on("error",function(){he._sourceErrored=!0}),this._source=function(me,_e,Se,Ve){var Ke=new z[_e.type](me,_e,Se,Ve);if(Ke.id!==me)throw new Error("Expected Source id to be "+me+" instead of "+Ke.id);return e.bindAll(["load","abort","unload","serialize","prepare"],Ke),Ke}(B,q,ae,this),this._tiles={},this._cache=new j(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.onAdd=function(B){this.map=B,this._maxTileCacheSize=B?B._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(B)},O.prototype.onRemove=function(B){this._source&&this._source.onRemove&&this._source.onRemove(B)},O.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var B in this._tiles){var q=this._tiles[B];if("loaded"!==q.state&&"errored"!==q.state)return!1}return!0},O.prototype.getSource=function(){return this._source},O.prototype.pause=function(){this._paused=!0},O.prototype.resume=function(){if(this._paused){var B=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,B&&this.reload(),this.transform&&this.update(this.transform)}},O.prototype._loadTile=function(B,q){return this._source.loadTile(B,q)},O.prototype._unloadTile=function(B){if(this._source.unloadTile)return this._source.unloadTile(B,function(){})},O.prototype._abortTile=function(B){if(this._source.abortTile)return this._source.abortTile(B,function(){})},O.prototype.serialize=function(){return this._source.serialize()},O.prototype.prepare=function(B){for(var q in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ae=this._tiles[q];ae.upload(B),ae.prepare(this.map.style.imageManager)}},O.prototype.getIds=function(){return e.values(this._tiles).map(function(B){return B.tileID}).sort(ct).map(function(B){return B.key})},O.prototype.getRenderableIds=function(B){var q=this,ae=[];for(var he in this._tiles)this._isIdRenderable(he,B)&&ae.push(this._tiles[he]);return B?ae.sort(function(me,_e){var Se=me.tileID,Ve=_e.tileID,Ke=new e.Point(Se.canonical.x,Se.canonical.y)._rotate(q.transform.angle),st=new e.Point(Ve.canonical.x,Ve.canonical.y)._rotate(q.transform.angle);return Se.overscaledZ-Ve.overscaledZ||st.y-Ke.y||st.x-Ke.x}).map(function(me){return me.tileID.key}):ae.map(function(me){return me.tileID}).sort(ct).map(function(me){return me.key})},O.prototype.hasRenderableParent=function(B){var q=this.findLoadedParent(B,0);return!!q&&this._isIdRenderable(q.tileID.key)},O.prototype._isIdRenderable=function(B,q){return this._tiles[B]&&this._tiles[B].hasData()&&!this._coveredTiles[B]&&(q||!this._tiles[B].holdingForFade())},O.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var B in this._cache.reset(),this._tiles)"errored"!==this._tiles[B].state&&this._reloadTile(B,"reloading")},O.prototype._reloadTile=function(B,q){var ae=this._tiles[B];ae&&("loading"!==ae.state&&(ae.state=q),this._loadTile(ae,this._tileLoaded.bind(this,ae,B,q)))},O.prototype._tileLoaded=function(B,q,ae,he){if(he)return B.state="errored",void(404!==he.status?this._source.fire(new e.ErrorEvent(he,{tile:B})):this.update(this.transform));B.timeAdded=e.browser.now(),"expired"===ae&&(B.refreshedUponExpiration=!0),this._setTileReloadTimer(q,B),"raster-dem"===this.getSource().type&&B.dem&&this._backfillDEM(B),this._state.initializeTileState(B,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:B,coord:B.tileID}))},O.prototype._backfillDEM=function(B){for(var q=this.getRenderableIds(),ae=0;ae<q.length;ae++){var he=q[ae];if(B.neighboringTiles&&B.neighboringTiles[he]){var me=this.getTileByID(he);_e(B,me),_e(me,B)}}function _e(Se,Ve){Se.needsHillshadePrepare=!0;var Ke=Ve.tileID.canonical.x-Se.tileID.canonical.x,st=Ve.tileID.canonical.y-Se.tileID.canonical.y,At=Math.pow(2,Se.tileID.canonical.z),Pt=Ve.tileID.key;0===Ke&&0===st||Math.abs(st)>1||(Math.abs(Ke)>1&&(1===Math.abs(Ke+At)?Ke+=At:1===Math.abs(Ke-At)&&(Ke-=At)),Ve.dem&&Se.dem&&(Se.dem.backfillBorder(Ve.dem,Ke,st),Se.neighboringTiles&&Se.neighboringTiles[Pt]&&(Se.neighboringTiles[Pt].backfilled=!0)))}},O.prototype.getTile=function(B){return this.getTileByID(B.key)},O.prototype.getTileByID=function(B){return this._tiles[B]},O.prototype._retainLoadedChildren=function(B,q,ae,he){for(var me in this._tiles){var _e=this._tiles[me];if(!(he[me]||!_e.hasData()||_e.tileID.overscaledZ<=q||_e.tileID.overscaledZ>ae)){for(var Se=_e.tileID;_e&&_e.tileID.overscaledZ>q+1;){var Ve=_e.tileID.scaledTo(_e.tileID.overscaledZ-1);(_e=this._tiles[Ve.key])&&_e.hasData()&&(Se=Ve)}for(var Ke=Se;Ke.overscaledZ>q;)if(B[(Ke=Ke.scaledTo(Ke.overscaledZ-1)).key]){he[Se.key]=Se;break}}}},O.prototype.findLoadedParent=function(B,q){if(B.key in this._loadedParentTiles){var ae=this._loadedParentTiles[B.key];return ae&&ae.tileID.overscaledZ>=q?ae:null}for(var he=B.overscaledZ-1;he>=q;he--){var me=B.scaledTo(he),_e=this._getLoadedTile(me);if(_e)return _e}},O.prototype._getLoadedTile=function(B){var q=this._tiles[B.key];return q&&q.hasData()?q:this._cache.getByKey(B.wrapped().key)},O.prototype.updateCacheSize=function(B){var q=(Math.ceil(B.width/this._source.tileSize)+1)*(Math.ceil(B.height/this._source.tileSize)+1),ae=Math.floor(5*q),he="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ae):ae;this._cache.setMaxSize(he)},O.prototype.handleWrapJump=function(B){var ae=Math.round((B-(void 0===this._prevLng?B:this._prevLng))/360);if(this._prevLng=B,ae){var he={};for(var me in this._tiles){var _e=this._tiles[me];_e.tileID=_e.tileID.unwrapTo(_e.tileID.wrap+ae),he[_e.tileID.key]=_e}for(var Se in this._tiles=he,this._timers)clearTimeout(this._timers[Se]),delete this._timers[Se];for(var Ve in this._tiles)this._setTileReloadTimer(Ve,this._tiles[Ve])}},O.prototype.update=function(B){var q=this;if(this.transform=B,this._sourceLoaded&&!this._paused){var ae;this.updateCacheSize(B),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ae=B.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Dr){return new e.OverscaledTileID(Dr.canonical.z,Dr.wrap,Dr.canonical.z,Dr.canonical.x,Dr.canonical.y)}):(ae=B.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ae=ae.filter(function(Dr){return q._source.hasTile(Dr)}))):ae=[];var he=B.coveringZoomLevel(this._source),me=Math.max(he-O.maxOverzooming,this._source.minzoom),_e=Math.max(he+O.maxUnderzooming,this._source.minzoom),Se=this._updateRetainedTiles(ae,he);if(vt(this._source.type)){for(var Ve={},Ke={},st=0,At=Object.keys(Se);st<At.length;st+=1){var Pt=At[st],St=Se[Pt],Lt=this._tiles[Pt];if(Lt&&!(Lt.fadeEndTime&&Lt.fadeEndTime<=e.browser.now())){var kt=this.findLoadedParent(St,me);kt&&(this._addTile(kt.tileID),Ve[kt.tileID.key]=kt.tileID),Ke[Pt]=St}}for(var Ht in this._retainLoadedChildren(Ke,he,_e,Se),Ve)Se[Ht]||(this._coveredTiles[Ht]=!0,Se[Ht]=Ve[Ht])}for(var jt in Se)this._tiles[jt].clearFadeHold();for(var Yt=0,lr=e.keysDifference(this._tiles,Se);Yt<lr.length;Yt+=1){var vr=lr[Yt],Or=this._tiles[vr];Or.hasSymbolBuckets&&!Or.holdingForFade()?Or.setHoldDuration(this.map._fadeDuration):Or.hasSymbolBuckets&&!Or.symbolFadeFinished()||this._removeTile(vr)}this._updateLoadedParentTileCache()}},O.prototype.releaseSymbolFadeTiles=function(){for(var B in this._tiles)this._tiles[B].holdingForFade()&&this._removeTile(B)},O.prototype._updateRetainedTiles=function(B,q){for(var ae={},he={},me=Math.max(q-O.maxOverzooming,this._source.minzoom),_e=Math.max(q+O.maxUnderzooming,this._source.minzoom),Se={},Ve=0,Ke=B;Ve<Ke.length;Ve+=1){var st=Ke[Ve],At=this._addTile(st);ae[st.key]=st,At.hasData()||q<this._source.maxzoom&&(Se[st.key]=st)}this._retainLoadedChildren(Se,q,_e,ae);for(var Pt=0,St=B;Pt<St.length;Pt+=1){var Lt=St[Pt],kt=this._tiles[Lt.key];if(!kt.hasData()){if(q+1>this._source.maxzoom){var Ht=Lt.children(this._source.maxzoom)[0],jt=this.getTile(Ht);if(jt&&jt.hasData()){ae[Ht.key]=Ht;continue}}else{var Yt=Lt.children(this._source.maxzoom);if(ae[Yt[0].key]&&ae[Yt[1].key]&&ae[Yt[2].key]&&ae[Yt[3].key])continue}for(var lr=kt.wasRequested(),vr=Lt.overscaledZ-1;vr>=me;--vr){var Or=Lt.scaledTo(vr);if(he[Or.key]||(he[Or.key]=!0,!(kt=this.getTile(Or))&&lr&&(kt=this._addTile(Or)),kt&&(ae[Or.key]=Or,lr=kt.wasRequested(),kt.hasData())))break}}}return ae},O.prototype._updateLoadedParentTileCache=function(){for(var B in this._loadedParentTiles={},this._tiles){for(var q=[],ae=void 0,he=this._tiles[B].tileID;he.overscaledZ>0;){if(he.key in this._loadedParentTiles){ae=this._loadedParentTiles[he.key];break}q.push(he.key);var me=he.scaledTo(he.overscaledZ-1);if(ae=this._getLoadedTile(me))break;he=me}for(var _e=0,Se=q;_e<Se.length;_e+=1)this._loadedParentTiles[Se[_e]]=ae}},O.prototype._addTile=function(B){var q=this._tiles[B.key];if(q)return q;(q=this._cache.getAndRemove(B))&&(this._setTileReloadTimer(B.key,q),q.tileID=B,this._state.initializeTileState(q,this.map?this.map.painter:null),this._cacheTimers[B.key]&&(clearTimeout(this._cacheTimers[B.key]),delete this._cacheTimers[B.key],this._setTileReloadTimer(B.key,q)));var ae=Boolean(q);return ae||(q=new e.Tile(B,this._source.tileSize*B.overscaleFactor()),this._loadTile(q,this._tileLoaded.bind(this,q,B.key,q.state))),q?(q.uses++,this._tiles[B.key]=q,ae||this._source.fire(new e.Event("dataloading",{tile:q,coord:q.tileID,dataType:"source"})),q):null},O.prototype._setTileReloadTimer=function(B,q){var ae=this;B in this._timers&&(clearTimeout(this._timers[B]),delete this._timers[B]);var he=q.getExpiryTimeout();he&&(this._timers[B]=setTimeout(function(){ae._reloadTile(B,"expired"),delete ae._timers[B]},he))},O.prototype._removeTile=function(B){var q=this._tiles[B];q&&(q.uses--,delete this._tiles[B],this._timers[B]&&(clearTimeout(this._timers[B]),delete this._timers[B]),q.uses>0||(q.hasData()&&"reloading"!==q.state?this._cache.add(q.tileID,q,q.getExpiryTimeout()):(q.aborted=!0,this._abortTile(q),this._unloadTile(q))))},O.prototype.clearTiles=function(){for(var B in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(B);this._cache.reset()},O.prototype.tilesIn=function(B,q,ae){var he=this,me=[],_e=this.transform;if(!_e)return me;for(var Se=ae?_e.getCameraQueryGeometry(B):B,Ve=B.map(function(vr){return _e.pointCoordinate(vr)}),Ke=Se.map(function(vr){return _e.pointCoordinate(vr)}),st=this.getIds(),At=1/0,Pt=1/0,St=-1/0,Lt=-1/0,kt=0,Ht=Ke;kt<Ht.length;kt+=1){var jt=Ht[kt];At=Math.min(At,jt.x),Pt=Math.min(Pt,jt.y),St=Math.max(St,jt.x),Lt=Math.max(Lt,jt.y)}for(var Yt=function(vr){var Or=he._tiles[st[vr]];if(!Or.holdingForFade()){var Dr=Or.tileID,sn=Math.pow(2,_e.zoom-Or.tileID.overscaledZ),on=q*Or.queryPadding*e.EXTENT/Or.tileSize/sn,kn=[Dr.getTilePoint(new e.MercatorCoordinate(At,Pt)),Dr.getTilePoint(new e.MercatorCoordinate(St,Lt))];if(kn[0].x-on<e.EXTENT&&kn[0].y-on<e.EXTENT&&kn[1].x+on>=0&&kn[1].y+on>=0){var gn=Ve.map(function(ti){return Dr.getTilePoint(ti)}),Xn=Ke.map(function(ti){return Dr.getTilePoint(ti)});me.push({tile:Or,tileID:Dr,queryGeometry:gn,cameraQueryGeometry:Xn,scale:sn})}}},lr=0;lr<st.length;lr++)Yt(lr);return me},O.prototype.getVisibleCoordinates=function(B){for(var q=this,ae=this.getRenderableIds(B).map(function(Se){return q._tiles[Se].tileID}),he=0,me=ae;he<me.length;he+=1){var _e=me[he];_e.posMatrix=this.transform.calculatePosMatrix(_e.toUnwrapped())}return ae},O.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(vt(this._source.type))for(var B in this._tiles){var q=this._tiles[B];if(void 0!==q.fadeEndTime&&q.fadeEndTime>=e.browser.now())return!0}return!1},O.prototype.setFeatureState=function(B,q,ae){this._state.updateState(B=B||"_geojsonTileLayer",q,ae)},O.prototype.removeFeatureState=function(B,q,ae){this._state.removeFeatureState(B=B||"_geojsonTileLayer",q,ae)},O.prototype.getFeatureState=function(B,q){return this._state.getState(B=B||"_geojsonTileLayer",q)},O.prototype.setDependencies=function(B,q,ae){var he=this._tiles[B];he&&he.setDependencies(q,ae)},O.prototype.reloadTilesForDependencies=function(B,q){for(var ae in this._tiles)this._tiles[ae].hasDependency(B,q)&&this._reloadTile(ae,"reloading");this._cache.filter(function(he){return!he.hasDependency(B,q)})},O}(e.Evented);function ct(E,O){var B=Math.abs(2*E.wrap)-+(E.wrap<0),q=Math.abs(2*O.wrap)-+(O.wrap<0);return E.overscaledZ-O.overscaledZ||q-B||O.canonical.y-E.canonical.y||O.canonical.x-E.canonical.x}function vt(E){return"raster"===E||"image"===E||"video"===E}function ft(){return new e.window.Worker(le.workerUrl)}et.maxOverzooming=10,et.maxUnderzooming=3;var It="mapboxgl_preloaded_worker_pool",ut=function(){this.active={}};ut.prototype.acquire=function(E){if(!this.workers)for(this.workers=[];this.workers.length<ut.workerCount;)this.workers.push(new ft);return this.active[E]=!0,this.workers.slice()},ut.prototype.release=function(E){delete this.active[E],0===this.numActive()&&(this.workers.forEach(function(O){O.terminate()}),this.workers=null)},ut.prototype.isPreloaded=function(){return!!this.active[It]},ut.prototype.numActive=function(){return Object.keys(this.active).length};var Ot,Rt=Math.floor(e.browser.hardwareConcurrency/2);function $e(){return Ot||(Ot=new ut),Ot}function yt(E,O){var B={};for(var q in E)"ref"!==q&&(B[q]=E[q]);return e.refProperties.forEach(function(ae){ae in O&&(B[ae]=O[ae])}),B}function Bt(E){E=E.slice();for(var O=Object.create(null),B=0;B<E.length;B++)O[E[B].id]=E[B];for(var q=0;q<E.length;q++)"ref"in E[q]&&(E[q]=yt(E[q],O[E[q].ref]));return E}ut.workerCount=Math.max(Math.min(Rt,6),1);var Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Qt(E,O,B){B.push({command:Ut.addSource,args:[E,O[E]]})}function Re(E,O,B){O.push({command:Ut.removeSource,args:[E]}),B[E]=!0}function ht(E,O,B,q){Re(E,B,q),Qt(E,O,B)}function Mt(E,O,B){var q;for(q in E[B])if(E[B].hasOwnProperty(q)&&"data"!==q&&!e.deepEqual(E[B][q],O[B][q]))return!1;for(q in O[B])if(O[B].hasOwnProperty(q)&&"data"!==q&&!e.deepEqual(E[B][q],O[B][q]))return!1;return!0}function Nt(E,O,B,q,ae,he){var me;for(me in O=O||{},E=E||{})E.hasOwnProperty(me)&&(e.deepEqual(E[me],O[me])||B.push({command:he,args:[q,me,O[me],ae]}));for(me in O)O.hasOwnProperty(me)&&!E.hasOwnProperty(me)&&(e.deepEqual(E[me],O[me])||B.push({command:he,args:[q,me,O[me],ae]}))}function Zt(E){return E.id}function or(E,O){return E[O.id]=O,E}var er=function(E,O){this.reset(E,O)};er.prototype.reset=function(E,O){this.points=E||[],this._distances=[0];for(var B=1;B<this.points.length;B++)this._distances[B]=this._distances[B-1]+this.points[B].dist(this.points[B-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(O||0,.5*this.length),this.paddedLength=this.length-2*this.padding},er.prototype.lerp=function(E){if(1===this.points.length)return this.points[0];E=e.clamp(E,0,1);for(var O=1,B=this._distances[O],q=E*this.paddedLength+this.padding;B<q&&O<this._distances.length;)B=this._distances[++O];var ae=O-1,he=this._distances[ae],me=B-he,_e=me>0?(q-he)/me:0;return this.points[ae].mult(1-_e).add(this.points[O].mult(_e))};var cr=function(E,O,B){var q=this.boxCells=[],ae=this.circleCells=[];this.xCellCount=Math.ceil(E/B),this.yCellCount=Math.ceil(O/B);for(var he=0;he<this.xCellCount*this.yCellCount;he++)q.push([]),ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=E,this.height=O,this.xScale=this.xCellCount/E,this.yScale=this.yCellCount/O,this.boxUid=0,this.circleUid=0};function _r(E,O,B,q,ae){var he=e.create();return O?(e.scale(he,he,[1/ae,1/ae,1]),B||e.rotateZ(he,he,q.angle)):e.multiply(he,q.labelPlaneMatrix,E),he}function xr(E,O,B,q,ae){if(O){var he=e.clone(E);return e.scale(he,he,[ae,ae,1]),B||e.rotateZ(he,he,-q.angle),he}return q.glCoordMatrix}function dr(E,O){var B=[E.x,E.y,0,1];cn(B,B,O);var q=B[3];return{point:new e.Point(B[0]/q,B[1]/q),signedDistanceFromCamera:q}}function pr(E,O){return.5+E/O*.5}function br(E,O){var B=E[0]/E[3],q=E[1]/E[3];return B>=-O[0]&&B<=O[0]&&q>=-O[1]&&q<=O[1]}function Nr(E,O,B,q,ae,he,me,_e){var Se=q?E.textSizeData:E.iconSizeData,Ve=e.evaluateSizeForZoom(Se,B.transform.zoom),Ke=[256/B.width*2+1,256/B.height*2+1],st=q?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;st.clear();for(var At=E.lineVertexArray,Pt=q?E.text.placedSymbolArray:E.icon.placedSymbolArray,St=B.transform.width/B.transform.height,Lt=!1,kt=0;kt<Pt.length;kt++){var Ht=Pt.get(kt);if(Ht.hidden||Ht.writingMode===e.WritingMode.vertical&&!Lt)In(Ht.numGlyphs,st);else{Lt=!1;var jt=[Ht.anchorX,Ht.anchorY,0,1];if(e.transformMat4(jt,jt,O),br(jt,Ke)){var lr=pr(B.transform.cameraToCenterDistance,jt[3]),vr=e.evaluateSizeForFeature(Se,Ve,Ht),Or=me?vr/lr:vr*lr,Dr=new e.Point(Ht.anchorX,Ht.anchorY),sn=dr(Dr,ae).point,on={},kn=an(Ht,Or,!1,_e,O,ae,he,E.glyphOffsetArray,At,st,sn,Dr,on,St);Lt=kn.useVertical,(kn.notEnoughRoom||Lt||kn.needsFlipping&&an(Ht,Or,!0,_e,O,ae,he,E.glyphOffsetArray,At,st,sn,Dr,on,St).notEnoughRoom)&&In(Ht.numGlyphs,st)}else In(Ht.numGlyphs,st)}}q?E.text.dynamicLayoutVertexBuffer.updateData(st):E.icon.dynamicLayoutVertexBuffer.updateData(st)}function kr(E,O,B,q,ae,he,me,_e,Se,Ve,Ke){var st=_e.glyphStartIndex+_e.numGlyphs,At=_e.lineStartIndex,Pt=_e.lineStartIndex+_e.lineLength,St=O.getoffsetX(_e.glyphStartIndex),Lt=O.getoffsetX(st-1),kt=zn(E*St,B,q,ae,he,me,_e.segment,At,Pt,Se,Ve,Ke);if(!kt)return null;var Ht=zn(E*Lt,B,q,ae,he,me,_e.segment,At,Pt,Se,Ve,Ke);return Ht?{first:kt,last:Ht}:null}function Hr(E,O,B,q){return E===e.WritingMode.horizontal&&Math.abs(B.y-O.y)>Math.abs(B.x-O.x)*q?{useVertical:!0}:(E===e.WritingMode.vertical?O.y<B.y:O.x>B.x)?{needsFlipping:!0}:null}function an(E,O,B,q,ae,he,me,_e,Se,Ve,Ke,st,At,Pt){var St,Lt=O/24,kt=E.lineOffsetX*Lt,Ht=E.lineOffsetY*Lt;if(E.numGlyphs>1){var jt=E.glyphStartIndex+E.numGlyphs,Yt=E.lineStartIndex,lr=E.lineStartIndex+E.lineLength,vr=kr(Lt,_e,kt,Ht,B,Ke,st,E,Se,he,At);if(!vr)return{notEnoughRoom:!0};var Or=dr(vr.first.point,me).point,Dr=dr(vr.last.point,me).point;if(q&&!B){var sn=Hr(E.writingMode,Or,Dr,Pt);if(sn)return sn}St=[vr.first];for(var on=E.glyphStartIndex+1;on<jt-1;on++)St.push(zn(Lt*_e.getoffsetX(on),kt,Ht,B,Ke,st,E.segment,Yt,lr,Se,he,At));St.push(vr.last)}else{if(q&&!B){var kn=dr(st,ae).point,gn=E.lineStartIndex+E.segment+1,Xn=new e.Point(Se.getx(gn),Se.gety(gn)),ti=dr(Xn,ae),gi=ti.signedDistanceFromCamera>0?ti.point:fn(st,Xn,kn,1,ae),Jr=Hr(E.writingMode,kn,gi,Pt);if(Jr)return Jr}var Pn=zn(Lt*_e.getoffsetX(E.glyphStartIndex),kt,Ht,B,Ke,st,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,Se,he,At);if(!Pn)return{notEnoughRoom:!0};St=[Pn]}for(var ri=0,$n=St;ri<$n.length;ri+=1){var ui=$n[ri];e.addDynamicAttributes(Ve,ui.point,ui.angle)}return{}}function fn(E,O,B,q,ae){var he=dr(E.add(E.sub(O)._unit()),ae).point,me=B.sub(he);return B.add(me._mult(q/me.mag()))}function zn(E,O,B,q,ae,he,me,_e,Se,Ve,Ke,st){var At=q?E-O:E+O,Pt=At>0?1:-1,St=0;q&&(Pt*=-1,St=Math.PI),Pt<0&&(St+=Math.PI);for(var Lt=Pt>0?_e+me:_e+me+1,kt=ae,Ht=ae,jt=0,Yt=0,lr=Math.abs(At),vr=[];jt+Yt<=lr;){if((Lt+=Pt)<_e||Lt>=Se)return null;if(Ht=kt,vr.push(kt),void 0===(kt=st[Lt])){var Or=new e.Point(Ve.getx(Lt),Ve.gety(Lt)),Dr=dr(Or,Ke);if(Dr.signedDistanceFromCamera>0)kt=st[Lt]=Dr.point;else{var sn=Lt-Pt;kt=fn(0===jt?he:new e.Point(Ve.getx(sn),Ve.gety(sn)),Or,Ht,lr-jt+1,Ke)}}jt+=Yt,Yt=Ht.dist(kt)}var on=(lr-jt)/Yt,kn=kt.sub(Ht),gn=kn.mult(on)._add(Ht);gn._add(kn._unit()._perp()._mult(B*Pt));var Xn=St+Math.atan2(kt.y-Ht.y,kt.x-Ht.x);return vr.push(gn),{point:gn,angle:Xn,path:vr}}cr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},cr.prototype.insert=function(E,O,B,q,ae){this._forEachCell(O,B,q,ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(E),this.bboxes.push(O),this.bboxes.push(B),this.bboxes.push(q),this.bboxes.push(ae)},cr.prototype.insertCircle=function(E,O,B,q){this._forEachCell(O-q,B-q,O+q,B+q,this._insertCircleCell,this.circleUid++),this.circleKeys.push(E),this.circles.push(O),this.circles.push(B),this.circles.push(q)},cr.prototype._insertBoxCell=function(E,O,B,q,ae,he){this.boxCells[ae].push(he)},cr.prototype._insertCircleCell=function(E,O,B,q,ae,he){this.circleCells[ae].push(he)},cr.prototype._query=function(E,O,B,q,ae,he){if(B<0||E>this.width||q<0||O>this.height)return!ae&&[];var me=[];if(E<=0&&O<=0&&this.width<=B&&this.height<=q){if(ae)return!0;for(var _e=0;_e<this.boxKeys.length;_e++)me.push({key:this.boxKeys[_e],x1:this.bboxes[4*_e],y1:this.bboxes[4*_e+1],x2:this.bboxes[4*_e+2],y2:this.bboxes[4*_e+3]});for(var Se=0;Se<this.circleKeys.length;Se++){var Ve=this.circles[3*Se],Ke=this.circles[3*Se+1],st=this.circles[3*Se+2];me.push({key:this.circleKeys[Se],x1:Ve-st,y1:Ke-st,x2:Ve+st,y2:Ke+st})}return he?me.filter(he):me}return this._forEachCell(E,O,B,q,this._queryCell,me,{hitTest:ae,seenUids:{box:{},circle:{}}},he),ae?me.length>0:me},cr.prototype._queryCircle=function(E,O,B,q,ae){var he=E-B,me=E+B,_e=O-B,Se=O+B;if(me<0||he>this.width||Se<0||_e>this.height)return!q&&[];var Ve=[];return this._forEachCell(he,_e,me,Se,this._queryCellCircle,Ve,{hitTest:q,circle:{x:E,y:O,radius:B},seenUids:{box:{},circle:{}}},ae),q?Ve.length>0:Ve},cr.prototype.query=function(E,O,B,q,ae){return this._query(E,O,B,q,!1,ae)},cr.prototype.hitTest=function(E,O,B,q,ae){return this._query(E,O,B,q,!0,ae)},cr.prototype.hitTestCircle=function(E,O,B,q){return this._queryCircle(E,O,B,!0,q)},cr.prototype._queryCell=function(E,O,B,q,ae,he,me,_e){var Se=me.seenUids,Ve=this.boxCells[ae];if(null!==Ve)for(var Ke=this.bboxes,st=0,At=Ve;st<At.length;st+=1){var Pt=At[st];if(!Se.box[Pt]){Se.box[Pt]=!0;var St=4*Pt;if(E<=Ke[St+2]&&O<=Ke[St+3]&&B>=Ke[St+0]&&q>=Ke[St+1]&&(!_e||_e(this.boxKeys[Pt]))){if(me.hitTest)return he.push(!0),!0;he.push({key:this.boxKeys[Pt],x1:Ke[St],y1:Ke[St+1],x2:Ke[St+2],y2:Ke[St+3]})}}}var Lt=this.circleCells[ae];if(null!==Lt)for(var kt=this.circles,Ht=0,jt=Lt;Ht<jt.length;Ht+=1){var Yt=jt[Ht];if(!Se.circle[Yt]){Se.circle[Yt]=!0;var lr=3*Yt;if(this._circleAndRectCollide(kt[lr],kt[lr+1],kt[lr+2],E,O,B,q)&&(!_e||_e(this.circleKeys[Yt]))){if(me.hitTest)return he.push(!0),!0;var vr=kt[lr],Or=kt[lr+1],Dr=kt[lr+2];he.push({key:this.circleKeys[Yt],x1:vr-Dr,y1:Or-Dr,x2:vr+Dr,y2:Or+Dr})}}}},cr.prototype._queryCellCircle=function(E,O,B,q,ae,he,me,_e){var Se=me.circle,Ve=me.seenUids,Ke=this.boxCells[ae];if(null!==Ke)for(var st=this.bboxes,At=0,Pt=Ke;At<Pt.length;At+=1){var St=Pt[At];if(!Ve.box[St]){Ve.box[St]=!0;var Lt=4*St;if(this._circleAndRectCollide(Se.x,Se.y,Se.radius,st[Lt+0],st[Lt+1],st[Lt+2],st[Lt+3])&&(!_e||_e(this.boxKeys[St])))return he.push(!0),!0}}var kt=this.circleCells[ae];if(null!==kt)for(var Ht=this.circles,jt=0,Yt=kt;jt<Yt.length;jt+=1){var lr=Yt[jt];if(!Ve.circle[lr]){Ve.circle[lr]=!0;var vr=3*lr;if(this._circlesCollide(Ht[vr],Ht[vr+1],Ht[vr+2],Se.x,Se.y,Se.radius)&&(!_e||_e(this.circleKeys[lr])))return he.push(!0),!0}}},cr.prototype._forEachCell=function(E,O,B,q,ae,he,me,_e){for(var Se=this._convertToXCellCoord(E),Ve=this._convertToYCellCoord(O),Ke=this._convertToXCellCoord(B),st=this._convertToYCellCoord(q),At=Se;At<=Ke;At++)for(var Pt=Ve;Pt<=st;Pt++)if(ae.call(this,E,O,B,q,this.xCellCount*Pt+At,he,me,_e))return},cr.prototype._convertToXCellCoord=function(E){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(E*this.xScale)))},cr.prototype._convertToYCellCoord=function(E){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(E*this.yScale)))},cr.prototype._circlesCollide=function(E,O,B,q,ae,he){var me=q-E,_e=ae-O,Se=B+he;return Se*Se>me*me+_e*_e},cr.prototype._circleAndRectCollide=function(E,O,B,q,ae,he,me){var _e=(he-q)/2,Se=Math.abs(E-(q+_e));if(Se>_e+B)return!1;var Ve=(me-ae)/2,Ke=Math.abs(O-(ae+Ve));if(Ke>Ve+B)return!1;if(Se<=_e||Ke<=Ve)return!0;var st=Se-_e,At=Ke-Ve;return st*st+At*At<=B*B};var Nn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function In(E,O){for(var B=0;B<E;B++){var q=O.length;O.resize(q+4),O.float32.set(Nn,3*q)}}function cn(E,O,B){var q=O[0],ae=O[1];return E[0]=B[0]*q+B[4]*ae+B[12],E[1]=B[1]*q+B[5]*ae+B[13],E[3]=B[3]*q+B[7]*ae+B[15],E}var jr=function(E,O,B){void 0===O&&(O=new cr(E.width+200,E.height+200,25)),void 0===B&&(B=new cr(E.width+200,E.height+200,25)),this.transform=E,this.grid=O,this.ignoredGrid=B,this.pitchfactor=Math.cos(E._pitch)*E.cameraToCenterDistance,this.screenRightBoundary=E.width+100,this.screenBottomBoundary=E.height+100,this.gridRightBoundary=E.width+200,this.gridBottomBoundary=E.height+200};function Lr(E,O,B){return O*(e.EXTENT/(E.tileSize*Math.pow(2,B-E.tileID.overscaledZ)))}jr.prototype.placeCollisionBox=function(E,O,B,q,ae){var he=this.projectAndGetPerspectiveRatio(q,E.anchorPointX,E.anchorPointY),me=B*he.perspectiveRatio,_e=E.x1*me+he.point.x,Se=E.y1*me+he.point.y,Ve=E.x2*me+he.point.x,Ke=E.y2*me+he.point.y;return!this.isInsideGrid(_e,Se,Ve,Ke)||!O&&this.grid.hitTest(_e,Se,Ve,Ke,ae)?{box:[],offscreen:!1}:{box:[_e,Se,Ve,Ke],offscreen:this.isOffscreen(_e,Se,Ve,Ke)}},jr.prototype.placeCollisionCircles=function(E,O,B,q,ae,he,me,_e,Se,Ve,Ke,st,At){var Pt=[],St=new e.Point(O.anchorX,O.anchorY),Lt=dr(St,he),kt=pr(this.transform.cameraToCenterDistance,Lt.signedDistanceFromCamera),Ht=(Ve?ae/kt:ae*kt)/e.ONE_EM,jt=dr(St,me).point,Yt=kr(Ht,q,O.lineOffsetX*Ht,O.lineOffsetY*Ht,!1,jt,St,O,B,me,{}),lr=!1,vr=!1,Or=!0;if(Yt){for(var Dr=.5*st*kt+At,sn=new e.Point(-100,-100),on=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),kn=new er,gn=Yt.first,Xn=Yt.last,ti=[],gi=gn.path.length-1;gi>=1;gi--)ti.push(gn.path[gi]);for(var Jr=1;Jr<Xn.path.length;Jr++)ti.push(Xn.path[Jr]);var Pn=2.5*Dr;if(_e){var ri=ti.map(function(Po){return dr(Po,_e)});ti=ri.some(function(Po){return Po.signedDistanceFromCamera<=0})?[]:ri.map(function(Po){return Po.point})}var $n=[];if(ti.length>0){for(var ui=ti[0].clone(),_i=ti[0].clone(),Ii=1;Ii<ti.length;Ii++)ui.x=Math.min(ui.x,ti[Ii].x),ui.y=Math.min(ui.y,ti[Ii].y),_i.x=Math.max(_i.x,ti[Ii].x),_i.y=Math.max(_i.y,ti[Ii].y);$n=ui.x>=sn.x&&_i.x<=on.x&&ui.y>=sn.y&&_i.y<=on.y?[ti]:_i.x<sn.x||ui.x>on.x||_i.y<sn.y||ui.y>on.y?[]:e.clipLine([ti],sn.x,sn.y,on.x,on.y)}for(var ai=0,Si=$n;ai<Si.length;ai+=1){kn.reset(Si[ai],.25*Dr);var Fi;Fi=kn.length<=.5*Dr?1:Math.ceil(kn.paddedLength/Pn)+1;for(var Ci=0;Ci<Fi;Ci++){var Bi=Ci/Math.max(Fi-1,1),Wi=kn.lerp(Bi),wa=Wi.x+100,Ga=Wi.y+100;Pt.push(wa,Ga,Dr,0);var Za=wa-Dr,xa=Ga-Dr,Ra=wa+Dr,Ca=Ga+Dr;if(Or=Or&&this.isOffscreen(Za,xa,Ra,Ca),vr=vr||this.isInsideGrid(Za,xa,Ra,Ca),!E&&this.grid.hitTestCircle(wa,Ga,Dr,Ke)&&(lr=!0,!Se))return{circles:[],offscreen:!1,collisionDetected:lr}}}}return{circles:!Se&&lr||!vr?[]:Pt,offscreen:Or,collisionDetected:lr}},jr.prototype.queryRenderedSymbols=function(E){if(0===E.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var O=[],B=1/0,q=1/0,ae=-1/0,he=-1/0,me=0,_e=E;me<_e.length;me+=1){var Se=_e[me],Ve=new e.Point(Se.x+100,Se.y+100);B=Math.min(B,Ve.x),q=Math.min(q,Ve.y),ae=Math.max(ae,Ve.x),he=Math.max(he,Ve.y),O.push(Ve)}for(var Ke={},st={},At=0,Pt=this.grid.query(B,q,ae,he).concat(this.ignoredGrid.query(B,q,ae,he));At<Pt.length;At+=1){var St=Pt[At],Lt=St.key;if(void 0===Ke[Lt.bucketInstanceId]&&(Ke[Lt.bucketInstanceId]={}),!Ke[Lt.bucketInstanceId][Lt.featureIndex]){var kt=[new e.Point(St.x1,St.y1),new e.Point(St.x2,St.y1),new e.Point(St.x2,St.y2),new e.Point(St.x1,St.y2)];e.polygonIntersectsPolygon(O,kt)&&(Ke[Lt.bucketInstanceId][Lt.featureIndex]=!0,void 0===st[Lt.bucketInstanceId]&&(st[Lt.bucketInstanceId]=[]),st[Lt.bucketInstanceId].push(Lt.featureIndex))}}return st},jr.prototype.insertCollisionBox=function(E,O,B,q,ae){(O?this.ignoredGrid:this.grid).insert({bucketInstanceId:B,featureIndex:q,collisionGroupID:ae},E[0],E[1],E[2],E[3])},jr.prototype.insertCollisionCircles=function(E,O,B,q,ae){for(var he=O?this.ignoredGrid:this.grid,me={bucketInstanceId:B,featureIndex:q,collisionGroupID:ae},_e=0;_e<E.length;_e+=4)he.insertCircle(me,E[_e],E[_e+1],E[_e+2])},jr.prototype.projectAndGetPerspectiveRatio=function(E,O,B){var q=[O,B,0,1];return cn(q,q,E),{point:new e.Point((q[0]/q[3]+1)/2*this.transform.width+100,(-q[1]/q[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/q[3]*.5}},jr.prototype.isOffscreen=function(E,O,B,q){return B<100||E>=this.screenRightBoundary||q<100||O>this.screenBottomBoundary},jr.prototype.isInsideGrid=function(E,O,B,q){return B>=0&&E<this.gridRightBoundary&&q>=0&&O<this.gridBottomBoundary},jr.prototype.getViewportMatrix=function(){var E=e.identity([]);return e.translate(E,E,[-100,-100,0]),E};var Xr=function(E,O,B,q){this.opacity=E?Math.max(0,Math.min(1,E.opacity+(E.placed?O:-O))):q&&B?1:0,this.placed=B};Xr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Un=function(E,O,B,q,ae){this.text=new Xr(E?E.text:null,O,B,ae),this.icon=new Xr(E?E.icon:null,O,q,ae)};Un.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var qr=function(E,O,B){this.text=E,this.icon=O,this.skipFade=B},On=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Tn=function(E,O,B,q,ae){this.bucketInstanceId=E,this.featureIndex=O,this.sourceLayerIndex=B,this.bucketIndex=q,this.tileID=ae},rn=function(E){this.crossSourceCollisions=E,this.maxGroupID=0,this.collisionGroups={}};function Vn(E,O,B,q,ae){var he=e.getAnchorAlignment(E),me=-(he.horizontalAlign-.5)*O,_e=-(he.verticalAlign-.5)*B,Se=e.evaluateVariableOffset(E,q);return new e.Point(me+Se[0]*ae,_e+Se[1]*ae)}function ar(E,O,B,q,ae,he){var me=E.x1,_e=E.x2,Se=E.y1,Ve=E.y2,Ke=E.anchorPointX,st=E.anchorPointY,At=new e.Point(O,B);return q&&At._rotate(ae?he:-he),{x1:me+At.x,y1:Se+At.y,x2:_e+At.x,y2:Ve+At.y,anchorPointX:Ke,anchorPointY:st}}rn.prototype.get=function(E){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[E]){var O=++this.maxGroupID;this.collisionGroups[E]={ID:O,predicate:function(B){return B.collisionGroupID===O}}}return this.collisionGroups[E]};var zt=function(E,O,B,q){this.transform=E.clone(),this.collisionIndex=new jr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=O,this.retainedQueryData={},this.collisionGroups=new rn(B),this.collisionCircleArrays={},this.prevPlacement=q,q&&(q.prevPlacement=void 0),this.placedOrientations={}};function Gt(E,O,B,q,ae){E.emplaceBack(O?1:0,B?1:0,q||0,ae||0),E.emplaceBack(O?1:0,B?1:0,q||0,ae||0),E.emplaceBack(O?1:0,B?1:0,q||0,ae||0),E.emplaceBack(O?1:0,B?1:0,q||0,ae||0)}zt.prototype.getBucketParts=function(E,O,B,q){var ae=B.getBucket(O),he=B.latestFeatureIndex;if(ae&&he&&O.id===ae.layerIds[0]){var me=B.collisionBoxArray,_e=ae.layers[0].layout,Se=Math.pow(2,this.transform.zoom-B.tileID.overscaledZ),Ve=B.tileSize/e.EXTENT,Ke=this.transform.calculatePosMatrix(B.tileID.toUnwrapped()),st="map"===_e.get("text-pitch-alignment"),At="map"===_e.get("text-rotation-alignment"),Pt=Lr(B,1,this.transform.zoom),St=_r(Ke,st,At,this.transform,Pt),Lt=null;if(st){var kt=xr(Ke,st,At,this.transform,Pt);Lt=e.multiply([],this.transform.labelPlaneMatrix,kt)}this.retainedQueryData[ae.bucketInstanceId]=new Tn(ae.bucketInstanceId,he,ae.sourceLayerIndex,ae.index,B.tileID);var Ht={bucket:ae,layout:_e,posMatrix:Ke,textLabelPlaneMatrix:St,labelToScreenMatrix:Lt,scale:Se,textPixelRatio:Ve,holdingForFade:B.holdingForFade(),collisionBoxArray:me,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ae.sourceID)};if(q)for(var jt=0,Yt=ae.sortKeyRanges;jt<Yt.length;jt+=1){var lr=Yt[jt];E.push({sortKey:lr.sortKey,symbolInstanceStart:lr.symbolInstanceStart,symbolInstanceEnd:lr.symbolInstanceEnd,parameters:Ht})}else E.push({symbolInstanceStart:0,symbolInstanceEnd:ae.symbolInstances.length,parameters:Ht})}},zt.prototype.attemptAnchorPlacement=function(E,O,B,q,ae,he,me,_e,Se,Ve,Ke,st,At,Pt,St){var Lt,kt=[st.textOffset0,st.textOffset1],Ht=Vn(E,B,q,kt,ae),jt=this.collisionIndex.placeCollisionBox(ar(O,Ht.x,Ht.y,he,me,this.transform.angle),Ke,_e,Se,Ve.predicate);if((!St||0!==this.collisionIndex.placeCollisionBox(ar(St,Ht.x,Ht.y,he,me,this.transform.angle),Ke,_e,Se,Ve.predicate).box.length)&&jt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID].text&&(Lt=this.prevPlacement.variableOffsets[st.crossTileID].anchor),this.variableOffsets[st.crossTileID]={textOffset:kt,width:B,height:q,anchor:E,textBoxScale:ae,prevAnchor:Lt},this.markUsedJustification(At,E,st,Pt),At.allowVerticalPlacement&&(this.markUsedOrientation(At,Pt,st),this.placedOrientations[st.crossTileID]=Pt),{shift:Ht,placedGlyphBoxes:jt}},zt.prototype.placeLayerBucketPart=function(E,O,B){var q=this,ae=E.parameters,he=ae.bucket,me=ae.layout,_e=ae.posMatrix,Se=ae.textLabelPlaneMatrix,Ve=ae.labelToScreenMatrix,Ke=ae.textPixelRatio,st=ae.holdingForFade,At=ae.collisionBoxArray,Pt=ae.partiallyEvaluatedTextSize,St=ae.collisionGroup,Lt=me.get("text-optional"),kt=me.get("icon-optional"),Ht=me.get("text-allow-overlap"),jt=me.get("icon-allow-overlap"),Yt="map"===me.get("text-rotation-alignment"),lr="map"===me.get("text-pitch-alignment"),vr="none"!==me.get("icon-text-fit"),Or="viewport-y"===me.get("symbol-z-order"),Dr=Ht&&(jt||!he.hasIconData()||kt),sn=jt&&(Ht||!he.hasTextData()||Lt);!he.collisionArrays&&At&&he.deserializeCollisionBoxes(At);var on=function(Jr,Pn){if(!O[Jr.crossTileID])if(st)q.placements[Jr.crossTileID]=new qr(!1,!1,!1);else{var ri,$n=!1,ui=!1,_i=!0,Ii=null,ai={box:null,offscreen:null},Si={box:null,offscreen:null},Mi=null,Fi=null,Ci=0,Bi=0,Wi=0;Pn.textFeatureIndex?Ci=Pn.textFeatureIndex:Jr.useRuntimeCollisionCircles&&(Ci=Jr.featureIndex),Pn.verticalTextFeatureIndex&&(Bi=Pn.verticalTextFeatureIndex);var wa=Pn.textBox;if(wa){var Ga=function(za){var qo=e.WritingMode.horizontal;if(he.allowVerticalPlacement&&!za&&q.prevPlacement){var Yo=q.prevPlacement.placedOrientations[Jr.crossTileID];Yo&&(q.placedOrientations[Jr.crossTileID]=Yo,q.markUsedOrientation(he,qo=Yo,Jr))}return qo},Za=function(za,qo){if(he.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&Pn.verticalTextBox)for(var Yo=0,yl=he.writingModes;Yo<yl.length&&(yl[Yo]===e.WritingMode.vertical?(ai=qo(),Si=ai):ai=za(),!(ai&&ai.box&&ai.box.length));Yo+=1);else ai=za()};if(me.get("text-variable-anchor")){var xa=me.get("text-variable-anchor");if(q.prevPlacement&&q.prevPlacement.variableOffsets[Jr.crossTileID]){var Ra=q.prevPlacement.variableOffsets[Jr.crossTileID];xa.indexOf(Ra.anchor)>0&&(xa=xa.filter(function(za){return za!==Ra.anchor})).unshift(Ra.anchor)}var Ca=function(za,qo,Yo){for(var yl=za.x2-za.x1,Xc=za.y2-za.y1,cs=Jr.textBoxScale,ql=vr&&!jt?qo:null,ul={box:[],offscreen:!1},Jc=Ht?2*xa.length:xa.length,Hs=0;Hs<Jc;++Hs){var tl=q.attemptAnchorPlacement(xa[Hs%xa.length],za,yl,Xc,cs,Yt,lr,Ke,_e,St,Hs>=xa.length,Jr,he,Yo,ql);if(tl&&(ul=tl.placedGlyphBoxes)&&ul.box&&ul.box.length){$n=!0,Ii=tl.shift;break}}return ul};Za(function(){return Ca(wa,Pn.iconBox,e.WritingMode.horizontal)},function(){var za=Pn.verticalTextBox;return he.allowVerticalPlacement&&!(ai&&ai.box&&ai.box.length)&&Jr.numVerticalGlyphVertices>0&&za?Ca(za,Pn.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),ai&&($n=ai.box,_i=ai.offscreen);var Po=Ga(ai&&ai.box);if(!$n&&q.prevPlacement){var oo=q.prevPlacement.variableOffsets[Jr.crossTileID];oo&&(q.variableOffsets[Jr.crossTileID]=oo,q.markUsedJustification(he,oo.anchor,Jr,Po))}}else{var Xo=function(za,qo){var Yo=q.collisionIndex.placeCollisionBox(za,Ht,Ke,_e,St.predicate);return Yo&&Yo.box&&Yo.box.length&&(q.markUsedOrientation(he,qo,Jr),q.placedOrientations[Jr.crossTileID]=qo),Yo};Za(function(){return Xo(wa,e.WritingMode.horizontal)},function(){var za=Pn.verticalTextBox;return he.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&za?Xo(za,e.WritingMode.vertical):{box:null,offscreen:null}}),Ga(ai&&ai.box&&ai.box.length)}}if($n=(ri=ai)&&ri.box&&ri.box.length>0,_i=ri&&ri.offscreen,Jr.useRuntimeCollisionCircles){var Is=he.text.placedSymbolArray.get(Jr.centerJustifiedTextSymbolIndex),Us=e.evaluateSizeForFeature(he.textSizeData,Pt,Is),sl=me.get("text-padding");Mi=q.collisionIndex.placeCollisionCircles(Ht,Is,he.lineVertexArray,he.glyphOffsetArray,Us,_e,Se,Ve,B,lr,St.predicate,Jr.collisionCircleDiameter,sl),$n=Ht||Mi.circles.length>0&&!Mi.collisionDetected,_i=_i&&Mi.offscreen}if(Pn.iconFeatureIndex&&(Wi=Pn.iconFeatureIndex),Pn.iconBox){var el=function(za){var qo=vr&&Ii?ar(za,Ii.x,Ii.y,Yt,lr,q.transform.angle):za;return q.collisionIndex.placeCollisionBox(qo,jt,Ke,_e,St.predicate)};ui=Si&&Si.box&&Si.box.length&&Pn.verticalIconBox?(Fi=el(Pn.verticalIconBox)).box.length>0:(Fi=el(Pn.iconBox)).box.length>0,_i=_i&&Fi.offscreen}var Oo=Lt||0===Jr.numHorizontalGlyphVertices&&0===Jr.numVerticalGlyphVertices,Zs=kt||0===Jr.numIconVertices;if(Oo||Zs?Zs?Oo||(ui=ui&&$n):$n=ui&&$n:ui=$n=ui&&$n,$n&&ri&&ri.box&&q.collisionIndex.insertCollisionBox(ri.box,me.get("text-ignore-placement"),he.bucketInstanceId,Si&&Si.box&&Bi?Bi:Ci,St.ID),ui&&Fi&&q.collisionIndex.insertCollisionBox(Fi.box,me.get("icon-ignore-placement"),he.bucketInstanceId,Wi,St.ID),Mi&&($n&&q.collisionIndex.insertCollisionCircles(Mi.circles,me.get("text-ignore-placement"),he.bucketInstanceId,Ci,St.ID),B)){var ll=he.bucketInstanceId,ys=q.collisionCircleArrays[ll];void 0===ys&&(ys=q.collisionCircleArrays[ll]=new On);for(var cl=0;cl<Mi.circles.length;cl+=4)ys.circles.push(Mi.circles[cl+0]),ys.circles.push(Mi.circles[cl+1]),ys.circles.push(Mi.circles[cl+2]),ys.circles.push(Mi.collisionDetected?1:0)}q.placements[Jr.crossTileID]=new qr($n||Dr,ui||sn,_i||he.justReloaded),O[Jr.crossTileID]=!0}};if(Or)for(var kn=he.getSortedSymbolIndexes(this.transform.angle),gn=kn.length-1;gn>=0;--gn){var Xn=kn[gn];on(he.symbolInstances.get(Xn),he.collisionArrays[Xn])}else for(var ti=E.symbolInstanceStart;ti<E.symbolInstanceEnd;ti++)on(he.symbolInstances.get(ti),he.collisionArrays[ti]);if(B&&he.bucketInstanceId in this.collisionCircleArrays){var gi=this.collisionCircleArrays[he.bucketInstanceId];e.invert(gi.invProjMatrix,_e),gi.viewportMatrix=this.collisionIndex.getViewportMatrix()}he.justReloaded=!1},zt.prototype.markUsedJustification=function(E,O,B,q){var ae;ae=q===e.WritingMode.vertical?B.verticalPlacedTextSymbolIndex:{left:B.leftJustifiedTextSymbolIndex,center:B.centerJustifiedTextSymbolIndex,right:B.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(O)];for(var me=0,_e=[B.leftJustifiedTextSymbolIndex,B.centerJustifiedTextSymbolIndex,B.rightJustifiedTextSymbolIndex,B.verticalPlacedTextSymbolIndex];me<_e.length;me+=1){var Se=_e[me];Se>=0&&(E.text.placedSymbolArray.get(Se).crossTileID=ae>=0&&Se!==ae?0:B.crossTileID)}},zt.prototype.markUsedOrientation=function(E,O,B){for(var q=O===e.WritingMode.horizontal||O===e.WritingMode.horizontalOnly?O:0,ae=O===e.WritingMode.vertical?O:0,he=0,me=[B.leftJustifiedTextSymbolIndex,B.centerJustifiedTextSymbolIndex,B.rightJustifiedTextSymbolIndex];he<me.length;he+=1)E.text.placedSymbolArray.get(me[he]).placedOrientation=q;B.verticalPlacedTextSymbolIndex&&(E.text.placedSymbolArray.get(B.verticalPlacedTextSymbolIndex).placedOrientation=ae)},zt.prototype.commit=function(E){this.commitTime=E,this.zoomAtLastRecencyCheck=this.transform.zoom;var O=this.prevPlacement,B=!1;this.prevZoomAdjustment=O?O.zoomAdjustment(this.transform.zoom):0;var q=O?O.symbolFadeChange(E):1,ae=O?O.opacities:{},he=O?O.variableOffsets:{},me=O?O.placedOrientations:{};for(var _e in this.placements){var Se=this.placements[_e],Ve=ae[_e];Ve?(this.opacities[_e]=new Un(Ve,q,Se.text,Se.icon),B=B||Se.text!==Ve.text.placed||Se.icon!==Ve.icon.placed):(this.opacities[_e]=new Un(null,q,Se.text,Se.icon,Se.skipFade),B=B||Se.text||Se.icon)}for(var Ke in ae){var st=ae[Ke];if(!this.opacities[Ke]){var At=new Un(st,q,!1,!1);At.isHidden()||(this.opacities[Ke]=At,B=B||st.text.placed||st.icon.placed)}}for(var Pt in he)this.variableOffsets[Pt]||!this.opacities[Pt]||this.opacities[Pt].isHidden()||(this.variableOffsets[Pt]=he[Pt]);for(var St in me)this.placedOrientations[St]||!this.opacities[St]||this.opacities[St].isHidden()||(this.placedOrientations[St]=me[St]);B?this.lastPlacementChangeTime=E:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=O?O.lastPlacementChangeTime:E)},zt.prototype.updateLayerOpacities=function(E,O){for(var B={},q=0,ae=O;q<ae.length;q+=1){var he=ae[q],me=he.getBucket(E);me&&he.latestFeatureIndex&&E.id===me.layerIds[0]&&this.updateBucketOpacities(me,B,he.collisionBoxArray)}},zt.prototype.updateBucketOpacities=function(E,O,B){var q=this;E.hasTextData()&&E.text.opacityVertexArray.clear(),E.hasIconData()&&E.icon.opacityVertexArray.clear(),E.hasIconCollisionBoxData()&&E.iconCollisionBox.collisionVertexArray.clear(),E.hasTextCollisionBoxData()&&E.textCollisionBox.collisionVertexArray.clear();var ae=E.layers[0].layout,he=new Un(null,0,!1,!1,!0),me=ae.get("text-allow-overlap"),_e=ae.get("icon-allow-overlap"),Se=ae.get("text-variable-anchor"),Ve="map"===ae.get("text-rotation-alignment"),Ke="map"===ae.get("text-pitch-alignment"),st="none"!==ae.get("icon-text-fit"),At=new Un(null,0,me&&(_e||!E.hasIconData()||ae.get("icon-optional")),_e&&(me||!E.hasTextData()||ae.get("text-optional")),!0);!E.collisionArrays&&B&&(E.hasIconCollisionBoxData()||E.hasTextCollisionBoxData())&&E.deserializeCollisionBoxes(B);for(var Pt=function(Ht,jt,Yt){for(var lr=0;lr<jt/4;lr++)Ht.opacityVertexArray.emplaceBack(Yt)},St=function(Ht){var jt=E.symbolInstances.get(Ht),Yt=jt.numHorizontalGlyphVertices,lr=jt.numVerticalGlyphVertices,vr=jt.crossTileID,Dr=q.opacities[vr];O[vr]?Dr=he:Dr||(q.opacities[vr]=Dr=At),O[vr]=!0;var on=jt.numIconVertices>0,kn=q.placedOrientations[jt.crossTileID],gn=kn===e.WritingMode.vertical,Xn=kn===e.WritingMode.horizontal||kn===e.WritingMode.horizontalOnly;if(Yt>0||lr>0){var ti=Sr(Dr.text);Pt(E.text,Yt,gn?Pr:ti),Pt(E.text,lr,Xn?Pr:ti);var Pn=Dr.text.isHidden();[jt.rightJustifiedTextSymbolIndex,jt.centerJustifiedTextSymbolIndex,jt.leftJustifiedTextSymbolIndex].forEach(function(Wi){Wi>=0&&(E.text.placedSymbolArray.get(Wi).hidden=Pn||gn?1:0)}),jt.verticalPlacedTextSymbolIndex>=0&&(E.text.placedSymbolArray.get(jt.verticalPlacedTextSymbolIndex).hidden=Pn||Xn?1:0);var ri=q.variableOffsets[jt.crossTileID];ri&&q.markUsedJustification(E,ri.anchor,jt,kn);var $n=q.placedOrientations[jt.crossTileID];$n&&(q.markUsedJustification(E,"left",jt,$n),q.markUsedOrientation(E,$n,jt))}if(on){var ui=Sr(Dr.icon),_i=!(st&&jt.verticalPlacedIconSymbolIndex&&gn);jt.placedIconSymbolIndex>=0&&(Pt(E.icon,jt.numIconVertices,_i?ui:Pr),E.icon.placedSymbolArray.get(jt.placedIconSymbolIndex).hidden=Dr.icon.isHidden()),jt.verticalPlacedIconSymbolIndex>=0&&(Pt(E.icon,jt.numVerticalIconVertices,_i?Pr:ui),E.icon.placedSymbolArray.get(jt.verticalPlacedIconSymbolIndex).hidden=Dr.icon.isHidden())}if(E.hasIconCollisionBoxData()||E.hasTextCollisionBoxData()){var Si=E.collisionArrays[Ht];if(Si){var Mi=new e.Point(0,0);if(Si.textBox||Si.verticalTextBox){var Fi=!0;if(Se){var Ci=q.variableOffsets[vr];Ci?(Mi=Vn(Ci.anchor,Ci.width,Ci.height,Ci.textOffset,Ci.textBoxScale),Ve&&Mi._rotate(Ke?q.transform.angle:-q.transform.angle)):Fi=!1}Si.textBox&&Gt(E.textCollisionBox.collisionVertexArray,Dr.text.placed,!Fi||gn,Mi.x,Mi.y),Si.verticalTextBox&&Gt(E.textCollisionBox.collisionVertexArray,Dr.text.placed,!Fi||Xn,Mi.x,Mi.y)}var Bi=Boolean(!Xn&&Si.verticalIconBox);Si.iconBox&&Gt(E.iconCollisionBox.collisionVertexArray,Dr.icon.placed,Bi,st?Mi.x:0,st?Mi.y:0),Si.verticalIconBox&&Gt(E.iconCollisionBox.collisionVertexArray,Dr.icon.placed,!Bi,st?Mi.x:0,st?Mi.y:0)}}},Lt=0;Lt<E.symbolInstances.length;Lt++)St(Lt);if(E.sortFeatures(this.transform.angle),this.retainedQueryData[E.bucketInstanceId]&&(this.retainedQueryData[E.bucketInstanceId].featureSortOrder=E.featureSortOrder),E.hasTextData()&&E.text.opacityVertexBuffer&&E.text.opacityVertexBuffer.updateData(E.text.opacityVertexArray),E.hasIconData()&&E.icon.opacityVertexBuffer&&E.icon.opacityVertexBuffer.updateData(E.icon.opacityVertexArray),E.hasIconCollisionBoxData()&&E.iconCollisionBox.collisionVertexBuffer&&E.iconCollisionBox.collisionVertexBuffer.updateData(E.iconCollisionBox.collisionVertexArray),E.hasTextCollisionBoxData()&&E.textCollisionBox.collisionVertexBuffer&&E.textCollisionBox.collisionVertexBuffer.updateData(E.textCollisionBox.collisionVertexArray),E.bucketInstanceId in this.collisionCircleArrays){var kt=this.collisionCircleArrays[E.bucketInstanceId];E.placementInvProjMatrix=kt.invProjMatrix,E.placementViewportMatrix=kt.viewportMatrix,E.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[E.bucketInstanceId]}},zt.prototype.symbolFadeChange=function(E){return 0===this.fadeDuration?1:(E-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},zt.prototype.zoomAdjustment=function(E){return Math.max(0,(this.transform.zoom-E)/1.5)},zt.prototype.hasTransitions=function(E){return this.stale||E-this.lastPlacementChangeTime<this.fadeDuration},zt.prototype.stillRecent=function(E,O){var B=this.zoomAtLastRecencyCheck===O?1-this.zoomAdjustment(O):1;return this.zoomAtLastRecencyCheck=O,this.commitTime+this.fadeDuration*B>E},zt.prototype.setStale=function(){this.stale=!0};var mr=Math.pow(2,25),Er=Math.pow(2,24),tn=Math.pow(2,17),Qr=Math.pow(2,16),Cr=Math.pow(2,9),Mr=Math.pow(2,8),Ir=Math.pow(2,1);function Sr(E){if(0===E.opacity&&!E.placed)return 0;if(1===E.opacity&&E.placed)return 4294967295;var O=E.placed?1:0,B=Math.floor(127*E.opacity);return B*mr+O*Er+B*tn+O*Qr+B*Cr+O*Mr+B*Ir+O}var Pr=0,Kr=function(E){this._sortAcrossTiles="viewport-y"!==E.layout.get("symbol-z-order")&&void 0!==E.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Kr.prototype.continuePlacement=function(E,O,B,q,ae){for(var he=this._bucketParts;this._currentTileIndex<E.length;)if(O.getBucketParts(he,q,E[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ae())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,he.sort(function(Se,Ve){return Se.sortKey-Ve.sortKey}));this._currentPartIndex<he.length;)if(O.placeLayerBucketPart(he[this._currentPartIndex],this._seenCrossTileIDs,B),this._currentPartIndex++,ae())return!0;return!1};var vn=function(E,O,B,q,ae,he,me){this.placement=new zt(E,ae,he,me),this._currentPlacementIndex=O.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=q,this._done=!1};vn.prototype.isDone=function(){return this._done},vn.prototype.continuePlacement=function(E,O,B){for(var q=this,ae=e.browser.now(),he=function(){var Se=e.browser.now()-ae;return!q._forceFullPlacement&&Se>2};this._currentPlacementIndex>=0;){var me=O[E[this._currentPlacementIndex]],_e=this.placement.collisionIndex.transform.zoom;if("symbol"===me.type&&(!me.minzoom||me.minzoom<=_e)&&(!me.maxzoom||me.maxzoom>_e)){if(this._inProgressLayer||(this._inProgressLayer=new Kr(me)),this._inProgressLayer.continuePlacement(B[me.source],this.placement,this._showCollisionBoxes,me,he))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},vn.prototype.commit=function(E){return this.placement.commit(E),this.placement};var Cn=512/e.EXTENT/2,ln=function(E,O,B){this.tileID=E,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var q=0;q<O.length;q++){var ae=O.get(q),he=ae.key;this.indexedSymbolInstances[he]||(this.indexedSymbolInstances[he]=[]),this.indexedSymbolInstances[he].push({crossTileID:ae.crossTileID,coord:this.getScaledCoordinates(ae,E)})}};ln.prototype.getScaledCoordinates=function(E,O){var q=Cn/Math.pow(2,O.canonical.z-this.tileID.canonical.z);return{x:Math.floor((O.canonical.x*e.EXTENT+E.anchorX)*q),y:Math.floor((O.canonical.y*e.EXTENT+E.anchorY)*q)}},ln.prototype.findMatches=function(E,O,B){for(var q=this.tileID.canonical.z<O.canonical.z?1:Math.pow(2,this.tileID.canonical.z-O.canonical.z),ae=0;ae<E.length;ae++){var he=E.get(ae);if(!he.crossTileID){var me=this.indexedSymbolInstances[he.key];if(me)for(var _e=this.getScaledCoordinates(he,O),Se=0,Ve=me;Se<Ve.length;Se+=1){var Ke=Ve[Se];if(Math.abs(Ke.coord.x-_e.x)<=q&&Math.abs(Ke.coord.y-_e.y)<=q&&!B[Ke.crossTileID]){B[Ke.crossTileID]=!0,he.crossTileID=Ke.crossTileID;break}}}}};var yn=function(){this.maxCrossTileID=0};yn.prototype.generate=function(){return++this.maxCrossTileID};var Zr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Zr.prototype.handleWrapJump=function(E){var O=Math.round((E-this.lng)/360);if(0!==O)for(var B in this.indexes){var q=this.indexes[B],ae={};for(var he in q){var me=q[he];me.tileID=me.tileID.unwrapTo(me.tileID.wrap+O),ae[me.tileID.key]=me}this.indexes[B]=ae}this.lng=E},Zr.prototype.addBucket=function(E,O,B){if(this.indexes[E.overscaledZ]&&this.indexes[E.overscaledZ][E.key]){if(this.indexes[E.overscaledZ][E.key].bucketInstanceId===O.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(E.overscaledZ,this.indexes[E.overscaledZ][E.key])}for(var q=0;q<O.symbolInstances.length;q++)O.symbolInstances.get(q).crossTileID=0;this.usedCrossTileIDs[E.overscaledZ]||(this.usedCrossTileIDs[E.overscaledZ]={});var ae=this.usedCrossTileIDs[E.overscaledZ];for(var he in this.indexes){var me=this.indexes[he];if(Number(he)>E.overscaledZ)for(var _e in me){var Se=me[_e];Se.tileID.isChildOf(E)&&Se.findMatches(O.symbolInstances,E,ae)}else{var Ve=me[E.scaledTo(Number(he)).key];Ve&&Ve.findMatches(O.symbolInstances,E,ae)}}for(var Ke=0;Ke<O.symbolInstances.length;Ke++){var st=O.symbolInstances.get(Ke);st.crossTileID||(st.crossTileID=B.generate(),ae[st.crossTileID]=!0)}return void 0===this.indexes[E.overscaledZ]&&(this.indexes[E.overscaledZ]={}),this.indexes[E.overscaledZ][E.key]=new ln(E,O.symbolInstances,O.bucketInstanceId),!0},Zr.prototype.removeBucketCrossTileIDs=function(E,O){for(var B in O.indexedSymbolInstances)for(var q=0,ae=O.indexedSymbolInstances[B];q<ae.length;q+=1)delete this.usedCrossTileIDs[E][ae[q].crossTileID]},Zr.prototype.removeStaleBuckets=function(E){var O=!1;for(var B in this.indexes){var q=this.indexes[B];for(var ae in q)E[q[ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(B,q[ae]),delete q[ae],O=!0)}return O};var Wr=function(){this.layerIndexes={},this.crossTileIDs=new yn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wr.prototype.addLayer=function(E,O,B){var q=this.layerIndexes[E.id];void 0===q&&(q=this.layerIndexes[E.id]=new Zr);var ae=!1,he={};q.handleWrapJump(B);for(var me=0,_e=O;me<_e.length;me+=1){var Se=_e[me],Ve=Se.getBucket(E);Ve&&E.id===Ve.layerIds[0]&&(Ve.bucketInstanceId||(Ve.bucketInstanceId=++this.maxBucketInstanceId),q.addBucket(Se.tileID,Ve,this.crossTileIDs)&&(ae=!0),he[Ve.bucketInstanceId]=!0)}return q.removeStaleBuckets(he)&&(ae=!0),ae},Wr.prototype.pruneUnusedLayers=function(E){var O={};for(var B in E.forEach(function(q){O[q]=!0}),this.layerIndexes)O[B]||delete this.layerIndexes[B]};var pn=function(E,O){return e.emitValidationErrors(E,O&&O.filter(function(B){return"source.canvas"!==B.identifier}))},Mn=e.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Dn=e.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),hi=function(){var E={},O=e.styleSpec.$version;for(var B in e.styleSpec.$root){var q=e.styleSpec.$root[B];if(q.required){var ae;null!=(ae="version"===B?O:"array"===q.type?[]:{})&&(E[B]=ae)}}return E}(),Qn=function(E){function O(B,q){var ae=this;void 0===q&&(q={}),E.call(this),this.map=B,this.dispatcher=new S($e(),this),this.imageManager=new f,this.imageManager.setEventedParent(this),this.glyphManager=new T(B._requestManager,q.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new Wr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var he=this;this._rtlTextPluginCallback=O.registerForPluginStateChange(function(me){he.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:me.pluginStatus,pluginURL:me.pluginURL},function(Se,Ve){if(e.triggerPluginCompletionEvent(Se),Ve&&Ve.every(function(st){return st}))for(var Ke in he.sourceCaches)he.sourceCaches[Ke].reload()})}),this.on("data",function(me){if("source"===me.dataType&&"metadata"===me.sourceDataType){var _e=ae.sourceCaches[me.sourceId];if(_e){var Se=_e.getSource();if(Se&&Se.vectorLayerIds)for(var Ve in ae._layers){var Ke=ae._layers[Ve];Ke.source===Se.id&&ae._validateLayer(Ke)}}}})}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.loadURL=function(B,q){var ae=this;void 0===q&&(q={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var he="boolean"==typeof q.validate?q.validate:!e.isMapboxURL(B);B=this.map._requestManager.normalizeStyleURL(B,q.accessToken);var me=this.map._requestManager.transformRequest(B,e.ResourceType.Style);this._request=e.getJSON(me,function(_e,Se){ae._request=null,_e?ae.fire(new e.ErrorEvent(_e)):Se&&ae._load(Se,he)})},O.prototype.loadJSON=function(B,q){var ae=this;void 0===q&&(q={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ae._request=null,ae._load(B,!1!==q.validate)})},O.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(hi,!1)},O.prototype._load=function(B,q){if(!q||!pn(this,e.validateStyle(B))){for(var ae in this._loaded=!0,this.stylesheet=B,B.sources)this.addSource(ae,B.sources[ae],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs);var he=Bt(this.stylesheet.layers);this._order=he.map(function(Ve){return Ve.id}),this._layers={},this._serializedLayers={};for(var me=0,_e=he;me<_e.length;me+=1){var Se=_e[me];(Se=e.createStyleLayer(Se)).setEventedParent(this,{layer:{id:Se.id}}),this._layers[Se.id]=Se,this._serializedLayers[Se.id]=Se.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},O.prototype._loadSprite=function(B){var q=this;this._spriteRequest=function(ae,he,me){var _e,Se,Ve,Ke=e.browser.devicePixelRatio>1?"@2x":"",st=e.getJSON(he.transformRequest(he.normalizeSpriteURL(ae,Ke,".json"),e.ResourceType.SpriteJSON),function(St,Lt){st=null,Ve||(Ve=St,_e=Lt,Pt())}),At=e.getImage(he.transformRequest(he.normalizeSpriteURL(ae,Ke,".png"),e.ResourceType.SpriteImage),function(St,Lt){At=null,Ve||(Ve=St,Se=Lt,Pt())});function Pt(){if(Ve)me(Ve);else if(_e&&Se){var St=e.browser.getImageData(Se),Lt={};for(var kt in _e){var Ht=_e[kt],jt=Ht.width,Yt=Ht.height,lr=Ht.x,vr=Ht.y,Or=Ht.sdf,Dr=Ht.pixelRatio,sn=Ht.stretchX,on=Ht.stretchY,kn=Ht.content,gn=new e.RGBAImage({width:jt,height:Yt});e.RGBAImage.copy(St,gn,{x:lr,y:vr},{x:0,y:0},{width:jt,height:Yt}),Lt[kt]={data:gn,pixelRatio:Dr,sdf:Or,stretchX:sn,stretchY:on,content:kn}}me(null,Lt)}}return{cancel:function(){st&&(st.cancel(),st=null),At&&(At.cancel(),At=null)}}}(B,this.map._requestManager,function(ae,he){if(q._spriteRequest=null,ae)q.fire(new e.ErrorEvent(ae));else if(he)for(var me in he)q.imageManager.addImage(me,he[me]);q.imageManager.setLoaded(!0),q._availableImages=q.imageManager.listImages(),q.dispatcher.broadcast("setImages",q._availableImages),q.fire(new e.Event("data",{dataType:"style"}))})},O.prototype._validateLayer=function(B){var q=this.sourceCaches[B.source];if(q){var ae=B.sourceLayer;if(ae){var he=q.getSource();("geojson"===he.type||he.vectorLayerIds&&-1===he.vectorLayerIds.indexOf(ae))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ae+'" does not exist on source "'+he.id+'" as specified by style layer "'+B.id+'"')))}}},O.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var B in this.sourceCaches)if(!this.sourceCaches[B].loaded())return!1;return!!this.imageManager.isLoaded()},O.prototype._serializeLayers=function(B){for(var q=[],ae=0,he=B;ae<he.length;ae+=1){var _e=this._layers[he[ae]];"custom"!==_e.type&&q.push(_e.serialize())}return q},O.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var B in this.sourceCaches)if(this.sourceCaches[B].hasTransition())return!0;for(var q in this._layers)if(this._layers[q].hasTransition())return!0;return!1},O.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},O.prototype.update=function(B){if(this._loaded){var q=this._changed;if(this._changed){var ae=Object.keys(this._updatedLayers),he=Object.keys(this._removedLayers);for(var me in(ae.length||he.length)&&this._updateWorkerLayers(ae,he),this._updatedSources){var _e=this._updatedSources[me];"reload"===_e?this._reloadSource(me):"clear"===_e&&this._clearSource(me)}for(var Se in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Se].updateTransitions(B);this.light.updateTransitions(B),this._resetUpdates()}for(var Ve in this.sourceCaches)this.sourceCaches[Ve].used=!1;for(var Ke=0,st=this._order;Ke<st.length;Ke+=1){var Pt=this._layers[st[Ke]];Pt.recalculate(B,this._availableImages),!Pt.isHidden(B.zoom)&&Pt.source&&(this.sourceCaches[Pt.source].used=!0)}this.light.recalculate(B),this.z=B.zoom,q&&this.fire(new e.Event("data",{dataType:"style"}))}},O.prototype._updateTilesForChangedImages=function(){var B=Object.keys(this._changedImages);if(B.length){for(var q in this.sourceCaches)this.sourceCaches[q].reloadTilesForDependencies(["icons","patterns"],B);this._changedImages={}}},O.prototype._updateWorkerLayers=function(B,q){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(B),removedIds:q})},O.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},O.prototype.setState=function(B){var q=this;if(this._checkLoaded(),pn(this,e.validateStyle(B)))return!1;(B=e.clone$1(B)).layers=Bt(B.layers);var ae=function(E,O){if(!E)return[{command:Ut.setStyle,args:[O]}];var B=[];try{if(!e.deepEqual(E.version,O.version))return[{command:Ut.setStyle,args:[O]}];e.deepEqual(E.center,O.center)||B.push({command:Ut.setCenter,args:[O.center]}),e.deepEqual(E.zoom,O.zoom)||B.push({command:Ut.setZoom,args:[O.zoom]}),e.deepEqual(E.bearing,O.bearing)||B.push({command:Ut.setBearing,args:[O.bearing]}),e.deepEqual(E.pitch,O.pitch)||B.push({command:Ut.setPitch,args:[O.pitch]}),e.deepEqual(E.sprite,O.sprite)||B.push({command:Ut.setSprite,args:[O.sprite]}),e.deepEqual(E.glyphs,O.glyphs)||B.push({command:Ut.setGlyphs,args:[O.glyphs]}),e.deepEqual(E.transition,O.transition)||B.push({command:Ut.setTransition,args:[O.transition]}),e.deepEqual(E.light,O.light)||B.push({command:Ut.setLight,args:[O.light]});var q={},ae=[];!function(me,_e,Se,Ve){var Ke;for(Ke in _e=_e||{},me=me||{})me.hasOwnProperty(Ke)&&(_e.hasOwnProperty(Ke)||Re(Ke,Se,Ve));for(Ke in _e)_e.hasOwnProperty(Ke)&&(me.hasOwnProperty(Ke)?e.deepEqual(me[Ke],_e[Ke])||("geojson"===me[Ke].type&&"geojson"===_e[Ke].type&&Mt(me,_e,Ke)?Se.push({command:Ut.setGeoJSONSourceData,args:[Ke,_e[Ke].data]}):ht(Ke,_e,Se,Ve)):Qt(Ke,_e,Se))}(E.sources,O.sources,ae,q);var he=[];E.layers&&E.layers.forEach(function(me){q[me.source]?B.push({command:Ut.removeLayer,args:[me.id]}):he.push(me)}),B=B.concat(ae),function(me,_e,Se){_e=_e||[];var Ve,Ke,st,At,Pt,St,Lt,kt=(me=me||[]).map(Zt),Ht=_e.map(Zt),jt=me.reduce(or,{}),Yt=_e.reduce(or,{}),lr=kt.slice(),vr=Object.create(null);for(Ve=0,Ke=0;Ve<kt.length;Ve++)Yt.hasOwnProperty(st=kt[Ve])?Ke++:(Se.push({command:Ut.removeLayer,args:[st]}),lr.splice(lr.indexOf(st,Ke),1));for(Ve=0,Ke=0;Ve<Ht.length;Ve++)lr[lr.length-1-Ve]!==(st=Ht[Ht.length-1-Ve])&&(jt.hasOwnProperty(st)?(Se.push({command:Ut.removeLayer,args:[st]}),lr.splice(lr.lastIndexOf(st,lr.length-Ke),1)):Ke++,Se.push({command:Ut.addLayer,args:[Yt[st],St=lr[lr.length-Ve]]}),lr.splice(lr.length-Ve,0,st),vr[st]=!0);for(Ve=0;Ve<Ht.length;Ve++)if(At=jt[st=Ht[Ve]],Pt=Yt[st],!vr[st]&&!e.deepEqual(At,Pt))if(e.deepEqual(At.source,Pt.source)&&e.deepEqual(At["source-layer"],Pt["source-layer"])&&e.deepEqual(At.type,Pt.type)){for(Lt in Nt(At.layout,Pt.layout,Se,st,null,Ut.setLayoutProperty),Nt(At.paint,Pt.paint,Se,st,null,Ut.setPaintProperty),e.deepEqual(At.filter,Pt.filter)||Se.push({command:Ut.setFilter,args:[st,Pt.filter]}),e.deepEqual(At.minzoom,Pt.minzoom)&&e.deepEqual(At.maxzoom,Pt.maxzoom)||Se.push({command:Ut.setLayerZoomRange,args:[st,Pt.minzoom,Pt.maxzoom]}),At)At.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Nt(At[Lt],Pt[Lt],Se,st,Lt.slice(6),Ut.setPaintProperty):e.deepEqual(At[Lt],Pt[Lt])||Se.push({command:Ut.setLayerProperty,args:[st,Lt,Pt[Lt]]}));for(Lt in Pt)Pt.hasOwnProperty(Lt)&&!At.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Nt(At[Lt],Pt[Lt],Se,st,Lt.slice(6),Ut.setPaintProperty):e.deepEqual(At[Lt],Pt[Lt])||Se.push({command:Ut.setLayerProperty,args:[st,Lt,Pt[Lt]]}))}else Se.push({command:Ut.removeLayer,args:[st]}),St=lr[lr.lastIndexOf(st)+1],Se.push({command:Ut.addLayer,args:[Pt,St]})}(he,O.layers,B)}catch(me){console.warn("Unable to compute style diff:",me),B=[{command:Ut.setStyle,args:[O]}]}return B}(this.serialize(),B).filter(function(me){return!(me.command in Dn)});if(0===ae.length)return!1;var he=ae.filter(function(me){return!(me.command in Mn)});if(he.length>0)throw new Error("Unimplemented: "+he.map(function(me){return me.command}).join(", ")+".");return ae.forEach(function(me){"setTransition"!==me.command&&q[me.command].apply(q,me.args)}),this.stylesheet=B,!0},O.prototype.addImage=function(B,q){if(this.getImage(B))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(B,q),this._availableImages=this.imageManager.listImages(),this._changedImages[B]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},O.prototype.updateImage=function(B,q){this.imageManager.updateImage(B,q)},O.prototype.getImage=function(B){return this.imageManager.getImage(B)},O.prototype.removeImage=function(B){if(!this.getImage(B))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(B),this._availableImages=this.imageManager.listImages(),this._changedImages[B]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},O.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},O.prototype.addSource=function(B,q,ae){var he=this;if(void 0===ae&&(ae={}),this._checkLoaded(),void 0!==this.sourceCaches[B])throw new Error("There is already a source with this ID");if(!q.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(q).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(q.type)>=0&&this._validate(e.validateStyle.source,"sources."+B,q,null,ae))){this.map&&this.map._collectResourceTiming&&(q.collectResourceTiming=!0);var me=this.sourceCaches[B]=new et(B,q,this.dispatcher);me.style=this,me.setEventedParent(this,function(){return{isSourceLoaded:he.loaded(),source:me.serialize(),sourceId:B}}),me.onAdd(this.map),this._changed=!0}},O.prototype.removeSource=function(B){if(this._checkLoaded(),void 0===this.sourceCaches[B])throw new Error("There is no source with this ID");for(var q in this._layers)if(this._layers[q].source===B)return this.fire(new e.ErrorEvent(new Error('Source "'+B+'" cannot be removed while layer "'+q+'" is using it.')));var ae=this.sourceCaches[B];delete this.sourceCaches[B],delete this._updatedSources[B],ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:B})),ae.setEventedParent(null),ae.clearTiles(),ae.onRemove&&ae.onRemove(this.map),this._changed=!0},O.prototype.setGeoJSONSourceData=function(B,q){this._checkLoaded(),this.sourceCaches[B].getSource().setData(q),this._changed=!0},O.prototype.getSource=function(B){return this.sourceCaches[B]&&this.sourceCaches[B].getSource()},O.prototype.addLayer=function(B,q,ae){void 0===ae&&(ae={}),this._checkLoaded();var he=B.id;if(this.getLayer(he))this.fire(new e.ErrorEvent(new Error('Layer with id "'+he+'" already exists on this map')));else{var me;if("custom"===B.type){if(pn(this,e.validateCustomStyleLayer(B)))return;me=e.createStyleLayer(B)}else{if("object"==typeof B.source&&(this.addSource(he,B.source),B=e.clone$1(B),B=e.extend(B,{source:he})),this._validate(e.validateStyle.layer,"layers."+he,B,{arrayIndex:-1},ae))return;me=e.createStyleLayer(B),this._validateLayer(me),me.setEventedParent(this,{layer:{id:he}}),this._serializedLayers[me.id]=me.serialize()}var _e=q?this._order.indexOf(q):this._order.length;if(q&&-1===_e)this.fire(new e.ErrorEvent(new Error('Layer with id "'+q+'" does not exist on this map.')));else{if(this._order.splice(_e,0,he),this._layerOrderChanged=!0,this._layers[he]=me,this._removedLayers[he]&&me.source&&"custom"!==me.type){var Se=this._removedLayers[he];delete this._removedLayers[he],Se.type!==me.type?this._updatedSources[me.source]="clear":(this._updatedSources[me.source]="reload",this.sourceCaches[me.source].pause())}this._updateLayer(me),me.onAdd&&me.onAdd(this.map)}}},O.prototype.moveLayer=function(B,q){if(this._checkLoaded(),this._changed=!0,this._layers[B]){if(B!==q){var ae=this._order.indexOf(B);this._order.splice(ae,1);var he=q?this._order.indexOf(q):this._order.length;q&&-1===he?this.fire(new e.ErrorEvent(new Error('Layer with id "'+q+'" does not exist on this map.'))):(this._order.splice(he,0,B),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be moved.")))},O.prototype.removeLayer=function(B){this._checkLoaded();var q=this._layers[B];if(q){q.setEventedParent(null);var ae=this._order.indexOf(B);this._order.splice(ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[B]=q,delete this._layers[B],delete this._serializedLayers[B],delete this._updatedLayers[B],delete this._updatedPaintProps[B],q.onRemove&&q.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be removed.")))},O.prototype.getLayer=function(B){return this._layers[B]},O.prototype.hasLayer=function(B){return B in this._layers},O.prototype.setLayerZoomRange=function(B,q,ae){this._checkLoaded();var he=this.getLayer(B);he?he.minzoom===q&&he.maxzoom===ae||(null!=q&&(he.minzoom=q),null!=ae&&(he.maxzoom=ae),this._updateLayer(he)):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot have zoom extent.")))},O.prototype.setFilter=function(B,q,ae){void 0===ae&&(ae={}),this._checkLoaded();var he=this.getLayer(B);if(he){if(!e.deepEqual(he.filter,q))return null==q?(he.filter=void 0,void this._updateLayer(he)):void(this._validate(e.validateStyle.filter,"layers."+he.id+".filter",q,null,ae)||(he.filter=e.clone$1(q),this._updateLayer(he)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be filtered.")))},O.prototype.getFilter=function(B){return e.clone$1(this.getLayer(B).filter)},O.prototype.setLayoutProperty=function(B,q,ae,he){void 0===he&&(he={}),this._checkLoaded();var me=this.getLayer(B);me?e.deepEqual(me.getLayoutProperty(q),ae)||(me.setLayoutProperty(q,ae,he),this._updateLayer(me)):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be styled.")))},O.prototype.getLayoutProperty=function(B,q){var ae=this.getLayer(B);if(ae)return ae.getLayoutProperty(q);this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style.")))},O.prototype.setPaintProperty=function(B,q,ae,he){void 0===he&&(he={}),this._checkLoaded();var me=this.getLayer(B);me?e.deepEqual(me.getPaintProperty(q),ae)||(me.setPaintProperty(q,ae,he)&&this._updateLayer(me),this._changed=!0,this._updatedPaintProps[B]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be styled.")))},O.prototype.getPaintProperty=function(B,q){return this.getLayer(B).getPaintProperty(q)},O.prototype.setFeatureState=function(B,q){this._checkLoaded();var ae=B.source,he=B.sourceLayer,me=this.sourceCaches[ae];if(void 0!==me){var _e=me.getSource().type;"geojson"===_e&&he?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==_e||he?(void 0===B.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),me.setFeatureState(he,B.id,q)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},O.prototype.removeFeatureState=function(B,q){this._checkLoaded();var ae=B.source,he=this.sourceCaches[ae];if(void 0!==he){var me=he.getSource().type,_e="vector"===me?B.sourceLayer:void 0;"vector"!==me||_e?q&&"string"!=typeof B.id&&"number"!=typeof B.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):he.removeFeatureState(_e,B.id,q):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},O.prototype.getFeatureState=function(B){this._checkLoaded();var q=B.source,ae=B.sourceLayer,he=this.sourceCaches[q];if(void 0!==he){if("vector"!==he.getSource().type||ae)return void 0===B.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),he.getFeatureState(ae,B.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},O.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},O.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(B){return B.serialize()}),layers:this._serializeLayers(this._order)},function(B){return void 0!==B})},O.prototype._updateLayer=function(B){this._updatedLayers[B.id]=!0,B.source&&!this._updatedSources[B.source]&&"raster"!==this.sourceCaches[B.source].getSource().type&&(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause()),this._changed=!0},O.prototype._flattenAndSortRenderedFeatures=function(B){for(var q=this,ae=function(kn){return"fill-extrusion"===q._layers[kn].type},he={},me=[],_e=this._order.length-1;_e>=0;_e--){var Se=this._order[_e];if(ae(Se)){he[Se]=_e;for(var Ve=0,Ke=B;Ve<Ke.length;Ve+=1){var st=Ke[Ve][Se];if(st)for(var At=0,Pt=st;At<Pt.length;At+=1)me.push(Pt[At])}}}me.sort(function(kn,gn){return gn.intersectionZ-kn.intersectionZ});for(var Lt=[],kt=this._order.length-1;kt>=0;kt--){var Ht=this._order[kt];if(ae(Ht))for(var jt=me.length-1;jt>=0;jt--){var Yt=me[jt].feature;if(he[Yt.layer.id]<kt)break;Lt.push(Yt),me.pop()}else for(var lr=0,vr=B;lr<vr.length;lr+=1){var Or=vr[lr][Ht];if(Or)for(var Dr=0,sn=Or;Dr<sn.length;Dr+=1)Lt.push(sn[Dr].feature)}}return Lt},O.prototype.queryRenderedFeatures=function(B,q,ae){q&&q.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",q.filter,null,q);var he={};if(q&&q.layers){if(!Array.isArray(q.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var me=0,_e=q.layers;me<_e.length;me+=1){var Se=_e[me],Ve=this._layers[Se];if(!Ve)return this.fire(new e.ErrorEvent(new Error("The layer '"+Se+"' does not exist in the map's style and cannot be queried for features."))),[];he[Ve.source]=!0}}var Ke=[];for(var st in q.availableImages=this._availableImages,this.sourceCaches)q.layers&&!he[st]||Ke.push(V(this.sourceCaches[st],this._layers,this._serializedLayers,B,q,ae));return this.placement&&Ke.push(function(At,Pt,St,Lt,kt,Ht,jt){for(var Yt={},lr=Ht.queryRenderedSymbols(Lt),vr=[],Or=0,Dr=Object.keys(lr).map(Number);Or<Dr.length;Or+=1)vr.push(jt[Dr[Or]]);vr.sort(Q);for(var on=function(){var gi=gn[kn],Jr=gi.featureIndex.lookupSymbolFeatures(lr[gi.bucketInstanceId],Pt,gi.bucketIndex,gi.sourceLayerIndex,kt.filter,kt.layers,kt.availableImages,At);for(var Pn in Jr){var ri=Yt[Pn]=Yt[Pn]||[],$n=Jr[Pn];$n.sort(function(ai,Si){var Mi=gi.featureSortOrder;if(Mi){var Fi=Mi.indexOf(ai.featureIndex);return Mi.indexOf(Si.featureIndex)-Fi}return Si.featureIndex-ai.featureIndex});for(var ui=0,_i=$n;ui<_i.length;ui+=1)ri.push(_i[ui])}},kn=0,gn=vr;kn<gn.length;kn+=1)on();var Xn=function(gi){Yt[gi].forEach(function(Jr){var Pn=Jr.feature,$n=St[At[gi].source].getFeatureState(Pn.layer["source-layer"],Pn.id);Pn.source=Pn.layer.source,Pn.layer["source-layer"]&&(Pn.sourceLayer=Pn.layer["source-layer"]),Pn.state=$n})};for(var ti in Yt)Xn(ti);return Yt}(this._layers,this._serializedLayers,this.sourceCaches,B,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ke)},O.prototype.querySourceFeatures=function(B,q){q&&q.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",q.filter,null,q);var ae=this.sourceCaches[B];return ae?function(he,me){for(var _e=he.getRenderableIds().map(function(Pt){return he.getTileByID(Pt)}),Se=[],Ve={},Ke=0;Ke<_e.length;Ke++){var st=_e[Ke],At=st.tileID.canonical.key;Ve[At]||(Ve[At]=!0,st.querySourceFeatures(Se,me))}return Se}(ae,q):[]},O.prototype.addSourceType=function(B,q,ae){return O.getSourceType(B)?ae(new Error('A source type called "'+B+'" already exists.')):(O.setSourceType(B,q),q.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:B,url:q.workerSourceURL},ae):ae(null,null))},O.prototype.getLight=function(){return this.light.getLight()},O.prototype.setLight=function(B,q){void 0===q&&(q={}),this._checkLoaded();var ae=this.light.getLight(),he=!1;for(var me in B)if(!e.deepEqual(B[me],ae[me])){he=!0;break}if(he){var _e={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(B,q),this.light.updateTransitions(_e)}},O.prototype._validate=function(B,q,ae,he,me){return void 0===me&&(me={}),(!me||!1!==me.validate)&&pn(this,B.call(e.validateStyle,e.extend({key:q,style:this.serialize(),value:ae,styleSpec:e.styleSpec},he)))},O.prototype._remove=function(){for(var B in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[B].setEventedParent(null);for(var q in this.sourceCaches)this.sourceCaches[q].clearTiles(),this.sourceCaches[q].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},O.prototype._clearSource=function(B){this.sourceCaches[B].clearTiles()},O.prototype._reloadSource=function(B){this.sourceCaches[B].resume(),this.sourceCaches[B].reload()},O.prototype._updateSources=function(B){for(var q in this.sourceCaches)this.sourceCaches[q].update(B)},O.prototype._generateCollisionBoxes=function(){for(var B in this.sourceCaches)this._reloadSource(B)},O.prototype._updatePlacement=function(B,q,ae,he,me){void 0===me&&(me=!1);for(var _e=!1,Se=!1,Ve={},Ke=0,st=this._order;Ke<st.length;Ke+=1){var Pt=this._layers[st[Ke]];if("symbol"===Pt.type){if(!Ve[Pt.source]){var St=this.sourceCaches[Pt.source];Ve[Pt.source]=St.getRenderableIds(!0).map(function(lr){return St.getTileByID(lr)}).sort(function(lr,vr){return vr.tileID.overscaledZ-lr.tileID.overscaledZ||(lr.tileID.isLessThan(vr.tileID)?-1:1)})}var Lt=this.crossTileSymbolIndex.addLayer(Pt,Ve[Pt.source],B.center.lng);_e=_e||Lt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((me=me||this._layerOrderChanged||0===ae)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),B.zoom))&&(this.pauseablePlacement=new vn(B,this._order,me,q,ae,he,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ve),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Se=!0),_e&&this.pauseablePlacement.placement.setStale()),Se||_e)for(var kt=0,Ht=this._order;kt<Ht.length;kt+=1){var Yt=this._layers[Ht[kt]];"symbol"===Yt.type&&this.placement.updateLayerOpacities(Yt,Ve[Yt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},O.prototype._releaseSymbolFadeTiles=function(){for(var B in this.sourceCaches)this.sourceCaches[B].releaseSymbolFadeTiles()},O.prototype.getImages=function(B,q,ae){this.imageManager.getImages(q.icons,ae),this._updateTilesForChangedImages();var he=this.sourceCaches[q.source];he&&he.setDependencies(q.tileID.key,q.type,q.icons)},O.prototype.getGlyphs=function(B,q,ae){this.glyphManager.getGlyphs(q.stacks,ae)},O.prototype.getResource=function(B,q,ae){return e.makeRequest(q,ae)},O}(e.Evented);Qn.getSourceType=function(E){return z[E]},Qn.setSourceType=function(E,O){z[E]=O},Qn.registerForPluginStateChange=e.registerForPluginStateChange;var An=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),ci=Ki("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),yi=Ki("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xi=Ki("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Da=Ki("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),la=Ki("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ma=Ki("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Oi=Ki("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Yi=Ki("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),_a=Ki("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Co=Ki("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Zo=Ki("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Xa=Ki("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),to=Ki("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Uo=Ki("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ji=Ki("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Eo=Ki("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),lo=Ki("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Aa=Ki("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ro=Ki("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),mo=Ki("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Mo=Ki("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Va=Ki("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ga=Ki("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ja=Ki("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),bs=Ki("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),As=Ki("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Ki(E,O){var B=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,q={};return{fragmentSource:E=E.replace(B,function(ae,he,me,_e,Se){return q[Se]=!0,"define"===he?"\n#ifndef HAS_UNIFORM_u_"+Se+"\nvarying "+me+" "+_e+" "+Se+";\n#else\nuniform "+me+" "+_e+" u_"+Se+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Se+"\n    "+me+" "+_e+" "+Se+" = u_"+Se+";\n#endif\n"}),vertexSource:O=O.replace(B,function(ae,he,me,_e,Se){var Ve="float"===_e?"vec2":"vec4",Ke=Se.match(/color/)?"color":Ve;return q[Se]?"define"===he?"\n#ifndef HAS_UNIFORM_u_"+Se+"\nuniform lowp float u_"+Se+"_t;\nattribute "+me+" "+Ve+" a_"+Se+";\nvarying "+me+" "+_e+" "+Se+";\n#else\nuniform "+me+" "+_e+" u_"+Se+";\n#endif\n":"vec4"===Ke?"\n#ifndef HAS_UNIFORM_u_"+Se+"\n    "+Se+" = a_"+Se+";\n#else\n    "+me+" "+_e+" "+Se+" = u_"+Se+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Se+"\n    "+Se+" = unpack_mix_"+Ke+"(a_"+Se+", u_"+Se+"_t);\n#else\n    "+me+" "+_e+" "+Se+" = u_"+Se+";\n#endif\n":"define"===he?"\n#ifndef HAS_UNIFORM_u_"+Se+"\nuniform lowp float u_"+Se+"_t;\nattribute "+me+" "+Ve+" a_"+Se+";\n#else\nuniform "+me+" "+_e+" u_"+Se+";\n#endif\n":"vec4"===Ke?"\n#ifndef HAS_UNIFORM_u_"+Se+"\n    "+me+" "+_e+" "+Se+" = a_"+Se+";\n#else\n    "+me+" "+_e+" "+Se+" = u_"+Se+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Se+"\n    "+me+" "+_e+" "+Se+" = unpack_mix_"+Ke+"(a_"+Se+", u_"+Se+"_t);\n#else\n    "+me+" "+_e+" "+Se+" = u_"+Se+";\n#endif\n"})}}var fs=Object.freeze({__proto__:null,prelude:ci,background:yi,backgroundPattern:Xi,circle:Da,clippingMask:la,heatmap:Ma,heatmapTexture:Oi,collisionBox:Yi,collisionCircle:_a,debug:Co,fill:Zo,fillOutline:Xa,fillOutlinePattern:to,fillPattern:Uo,fillExtrusion:Ji,fillExtrusionPattern:Eo,hillshadePrepare:lo,hillshade:Aa,line:ro,lineGradient:mo,linePattern:Mo,lineSDF:Va,raster:ga,symbolIcon:Ja,symbolSDF:bs,symbolTextAndIcon:As}),$o=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};$o.prototype.bind=function(E,O,B,q,ae,he,me,_e){this.context=E;for(var Se=this.boundPaintVertexBuffers.length!==q.length,Ve=0;!Se&&Ve<q.length;Ve++)this.boundPaintVertexBuffers[Ve]!==q[Ve]&&(Se=!0);E.extVertexArrayObject&&this.vao&&this.boundProgram===O&&this.boundLayoutVertexBuffer===B&&!Se&&this.boundIndexBuffer===ae&&this.boundVertexOffset===he&&this.boundDynamicVertexBuffer===me&&this.boundDynamicVertexBuffer2===_e?(E.bindVertexArrayOES.set(this.vao),me&&me.bind(),ae&&ae.dynamicDraw&&ae.bind(),_e&&_e.bind()):this.freshBind(O,B,q,ae,he,me,_e)},$o.prototype.freshBind=function(E,O,B,q,ae,he,me){var _e,Se=E.numAttributes,Ve=this.context,Ke=Ve.gl;if(Ve.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ve.extVertexArrayObject.createVertexArrayOES(),Ve.bindVertexArrayOES.set(this.vao),_e=0,this.boundProgram=E,this.boundLayoutVertexBuffer=O,this.boundPaintVertexBuffers=B,this.boundIndexBuffer=q,this.boundVertexOffset=ae,this.boundDynamicVertexBuffer=he,this.boundDynamicVertexBuffer2=me;else{_e=Ve.currentNumAttributes||0;for(var st=Se;st<_e;st++)Ke.disableVertexAttribArray(st)}O.enableAttributes(Ke,E);for(var At=0,Pt=B;At<Pt.length;At+=1)Pt[At].enableAttributes(Ke,E);he&&he.enableAttributes(Ke,E),me&&me.enableAttributes(Ke,E),O.bind(),O.setVertexAttribPointers(Ke,E,ae);for(var St=0,Lt=B;St<Lt.length;St+=1){var kt=Lt[St];kt.bind(),kt.setVertexAttribPointers(Ke,E,ae)}he&&(he.bind(),he.setVertexAttribPointers(Ke,E,ae)),q&&q.bind(),me&&(me.bind(),me.setVertexAttribPointers(Ke,E,ae)),Ve.currentNumAttributes=Se},$o.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ls=function(E,O,B,q,ae){var he=E.gl;this.program=he.createProgram();var me=B?B.defines():[];ae&&me.push("#define OVERDRAW_INSPECTOR;");var _e=me.concat(ci.fragmentSource,O.fragmentSource).join("\n"),Se=me.concat(ci.vertexSource,O.vertexSource).join("\n"),Ve=he.createShader(he.FRAGMENT_SHADER);if(he.isContextLost())this.failedToCreate=!0;else{he.shaderSource(Ve,_e),he.compileShader(Ve),he.attachShader(this.program,Ve);var Ke=he.createShader(he.VERTEX_SHADER);if(he.isContextLost())this.failedToCreate=!0;else{he.shaderSource(Ke,Se),he.compileShader(Ke),he.attachShader(this.program,Ke);for(var st=B?B.layoutAttributes:[],At=0;At<st.length;At++)he.bindAttribLocation(this.program,At,st[At].name);he.linkProgram(this.program),he.deleteShader(Ke),he.deleteShader(Ve),this.numAttributes=he.getProgramParameter(this.program,he.ACTIVE_ATTRIBUTES),this.attributes={};for(var Pt={},St=0;St<this.numAttributes;St++){var Lt=he.getActiveAttrib(this.program,St);Lt&&(this.attributes[Lt.name]=he.getAttribLocation(this.program,Lt.name))}for(var kt=he.getProgramParameter(this.program,he.ACTIVE_UNIFORMS),Ht=0;Ht<kt;Ht++){var jt=he.getActiveUniform(this.program,Ht);jt&&(Pt[jt.name]=he.getUniformLocation(this.program,jt.name))}this.fixedUniforms=q(E,Pt),this.binderUniforms=B?B.getUniforms(E,Pt):[]}}};function es(E,O,B){var q=1/Lr(B,1,O.transform.tileZoom),ae=Math.pow(2,B.tileID.overscaledZ),he=B.tileSize*Math.pow(2,O.transform.tileZoom)/ae,me=he*(B.tileID.canonical.x+B.tileID.wrap*ae),_e=he*B.tileID.canonical.y;return{u_image:0,u_texsize:B.imageAtlasTexture.size,u_scale:[q,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[me>>16,_e>>16],u_pixel_coord_lower:[65535&me,65535&_e]}}Ls.prototype.draw=function(E,O,B,q,ae,he,me,_e,Se,Ve,Ke,st,At,Pt,St,Lt){var kt,Ht=E.gl;if(!this.failedToCreate){for(var jt in E.program.set(this.program),E.setDepthMode(B),E.setStencilMode(q),E.setColorMode(ae),E.setCullFace(he),this.fixedUniforms)this.fixedUniforms[jt].set(me[jt]);Pt&&Pt.setUniforms(E,this.binderUniforms,st,{zoom:At});for(var Yt=(kt={},kt[Ht.LINES]=2,kt[Ht.TRIANGLES]=3,kt[Ht.LINE_STRIP]=1,kt)[O],lr=0,vr=Ke.get();lr<vr.length;lr+=1){var Or=vr[lr],Dr=Or.vaos||(Or.vaos={});(Dr[_e]||(Dr[_e]=new $o)).bind(E,this,Se,Pt?Pt.getPaintVertexBuffers():[],Ve,Or.vertexOffset,St,Lt),Ht.drawElements(O,Or.primitiveLength*Yt,Ht.UNSIGNED_SHORT,Or.primitiveOffset*Yt*2)}}};var ss=function(E,O,B,q){var ae=O.style.light,he=ae.properties.get("position"),me=[he.x,he.y,he.z],_e=e.create$1();"viewport"===ae.properties.get("anchor")&&e.fromRotation(_e,-O.transform.angle),e.transformMat3(me,me,_e);var Se=ae.properties.get("color");return{u_matrix:E,u_lightpos:me,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[Se.r,Se.g,Se.b],u_vertical_gradient:+B,u_opacity:q}},Wo=function(E,O,B,q,ae,he,me){return e.extend(ss(E,O,B,q),es(he,O,me),{u_height_factor:-Math.pow(2,ae.overscaledZ)/me.tileSize/8})},go=function(E){return{u_matrix:E}},vo=function(E,O,B,q){return e.extend(go(E),es(B,O,q))},Lo=function(E,O){return{u_matrix:E,u_world:O}},Do=function(E,O,B,q,ae){return e.extend(vo(E,O,B,q),{u_world:ae})},pa=function(E,O,B,q){var ae,he,me=E.transform;if("map"===q.paint.get("circle-pitch-alignment")){var _e=Lr(B,1,me.zoom);ae=!0,he=[_e,_e]}else ae=!1,he=me.pixelsToGLUnits;return{u_camera_to_center_distance:me.cameraToCenterDistance,u_scale_with_map:+("map"===q.paint.get("circle-pitch-scale")),u_matrix:E.translatePosMatrix(O.posMatrix,B,q.paint.get("circle-translate"),q.paint.get("circle-translate-anchor")),u_pitch_with_map:+ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:he}},co=function(E,O,B){var q=Lr(B,1,O.zoom),ae=Math.pow(2,O.zoom-B.tileID.overscaledZ),he=B.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:O.cameraToCenterDistance,u_pixels_to_tile_units:q,u_extrude_scale:[O.pixelsToGLUnits[0]/(q*ae),O.pixelsToGLUnits[1]/(q*ae)],u_overscale_factor:he}},yo=function(E,O,B){return{u_matrix:E,u_inv_matrix:O,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},ps=function(E,O,B){return void 0===B&&(B=1),{u_matrix:E,u_color:O,u_overlay:0,u_overlay_scale:B}},uo=function(E){return{u_matrix:E}},Bo=function(E,O,B,q){return{u_matrix:E,u_extrude_scale:Lr(O,1,B),u_intensity:q}};function ds(E,O){var B=Math.pow(2,O.canonical.z),q=O.canonical.y;return[new e.MercatorCoordinate(0,q/B).toLngLat().lat,new e.MercatorCoordinate(0,(q+1)/B).toLngLat().lat]}var Io=function(E,O,B){var q=E.transform;return{u_matrix:lt(E,O,B),u_ratio:1/Lr(O,1,q.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},Gi=function(E,O,B){return e.extend(Io(E,O,B),{u_image:0})},je=function(E,O,B,q){var ae=E.transform,he=nt(O,ae);return{u_matrix:lt(E,O,B),u_texsize:O.imageAtlasTexture.size,u_ratio:1/Lr(O,1,ae.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[he,q.fromScale,q.toScale],u_fade:q.t,u_units_to_pixels:[1/ae.pixelsToGLUnits[0],1/ae.pixelsToGLUnits[1]]}},Ge=function(E,O,B,q,ae){var me=E.lineAtlas,_e=nt(O,E.transform),Se="round"===B.layout.get("line-cap"),Ve=me.getDash(q.from,Se),Ke=me.getDash(q.to,Se),st=Ve.width*ae.fromScale,At=Ke.width*ae.toScale;return e.extend(Io(E,O,B),{u_patternscale_a:[_e/st,-Ve.height/2],u_patternscale_b:[_e/At,-Ke.height/2],u_sdfgamma:me.width/(256*Math.min(st,At)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ve.y,u_tex_y_b:Ke.y,u_mix:ae.t})};function nt(E,O){return 1/Lr(E,1,O.tileZoom)}function lt(E,O,B){return E.translatePosMatrix(O.tileID.posMatrix,O,B.paint.get("line-translate"),B.paint.get("line-translate-anchor"))}var _t=function(E,O,B,q,ae){return{u_matrix:E,u_tl_parent:O,u_scale_parent:B,u_buffer_scale:1,u_fade_t:q.mix,u_opacity:q.opacity*ae.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ae.paint.get("raster-brightness-min"),u_brightness_high:ae.paint.get("raster-brightness-max"),u_saturation_factor:(me=ae.paint.get("raster-saturation"),me>0?1-1/(1.001-me):-me),u_contrast_factor:(he=ae.paint.get("raster-contrast"),he>0?1/(1-he):1+he),u_spin_weights:mt(ae.paint.get("raster-hue-rotate"))};var he,me};function mt(E){E*=Math.PI/180;var O=Math.sin(E),B=Math.cos(E);return[(2*B+1)/3,(-Math.sqrt(3)*O-B+1)/3,(Math.sqrt(3)*O-B+1)/3]}var Ct,rr=function(E,O,B,q,ae,he,me,_e,Se,Ve){var Ke=ae.transform;return{u_is_size_zoom_constant:+("constant"===E||"source"===E),u_is_size_feature_constant:+("constant"===E||"camera"===E),u_size_t:O?O.uSizeT:0,u_size:O?O.uSize:0,u_camera_to_center_distance:Ke.cameraToCenterDistance,u_pitch:Ke.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:Ke.width/Ke.height,u_fade_change:ae.options.fadeDuration?ae.symbolFadeChange:1,u_matrix:he,u_label_plane_matrix:me,u_coord_matrix:_e,u_is_text:+Se,u_pitch_with_map:+q,u_texsize:Ve,u_texture:0}},ir=function(E,O,B,q,ae,he,me,_e,Se,Ve,Ke){var st=ae.transform;return e.extend(rr(E,O,B,q,ae,he,me,_e,Se,Ve),{u_gamma_scale:q?Math.cos(st._pitch)*st.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Ke})},$t=function(E,O,B,q,ae,he,me,_e,Se,Ve){return e.extend(ir(E,O,B,q,ae,he,me,_e,!0,Se,!0),{u_texsize_icon:Ve,u_texture_icon:1})},sr=function(E,O,B){return{u_matrix:E,u_opacity:O,u_color:B}},gr=function(E,O,B,q,ae,he){return e.extend((_e=he,Ve=ae,Ke=(Se=B).imageManager.getPattern((me=q).from.toString()),st=Se.imageManager.getPattern(me.to.toString()),Pt=(At=Se.imageManager.getPixelSize()).width,St=At.height,Lt=Math.pow(2,Ve.tileID.overscaledZ),Ht=(kt=Ve.tileSize*Math.pow(2,Se.transform.tileZoom)/Lt)*(Ve.tileID.canonical.x+Ve.tileID.wrap*Lt),jt=kt*Ve.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Ke.tl,u_pattern_br_a:Ke.br,u_pattern_tl_b:st.tl,u_pattern_br_b:st.br,u_texsize:[Pt,St],u_mix:_e.t,u_pattern_size_a:Ke.displaySize,u_pattern_size_b:st.displaySize,u_scale_a:_e.fromScale,u_scale_b:_e.toScale,u_tile_units_to_pixels:1/Lr(Ve,1,Se.transform.tileZoom),u_pixel_coord_upper:[Ht>>16,jt>>16],u_pixel_coord_lower:[65535&Ht,65535&jt]}),{u_matrix:E,u_opacity:O});var me,_e,Se,Ve,Ke,st,At,Pt,St,Lt,kt,Ht,jt},Tr={fillExtrusion:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_lightpos:new e.Uniform3f(E,O.u_lightpos),u_lightintensity:new e.Uniform1f(E,O.u_lightintensity),u_lightcolor:new e.Uniform3f(E,O.u_lightcolor),u_vertical_gradient:new e.Uniform1f(E,O.u_vertical_gradient),u_opacity:new e.Uniform1f(E,O.u_opacity)}},fillExtrusionPattern:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_lightpos:new e.Uniform3f(E,O.u_lightpos),u_lightintensity:new e.Uniform1f(E,O.u_lightintensity),u_lightcolor:new e.Uniform3f(E,O.u_lightcolor),u_vertical_gradient:new e.Uniform1f(E,O.u_vertical_gradient),u_height_factor:new e.Uniform1f(E,O.u_height_factor),u_image:new e.Uniform1i(E,O.u_image),u_texsize:new e.Uniform2f(E,O.u_texsize),u_pixel_coord_upper:new e.Uniform2f(E,O.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(E,O.u_pixel_coord_lower),u_scale:new e.Uniform3f(E,O.u_scale),u_fade:new e.Uniform1f(E,O.u_fade),u_opacity:new e.Uniform1f(E,O.u_opacity)}},fill:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix)}},fillPattern:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_image:new e.Uniform1i(E,O.u_image),u_texsize:new e.Uniform2f(E,O.u_texsize),u_pixel_coord_upper:new e.Uniform2f(E,O.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(E,O.u_pixel_coord_lower),u_scale:new e.Uniform3f(E,O.u_scale),u_fade:new e.Uniform1f(E,O.u_fade)}},fillOutline:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_world:new e.Uniform2f(E,O.u_world)}},fillOutlinePattern:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_world:new e.Uniform2f(E,O.u_world),u_image:new e.Uniform1i(E,O.u_image),u_texsize:new e.Uniform2f(E,O.u_texsize),u_pixel_coord_upper:new e.Uniform2f(E,O.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(E,O.u_pixel_coord_lower),u_scale:new e.Uniform3f(E,O.u_scale),u_fade:new e.Uniform1f(E,O.u_fade)}},circle:function(E,O){return{u_camera_to_center_distance:new e.Uniform1f(E,O.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(E,O.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(E,O.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(E,O.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(E,O.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(E,O.u_matrix)}},collisionBox:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_camera_to_center_distance:new e.Uniform1f(E,O.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(E,O.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(E,O.u_extrude_scale),u_overscale_factor:new e.Uniform1f(E,O.u_overscale_factor)}},collisionCircle:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_inv_matrix:new e.UniformMatrix4f(E,O.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(E,O.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(E,O.u_viewport_size)}},debug:function(E,O){return{u_color:new e.UniformColor(E,O.u_color),u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_overlay:new e.Uniform1i(E,O.u_overlay),u_overlay_scale:new e.Uniform1f(E,O.u_overlay_scale)}},clippingMask:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix)}},heatmap:function(E,O){return{u_extrude_scale:new e.Uniform1f(E,O.u_extrude_scale),u_intensity:new e.Uniform1f(E,O.u_intensity),u_matrix:new e.UniformMatrix4f(E,O.u_matrix)}},heatmapTexture:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_world:new e.Uniform2f(E,O.u_world),u_image:new e.Uniform1i(E,O.u_image),u_color_ramp:new e.Uniform1i(E,O.u_color_ramp),u_opacity:new e.Uniform1f(E,O.u_opacity)}},hillshade:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_image:new e.Uniform1i(E,O.u_image),u_latrange:new e.Uniform2f(E,O.u_latrange),u_light:new e.Uniform2f(E,O.u_light),u_shadow:new e.UniformColor(E,O.u_shadow),u_highlight:new e.UniformColor(E,O.u_highlight),u_accent:new e.UniformColor(E,O.u_accent)}},hillshadePrepare:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_image:new e.Uniform1i(E,O.u_image),u_dimension:new e.Uniform2f(E,O.u_dimension),u_zoom:new e.Uniform1f(E,O.u_zoom),u_maxzoom:new e.Uniform1f(E,O.u_maxzoom),u_unpack:new e.Uniform4f(E,O.u_unpack)}},line:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_ratio:new e.Uniform1f(E,O.u_ratio),u_device_pixel_ratio:new e.Uniform1f(E,O.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(E,O.u_units_to_pixels)}},lineGradient:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_ratio:new e.Uniform1f(E,O.u_ratio),u_device_pixel_ratio:new e.Uniform1f(E,O.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(E,O.u_units_to_pixels),u_image:new e.Uniform1i(E,O.u_image)}},linePattern:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_texsize:new e.Uniform2f(E,O.u_texsize),u_ratio:new e.Uniform1f(E,O.u_ratio),u_device_pixel_ratio:new e.Uniform1f(E,O.u_device_pixel_ratio),u_image:new e.Uniform1i(E,O.u_image),u_units_to_pixels:new e.Uniform2f(E,O.u_units_to_pixels),u_scale:new e.Uniform3f(E,O.u_scale),u_fade:new e.Uniform1f(E,O.u_fade)}},lineSDF:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_ratio:new e.Uniform1f(E,O.u_ratio),u_device_pixel_ratio:new e.Uniform1f(E,O.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(E,O.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(E,O.u_patternscale_a),u_patternscale_b:new e.Uniform2f(E,O.u_patternscale_b),u_sdfgamma:new e.Uniform1f(E,O.u_sdfgamma),u_image:new e.Uniform1i(E,O.u_image),u_tex_y_a:new e.Uniform1f(E,O.u_tex_y_a),u_tex_y_b:new e.Uniform1f(E,O.u_tex_y_b),u_mix:new e.Uniform1f(E,O.u_mix)}},raster:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_tl_parent:new e.Uniform2f(E,O.u_tl_parent),u_scale_parent:new e.Uniform1f(E,O.u_scale_parent),u_buffer_scale:new e.Uniform1f(E,O.u_buffer_scale),u_fade_t:new e.Uniform1f(E,O.u_fade_t),u_opacity:new e.Uniform1f(E,O.u_opacity),u_image0:new e.Uniform1i(E,O.u_image0),u_image1:new e.Uniform1i(E,O.u_image1),u_brightness_low:new e.Uniform1f(E,O.u_brightness_low),u_brightness_high:new e.Uniform1f(E,O.u_brightness_high),u_saturation_factor:new e.Uniform1f(E,O.u_saturation_factor),u_contrast_factor:new e.Uniform1f(E,O.u_contrast_factor),u_spin_weights:new e.Uniform3f(E,O.u_spin_weights)}},symbolIcon:function(E,O){return{u_is_size_zoom_constant:new e.Uniform1i(E,O.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(E,O.u_is_size_feature_constant),u_size_t:new e.Uniform1f(E,O.u_size_t),u_size:new e.Uniform1f(E,O.u_size),u_camera_to_center_distance:new e.Uniform1f(E,O.u_camera_to_center_distance),u_pitch:new e.Uniform1f(E,O.u_pitch),u_rotate_symbol:new e.Uniform1i(E,O.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(E,O.u_aspect_ratio),u_fade_change:new e.Uniform1f(E,O.u_fade_change),u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(E,O.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(E,O.u_coord_matrix),u_is_text:new e.Uniform1i(E,O.u_is_text),u_pitch_with_map:new e.Uniform1i(E,O.u_pitch_with_map),u_texsize:new e.Uniform2f(E,O.u_texsize),u_texture:new e.Uniform1i(E,O.u_texture)}},symbolSDF:function(E,O){return{u_is_size_zoom_constant:new e.Uniform1i(E,O.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(E,O.u_is_size_feature_constant),u_size_t:new e.Uniform1f(E,O.u_size_t),u_size:new e.Uniform1f(E,O.u_size),u_camera_to_center_distance:new e.Uniform1f(E,O.u_camera_to_center_distance),u_pitch:new e.Uniform1f(E,O.u_pitch),u_rotate_symbol:new e.Uniform1i(E,O.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(E,O.u_aspect_ratio),u_fade_change:new e.Uniform1f(E,O.u_fade_change),u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(E,O.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(E,O.u_coord_matrix),u_is_text:new e.Uniform1i(E,O.u_is_text),u_pitch_with_map:new e.Uniform1i(E,O.u_pitch_with_map),u_texsize:new e.Uniform2f(E,O.u_texsize),u_texture:new e.Uniform1i(E,O.u_texture),u_gamma_scale:new e.Uniform1f(E,O.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(E,O.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(E,O.u_is_halo)}},symbolTextAndIcon:function(E,O){return{u_is_size_zoom_constant:new e.Uniform1i(E,O.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(E,O.u_is_size_feature_constant),u_size_t:new e.Uniform1f(E,O.u_size_t),u_size:new e.Uniform1f(E,O.u_size),u_camera_to_center_distance:new e.Uniform1f(E,O.u_camera_to_center_distance),u_pitch:new e.Uniform1f(E,O.u_pitch),u_rotate_symbol:new e.Uniform1i(E,O.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(E,O.u_aspect_ratio),u_fade_change:new e.Uniform1f(E,O.u_fade_change),u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(E,O.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(E,O.u_coord_matrix),u_is_text:new e.Uniform1i(E,O.u_is_text),u_pitch_with_map:new e.Uniform1i(E,O.u_pitch_with_map),u_texsize:new e.Uniform2f(E,O.u_texsize),u_texsize_icon:new e.Uniform2f(E,O.u_texsize_icon),u_texture:new e.Uniform1i(E,O.u_texture),u_texture_icon:new e.Uniform1i(E,O.u_texture_icon),u_gamma_scale:new e.Uniform1f(E,O.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(E,O.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(E,O.u_is_halo)}},background:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_opacity:new e.Uniform1f(E,O.u_opacity),u_color:new e.UniformColor(E,O.u_color)}},backgroundPattern:function(E,O){return{u_matrix:new e.UniformMatrix4f(E,O.u_matrix),u_opacity:new e.Uniform1f(E,O.u_opacity),u_image:new e.Uniform1i(E,O.u_image),u_pattern_tl_a:new e.Uniform2f(E,O.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(E,O.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(E,O.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(E,O.u_pattern_br_b),u_texsize:new e.Uniform2f(E,O.u_texsize),u_mix:new e.Uniform1f(E,O.u_mix),u_pattern_size_a:new e.Uniform2f(E,O.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(E,O.u_pattern_size_b),u_scale_a:new e.Uniform1f(E,O.u_scale_a),u_scale_b:new e.Uniform1f(E,O.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(E,O.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(E,O.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(E,O.u_tile_units_to_pixels)}}};function Ar(E,O,B,q,ae,he,me){for(var _e=E.context,Se=_e.gl,Ve=E.useProgram("collisionBox"),Ke=[],st=0,At=0,Pt=0;Pt<q.length;Pt++){var St=q[Pt],Lt=O.getTile(St),kt=Lt.getBucket(B);if(kt){var Ht=St.posMatrix;0===ae[0]&&0===ae[1]||(Ht=E.translatePosMatrix(St.posMatrix,Lt,ae,he));var jt=me?kt.textCollisionBox:kt.iconCollisionBox,Yt=kt.collisionCircleArray;if(Yt.length>0){var lr=e.create(),vr=Ht;e.mul(lr,kt.placementInvProjMatrix,E.transform.glCoordMatrix),e.mul(lr,lr,kt.placementViewportMatrix),Ke.push({circleArray:Yt,circleOffset:At,transform:vr,invTransform:lr}),At=st+=Yt.length/4}jt&&Ve.draw(_e,Se.LINES,Qe.disabled,Ae.disabled,E.colorModeForRenderPass(),Oe.disabled,co(Ht,E.transform,Lt),B.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,null,E.transform.zoom,null,null,jt.collisionVertexBuffer)}}if(me&&Ke.length){var Or=E.useProgram("collisionCircle"),Dr=new e.StructArrayLayout2f1f2i16;Dr.resize(4*st),Dr._trim();for(var sn=0,on=0,kn=Ke;on<kn.length;on+=1)for(var gn=kn[on],Xn=0;Xn<gn.circleArray.length/4;Xn++){var ti=4*Xn,gi=gn.circleArray[ti+0],Jr=gn.circleArray[ti+1],Pn=gn.circleArray[ti+2],ri=gn.circleArray[ti+3];Dr.emplace(sn++,gi,Jr,Pn,ri,0),Dr.emplace(sn++,gi,Jr,Pn,ri,1),Dr.emplace(sn++,gi,Jr,Pn,ri,2),Dr.emplace(sn++,gi,Jr,Pn,ri,3)}(!Ct||Ct.length<2*st)&&(Ct=function(Mi){var Fi=2*Mi,Ci=new e.StructArrayLayout3ui6;Ci.resize(Fi),Ci._trim();for(var Bi=0;Bi<Fi;Bi++){var Wi=6*Bi;Ci.uint16[Wi+0]=4*Bi+0,Ci.uint16[Wi+1]=4*Bi+1,Ci.uint16[Wi+2]=4*Bi+2,Ci.uint16[Wi+3]=4*Bi+2,Ci.uint16[Wi+4]=4*Bi+3,Ci.uint16[Wi+5]=4*Bi+0}return Ci}(st));for(var $n=_e.createIndexBuffer(Ct,!0),ui=_e.createVertexBuffer(Dr,e.collisionCircleLayout.members,!0),_i=0,Ii=Ke;_i<Ii.length;_i+=1){var ai=Ii[_i],Si=yo(ai.transform,ai.invTransform,E.transform);Or.draw(_e,Se.TRIANGLES,Qe.disabled,Ae.disabled,E.colorModeForRenderPass(),Oe.disabled,Si,B.id,ui,$n,e.SegmentVector.simpleSegment(0,2*ai.circleOffset,ai.circleArray.length,ai.circleArray.length/2),null,E.transform.zoom,null,null,null)}ui.destroy(),$n.destroy()}}var Br=e.identity(new Float32Array(16));function un(E,O,B,q,ae,he){var me=e.getAnchorAlignment(E),_e=-(me.horizontalAlign-.5)*O,Se=-(me.verticalAlign-.5)*B,Ve=e.evaluateVariableOffset(E,q);return new e.Point((_e/ae+Ve[0])*he,(Se/ae+Ve[1])*he)}function xn(E,O,B,q,ae,he,me,_e,Se,Ve,Ke){var st=E.text.placedSymbolArray,At=E.text.dynamicLayoutVertexArray,Pt=E.icon.dynamicLayoutVertexArray,St={};At.clear();for(var Lt=0;Lt<st.length;Lt++){var kt=st.get(Lt),jt=kt.hidden||!kt.crossTileID||E.allowVerticalPlacement&&!kt.placedOrientation?null:q[kt.crossTileID];if(jt){var Yt=new e.Point(kt.anchorX,kt.anchorY),lr=dr(Yt,B?_e:me),vr=pr(he.cameraToCenterDistance,lr.signedDistanceFromCamera),Or=ae.evaluateSizeForFeature(E.textSizeData,Ve,kt)*vr/e.ONE_EM;B&&(Or*=E.tilePixelRatio/Se);for(var on=un(jt.anchor,jt.width,jt.height,jt.textOffset,jt.textBoxScale,Or),kn=B?dr(Yt.add(on),me).point:lr.point.add(O?on.rotate(-he.angle):on),gn=E.allowVerticalPlacement&&kt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Xn=0;Xn<kt.numGlyphs;Xn++)e.addDynamicAttributes(At,kn,gn);Ke&&kt.associatedIconIndex>=0&&(St[kt.associatedIconIndex]={shiftedAnchor:kn,angle:gn})}else In(kt.numGlyphs,At)}if(Ke){Pt.clear();for(var ti=E.icon.placedSymbolArray,gi=0;gi<ti.length;gi++){var Jr=ti.get(gi);if(Jr.hidden)In(Jr.numGlyphs,Pt);else{var Pn=St[gi];if(Pn)for(var ri=0;ri<Jr.numGlyphs;ri++)e.addDynamicAttributes(Pt,Pn.shiftedAnchor,Pn.angle);else In(Jr.numGlyphs,Pt)}}E.icon.dynamicLayoutVertexBuffer.updateData(Pt)}E.text.dynamicLayoutVertexBuffer.updateData(At)}function Fn(E,O,B){return B.iconsInText&&O?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Hn(E,O,B,q,ae,he,me,_e,Se,Ve,Ke,st){for(var At=E.context,Pt=At.gl,St=E.transform,Lt="map"===_e,kt="map"===Se,Ht=Lt&&"point"!==B.layout.get("symbol-placement"),jt=Lt&&!kt&&!Ht,Yt=void 0!==B.layout.get("symbol-sort-key").constantOr(1),lr=E.depthModeForSublayer(0,Qe.ReadOnly),vr=B.layout.get("text-variable-anchor"),Or=[],Dr=0,sn=q;Dr<sn.length;Dr+=1){var on=sn[Dr],kn=O.getTile(on),gn=kn.getBucket(B);if(gn){var Xn=ae?gn.text:gn.icon;if(Xn&&Xn.segments.get().length){var ti=Xn.programConfigurations.get(B.id),gi=ae||gn.sdfIcons,Jr=ae?gn.textSizeData:gn.iconSizeData,Pn=kt||0!==St.pitch,ri=E.useProgram(Fn(gi,ae,gn),ti),$n=e.evaluateSizeForZoom(Jr,St.zoom),ui=void 0,_i=[0,0],Ii=void 0,ai=void 0,Si=null,Mi=void 0;if(ae)Ii=kn.glyphAtlasTexture,ai=Pt.LINEAR,ui=kn.glyphAtlasTexture.size,gn.iconsInText&&(_i=kn.imageAtlasTexture.size,Si=kn.imageAtlasTexture,Mi=Pn||E.options.rotating||E.options.zooming||"composite"===Jr.kind||"camera"===Jr.kind?Pt.LINEAR:Pt.NEAREST);else{var Ci=1!==B.layout.get("icon-size").constantOr(0)||gn.iconsNeedLinear;Ii=kn.imageAtlasTexture,ai=gi||E.options.rotating||E.options.zooming||Ci||Pn?Pt.LINEAR:Pt.NEAREST,ui=kn.imageAtlasTexture.size}var Bi=Lr(kn,1,E.transform.zoom),Wi=_r(on.posMatrix,kt,Lt,E.transform,Bi),wa=xr(on.posMatrix,kt,Lt,E.transform,Bi),Ga=vr&&gn.hasTextData(),Za="none"!==B.layout.get("icon-text-fit")&&Ga&&gn.hasIconData();Ht&&Nr(gn,on.posMatrix,E,ae,Wi,wa,kt,Ve);var xa=E.translatePosMatrix(on.posMatrix,kn,he,me),Ra=Ht||ae&&vr||Za?Br:Wi,Ca=E.translatePosMatrix(wa,kn,he,me,!0),Po=gi&&0!==B.paint.get(ae?"text-halo-width":"icon-halo-width").constantOr(1),oo={program:ri,buffers:Xn,uniformValues:gi?gn.iconsInText?$t(Jr.kind,$n,jt,kt,E,xa,Ra,Ca,ui,_i):ir(Jr.kind,$n,jt,kt,E,xa,Ra,Ca,ae,ui,!0):rr(Jr.kind,$n,jt,kt,E,xa,Ra,Ca,ae,ui),atlasTexture:Ii,atlasTextureIcon:Si,atlasInterpolation:ai,atlasInterpolationIcon:Mi,isSDF:gi,hasHalo:Po};if(Yt)for(var Xo=0,Is=Xn.segments.get();Xo<Is.length;Xo+=1){var Us=Is[Xo];Or.push({segments:new e.SegmentVector([Us]),sortKey:Us.sortKey,state:oo})}else Or.push({segments:Xn.segments,sortKey:0,state:oo})}}}Yt&&Or.sort(function(ll,ys){return ll.sortKey-ys.sortKey});for(var sl=0,$s=Or;sl<$s.length;sl+=1){var el=$s[sl],Oo=el.state;if(At.activeTexture.set(Pt.TEXTURE0),Oo.atlasTexture.bind(Oo.atlasInterpolation,Pt.CLAMP_TO_EDGE),Oo.atlasTextureIcon&&(At.activeTexture.set(Pt.TEXTURE1),Oo.atlasTextureIcon&&Oo.atlasTextureIcon.bind(Oo.atlasInterpolationIcon,Pt.CLAMP_TO_EDGE)),Oo.isSDF){var Zs=Oo.uniformValues;Oo.hasHalo&&(Zs.u_is_halo=1,Kn(Oo.buffers,el.segments,B,E,Oo.program,lr,Ke,st,Zs)),Zs.u_is_halo=0}Kn(Oo.buffers,el.segments,B,E,Oo.program,lr,Ke,st,Oo.uniformValues)}}function Kn(E,O,B,q,ae,he,me,_e,Se){var Ve=q.context;ae.draw(Ve,Ve.gl.TRIANGLES,he,me,_e,Oe.disabled,Se,B.id,E.layoutVertexBuffer,E.indexBuffer,O,B.paint,q.transform.zoom,E.programConfigurations.get(B.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function qn(E,O,B,q,ae,he,me){var _e,Se,Ve,Ke,st,At=E.context.gl,Pt=B.paint.get("fill-pattern"),St=Pt&&Pt.constantOr(1),Lt=B.getCrossfadeParameters();me?(Se=St&&!B.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=At.LINES):(Se=St?"fillPattern":"fill",_e=At.TRIANGLES);for(var kt=0,Ht=q;kt<Ht.length;kt+=1){var jt=Ht[kt],Yt=O.getTile(jt);if(!St||Yt.patternsLoaded()){var lr=Yt.getBucket(B);if(lr){var vr=lr.programConfigurations.get(B.id),Or=E.useProgram(Se,vr);St&&(E.context.activeTexture.set(At.TEXTURE0),Yt.imageAtlasTexture.bind(At.LINEAR,At.CLAMP_TO_EDGE),vr.updatePaintBuffers(Lt));var Dr=Pt.constantOr(null);if(Dr&&Yt.imageAtlas){var sn=Yt.imageAtlas,on=sn.patternPositions[Dr.to.toString()],kn=sn.patternPositions[Dr.from.toString()];on&&kn&&vr.setConstantPatternPositions(on,kn)}var gn=E.translatePosMatrix(jt.posMatrix,Yt,B.paint.get("fill-translate"),B.paint.get("fill-translate-anchor"));if(me){Ke=lr.indexBuffer2,st=lr.segments2;var Xn=[At.drawingBufferWidth,At.drawingBufferHeight];Ve="fillOutlinePattern"===Se&&St?Do(gn,E,Lt,Yt,Xn):Lo(gn,Xn)}else Ke=lr.indexBuffer,st=lr.segments,Ve=St?vo(gn,E,Lt,Yt):go(gn);Or.draw(E.context,_e,ae,E.stencilModeForClipping(jt),he,Oe.disabled,Ve,B.id,lr.layoutVertexBuffer,Ke,st,B.paint,E.transform.zoom,vr)}}}}function wi(E,O,B,q,ae,he,me){for(var _e=E.context,Se=_e.gl,Ve=B.paint.get("fill-extrusion-pattern"),Ke=Ve.constantOr(1),st=B.getCrossfadeParameters(),At=B.paint.get("fill-extrusion-opacity"),Pt=0,St=q;Pt<St.length;Pt+=1){var Lt=St[Pt],kt=O.getTile(Lt),Ht=kt.getBucket(B);if(Ht){var jt=Ht.programConfigurations.get(B.id),Yt=E.useProgram(Ke?"fillExtrusionPattern":"fillExtrusion",jt);Ke&&(E.context.activeTexture.set(Se.TEXTURE0),kt.imageAtlasTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),jt.updatePaintBuffers(st));var lr=Ve.constantOr(null);if(lr&&kt.imageAtlas){var vr=kt.imageAtlas,Or=vr.patternPositions[lr.to.toString()],Dr=vr.patternPositions[lr.from.toString()];Or&&Dr&&jt.setConstantPatternPositions(Or,Dr)}var sn=E.translatePosMatrix(Lt.posMatrix,kt,B.paint.get("fill-extrusion-translate"),B.paint.get("fill-extrusion-translate-anchor")),on=B.paint.get("fill-extrusion-vertical-gradient"),kn=Ke?Wo(sn,E,on,At,Lt,st,kt):ss(sn,E,on,At);Yt.draw(_e,_e.gl.TRIANGLES,ae,he,me,Oe.backCCW,kn,B.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,B.paint,E.transform.zoom,jt)}}}function Li(E,O,B,q,ae,he){var me=E.context,_e=me.gl,Se=O.fbo;if(Se){var Ve=E.useProgram("hillshade");me.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,Se.colorAttachment.get());var Ke=function(st,At,Pt){var St=Pt.paint.get("hillshade-shadow-color"),Lt=Pt.paint.get("hillshade-highlight-color"),kt=Pt.paint.get("hillshade-accent-color"),Ht=Pt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Pt.paint.get("hillshade-illumination-anchor")&&(Ht-=st.transform.angle);var jt=!st.options.moving;return{u_matrix:st.transform.calculatePosMatrix(At.tileID.toUnwrapped(),jt),u_image:0,u_latrange:ds(0,At.tileID),u_light:[Pt.paint.get("hillshade-exaggeration"),Ht],u_shadow:St,u_highlight:Lt,u_accent:kt}}(E,O,B);Ve.draw(me,_e.TRIANGLES,q,ae,he,Oe.disabled,Ke,B.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}}function Ri(E,O,B,q,ae,he,me){var kt,Ht,jt,Yt,lr,_e=E.context,Se=_e.gl,Ve=O.dem;if(Ve&&Ve.data){var Ke=Ve.dim,st=Ve.stride,At=Ve.getPixels();if(_e.activeTexture.set(Se.TEXTURE1),_e.pixelStoreUnpackPremultiplyAlpha.set(!1),O.demTexture=O.demTexture||E.getTileTexture(st),O.demTexture){var Pt=O.demTexture;Pt.update(At,{premultiply:!1}),Pt.bind(Se.NEAREST,Se.CLAMP_TO_EDGE)}else O.demTexture=new e.Texture(_e,At,Se.RGBA,{premultiply:!1}),O.demTexture.bind(Se.NEAREST,Se.CLAMP_TO_EDGE);_e.activeTexture.set(Se.TEXTURE0);var St=O.fbo;if(!St){var Lt=new e.Texture(_e,{width:Ke,height:Ke,data:null},Se.RGBA);Lt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),(St=O.fbo=_e.createFramebuffer(Ke,Ke,!0)).colorAttachment.set(Lt.texture)}_e.bindFramebuffer.set(St.framebuffer),_e.viewport.set([0,0,Ke,Ke]),E.useProgram("hillshadePrepare").draw(_e,Se.TRIANGLES,ae,he,me,Oe.disabled,(kt=O.tileID,jt=q,Yt=(Ht=Ve).stride,lr=e.create(),e.ortho(lr,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(lr,lr,[0,-e.EXTENT,0]),{u_matrix:lr,u_image:1,u_dimension:[Yt,Yt],u_zoom:kt.overscaledZ,u_maxzoom:jt,u_unpack:Ht.getUnpackVector()}),B.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),O.needsHillshadePrepare=!1}}function Hi(E,O,B,q,ae){var he=q.paint.get("raster-fade-duration");if(he>0){var me=e.browser.now(),_e=(me-E.timeAdded)/he,Se=O?(me-O.timeAdded)/he:-1,Ve=B.getSource(),Ke=ae.coveringZoomLevel({tileSize:Ve.tileSize,roundZoom:Ve.roundZoom}),st=!O||Math.abs(O.tileID.overscaledZ-Ke)>Math.abs(E.tileID.overscaledZ-Ke),At=st&&E.refreshedUponExpiration?1:e.clamp(st?_e:1-Se,0,1);return E.refreshedUponExpiration&&_e>=1&&(E.refreshedUponExpiration=!1),O?{opacity:1,mix:1-At}:{opacity:At,mix:0}}return{opacity:1,mix:0}}var Ui=new e.Color(1,0,0,1),ba=new e.Color(0,1,0,1),va=new e.Color(0,0,1,1),ca=new e.Color(1,0,1,1),ua=new e.Color(0,1,1,1);function Ua(E,O,B,q){Ha(E,0,O+B/2,E.transform.width,B,q)}function no(E,O,B,q){Ha(E,O-B/2,0,B,E.transform.height,q)}function Ha(E,O,B,q,ae,he){var me=E.context,_e=me.gl;_e.enable(_e.SCISSOR_TEST),_e.scissor(O*e.browser.devicePixelRatio,B*e.browser.devicePixelRatio,q*e.browser.devicePixelRatio,ae*e.browser.devicePixelRatio),me.clear({color:he}),_e.disable(_e.SCISSOR_TEST)}function io(E,O,B){var q=E.context,ae=q.gl,he=B.posMatrix,me=E.useProgram("debug"),_e=Qe.disabled,Se=Ae.disabled,Ve=E.colorModeForRenderPass();q.activeTexture.set(ae.TEXTURE0),E.emptyTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),me.draw(q,ae.LINE_STRIP,_e,Se,Ve,Oe.disabled,ps(he,e.Color.red),"$debug",E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments);var Ke=O.getTileByID(B.key).latestRawTileData,At=Math.floor((Ke&&Ke.byteLength||0)/1024),Pt=O.getTile(B).tileSize,St=512/Math.min(Pt,512)*(B.overscaledZ/E.transform.zoom)*.5,Lt=B.canonical.toString();B.overscaledZ!==B.canonical.z&&(Lt+=" => "+B.overscaledZ),function(kt,Ht){kt.initDebugOverlayCanvas();var jt=kt.debugOverlayCanvas,Yt=kt.context.gl,lr=kt.debugOverlayCanvas.getContext("2d");lr.clearRect(0,0,jt.width,jt.height),lr.shadowColor="white",lr.shadowBlur=2,lr.lineWidth=1.5,lr.strokeStyle="white",lr.textBaseline="top",lr.font="bold 36px Open Sans, sans-serif",lr.fillText(Ht,5,5),lr.strokeText(Ht,5,5),kt.debugOverlayTexture.update(jt),kt.debugOverlayTexture.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE)}(E,Lt+" "+At+"kb"),me.draw(q,ae.TRIANGLES,_e,Se,De.alphaBlended,Oe.disabled,ps(he,e.Color.transparent,St),"$debug",E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments)}var Ka={symbol:function(E,O,B,q,ae){if("translucent"===E.renderPass){var he=Ae.disabled,me=E.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(_e,Se,Ve,Ke,st,At,Pt){for(var St=Se.transform,Lt="map"===st,kt="map"===At,Ht=0,jt=_e;Ht<jt.length;Ht+=1){var Yt=jt[Ht],lr=Ke.getTile(Yt),vr=lr.getBucket(Ve);if(vr&&vr.text&&vr.text.segments.get().length){var Dr=e.evaluateSizeForZoom(vr.textSizeData,St.zoom),sn=Lr(lr,1,Se.transform.zoom),on=_r(Yt.posMatrix,kt,Lt,Se.transform,sn),kn="none"!==Ve.layout.get("icon-text-fit")&&vr.hasIconData();if(Dr){var gn=Math.pow(2,St.zoom-lr.tileID.overscaledZ);xn(vr,Lt,kt,Pt,e.symbolSize,St,on,Yt.posMatrix,gn,Dr,kn)}}}}(q,E,B,O,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),ae),0!==B.paint.get("icon-opacity").constantOr(1)&&Hn(E,O,B,q,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),he,me),0!==B.paint.get("text-opacity").constantOr(1)&&Hn(E,O,B,q,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),he,me),O.map.showCollisionBoxes&&(Ar(E,O,B,q,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),Ar(E,O,B,q,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(E,O,B,q){if("translucent"===E.renderPass){var ae=B.paint.get("circle-opacity"),he=B.paint.get("circle-stroke-width"),me=B.paint.get("circle-stroke-opacity"),_e=void 0!==B.layout.get("circle-sort-key").constantOr(1);if(0!==ae.constantOr(1)||0!==he.constantOr(1)&&0!==me.constantOr(1)){for(var Se=E.context,Ve=Se.gl,Ke=E.depthModeForSublayer(0,Qe.ReadOnly),st=Ae.disabled,At=E.colorModeForRenderPass(),Pt=[],St=0;St<q.length;St++){var Lt=q[St],kt=O.getTile(Lt),Ht=kt.getBucket(B);if(Ht){var jt=Ht.programConfigurations.get(B.id),Yt={programConfiguration:jt,program:E.useProgram("circle",jt),layoutVertexBuffer:Ht.layoutVertexBuffer,indexBuffer:Ht.indexBuffer,uniformValues:pa(E,Lt,kt,B)};if(_e)for(var lr=0,vr=Ht.segments.get();lr<vr.length;lr+=1){var Or=vr[lr];Pt.push({segments:new e.SegmentVector([Or]),sortKey:Or.sortKey,state:Yt})}else Pt.push({segments:Ht.segments,sortKey:0,state:Yt})}}_e&&Pt.sort(function(ri,$n){return ri.sortKey-$n.sortKey});for(var Dr=0,sn=Pt;Dr<sn.length;Dr+=1){var on=sn[Dr],kn=on.state;kn.program.draw(Se,Ve.TRIANGLES,Ke,st,At,Oe.disabled,kn.uniformValues,B.id,kn.layoutVertexBuffer,kn.indexBuffer,on.segments,B.paint,E.transform.zoom,kn.programConfiguration)}}}},heatmap:function(E,O,B,q){if(0!==B.paint.get("heatmap-opacity"))if("offscreen"===E.renderPass){var ae=E.context,he=ae.gl,me=Ae.disabled,_e=new De([he.ONE,he.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Lt,kt,Ht){var jt=Lt.gl;Lt.activeTexture.set(jt.TEXTURE1),Lt.viewport.set([0,0,kt.width/4,kt.height/4]);var vr,Or,Dr,sn,on,Yt=Ht.heatmapFbo;if(Yt)jt.bindTexture(jt.TEXTURE_2D,Yt.colorAttachment.get()),Lt.bindFramebuffer.set(Yt.framebuffer);else{var lr=jt.createTexture();jt.bindTexture(jt.TEXTURE_2D,lr),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_S,jt.CLAMP_TO_EDGE),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_T,jt.CLAMP_TO_EDGE),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MIN_FILTER,jt.LINEAR),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MAG_FILTER,jt.LINEAR),Dr=lr,sn=Yt=Ht.heatmapFbo=Lt.createFramebuffer(kt.width/4,kt.height/4,!1),(on=(vr=Lt).gl).texImage2D(on.TEXTURE_2D,0,on.RGBA,(Or=kt).width/4,Or.height/4,0,on.RGBA,vr.extRenderToTextureHalfFloat?vr.extTextureHalfFloat.HALF_FLOAT_OES:on.UNSIGNED_BYTE,null),sn.colorAttachment.set(Dr)}})(ae,E,B),ae.clear({color:e.Color.transparent});for(var Se=0;Se<q.length;Se++){var Ve=q[Se];if(!O.hasRenderableParent(Ve)){var Ke=O.getTile(Ve),st=Ke.getBucket(B);if(st){var At=st.programConfigurations.get(B.id);E.useProgram("heatmap",At).draw(ae,he.TRIANGLES,Qe.disabled,me,_e,Oe.disabled,Bo(Ve.posMatrix,Ke,E.transform.zoom,B.paint.get("heatmap-intensity")),B.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,B.paint,E.transform.zoom,At)}}}ae.viewport.set([0,0,E.width,E.height])}else"translucent"===E.renderPass&&(E.context.setColorMode(E.colorModeForRenderPass()),function(Lt,kt){var Ht=Lt.context,jt=Ht.gl,Yt=kt.heatmapFbo;if(Yt){Ht.activeTexture.set(jt.TEXTURE0),jt.bindTexture(jt.TEXTURE_2D,Yt.colorAttachment.get()),Ht.activeTexture.set(jt.TEXTURE1);var lr=kt.colorRampTexture;lr||(lr=kt.colorRampTexture=new e.Texture(Ht,kt.colorRamp,jt.RGBA)),lr.bind(jt.LINEAR,jt.CLAMP_TO_EDGE),Lt.useProgram("heatmapTexture").draw(Ht,jt.TRIANGLES,Qe.disabled,Ae.disabled,Lt.colorModeForRenderPass(),Oe.disabled,function(vr,Or,Dr,sn){var on=e.create();e.ortho(on,0,vr.width,vr.height,0,0,1);var kn=vr.context.gl;return{u_matrix:on,u_world:[kn.drawingBufferWidth,kn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Or.paint.get("heatmap-opacity")}}(Lt,kt),kt.id,Lt.viewportBuffer,Lt.quadTriangleIndexBuffer,Lt.viewportSegments,kt.paint,Lt.transform.zoom)}}(E,B))},line:function(E,O,B,q){if("translucent"===E.renderPass){var ae=B.paint.get("line-opacity"),he=B.paint.get("line-width");if(0!==ae.constantOr(1)&&0!==he.constantOr(1)){var me=E.depthModeForSublayer(0,Qe.ReadOnly),_e=E.colorModeForRenderPass(),Se=B.paint.get("line-dasharray"),Ve=B.paint.get("line-pattern"),Ke=Ve.constantOr(1),st=B.paint.get("line-gradient"),At=B.getCrossfadeParameters(),Pt=Ke?"linePattern":Se?"lineSDF":st?"lineGradient":"line",St=E.context,Lt=St.gl,kt=!0;if(st){St.activeTexture.set(Lt.TEXTURE0);var Ht=B.gradientTexture;if(!B.gradient)return;Ht||(Ht=B.gradientTexture=new e.Texture(St,B.gradient,Lt.RGBA)),Ht.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}for(var jt=0,Yt=q;jt<Yt.length;jt+=1){var lr=Yt[jt],vr=O.getTile(lr);if(!Ke||vr.patternsLoaded()){var Or=vr.getBucket(B);if(Or){var Dr=Or.programConfigurations.get(B.id),sn=E.context.program.get(),on=E.useProgram(Pt,Dr),kn=kt||on.program!==sn,gn=Ve.constantOr(null);if(gn&&vr.imageAtlas){var Xn=vr.imageAtlas,ti=Xn.patternPositions[gn.to.toString()],gi=Xn.patternPositions[gn.from.toString()];ti&&gi&&Dr.setConstantPatternPositions(ti,gi)}var Jr=Ke?je(E,vr,B,At):Se?Ge(E,vr,B,Se,At):st?Gi(E,vr,B):Io(E,vr,B);Ke?(St.activeTexture.set(Lt.TEXTURE0),vr.imageAtlasTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE),Dr.updatePaintBuffers(At)):Se&&(kn||E.lineAtlas.dirty)&&(St.activeTexture.set(Lt.TEXTURE0),E.lineAtlas.bind(St)),on.draw(St,Lt.TRIANGLES,me,E.stencilModeForClipping(lr),_e,Oe.disabled,Jr,B.id,Or.layoutVertexBuffer,Or.indexBuffer,Or.segments,B.paint,E.transform.zoom,Dr),kt=!1}}}}}},fill:function(E,O,B,q){var ae=B.paint.get("fill-color"),he=B.paint.get("fill-opacity");if(0!==he.constantOr(1)){var me=E.colorModeForRenderPass(),_e=B.paint.get("fill-pattern"),Se=E.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&1===ae.constantOr(e.Color.transparent).a&&1===he.constantOr(0)?"opaque":"translucent";if(E.renderPass===Se){var Ve=E.depthModeForSublayer(1,"opaque"===E.renderPass?Qe.ReadWrite:Qe.ReadOnly);qn(E,O,B,q,Ve,me,!1)}if("translucent"===E.renderPass&&B.paint.get("fill-antialias")){var Ke=E.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,Qe.ReadOnly);qn(E,O,B,q,Ke,me,!0)}}},"fill-extrusion":function(E,O,B,q){var ae=B.paint.get("fill-extrusion-opacity");if(0!==ae&&"translucent"===E.renderPass){var he=new Qe(E.context.gl.LEQUAL,Qe.ReadWrite,E.depthRangeFor3D);if(1!==ae||B.paint.get("fill-extrusion-pattern").constantOr(1))wi(E,O,B,q,he,Ae.disabled,De.disabled),wi(E,O,B,q,he,E.stencilModeFor3D(),E.colorModeForRenderPass());else{var me=E.colorModeForRenderPass();wi(E,O,B,q,he,Ae.disabled,me)}}},hillshade:function(E,O,B,q){if("offscreen"===E.renderPass||"translucent"===E.renderPass){for(var ae=E.context,he=O.getSource().maxzoom,me=E.depthModeForSublayer(0,Qe.ReadOnly),_e=E.colorModeForRenderPass(),Se="translucent"===E.renderPass?E.stencilConfigForOverlap(q):[{},q],Ve=Se[0],Ke=0,st=Se[1];Ke<st.length;Ke+=1){var At=st[Ke],Pt=O.getTile(At);Pt.needsHillshadePrepare&&"offscreen"===E.renderPass?Ri(E,Pt,B,he,me,Ae.disabled,_e):"translucent"===E.renderPass&&Li(E,Pt,B,me,Ve[At.overscaledZ],_e)}ae.viewport.set([0,0,E.width,E.height])}},raster:function(E,O,B,q){if("translucent"===E.renderPass&&0!==B.paint.get("raster-opacity")&&q.length)for(var ae=E.context,he=ae.gl,me=O.getSource(),_e=E.useProgram("raster"),Se=E.colorModeForRenderPass(),Ve=me instanceof Y?[{},q]:E.stencilConfigForOverlap(q),Ke=Ve[0],st=Ve[1],At=st[st.length-1].overscaledZ,Pt=!E.options.moving,St=0,Lt=st;St<Lt.length;St+=1){var kt=Lt[St],Ht=E.depthModeForSublayer(kt.overscaledZ-At,1===B.paint.get("raster-opacity")?Qe.ReadWrite:Qe.ReadOnly,he.LESS),jt=O.getTile(kt),Yt=E.transform.calculatePosMatrix(kt.toUnwrapped(),Pt);jt.registerFadeDuration(B.paint.get("raster-fade-duration"));var lr=O.findLoadedParent(kt,0),vr=Hi(jt,lr,O,B,E.transform),Or=void 0,Dr=void 0,sn="nearest"===B.paint.get("raster-resampling")?he.NEAREST:he.LINEAR;ae.activeTexture.set(he.TEXTURE0),jt.texture.bind(sn,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),ae.activeTexture.set(he.TEXTURE1),lr?(lr.texture.bind(sn,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),Or=Math.pow(2,lr.tileID.overscaledZ-jt.tileID.overscaledZ),Dr=[jt.tileID.canonical.x*Or%1,jt.tileID.canonical.y*Or%1]):jt.texture.bind(sn,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST);var on=_t(Yt,Dr||[0,0],Or||1,vr,B);me instanceof Y?_e.draw(ae,he.TRIANGLES,Ht,Ae.disabled,Se,Oe.disabled,on,B.id,me.boundsBuffer,E.quadTriangleIndexBuffer,me.boundsSegments):_e.draw(ae,he.TRIANGLES,Ht,Ke[kt.overscaledZ],Se,Oe.disabled,on,B.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}},background:function(E,O,B){var q=B.paint.get("background-color"),ae=B.paint.get("background-opacity");if(0!==ae){var he=E.context,me=he.gl,_e=E.transform,Se=_e.tileSize,Ve=B.paint.get("background-pattern");if(!E.isPatternMissing(Ve)){var Ke=!Ve&&1===q.a&&1===ae&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass===Ke){var st=Ae.disabled,At=E.depthModeForSublayer(0,"opaque"===Ke?Qe.ReadWrite:Qe.ReadOnly),Pt=E.colorModeForRenderPass(),St=E.useProgram(Ve?"backgroundPattern":"background"),Lt=_e.coveringTiles({tileSize:Se});Ve&&(he.activeTexture.set(me.TEXTURE0),E.imageManager.bind(E.context));for(var kt=B.getCrossfadeParameters(),Ht=0,jt=Lt;Ht<jt.length;Ht+=1){var Yt=jt[Ht],lr=E.transform.calculatePosMatrix(Yt.toUnwrapped()),vr=Ve?gr(lr,ae,E,Ve,{tileID:Yt,tileSize:Se},kt):sr(lr,ae,q);St.draw(he,me.TRIANGLES,At,st,Pt,Oe.disabled,vr,B.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}}}}},debug:function(E,O,B){for(var q=0;q<B.length;q++)io(E,O,B[q])},custom:function(E,O,B){var q=E.context,ae=B.implementation;if("offscreen"===E.renderPass){var he=ae.prerender;he&&(E.setCustomLayerDefaults(),q.setColorMode(E.colorModeForRenderPass()),he.call(ae,q.gl,E.transform.customLayerMatrix()),q.setDirty(),E.setBaseState())}else if("translucent"===E.renderPass){E.setCustomLayerDefaults(),q.setColorMode(E.colorModeForRenderPass()),q.setStencilMode(Ae.disabled);var me="3d"===ae.renderingMode?new Qe(E.context.gl.LEQUAL,Qe.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,Qe.ReadOnly);q.setDepthMode(me),ae.render(q.gl,E.transform.customLayerMatrix()),q.setDirty(),E.setBaseState(),q.bindFramebuffer.set(null)}}},Ni=function(E,O){this.context=new Ie(E),this.transform=O,this._tileTextures={},this.setup(),this.numSublayers=et.maxUnderzooming+et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wr,this.gpuTimers={}};Ni.prototype.resize=function(E,O){if(this.width=E*e.browser.devicePixelRatio,this.height=O*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var B=0,q=this.style._order;B<q.length;B+=1)this.style._layers[q[B]].resize()},Ni.prototype.setup=function(){var E=this.context,O=new e.StructArrayLayout2i4;O.emplaceBack(0,0),O.emplaceBack(e.EXTENT,0),O.emplaceBack(0,e.EXTENT),O.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=E.createVertexBuffer(O,An.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var B=new e.StructArrayLayout2i4;B.emplaceBack(0,0),B.emplaceBack(e.EXTENT,0),B.emplaceBack(0,e.EXTENT),B.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=E.createVertexBuffer(B,An.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var q=new e.StructArrayLayout4i8;q.emplaceBack(0,0,0,0),q.emplaceBack(e.EXTENT,0,e.EXTENT,0),q.emplaceBack(0,e.EXTENT,0,e.EXTENT),q.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=E.createVertexBuffer(q,Z.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ae=new e.StructArrayLayout2i4;ae.emplaceBack(0,0),ae.emplaceBack(1,0),ae.emplaceBack(0,1),ae.emplaceBack(1,1),this.viewportBuffer=E.createVertexBuffer(ae,An.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var he=new e.StructArrayLayout1ui2;he.emplaceBack(0),he.emplaceBack(1),he.emplaceBack(3),he.emplaceBack(2),he.emplaceBack(0),this.tileBorderIndexBuffer=E.createIndexBuffer(he);var me=new e.StructArrayLayout3ui6;me.emplaceBack(0,1,2),me.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=E.createIndexBuffer(me),this.emptyTexture=new e.Texture(E,{width:1,height:1,data:new Uint8Array([0,0,0,0])},E.gl.RGBA);var _e=this.context.gl;this.stencilClearMode=new Ae({func:_e.ALWAYS,mask:0},0,255,_e.ZERO,_e.ZERO,_e.ZERO)},Ni.prototype.clearStencil=function(){var E=this.context,O=E.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var B=e.create();e.ortho(B,0,this.width,this.height,0,0,1),e.scale(B,B,[O.drawingBufferWidth,O.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(E,O.TRIANGLES,Qe.disabled,this.stencilClearMode,De.disabled,Oe.disabled,uo(B),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ni.prototype._renderTileClippingMasks=function(E,O){if(this.currentStencilSource!==E.source&&E.isTileClipped()&&O&&O.length){this.currentStencilSource=E.source;var B=this.context,q=B.gl;this.nextStencilID+O.length>256&&this.clearStencil(),B.setColorMode(De.disabled),B.setDepthMode(Qe.disabled);var ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var he=0,me=O;he<me.length;he+=1){var _e=me[he],Se=this._tileClippingMaskIDs[_e.key]=this.nextStencilID++;ae.draw(B,q.TRIANGLES,Qe.disabled,new Ae({func:q.ALWAYS,mask:0},Se,255,q.KEEP,q.KEEP,q.REPLACE),De.disabled,Oe.disabled,uo(_e.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ni.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var E=this.nextStencilID++,O=this.context.gl;return new Ae({func:O.NOTEQUAL,mask:255},E,255,O.KEEP,O.KEEP,O.REPLACE)},Ni.prototype.stencilModeForClipping=function(E){var O=this.context.gl;return new Ae({func:O.EQUAL,mask:255},this._tileClippingMaskIDs[E.key],0,O.KEEP,O.KEEP,O.REPLACE)},Ni.prototype.stencilConfigForOverlap=function(E){var O,B=this.context.gl,q=E.sort(function(Se,Ve){return Ve.overscaledZ-Se.overscaledZ}),ae=q[q.length-1].overscaledZ,he=q[0].overscaledZ-ae+1;if(he>1){this.currentStencilSource=void 0,this.nextStencilID+he>256&&this.clearStencil();for(var me={},_e=0;_e<he;_e++)me[_e+ae]=new Ae({func:B.GEQUAL,mask:255},_e+this.nextStencilID,255,B.KEEP,B.KEEP,B.REPLACE);return this.nextStencilID+=he,[me,q]}return[(O={},O[ae]=Ae.disabled,O),q]},Ni.prototype.colorModeForRenderPass=function(){var E=this.context.gl;return this._showOverdrawInspector?new De([E.CONSTANT_COLOR,E.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?De.unblended:De.alphaBlended},Ni.prototype.depthModeForSublayer=function(E,O,B){if(!this.opaquePassEnabledForLayer())return Qe.disabled;var q=1-((1+this.currentLayer)*this.numSublayers+E)*this.depthEpsilon;return new Qe(B||this.context.gl.LEQUAL,O,[q,q])},Ni.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ni.prototype.render=function(E,O){var B=this;this.style=E,this.options=O,this.lineAtlas=E.lineAtlas,this.imageManager=E.imageManager,this.glyphManager=E.glyphManager,this.symbolFadeChange=E.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var q=this.style._order,ae=this.style.sourceCaches;for(var he in ae){var me=ae[he];me.used&&me.prepare(this.context)}var _e,Se,Ve={},Ke={},st={};for(var At in ae){var Pt=ae[At];Ve[At]=Pt.getVisibleCoordinates(),Ke[At]=Ve[At].slice().reverse(),st[At]=Pt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var St=0;St<q.length;St++)if(this.style._layers[q[St]].is3D()){this.opaquePassCutoff=St;break}this.renderPass="offscreen";for(var kt=0,Ht=q;kt<Ht.length;kt+=1){var Yt=this.style._layers[Ht[kt]];if(Yt.hasOffscreenPass()&&!Yt.isHidden(this.transform.zoom)){var lr=Ke[Yt.source];("custom"===Yt.type||lr.length)&&this.renderLayer(this,ae[Yt.source],Yt,lr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:O.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=O.showOverdrawInspector,this.depthRangeFor3D=[0,1-(E._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=q.length-1;this.currentLayer>=0;this.currentLayer--){var vr=this.style._layers[q[this.currentLayer]],Or=ae[vr.source],Dr=Ve[vr.source];this._renderTileClippingMasks(vr,Dr),this.renderLayer(this,Or,vr,Dr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<q.length;this.currentLayer++){var sn=this.style._layers[q[this.currentLayer]],on=ae[sn.source],kn=("symbol"===sn.type?st:Ke)[sn.source];this._renderTileClippingMasks(sn,Ve[sn.source]),this.renderLayer(this,on,sn,kn)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(gn){gn.source&&!gn.isHidden(B.transform.zoom)&&(gn.source!==(Se&&Se.id)&&(Se=B.style.sourceCaches[gn.source]),(!_e||_e.getSource().maxzoom<Se.getSource().maxzoom)&&(_e=Se))}),_e&&Ka.debug(this,_e,_e.getVisibleCoordinates())),this.options.showPadding&&function(E){var O=E.transform.padding;Ua(E,E.transform.height-(O.top||0),3,Ui),Ua(E,O.bottom||0,3,ba),no(E,O.left||0,3,va),no(E,E.transform.width-(O.right||0),3,ca);var q,ae,he,me,B=E.transform.centerPoint;Ha(q=E,(ae=B.x)-1,(he=E.transform.height-B.y)-10,2,20,me=ua),Ha(q,ae-10,he-1,20,2,me)}(this),this.context.setDefault()},Ni.prototype.renderLayer=function(E,O,B,q){B.isHidden(this.transform.zoom)||("background"===B.type||"custom"===B.type||q.length)&&(this.id=B.id,this.gpuTimingStart(B),Ka[B.type](E,O,B,q,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ni.prototype.gpuTimingStart=function(E){if(this.options.gpuTiming){var O=this.context.extTimerQuery,B=this.gpuTimers[E.id];B||(B=this.gpuTimers[E.id]={calls:0,cpuTime:0,query:O.createQueryEXT()}),B.calls++,O.beginQueryEXT(O.TIME_ELAPSED_EXT,B.query)}},Ni.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var E=this.context.extTimerQuery;E.endQueryEXT(E.TIME_ELAPSED_EXT)}},Ni.prototype.collectGpuTimers=function(){var E=this.gpuTimers;return this.gpuTimers={},E},Ni.prototype.queryGpuTimers=function(E){var O={};for(var B in E){var q=E[B],ae=this.context.extTimerQuery,he=ae.getQueryObjectEXT(q.query,ae.QUERY_RESULT_EXT)/1e6;ae.deleteQueryEXT(q.query),O[B]=he}return O},Ni.prototype.translatePosMatrix=function(E,O,B,q,ae){if(!B[0]&&!B[1])return E;var he=ae?"map"===q?this.transform.angle:0:"viewport"===q?-this.transform.angle:0;if(he){var me=Math.sin(he),_e=Math.cos(he);B=[B[0]*_e-B[1]*me,B[0]*me+B[1]*_e]}var Se=[ae?B[0]:Lr(O,B[0],this.transform.zoom),ae?B[1]:Lr(O,B[1],this.transform.zoom),0],Ve=new Float32Array(16);return e.translate(Ve,E,Se),Ve},Ni.prototype.saveTileTexture=function(E){var O=this._tileTextures[E.size[0]];O?O.push(E):this._tileTextures[E.size[0]]=[E]},Ni.prototype.getTileTexture=function(E){var O=this._tileTextures[E];return O&&O.length>0?O.pop():null},Ni.prototype.isPatternMissing=function(E){if(!E)return!1;if(!E.from||!E.to)return!0;var O=this.imageManager.getPattern(E.from.toString()),B=this.imageManager.getPattern(E.to.toString());return!O||!B},Ni.prototype.useProgram=function(E,O){this.cache=this.cache||{};var B=""+E+(O?O.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[B]||(this.cache[B]=new Ls(this.context,fs[E],O,Tr[E],this._showOverdrawInspector)),this.cache[B]},Ni.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ni.prototype.setBaseState=function(){var E=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(E.FUNC_ADD)},Ni.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ni.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var gt=function(E,O){this.points=E,this.planes=O};gt.fromInvProjectionMatrix=function(E,O,B){var q=Math.pow(2,B),ae=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(me){return e.transformMat4([],me,E)}).map(function(me){return e.scale$1([],me,1/me[3]/O*q)}),he=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(me){var _e=e.sub([],ae[me[0]],ae[me[1]]),Se=e.sub([],ae[me[2]],ae[me[1]]),Ve=e.normalize([],e.cross([],_e,Se)),Ke=-e.dot(Ve,ae[me[1]]);return Ve.concat(Ke)});return new gt(ae,he)};var Vt=function(E,O){this.min=E,this.max=O,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Vt.prototype.quadrant=function(E){for(var O=[E%2==0,E<2],B=e.clone$2(this.min),q=e.clone$2(this.max),ae=0;ae<O.length;ae++)B[ae]=O[ae]?this.min[ae]:this.center[ae],q[ae]=O[ae]?this.center[ae]:this.max[ae];return q[2]=this.max[2],new Vt(B,q)},Vt.prototype.distanceX=function(E){return Math.max(Math.min(this.max[0],E[0]),this.min[0])-E[0]},Vt.prototype.distanceY=function(E){return Math.max(Math.min(this.max[1],E[1]),this.min[1])-E[1]},Vt.prototype.intersects=function(E){for(var O=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],B=!0,q=0;q<E.planes.length;q++){for(var ae=E.planes[q],he=0,me=0;me<O.length;me++)he+=e.dot$1(ae,O[me])>=0;if(0===he)return 0;he!==O.length&&(B=!1)}if(B)return 2;for(var _e=0;_e<3;_e++){for(var Se=Number.MAX_VALUE,Ve=-Number.MAX_VALUE,Ke=0;Ke<E.points.length;Ke++){var st=E.points[Ke][_e]-this.min[_e];Se=Math.min(Se,st),Ve=Math.max(Ve,st)}if(Ve<0||Se>this.max[_e]-this.min[_e])return 0}return 1};var hr=function(E,O,B,q){if(void 0===E&&(E=0),void 0===O&&(O=0),void 0===B&&(B=0),void 0===q&&(q=0),isNaN(E)||E<0||isNaN(O)||O<0||isNaN(B)||B<0||isNaN(q)||q<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=E,this.bottom=O,this.left=B,this.right=q};hr.prototype.interpolate=function(E,O,B){return null!=O.top&&null!=E.top&&(this.top=e.number(E.top,O.top,B)),null!=O.bottom&&null!=E.bottom&&(this.bottom=e.number(E.bottom,O.bottom,B)),null!=O.left&&null!=E.left&&(this.left=e.number(E.left,O.left,B)),null!=O.right&&null!=E.right&&(this.right=e.number(E.right,O.right,B)),this},hr.prototype.getCenter=function(E,O){var B=e.clamp((this.left+E-this.right)/2,0,E),q=e.clamp((this.top+O-this.bottom)/2,0,O);return new e.Point(B,q)},hr.prototype.equals=function(E){return this.top===E.top&&this.bottom===E.bottom&&this.left===E.left&&this.right===E.right},hr.prototype.clone=function(){return new hr(this.top,this.bottom,this.left,this.right)},hr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jt=function(E,O,B,q,ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ae||ae,this._minZoom=E||0,this._maxZoom=O||22,this._minPitch=null==B?0:B,this._maxPitch=null==q?60:q,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new hr,this._posMatrixCache={},this._alignedPosMatrixCache={}},fr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jt.prototype.clone=function(){var E=new Jt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return E.tileSize=this.tileSize,E.latRange=this.latRange,E.width=this.width,E.height=this.height,E._center=this._center,E.zoom=this.zoom,E.angle=this.angle,E._fov=this._fov,E._pitch=this._pitch,E._unmodified=this._unmodified,E._edgeInsets=this._edgeInsets.clone(),E._calcMatrices(),E},fr.minZoom.get=function(){return this._minZoom},fr.minZoom.set=function(E){this._minZoom!==E&&(this._minZoom=E,this.zoom=Math.max(this.zoom,E))},fr.maxZoom.get=function(){return this._maxZoom},fr.maxZoom.set=function(E){this._maxZoom!==E&&(this._maxZoom=E,this.zoom=Math.min(this.zoom,E))},fr.minPitch.get=function(){return this._minPitch},fr.minPitch.set=function(E){this._minPitch!==E&&(this._minPitch=E,this.pitch=Math.max(this.pitch,E))},fr.maxPitch.get=function(){return this._maxPitch},fr.maxPitch.set=function(E){this._maxPitch!==E&&(this._maxPitch=E,this.pitch=Math.min(this.pitch,E))},fr.renderWorldCopies.get=function(){return this._renderWorldCopies},fr.renderWorldCopies.set=function(E){void 0===E?E=!0:null===E&&(E=!1),this._renderWorldCopies=E},fr.worldSize.get=function(){return this.tileSize*this.scale},fr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fr.size.get=function(){return new e.Point(this.width,this.height)},fr.bearing.get=function(){return-this.angle/Math.PI*180},fr.bearing.set=function(E){var O=-e.wrap(E,-180,180)*Math.PI/180;this.angle!==O&&(this._unmodified=!1,this.angle=O,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fr.pitch.get=function(){return this._pitch/Math.PI*180},fr.pitch.set=function(E){var O=e.clamp(E,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==O&&(this._unmodified=!1,this._pitch=O,this._calcMatrices())},fr.fov.get=function(){return this._fov/Math.PI*180},fr.fov.set=function(E){E=Math.max(.01,Math.min(60,E)),this._fov!==E&&(this._unmodified=!1,this._fov=E/180*Math.PI,this._calcMatrices())},fr.zoom.get=function(){return this._zoom},fr.zoom.set=function(E){var O=Math.min(Math.max(E,this.minZoom),this.maxZoom);this._zoom!==O&&(this._unmodified=!1,this._zoom=O,this.scale=this.zoomScale(O),this.tileZoom=Math.floor(O),this.zoomFraction=O-this.tileZoom,this._constrain(),this._calcMatrices())},fr.center.get=function(){return this._center},fr.center.set=function(E){E.lat===this._center.lat&&E.lng===this._center.lng||(this._unmodified=!1,this._center=E,this._constrain(),this._calcMatrices())},fr.padding.get=function(){return this._edgeInsets.toJSON()},fr.padding.set=function(E){this._edgeInsets.equals(E)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,E,1),this._calcMatrices())},fr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Jt.prototype.isPaddingEqual=function(E){return this._edgeInsets.equals(E)},Jt.prototype.interpolatePadding=function(E,O,B){this._unmodified=!1,this._edgeInsets.interpolate(E,O,B),this._constrain(),this._calcMatrices()},Jt.prototype.coveringZoomLevel=function(E){var O=(E.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/E.tileSize));return Math.max(0,O)},Jt.prototype.getVisibleUnwrappedCoordinates=function(E){var O=[new e.UnwrappedTileID(0,E)];if(this._renderWorldCopies)for(var B=this.pointCoordinate(new e.Point(0,0)),q=this.pointCoordinate(new e.Point(this.width,0)),ae=this.pointCoordinate(new e.Point(this.width,this.height)),he=this.pointCoordinate(new e.Point(0,this.height)),me=Math.floor(Math.min(B.x,q.x,ae.x,he.x)),_e=Math.floor(Math.max(B.x,q.x,ae.x,he.x)),Se=me-1;Se<=_e+1;Se++)0!==Se&&O.push(new e.UnwrappedTileID(Se,E));return O},Jt.prototype.coveringTiles=function(E){var O=this.coveringZoomLevel(E),B=O;if(void 0!==E.minzoom&&O<E.minzoom)return[];void 0!==E.maxzoom&&O>E.maxzoom&&(O=E.maxzoom);var q=e.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,O),he=[ae*q.x,ae*q.y,0],me=gt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,O),_e=E.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(_e=O);var Se=function(kn){return{aabb:new Vt([kn*ae,0,0],[(kn+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:kn,fullyVisible:!1}},Ve=[],Ke=[],st=O,At=E.reparseOverscaled?B:O;if(this._renderWorldCopies)for(var Pt=1;Pt<=3;Pt++)Ve.push(Se(-Pt)),Ve.push(Se(Pt));for(Ve.push(Se(0));Ve.length>0;){var St=Ve.pop(),Lt=St.x,kt=St.y,Ht=St.fullyVisible;if(!Ht){var jt=St.aabb.intersects(me);if(0===jt)continue;Ht=2===jt}var Yt=St.aabb.distanceX(he),lr=St.aabb.distanceY(he),vr=Math.max(Math.abs(Yt),Math.abs(lr));if(St.zoom===st||vr>3+(1<<st-St.zoom)-2&&St.zoom>=_e)Ke.push({tileID:new e.OverscaledTileID(St.zoom===st?At:St.zoom,St.wrap,St.zoom,Lt,kt),distanceSq:e.sqrLen([he[0]-.5-Lt,he[1]-.5-kt])});else for(var Dr=0;Dr<4;Dr++){var sn=(Lt<<1)+Dr%2,on=(kt<<1)+(Dr>>1);Ve.push({aabb:St.aabb.quadrant(Dr),zoom:St.zoom+1,x:sn,y:on,wrap:St.wrap,fullyVisible:Ht})}}return Ke.sort(function(kn,gn){return kn.distanceSq-gn.distanceSq}).map(function(kn){return kn.tileID})},Jt.prototype.resize=function(E,O){this.width=E,this.height=O,this.pixelsToGLUnits=[2/E,-2/O],this._constrain(),this._calcMatrices()},fr.unmodified.get=function(){return this._unmodified},Jt.prototype.zoomScale=function(E){return Math.pow(2,E)},Jt.prototype.scaleZoom=function(E){return Math.log(E)/Math.LN2},Jt.prototype.project=function(E){var O=e.clamp(E.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(E.lng)*this.worldSize,e.mercatorYfromLat(O)*this.worldSize)},Jt.prototype.unproject=function(E){return new e.MercatorCoordinate(E.x/this.worldSize,E.y/this.worldSize).toLngLat()},fr.point.get=function(){return this.project(this.center)},Jt.prototype.setLocationAtPoint=function(E,O){var B=this.pointCoordinate(O),q=this.pointCoordinate(this.centerPoint),ae=this.locationCoordinate(E),he=new e.MercatorCoordinate(ae.x-(B.x-q.x),ae.y-(B.y-q.y));this.center=this.coordinateLocation(he),this._renderWorldCopies&&(this.center=this.center.wrap())},Jt.prototype.locationPoint=function(E){return this.coordinatePoint(this.locationCoordinate(E))},Jt.prototype.pointLocation=function(E){return this.coordinateLocation(this.pointCoordinate(E))},Jt.prototype.locationCoordinate=function(E){return e.MercatorCoordinate.fromLngLat(E)},Jt.prototype.coordinateLocation=function(E){return E.toLngLat()},Jt.prototype.pointCoordinate=function(E){var O=[E.x,E.y,0,1],B=[E.x,E.y,1,1];e.transformMat4(O,O,this.pixelMatrixInverse),e.transformMat4(B,B,this.pixelMatrixInverse);var q=O[3],ae=B[3],_e=O[1]/q,Se=B[1]/ae,Ve=O[2]/q,Ke=B[2]/ae,st=Ve===Ke?0:(0-Ve)/(Ke-Ve);return new e.MercatorCoordinate(e.number(O[0]/q,B[0]/ae,st)/this.worldSize,e.number(_e,Se,st)/this.worldSize)},Jt.prototype.coordinatePoint=function(E){var O=[E.x*this.worldSize,E.y*this.worldSize,0,1];return e.transformMat4(O,O,this.pixelMatrix),new e.Point(O[0]/O[3],O[1]/O[3])},Jt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Jt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jt.prototype.setMaxBounds=function(E){E?(this.lngRange=[E.getWest(),E.getEast()],this.latRange=[E.getSouth(),E.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jt.prototype.calculatePosMatrix=function(E,O){void 0===O&&(O=!1);var B=E.key,q=O?this._alignedPosMatrixCache:this._posMatrixCache;if(q[B])return q[B];var ae=E.canonical,he=this.worldSize/this.zoomScale(ae.z),me=ae.x+Math.pow(2,ae.z)*E.wrap,_e=e.identity(new Float64Array(16));return e.translate(_e,_e,[me*he,ae.y*he,0]),e.scale(_e,_e,[he/e.EXTENT,he/e.EXTENT,1]),e.multiply(_e,O?this.alignedProjMatrix:this.projMatrix,_e),q[B]=new Float32Array(_e),q[B]},Jt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var E,O,B,q,ae=-90,he=90,me=-180,_e=180,Se=this.size,Ve=this._unmodified;if(this.latRange){var Ke=this.latRange;ae=e.mercatorYfromLat(Ke[1])*this.worldSize,E=(he=e.mercatorYfromLat(Ke[0])*this.worldSize)-ae<Se.y?Se.y/(he-ae):0}if(this.lngRange){var st=this.lngRange;me=e.mercatorXfromLng(st[0])*this.worldSize,O=(_e=e.mercatorXfromLng(st[1])*this.worldSize)-me<Se.x?Se.x/(_e-me):0}var At=this.point,Pt=Math.max(O||0,E||0);if(Pt)return this.center=this.unproject(new e.Point(O?(_e+me)/2:At.x,E?(he+ae)/2:At.y)),this.zoom+=this.scaleZoom(Pt),this._unmodified=Ve,void(this._constraining=!1);if(this.latRange){var St=At.y,Lt=Se.y/2;St-Lt<ae&&(q=ae+Lt),St+Lt>he&&(q=he-Lt)}if(this.lngRange){var kt=At.x,Ht=Se.x/2;kt-Ht<me&&(B=me+Ht),kt+Ht>_e&&(B=_e-Ht)}void 0===B&&void 0===q||(this.center=this.unproject(new e.Point(void 0!==B?B:At.x,void 0!==q?q:At.y))),this._unmodified=Ve,this._constraining=!1}},Jt.prototype._calcMatrices=function(){if(this.height){var O=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var B=Math.PI/2+this._pitch,q=this._fov*(.5+O.y/this.height),ae=Math.sin(q)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-B-q,.01,Math.PI-.01)),he=this.point,me=he.x,_e=he.y,Se=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+this.cameraToCenterDistance),Ve=this.height/50,Ke=new Float64Array(16);e.perspective(Ke,this._fov,this.width/this.height,Ve,Se),Ke[8]=2*-O.x/this.width,Ke[9]=2*O.y/this.height,e.scale(Ke,Ke,[1,-1,1]),e.translate(Ke,Ke,[0,0,-this.cameraToCenterDistance]),e.rotateX(Ke,Ke,this._pitch),e.rotateZ(Ke,Ke,this.angle),e.translate(Ke,Ke,[-me,-_e,0]),this.mercatorMatrix=e.scale([],Ke,[this.worldSize,this.worldSize,this.worldSize]),e.scale(Ke,Ke,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ke,this.invProjMatrix=e.invert([],this.projMatrix);var st=this.width%2/2,At=this.height%2/2,Pt=Math.cos(this.angle),St=Math.sin(this.angle),Lt=me-Math.round(me)+Pt*st+St*At,kt=_e-Math.round(_e)+Pt*At+St*st,Ht=new Float64Array(Ke);if(e.translate(Ht,Ht,[Lt>.5?Lt-1:Lt,kt>.5?kt-1:kt,0]),this.alignedProjMatrix=Ht,Ke=e.create(),e.scale(Ke,Ke,[this.width/2,-this.height/2,1]),e.translate(Ke,Ke,[1,-1,0]),this.labelPlaneMatrix=Ke,Ke=e.create(),e.scale(Ke,Ke,[1,-1,1]),e.translate(Ke,Ke,[-1,-1,0]),e.scale(Ke,Ke,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ke,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ke=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ke,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var E=this.pointCoordinate(new e.Point(0,0)),O=[E.x*this.worldSize,E.y*this.worldSize,0,1];return e.transformMat4(O,O,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jt.prototype.getCameraPoint=function(){var O=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,O))},Jt.prototype.getCameraQueryGeometry=function(E){var O=this.getCameraPoint();if(1===E.length)return[E[0],O];for(var B=O.x,q=O.y,ae=O.x,he=O.y,me=0,_e=E;me<_e.length;me+=1){var Se=_e[me];B=Math.min(B,Se.x),q=Math.min(q,Se.y),ae=Math.max(ae,Se.x),he=Math.max(he,Se.y)}return[new e.Point(B,q),new e.Point(ae,q),new e.Point(ae,he),new e.Point(B,he),new e.Point(B,q)]},Object.defineProperties(Jt.prototype,fr);var zr=function(E){var O,q,ae,he;this._hashName=E&&encodeURIComponent(E),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(O=this._updateHashUnthrottled.bind(this),300,q=!1,ae=null,he=function(){ae=null,q&&(O(),ae=setTimeout(he,300),q=!1)},function(){return q=!0,ae||he(),ae})};zr.prototype.addTo=function(E){return this._map=E,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},zr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},zr.prototype.getHashString=function(E){var O=this._map.getCenter(),B=Math.round(100*this._map.getZoom())/100,q=Math.ceil((B*Math.LN2+Math.log(512/360/.5))/Math.LN10),ae=Math.pow(10,q),he=Math.round(O.lng*ae)/ae,me=Math.round(O.lat*ae)/ae,_e=this._map.getBearing(),Se=this._map.getPitch(),Ve="";if(Ve+=E?"/"+he+"/"+me+"/"+B:B+"/"+me+"/"+he,(_e||Se)&&(Ve+="/"+Math.round(10*_e)/10),Se&&(Ve+="/"+Math.round(Se)),this._hashName){var Ke=this._hashName,st=!1,At=e.window.location.hash.slice(1).split("&").map(function(Pt){var St=Pt.split("=")[0];return St===Ke?(st=!0,St+"="+Ve):Pt}).filter(function(Pt){return Pt});return st||At.push(Ke+"="+Ve),"#"+At.join("&")}return"#"+Ve},zr.prototype._getCurrentHash=function(){var E,O=this,B=e.window.location.hash.replace("#","");return this._hashName?(B.split("&").map(function(q){return q.split("=")}).forEach(function(q){q[0]===O._hashName&&(E=q)}),(E&&E[1]||"").split("/")):B.split("/")},zr.prototype._onHashChange=function(){var E=this._getCurrentHash();if(E.length>=3&&!E.some(function(B){return isNaN(B)})){var O=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(E[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+E[2],+E[1]],zoom:+E[0],bearing:O,pitch:+(E[4]||0)}),!0}return!1},zr.prototype._updateHashUnthrottled=function(){var E=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",E)}catch(O){}};var Vr={linearity:.3,easing:e.bezier(0,0,.3,1)},$r=e.extend({deceleration:2500,maxSpeed:1400},Vr),dn=e.extend({deceleration:20,maxSpeed:1400},Vr),hn=e.extend({deceleration:1e3,maxSpeed:360},Vr),wn=e.extend({deceleration:1e3,maxSpeed:90},Vr),Ln=function(E){this._map=E,this.clear()};function mn(E,O){(!E.duration||E.duration<O.duration)&&(E.duration=O.duration,E.easing=O.easing)}function En(E,O,B){var q=B.maxSpeed,ae=B.linearity,he=B.deceleration,me=e.clamp(E*ae/(O/1e3),-q,q),_e=Math.abs(me)/(he*ae);return{easing:B.easing,duration:1e3*_e,amount:me*(_e/2)}}Ln.prototype.clear=function(){this._inertiaBuffer=[]},Ln.prototype.record=function(E){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:E})},Ln.prototype._drainInertiaBuffer=function(){for(var E=this._inertiaBuffer,O=e.browser.now();E.length>0&&O-E[0].time>160;)E.shift()},Ln.prototype._onMoveEnd=function(E){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var O={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},B=0,q=this._inertiaBuffer;B<q.length;B+=1){var ae=q[B].settings;O.zoom+=ae.zoomDelta||0,O.bearing+=ae.bearingDelta||0,O.pitch+=ae.pitchDelta||0,ae.panDelta&&O.pan._add(ae.panDelta),ae.around&&(O.around=ae.around),ae.pinchAround&&(O.pinchAround=ae.pinchAround)}var he=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,me={};if(O.pan.mag()){var _e=En(O.pan.mag(),he,e.extend({},$r,E||{}));me.offset=O.pan.mult(_e.amount/O.pan.mag()),me.center=this._map.transform.center,mn(me,_e)}if(O.zoom){var Se=En(O.zoom,he,dn);me.zoom=this._map.transform.zoom+Se.amount,mn(me,Se)}if(O.bearing){var Ve=En(O.bearing,he,hn);me.bearing=this._map.transform.bearing+e.clamp(Ve.amount,-179,179),mn(me,Ve)}if(O.pitch){var Ke=En(O.pitch,he,wn);me.pitch=this._map.transform.pitch+Ke.amount,mn(me,Ke)}if(me.zoom||me.bearing){var st=void 0===O.pinchAround?O.around:O.pinchAround;me.around=st?this._map.unproject(st):this._map.getCenter()}return this.clear(),e.extend(me,{noMoveStart:!0})}};var Yn=function(E){function O(q,ae,he,me){void 0===me&&(me={});var _e=r.mousePos(ae.getCanvasContainer(),he),Se=ae.unproject(_e);E.call(this,q,e.extend({point:_e,lngLat:Se,originalEvent:he},me)),this._defaultPrevented=!1,this.target=ae}E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O;var B={defaultPrevented:{configurable:!0}};return O.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(O.prototype,B),O}(e.Event),Jn=function(E){function O(q,ae,he){var me="touchend"===q?he.changedTouches:he.touches,_e=r.touchPos(ae.getCanvasContainer(),me),Se=_e.map(function(st){return ae.unproject(st)}),Ve=_e.reduce(function(st,At,Pt,St){return st.add(At.div(St.length))},new e.Point(0,0)),Ke=ae.unproject(Ve);E.call(this,q,{points:_e,point:Ve,lngLats:Se,lngLat:Ke,originalEvent:he}),this._defaultPrevented=!1}E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O;var B={defaultPrevented:{configurable:!0}};return O.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(O.prototype,B),O}(e.Event),si=function(E){function O(q,ae,he){E.call(this,q,{originalEvent:he}),this._defaultPrevented=!1}E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O;var B={defaultPrevented:{configurable:!0}};return O.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(O.prototype,B),O}(e.Event),nn=function(E,O){this._map=E,this._clickTolerance=O.clickTolerance};nn.prototype.reset=function(){delete this._mousedownPos},nn.prototype.wheel=function(E){return this._firePreventable(new si(E.type,this._map,E))},nn.prototype.mousedown=function(E,O){return this._mousedownPos=O,this._firePreventable(new Yn(E.type,this._map,E))},nn.prototype.mouseup=function(E){this._map.fire(new Yn(E.type,this._map,E))},nn.prototype.click=function(E,O){this._mousedownPos&&this._mousedownPos.dist(O)>=this._clickTolerance||this._map.fire(new Yn(E.type,this._map,E))},nn.prototype.dblclick=function(E){return this._firePreventable(new Yn(E.type,this._map,E))},nn.prototype.mouseover=function(E){this._map.fire(new Yn(E.type,this._map,E))},nn.prototype.mouseout=function(E){this._map.fire(new Yn(E.type,this._map,E))},nn.prototype.touchstart=function(E){return this._firePreventable(new Jn(E.type,this._map,E))},nn.prototype.touchmove=function(E){this._map.fire(new Jn(E.type,this._map,E))},nn.prototype.touchend=function(E){this._map.fire(new Jn(E.type,this._map,E))},nn.prototype.touchcancel=function(E){this._map.fire(new Jn(E.type,this._map,E))},nn.prototype._firePreventable=function(E){if(this._map.fire(E),E.defaultPrevented)return{}},nn.prototype.isEnabled=function(){return!0},nn.prototype.isActive=function(){return!1},nn.prototype.enable=function(){},nn.prototype.disable=function(){};var oi=function(E){this._map=E};oi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},oi.prototype.mousemove=function(E){this._map.fire(new Yn(E.type,this._map,E))},oi.prototype.mousedown=function(){this._delayContextMenu=!0},oi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},oi.prototype.contextmenu=function(E){this._delayContextMenu?this._contextMenuEvent=E:this._map.fire(new Yn(E.type,this._map,E)),this._map.listens("contextmenu")&&E.preventDefault()},oi.prototype.isEnabled=function(){return!0},oi.prototype.isActive=function(){return!1},oi.prototype.enable=function(){},oi.prototype.disable=function(){};var Bn=function(E,O){this._map=E,this._el=E.getCanvasContainer(),this._container=E.getContainer(),this._clickTolerance=O.clickTolerance||1};function Zn(E,O){for(var B={},q=0;q<E.length;q++)B[E[q].identifier]=O[q];return B}Bn.prototype.isEnabled=function(){return!!this._enabled},Bn.prototype.isActive=function(){return!!this._active},Bn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Bn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Bn.prototype.mousedown=function(E,O){this.isEnabled()&&E.shiftKey&&0===E.button&&(r.disableDrag(),this._startPos=this._lastPos=O,this._active=!0)},Bn.prototype.mousemoveWindow=function(E,O){if(this._active){var B=O;if(!(this._lastPos.equals(B)||!this._box&&B.dist(this._startPos)<this._clickTolerance)){var q=this._startPos;this._lastPos=B,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",E));var ae=Math.min(q.x,B.x),he=Math.max(q.x,B.x),me=Math.min(q.y,B.y),_e=Math.max(q.y,B.y);r.setTransform(this._box,"translate("+ae+"px,"+me+"px)"),this._box.style.width=he-ae+"px",this._box.style.height=_e-me+"px"}}},Bn.prototype.mouseupWindow=function(E,O){var B=this;if(this._active&&0===E.button){var q=this._startPos,ae=O;if(this.reset(),r.suppressClick(),q.x!==ae.x||q.y!==ae.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:E})),{cameraAnimation:function(he){return he.fitScreenCoordinates(q,ae,B._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",E)}},Bn.prototype.keydown=function(E){this._active&&27===E.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",E))},Bn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos},Bn.prototype._fireEvent=function(E,O){return this._map.fire(new e.Event(E,{originalEvent:O}))};var ii=function(E){this.reset(),this.numTouches=E.numTouches};ii.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ii.prototype.touchstart=function(E,O,B){(this.centroid||B.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=E.timeStamp),B.length===this.numTouches&&(this.centroid=function(q){for(var ae=new e.Point(0,0),he=0,me=q;he<me.length;he+=1)ae._add(me[he]);return ae.div(q.length)}(O),this.touches=Zn(B,O)))},ii.prototype.touchmove=function(E,O,B){if(!this.aborted&&this.centroid){var q=Zn(B,O);for(var ae in this.touches){var me=q[ae];(!me||me.dist(this.touches[ae])>30)&&(this.aborted=!0)}}},ii.prototype.touchend=function(E,O,B){if((!this.centroid||E.timeStamp-this.startTime>500)&&(this.aborted=!0),0===B.length){var q=!this.aborted&&this.centroid;if(this.reset(),q)return q}};var Ai=function(E){this.singleTap=new ii(E),this.numTaps=E.numTaps,this.reset()};Ai.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ai.prototype.touchstart=function(E,O,B){this.singleTap.touchstart(E,O,B)},Ai.prototype.touchmove=function(E,O,B){this.singleTap.touchmove(E,O,B)},Ai.prototype.touchend=function(E,O,B){var q=this.singleTap.touchend(E,O,B);if(q){var ae=E.timeStamp-this.lastTime<500,he=!this.lastTap||this.lastTap.dist(q)<30;if(ae&&he||this.reset(),this.count++,this.lastTime=E.timeStamp,this.lastTap=q,this.count===this.numTaps)return this.reset(),q}};var zi=function(){this._zoomIn=new Ai({numTouches:1,numTaps:2}),this._zoomOut=new Ai({numTouches:2,numTaps:1}),this.reset()};zi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},zi.prototype.touchstart=function(E,O,B){this._zoomIn.touchstart(E,O,B),this._zoomOut.touchstart(E,O,B)},zi.prototype.touchmove=function(E,O,B){this._zoomIn.touchmove(E,O,B),this._zoomOut.touchmove(E,O,B)},zi.prototype.touchend=function(E,O,B){var q=this,ae=this._zoomIn.touchend(E,O,B),he=this._zoomOut.touchend(E,O,B);return ae?(this._active=!0,E.preventDefault(),setTimeout(function(){return q.reset()},0),{cameraAnimation:function(me){return me.easeTo({duration:300,zoom:me.getZoom()+1,around:me.unproject(ae)},{originalEvent:E})}}):he?(this._active=!0,E.preventDefault(),setTimeout(function(){return q.reset()},0),{cameraAnimation:function(me){return me.easeTo({duration:300,zoom:me.getZoom()-1,around:me.unproject(he)},{originalEvent:E})}}):void 0},zi.prototype.touchcancel=function(){this.reset()},zi.prototype.enable=function(){this._enabled=!0},zi.prototype.disable=function(){this._enabled=!1,this.reset()},zi.prototype.isEnabled=function(){return this._enabled},zi.prototype.isActive=function(){return this._active};var Rn=function(E){this.reset(),this._clickTolerance=E.clickTolerance||1};Rn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Rn.prototype._correctButton=function(E,O){return!1},Rn.prototype._move=function(E,O){return{}},Rn.prototype.mousedown=function(E,O){if(!this._lastPoint){var B=r.mouseButton(E);this._correctButton(E,B)&&(this._lastPoint=O,this._eventButton=B)}},Rn.prototype.mousemoveWindow=function(E,O){var B=this._lastPoint;if(B&&(E.preventDefault(),this._moved||!(O.dist(B)<this._clickTolerance)))return this._moved=!0,this._lastPoint=O,this._move(B,O)},Rn.prototype.mouseupWindow=function(E){r.mouseButton(E)===this._eventButton&&(this._moved&&r.suppressClick(),this.reset())},Rn.prototype.enable=function(){this._enabled=!0},Rn.prototype.disable=function(){this._enabled=!1,this.reset()},Rn.prototype.isEnabled=function(){return this._enabled},Rn.prototype.isActive=function(){return this._active};var ji=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.mousedown=function(B,q){E.prototype.mousedown.call(this,B,q),this._lastPoint&&(this._active=!0)},O.prototype._correctButton=function(B,q){return 0===q&&!B.ctrlKey},O.prototype._move=function(B,q){return{around:q,panDelta:q.sub(B)}},O}(Rn),Pi=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype._correctButton=function(B,q){return 0===q&&B.ctrlKey||2===q},O.prototype._move=function(B,q){var ae=.8*(q.x-B.x);if(ae)return this._active=!0,{bearingDelta:ae}},O.prototype.contextmenu=function(B){B.preventDefault()},O}(Rn),xi=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype._correctButton=function(B,q){return 0===q&&B.ctrlKey||2===q},O.prototype._move=function(B,q){var ae=-.5*(q.y-B.y);if(ae)return this._active=!0,{pitchDelta:ae}},O.prototype.contextmenu=function(B){B.preventDefault()},O}(Rn),Vi=function(E){this._minTouches=1,this._clickTolerance=E.clickTolerance||1,this.reset()};Vi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Vi.prototype.touchstart=function(E,O,B){return this._calculateTransform(E,O,B)},Vi.prototype.touchmove=function(E,O,B){if(this._active)return E.preventDefault(),this._calculateTransform(E,O,B)},Vi.prototype.touchend=function(E,O,B){this._calculateTransform(E,O,B),this._active&&B.length<this._minTouches&&this.reset()},Vi.prototype.touchcancel=function(){this.reset()},Vi.prototype._calculateTransform=function(E,O,B){B.length>0&&(this._active=!0);var q=Zn(B,O),ae=new e.Point(0,0),he=new e.Point(0,0),me=0;for(var _e in q){var Se=q[_e],Ve=this._touches[_e];Ve&&(ae._add(Se),he._add(Se.sub(Ve)),me++,q[_e]=Se)}if(this._touches=q,!(me<this._minTouches)&&he.mag()){var Ke=he.div(me);if(this._sum._add(Ke),!(this._sum.mag()<this._clickTolerance))return{around:ae.div(me),panDelta:Ke}}},Vi.prototype.enable=function(){this._enabled=!0},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active};var Di=function(){this.reset()};function ra(E,O,B){for(var q=0;q<E.length;q++)if(E[q].identifier===B)return O[q]}function li(E,O){return Math.log(E/O)/Math.LN2}Di.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Di.prototype._start=function(E){},Di.prototype._move=function(E,O,B){return{}},Di.prototype.touchstart=function(E,O,B){this._firstTwoTouches||B.length<2||(this._firstTwoTouches=[B[0].identifier,B[1].identifier],this._start([O[0],O[1]]))},Di.prototype.touchmove=function(E,O,B){if(this._firstTwoTouches){E.preventDefault();var q=this._firstTwoTouches,he=q[1],me=ra(B,O,q[0]),_e=ra(B,O,he);if(me&&_e){var Se=this._aroundCenter?null:me.add(_e).div(2);return this._move([me,_e],Se,E)}}},Di.prototype.touchend=function(E,O,B){if(this._firstTwoTouches){var q=this._firstTwoTouches,he=q[1],me=ra(B,O,q[0]),_e=ra(B,O,he);me&&_e||(this._active&&r.suppressClick(),this.reset())}},Di.prototype.touchcancel=function(){this.reset()},Di.prototype.enable=function(E){this._enabled=!0,this._aroundCenter=!!E&&"center"===E.around},Di.prototype.disable=function(){this._enabled=!1,this.reset()},Di.prototype.isEnabled=function(){return this._enabled},Di.prototype.isActive=function(){return this._active};var Qi=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.reset=function(){E.prototype.reset.call(this),delete this._distance,delete this._startDistance},O.prototype._start=function(B){this._startDistance=this._distance=B[0].dist(B[1])},O.prototype._move=function(B,q){var ae=this._distance;if(this._distance=B[0].dist(B[1]),this._active||!(Math.abs(li(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:li(this._distance,ae),pinchAround:q}},O}(Di);function qa(E,O){return 180*E.angleWith(O)/Math.PI}var ts=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.reset=function(){E.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},O.prototype._start=function(B){this._startVector=this._vector=B[0].sub(B[1]),this._minDiameter=B[0].dist(B[1])},O.prototype._move=function(B,q){var ae=this._vector;if(this._vector=B[0].sub(B[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:qa(this._vector,ae),pinchAround:q}},O.prototype._isBelowThreshold=function(B){this._minDiameter=Math.min(this._minDiameter,B.mag());var q=25/(Math.PI*this._minDiameter)*360,ae=qa(B,this._startVector);return Math.abs(ae)<q},O}(Di);function No(E){return Math.abs(E.y)>Math.abs(E.x)}var xo=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.reset=function(){E.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},O.prototype._start=function(B){this._lastPoints=B,No(B[0].sub(B[1]))&&(this._valid=!1)},O.prototype._move=function(B,q,ae){var he=B[0].sub(this._lastPoints[0]),me=B[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(he,me,ae.timeStamp),this._valid)return this._lastPoints=B,this._active=!0,{pitchDelta:(he.y+me.y)/2*-.5}},O.prototype.gestureBeginsVertically=function(B,q,ae){if(void 0!==this._valid)return this._valid;var he=B.mag()>=2,me=q.mag()>=2;if(he||me){if(!he||!me)return void 0===this._firstMove&&(this._firstMove=ae),ae-this._firstMove<100&&void 0;var _e=B.y>0==q.y>0;return No(B)&&No(q)&&_e}},O}(Di),ki={panStep:100,bearingStep:15,pitchStep:10},ya=function(){var E=ki;this._panStep=E.panStep,this._bearingStep=E.bearingStep,this._pitchStep=E.pitchStep};function ho(E){return E*(2-E)}ya.prototype.reset=function(){this._active=!1},ya.prototype.keydown=function(E){var O=this;if(!(E.altKey||E.ctrlKey||E.metaKey)){var B=0,q=0,ae=0,he=0,me=0;switch(E.keyCode){case 61:case 107:case 171:case 187:B=1;break;case 189:case 109:case 173:B=-1;break;case 37:E.shiftKey?q=-1:(E.preventDefault(),he=-1);break;case 39:E.shiftKey?q=1:(E.preventDefault(),he=1);break;case 38:E.shiftKey?ae=1:(E.preventDefault(),me=-1);break;case 40:E.shiftKey?ae=-1:(E.preventDefault(),me=1);break;default:return}return{cameraAnimation:function(_e){var Se=_e.getZoom();_e.easeTo({duration:300,easeId:"keyboardHandler",easing:ho,zoom:B?Math.round(Se)+B*(E.shiftKey?2:1):Se,bearing:_e.getBearing()+q*O._bearingStep,pitch:_e.getPitch()+ae*O._pitchStep,offset:[-he*O._panStep,-me*O._panStep],center:_e.getCenter()},{originalEvent:E})}}}},ya.prototype.enable=function(){this._enabled=!0},ya.prototype.disable=function(){this._enabled=!1,this.reset()},ya.prototype.isEnabled=function(){return this._enabled},ya.prototype.isActive=function(){return this._active};var Zi=function(E,O){this._map=E,this._el=E.getCanvasContainer(),this._handler=O,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Zi.prototype.setZoomRate=function(E){this._defaultZoomRate=E},Zi.prototype.setWheelZoomRate=function(E){this._wheelZoomRate=E},Zi.prototype.isEnabled=function(){return!!this._enabled},Zi.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Zi.prototype.isZooming=function(){return!!this._zooming},Zi.prototype.enable=function(E){this.isEnabled()||(this._enabled=!0,this._aroundCenter=E&&"center"===E.around)},Zi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Zi.prototype.wheel=function(E){if(this.isEnabled()){var O=E.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*E.deltaY:E.deltaY,B=e.browser.now(),q=B-(this._lastWheelEventTime||0);this._lastWheelEventTime=B,0!==O&&O%4.000244140625==0?this._type="wheel":0!==O&&Math.abs(O)<4?this._type="trackpad":q>400?(this._type=null,this._lastValue=O,this._timeout=setTimeout(this._onTimeout,40,E)):this._type||(this._type=Math.abs(q*O)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,O+=this._lastValue)),E.shiftKey&&O&&(O/=4),this._type&&(this._lastWheelEvent=E,this._delta-=O,this._active||this._start(E)),E.preventDefault()}},Zi.prototype._onTimeout=function(E){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(E)},Zi.prototype._start=function(E){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var O=r.mousePos(this._el,E);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(O)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Zi.prototype.renderFrame=function(){return this._onScrollFrame()},Zi.prototype._onScrollFrame=function(){var E=this;if(this._frameId&&(this._frameId=null,this.isActive())){var O=this._map.transform;if(0!==this._delta){var B="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,q=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&0!==q&&(q=1/q);var ae="number"==typeof this._targetZoom?O.zoomScale(this._targetZoom):O.scale;this._targetZoom=Math.min(O.maxZoom,Math.max(O.minZoom,O.scaleZoom(ae*q))),"wheel"===this._type&&(this._startZoom=O.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var he,me="number"==typeof this._targetZoom?this._targetZoom:O.zoom,_e=this._startZoom,Se=this._easing,Ve=!1;if("wheel"===this._type&&_e&&Se){var Ke=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),st=Se(Ke);he=e.number(_e,me,st),Ke<1?this._frameId||(this._frameId=!0):Ve=!0}else he=me,Ve=!0;return this._active=!0,Ve&&(this._active=!1,this._finishTimeout=setTimeout(function(){E._zooming=!1,E._handler._triggerRenderFrame(),delete E._targetZoom,delete E._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ve,zoomDelta:he-O.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Zi.prototype._smoothOutEasing=function(E){var O=e.ease;if(this._prevEase){var B=this._prevEase,q=(e.browser.now()-B.start)/B.duration,ae=B.easing(q+.01)-B.easing(q),he=.27/Math.sqrt(ae*ae+1e-4)*.01,me=Math.sqrt(.0729-he*he);O=e.bezier(he,me,.25,1)}return this._prevEase={start:e.browser.now(),duration:E,easing:O},O},Zi.prototype.reset=function(){this._active=!1};var Sa=function(E,O){this._clickZoom=E,this._tapZoom=O};Sa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Sa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Sa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Sa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ya=function(){this.reset()};Ya.prototype.reset=function(){this._active=!1},Ya.prototype.dblclick=function(E,O){return E.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(E.shiftKey?-1:1),around:B.unproject(O)},{originalEvent:E})}}},Ya.prototype.enable=function(){this._enabled=!0},Ya.prototype.disable=function(){this._enabled=!1,this.reset()},Ya.prototype.isEnabled=function(){return this._enabled},Ya.prototype.isActive=function(){return this._active};var na=function(){this._tap=new Ai({numTouches:1,numTaps:1}),this.reset()};na.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},na.prototype.touchstart=function(E,O,B){this._swipePoint||(this._tapTime&&E.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?B.length>0&&(this._swipePoint=O[0],this._swipeTouch=B[0].identifier):this._tap.touchstart(E,O,B))},na.prototype.touchmove=function(E,O,B){if(this._tapTime){if(this._swipePoint){if(B[0].identifier!==this._swipeTouch)return;var q=O[0],ae=q.y-this._swipePoint.y;return this._swipePoint=q,E.preventDefault(),this._active=!0,{zoomDelta:ae/128}}}else this._tap.touchmove(E,O,B)},na.prototype.touchend=function(E,O,B){this._tapTime?this._swipePoint&&0===B.length&&this.reset():this._tap.touchend(E,O,B)&&(this._tapTime=E.timeStamp)},na.prototype.touchcancel=function(){this.reset()},na.prototype.enable=function(){this._enabled=!0},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active};var fo=function(E,O,B){this._el=E,this._mousePan=O,this._touchPan=B};fo.prototype.enable=function(E){this._inertiaOptions=E||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},fo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},fo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},fo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var aa=function(E,O,B){this._pitchWithRotate=E.pitchWithRotate,this._mouseRotate=O,this._mousePitch=B};aa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},aa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},aa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},aa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ao=function(E,O,B,q){this._el=E,this._touchZoom=O,this._touchRotate=B,this._tapDragZoom=q,this._rotationDisabled=!1,this._enabled=!0};ao.prototype.enable=function(E){this._touchZoom.enable(E),this._rotationDisabled||this._touchRotate.enable(E),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ao.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ao.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ao.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ao.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ao.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ls=function(E){return E.zoom||E.drag||E.pitch||E.rotate},rs=function(E){function O(){E.apply(this,arguments)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O}(e.Event);function Ps(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}var Ia=function(E,O){this._map=E,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ln(E),this._bearingSnap=O.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(O),e.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!1}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[e.window,"blur",void 0]];for(var q=0,ae=this._listeners;q<ae.length;q+=1){var he=ae[q],me=he[0];r.addEventListener(me,he[1],me===e.window.document?this.handleWindowEvent:this.handleEvent,he[2])}};Ia.prototype.destroy=function(){for(var E=0,O=this._listeners;E<O.length;E+=1){var B=O[E],q=B[0];r.removeEventListener(q,B[1],q===e.window.document?this.handleWindowEvent:this.handleEvent,B[2])}},Ia.prototype._addDefaultHandlers=function(E){var O=this._map,B=O.getCanvasContainer();this._add("mapEvent",new nn(O,E));var q=O.boxZoom=new Bn(O,E);this._add("boxZoom",q);var ae=new zi,he=new Ya;O.doubleClickZoom=new Sa(he,ae),this._add("tapZoom",ae),this._add("clickZoom",he);var me=new na;this._add("tapDragZoom",me);var _e=O.touchPitch=new xo;this._add("touchPitch",_e);var Se=new Pi(E),Ve=new xi(E);O.dragRotate=new aa(E,Se,Ve),this._add("mouseRotate",Se,["mousePitch"]),this._add("mousePitch",Ve,["mouseRotate"]);var Ke=new ji(E),st=new Vi(E);O.dragPan=new fo(B,Ke,st),this._add("mousePan",Ke),this._add("touchPan",st,["touchZoom","touchRotate"]);var At=new ts,Pt=new Qi;O.touchZoomRotate=new ao(B,Pt,At,me),this._add("touchRotate",At,["touchPan","touchZoom"]),this._add("touchZoom",Pt,["touchPan","touchRotate"]);var St=O.scrollZoom=new Zi(O,this);this._add("scrollZoom",St,["mousePan"]);var Lt=O.keyboard=new ya;this._add("keyboard",Lt),this._add("blockableMapEvent",new oi(O));for(var kt=0,Ht=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];kt<Ht.length;kt+=1){var jt=Ht[kt];E.interactive&&E[jt]&&O[jt].enable(E[jt])}},Ia.prototype._add=function(E,O,B){this._handlers.push({handlerName:E,handler:O,allowed:B}),this._handlersById[E]=O},Ia.prototype.stop=function(){if(!this._updatingCamera){for(var E=0,O=this._handlers;E<O.length;E+=1)O[E].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Ia.prototype.isActive=function(){for(var E=0,O=this._handlers;E<O.length;E+=1)if(O[E].handler.isActive())return!0;return!1},Ia.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ia.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ia.prototype.isMoving=function(){return Boolean(ls(this._eventsInProgress))||this.isZooming()},Ia.prototype._blockedByActive=function(E,O,B){for(var q in E)if(q!==B&&(!O||O.indexOf(q)<0))return!0;return!1},Ia.prototype.handleWindowEvent=function(E){this.handleEvent(E,E.type+"Window")},Ia.prototype._getMapTouches=function(E){for(var O=[],B=0,q=E;B<q.length;B+=1){var ae=q[B];this._el.contains(ae.target)&&O.push(ae)}return O},Ia.prototype.handleEvent=function(E,O){if("blur"!==E.type){this._updatingCamera=!0;for(var B="renderFrame"===E.type?void 0:E,q={needsRenderFrame:!1},ae={},he={},me=E.touches?this._getMapTouches(E.touches):void 0,_e=me?r.touchPos(this._el,me):r.mousePos(this._el,E),Se=0,Ve=this._handlers;Se<Ve.length;Se+=1){var Ke=Ve[Se],st=Ke.handlerName,At=Ke.handler,Pt=Ke.allowed;if(At.isEnabled()){var St=void 0;this._blockedByActive(he,Pt,st)?At.reset():At[O||E.type]&&(St=At[O||E.type](E,_e,me),this.mergeHandlerResult(q,ae,St,st,B),St&&St.needsRenderFrame&&this._triggerRenderFrame()),(St||At.isActive())&&(he[st]=At)}}var Lt={};for(var kt in this._previousActiveHandlers)he[kt]||(Lt[kt]=B);this._previousActiveHandlers=he,(Object.keys(Lt).length||Ps(q))&&(this._changes.push([q,ae,Lt]),this._triggerRenderFrame()),(Object.keys(he).length||Ps(q))&&this._map._stop(!0),this._updatingCamera=!1;var Ht=q.cameraAnimation;Ht&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ht(this._map))}else this.stop()},Ia.prototype.mergeHandlerResult=function(E,O,B,q,ae){if(B){e.extend(E,B);var he={handlerName:q,originalEvent:B.originalEvent||ae};void 0!==B.zoomDelta&&(O.zoom=he),void 0!==B.panDelta&&(O.drag=he),void 0!==B.pitchDelta&&(O.pitch=he),void 0!==B.bearingDelta&&(O.rotate=he)}},Ia.prototype._applyChanges=function(){for(var E={},O={},B={},q=0,ae=this._changes;q<ae.length;q+=1){var he=ae[q],me=he[0],_e=he[1],Se=he[2];me.panDelta&&(E.panDelta=(E.panDelta||new e.Point(0,0))._add(me.panDelta)),me.zoomDelta&&(E.zoomDelta=(E.zoomDelta||0)+me.zoomDelta),me.bearingDelta&&(E.bearingDelta=(E.bearingDelta||0)+me.bearingDelta),me.pitchDelta&&(E.pitchDelta=(E.pitchDelta||0)+me.pitchDelta),void 0!==me.around&&(E.around=me.around),void 0!==me.pinchAround&&(E.pinchAround=me.pinchAround),me.noInertia&&(E.noInertia=me.noInertia),e.extend(O,_e),e.extend(B,Se)}this._updateMapTransform(E,O,B),this._changes=[]},Ia.prototype._updateMapTransform=function(E,O,B){var q=this._map,ae=q.transform;if(!Ps(E))return this._fireEvents(O,B);var he=E.panDelta,me=E.zoomDelta,_e=E.bearingDelta,Se=E.pitchDelta,Ve=E.around,Ke=E.pinchAround;void 0!==Ke&&(Ve=Ke),q._stop(!0),Ve=Ve||q.transform.centerPoint;var st=ae.pointLocation(he?Ve.sub(he):Ve);_e&&(ae.bearing+=_e),Se&&(ae.pitch+=Se),me&&(ae.zoom+=me),ae.setLocationAtPoint(st,Ve),this._map._update(),E.noInertia||this._inertia.record(E),this._fireEvents(O,B)},Ia.prototype._fireEvents=function(E,O){var B=this,q=ls(this._eventsInProgress),ae=ls(E),he={};for(var me in E)this._eventsInProgress[me]||(he[me+"start"]=E[me].originalEvent),this._eventsInProgress[me]=E[me];for(var Se in!q&&ae&&this._fireEvent("movestart",ae.originalEvent),he)this._fireEvent(Se,he[Se]);for(var Ve in E.rotate&&(this._bearingChanged=!0),ae&&this._fireEvent("move",ae.originalEvent),E)this._fireEvent(Ve,E[Ve].originalEvent);var st,At={};for(var Pt in this._eventsInProgress){var St=this._eventsInProgress[Pt],Lt=St.handlerName,kt=St.originalEvent;this._handlersById[Lt].isActive()||(delete this._eventsInProgress[Pt],At[Pt+"end"]=st=O[Lt]||kt)}for(var Ht in At)this._fireEvent(Ht,At[Ht]);var jt=ls(this._eventsInProgress);if((q||ae)&&!jt){this._updatingCamera=!0;var Yt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),lr=function(vr){return 0!==vr&&-B._bearingSnap<vr&&vr<B._bearingSnap};Yt?(lr(Yt.bearing||this._map.getBearing())&&(Yt.bearing=0),this._map.easeTo(Yt,{originalEvent:st})):(this._map.fire(new e.Event("moveend",{originalEvent:st})),lr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Ia.prototype._fireEvent=function(E,O){this._map.fire(new e.Event(E,O?{originalEvent:O}:{}))},Ia.prototype._triggerRenderFrame=function(){var E=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(O){delete E._frameId,E.handleEvent(new rs("renderFrame",{timeStamp:O})),E._applyChanges()}))};var Ss=function(E){function O(B,q){E.call(this),this._moving=!1,this._zooming=!1,this.transform=B,this._bearingSnap=q.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},O.prototype.setCenter=function(B,q){return this.jumpTo({center:B},q)},O.prototype.panBy=function(B,q,ae){return B=e.Point.convert(B).mult(-1),this.panTo(this.transform.center,e.extend({offset:B},q),ae)},O.prototype.panTo=function(B,q,ae){return this.easeTo(e.extend({center:B},q),ae)},O.prototype.getZoom=function(){return this.transform.zoom},O.prototype.setZoom=function(B,q){return this.jumpTo({zoom:B},q),this},O.prototype.zoomTo=function(B,q,ae){return this.easeTo(e.extend({zoom:B},q),ae)},O.prototype.zoomIn=function(B,q){return this.zoomTo(this.getZoom()+1,B,q),this},O.prototype.zoomOut=function(B,q){return this.zoomTo(this.getZoom()-1,B,q),this},O.prototype.getBearing=function(){return this.transform.bearing},O.prototype.setBearing=function(B,q){return this.jumpTo({bearing:B},q),this},O.prototype.getPadding=function(){return this.transform.padding},O.prototype.setPadding=function(B,q){return this.jumpTo({padding:B},q),this},O.prototype.rotateTo=function(B,q,ae){return this.easeTo(e.extend({bearing:B},q),ae)},O.prototype.resetNorth=function(B,q){return this.rotateTo(0,e.extend({duration:1e3},B),q),this},O.prototype.resetNorthPitch=function(B,q){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},B),q),this},O.prototype.snapToNorth=function(B,q){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(B,q):this},O.prototype.getPitch=function(){return this.transform.pitch},O.prototype.setPitch=function(B,q){return this.jumpTo({pitch:B},q),this},O.prototype.cameraForBounds=function(B,q){return B=e.LngLatBounds.convert(B),this._cameraForBoxAndBearing(B.getNorthWest(),B.getSouthEast(),0,q)},O.prototype._cameraForBoxAndBearing=function(B,q,ae,he){var me={top:0,bottom:0,right:0,left:0};if("number"==typeof(he=e.extend({padding:me,offset:[0,0],maxZoom:this.transform.maxZoom},he)).padding){var _e=he.padding;he.padding={top:_e,bottom:_e,right:_e,left:_e}}he.padding=e.extend(me,he.padding);var Se=this.transform,Ve=Se.padding,Ke=Se.project(e.LngLat.convert(B)),st=Se.project(e.LngLat.convert(q)),At=Ke.rotate(-ae*Math.PI/180),Pt=st.rotate(-ae*Math.PI/180),St=new e.Point(Math.max(At.x,Pt.x),Math.max(At.y,Pt.y)),Lt=new e.Point(Math.min(At.x,Pt.x),Math.min(At.y,Pt.y)),kt=St.sub(Lt),Ht=(Se.width-(Ve.left+Ve.right+he.padding.left+he.padding.right))/kt.x,jt=(Se.height-(Ve.top+Ve.bottom+he.padding.top+he.padding.bottom))/kt.y;if(!(jt<0||Ht<0)){var Yt=Math.min(Se.scaleZoom(Se.scale*Math.min(Ht,jt)),he.maxZoom),lr=e.Point.convert(he.offset),Dr=new e.Point(lr.x+(he.padding.left-he.padding.right)/2,lr.y+(he.padding.top-he.padding.bottom)/2).mult(Se.scale/Se.zoomScale(Yt));return{center:Se.unproject(Ke.add(st).div(2).sub(Dr)),zoom:Yt,bearing:ae}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},O.prototype.fitBounds=function(B,q,ae){return this._fitInternal(this.cameraForBounds(B,q),q,ae)},O.prototype.fitScreenCoordinates=function(B,q,ae,he,me){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(B)),this.transform.pointLocation(e.Point.convert(q)),ae,he),he,me)},O.prototype._fitInternal=function(B,q,ae){return B?(delete(q=e.extend(B,q)).padding,q.linear?this.easeTo(q,ae):this.flyTo(q,ae)):this},O.prototype.jumpTo=function(B,q){this.stop();var ae=this.transform,he=!1,me=!1,_e=!1;return"zoom"in B&&ae.zoom!==+B.zoom&&(he=!0,ae.zoom=+B.zoom),void 0!==B.center&&(ae.center=e.LngLat.convert(B.center)),"bearing"in B&&ae.bearing!==+B.bearing&&(me=!0,ae.bearing=+B.bearing),"pitch"in B&&ae.pitch!==+B.pitch&&(_e=!0,ae.pitch=+B.pitch),null==B.padding||ae.isPaddingEqual(B.padding)||(ae.padding=B.padding),this.fire(new e.Event("movestart",q)).fire(new e.Event("move",q)),he&&this.fire(new e.Event("zoomstart",q)).fire(new e.Event("zoom",q)).fire(new e.Event("zoomend",q)),me&&this.fire(new e.Event("rotatestart",q)).fire(new e.Event("rotate",q)).fire(new e.Event("rotateend",q)),_e&&this.fire(new e.Event("pitchstart",q)).fire(new e.Event("pitch",q)).fire(new e.Event("pitchend",q)),this.fire(new e.Event("moveend",q))},O.prototype.easeTo=function(B,q){var ae=this;this._stop(!1,B.easeId),(!1===(B=e.extend({offset:[0,0],duration:500,easing:e.ease},B)).animate||!B.essential&&e.browser.prefersReducedMotion)&&(B.duration=0);var he=this.transform,me=this.getZoom(),_e=this.getBearing(),Se=this.getPitch(),Ve=this.getPadding(),Ke="zoom"in B?+B.zoom:me,st="bearing"in B?this._normalizeBearing(B.bearing,_e):_e,At="pitch"in B?+B.pitch:Se,Pt="padding"in B?B.padding:he.padding,St=e.Point.convert(B.offset),Lt=he.centerPoint.add(St),kt=he.pointLocation(Lt),Ht=e.LngLat.convert(B.center||kt);this._normalizeCenter(Ht);var jt,Yt,lr=he.project(kt),vr=he.project(Ht).sub(lr),Or=he.zoomScale(Ke-me);B.around&&(jt=e.LngLat.convert(B.around),Yt=he.locationPoint(jt));var Dr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ke!==me,this._rotating=this._rotating||_e!==st,this._pitching=this._pitching||At!==Se,this._padding=!he.isPaddingEqual(Pt),this._easeId=B.easeId,this._prepareEase(q,B.noMoveStart,Dr),clearTimeout(this._easeEndTimeoutID),this._ease(function(sn){if(ae._zooming&&(he.zoom=e.number(me,Ke,sn)),ae._rotating&&(he.bearing=e.number(_e,st,sn)),ae._pitching&&(he.pitch=e.number(Se,At,sn)),ae._padding&&(he.interpolatePadding(Ve,Pt,sn),Lt=he.centerPoint.add(St)),jt)he.setLocationAtPoint(jt,Yt);else{var on=he.zoomScale(he.zoom-me),kn=Ke>me?Math.min(2,Or):Math.max(.5,Or),gn=Math.pow(kn,1-sn),Xn=he.unproject(lr.add(vr.mult(sn*gn)).mult(on));he.setLocationAtPoint(he.renderWorldCopies?Xn.wrap():Xn,Lt)}ae._fireMoveEvents(q)},function(sn){ae._afterEase(q,sn)},B),this},O.prototype._prepareEase=function(B,q,ae){void 0===ae&&(ae={}),this._moving=!0,q||ae.moving||this.fire(new e.Event("movestart",B)),this._zooming&&!ae.zooming&&this.fire(new e.Event("zoomstart",B)),this._rotating&&!ae.rotating&&this.fire(new e.Event("rotatestart",B)),this._pitching&&!ae.pitching&&this.fire(new e.Event("pitchstart",B))},O.prototype._fireMoveEvents=function(B){this.fire(new e.Event("move",B)),this._zooming&&this.fire(new e.Event("zoom",B)),this._rotating&&this.fire(new e.Event("rotate",B)),this._pitching&&this.fire(new e.Event("pitch",B))},O.prototype._afterEase=function(B,q){if(!this._easeId||!q||this._easeId!==q){delete this._easeId;var ae=this._zooming,he=this._rotating,me=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ae&&this.fire(new e.Event("zoomend",B)),he&&this.fire(new e.Event("rotateend",B)),me&&this.fire(new e.Event("pitchend",B)),this.fire(new e.Event("moveend",B))}},O.prototype.flyTo=function(B,q){var ae=this;if(!B.essential&&e.browser.prefersReducedMotion){var he=e.pick(B,["center","zoom","bearing","pitch","around"]);return this.jumpTo(he,q)}this.stop(),B=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},B);var me=this.transform,_e=this.getZoom(),Se=this.getBearing(),Ve=this.getPitch(),Ke=this.getPadding(),st="zoom"in B?e.clamp(+B.zoom,me.minZoom,me.maxZoom):_e,At="bearing"in B?this._normalizeBearing(B.bearing,Se):Se,Pt="pitch"in B?+B.pitch:Ve,St="padding"in B?B.padding:me.padding,Lt=me.zoomScale(st-_e),kt=e.Point.convert(B.offset),Ht=me.centerPoint.add(kt),jt=me.pointLocation(Ht),Yt=e.LngLat.convert(B.center||jt);this._normalizeCenter(Yt);var lr=me.project(jt),vr=me.project(Yt).sub(lr),Or=B.curve,Dr=Math.max(me.width,me.height),sn=Dr/Lt,on=vr.mag();if("minZoom"in B){var kn=e.clamp(Math.min(B.minZoom,_e,st),me.minZoom,me.maxZoom),gn=Dr/me.zoomScale(kn-_e);Or=Math.sqrt(gn/on*2)}var Xn=Or*Or;function ti(ai){var Si=(sn*sn-Dr*Dr+(ai?-1:1)*Xn*Xn*on*on)/(2*(ai?sn:Dr)*Xn*on);return Math.log(Math.sqrt(Si*Si+1)-Si)}function gi(ai){return(Math.exp(ai)-Math.exp(-ai))/2}function Jr(ai){return(Math.exp(ai)+Math.exp(-ai))/2}var Pn=ti(0),ri=function(ai){return Jr(Pn)/Jr(Pn+Or*ai)},$n=function(ai){return Dr*((Jr(Pn)*(gi(Si=Pn+Or*ai)/Jr(Si))-gi(Pn))/Xn)/on;var Si},ui=(ti(1)-Pn)/Or;if(Math.abs(on)<1e-6||!isFinite(ui)){if(Math.abs(Dr-sn)<1e-6)return this.easeTo(B,q);var _i=sn<Dr?-1:1;ui=Math.abs(Math.log(sn/Dr))/Or,$n=function(){return 0},ri=function(ai){return Math.exp(_i*Or*ai)}}return B.duration="duration"in B?+B.duration:1e3*ui/("screenSpeed"in B?+B.screenSpeed/Or:+B.speed),B.maxDuration&&B.duration>B.maxDuration&&(B.duration=0),this._zooming=!0,this._rotating=Se!==At,this._pitching=Pt!==Ve,this._padding=!me.isPaddingEqual(St),this._prepareEase(q,!1),this._ease(function(ai){var Si=ai*ui,Mi=1/ri(Si);me.zoom=1===ai?st:_e+me.scaleZoom(Mi),ae._rotating&&(me.bearing=e.number(Se,At,ai)),ae._pitching&&(me.pitch=e.number(Ve,Pt,ai)),ae._padding&&(me.interpolatePadding(Ke,St,ai),Ht=me.centerPoint.add(kt));var Fi=1===ai?Yt:me.unproject(lr.add(vr.mult($n(Si))).mult(Mi));me.setLocationAtPoint(me.renderWorldCopies?Fi.wrap():Fi,Ht),ae._fireMoveEvents(q)},function(){return ae._afterEase(q)},B),this},O.prototype.isEasing=function(){return!!this._easeFrameId},O.prototype.stop=function(){return this._stop()},O.prototype._stop=function(B,q){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ae=this._onEaseEnd;delete this._onEaseEnd,ae.call(this,q)}if(!B){var he=this.handlers;he&&he.stop()}return this},O.prototype._ease=function(B,q,ae){!1===ae.animate||0===ae.duration?(B(1),q()):(this._easeStart=e.browser.now(),this._easeOptions=ae,this._onEaseFrame=B,this._onEaseEnd=q,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},O.prototype._renderFrameCallback=function(){var B=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(B)),B<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},O.prototype._normalizeBearing=function(B,q){B=e.wrap(B,-180,180);var ae=Math.abs(B-q);return Math.abs(B-360-q)<ae&&(B-=360),Math.abs(B+360-q)<ae&&(B+=360),B},O.prototype._normalizeCenter=function(B){var q=this.transform;if(q.renderWorldCopies&&!q.lngRange){var ae=B.lng-q.center.lng;B.lng+=ae>180?-360:ae<-180?360:0}},O}(e.Evented),Pa=function(E){void 0===E&&(E={}),this.options=E,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Pa.prototype.getDefaultPosition=function(){return"bottom-right"},Pa.prototype.onAdd=function(E){var O=this.options&&this.options.compact;return this._map=E,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),O&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===O&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Pa.prototype.onRemove=function(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Pa.prototype._updateEditLink=function(){var E=this._editLink;E||(E=this._editLink=this._container.querySelector(".mapbox-improve-map"));var O=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(E){var B=O.reduce(function(q,ae,he){return ae.value&&(q+=ae.key+"="+ae.value+(he<O.length-1?"&":"")),q},"?");E.href=e.config.FEEDBACK_URL+"/"+B+(this._map._hash?this._map._hash.getHashString(!0):""),E.rel="noopener nofollow"}},Pa.prototype._updateData=function(E){!E||"metadata"!==E.sourceDataType&&"style"!==E.dataType||(this._updateAttributions(),this._updateEditLink())},Pa.prototype._updateAttributions=function(){if(this._map.style){var E=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?E=E.concat(this.options.customAttribution.map(function(_e){return"string"!=typeof _e?"":_e})):"string"==typeof this.options.customAttribution&&E.push(this.options.customAttribution)),this._map.style.stylesheet){var O=this._map.style.stylesheet;this.styleOwner=O.owner,this.styleId=O.id}var B=this._map.style.sourceCaches;for(var q in B){var ae=B[q];if(ae.used){var he=ae.getSource();he.attribution&&E.indexOf(he.attribution)<0&&E.push(he.attribution)}}E.sort(function(_e,Se){return _e.length-Se.length});var me=(E=E.filter(function(_e,Se){for(var Ve=Se+1;Ve<E.length;Ve++)if(E[Ve].indexOf(_e)>=0)return!1;return!0})).join(" | ");me!==this._attribHTML&&(this._attribHTML=me,E.length?(this._innerContainer.innerHTML=me,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Pa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ns=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};ns.prototype.onAdd=function(E){this._map=E,this._container=r.create("div","mapboxgl-ctrl");var O=r.create("a","mapboxgl-ctrl-logo");return O.target="_blank",O.rel="noopener nofollow",O.href="https://www.mapbox.com/",O.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),O.setAttribute("rel","noopener nofollow"),this._container.appendChild(O),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ns.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ns.prototype.getDefaultPosition=function(){return"bottom-left"},ns.prototype._updateLogo=function(E){E&&"metadata"!==E.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ns.prototype._logoRequired=function(){if(this._map.style){var E=this._map.style.sourceCaches;for(var O in E)if(E[O].getSource().mapbox_logo)return!0;return!1}},ns.prototype._updateCompact=function(){var E=this._container.children;if(E.length){var O=E[0];this._map.getCanvasContainer().offsetWidth<250?O.classList.add("mapboxgl-compact"):O.classList.remove("mapboxgl-compact")}};var mi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};mi.prototype.add=function(E){var O=++this._id;return this._queue.push({callback:E,id:O,cancelled:!1}),O},mi.prototype.remove=function(E){for(var O=this._currentlyRunning,B=0,q=O?this._queue.concat(O):this._queue;B<q.length;B+=1){var ae=q[B];if(ae.id===E)return void(ae.cancelled=!0)}},mi.prototype.run=function(E){void 0===E&&(E=0);var O=this._currentlyRunning=this._queue;this._queue=[];for(var B=0,q=O;B<q.length;B+=1){var ae=q[B];if(!ae.cancelled&&(ae.callback(E),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},mi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ti={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ds=e.window.HTMLImageElement,ws=e.window.HTMLElement,is=e.window.ImageBitmap,Ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ho=function(E){function O(q){var ae=this;if(null!=(q=e.extend({},Ao,q)).minZoom&&null!=q.maxZoom&&q.minZoom>q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=q.minPitch&&null!=q.maxPitch&&q.minPitch>q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=q.minPitch&&q.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=q.maxPitch&&q.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var he=new Jt(q.minZoom,q.maxZoom,q.minPitch,q.maxPitch,q.renderWorldCopies);if(E.call(this,he,q),this._interactive=q.interactive,this._maxTileCacheSize=q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=q.preserveDrawingBuffer,this._antialias=q.antialias,this._trackResize=q.trackResize,this._bearingSnap=q.bearingSnap,this._refreshExpiredTiles=q.refreshExpiredTiles,this._fadeDuration=q.fadeDuration,this._crossSourceCollisions=q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=q.collectResourceTiming,this._renderTaskQueue=new mi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Ti,q.locale),this._requestManager=new e.RequestManager(q.transformRequest,q.accessToken),"string"==typeof q.container){if(this._container=e.window.document.getElementById(q.container),!this._container)throw new Error("Container '"+q.container+"' not found.")}else{if(!(q.container instanceof ws))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=q.container}if(q.maxBounds&&this.setMaxBounds(q.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ae._update(!1)}),this.on("moveend",function(){return ae._update(!1)}),this.on("zoom",function(){return ae._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Ia(this,q),this._hash=q.hash&&new zr("string"==typeof q.hash&&q.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:q.center,zoom:q.zoom,bearing:q.bearing,pitch:q.pitch}),q.bounds&&(this.resize(),this.fitBounds(q.bounds,e.extend({},q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=q.localIdeographFontFamily,q.style&&this.setStyle(q.style,{localIdeographFontFamily:q.localIdeographFontFamily}),q.attributionControl&&this.addControl(new Pa({customAttribution:q.customAttribution})),this.addControl(new ns,q.logoPosition),this.on("style.load",function(){ae.transform.unmodified&&ae.jumpTo(ae.style.stylesheet)}),this.on("data",function(_e){ae._update("style"===_e.dataType),ae.fire(new e.Event(_e.dataType+"data",_e))}),this.on("dataloading",function(_e){ae.fire(new e.Event(_e.dataType+"dataloading",_e))})}E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O;var B={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return O.prototype._getMapId=function(){return this._mapId},O.prototype.addControl=function(q,ae){if(void 0===ae&&q.getDefaultPosition&&(ae=q.getDefaultPosition()),void 0===ae&&(ae="top-right"),!q||!q.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var he=q.onAdd(this);this._controls.push(q);var me=this._controlPositions[ae];return-1!==ae.indexOf("bottom")?me.insertBefore(he,me.firstChild):me.appendChild(he),this},O.prototype.removeControl=function(q){if(!q||!q.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ae=this._controls.indexOf(q);return ae>-1&&this._controls.splice(ae,1),q.onRemove(this),this},O.prototype.resize=function(q){var ae=this._containerDimensions(),he=ae[0],me=ae[1];this._resizeCanvas(he,me),this.transform.resize(he,me),this.painter.resize(he,me);var _e=!this._moving;return _e&&(this.stop(),this.fire(new e.Event("movestart",q)).fire(new e.Event("move",q))),this.fire(new e.Event("resize",q)),_e&&this.fire(new e.Event("moveend",q)),this},O.prototype.getBounds=function(){return this.transform.getBounds()},O.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},O.prototype.setMaxBounds=function(q){return this.transform.setMaxBounds(e.LngLatBounds.convert(q)),this._update()},O.prototype.setMinZoom=function(q){if((q=null==q?-2:q)>=-2&&q<=this.transform.maxZoom)return this.transform.minZoom=q,this._update(),this.getZoom()<q&&this.setZoom(q),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},O.prototype.getMinZoom=function(){return this.transform.minZoom},O.prototype.setMaxZoom=function(q){if((q=null==q?22:q)>=this.transform.minZoom)return this.transform.maxZoom=q,this._update(),this.getZoom()>q&&this.setZoom(q),this;throw new Error("maxZoom must be greater than the current minZoom")},O.prototype.getMaxZoom=function(){return this.transform.maxZoom},O.prototype.setMinPitch=function(q){if((q=null==q?0:q)<0)throw new Error("minPitch must be greater than or equal to 0");if(q>=0&&q<=this.transform.maxPitch)return this.transform.minPitch=q,this._update(),this.getPitch()<q&&this.setPitch(q),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},O.prototype.getMinPitch=function(){return this.transform.minPitch},O.prototype.setMaxPitch=function(q){if((q=null==q?60:q)>60)throw new Error("maxPitch must be less than or equal to 60");if(q>=this.transform.minPitch)return this.transform.maxPitch=q,this._update(),this.getPitch()>q&&this.setPitch(q),this;throw new Error("maxPitch must be greater than the current minPitch")},O.prototype.getMaxPitch=function(){return this.transform.maxPitch},O.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},O.prototype.setRenderWorldCopies=function(q){return this.transform.renderWorldCopies=q,this._update()},O.prototype.project=function(q){return this.transform.locationPoint(e.LngLat.convert(q))},O.prototype.unproject=function(q){return this.transform.pointLocation(e.Point.convert(q))},O.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},O.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},O.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},O.prototype._createDelegatedListener=function(q,ae,he){var me,_e=this;if("mouseenter"===q||"mouseover"===q){var Se=!1;return{layer:ae,listener:he,delegates:{mousemove:function(Ke){var st=_e.getLayer(ae)?_e.queryRenderedFeatures(Ke.point,{layers:[ae]}):[];st.length?Se||(Se=!0,he.call(_e,new Yn(q,_e,Ke.originalEvent,{features:st}))):Se=!1},mouseout:function(){Se=!1}}}}if("mouseleave"===q||"mouseout"===q){var Ve=!1;return{layer:ae,listener:he,delegates:{mousemove:function(Ke){(_e.getLayer(ae)?_e.queryRenderedFeatures(Ke.point,{layers:[ae]}):[]).length?Ve=!0:Ve&&(Ve=!1,he.call(_e,new Yn(q,_e,Ke.originalEvent)))},mouseout:function(Ke){Ve&&(Ve=!1,he.call(_e,new Yn(q,_e,Ke.originalEvent)))}}}}return{layer:ae,listener:he,delegates:(me={},me[q]=function(Ke){var st=_e.getLayer(ae)?_e.queryRenderedFeatures(Ke.point,{layers:[ae]}):[];st.length&&(Ke.features=st,he.call(_e,Ke),delete Ke.features)},me)}},O.prototype.on=function(q,ae,he){if(void 0===he)return E.prototype.on.call(this,q,ae);var me=this._createDelegatedListener(q,ae,he);for(var _e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[q]=this._delegatedListeners[q]||[],this._delegatedListeners[q].push(me),me.delegates)this.on(_e,me.delegates[_e]);return this},O.prototype.once=function(q,ae,he){if(void 0===he)return E.prototype.once.call(this,q,ae);var me=this._createDelegatedListener(q,ae,he);for(var _e in me.delegates)this.once(_e,me.delegates[_e]);return this},O.prototype.off=function(q,ae,he){var me=this;return void 0===he?E.prototype.off.call(this,q,ae):(this._delegatedListeners&&this._delegatedListeners[q]&&function(_e){for(var Se=_e[q],Ve=0;Ve<Se.length;Ve++){var Ke=Se[Ve];if(Ke.layer===ae&&Ke.listener===he){for(var st in Ke.delegates)me.off(st,Ke.delegates[st]);return Se.splice(Ve,1),me}}}(this._delegatedListeners),this)},O.prototype.queryRenderedFeatures=function(q,ae){if(!this.style)return[];var he;if(void 0!==ae||void 0===q||q instanceof e.Point||Array.isArray(q)||(ae=q,q=void 0),ae=ae||{},(q=q||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof q[0])he=[e.Point.convert(q)];else{var me=e.Point.convert(q[0]),_e=e.Point.convert(q[1]);he=[me,new e.Point(_e.x,me.y),_e,new e.Point(me.x,_e.y),me]}return this.style.queryRenderedFeatures(he,ae,this.transform)},O.prototype.querySourceFeatures=function(q,ae){return this.style.querySourceFeatures(q,ae)},O.prototype.setStyle=function(q,ae){return!1!==(ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ae)).diff&&ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&q?(this._diffStyle(q,ae),this):(this._localIdeographFontFamily=ae.localIdeographFontFamily,this._updateStyle(q,ae))},O.prototype._getUIString=function(q){var ae=this._locale[q];if(null==ae)throw new Error("Missing UI string '"+q+"'");return ae},O.prototype._updateStyle=function(q,ae){return this.style&&(this.style.setEventedParent(null),this.style._remove()),q?(this.style=new Qn(this,ae||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof q?this.style.loadURL(q):this.style.loadJSON(q),this):(delete this.style,this)},O.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Qn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},O.prototype._diffStyle=function(q,ae){var he=this;if("string"==typeof q){var me=this._requestManager.normalizeStyleURL(q),_e=this._requestManager.transformRequest(me,e.ResourceType.Style);e.getJSON(_e,function(Se,Ve){Se?he.fire(new e.ErrorEvent(Se)):Ve&&he._updateDiff(Ve,ae)})}else"object"==typeof q&&this._updateDiff(q,ae)},O.prototype._updateDiff=function(q,ae){try{this.style.setState(q)&&this._update(!0)}catch(he){e.warnOnce("Unable to perform style diff: "+(he.message||he.error||he)+".  Rebuilding the style from scratch."),this._updateStyle(q,ae)}},O.prototype.getStyle=function(){if(this.style)return this.style.serialize()},O.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},O.prototype.addSource=function(q,ae){return this._lazyInitEmptyStyle(),this.style.addSource(q,ae),this._update(!0)},O.prototype.isSourceLoaded=function(q){var ae=this.style&&this.style.sourceCaches[q];if(void 0!==ae)return ae.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+q+"'")))},O.prototype.areTilesLoaded=function(){var q=this.style&&this.style.sourceCaches;for(var ae in q){var he=q[ae]._tiles;for(var me in he){var _e=he[me];if("loaded"!==_e.state&&"errored"!==_e.state)return!1}}return!0},O.prototype.addSourceType=function(q,ae,he){return this._lazyInitEmptyStyle(),this.style.addSourceType(q,ae,he)},O.prototype.removeSource=function(q){return this.style.removeSource(q),this._update(!0)},O.prototype.getSource=function(q){return this.style.getSource(q)},O.prototype.addImage=function(q,ae,he){void 0===he&&(he={});var me=he.pixelRatio;void 0===me&&(me=1);var _e=he.sdf;void 0===_e&&(_e=!1);var Se=he.stretchX,Ve=he.stretchY,Ke=he.content;if(this._lazyInitEmptyStyle(),ae instanceof Ds||is&&ae instanceof is){var st=e.browser.getImageData(ae);this.style.addImage(q,{data:new e.RGBAImage({width:st.width,height:st.height},st.data),pixelRatio:me,stretchX:Se,stretchY:Ve,content:Ke,sdf:_e,version:0})}else{if(void 0===ae.width||void 0===ae.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var jt=ae;this.style.addImage(q,{data:new e.RGBAImage({width:ae.width,height:ae.height},new Uint8Array(ae.data)),pixelRatio:me,stretchX:Se,stretchY:Ve,content:Ke,sdf:_e,version:0,userImage:jt}),jt.onAdd&&jt.onAdd(this,q)}},O.prototype.updateImage=function(q,ae){var he=this.style.getImage(q);if(!he)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var me=ae instanceof Ds||is&&ae instanceof is?e.browser.getImageData(ae):ae,_e=me.width,Se=me.height,Ve=me.data;return void 0===_e||void 0===Se?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):_e!==he.data.width||Se!==he.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(he.data.replace(Ve,!(ae instanceof Ds||is&&ae instanceof is)),void this.style.updateImage(q,he))},O.prototype.hasImage=function(q){return q?!!this.style.getImage(q):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},O.prototype.removeImage=function(q){this.style.removeImage(q)},O.prototype.loadImage=function(q,ae){e.getImage(this._requestManager.transformRequest(q,e.ResourceType.Image),ae)},O.prototype.listImages=function(){return this.style.listImages()},O.prototype.addLayer=function(q,ae){return this._lazyInitEmptyStyle(),this.style.addLayer(q,ae),this._update(!0)},O.prototype.moveLayer=function(q,ae){return this.style.moveLayer(q,ae),this._update(!0)},O.prototype.removeLayer=function(q){return this.style.removeLayer(q),this._update(!0)},O.prototype.getLayer=function(q){return this.style.getLayer(q)},O.prototype.setLayerZoomRange=function(q,ae,he){return this.style.setLayerZoomRange(q,ae,he),this._update(!0)},O.prototype.setFilter=function(q,ae,he){return void 0===he&&(he={}),this.style.setFilter(q,ae,he),this._update(!0)},O.prototype.getFilter=function(q){return this.style.getFilter(q)},O.prototype.setPaintProperty=function(q,ae,he,me){return void 0===me&&(me={}),this.style.setPaintProperty(q,ae,he,me),this._update(!0)},O.prototype.getPaintProperty=function(q,ae){return this.style.getPaintProperty(q,ae)},O.prototype.setLayoutProperty=function(q,ae,he,me){return void 0===me&&(me={}),this.style.setLayoutProperty(q,ae,he,me),this._update(!0)},O.prototype.getLayoutProperty=function(q,ae){return this.style.getLayoutProperty(q,ae)},O.prototype.setLight=function(q,ae){return void 0===ae&&(ae={}),this._lazyInitEmptyStyle(),this.style.setLight(q,ae),this._update(!0)},O.prototype.getLight=function(){return this.style.getLight()},O.prototype.setFeatureState=function(q,ae){return this.style.setFeatureState(q,ae),this._update()},O.prototype.removeFeatureState=function(q,ae){return this.style.removeFeatureState(q,ae),this._update()},O.prototype.getFeatureState=function(q){return this.style.getFeatureState(q)},O.prototype.getContainer=function(){return this._container},O.prototype.getCanvasContainer=function(){return this._canvasContainer},O.prototype.getCanvas=function(){return this._canvas},O.prototype._containerDimensions=function(){var q=0,ae=0;return this._container&&(q=this._container.clientWidth||400,ae=this._container.clientHeight||300),[q,ae]},O.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},O.prototype._setupContainer=function(){var q=this._container;q.classList.add("mapboxgl-map"),(this._missingCSSCanary=r.create("div","mapboxgl-canary",q)).style.visibility="hidden",this._detectMissingCSS();var ae=this._canvasContainer=r.create("div","mapboxgl-canvas-container",q);this._interactive&&ae.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",ae),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var he=this._containerDimensions();this._resizeCanvas(he[0],he[1]);var me=this._controlContainer=r.create("div","mapboxgl-control-container",q),_e=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Se){_e[Se]=r.create("div","mapboxgl-ctrl-"+Se,me)})},O.prototype._resizeCanvas=function(q,ae){var he=e.browser.devicePixelRatio||1;this._canvas.width=he*q,this._canvas.height=he*ae,this._canvas.style.width=q+"px",this._canvas.style.height=ae+"px"},O.prototype._setupPainter=function(){var q=e.extend({},i.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ae=this._canvas.getContext("webgl",q)||this._canvas.getContext("experimental-webgl",q);ae?(this.painter=new Ni(ae,this.transform),e.webpSupported.testSupport(ae)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},O.prototype._contextLost=function(q){q.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:q}))},O.prototype._contextRestored=function(q){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:q}))},O.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},O.prototype._update=function(q){return this.style?(this._styleDirty=this._styleDirty||q,this._sourcesDirty=!0,this.triggerRepaint(),this):this},O.prototype._requestRenderFrame=function(q){return this._update(),this._renderTaskQueue.add(q)},O.prototype._cancelRenderFrame=function(q){this._renderTaskQueue.remove(q)},O.prototype._render=function(q){var ae,he=this,me=0,_e=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ae=_e.createQueryEXT(),_e.beginQueryEXT(_e.TIME_ELAPSED_EXT,ae),me=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(q),!this._removed){var Se=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ve=this.transform.zoom,Ke=e.browser.now();this.style.zoomHistory.update(Ve,Ke);var st=new e.EvaluationParameters(Ve,{now:Ke,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),At=st.crossFadingFactor();1===At&&At===this._crossFadingFactor||(Se=!0,this._crossFadingFactor=At),this.style.update(st)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Se)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Pt=e.browser.now()-me;_e.endQueryEXT(_e.TIME_ELAPSED_EXT,ae),setTimeout(function(){var Lt=_e.getQueryObjectEXT(ae,_e.QUERY_RESULT_EXT)/1e6;_e.deleteQueryEXT(ae),he.fire(new e.Event("gpu-timing-frame",{cpuTime:Pt,gpuTime:Lt}))},50)}if(this.listens("gpu-timing-layer")){var St=this.painter.collectGpuTimers();setTimeout(function(){var Lt=he.painter.queryGpuTimers(St);he.fire(new e.Event("gpu-timing-layer",{layerTimes:Lt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},O.prototype.remove=function(){this._hash&&this._hash.remove();for(var q=0,ae=this._controls;q<ae.length;q+=1)ae[q].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var he=this.painter.context.gl.getExtension("WEBGL_lose_context");he&&he.loseContext(),Vs(this._canvasContainer),Vs(this._controlContainer),Vs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},O.prototype.triggerRepaint=function(){var q=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ae){q._frame=null,q._render(ae)}))},O.prototype._onWindowOnline=function(){this._update()},O.prototype._onWindowResize=function(q){this._trackResize&&this.resize({originalEvent:q})._update()},B.showTileBoundaries.get=function(){return!!this._showTileBoundaries},B.showTileBoundaries.set=function(q){this._showTileBoundaries!==q&&(this._showTileBoundaries=q,this._update())},B.showPadding.get=function(){return!!this._showPadding},B.showPadding.set=function(q){this._showPadding!==q&&(this._showPadding=q,this._update())},B.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},B.showCollisionBoxes.set=function(q){this._showCollisionBoxes!==q&&(this._showCollisionBoxes=q,q?this.style._generateCollisionBoxes():this._update())},B.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},B.showOverdrawInspector.set=function(q){this._showOverdrawInspector!==q&&(this._showOverdrawInspector=q,this._update())},B.repaint.get=function(){return!!this._repaint},B.repaint.set=function(q){this._repaint!==q&&(this._repaint=q,this.triggerRepaint())},B.vertices.get=function(){return!!this._vertices},B.vertices.set=function(q){this._vertices=q,this._update()},O.prototype._setCacheLimits=function(q,ae){e.setCacheLimits(q,ae)},B.version.get=function(){return e.version},Object.defineProperties(O.prototype,B),O}(Ss);function Vs(E){E.parentNode&&E.parentNode.removeChild(E)}var Cs={showCompass:!0,showZoom:!0,visualizePitch:!1},$i=function(E){var O=this;this.options=e.extend({},Cs,E),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return O._map.zoomIn({},{originalEvent:B})}),r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return O._map.zoomOut({},{originalEvent:B})}),r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){O.options.visualizePitch?O._map.resetNorthPitch({},{originalEvent:B}):O._map.resetNorth({},{originalEvent:B})}),this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};$i.prototype._updateZoomButtons=function(){var E=this._map.getZoom();this._zoomInButton.disabled=E===this._map.getMaxZoom(),this._zoomOutButton.disabled=E===this._map.getMinZoom()},$i.prototype._rotateCompassArrow=function(){var E=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=E},$i.prototype.onAdd=function(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oa(this._map,this._compass,this.options.visualizePitch)),this._container},$i.prototype.onRemove=function(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},$i.prototype._createButton=function(E,O){var B=r.create("button",E,this._container);return B.type="button",B.addEventListener("click",O),B},$i.prototype._setButtonTitle=function(E,O){var B=this._map._getUIString("NavigationControl."+O);E.title=B,E.setAttribute("aria-label",B)};var oa=function(E,O,B){void 0===B&&(B=!1),this._clickTolerance=10,this.element=O,this.mouseRotate=new Pi({clickTolerance:E.dragRotate._mouseRotate._clickTolerance}),this.map=E,B&&(this.mousePitch=new xi({clickTolerance:E.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener(O,"mousedown",this.mousedown),r.addEventListener(O,"touchstart",this.touchstart,{passive:!1}),r.addEventListener(O,"touchmove",this.touchmove),r.addEventListener(O,"touchend",this.touchend),r.addEventListener(O,"touchcancel",this.reset)};function ms(E,O,B){if(E=new e.LngLat(E.lng,E.lat),O){var q=new e.LngLat(E.lng-360,E.lat),ae=new e.LngLat(E.lng+360,E.lat),he=B.locationPoint(E).distSqr(O);B.locationPoint(q).distSqr(O)<he?E=q:B.locationPoint(ae).distSqr(O)<he&&(E=ae)}for(;Math.abs(E.lng-B.center.lng)>180;){var me=B.locationPoint(E);if(me.x>=0&&me.y>=0&&me.x<=B.width&&me.y<=B.height)break;E.lng>B.center.lng?E.lng-=360:E.lng+=360}return E}oa.prototype.down=function(E,O){this.mouseRotate.mousedown(E,O),this.mousePitch&&this.mousePitch.mousedown(E,O),r.disableDrag()},oa.prototype.move=function(E,O){var B=this.map,q=this.mouseRotate.mousemoveWindow(E,O);if(q&&q.bearingDelta&&B.setBearing(B.getBearing()+q.bearingDelta),this.mousePitch){var ae=this.mousePitch.mousemoveWindow(E,O);ae&&ae.pitchDelta&&B.setPitch(B.getPitch()+ae.pitchDelta)}},oa.prototype.off=function(){var E=this.element;r.removeEventListener(E,"mousedown",this.mousedown),r.removeEventListener(E,"touchstart",this.touchstart,{passive:!1}),r.removeEventListener(E,"touchmove",this.touchmove),r.removeEventListener(E,"touchend",this.touchend),r.removeEventListener(E,"touchcancel",this.reset),this.offTemp()},oa.prototype.offTemp=function(){r.enableDrag(),r.removeEventListener(e.window,"mousemove",this.mousemove),r.removeEventListener(e.window,"mouseup",this.mouseup)},oa.prototype.mousedown=function(E){this.down(e.extend({},E,{ctrlKey:!0,preventDefault:function(){return E.preventDefault()}}),r.mousePos(this.element,E)),r.addEventListener(e.window,"mousemove",this.mousemove),r.addEventListener(e.window,"mouseup",this.mouseup)},oa.prototype.mousemove=function(E){this.move(E,r.mousePos(this.element,E))},oa.prototype.mouseup=function(E){this.mouseRotate.mouseupWindow(E),this.mousePitch&&this.mousePitch.mouseupWindow(E),this.offTemp()},oa.prototype.touchstart=function(E){1!==E.targetTouches.length?this.reset():(this._startPos=this._lastPos=r.touchPos(this.element,E.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return E.preventDefault()}},this._startPos))},oa.prototype.touchmove=function(E){1!==E.targetTouches.length?this.reset():(this._lastPos=r.touchPos(this.element,E.targetTouches)[0],this.move({preventDefault:function(){return E.preventDefault()}},this._lastPos))},oa.prototype.touchend=function(E){0===E.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},oa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var gs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Oa(E,O,B){var q=E.classList;for(var ae in gs)q.remove("mapboxgl-"+B+"-anchor-"+ae);q.add("mapboxgl-"+B+"-anchor-"+O)}var vs,Es=function(E){function O(B,q){var ae=this;if(E.call(this),(B instanceof e.window.HTMLElement||q)&&(B=e.extend({element:B},q)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=B&&B.anchor||"center",this._color=B&&B.color||"#3FB1CE",this._draggable=B&&B.draggable||!1,this._state="inactive",this._rotation=B&&B.rotation||0,this._rotationAlignment=B&&B.rotationAlignment||"auto",this._pitchAlignment=B&&B.pitchAlignment&&"auto"!==B.pitchAlignment?B.pitchAlignment:this._rotationAlignment,B&&B.element)this._element=B.element,this._offset=e.Point.convert(B&&B.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div"),this._element.setAttribute("aria-label","Map marker");var he=r.createNS("http://www.w3.org/2000/svg","svg");he.setAttributeNS(null,"display","block"),he.setAttributeNS(null,"height","41px"),he.setAttributeNS(null,"width","27px"),he.setAttributeNS(null,"viewBox","0 0 27 41");var me=r.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"stroke","none"),me.setAttributeNS(null,"stroke-width","1"),me.setAttributeNS(null,"fill","none"),me.setAttributeNS(null,"fill-rule","evenodd");var _e=r.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"fill-rule","nonzero");var Se=r.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Se.setAttributeNS(null,"fill","#000000");for(var Ve=0,Ke=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ve<Ke.length;Ve+=1){var st=Ke[Ve],At=r.createNS("http://www.w3.org/2000/svg","ellipse");At.setAttributeNS(null,"opacity","0.04"),At.setAttributeNS(null,"cx","10.5"),At.setAttributeNS(null,"cy","5.80029008"),At.setAttributeNS(null,"rx",st.rx),At.setAttributeNS(null,"ry",st.ry),Se.appendChild(At)}var Pt=r.createNS("http://www.w3.org/2000/svg","g");Pt.setAttributeNS(null,"fill",this._color);var St=r.createNS("http://www.w3.org/2000/svg","path");St.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Pt.appendChild(St);var Lt=r.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"fill","#000000");var kt=r.createNS("http://www.w3.org/2000/svg","path");kt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Lt.appendChild(kt);var Ht=r.createNS("http://www.w3.org/2000/svg","g");Ht.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ht.setAttributeNS(null,"fill","#FFFFFF");var jt=r.createNS("http://www.w3.org/2000/svg","g");jt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Yt=r.createNS("http://www.w3.org/2000/svg","circle");Yt.setAttributeNS(null,"fill","#000000"),Yt.setAttributeNS(null,"opacity","0.25"),Yt.setAttributeNS(null,"cx","5.5"),Yt.setAttributeNS(null,"cy","5.5"),Yt.setAttributeNS(null,"r","5.4999962");var lr=r.createNS("http://www.w3.org/2000/svg","circle");lr.setAttributeNS(null,"fill","#FFFFFF"),lr.setAttributeNS(null,"cx","5.5"),lr.setAttributeNS(null,"cy","5.5"),lr.setAttributeNS(null,"r","5.4999962"),jt.appendChild(Yt),jt.appendChild(lr),_e.appendChild(Se),_e.appendChild(Pt),_e.appendChild(Lt),_e.appendChild(Ht),_e.appendChild(jt),he.appendChild(_e),this._element.appendChild(he),this._offset=e.Point.convert(B&&B.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(vr){vr.preventDefault()}),this._element.addEventListener("mousedown",function(vr){vr.preventDefault()}),this._element.addEventListener("focus",function(){var vr=ae._map.getContainer();vr.scrollTop=0,vr.scrollLeft=0}),Oa(this._element,this._anchor,"marker"),this._popup=null}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.addTo=function(B){return this.remove(),this._map=B,B.getCanvasContainer().appendChild(this._element),B.on("move",this._update),B.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},O.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},O.prototype.getLngLat=function(){return this._lngLat},O.prototype.setLngLat=function(B){return this._lngLat=e.LngLat.convert(B),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},O.prototype.getElement=function(){return this._element},O.prototype.setPopup=function(B){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),B){if(!("offset"in B.options)){var q=Math.sqrt(Math.pow(13.5,2)/2);B.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[q,-1*(24.6+q)],"bottom-right":[-q,-1*(24.6+q)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=B,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},O.prototype._onKeyPress=function(B){var q=B.code,ae=B.charCode||B.keyCode;"Space"!==q&&"Enter"!==q&&32!==ae&&13!==ae||this.togglePopup()},O.prototype._onMapClick=function(B){var q=B.originalEvent.target,ae=this._element;this._popup&&(q===ae||ae.contains(q))&&this.togglePopup()},O.prototype.getPopup=function(){return this._popup},O.prototype.togglePopup=function(){var B=this._popup;return B?(B.isOpen()?B.remove():B.addTo(this._map),this):this},O.prototype._update=function(B){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ms(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var q="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?q="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(q="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ae="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ae="rotateX(0deg)":"map"===this._pitchAlignment&&(ae="rotateX("+this._map.getPitch()+"deg)"),B&&"moveend"!==B.type||(this._pos=this._pos.round()),r.setTransform(this._element,gs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ae+" "+q)}},O.prototype.getOffset=function(){return this._offset},O.prototype.setOffset=function(B){return this._offset=e.Point.convert(B),this._update(),this},O.prototype._onMove=function(B){this._pos=B.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},O.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},O.prototype._addDragHandler=function(B){this._element.contains(B.originalEvent.target)&&(B.preventDefault(),this._positionDelta=B.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},O.prototype.setDraggable=function(B){return this._draggable=!!B,this._map&&(B?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},O.prototype.isDraggable=function(){return this._draggable},O.prototype.setRotation=function(B){return this._rotation=B||0,this._update(),this},O.prototype.getRotation=function(){return this._rotation},O.prototype.setRotationAlignment=function(B){return this._rotationAlignment=B||"auto",this._update(),this},O.prototype.getRotationAlignment=function(){return this._rotationAlignment},O.prototype.setPitchAlignment=function(B){return this._pitchAlignment=B&&"auto"!==B?B:this._rotationAlignment,this._update(),this},O.prototype.getPitchAlignment=function(){return this._pitchAlignment},O}(e.Evented),ks={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ye=0,Tt=!1,ne=function(E){function O(B){E.call(this),this.options=e.extend({},ks,B),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.onAdd=function(B){var q;return this._map=B,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),q=this._setupUI,void 0!==vs?q(vs):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(ae){q(vs="denied"!==ae.state)}):q(vs=!!e.window.navigator.geolocation),this._container},O.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),r.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ye=0,Tt=!1},O.prototype._isOutOfMapMaxBounds=function(B){var q=this._map.getMaxBounds(),ae=B.coords;return q&&(ae.longitude<q.getWest()||ae.longitude>q.getEast()||ae.latitude<q.getSouth()||ae.latitude>q.getNorth())},O.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},O.prototype._onSuccess=function(B){if(this._map){if(this._isOutOfMapMaxBounds(B))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",B)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=B,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(B),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(B),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",B)),this._finish()}},O.prototype._updateCamera=function(B){var q=new e.LngLat(B.coords.longitude,B.coords.latitude),ae=B.coords.accuracy,he=this._map.getBearing(),me=e.extend({bearing:he},this.options.fitBoundsOptions);this._map.fitBounds(q.toBounds(ae),me,{geolocateSource:!0})},O.prototype._updateMarker=function(B){if(B){var q=new e.LngLat(B.coords.longitude,B.coords.latitude);this._accuracyCircleMarker.setLngLat(q).addTo(this._map),this._userLocationDotMarker.setLngLat(q).addTo(this._map),this._accuracy=B.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},O.prototype._updateCircleRadius=function(){var B=this._map._container.clientHeight/2,q=this._map.unproject([0,B]),ae=this._map.unproject([1,B]),he=q.distanceTo(ae),me=Math.ceil(2*this._accuracy/he);this._circleElement.style.width=me+"px",this._circleElement.style.height=me+"px"},O.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},O.prototype._onError=function(B){if(this._map){if(this.options.trackUserLocation)if(1===B.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===B.code&&Tt)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",B)),this._finish()}},O.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},O.prototype._setupUI=function(B){var q=this;if(this._container.addEventListener("contextmenu",function(me){return me.preventDefault()}),this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container),r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===B){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ae,this._geolocateButton.setAttribute("aria-label",ae)}else{var he=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=he,this._geolocateButton.setAttribute("aria-label",he)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Es(this._dotElement),this._circleElement=r.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Es({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(me){me.geolocateSource||"ACTIVE_LOCK"!==q._watchState||me.originalEvent&&"resize"===me.originalEvent.type||(q._watchState="BACKGROUND",q._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),q._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),q.fire(new e.Event("trackuserlocationend")))})},O.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ye--,Tt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var B;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ye>1?(B={maximumAge:6e5,timeout:0},Tt=!0):(B=this.options.positionOptions,Tt=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},O.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},O}(e.Evented),ye={maxWidth:100,unit:"metric"},Ze=function(E){this.options=e.extend({},ye,E),e.bindAll(["_onMove","setUnit"],this)};function bt(E,O,B){var q=B&&B.maxWidth||100,ae=E._container.clientHeight/2,he=E.unproject([0,ae]),me=E.unproject([q,ae]),_e=he.distanceTo(me);if(B&&"imperial"===B.unit){var Se=3.2808*_e;Se>5280?yr(O,q,Se/5280,E._getUIString("ScaleControl.Miles")):yr(O,q,Se,E._getUIString("ScaleControl.Feet"))}else B&&"nautical"===B.unit?yr(O,q,_e/1852,E._getUIString("ScaleControl.NauticalMiles")):_e>=1e3?yr(O,q,_e/1e3,E._getUIString("ScaleControl.Kilometers")):yr(O,q,_e,E._getUIString("ScaleControl.Meters"))}function yr(E,O,B,q){var ae,he,me,Ve,Ke,_e=(ae=B,(he=Math.pow(10,(""+Math.floor(ae)).length-1))*(me=(me=ae/he)>=10?10:me>=5?5:me>=3?3:me>=2?2:me>=1?1:(Ve=me,Ke=Math.pow(10,Math.ceil(-Math.log(Ve)/Math.LN10)),Math.round(Ve*Ke)/Ke)));E.style.width=O*(_e/B)+"px",E.innerHTML=_e+"&nbsp;"+q}Ze.prototype.getDefaultPosition=function(){return"bottom-left"},Ze.prototype._onMove=function(){bt(this._map,this._container,this.options)},Ze.prototype.onAdd=function(E){return this._map=E,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ze.prototype.onRemove=function(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ze.prototype.setUnit=function(E){this.options.unit=E,bt(this._map,this._container,this.options)};var Ur=function(E){this._fullscreen=!1,E&&E.container&&(E.container instanceof e.window.HTMLElement?this._container=E.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ur.prototype.onAdd=function(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ur.prototype.onRemove=function(){r.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ur.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Ur.prototype._setupUI=function(){var E=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",E).setAttribute("aria-hidden",!0),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ur.prototype._updateTitle=function(){var E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E},Ur.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ur.prototype._isFullscreen=function(){return this._fullscreen},Ur.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ur.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var _n={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},jn=function(E){function O(B){E.call(this),this.options=e.extend(Object.create(_n),B),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return E&&(O.__proto__=E),(O.prototype=Object.create(E&&E.prototype)).constructor=O,O.prototype.addTo=function(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},O.prototype.isOpen=function(){return!!this._map},O.prototype.remove=function(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},O.prototype.getLngLat=function(){return this._lngLat},O.prototype.setLngLat=function(B){return this._lngLat=e.LngLat.convert(B),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},O.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},O.prototype.getElement=function(){return this._container},O.prototype.setText=function(B){return this.setDOMContent(e.window.document.createTextNode(B))},O.prototype.setHTML=function(B){var q,ae=e.window.document.createDocumentFragment(),he=e.window.document.createElement("body");for(he.innerHTML=B;q=he.firstChild;)ae.appendChild(q);return this.setDOMContent(ae)},O.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},O.prototype.setMaxWidth=function(B){return this.options.maxWidth=B,this._update(),this},O.prototype.setDOMContent=function(B){return this._createContent(),this._content.appendChild(B),this._update(),this},O.prototype.addClassName=function(B){this._container&&this._container.classList.add(B)},O.prototype.removeClassName=function(B){this._container&&this._container.classList.remove(B)},O.prototype.toggleClassName=function(B){if(this._container)return this._container.classList.toggle(B)},O.prototype._createContent=function(){this._content&&r.remove(this._content),this._content=r.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},O.prototype._onMouseUp=function(B){this._update(B.point)},O.prototype._onMouseMove=function(B){this._update(B.point)},O.prototype._onDrag=function(B){this._update(B.point)},O.prototype._update=function(B){var q=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(At){return q._container.classList.add(At)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ms(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||B)){var he=this._pos=this._trackPointer&&B?B:this._map.project(this._lngLat),me=this.options.anchor,_e=function At(Pt){if(Pt){if("number"==typeof Pt){var St=Math.round(Math.sqrt(.5*Math.pow(Pt,2)));return{center:new e.Point(0,0),top:new e.Point(0,Pt),"top-left":new e.Point(St,St),"top-right":new e.Point(-St,St),bottom:new e.Point(0,-Pt),"bottom-left":new e.Point(St,-St),"bottom-right":new e.Point(-St,-St),left:new e.Point(Pt,0),right:new e.Point(-Pt,0)}}if(Pt instanceof e.Point||Array.isArray(Pt)){var Lt=e.Point.convert(Pt);return{center:Lt,top:Lt,"top-left":Lt,"top-right":Lt,bottom:Lt,"bottom-left":Lt,"bottom-right":Lt,left:Lt,right:Lt}}return{center:e.Point.convert(Pt.center||[0,0]),top:e.Point.convert(Pt.top||[0,0]),"top-left":e.Point.convert(Pt["top-left"]||[0,0]),"top-right":e.Point.convert(Pt["top-right"]||[0,0]),bottom:e.Point.convert(Pt.bottom||[0,0]),"bottom-left":e.Point.convert(Pt["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Pt["bottom-right"]||[0,0]),left:e.Point.convert(Pt.left||[0,0]),right:e.Point.convert(Pt.right||[0,0])}}return At(new e.Point(0,0))}(this.options.offset);if(!me){var Se,Ve=this._container.offsetWidth,Ke=this._container.offsetHeight;Se=he.y+_e.bottom.y<Ke?["top"]:he.y>this._map.transform.height-Ke?["bottom"]:[],he.x<Ve/2?Se.push("left"):he.x>this._map.transform.width-Ve/2&&Se.push("right"),me=0===Se.length?"bottom":Se.join("-")}var st=he.add(_e[me]).round();r.setTransform(this._container,gs[me]+" translate("+st.x+"px,"+st.y+"px)"),Oa(this._container,me,"popup")}},O.prototype._onClose=function(){this.remove()},O}(e.Evented),le={version:e.version,supported:i,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Ho,NavigationControl:$i,GeolocateControl:ne,AttributionControl:Pa,ScaleControl:Ze,FullscreenControl:Ur,Popup:jn,Marker:Es,Style:Qn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){$e().acquire(It)},clearPrewarmedResources:function(){var E=Ot;E&&(E.isPreloaded()&&1===E.numActive()?(E.release(It),Ot=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(E){e.config.ACCESS_TOKEN=E},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(E){e.config.API_URL=E},get workerCount(){return ut.workerCount},set workerCount(E){ut.workerCount=E},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(E){e.config.MAX_PARALLEL_IMAGE_REQUESTS=E},clearStorage:function(E){e.clearTileCache(E)},workerUrl:""};return le}),_},"object"==typeof ee&&void 0!==$?$.exports=g():(d=d||self).mapboxgl=g()},{}],240:[function(y,$,ee){"use strict";$.exports=Math.log2||function(d){return Math.log(d)*Math.LOG2E}},{}],241:[function(y,$,ee){"use strict";$.exports=function(g,_){_||(_=g,g=window);var t=0,e=0,i=0,r={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function n(x){var m=!1;return"altKey"in x&&(m=m||x.altKey!==r.alt,r.alt=!!x.altKey),"shiftKey"in x&&(m=m||x.shiftKey!==r.shift,r.shift=!!x.shiftKey),"ctrlKey"in x&&(m=m||x.ctrlKey!==r.control,r.control=!!x.ctrlKey),"metaKey"in x&&(m=m||x.metaKey!==r.meta,r.meta=!!x.metaKey),m}function p(x,m){var w=d.x(m),b=d.y(m);"buttons"in m&&(x=0|m.buttons),(x!==t||w!==e||b!==i||n(m))&&(t=0|x,e=w||0,i=b||0,_&&_(t,e,i,r))}function s(x){p(0,x)}function a(){(t||e||i||r.shift||r.alt||r.meta||r.control)&&(e=i=0,t=0,r.shift=r.alt=r.control=r.meta=!1,_&&_(0,0,0,r))}function c(x){n(x)&&_&&_(t,e,i,r)}function u(x){0===d.buttons(x)?p(0,x):p(t,x)}function h(x){p(t|d.buttons(x),x)}function v(x){p(t&~d.buttons(x),x)}function f(){o||(o=!0,g.addEventListener("mousemove",u),g.addEventListener("mousedown",h),g.addEventListener("mouseup",v),g.addEventListener("mouseleave",s),g.addEventListener("mouseenter",s),g.addEventListener("mouseout",s),g.addEventListener("mouseover",s),g.addEventListener("blur",a),g.addEventListener("keyup",c),g.addEventListener("keydown",c),g.addEventListener("keypress",c),g!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}f();var l={element:g};return Object.defineProperties(l,{enabled:{get:function(){return o},set:function(x){x?f():!o||(o=!1,g.removeEventListener("mousemove",u),g.removeEventListener("mousedown",h),g.removeEventListener("mouseup",v),g.removeEventListener("mouseleave",s),g.removeEventListener("mouseenter",s),g.removeEventListener("mouseout",s),g.removeEventListener("mouseover",s),g.removeEventListener("blur",a),g.removeEventListener("keyup",c),g.removeEventListener("keydown",c),g.removeEventListener("keypress",c),g!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),l};var d=y("mouse-event")},{"mouse-event":243}],242:[function(y,$,ee){var d={left:0,top:0};$.exports=function(g,_,t){_=_||g.currentTarget||g.srcElement,Array.isArray(t)||(t=[0,0]);var o,e=g.clientX||0,i=g.clientY||0,r=(o=_)===window||o===document||o===document.body?d:o.getBoundingClientRect();return t[0]=e-r.left,t[1]=i-r.top,t}},{}],243:[function(y,$,ee){"use strict";function d(g){return g.target||g.srcElement||window}ee.buttons=function(g){if("object"==typeof g){if("buttons"in g)return g.buttons;if("which"in g){if(2===(_=g.which))return 4;if(3===_)return 2;if(_>0)return 1<<_-1}else if("button"in g){var _;if(1===(_=g.button))return 4;if(2===_)return 2;if(_>=0)return 1<<_}}return 0},ee.element=d,ee.x=function(g){if("object"==typeof g){if("offsetX"in g)return g.offsetX;var _=d(g).getBoundingClientRect();return g.clientX-_.left}return 0},ee.y=function(g){if("object"==typeof g){if("offsetY"in g)return g.offsetY;var _=d(g).getBoundingClientRect();return g.clientY-_.top}return 0}},{}],244:[function(y,$,ee){"use strict";var d=y("to-px");$.exports=function(g,_,t){"function"==typeof g&&(t=!!_,_=g,g=window);var e=d("ex",g),i=function(r){t&&r.preventDefault();var o=r.deltaX||0,n=r.deltaY||0,p=r.deltaZ||0,s=1;switch(r.deltaMode){case 1:s=e;break;case 2:s=window.innerHeight}if(n*=s,p*=s,(o*=s)||n||p)return _(o,n,p,r)};return g.addEventListener("wheel",i),i}},{"to-px":314}],245:[function(y,$,ee){(function(d,g){(function(){var _,t,e;e=function(){"use strict";var _,t,e,i=Object.prototype.toString,r=void 0!==g?function(x){return g(x)}:setTimeout;try{Object.defineProperty({},"x",{}),_=function(x,m,w,b){return Object.defineProperty(x,m,{value:w,writable:!0,configurable:!1!==b})}}catch(x){_=function(m,w,b){return m[w]=b,m}}function o(x,m){e.add(x,m),t||(t=r(e.drain))}function n(x){var m,w=typeof x;return null==x||"object"!=w&&"function"!=w||(m=x.then),"function"==typeof m&&m}function p(){for(var x=0;x<this.chain.length;x++)s(this,1===this.state?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function s(x,m,w){var b,k;try{!1===m?w.reject(x.msg):(b=!0===m?x.msg:m.call(void 0,x.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(k=n(b))?k.call(b,w.resolve,w.reject):w.resolve(b)}catch(T){w.reject(T)}}function a(x){var m,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(m=n(x))?o(function(){var b=new h(w);try{m.call(x,function(){a.apply(b,arguments)},function(){c.apply(b,arguments)})}catch(k){c.call(b,k)}}):(w.msg=x,w.state=1,w.chain.length>0&&o(p,w))}catch(b){c.call(new h(w),b)}}}function c(x){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=x,m.state=2,m.chain.length>0&&o(p,m))}function u(x,m,w,b){for(var k=0;k<m.length;k++)!function(T){x.resolve(m[T]).then(function(L){w(T,L)},b)}(k)}function h(x){this.def=x,this.triggered=!1}function v(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(x){if("function"!=typeof x)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var m=new v(this);this.then=function(w,b){var k={success:"function"!=typeof w||w,failure:"function"==typeof b&&b};return k.promise=new this.constructor(function(T,L){if("function"!=typeof T||"function"!=typeof L)throw TypeError("Not a function");k.resolve=T,k.reject=L}),m.chain.push(k),0!==m.state&&o(p,m),k.promise},this.catch=function(w){return this.then(void 0,w)};try{x.call(void 0,function(w){a.call(m,w)},function(w){c.call(m,w)})}catch(w){c.call(m,w)}}e=function(){var x,m,w;function b(k,T){this.fn=k,this.self=T,this.next=void 0}return{add:function(k,T){w=new b(k,T),m?m.next=w:x=w,m=w,w=void 0},drain:function(){var k=x;for(x=m=t=void 0;k;)k.fn.call(k.self),k=k.next}}}();var l=_({},"constructor",f,!1);return f.prototype=l,_(l,"__NPO__",0,!1),_(f,"resolve",function(x){return x&&"object"==typeof x&&1===x.__NPO__?x:new this(function(m,w){if("function"!=typeof m||"function"!=typeof w)throw TypeError("Not a function");m(x)})}),_(f,"reject",function(x){return new this(function(m,w){if("function"!=typeof m||"function"!=typeof w)throw TypeError("Not a function");w(x)})}),_(f,"all",function(x){var m=this;return"[object Array]"!=i.call(x)?m.reject(TypeError("Not an array")):0===x.length?m.resolve([]):new m(function(w,b){if("function"!=typeof w||"function"!=typeof b)throw TypeError("Not a function");var k=x.length,T=Array(k),L=0;u(m,x,function(A,I){T[A]=I,++L===k&&w(T)},b)})}),_(f,"race",function(x){var m=this;return"[object Array]"!=i.call(x)?m.reject(TypeError("Not an array")):new m(function(w,b){if("function"!=typeof w||"function"!=typeof b)throw TypeError("Not a function");u(m,x,function(k,T){w(T)},b)})}),f},(t=void 0!==d?d:this)[_="Promise"]=t[_]||e(),void 0!==$&&$.exports&&($.exports=t[_])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},y("timers").setImmediate)},{timers:311}],246:[function(y,$,ee){var d=Math.PI,g=r(120);function _(o,n,p,s){return["C",o,n,p,s,p,s]}function t(o,n,p,s,a,c){return["C",o/3+2/3*p,n/3+2/3*s,a/3+2/3*p,c/3+2/3*s,a,c]}function e(o,n,p,s,a,c,u,h,v,f){if(f)I=f[0],D=f[1],L=f[2],A=f[3];else{var l=i(o,n,-a);n=l.y;var x=((o=l.x)-(h=(l=i(h,v,-a)).x))/2,m=(n-(v=l.y))/2,w=x*x/(p*p)+m*m/(s*s);w>1&&(p*=w=Math.sqrt(w),s*=w);var b=p*p,k=s*s,T=(c==u?-1:1)*Math.sqrt(Math.abs((b*k-b*m*m-k*x*x)/(b*m*m+k*x*x)));T==1/0&&(T=1);var L=T*p*m/s+(o+h)/2,A=T*-s*x/p+(n+v)/2,I=Math.asin(((n-A)/s).toFixed(9)),D=Math.asin(((v-A)/s).toFixed(9));(I=o<L?d-I:I)<0&&(I=2*d+I),(D=h<L?d-D:D)<0&&(D=2*d+D),u&&I>D&&(I-=2*d),!u&&D>I&&(D-=2*d)}if(Math.abs(D-I)>g){var S=D,C=h,R=v;D=I+g*(u&&D>I?1:-1);var F=e(h=L+p*Math.cos(D),v=A+s*Math.sin(D),p,s,a,0,u,C,R,[D,S,L,A])}var H=Math.tan((D-I)/4),U=4/3*p*H,X=4/3*s*H,Z=[2*o-(o+U*Math.sin(I)),2*n-(n-X*Math.cos(I)),h+U*Math.sin(D),v-X*Math.cos(D),h,v];if(f)return Z;F&&(Z=Z.concat(F));for(var Y=0;Y<Z.length;){var W=i(Z[Y],Z[Y+1],a);Z[Y++]=W.x,Z[Y++]=W.y}return Z}function i(o,n,p){return{x:o*Math.cos(p)-n*Math.sin(p),y:o*Math.sin(p)+n*Math.cos(p)}}function r(o){return o*(d/180)}$.exports=function(o){for(var n,p=[],s=0,a=0,c=0,u=0,h=null,v=null,f=0,l=0,x=0,m=o.length;x<m;x++){var w=o[x],b=w[0];switch(b){case"M":c=w[1],u=w[2];break;case"A":(w=e(f,l,w[1],w[2],r(w[3]),w[4],w[5],w[6],w[7])).unshift("C"),w.length>7&&(p.push(w.splice(0,7)),w.unshift("C"));break;case"S":var k=f,T=l;"C"!=n&&"S"!=n||(k+=k-s,T+=T-a),w=["C",k,T,w[1],w[2],w[3],w[4]];break;case"T":"Q"==n||"T"==n?(h=2*f-h,v=2*l-v):(h=f,v=l),w=t(f,l,h,v,w[1],w[2]);break;case"Q":h=w[1],v=w[2],w=t(f,l,w[1],w[2],w[3],w[4]);break;case"L":w=_(f,l,w[1],w[2]);break;case"H":w=_(f,l,w[1],l);break;case"V":w=_(f,l,f,w[1]);break;case"Z":w=_(f,l,c,u)}n=b,f=w[w.length-2],l=w[w.length-1],w.length>4?(s=w[w.length-4],a=w[w.length-3]):(s=f,a=l),p.push(w)}return p}},{}],247:[function(y,$,ee){"use strict";var d=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;function t(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}$.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var i={},r=0;r<10;r++)i["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(i).map(function(n){return i[n]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(n){return!1}}()?Object.assign:function(e,i){for(var r,o,n=t(e),p=1;p<arguments.length;p++){for(var s in r=Object(arguments[p]))g.call(r,s)&&(n[s]=r[s]);if(d){o=d(r);for(var a=0;a<o.length;a++)_.call(r,o[a])&&(n[o[a]]=r[o[a]])}}return n}},{}],248:[function(y,$,ee){"use strict";function d(t,e){if("string"!=typeof t)return[t];var i=[t];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var r=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],o=e.escape||"___",n=!!e.flat;r.forEach(function(s){var a=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),c=[];function u(h,v,f){var l=i.push(h.slice(s[0].length,-s[1].length))-1;return c.push(l),o+l+o}i.forEach(function(h,v){for(var f,l=0;h!=f;)if(f=h,h=h.replace(a,u),l++>1e4)throw Error("References have circular dependency. Please, check them.");i[v]=h}),c=c.reverse(),i=i.map(function(h){return c.forEach(function(v){h=h.replace(new RegExp("(\\"+o+v+"\\"+o+")","g"),s[0]+"$1"+s[1])}),h})});var p=new RegExp("\\"+o+"([0-9]+)\\"+o);return n?i:function s(a,c,u){for(var h,v=[],f=0;h=p.exec(a);){if(f++>1e4)throw Error("Circular references in parenthesis");v.push(a.slice(0,h.index)),v.push(s(c[h[1]],c)),a=a.slice(h.index+h[0].length)}return v.push(a),v}(i[0],i)}function g(t,e){if(e&&e.flat){var i,r=e&&e.escape||"___",o=t[0];if(!o)return"";for(var n=new RegExp("\\"+r+"([0-9]+)\\"+r),p=0;o!=i;){if(p++>1e4)throw Error("Circular references in "+t);i=o,o=o.replace(n,s)}return o}return t.reduce(function a(c,u){return Array.isArray(u)&&(u=u.reduce(a,"")),c+u},"");function s(a,c){if(null==t[c])throw Error("Reference "+c+"is undefined");return t[c]}}function _(t,e){return Array.isArray(t)?g(t,e):d(t,e)}_.parse=d,_.stringify=g,$.exports=_},{}],249:[function(y,$,ee){"use strict";var d=y("pick-by-alias");$.exports=function(g){var _;return arguments.length>1&&(g=arguments),"string"==typeof g?g=g.split(/\s/).map(parseFloat):"number"==typeof g&&(g=[g]),g.length&&"number"==typeof g[0]?_=1===g.length?{width:g[0],height:g[0],x:0,y:0}:2===g.length?{width:g[0],height:g[1],x:0,y:0}:{x:g[0],y:g[1],width:g[2]-g[0]||0,height:g[3]-g[1]||0}:g&&((_={x:(g=d(g,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:g.top||0}).width=null==g.width?g.right?g.right-_.x:0:g.width,_.height=null==g.height?g.bottom?g.bottom-_.y:0:g.height),_}},{"pick-by-alias":253}],250:[function(y,$,ee){$.exports=function(t){var e=[];return t.replace(g,function(i,r,o){var s,n=r.toLowerCase();for(s=void 0,o=(s=o.match(_))?s.map(Number):[],"m"==n&&o.length>2&&(e.push([r].concat(o.splice(0,2))),n="l",r="m"==r?"l":"L");;){if(o.length==d[n])return o.unshift(r),e.push(o);if(o.length<d[n])throw new Error("malformed path data");e.push([r].concat(o.splice(0,d[n])))}}),e};var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=/([astvzqmhlc])([^astvzqmhlc]*)/gi,_=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(y,$,ee){$.exports=function(d,g){g||(g=[0,""]),d=String(d);var _=parseFloat(d,10);return g[0]=_,g[1]=d.match(/[\d.\-\+]*\s*(.*)/)[1]||"",g}},{}],252:[function(y,$,ee){(function(d){(function(){(function(){var g,_,t,e,i,r;"undefined"!=typeof performance&&null!==performance&&performance.now?$.exports=function(){return performance.now()}:null!=d&&d.hrtime?($.exports=function(){return(g()-i)/1e6},_=d.hrtime,e=(g=function(){var o;return 1e9*(o=_())[0]+o[1]})(),r=1e9*d.uptime(),i=e-r):Date.now?($.exports=function(){return Date.now()-t},t=Date.now()):($.exports=function(){return(new Date).getTime()-t},t=(new Date).getTime())}).call(this)}).call(this)}).call(this,y("_process"))},{_process:277}],253:[function(y,$,ee){"use strict";$.exports=function(_,t,e){var i,r,o={};if("string"==typeof t&&(t=g(t)),Array.isArray(t)){var n={};for(r=0;r<t.length;r++)n[t[r]]=!0;t=n}for(i in t)t[i]=g(t[i]);var p={};for(i in t){var s=t[i];if(Array.isArray(s))for(r=0;r<s.length;r++){var a=s[r];if(e&&(p[a]=!0),a in _){if(o[i]=_[a],e)for(var c=r;c<s.length;c++)p[s[c]]=!0;break}}else i in _&&(t[i]&&(o[i]=_[i]),e&&(p[i]=!0))}if(e)for(i in _)p[i]||(o[i]=_[i]);return o};var d={};function g(_){return d[_]?d[_]:("string"==typeof _&&(_=d[_]=_.split(/\s*,\s*|\s+/)),_)}},{}],254:[function(y,$,ee){var d,g=y("./lib/build-log"),_=y("./lib/epsilon"),t=y("./lib/intersecter"),e=y("./lib/segment-chainer"),i=y("./lib/segment-selector"),r=y("./lib/geojson"),o=!1,n=_();function p(s,a,c){var u=d.segments(s),h=d.segments(a),v=c(d.combine(u,h));return d.polygon(v)}d={buildLog:function(s){return!0===s?o=g():!1===s&&(o=!1),!1!==o&&o.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var a=t(!0,n,o);return s.regions.forEach(a.addRegion),{segments:a.calculate(s.inverted),inverted:s.inverted}},combine:function(s,a){return{combined:t(!1,n,o).calculate(s.segments,s.inverted,a.segments,a.inverted),inverted1:s.inverted,inverted2:a.inverted}},selectUnion:function(s){return{segments:i.union(s.combined,o),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:i.intersect(s.combined,o),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:i.difference(s.combined,o),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:i.differenceRev(s.combined,o),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:i.xor(s.combined,o),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:e(s.segments,n,o),inverted:s.inverted}},polygonFromGeoJSON:function(s){return r.toPolygon(d,s)},polygonToGeoJSON:function(s){return r.fromPolygon(d,n,s)},union:function(s,a){return p(s,a,d.selectUnion)},intersect:function(s,a){return p(s,a,d.selectIntersect)},difference:function(s,a){return p(s,a,d.selectDifference)},differenceRev:function(s,a){return p(s,a,d.selectDifferenceRev)},xor:function(s,a){return p(s,a,d.selectXor)}},"object"==typeof window&&(window.PolyBool=d),$.exports=d},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(y,$,ee){$.exports=function(){var d,g=0,_=!1;function t(e,i){return d.list.push({type:e,data:i?JSON.parse(JSON.stringify(i)):void 0}),d}return d={list:[],segmentId:function(){return g++},checkIntersection:function(e,i){return t("check",{seg1:e,seg2:i})},segmentChop:function(e,i){return t("div_seg",{seg:e,pt:i}),t("chop",{seg:e,pt:i})},statusRemove:function(e){return t("pop_seg",{seg:e})},segmentUpdate:function(e){return t("seg_update",{seg:e})},segmentNew:function(e,i){return t("new_seg",{seg:e,primary:i})},segmentRemove:function(e){return t("rem_seg",{seg:e})},tempStatus:function(e,i,r){return t("temp_status",{seg:e,above:i,below:r})},rewind:function(e){return t("rewind",{seg:e})},status:function(e,i,r){return t("status",{seg:e,above:i,below:r})},vert:function(e){return e===_?d:(_=e,t("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),t("log",{txt:e})},reset:function(){return t("reset")},selected:function(e){return t("selected",{segs:e})},chainStart:function(e){return t("chain_start",{seg:e})},chainRemoveHead:function(e,i){return t("chain_rem_head",{index:e,pt:i})},chainRemoveTail:function(e,i){return t("chain_rem_tail",{index:e,pt:i})},chainNew:function(e,i){return t("chain_new",{pt1:e,pt2:i})},chainMatch:function(e){return t("chain_match",{index:e})},chainClose:function(e){return t("chain_close",{index:e})},chainAddHead:function(e,i){return t("chain_add_head",{index:e,pt:i})},chainAddTail:function(e,i){return t("chain_add_tail",{index:e,pt:i})},chainConnect:function(e,i){return t("chain_con",{index1:e,index2:i})},chainReverse:function(e){return t("chain_rev",{index:e})},chainJoin:function(e,i){return t("chain_join",{index1:e,index2:i})},done:function(){return t("done")}}}},{}],256:[function(y,$,ee){$.exports=function(d){"number"!=typeof d&&(d=1e-10);var g={epsilon:function(_){return"number"==typeof _&&(d=_),d},pointAboveOrOnLine:function(_,t,e){var i=t[0],r=t[1];return(e[0]-i)*(_[1]-r)-(e[1]-r)*(_[0]-i)>=-d},pointBetween:function(_,t,e){var r=e[0]-t[0],n=e[1]-t[1],p=(_[0]-t[0])*r+(_[1]-t[1])*n;return!(p<d||p-(r*r+n*n)>-d)},pointsSameX:function(_,t){return Math.abs(_[0]-t[0])<d},pointsSameY:function(_,t){return Math.abs(_[1]-t[1])<d},pointsSame:function(_,t){return g.pointsSameX(_,t)&&g.pointsSameY(_,t)},pointsCompare:function(_,t){return g.pointsSameX(_,t)?g.pointsSameY(_,t)?0:_[1]<t[1]?-1:1:_[0]<t[0]?-1:1},pointsCollinear:function(_,t,e){return Math.abs((_[0]-t[0])*(t[1]-e[1])-(t[0]-e[0])*(_[1]-t[1]))<d},linesIntersect:function(_,t,e,i){var r=t[0]-_[0],o=t[1]-_[1],n=i[0]-e[0],p=i[1]-e[1],s=r*p-o*n;if(Math.abs(s)<d)return!1;var a=_[0]-e[0],c=_[1]-e[1],u=(n*c-p*a)/s,h=(r*c-o*a)/s,v={alongA:0,alongB:0,pt:[_[0]+u*r,_[1]+u*o]};return v.alongA=u<=-d?-2:u<d?-1:u-1<=-d?0:u-1<d?1:2,v.alongB=h<=-d?-2:h<d?-1:h-1<=-d?0:h-1<d?1:2,v},pointInsideRegion:function(_,t){for(var e=_[0],i=_[1],r=t[t.length-1][0],o=t[t.length-1][1],n=!1,p=0;p<t.length;p++){var s=t[p][0],a=t[p][1];a-i>d!=o-i>d&&(r-s)*(i-a)/(o-a)+s-e>d&&(n=!n),r=s,o=a}return n}};return g}},{}],257:[function(y,$,ee){$.exports={toPolygon:function(g,_){function t(r){if(r.length<=0)return g.segments({inverted:!1,regions:[]});function o(s){var a=s.slice(0,s.length-1);return g.segments({inverted:!1,regions:[a]})}for(var n=o(r[0]),p=1;p<r.length;p++)n=g.selectDifference(g.combine(n,o(r[p])));return n}if("Polygon"===_.type)return g.polygon(t(_.coordinates));if("MultiPolygon"===_.type){for(var e=g.segments({inverted:!1,regions:[]}),i=0;i<_.coordinates.length;i++)e=g.selectUnion(g.combine(e,t(_.coordinates[i])));return g.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(g,_,t){function e(h,v){return _.pointInsideRegion([.5*(h[0][0]+h[1][0]),.5*(h[0][1]+h[1][1])],v)}function i(h){return{region:h,children:[]}}t=g.polygon(g.segments(t));var r=i(null);function o(h,v){for(var f=0;f<h.children.length;f++)if(e(v,(x=h.children[f]).region))return void o(x,v);var l=i(v);for(f=0;f<h.children.length;f++){var x;e((x=h.children[f]).region,v)&&(l.children.push(x),h.children.splice(f,1),f--)}h.children.push(l)}for(var n=0;n<t.regions.length;n++){var p=t.regions[n];p.length<3||o(r,p)}function s(h,v){for(var f=0,l=h[h.length-1][0],x=h[h.length-1][1],m=[],w=0;w<h.length;w++){var b=h[w][0],k=h[w][1];m.push([b,k]),f+=k*l-b*x,l=b,x=k}return f<0!==v&&m.reverse(),m.push([m[0][0],m[0][1]]),m}var a=[];function c(h){var v=[s(h.region,!1)];a.push(v);for(var f=0;f<h.children.length;f++)v.push(u(h.children[f]))}function u(h){for(var v=0;v<h.children.length;v++)c(h.children[v]);return s(h.region,!0)}for(n=0;n<r.children.length;n++)c(r.children[n]);return a.length<=0?{type:"Polygon",coordinates:[]}:1==a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}}},{}],258:[function(y,$,ee){var d=y("./linked-list");$.exports=function(g,_,t){function e(s,a,c){return{id:t?t.segmentId():-1,start:s,end:a,myFill:{above:c.myFill.above,below:c.myFill.below},otherFill:null}}var i=d.create();function r(s,a){i.insertBefore(s,function(c){return u=s.isStart,v=a,f=c.isStart,x=c.other.pt,(0!==(m=_.pointsCompare(s.pt,l=c.pt))?m:_.pointsSame(v,x)?0:u!==f?u?1:-1:_.pointAboveOrOnLine(v,f?l:x,f?x:l)?1:-1)<0;var u,v,f,l,x,m})}function o(s,a){var u,v,c=(r(v=d.node({isStart:!0,pt:(u=s).start,seg:u,primary:a,other:null,status:null}),u.end),v);return function(u,h,v){var f=d.node({isStart:!1,pt:h.end,seg:h,primary:v,other:u,status:null});u.other=f,r(f,u.pt)}(c,s,a),c}function n(s,a){var u,h,c=e(a,s.seg.end,s.seg);return u=s,h=a,t&&t.segmentChop(u.seg,h),u.other.remove(),u.seg.end=h,u.other.pt=h,r(u.other,u.pt),o(c,s.primary)}function p(s,a){var c=d.create();function u(I){return c.findTransition(function(D){var S,C,R,F,H,U;return F=(S=I).seg.end,(_.pointsCollinear(R=S.seg.start,H=(C=D.ev).seg.start,U=C.seg.end)?_.pointsCollinear(F,H,U)||_.pointAboveOrOnLine(F,H,U)?1:-1:_.pointAboveOrOnLine(R,H,U)?1:-1)>0})}function h(I,D){var S=I.seg,C=D.seg,R=S.start,F=S.end,H=C.start,U=C.end;t&&t.checkIntersection(S,C);var X=_.linesIntersect(R,F,H,U);if(!1===X){if(!_.pointsCollinear(R,F,H)||_.pointsSame(R,U)||_.pointsSame(F,H))return!1;var Z=_.pointsSame(R,H),Y=_.pointsSame(F,U);if(Z&&Y)return D;var W=!Z&&_.pointBetween(R,H,U),te=!Y&&_.pointBetween(F,H,U);if(Z)return te?n(D,F):n(I,U),D;W&&(Y||(te?n(D,F):n(I,U)),n(D,R))}else 0===X.alongA&&(-1===X.alongB?n(I,H):0===X.alongB?n(I,X.pt):1===X.alongB&&n(I,U)),0===X.alongB&&(-1===X.alongA?n(D,R):0===X.alongA?n(D,X.pt):1===X.alongA&&n(D,F));return!1}for(var v=[];!i.isEmpty();){var f=i.getHead();if(t&&t.vert(f.pt[0]),f.isStart){let I=function(){if(x){var D=h(f,x);if(D)return D}return!!m&&h(f,m)};t&&t.segmentNew(f.seg,f.primary);var l=u(f),x=l.before?l.before.ev:null,m=l.after?l.after.ev:null;t&&t.tempStatus(f.seg,!!x&&x.seg,!!m&&m.seg);var w,k,b=I();if(b&&(g?(k=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=f.seg.myFill,t&&t.segmentUpdate(b.seg),f.other.remove(),f.remove()),i.getHead()!==f){t&&t.rewind(f.seg);continue}g?(k=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below,f.seg.myFill.below=m?m.seg.myFill.above:s,f.seg.myFill.above=k?!f.seg.myFill.below:f.seg.myFill.below):null===f.seg.otherFill&&(f.seg.otherFill={above:w=m?f.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:f.primary?a:s,below:w}),t&&t.status(f.seg,!!x&&x.seg,!!m&&m.seg),f.other.status=l.insert(d.node({ev:f}))}else{var T=f.status;if(null===T)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(c.exists(T.prev)&&c.exists(T.next)&&h(T.prev.ev,T.next.ev),t&&t.statusRemove(T.ev.seg),T.remove(),!f.primary){var L=f.seg.myFill;f.seg.myFill=f.seg.otherFill,f.seg.otherFill=L}v.push(f.seg)}i.getHead().remove()}return t&&t.done(),v}return g?{addRegion:function(s){for(var a,c,u,h=s[s.length-1],v=0;v<s.length;v++){var f=_.pointsCompare(a=h,h=s[v]);0!==f&&o((c=f<0?a:h,u=f<0?h:a,{id:t?t.segmentId():-1,start:c,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(s){return p(s,!1)}}:{calculate:function(s,a,c,u){return s.forEach(function(h){o(e(h.start,h.end,h),!0)}),c.forEach(function(h){o(e(h.start,h.end,h),!1)}),p(a,u)}}}},{"./linked-list":259}],259:[function(y,$,ee){$.exports={create:function(){var d={root:{root:!0,next:null},exists:function(g){return null!==g&&g!==d.root},isEmpty:function(){return null===d.root.next},getHead:function(){return d.root.next},insertBefore:function(g,_){for(var t=d.root,e=d.root.next;null!==e;){if(_(e))return g.prev=e.prev,g.next=e,e.prev.next=g,void(e.prev=g);t=e,e=e.next}t.next=g,g.prev=t,g.next=null},findTransition:function(g){for(var _=d.root,t=d.root.next;null!==t&&!g(t);)_=t,t=t.next;return{before:_===d.root?null:_,after:t,insert:function(e){return e.prev=_,e.next=t,_.next=e,null!==t&&(t.prev=e),e}}}};return d},node:function(d){return d.prev=null,d.next=null,d.remove=function(){d.prev.next=d.next,d.next&&(d.next.prev=d.prev),d.prev=null,d.next=null},d}}},{}],260:[function(y,$,ee){$.exports=function(d,g,_){var t=[],e=[];return d.forEach(function(i){var r=i.start,o=i.end;if(g.pointsSame(r,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{_&&_.chainStart(i);for(var n={index:0,matches_head:!1,matches_pt1:!1},p={index:0,matches_head:!1,matches_pt1:!1},s=n,a=0;a<t.length;a++){var c=(l=t[a])[0],u=l[l.length-1];if(g.pointsSame(c,r)){if(A(a,!0,!0))break}else if(g.pointsSame(c,o)){if(A(a,!0,!1))break}else if(g.pointsSame(u,r)){if(A(a,!1,!0))break}else if(g.pointsSame(u,o)&&A(a,!1,!1))break}if(s===n)return t.push([r,o]),void(_&&_.chainNew(r,o));if(s===p){_&&_.chainMatch(n.index);var h=n.index,v=n.matches_pt1?o:r,f=n.matches_head,l=t[h],x=f?l[0]:l[l.length-1],m=f?l[1]:l[l.length-2],w=f?l[l.length-1]:l[0],b=f?l[l.length-2]:l[1];return g.pointsCollinear(m,x,v)&&(f?(_&&_.chainRemoveHead(n.index,v),l.shift()):(_&&_.chainRemoveTail(n.index,v),l.pop()),x=m),g.pointsSame(w,v)?(t.splice(h,1),g.pointsCollinear(b,w,x)&&(f?(_&&_.chainRemoveTail(n.index,x),l.pop()):(_&&_.chainRemoveHead(n.index,x),l.shift())),_&&_.chainClose(n.index),void e.push(l)):void(f?(_&&_.chainAddHead(n.index,v),l.unshift(v)):(_&&_.chainAddTail(n.index,v),l.push(v)))}var k=n.index,T=p.index;_&&_.chainConnect(k,T);var L=t[k].length<t[T].length;n.matches_head?p.matches_head?L?(I(k),D(k,T)):(I(T),D(T,k)):D(T,k):p.matches_head?D(k,T):L?(I(k),D(T,k)):(I(T),D(k,T))}function A(S,C,R){return s.index=S,s.matches_head=C,s.matches_pt1=R,s===n?(s=p,!1):(s=null,!0)}function I(S){_&&_.chainReverse(S),t[S].reverse()}function D(S,C){var R=t[S],F=t[C],H=R[R.length-1],U=R[R.length-2],X=F[0],Z=F[1];g.pointsCollinear(U,H,X)&&(_&&_.chainRemoveTail(S,H),R.pop(),H=U),g.pointsCollinear(H,X,Z)&&(_&&_.chainRemoveHead(C,X),F.shift()),_&&_.chainJoin(S,C),t[S]=R.concat(F),t.splice(C,1)}}),e}},{}],261:[function(y,$,ee){function d(_,t,e){var i=[];return _.forEach(function(r){var o=(r.myFill.above?8:0)+(r.myFill.below?4:0)+(r.otherFill&&r.otherFill.above?2:0)+(r.otherFill&&r.otherFill.below?1:0);0!==t[o]&&i.push({id:e?e.segmentId():-1,start:r.start,end:r.end,myFill:{above:1===t[o],below:2===t[o]},otherFill:null})}),e&&e.selected(i),i}$.exports={union:function(_,t){return d(_,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(_,t){return d(_,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(_,t){return d(_,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(_,t){return d(_,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(_,t){return d(_,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}},{}],262:[function(y,$,ee){"use strict";var d=y("stream").Transform,g=y("stream-parser");function _(){d.call(this,{readableObjectMode:!0})}function t(e,i,r){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,i&&(this.code=i),r&&(this.statusCode=r)}(_.prototype=Object.create(d.prototype)).constructor=_,g(_.prototype),ee.ParserStream=_,ee.sliceEq=function(e,i,r){for(var o=i,n=0;n<r.length;)if(e[o++]!==r[n++])return!1;return!0},ee.str2arr=function(e,i){var r=[],o=0;if(i&&"hex"===i)for(;o<e.length;)r.push(parseInt(e.slice(o,o+2),16)),o+=2;else for(;o<e.length;o++)r.push(255&e.charCodeAt(o));return r},ee.readUInt16LE=function(e,i){return e[i]|e[i+1]<<8},ee.readUInt16BE=function(e,i){return e[i+1]|e[i]<<8},ee.readUInt32LE=function(e,i){return e[i]|e[i+1]<<8|e[i+2]<<16|16777216*e[i+3]},ee.readUInt32BE=function(e,i){return e[i+3]|e[i+2]<<8|e[i+1]<<16|16777216*e[i]},(t.prototype=Object.create(Error.prototype)).constructor=t,ee.ProbeError=t},{stream:285,"stream-parser":301}],263:[function(y,$,ee){"use strict";function d(t,e){var i=new Error(t);return i.code=e,i}function g(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}function _(t,e,i){this.input=t.subarray(e,i),this.start=e;var r=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==r&&"MM\0*"!==r)throw d("invalid TIFF signature","EBADDATA");this.big_endian="M"===r[0]}_.prototype.each=function(t){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var i=this.ifds_to_read.shift();i.offset&&this.scan_ifd(i.id,i.offset,t)}},_.prototype.read_uint16=function(t){var e=this.input;if(t+2>e.length)throw d("unexpected EOF","EBADDATA");return this.big_endian?256*e[t]+e[t+1]:e[t]+256*e[t+1]},_.prototype.read_uint32=function(t){var e=this.input;if(t+4>e.length)throw d("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[t]+65536*e[t+1]+256*e[t+2]+e[t+3]:e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]},_.prototype.is_subifd_link=function(t,e){return 0===t&&34665===e||0===t&&34853===e||34665===t&&40965===e},_.prototype.exif_format_length=function(t){switch(t){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},_.prototype.exif_format_read=function(t,e){var i;switch(t){case 1:case 2:return this.input[e];case 6:return(i=this.input[e])|33554430*(128&i);case 3:return this.read_uint16(e);case 8:return(i=this.read_uint16(e))|131070*(32768&i);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);case 5:case 10:case 11:case 12:case 7:default:return null}},_.prototype.scan_ifd=function(t,e,i){var r=this.read_uint16(e);e+=2;for(var o=0;o<r;o++){var n=this.read_uint16(e),p=this.read_uint16(e+2),s=this.read_uint32(e+4),a=this.exif_format_length(p),c=s*a,u=c<=4?e+8:this.read_uint32(e+8),h=!1;if(u+c>this.input.length)throw d("unexpected EOF","EBADDATA");for(var v=[],f=u,l=0;l<s;l++,f+=a){var x=this.exif_format_read(p,f);if(null===x){v=null;break}v.push(x)}if(Array.isArray(v)&&2===p&&(v=g(String.fromCharCode.apply(null,v)))&&"\0"===v[v.length-1]&&(v=v.slice(0,-1)),this.is_subifd_link(t,n)&&Array.isArray(v)&&Number.isInteger(v[0])&&v[0]>0&&(this.ifds_to_read.push({id:n,offset:v[0]}),h=!0),!1===i({is_big_endian:this.big_endian,ifd:t,tag:n,format:p,count:s,entry_offset:e+this.start,data_length:c,data_offset:u+this.start,value:v,is_subifd_link:h}))return void(this.aborted=!0);e+=12}0===t&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},$.exports.ExifParser=_,$.exports.get_orientation=function(t){var e=0;try{return new _(t,0,t.length).each(function(i){if(0===i.ifd&&274===i.tag&&Array.isArray(i.value))return e=i.value[0],!1}),e}catch(i){return-1}}},{}],264:[function(y,$,ee){"use strict";var d=y("./common").readUInt16BE,g=y("./common").readUInt32BE;function _(n,p){if(n.length<4+p)return null;var s=g(n,p);return n.length<s+p||s<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(p+4,p+8)),data:n.slice(p+8,p+s),end:p+s}}function t(n,p){for(var s=0;;){var a=_(n,s);if(!a)break;switch(a.boxtype){case"ispe":p.sizes.push({width:g(a.data,4),height:g(a.data,8)});break;case"irot":p.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":p.transforms.push({type:"imir",value:1&a.data[0]})}s=a.end}}function e(n,p,s){for(var a=0,c=0;c<s;c++)a=256*a+(n[p+c]||0);return a}function i(n,p){for(var s=n[4]>>4&15,a=15&n[4],c=n[5]>>4&15,u=d(n,6),h=8,v=0;v<u;v++){var f=d(n,h),l=d(n,h+=2),x=e(n,h+=2,c),m=d(n,h+=c);if(h+=2,0===l&&1===m){var w=e(n,h,s),b=e(n,h+s,a);p.item_loc[f]={length:b,offset:w+x}}h+=m*(s+a)}}function r(n,p){for(var s=d(n,4),a=6,c=0;c<s;c++){var u=_(n,a);if(!u)break;if("infe"===u.boxtype){for(var h=d(u.data,4),v="",f=8;f<u.data.length&&u.data[f];f++)v+=String.fromCharCode(u.data[f]);p.item_inf[v]=h}a=u.end}}function o(n,p){for(var s=0;;){var a=_(n,s);if(!a)break;"ipco"===a.boxtype&&t(a.data,p),s=a.end}}$.exports.unbox=_,$.exports.readSizeFromMeta=function(n){var p={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(f,l){for(var x=4;;){var m=_(f,x);if(!m)break;"iprp"===m.boxtype&&o(m.data,l),"iloc"===m.boxtype&&i(m.data,l),"iinf"===m.boxtype&&r(m.data,l),x=m.end}}(n,p),p.sizes.length){var s,a,c,u=(a=(s=p.sizes).reduce(function(f,l){return f.width>l.width||f.width===l.width&&f.height>l.height?f:l}),c=s.reduce(function(f,l){return f.height>l.height||f.height===l.height&&f.width>l.width?f:l}),a.width>c.height||a.width===c.height&&a.height>c.width?a:c),h=1;p.transforms.forEach(function(f){var l={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},x={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===f.type&&(h=0===f.value?x[h]:l[h=l[h=x[h]]]),"irot"===f.type)for(var m=0;m<f.value;m++)h=l[h]});var v=null;return p.item_inf.Exif&&(v=p.item_loc[p.item_inf.Exif]),{width:u.width,height:u.height,orientation:p.transforms.length?h:null,variants:p.sizes,exif_location:v}}},$.exports.getMimeType=function(n){var p=String.fromCharCode.apply(null,n.slice(0,4)),s={};s[p]=!0;for(var a=8;a<n.length;a+=4)s[String.fromCharCode.apply(null,n.slice(a,a+4))]=!0;if(s.mif1||s.msf1||s.miaf)return"avif"===p||"avis"===p||"avio"===p?{type:"avif",mime:"image/avif"}:"heic"===p||"heix"===p?{type:"heic",mime:"image/heic"}:"hevc"===p||"hevx"===p?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(y,$,ee){"use strict";var d=y("../common").str2arr,g=y("../common").sliceEq,_=y("../common").readUInt32BE,t=y("../miaf_utils"),e=y("../exif_utils"),i=d("ftyp");$.exports=function(r){if(g(r,4,i)){var o=t.unbox(r,0);if(o){var n=t.getMimeType(o.data);if(n){for(var p,s=o.end;;){var a=t.unbox(r,s);if(!a)break;if(s=a.end,"mdat"===a.boxtype)return;if("meta"===a.boxtype){p=a.data;break}}if(p){var c=t.readSizeFromMeta(p);if(c){var u={width:c.width,height:c.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1&&(u.variants=c.variants),c.orientation&&(u.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=r.length){var h=_(r,c.exif_location.offset),v=r.slice(c.exif_location.offset+h+4,c.exif_location.offset+c.exif_location.length),f=e.get_orientation(v);f>0&&(u.orientation=f)}return u}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(y,$,ee){"use strict";var d=y("../common").str2arr,g=y("../common").sliceEq,_=y("../common").readUInt16LE,t=d("BM");$.exports=function(e){if(!(e.length<26)&&g(e,0,t))return{width:_(e,18),height:_(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(y,$,ee){"use strict";var d=y("../common").str2arr,g=y("../common").sliceEq,_=y("../common").readUInt16LE,t=d("GIF87a"),e=d("GIF89a");$.exports=function(i){if(!(i.length<10)&&(g(i,0,t)||g(i,0,e)))return{width:_(i,6),height:_(i,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(y,$,ee){"use strict";var d=y("../common").readUInt16LE;$.exports=function(g){var _=d(g,0),t=d(g,2),e=d(g,4);if(0===_&&1===t&&e){for(var i=[],r={width:0,height:0},o=0;o<e;o++){var n=g[6+16*o]||256,p=g[6+16*o+1]||256,s={width:n,height:p};i.push(s),(n>r.width||p>r.height)&&(r=s)}return{width:r.width,height:r.height,variants:i,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(y,$,ee){"use strict";var d=y("../common").readUInt16BE,g=y("../common").str2arr,_=y("../common").sliceEq,t=y("../exif_utils"),e=g("Exif\0\0");$.exports=function(i){if(!(i.length<2)&&255===i[0]&&216===i[1]&&255===i[2])for(var r=2;;){for(;;){if(i.length-r<2)return;if(255===i[r++])break}for(var o,n,p=i[r++];255===p;)p=i[r++];if(208<=p&&p<=217||1===p)o=0;else{if(!(192<=p&&p<=254)||i.length-r<2)return;o=d(i,r)-2,r+=2}if(217===p||218===p)return;if(225===p&&o>=10&&_(i,r,e)&&(n=t.get_orientation(i.slice(r+6,r+o))),o>=5&&192<=p&&p<=207&&196!==p&&200!==p&&204!==p){if(i.length-r<o)return;var s={width:d(i,r+3),height:d(i,r+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(s.orientation=n),s}r+=o}}},{"../common":262,"../exif_utils":263}],270:[function(y,$,ee){"use strict";var d=y("../common").str2arr,g=y("../common").sliceEq,_=y("../common").readUInt32BE,t=d("\x89PNG\r\n\x1a\n"),e=d("IHDR");$.exports=function(i){if(!(i.length<24)&&g(i,0,t)&&g(i,12,e))return{width:_(i,16),height:_(i,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(y,$,ee){"use strict";var d=y("../common").str2arr,g=y("../common").sliceEq,_=y("../common").readUInt32BE,t=d("8BPS\0\x01");$.exports=function(e){if(!(e.length<22)&&g(e,0,t))return{width:_(e,18),height:_(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(y,$,ee){"use strict";function d(n){return"number"==typeof n&&isFinite(n)&&n>0}var g=/<[-_.:a-zA-Z0-9][^>]*>/,_=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,t=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,i=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function o(n){return r.test(n)?n.match(r)[0]:"px"}$.exports=function(n){if(function(w){var b,k=0,T=w.length;for(239===w[0]&&187===w[1]&&191===w[2]&&(k=3);k<T&&(32===(b=w[k])||9===b||13===b||10===b);)k++;return k!==T&&60===w[k]}(n)){for(var p="",s=0;s<n.length;s++)p+=String.fromCharCode(n[s]);var a=(p.match(g)||[""])[0];if(_.test(a)){var c=(b=(w=a).match(t),k=w.match(e),T=w.match(i),{width:b&&(b[1]||b[2]),height:k&&(k[1]||k[2]),viewbox:T&&(T[1]||T[2])}),u=parseFloat(c.width),h=parseFloat(c.height);if(c.width&&c.height)return d(u)&&d(h)?{width:u,height:h,type:"svg",mime:"image/svg+xml",wUnits:o(c.width),hUnits:o(c.height)}:void 0;var v=(c.viewbox||"").split(" "),f={width:v[2],height:v[3]},l=parseFloat(f.width),x=parseFloat(f.height);if(d(l)&&d(x)&&o(f.width)===o(f.height)){var m=l/x;return c.width?d(u)?{width:u,height:u/m,type:"svg",mime:"image/svg+xml",wUnits:o(c.width),hUnits:o(c.width)}:void 0:c.height?d(h)?{width:h*m,height:h,type:"svg",mime:"image/svg+xml",wUnits:o(c.height),hUnits:o(c.height)}:void 0:{width:l,height:x,type:"svg",mime:"image/svg+xml",wUnits:o(f.width),hUnits:o(f.height)}}}}var w,b,k,T}},{}],273:[function(y,$,ee){"use strict";var d=y("../common").str2arr,g=y("../common").sliceEq,_=y("../common").readUInt16LE,t=y("../common").readUInt16BE,e=y("../common").readUInt32LE,i=y("../common").readUInt32BE,r=d("II*\0"),o=d("MM\0*");function n(a,c,u){return u?t(a,c):_(a,c)}function p(a,c,u){return u?i(a,c):e(a,c)}function s(a,c,u){var h=n(a,c+2,u);return 1!==p(a,c+4,u)||3!==h&&4!==h?null:3===h?n(a,c+8,u):p(a,c+8,u)}$.exports=function(a){if(!(a.length<8)&&(g(a,0,r)||g(a,0,o))){var c=77===a[0],u=p(a,4,c)-8;if(!(u<0)){var h=u+8;if(!(a.length-h<2)){var v=12*n(a,h+0,c);if(!(v<=0||(h+=2,a.length-h<v))){var f,l,x,m;for(f=0;f<v;f+=12)256===(m=n(a,h+f,c))?l=s(a,h+f,c):257===m&&(x=s(a,h+f,c));return l&&x?{width:l,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(y,$,ee){"use strict";var d=y("../common").str2arr,g=y("../common").sliceEq,_=y("../common").readUInt16LE,t=y("../common").readUInt32LE,e=y("../exif_utils"),i=d("RIFF"),r=d("WEBP");function o(s,a){if(157===s[a+3]&&1===s[a+4]&&42===s[a+5])return{width:16383&_(s,a+6),height:16383&_(s,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(s,a){if(47===s[a]){var c=t(s,a+1);return{width:1+(16383&c),height:1+(c>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function p(s,a){return{width:1+(s[a+6]<<16|s[a+5]<<8|s[a+4]),height:1+(s[a+9]<<a|s[a+8]<<8|s[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(s){if(!(s.length<16)&&(g(s,0,i)||g(s,8,r))){var a=12,c=null,u=0,h=t(s,4)+8;if(!(h>s.length)){for(;a+8<h;)if(0!==s[a]){var v=String.fromCharCode.apply(null,s.slice(a,a+4)),f=t(s,a+4);"VP8 "===v&&f>=10?c=c||o(s,a+8):"VP8L"===v&&f>=9?c=c||n(s,a+8):"VP8X"===v&&f>=10?c=c||p(s,a+8):"EXIF"===v&&(u=e.get_orientation(s.slice(a+8,a+8+f)),a=1/0),a+=8+f}else a++;if(c)return u>0&&(c.orientation=u),c}}}},{"../common":262,"../exif_utils":263}],275:[function(y,$,ee){"use strict";$.exports={avif:y("./parse_sync/avif"),bmp:y("./parse_sync/bmp"),gif:y("./parse_sync/gif"),ico:y("./parse_sync/ico"),jpeg:y("./parse_sync/jpeg"),png:y("./parse_sync/png"),psd:y("./parse_sync/psd"),svg:y("./parse_sync/svg"),tiff:y("./parse_sync/tiff"),webp:y("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(y,$,ee){"use strict";var d=y("./lib/parsers_sync");$.exports=function(g){return function(_){for(var t=Object.keys(d),e=0;e<t.length;e++){var i=d[t[e]](_);if(i)return i}return null}(g)},$.exports.parsers=d},{"./lib/parsers_sync":275}],277:[function(y,$,ee){var d,g,_=$.exports={};function t(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(h){if(d===setTimeout)return setTimeout(h,0);if((d===t||!d)&&setTimeout)return d=setTimeout,setTimeout(h,0);try{return d(h,0)}catch(v){try{return d.call(null,h,0)}catch(f){return d.call(this,h,0)}}}!function(){try{d="function"==typeof setTimeout?setTimeout:t}catch(h){d=t}try{g="function"==typeof clearTimeout?clearTimeout:e}catch(h){g=e}}();var r,o=[],n=!1,p=-1;function s(){n&&r&&(n=!1,r.length?o=r.concat(o):p=-1,o.length&&a())}function a(){if(!n){var h=i(s);n=!0;for(var v=o.length;v;){for(r=o,o=[];++p<v;)r&&r[p].run();p=-1,v=o.length}r=null,n=!1,function(f){if(g===clearTimeout)return clearTimeout(f);if((g===e||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(f);try{g(f)}catch(l){try{return g.call(null,f)}catch(x){return g.call(this,f)}}}(h)}}function c(h,v){this.fun=h,this.array=v}function u(){}_.nextTick=function(h){var v=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)v[f-1]=arguments[f];o.push(new c(h,v)),1!==o.length||n||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=u,_.addListener=u,_.once=u,_.off=u,_.removeListener=u,_.removeAllListeners=u,_.emit=u,_.prependListener=u,_.prependOnceListener=u,_.listeners=function(h){return[]},_.binding=function(h){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(h){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],278:[function(y,$,ee){(function(d){(function(){for(var g=y("performance-now"),_="undefined"==typeof window?d:window,t=["moz","webkit"],e="AnimationFrame",i=_["request"+e],r=_["cancel"+e]||_["cancelRequest"+e],o=0;!i&&o<t.length;o++)i=_[t[o]+"Request"+e],r=_[t[o]+"Cancel"+e]||_[t[o]+"CancelRequest"+e];if(!i||!r){var n=0,p=0,s=[];i=function(a){if(0===s.length){var c=g(),u=Math.max(0,1e3/60-(c-n));n=u+c,setTimeout(function(){var h=s.slice(0);s.length=0;for(var v=0;v<h.length;v++)if(!h[v].cancelled)try{h[v].callback(n)}catch(f){setTimeout(function(){throw f},0)}},Math.round(u))}return s.push({handle:++p,callback:a,cancelled:!1}),p},r=function(a){for(var c=0;c<s.length;c++)s[c].handle===a&&(s[c].cancelled=!0)}}$.exports=function(a){return i.call(_,a)},$.exports.cancel=function(){r.apply(_,arguments)},$.exports.polyfill=function(a){a||(a=_),a.requestAnimationFrame=i,a.cancelAnimationFrame=r}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(y,$,ee){"use strict";var d=y("array-bounds"),g=y("color-normalize"),_=y("update-diff"),t=y("pick-by-alias"),e=y("object-assign"),i=y("flatten-vertex-data"),r=y("to-float32"),o=r.float32,n=r.fract32;$.exports=function(s,a){if("function"==typeof s?(a||(a={}),a.regl=s):a=s,a.length&&(a.positions=a),!(s=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var c,u,h,v,f,l,x=s._gl,m={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return v=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=s.buffer({usage:"static",type:"float",data:p}),L(a),c=s({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(I,D){return[D.viewport.x,D.viewport.y,I.viewportWidth,I.viewportHeight]}},attributes:{color:{buffer:v,offset:function(I,D){return 4*D.offset},divisor:1},position:{buffer:u,offset:function(I,D){return 8*D.offset},divisor:1},positionFract:{buffer:h,offset:function(I,D){return 8*D.offset},divisor:1},error:{buffer:f,offset:function(I,D){return 16*D.offset},divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:p.length}),e(b,{update:L,draw:k,destroy:A,regl:s,gl:x,canvas:x.canvas,groups:w}),b;function b(I){I?L(I):null===I&&A(),k()}function k(I){if("number"==typeof I)return T(I);I&&!Array.isArray(I)&&(I=[I]),s._refresh(),w.forEach(function(D,S){D&&(I&&(D.draw=!!I[S]),D.draw?T(S):D.draw=!0)})}function T(I){"number"==typeof I&&(I=w[I]),null!=I&&I&&I.count&&I.color&&I.opacity&&I.positions&&I.positions.length>1&&(I.scaleRatio=[I.scale[0]*I.viewport.width,I.scale[1]*I.viewport.height],c(I),I.after&&I.after(I))}function L(I){if(I){null!=I.length?"number"==typeof I[0]&&(I=[{positions:I}]):Array.isArray(I)||(I=[I]);var D=0,S=0;if(b.groups=w=I.map(function(Z,Y){var W=w[Y];return Z&&("function"==typeof Z?Z={after:Z}:"number"==typeof Z[0]&&(Z={positions:Z}),Z=t(Z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),W||(w[Y]=W={id:Y,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Z=e({},m,Z)),_(W,Z,[{lineWidth:function(te){return.5*+te},capSize:function(te){return.5*+te},opacity:parseFloat,errors:function(te){return te=i(te),S+=te.length,te},positions:function(te,z){return te=i(te,"float64"),z.count=Math.floor(te.length/2),z.bounds=d(te,2),z.offset=D,D+=z.count,te}},{color:function(te,z){var N=z.count;if(te||(te="transparent"),!Array.isArray(te)||"number"==typeof te[0]){var V=te;te=Array(N);for(var Q=0;Q<N;Q++)te[Q]=V}if(te.length<N)throw Error("Not enough colors");for(var j=new Uint8Array(4*N),J=0;J<N;J++){var K=g(te[J],"uint8");j.set(K,4*J)}return j},range:function(te,z,N){return te||(te=z.bounds),z.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],z.translate=[-te[0],-te[1]],z.scaleFract=n(z.scale),z.translateFract=n(z.translate),te},viewport:function(te){var z;return Array.isArray(te)?z={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?((z={x:te.x||te.left||0,y:te.y||te.top||0}).width=te.right?te.right-z.x:te.w||te.width||0,z.height=te.bottom?te.bottom-z.y:te.h||te.height||0):z={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight},z}}])),W}),D||S){var C=w.reduce(function(Z,Y,W){return Z+(Y?Y.count:0)},0),R=new Float64Array(2*C),F=new Uint8Array(4*C),H=new Float32Array(4*C);w.forEach(function(Z,Y){if(Z){var W=Z.positions,z=Z.offset,V=Z.errors;Z.count&&(F.set(Z.color,4*z),H.set(V,4*z),R.set(W,2*z))}});var U=o(R);u(U);var X=n(R,U);h(X),v(F),f(H)}}}function A(){u.destroy(),h.destroy(),v.destroy(),f.destroy(),l.destroy()}};var p=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(y,$,ee){"use strict";var d=y("color-normalize"),g=y("array-bounds"),_=y("object-assign"),t=y("glslify"),e=y("pick-by-alias"),i=y("flatten-vertex-data"),r=y("earcut"),o=y("array-normalize"),n=y("to-float32"),p=n.float32,s=n.fract32,a=y("es6-weak-map"),c=y("parse-rect"),u=y("array-find-index");function h(v,f){if(!(this instanceof h))return new h(v,f);if("function"==typeof v?(f||(f={}),f.regl=v):f=v,f.length&&(f.positions=f),!(v=f.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=v._gl,this.regl=v,this.passes=[],this.shaders=h.shaders.has(v)?h.shaders.get(v):h.shaders.set(v,h.createShaders(v)).get(v),this.update(f)}$.exports=h,h.dashMult=2,h.maxPatternLength=256,h.precisionThreshold=3e6,h.maxPoints=1e4,h.maxLines=2048,h.shaders=new a,h.createShaders=function(v){var f,l=v.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x={primitive:"triangle strip",instances:v.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,b){return"round"===b.join?2:1},miterLimit:v.prop("miterLimit"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),thickness:v.prop("thickness"),dashTexture:v.prop("dashTexture"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),dashLength:v.prop("dashLength"),viewport:function(w,b){return[b.viewport.x,b.viewport.y,w.viewportWidth,w.viewportHeight]},depth:v.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,b){return!b.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport")},m=v(_({vert:t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:t(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:l,divisor:0,stride:8,offset:0},lineTop:{buffer:l,divisor:0,stride:8,offset:4},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},x));try{f=v(_({cull:{enable:!0,face:"back"},vert:t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:t(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:l,divisor:0,stride:8,offset:0},lineTop:{buffer:l,divisor:0,stride:8,offset:4},aColor:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:v.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},x))}catch(w){f=m}return{fill:v({primitive:"triangle",elements:function(w,b){return b.triangles},offset:0,vert:t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:t(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:v.prop("scale"),color:v.prop("fill"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),viewport:function(w,b){return[b.viewport.x,b.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:v.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport}),rect:m,miter:f}},h.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},h.prototype.render=function(){for(var v,f=[],l=arguments.length;l--;)f[l]=arguments[l];f.length&&(v=this).update.apply(v,f),this.draw()},h.prototype.draw=function(){for(var v=this,f=[],l=arguments.length;l--;)f[l]=arguments[l];return(f.length?f:this.passes).forEach(function(x,m){var w;if(x&&Array.isArray(x))return(w=v).draw.apply(w,x);"number"==typeof x&&(x=v.passes[x]),x&&x.count>1&&x.opacity&&(v.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&v.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>h.precisionThreshold||x.scale[1]*x.viewport.height>h.precisionThreshold||"rect"===x.join||!x.join&&(x.thickness<=2||x.count>=h.maxPoints)?v.shaders.rect(x):v.shaders.miter(x)))}),this},h.prototype.update=function(v){var f=this;if(v){null!=v.length?"number"==typeof v[0]&&(v=[{positions:v}]):Array.isArray(v)||(v=[v]);var l=this.regl,x=this.gl;if(v.forEach(function(T,L){var A=f.passes[L];if(void 0!==T)if(null!==T){if("number"==typeof T[0]&&(T={positions:T}),T=e(T,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),A||(f.passes[L]=A={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:l.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:l.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:l.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:l.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},T=_({},h.defaults,T)),null!=T.thickness&&(A.thickness=parseFloat(T.thickness)),null!=T.opacity&&(A.opacity=parseFloat(T.opacity)),null!=T.miterLimit&&(A.miterLimit=parseFloat(T.miterLimit)),null!=T.overlay&&(A.overlay=!!T.overlay,L<h.maxLines&&(A.depth=2*(h.maxLines-1-L%h.maxLines)/h.maxLines-1)),null!=T.join&&(A.join=T.join),null!=T.hole&&(A.hole=T.hole),null!=T.fill&&(A.fill=T.fill?d(T.fill,"uint8"):null),null!=T.viewport&&(A.viewport=c(T.viewport)),A.viewport||(A.viewport=c([x.drawingBufferWidth,x.drawingBufferHeight])),null!=T.close&&(A.close=T.close),null===T.positions&&(T.positions=[]),T.positions){var I,D;if(T.positions.x&&T.positions.y){var S=T.positions.x,C=T.positions.y;D=A.count=Math.max(S.length,C.length),I=new Float64Array(2*D);for(var R=0;R<D;R++)I[2*R]=S[R],I[2*R+1]=C[R]}else I=i(T.positions,"float64"),D=A.count=Math.floor(I.length/2);var F=A.bounds=g(I,2);if(A.fill){for(var H=[],U={},X=0,Z=0,Y=0,W=A.count;Z<W;Z++){var te=I[2*Z],z=I[2*Z+1];isNaN(te)||isNaN(z)||null==te||null==z?(te=I[2*X],z=I[2*X+1],U[Z]=X):X=Z,H[Y++]=te,H[Y++]=z}if(T.splitNull){A.count-1 in U||(U[A.count]=A.count-1);var N=Object.keys(U).map(Number).sort(function(Et,Xt){return Et-Xt}),V=[],Q=0,j=null!=A.hole?A.hole[0]:null;if(null!=j){var J=u(N,function(Et){return Et>=j});(N=N.slice(0,J)).push(j)}for(var K=function(Et){var Xt=H.slice(2*Q,2*N[Et]).concat(j?H.slice(2*j):[]),nr=(A.hole||[]).map(function(We){return We-j+(N[Et]-Q)}),Ue=r(Xt,nr);Ue=Ue.map(function(We){return We+Q+(We+Q<N[Et]?0:j-N[Et])}),V.push.apply(V,Ue),Q=N[Et]+1},re=0;re<N.length;re++)K(re);for(var ie=0,ce=V.length;ie<ce;ie++)null!=U[V[ie]]&&(V[ie]=U[V[ie]]);A.triangles=V}else{for(var se=r(H,A.hole||[]),de=0,ue=se.length;de<ue;de++)null!=U[se[de]]&&(se[de]=U[se[de]]);A.triangles=se}}var ge=new Float64Array(I);o(ge,2,F);var be=new Float64Array(2*D+6);A.close?I[0]===I[2*D-2]&&I[1]===I[2*D-1]?(be[0]=ge[2*D-4],be[1]=ge[2*D-3]):(be[0]=ge[2*D-2],be[1]=ge[2*D-1]):(be[0]=ge[0],be[1]=ge[1]),be.set(ge,2),A.close?I[0]===I[2*D-2]&&I[1]===I[2*D-1]?(be[2*D+2]=ge[2],be[2*D+3]=ge[3],A.count-=1):(be[2*D+2]=ge[0],be[2*D+3]=ge[1],be[2*D+4]=ge[2],be[2*D+5]=ge[3]):(be[2*D+2]=ge[2*D-2],be[2*D+3]=ge[2*D-1],be[2*D+4]=ge[2*D-2],be[2*D+5]=ge[2*D-1]);var Te=p(be);A.positionBuffer(Te);var we=s(be,Te);A.positionFractBuffer(we)}if(T.range?A.range=T.range:A.range||(A.range=A.bounds),(T.range||T.positions)&&A.count){var Le=A.bounds,Me=A.range[2]-A.range[0],ke=A.range[3]-A.range[1];A.scale=[(Le[2]-Le[0])/Me,(Le[3]-Le[1])/ke],A.translate=[-A.range[0]/Me+Le[0]/Me||0,-A.range[1]/ke+Le[1]/ke||0],A.scaleFract=s(A.scale),A.translateFract=s(A.translate)}if(T.dashes){var Ce,Pe=0;if(!T.dashes||T.dashes.length<2)Pe=1,Ce=new Uint8Array([255,255,255,255,255,255,255,255]);else{Pe=0;for(var Fe=0;Fe<T.dashes.length;++Fe)Pe+=T.dashes[Fe];Ce=new Uint8Array(Pe*h.dashMult);for(var qe=0,rt=255,ze=0;ze<2;ze++)for(var He=0;He<T.dashes.length;++He){for(var Xe=0,Je=T.dashes[He]*h.dashMult*.5;Xe<Je;++Xe)Ce[qe++]=rt;rt^=255}}A.dashLength=Pe,A.dashTexture({channels:1,data:Ce,width:Ce.length,height:1,mag:"linear",min:"linear"},0,0)}if(T.color){var at=A.count,pt=T.color;pt||(pt="transparent");var xt=new Uint8Array(4*at+4);if(Array.isArray(pt)&&"number"!=typeof pt[0]){for(var Ft=0;Ft<at;Ft++){var Dt=d(pt[Ft],"uint8");xt.set(Dt,4*Ft)}xt.set(d(pt[0],"uint8"),4*at)}else for(var ot=d(pt,"uint8"),it=0;it<at+1;it++)xt.set(ot,4*it);A.colorBuffer({usage:"dynamic",type:"uint8",data:xt})}}else f.passes[L]=null}),v.length<this.passes.length){for(var m=v.length;m<this.passes.length;m++){var w=this.passes[m];w&&(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=v.length}for(var b=[],k=0;k<this.passes.length;k++)null!==this.passes[k]&&b.push(this.passes[k]);return this.passes=b,this}},h.prototype.destroy=function(){return this.passes.forEach(function(v){v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(y,$,ee){"use strict";function d(m,w){return function(b){if(Array.isArray(b))return b}(m)||function(b,k){var T=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=T){var L,A,I=[],D=!0,S=!1;try{for(T=T.call(b);!(D=(L=T.next()).done)&&(I.push(L.value),!k||I.length!==k);D=!0);}catch(C){S=!0,A=C}finally{try{D||null==T.return||T.return()}finally{if(S)throw A}}return I}}(m,w)||_(m,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(m){return function(w){if(Array.isArray(w))return t(w)}(m)||function(w){if("undefined"!=typeof Symbol&&null!=w[Symbol.iterator]||null!=w["@@iterator"])return Array.from(w)}(m)||_(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(m,w){if(m){if("string"==typeof m)return t(m,w);var b=Object.prototype.toString.call(m).slice(8,-1);return"Object"===b&&m.constructor&&(b=m.constructor.name),"Map"===b||"Set"===b?Array.from(m):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?t(m,w):void 0}}function t(m,w){(null==w||w>m.length)&&(w=m.length);for(var b=0,k=new Array(w);b<w;b++)k[b]=m[b];return k}var e=y("color-normalize"),i=y("array-bounds"),r=y("color-id"),o=y("@plotly/point-cluster"),n=y("object-assign"),p=y("glslify"),s=y("pick-by-alias"),a=y("update-diff"),c=y("flatten-vertex-data"),u=y("is-iexplorer"),h=y("to-float32"),v=y("parse-rect"),f=l;function l(m,w){var b=this;if(!(this instanceof l))return new l(m,w);"function"==typeof m?(w||(w={}),w.regl=m):(w=m,m=null),w&&w.length&&(w.positions=w);var k,T=(m=w.regl)._gl,L=[];this.tooManyColors=u,k=m.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),n(this,{regl:m,gl:T,groups:[],markerCache:[null],markerTextures:[null],palette:L,paletteIds:{},paletteTexture:k,maxColors:255,maxSize:100,canvas:T.canvas}),this.update(w);var A={uniforms:{constPointSize:!!w.constPointSize,opacity:m.prop("opacity"),paletteSize:function(S,C){return[b.tooManyColors?0:255,k.height]},pixelRatio:m.context("pixelRatio"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translate:m.prop("translate"),translateFract:m.prop("translateFract"),markerTexture:m.prop("markerTexture"),paletteTexture:k},attributes:{x:function(S,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(S,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(S,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(S,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(S,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/b.maxSize)]}},borderSize:function(S,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/b.maxSize)]}},colorId:function(S,C){return C.color.length?{buffer:C.colorBuffer,stride:b.tooManyColors?8:4,offset:0}:{constant:b.tooManyColors?L.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(S,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:b.tooManyColors?8:4,offset:b.tooManyColors?4:2}:{constant:b.tooManyColors?L.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(S,C){return!0===C.activation?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:m.prop("elements"),count:m.prop("count"),offset:m.prop("offset"),primitive:"points"},I=n({},A);I.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),I.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=m(I);var D=n({},A);D.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),D.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),u&&(D.frag=D.frag.replace("smoothstep","smoothStep"),I.frag=I.frag.replace("smoothstep","smoothStep")),this.drawCircle=m(D)}l.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},l.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},l.prototype.draw=function(){for(var m=this,w=arguments.length,b=new Array(w),k=0;k<w;k++)b[k]=arguments[k];var T=this.groups;if(1===b.length&&Array.isArray(b[0])&&(null===b[0][0]||Array.isArray(b[0][0]))&&(b=b[0]),this.regl._refresh(),b.length)for(var L=0;L<b.length;L++)this.drawItem(L,b[L]);else T.forEach(function(A,I){m.drawItem(I)});return this},l.prototype.drawItem=function(m,w){var b=this.groups,k=b[m];if("number"==typeof w&&(m=w,k=b[w],w=null),k&&k.count&&k.opacity){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,w));for(var T=[],L=1;L<k.activation.length;L++)k.activation[L]&&(!0===k.activation[L]||k.activation[L].data.length)&&T.push.apply(T,g(this.getMarkerDrawOptions(L,k,w)));T.length&&this.drawMarker(T)}},l.prototype.getMarkerDrawOptions=function(m,w,b){var k=w.range,T=w.tree,L=w.viewport,A=w.activation,I=w.selectionBuffer,D=w.count;if(!T)return b?[n({},w,{markerTexture:this.markerTextures[m],activation:A[m],count:b.length,elements:b,offset:0})]:[n({},w,{markerTexture:this.markerTextures[m],activation:A[m],offset:0})];var S=[],C=T.range(k,{lod:!0,px:[(k[2]-k[0])/L.width,(k[3]-k[1])/L.height]});if(b){for(var R=A[m].data,F=new Uint8Array(D),H=0;H<b.length;H++){var U=b[H];F[U]=R?R[U]:1}I.subdata(F)}for(var X=C.length;X--;){var Z=d(C[X],2),Y=Z[0];S.push(n({},w,{markerTexture:this.markerTextures[m],activation:b?I:A[m],offset:Y,count:Z[1]-Y}))}return S},l.prototype.update=function(){for(var m=this,w=arguments.length,b=new Array(w),k=0;k<w;k++)b[k]=arguments[k];if(b.length){1===b.length&&Array.isArray(b[0])&&(b=b[0]);var T=this.groups,L=this.gl,A=this.regl,I=this.maxSize,D=this.maxColors,S=this.palette;this.groups=T=b.map(function(C,R){var F=T[R];if(void 0===C)return F;null===C?C={positions:null}:"function"==typeof C?C={ondraw:C}:"number"==typeof C[0]&&(C={positions:C}),null===(C=s(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(C.positions=[]),null!=C.tooManyColors&&(m.tooManyColors=C.tooManyColors),F||(T[R]=F={id:R,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:A.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=n({},l.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=F.marker,delete F.marker),C.marker&&!("positions"in C)&&(C.positions=F.positions,delete F.positions);var H=0,U=0;if(a(F,C,[{snap:!0,size:function(ue,ge){return null==ue&&(ue=l.defaults.size),H+=ue&&ue.length?1:0,ue},borderSize:function(ue,ge){return null==ue&&(ue=l.defaults.borderSize),H+=ue&&ue.length?1:0,ue},opacity:parseFloat,color:function(ue,ge){return null==ue&&(ue=l.defaults.color),ue=m.updateColor(ue),U++,ue},borderColor:function(ue,ge){return null==ue&&(ue=l.defaults.borderColor),ue=m.updateColor(ue),U++,ue},bounds:function(ue,ge,be){return"range"in be||(be.range=null),ue},positions:function(ue,ge,be){var Te=ge.snap,we=ge.positionBuffer,Le=ge.positionFractBuffer,fe=ge.selectionBuffer;if(ue.x||ue.y)return ge.xAttr=ue.x.length?{buffer:A.buffer(ue.x),offset:0,stride:4,count:ue.x.length}:{buffer:ue.x.buffer,offset:4*ue.x.offset||0,stride:4*(ue.x.stride||1),count:ue.x.count},ge.yAttr=ue.y.length?{buffer:A.buffer(ue.y),offset:0,stride:4,count:ue.y.length}:{buffer:ue.y.buffer,offset:4*ue.y.offset||0,stride:4*(ue.y.stride||1),count:ue.y.count},ge.count=Math.max(ge.xAttr.count,ge.yAttr.count),ue;ue=c(ue,"float64");var ve=ge.count=Math.floor(ue.length/2),Me=ge.bounds=ve?i(ue,2):null;if(be.range||ge.range||(delete ge.range,be.range=Me),be.marker||ge.marker||(delete ge.marker,be.marker=null),Te&&(!0===Te||ve>Te)?ge.tree=o(ue,{bounds:Me}):Te&&Te.length&&(ge.tree=Te),ge.tree){var ke={primitive:"points",usage:"static",data:ge.tree,type:"uint32"};ge.elements?ge.elements(ke):ge.elements=A.elements(ke)}var Ce=h.float32(ue);return we({data:Ce,usage:"dynamic"}),Le({data:h.fract32(ue,Ce),usage:"dynamic"}),fe({data:new Uint8Array(ve),type:"uint8",usage:"stream"}),ue}},{marker:function(ue,ge,be){var Te=ge.activation;if(Te.forEach(function(Ce){return Ce&&Ce.destroy&&Ce.destroy()}),Te.length=0,ue&&"number"!=typeof ue[0]){for(var we=[],Le=0,fe=Math.min(ue.length,ge.count);Le<fe;Le++){var ve=m.addMarker(ue[Le]);we[ve]||(we[ve]=new Uint8Array(ge.count)),we[ve][Le]=1}for(var Me=0;Me<we.length;Me++)if(we[Me]){var ke={data:we[Me],type:"uint8",usage:"static"};Te[Me]?Te[Me](ke):Te[Me]=A.buffer(ke),Te[Me].data=we[Me]}}else Te[m.addMarker(ue)]=!0;return ue},range:function(ue,ge,be){var Te=ge.bounds;if(Te)return ue||(ue=Te),ge.scale=[1/(ue[2]-ue[0]),1/(ue[3]-ue[1])],ge.translate=[-ue[0],-ue[1]],ge.scaleFract=h.fract(ge.scale),ge.translateFract=h.fract(ge.translate),ue},viewport:function(ue){return v(ue||[L.drawingBufferWidth,L.drawingBufferHeight])}}]),H){var Z=F.count,Y=F.size,W=F.borderSize,te=F.sizeBuffer,z=new Uint8Array(2*Z);if(Y.length||W.length)for(var N=0;N<Z;N++)z[2*N]=Math.round(255*(null==Y[N]?Y:Y[N])/I),z[2*N+1]=Math.round(255*(null==W[N]?W:W[N])/I);te({data:z,usage:"dynamic"})}if(U){var V,j=F.count,J=F.color,K=F.borderColor,re=F.colorBuffer;if(m.tooManyColors){if(J.length||K.length){V=new Uint8Array(8*j);for(var ie=0;ie<j;ie++){var ce=J[ie];V[8*ie]=S[4*ce],V[8*ie+1]=S[4*ce+1],V[8*ie+2]=S[4*ce+2],V[8*ie+3]=S[4*ce+3];var se=K[ie];V[8*ie+4]=S[4*se],V[8*ie+5]=S[4*se+1],V[8*ie+6]=S[4*se+2],V[8*ie+7]=S[4*se+3]}}}else if(J.length||K.length){V=new Uint8Array(4*j+2);for(var de=0;de<j;de++)null!=J[de]&&(V[4*de]=J[de]%D,V[4*de+1]=Math.floor(J[de]/D)),null!=K[de]&&(V[4*de+2]=K[de]%D,V[4*de+3]=Math.floor(K[de]/D))}re({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return F})}},l.prototype.addMarker=function(m){var w,b=this.markerTextures,k=this.regl,T=this.markerCache,L=null==m?0:T.indexOf(m);if(L>=0)return L;if(m instanceof Uint8Array||m instanceof Uint8ClampedArray)w=m;else{w=new Uint8Array(m.length);for(var A=0,I=m.length;A<I;A++)w[A]=255*m[A]}var D=Math.floor(Math.sqrt(w.length));return L=b.length,T.push(m),b.push(k.texture({channels:1,data:w,radius:D,mag:"linear",min:"linear"})),L},l.prototype.updateColor=function(m){var w=this.paletteIds,b=this.palette,k=this.maxColors;Array.isArray(m)||(m=[m]);var T=[];if("number"==typeof m[0]){var L=[];if(Array.isArray(m))for(var A=0;A<m.length;A+=4)L.push(m.slice(A,A+4));else for(var I=0;I<m.length;I+=4)L.push(m.subarray(I,I+4));m=L}for(var D=0;D<m.length;D++){var S=m[D];S=e(S,"uint8");var C=r(S,!1);if(null==w[C]){var R=b.length;w[C]=Math.floor(R/4),b[R]=S[0],b[R+1]=S[1],b[R+2]=S[2],b[R+3]=S[3]}T[D]=w[C]}return!this.tooManyColors&&b.length>4*k&&(this.tooManyColors=!0),this.updatePalette(b),1===T.length?T[0]:T},l.prototype.updatePalette=function(m){if(!this.tooManyColors){var w=this.maxColors,b=this.paletteTexture,k=Math.ceil(.25*m.length/w);if(k>1)for(var T=.25*(m=m.slice()).length%w;T<k*w;T++)m.push(0,0,0,0);b.height<k&&b.resize(w,k),b.subimage({width:Math.min(.25*m.length,w),height:k,data:m},0,0)}},l.prototype.destroy=function(){return this.groups.forEach(function(m){m.sizeBuffer.destroy(),m.positionBuffer.destroy(),m.positionFractBuffer.destroy(),m.colorBuffer.destroy(),m.activation.forEach(function(w){return w&&w.destroy&&w.destroy()}),m.selectionBuffer.destroy(),m.elements&&m.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(m){return m&&m.destroy&&m.destroy()}),this};var x=y("object-assign");$.exports=function(m,w){var b=new f(m,w),k=b.render.bind(b);return x(k,{render:k,update:b.update.bind(b),draw:b.draw.bind(b),destroy:b.destroy.bind(b),regl:b.regl,gl:b.gl,canvas:b.gl.canvas,groups:b.groups,markers:b.markerCache,palette:b.palette}),k}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(y,$,ee){"use strict";var d=y("regl-scatter2d"),g=y("pick-by-alias"),_=y("array-bounds"),t=y("raf"),e=y("array-range"),i=y("parse-rect"),r=y("flatten-vertex-data");function o(a,c){if(!(this instanceof o))return new o(a,c);this.traces=[],this.passes={},this.regl=a,this.scatter=d(a),this.canvas=this.scatter.canvas}function n(a,c,u){return(null!=a.id?a.id:a)<<16|(255&c)<<8|255&u}function p(a,c,u){var h,v,f,l,x=a[c],m=a[u];return x.length>2?(h=x[1],v=x[3]):x.length?(h=x[0],v=x[1]):(h=x.y,v=x.y+x.height),m.length>2?(f=m[0],l=m[2]):m.length?(f=m[0],l=m[1]):(f=m.x,l=m.x+m.width),[f,h,l,v]}function s(a){if("number"==typeof a)return[a,a,a,a];if(2===a.length)return[a[0],a[1],a[0],a[1]];var c=i(a);return[c.x,c.y,c.x+c.width,c.y+c.height]}$.exports=o,o.prototype.render=function(){for(var a,c=this,u=[],h=arguments.length;h--;)u[h]=arguments[h];return u.length&&(a=this).update.apply(a,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=t(function(){c.draw(),c.dirty=!0,c.planned=null})):(this.draw(),this.dirty=!0,t(function(){c.dirty=!1})),this)},o.prototype.update=function(){for(var a,c=[],u=arguments.length;u--;)c[u]=arguments[u];if(c.length){for(var h=0;h<c.length;h++)this.updateItem(h,c[h]);this.traces=this.traces.filter(Boolean);for(var v=[],f=0,l=0;l<this.traces.length;l++){for(var x=this.traces[l],m=this.traces[l].passes,w=0;w<m.length;w++)v.push(this.passes[m[w]]);x.passOffset=f,f+=x.passes.length}return(a=this.scatter).update.apply(a,v),this}},o.prototype.updateItem=function(a,c){var u=this.regl;if(null===c)return this.traces[a]=null,this;if(!c)return this;var h,v=g(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),f=this.traces[a]||(this.traces[a]={id:a,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:i([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=v.color&&(f.color=v.color),null!=v.size&&(f.size=v.size),null!=v.marker&&(f.marker=v.marker),null!=v.borderColor&&(f.borderColor=v.borderColor),null!=v.borderSize&&(f.borderSize=v.borderSize),null!=v.opacity&&(f.opacity=v.opacity),v.viewport&&(f.viewport=i(v.viewport)),null!=v.diagonal&&(f.diagonal=v.diagonal),null!=v.upper&&(f.upper=v.upper),null!=v.lower&&(f.lower=v.lower),v.data){f.buffer(r(v.data)),f.columns=v.data.length,f.count=v.data[0].length,f.bounds=[];for(var l=0;l<f.columns;l++)f.bounds[l]=_(v.data[l],1)}v.range&&(f.range=v.range,h=f.range&&"number"!=typeof f.range[0]),v.domain&&(f.domain=v.domain);var x=!1;null!=v.padding&&(Array.isArray(v.padding)&&v.padding.length===f.columns&&"number"==typeof v.padding[v.padding.length-1]?(f.padding=v.padding.map(s),x=!0):f.padding=s(v.padding));var m=f.columns,w=f.count,b=f.viewport.width,k=f.viewport.height,T=f.viewport.x,L=f.viewport.y,A=b/m,I=k/m;f.passes=[];for(var D=0;D<m;D++)for(var S=0;S<m;S++)if((f.diagonal||S!==D)&&(f.upper||!(D>S))&&(f.lower||!(D<S))){var C=n(f.id,D,S),R=this.passes[C]||(this.passes[C]={});if(v.data&&(R.positions=v.transpose?{x:{buffer:f.buffer,offset:S,count:w,stride:m},y:{buffer:f.buffer,offset:D,count:w,stride:m}}:{x:{buffer:f.buffer,offset:S*w,count:w},y:{buffer:f.buffer,offset:D*w,count:w}},R.bounds=p(f.bounds,D,S)),v.domain||v.viewport||v.data){var F=x?p(f.padding,D,S):f.padding;if(f.domain){var H=p(f.domain,D,S);R.viewport=[T+H[0]*b+F[0],L+H[1]*k+F[1],T+H[2]*b-F[2],L+H[3]*k-F[3]]}else R.viewport=[T+S*A+A*F[0],L+D*I+I*F[1],T+(S+1)*A-A*F[2],L+(D+1)*I-I*F[3]]}v.color&&(R.color=f.color),v.size&&(R.size=f.size),v.marker&&(R.marker=f.marker),v.borderSize&&(R.borderSize=f.borderSize),v.borderColor&&(R.borderColor=f.borderColor),v.opacity&&(R.opacity=f.opacity),v.range&&(R.range=h?p(f.range,D,S):f.range||R.bounds),f.passes.push(C)}return this},o.prototype.draw=function(){for(var a,c=[],u=arguments.length;u--;)c[u]=arguments[u];if(c.length){for(var h=[],v=0;v<c.length;v++)if("number"==typeof c[v]){var f=this.traces[c[v]],x=f.passOffset;h.push.apply(h,e(x,x+f.passes.length))}else if(c[v].length){var m=c[v],w=this.traces[v],b=w.passes,k=w.passOffset;b=b.map(function(T,L){h[k+L]=m})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},o.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(y,$,ee){var g;g=function(){function d(Be,Qe){this.id=V++,this.type=Be,this.data=Qe}function g(Be){return"["+function Qe(Ae){if(0===Ae.length)return[];var De=Ae.charAt(0),Oe=Ae.charAt(Ae.length-1);if(1<Ae.length&&De===Oe&&('"'===De||"'"===De))return['"'+Ae.substr(1,Ae.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(De=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ae))return Qe(Ae.substr(0,De.index)).concat(Qe(De[1])).concat(Qe(Ae.substr(De.index+De[0].length)));if(1===(De=Ae.split(".")).length)return['"'+Ae.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ae=[],Oe=0;Oe<De.length;++Oe)Ae=Ae.concat(Qe(De[Oe]));return Ae}(Be).join("][")+"]"}function _(Be){return"string"==typeof Be?Be.split():Be}function t(Be){return"string"==typeof Be?document.querySelector(Be):Be}function i(Be,Qe){for(var Ae=Array(Be),De=0;De<Be;++De)Ae[De]=Qe(De);return Ae}function r(Be){var Qe,Ae;return Qe=(65535<Be)<<4,Qe|=Ae=(255<(Be>>>=Qe))<<3,(Qe|=Ae=(15<(Be>>>=Ae))<<2)|(Ae=(3<(Be>>>=Ae))<<1)|Be>>>Ae>>1}function o(){function Be(De){e:{for(var Oe=16;268435456>=Oe;Oe*=16)if(De<=Oe){De=Oe;break e}De=0}return 0<(Oe=Ae[r(De)>>2]).length?Oe.pop():new ArrayBuffer(De)}function Qe(De){Ae[r(De.byteLength)>>2].push(De)}var Ae=i(8,function(){return[]});return{alloc:Be,free:Qe,allocType:function(De,Oe){var Ie=null;switch(De){case 5120:Ie=new Int8Array(Be(Oe),0,Oe);break;case 5121:Ie=new Uint8Array(Be(Oe),0,Oe);break;case 5122:Ie=new Int16Array(Be(2*Oe),0,Oe);break;case 5123:Ie=new Uint16Array(Be(2*Oe),0,Oe);break;case 5124:Ie=new Int32Array(Be(4*Oe),0,Oe);break;case 5125:Ie=new Uint32Array(Be(4*Oe),0,Oe);break;case 5126:Ie=new Float32Array(Be(4*Oe),0,Oe);break;default:return null}return Ie.length!==Oe?Ie.subarray(0,Oe):Ie},freeType:function(De){Qe(De.buffer)}}}function n(Be){return!!Be&&"object"==typeof Be&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&"number"==typeof Be.offset&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||ie(Be.data))}function p(Be,Qe,Ae,De,Oe,Ie){for(var et=0;et<Qe;++et)for(var ct=Be[et],vt=0;vt<Ae;++vt)for(var ft=ct[vt],It=0;It<De;++It)Oe[Ie++]=ft[It]}function s(Be){return 0|de[Object.prototype.toString.call(Be)]}function a(Be,Qe){for(var Ae=0;Ae<Qe.length;++Ae)Be[Ae]=Qe[Ae]}function c(Be,Qe,Ae,De,Oe,Ie,et){for(var ct=0,vt=0;vt<Ae;++vt)for(var ft=0;ft<De;++ft)Be[ct++]=Qe[Oe*vt+Ie*ft+et]}function v(Be){for(var Qe=K.allocType(5123,Be.length),Ae=0;Ae<Be.length;++Ae)if(isNaN(Be[Ae]))Qe[Ae]=65535;else if(1/0===Be[Ae])Qe[Ae]=31744;else if(-1/0===Be[Ae])Qe[Ae]=64512;else{fe[0]=Be[Ae];var De=(Ie=ve[0])>>>31<<15,Oe=(Ie<<1>>>24)-127,Ie=Ie>>13&1023;Qe[Ae]=-24>Oe?De:-14>Oe?De+(Ie+1024>>-14-Oe):15<Oe?De+31744:De+(Oe+15<<10)+Ie}return Qe}function f(Be){return Array.isArray(Be)||ie(Be)}function l(Be){return"[object "+Be+"]"}function x(Be){return Array.isArray(Be)&&(0===Be.length||"number"==typeof Be[0])}function m(Be){return!(!Array.isArray(Be)||0===Be.length||!f(Be[0]))}function w(Be){return Object.prototype.toString.call(Be)}function b(Be){if(!Be)return!1;var Qe=w(Be);return 0<=Xe.indexOf(Qe)||x(Be)||m(Be)||n(Be)}function k(Be,Qe){36193===Be.type?(Be.data=v(Qe),K.freeType(Qe)):Be.data=Qe}function T(Be,Qe,Ae,De,Oe,Ie){if(Be=void 0!==at[Be]?at[Be]:Ce[Be]*Je[Qe],Ie&&(Be*=6),Oe){for(De=0;1<=Ae;)De+=Be*Ae*Ae,Ae/=2;return De}return Be*Ae*De}function I(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function R(Be){return Array.prototype.slice.call(Be)}function F(Be){return R(Be).join("")}function H(Be){return Array.isArray(Be)||ie(Be)||n(Be)}function U(Be){return Be.sort(function(Qe,Ae){return"viewport"===Qe?-1:"viewport"===Ae?1:Qe<Ae?-1:1})}function X(Be,Qe,Ae,De){this.thisDep=Be,this.contextDep=Qe,this.propDep=Ae,this.append=De}function Z(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function Y(Be){return new X(!1,!1,!1,Be)}function W(Be,Qe){var Ae=Be.type;if(0===Ae)return new X(!0,1<=(Ae=Be.data.length),2<=Ae,Qe);if(4===Ae)return new X((Ae=Be.data).thisDep,Ae.contextDep,Ae.propDep,Qe);if(5===Ae)return new X(!1,!1,!1,Qe);if(6===Ae){for(var De=Ae=!1,Oe=!1,Ie=0;Ie<Be.data.length;++Ie){var et=Be.data[Ie];1===et.type?Oe=!0:2===et.type?De=!0:3===et.type?Ae=!0:0===et.type?(Ae=!0,1<=(et=et.data)&&(De=!0),2<=et&&(Oe=!0)):4===et.type&&(Ae=Ae||et.data.thisDep,De=De||et.data.contextDep,Oe=Oe||et.data.propDep)}return new X(Ae,De,Oe,Qe)}return new X(3===Ae,2===Ae,1===Ae,Qe)}function te(Be,Qe,Ae,De,Oe,Ie,et,ct,vt,ft,It,ut,Ot,Rt,$e){function yt(zt){return zt.replace(".","_")}function Bt(zt,Gt,mr){var Er=yt(zt);qr.push(zt),Un[Er]=Xr[Er]=!!mr,On[Er]=Gt}function Ut(zt,Gt,mr){var Er=yt(zt);qr.push(zt),Array.isArray(mr)?(Xr[Er]=mr.slice(),Un[Er]=mr.slice()):Xr[Er]=Un[Er]=mr,Tn[Er]=Gt}function Qt(){var zt=function(){function Sr(){var Zr=[],Wr=[];return N(function(){Zr.push.apply(Zr,R(arguments))},{def:function(){var pn="v"+Kr++;return Wr.push(pn),0<arguments.length&&(Zr.push(pn,"="),Zr.push.apply(Zr,R(arguments)),Zr.push(";")),pn},toString:function(){return F([0<Wr.length?"var "+Wr.join(",")+";":"",F(Zr)])}})}function Pr(){function Zr(hi,Qn){pn(hi,Qn,"=",Wr.def(hi,Qn),";")}var Wr=Sr(),pn=Sr(),Mn=Wr.toString,Dn=pn.toString;return N(function(){Wr.apply(Wr,R(arguments))},{def:Wr.def,entry:Wr,exit:pn,save:Zr,set:function(hi,Qn,An){Zr(hi,Qn),Wr(hi,Qn,"=",An,";")},toString:function(){return Mn()+Dn()}})}var Kr=0,vn=[],Cn=[],ln=Sr(),yn={};return{global:ln,link:function(Zr){for(var Wr=0;Wr<Cn.length;++Wr)if(Cn[Wr]===Zr)return vn[Wr];return Wr="g"+Kr++,vn.push(Wr),Cn.push(Zr),Wr},block:Sr,proc:function(Zr,Wr){function pn(){var Qn="a"+Mn.length;return Mn.push(Qn),Qn}var Mn=[];Wr=Wr||0;for(var Dn=0;Dn<Wr;++Dn)pn();var hi=(Dn=Pr()).toString;return yn[Zr]=N(Dn,{arg:pn,toString:function(){return F(["function(",Mn.join(),"){",hi(),"}"])}})},scope:Pr,cond:function(){var Zr=F(arguments),Wr=Pr(),pn=Pr(),Mn=Wr.toString,Dn=pn.toString;return N(Wr,{then:function(){return Wr.apply(Wr,R(arguments)),this},else:function(){return pn.apply(pn,R(arguments)),this},toString:function(){var hi=Dn();return hi&&(hi="else{"+hi+"}"),F(["if(",Zr,"){",Mn(),"}",hi])}})},compile:function(){var Zr=['"use strict";',ln,"return {"];Object.keys(yn).forEach(function(pn){Zr.push('"',pn,'":',yn[pn].toString(),",")}),Zr.push("}");var Wr=F(Zr).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,vn.concat(Wr)).apply(null,Cn)}}}(),Gt=zt.link,mr=zt.global;zt.id=ar++,zt.batchId="0";var Er=Gt(rn),tn=zt.shared={props:"a0"};Object.keys(rn).forEach(function(Sr){tn[Sr]=mr.def(Er,".",Sr)});var Qr=zt.next={},Cr=zt.current={};Object.keys(Tn).forEach(function(Sr){Array.isArray(Xr[Sr])&&(Qr[Sr]=mr.def(tn.next,".",Sr),Cr[Sr]=mr.def(tn.current,".",Sr))});var Mr=zt.constants={};Object.keys(Vn).forEach(function(Sr){Mr[Sr]=mr.def(JSON.stringify(Vn[Sr]))}),zt.invoke=function(Sr,Pr){switch(Pr.type){case 0:var Kr=["this",tn.context,tn.props,zt.batchId];return Sr.def(Gt(Pr.data),".call(",Kr.slice(0,Math.max(Pr.data.length+1,4)),")");case 1:return Sr.def(tn.props,Pr.data);case 2:return Sr.def(tn.context,Pr.data);case 3:return Sr.def("this",Pr.data);case 4:return Pr.data.append(zt,Sr),Pr.data.ref;case 5:return Pr.data.toString();case 6:return Pr.data.map(function(vn){return zt.invoke(Sr,vn)})}},zt.attribCache={};var Ir={};return zt.scopeAttrib=function(Sr){if((Sr=Qe.id(Sr))in Ir)return Ir[Sr];var Pr=ft.scope[Sr];return Pr||(Pr=ft.scope[Sr]=new Nn),Ir[Sr]=Gt(Pr)},zt}function Zt(zt,Gt,mr,Er,tn){function Qr(yn){var Zr=Mr[yn];Zr&&(Sr[yn]=Zr)}var yn,Wr,pn,Mn,Cr=function(yn,Zr){if("string"==typeof(Wr=yn.static).frag&&"string"==typeof Wr.vert){if(0<Object.keys(Zr.dynamic).length)return null;var Wr=Zr.static,pn=Object.keys(Wr);if(0<pn.length&&"number"==typeof Wr[pn[0]]){for(var Mn=[],Dn=0;Dn<pn.length;++Dn)Mn.push([0|Wr[pn[Dn]],pn[Dn]]);return Mn}}return null}(zt,Gt),Mr=function(yn,Zr,Wr){function pn(Qn){if(Qn in Mn){var An=Mn[Qn];Qn=!0;var ci,yi,Xi=0|An.x,Da=0|An.y;return"width"in An?ci=0|An.width:Qn=!1,"height"in An?yi=0|An.height:Qn=!1,new X(!Qn&&Zr&&Zr.thisDep,!Qn&&Zr&&Zr.contextDep,!Qn&&Zr&&Zr.propDep,function(Ma,Oi){var Yi=Ma.shared.context,_a=ci;"width"in An||(_a=Oi.def(Yi,".","framebufferWidth","-",Xi));var Co=yi;return"height"in An||(Co=Oi.def(Yi,".","framebufferHeight","-",Da)),[Xi,Da,_a,Co]})}if(Qn in Dn){var la=Dn[Qn];return Qn=W(la,function(Ma,Oi){var Yi=Ma.invoke(Oi,la),_a=Ma.shared.context,Co=Oi.def(Yi,".x|0"),Zo=Oi.def(Yi,".y|0");return[Co,Zo,Oi.def('"width" in ',Yi,"?",Yi,".width|0:","(",_a,".","framebufferWidth","-",Co,")"),Yi=Oi.def('"height" in ',Yi,"?",Yi,".height|0:","(",_a,".","framebufferHeight","-",Zo,")")]}),Zr&&(Qn.thisDep=Qn.thisDep||Zr.thisDep,Qn.contextDep=Qn.contextDep||Zr.contextDep,Qn.propDep=Qn.propDep||Zr.propDep),Qn}return Zr?new X(Zr.thisDep,Zr.contextDep,Zr.propDep,function(Ma,Oi){var Yi=Ma.shared.context;return[0,0,Oi.def(Yi,".","framebufferWidth"),Oi.def(Yi,".","framebufferHeight")]}):null}var Mn=yn.static,Dn=yn.dynamic;if(yn=pn("viewport")){var hi=yn;yn=new X(yn.thisDep,yn.contextDep,yn.propDep,function(Qn,An){var ci=hi.append(Qn,An),yi=Qn.shared.context;return An.set(yi,".viewportWidth",ci[2]),An.set(yi,".viewportHeight",ci[3]),ci})}return{viewport:yn,scissor_box:pn("scissor.box")}}(zt,Kr=function(zt,Gt){var mr=zt.static,Er=zt.dynamic;if("framebuffer"in mr){var tn=mr.framebuffer;return tn?(tn=ct.getFramebuffer(tn),Y(function(Cr,Mr){var Ir=Cr.link(tn),Sr=Cr.shared;return Mr.set(Sr.framebuffer,".next",Ir),Mr.set(Sr=Sr.context,".framebufferWidth",Ir+".width"),Mr.set(Sr,".framebufferHeight",Ir+".height"),Ir})):Y(function(Cr,Mr){var Ir=Cr.shared;return Mr.set(Ir.framebuffer,".next","null"),Mr.set(Ir=Ir.context,".framebufferWidth",Ir+".drawingBufferWidth"),Mr.set(Ir,".framebufferHeight",Ir+".drawingBufferHeight"),"null"})}if("framebuffer"in Er){var Qr=Er.framebuffer;return W(Qr,function(Cr,Mr){var Ir=Cr.invoke(Mr,Qr),Sr=Cr.shared,Pr=Sr.framebuffer;return Ir=Mr.def(Pr,".getFramebuffer(",Ir,")"),Mr.set(Pr,".next",Ir),Mr.set(Sr=Sr.context,".framebufferWidth",Ir+"?"+Ir+".width:"+Sr+".drawingBufferWidth"),Mr.set(Sr,".framebufferHeight",Ir+"?"+Ir+".height:"+Sr+".drawingBufferHeight"),Ir})}return null}(zt)),Ir=function(zt,Gt){function mr(ln,yn){if(ln in Er){var Zr=0|Er[ln];return yn?Qr.offset=Zr:Qr.instances=Zr,Y(function(pn,Mn){return yn&&(pn.OFFSET=Zr),Zr})}if(ln in tn){var Wr=tn[ln];return W(Wr,function(pn,Mn){var Dn=pn.invoke(Mn,Wr);return yn&&(pn.OFFSET=Dn),Dn})}if(yn){if(Ir)return Y(function(pn,Mn){return pn.OFFSET=0});if(Cr)return new X(Mr.thisDep,Mr.contextDep,Mr.propDep,function(pn,Mn){return Mn.def(pn.shared.vao+".currentVAO?"+pn.shared.vao+".currentVAO.offset:0")})}else if(Cr)return new X(Mr.thisDep,Mr.contextDep,Mr.propDep,function(pn,Mn){return Mn.def(pn.shared.vao+".currentVAO?"+pn.shared.vao+".currentVAO.instances:-1")});return null}var Er=zt.static,tn=zt.dynamic,Qr={},Cr=!1,Mr=function(){if("vao"in Er){var ln=Er.vao;return null!==ln&&null===ft.getVAO(ln)&&(ln=ft.createVAO(ln)),Cr=!0,Qr.vao=ln,Y(function(Zr){var Wr=ft.getVAO(ln);return Wr?Zr.link(Wr):"null"})}if("vao"in tn){Cr=!0;var yn=tn.vao;return W(yn,function(Zr,Wr){var pn=Zr.invoke(Wr,yn);return Wr.def(Zr.shared.vao+".getVAO("+pn+")")})}return null}(),Ir=!1,Sr=function(){if("elements"in Er){var ln=Er.elements;if(Qr.elements=ln,H(ln)){var yn=Qr.elements=Ie.create(ln,!0);ln=Ie.getElements(yn),Ir=!0}else ln&&(ln=Ie.getElements(ln),Ir=!0);return(yn=Y(function(Wr,pn){if(ln){var Mn=Wr.link(ln);return Wr.ELEMENTS=Mn}return Wr.ELEMENTS=null})).value=ln,yn}if("elements"in tn){Ir=!0;var Zr=tn.elements;return W(Zr,function(Wr,pn){var Mn=(Dn=Wr.shared).isBufferArgs,Dn=Dn.elements,hi=Wr.invoke(pn,Zr),Qn=pn.def("null");return Mn=pn.def(Mn,"(",hi,")"),hi=Wr.cond(Mn).then(Qn,"=",Dn,".createStream(",hi,");").else(Qn,"=",Dn,".getElements(",hi,");"),pn.entry(hi),pn.exit(Wr.cond(Mn).then(Dn,".destroyStream(",Qn,");")),Wr.ELEMENTS=Qn})}return Cr?new X(Mr.thisDep,Mr.contextDep,Mr.propDep,function(Wr,pn){return pn.def(Wr.shared.vao+".currentVAO?"+Wr.shared.elements+".getElements("+Wr.shared.vao+".currentVAO.elements):null")}):null}(),Pr=mr("offset",!0),Kr=function(){if("primitive"in Er){var ln=Er.primitive;return Qr.primitive=ln,Y(function(Zr,Wr){return Le[ln]})}if("primitive"in tn){var yn=tn.primitive;return W(yn,function(Zr,Wr){var pn=Zr.constants.primTypes,Mn=Zr.invoke(Wr,yn);return Wr.def(pn,"[",Mn,"]")})}return Ir?Z(Sr)?Y(Sr.value?function(Zr,Wr){return Wr.def(Zr.ELEMENTS,".primType")}:function(){return 4}):new X(Sr.thisDep,Sr.contextDep,Sr.propDep,function(Zr,Wr){var pn=Zr.ELEMENTS;return Wr.def(pn,"?",pn,".primType:",4)}):Cr?new X(Mr.thisDep,Mr.contextDep,Mr.propDep,function(Zr,Wr){return Wr.def(Zr.shared.vao+".currentVAO?"+Zr.shared.vao+".currentVAO.primitive:4")}):null}(),vn=function(){if("count"in Er){var ln=0|Er.count;return Qr.count=ln,Y(function(){return ln})}if("count"in tn){var yn=tn.count;return W(yn,function(Zr,Wr){return Zr.invoke(Wr,yn)})}return Ir?Z(Sr)?Sr?Pr?new X(Pr.thisDep,Pr.contextDep,Pr.propDep,function(Zr,Wr){return Wr.def(Zr.ELEMENTS,".vertCount-",Zr.OFFSET)}):Y(function(Zr,Wr){return Wr.def(Zr.ELEMENTS,".vertCount")}):Y(function(){return-1}):new X(Sr.thisDep||Pr.thisDep,Sr.contextDep||Pr.contextDep,Sr.propDep||Pr.propDep,function(Zr,Wr){var pn=Zr.ELEMENTS;return Zr.OFFSET?Wr.def(pn,"?",pn,".vertCount-",Zr.OFFSET,":-1"):Wr.def(pn,"?",pn,".vertCount:-1")}):Cr?new X(Mr.thisDep,Mr.contextDep,Mr.propDep,function(Zr,Wr){return Wr.def(Zr.shared.vao,".currentVAO?",Zr.shared.vao,".currentVAO.count:-1")}):null}(),Cn=mr("instances",!1);return{elements:Sr,primitive:Kr,count:vn,instances:Cn,offset:Pr,vao:Mr,vaoActive:Cr,elementsActive:Ir,static:Qr}}(zt),Sr=(Wr=(yn=zt).static,pn=yn.dynamic,Mn={},qr.forEach(function(Dn){function hi(An,ci){if(Dn in Wr){var yi=An(Wr[Dn]);Mn[Qn]=Y(function(){return yi})}else if(Dn in pn){var Xi=pn[Dn];Mn[Qn]=W(Xi,function(Da,la){return ci(Da,la,Da.invoke(la,Xi))})}}var Qn=yt(Dn);switch(Dn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return hi(function(An){return An},function(An,ci,yi){return yi});case"depth.func":return hi(function(An){return Xt[An]},function(An,ci,yi){return ci.def(An.constants.compareFuncs,"[",yi,"]")});case"depth.range":return hi(function(An){return An},function(An,ci,yi){return[ci.def("+",yi,"[0]"),ci=ci.def("+",yi,"[1]")]});case"blend.func":return hi(function(An){return[Et["srcRGB"in An?An.srcRGB:An.src],Et["dstRGB"in An?An.dstRGB:An.dst],Et["srcAlpha"in An?An.srcAlpha:An.src],Et["dstAlpha"in An?An.dstAlpha:An.dst]]},function(An,ci,yi){function Xi(Oi,Yi){return ci.def('"',Oi,Yi,'" in ',yi,"?",yi,".",Oi,Yi,":",yi,".",Oi)}An=An.constants.blendFuncs;var Da=Xi("src","RGB"),la=Xi("dst","RGB"),Ma=(Da=ci.def(An,"[",Da,"]"),ci.def(An,"[",Xi("src","Alpha"),"]"));return[Da,la=ci.def(An,"[",la,"]"),Ma,An=ci.def(An,"[",Xi("dst","Alpha"),"]")]});case"blend.equation":return hi(function(An){return"string"==typeof An?[In[An],In[An]]:"object"==typeof An?[In[An.rgb],In[An.alpha]]:void 0},function(An,ci,yi){var Xi=An.constants.blendEquations,Da=ci.def(),la=ci.def();return(An=An.cond("typeof ",yi,'==="string"')).then(Da,"=",la,"=",Xi,"[",yi,"];"),An.else(Da,"=",Xi,"[",yi,".rgb];",la,"=",Xi,"[",yi,".alpha];"),ci(An),[Da,la]});case"blend.color":return hi(function(An){return i(4,function(ci){return+An[ci]})},function(An,ci,yi){return i(4,function(Xi){return ci.def("+",yi,"[",Xi,"]")})});case"stencil.mask":return hi(function(An){return 0|An},function(An,ci,yi){return ci.def(yi,"|0")});case"stencil.func":return hi(function(An){return[Xt[An.cmp||"keep"],An.ref||0,"mask"in An?An.mask:-1]},function(An,ci,yi){return[An=ci.def('"cmp" in ',yi,"?",An.constants.compareFuncs,"[",yi,".cmp]",":",7680),ci.def(yi,".ref|0"),ci=ci.def('"mask" in ',yi,"?",yi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return hi(function(An){return["stencil.opBack"===Dn?1029:1028,nr[An.fail||"keep"],nr[An.zfail||"keep"],nr[An.zpass||"keep"]]},function(An,ci,yi){function Xi(la){return ci.def('"',la,'" in ',yi,"?",Da,"[",yi,".",la,"]:",7680)}var Da=An.constants.stencilOps;return["stencil.opBack"===Dn?1029:1028,Xi("fail"),Xi("zfail"),Xi("zpass")]});case"polygonOffset.offset":return hi(function(An){return[0|An.factor,0|An.units]},function(An,ci,yi){return[ci.def(yi,".factor|0"),ci=ci.def(yi,".units|0")]});case"cull.face":return hi(function(An){var ci=0;return"front"===An?ci=1028:"back"===An&&(ci=1029),ci},function(An,ci,yi){return ci.def(yi,'==="front"?',1028,":",1029)});case"lineWidth":return hi(function(An){return An},function(An,ci,yi){return yi});case"frontFace":return hi(function(An){return Ue[An]},function(An,ci,yi){return ci.def(yi+'==="cw"?2304:2305')});case"colorMask":return hi(function(An){return An.map(function(ci){return!!ci})},function(An,ci,yi){return i(4,function(Xi){return"!!"+yi+"["+Xi+"]"})});case"sample.coverage":return hi(function(An){return["value"in An?An.value:1,!!An.invert]},function(An,ci,yi){return[ci.def('"value" in ',yi,"?+",yi,".value:1"),ci=ci.def("!!",yi,".invert")]})}}),Mn),Pr=function(zt,Gt,mr){function Er(Sr){if(Sr in tn){var Pr=Qe.id(tn[Sr]);return(Sr=Y(function(){return Pr})).id=Pr,Sr}if(Sr in Qr){var Kr=Qr[Sr];return W(Kr,function(vn,Cn){var ln=vn.invoke(Cn,Kr);return Cn.def(vn.shared.strings,".id(",ln,")")})}return null}var tn=zt.static,Qr=zt.dynamic,Cr=Er("frag"),Mr=Er("vert"),Ir=null;return Z(Cr)&&Z(Mr)?(Ir=It.program(Mr.id,Cr.id,null,mr),zt=Y(function(Sr,Pr){return Sr.link(Ir)})):zt=new X(Cr&&Cr.thisDep||Mr&&Mr.thisDep,Cr&&Cr.contextDep||Mr&&Mr.contextDep,Cr&&Cr.propDep||Mr&&Mr.propDep,function(Sr,Pr){var Kr,vn,Cn=Sr.shared.shader;return Kr=Cr?Cr.append(Sr,Pr):Pr.def(Cn,".","frag"),vn=Mr?Mr.append(Sr,Pr):Pr.def(Cn,".","vert"),Pr.def(Cn+".program("+vn+","+Kr+")")}),{frag:Cr,vert:Mr,progVar:zt,program:Ir}}(zt,0,Cr);Qr("viewport"),Qr(yt("scissor.box"));var Kr,vn=0<Object.keys(Sr).length;if((Kr={framebuffer:Kr,draw:Ir,shader:Pr,state:Sr,dirty:vn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(yn){var Zr,Wr=yn.static;if(yn=yn.dynamic,"profile"in Wr){var pn=!!Wr.profile;(Zr=Y(function(Dn,hi){return pn})).enable=pn}else if("profile"in yn){var Mn=yn.profile;Zr=W(Mn,function(Dn,hi){return Dn.invoke(hi,Mn)})}return Zr}(zt),Kr.uniforms=function(yn,Zr){var Wr=yn.static,pn=yn.dynamic,Mn={};return Object.keys(Wr).forEach(function(Dn){var hi,Qn=Wr[Dn];if("number"==typeof Qn||"boolean"==typeof Qn)hi=Y(function(){return Qn});else if("function"==typeof Qn){var An=Qn._reglType;"texture2d"===An||"textureCube"===An?hi=Y(function(ci){return ci.link(Qn)}):"framebuffer"!==An&&"framebufferCube"!==An||(hi=Y(function(ci){return ci.link(Qn.color[0])}))}else f(Qn)&&(hi=Y(function(ci){return ci.global.def("[",i(Qn.length,function(yi){return Qn[yi]}),"]")}));hi.value=Qn,Mn[Dn]=hi}),Object.keys(pn).forEach(function(Dn){var hi=pn[Dn];Mn[Dn]=W(hi,function(Qn,An){return Qn.invoke(An,hi)})}),Mn}(mr),Kr.drawVAO=Kr.scopeVAO=Ir.vao,!Kr.drawVAO&&Pr.program&&!Cr&&Ae.angle_instanced_arrays&&Ir.static.elements){var Cn=!0;if(zt=Pr.program.attributes.map(function(yn){return yn=Gt.static[yn],Cn=Cn&&!!yn,yn}),Cn&&0<zt.length){var ln=ft.getVAO(ft.createVAO({attributes:zt,elements:Ir.static.elements}));Kr.drawVAO=new X(null,null,null,function(yn,Zr){return yn.link(ln)}),Kr.useVAO=!0}}return Cr?Kr.useVAO=!0:Kr.attributes=function(zt,Gt){var mr=zt.static,Er=zt.dynamic,tn={};return Object.keys(mr).forEach(function(Qr){var Cr=mr[Qr],Mr=Qe.id(Qr),Ir=new Nn;if(H(Cr))Ir.state=1,Ir.buffer=Oe.getBuffer(Oe.create(Cr,34962,!1,!0)),Ir.type=0;else if(Pr=Oe.getBuffer(Cr))Ir.state=1,Ir.buffer=Pr,Ir.type=0;else if("constant"in Cr){var Sr=Cr.constant;Ir.buffer="null",Ir.state=2,"number"==typeof Sr?Ir.x=Sr:ot.forEach(function(Zr,Wr){Wr<Sr.length&&(Ir[Zr]=Sr[Wr])})}else{var Pr=H(Cr.buffer)?Oe.getBuffer(Oe.create(Cr.buffer,34962,!1,!0)):Oe.getBuffer(Cr.buffer),Kr=0|Cr.offset,vn=0|Cr.stride,Cn=0|Cr.size,ln=!!Cr.normalized,yn=0;"type"in Cr&&(yn=ue[Cr.type]),Cr=0|Cr.divisor,Ir.buffer=Pr,Ir.state=1,Ir.size=Cn,Ir.normalized=ln,Ir.type=yn||Pr.dtype,Ir.offset=Kr,Ir.stride=vn,Ir.divisor=Cr}tn[Qr]=Y(function(Zr,Wr){var pn=Zr.attribCache;if(Mr in pn)return pn[Mr];var Mn={isStream:!1};return Object.keys(Ir).forEach(function(Dn){Mn[Dn]=Ir[Dn]}),Ir.buffer&&(Mn.buffer=Zr.link(Ir.buffer),Mn.type=Mn.type||Mn.buffer+".dtype"),pn[Mr]=Mn})}),Object.keys(Er).forEach(function(Qr){var Cr=Er[Qr];tn[Qr]=W(Cr,function(Mr,Ir){function Sr(pn){Ir(ln[pn],"=",Pr,".",pn,"|0;")}var Pr=Mr.invoke(Ir,Cr),Kr=Mr.shared,vn=Mr.constants,Cn=Kr.isBufferArgs,ln=(Kr=Kr.buffer,{isStream:Ir.def(!1)}),yn=new Nn;yn.state=1,Object.keys(yn).forEach(function(pn){ln[pn]=Ir.def(""+yn[pn])});var Zr=ln.buffer,Wr=ln.type;return Ir("if(",Cn,"(",Pr,")){",ln.isStream,"=true;",Zr,"=",Kr,".createStream(",34962,",",Pr,");",Wr,"=",Zr,".dtype;","}else{",Zr,"=",Kr,".getBuffer(",Pr,");","if(",Zr,"){",Wr,"=",Zr,".dtype;",'}else if("constant" in ',Pr,"){",ln.state,"=",2,";","if(typeof "+Pr+'.constant === "number"){',ln[ot[0]],"=",Pr,".constant;",ot.slice(1).map(function(pn){return ln[pn]}).join("="),"=0;","}else{",ot.map(function(pn,Mn){return ln[pn]+"="+Pr+".constant.length>"+Mn+"?"+Pr+".constant["+Mn+"]:0;"}).join(""),"}}else{","if(",Cn,"(",Pr,".buffer)){",Zr,"=",Kr,".createStream(",34962,",",Pr,".buffer);","}else{",Zr,"=",Kr,".getBuffer(",Pr,".buffer);","}",Wr,'="type" in ',Pr,"?",vn.glTypes,"[",Pr,".type]:",Zr,".dtype;",ln.normalized,"=!!",Pr,".normalized;"),Sr("size"),Sr("offset"),Sr("stride"),Sr("divisor"),Ir("}}"),Ir.exit("if(",ln.isStream,"){",Kr,".destroyStream(",Zr,");","}"),ln})}),tn}(Gt),Kr.context=function(yn){var Zr=yn.static,Wr=yn.dynamic,pn={};return Object.keys(Zr).forEach(function(Mn){var Dn=Zr[Mn];pn[Mn]=Y(function(hi,Qn){return"number"==typeof Dn||"boolean"==typeof Dn?""+Dn:hi.link(Dn)})}),Object.keys(Wr).forEach(function(Mn){var Dn=Wr[Mn];pn[Mn]=W(Dn,function(hi,Qn){return hi.invoke(Qn,Dn)})}),pn}(Er),Kr}function or(zt,Gt,mr){var Er=zt.shared.context,tn=zt.scope();Object.keys(mr).forEach(function(Qr){Gt.save(Er,"."+Qr);var Cr=mr[Qr].append(zt,Gt);Array.isArray(Cr)?tn(Er,".",Qr,"=[",Cr.join(),"];"):tn(Er,".",Qr,"=",Cr,";")}),Gt(tn)}function Wt(zt,Gt,mr,Er){var tn,Qr=(Mr=zt.shared).gl,Cr=Mr.framebuffer;jr&&(tn=Gt.def(Mr.extensions,".webgl_draw_buffers"));var Mr=(Ir=zt.constants).drawBuffer,Ir=Ir.backBuffer;zt=mr?mr.append(zt,Gt):Gt.def(Cr,".next"),Er||Gt("if(",zt,"!==",Cr,".cur){"),Gt("if(",zt,"){",Qr,".bindFramebuffer(",36160,",",zt,".framebuffer);"),jr&&Gt(tn,".drawBuffersWEBGL(",Mr,"[",zt,".colorAttachments.length]);"),Gt("}else{",Qr,".bindFramebuffer(",36160,",null);"),jr&&Gt(tn,".drawBuffersWEBGL(",Ir,");"),Gt("}",Cr,".cur=",zt,";"),Er||Gt("}")}function er(zt,Gt,mr){var Er=zt.shared,tn=Er.gl,Qr=zt.current,Cr=zt.next,Mr=Er.current,Ir=Er.next,Sr=zt.cond(Mr,".dirty");qr.forEach(function(Pr){var Kr,vn;if(!((Pr=yt(Pr))in mr.state))if(Pr in Cr){Kr=Cr[Pr],vn=Qr[Pr];var Cn=i(Xr[Pr].length,function(ln){return Sr.def(Kr,"[",ln,"]")});Sr(zt.cond(Cn.map(function(ln,yn){return ln+"!=="+vn+"["+yn+"]"}).join("||")).then(tn,".",Tn[Pr],"(",Cn,");",Cn.map(function(ln,yn){return vn+"["+yn+"]="+ln}).join(";"),";"))}else Kr=Sr.def(Ir,".",Pr),Cn=zt.cond(Kr,"!==",Mr,".",Pr),Sr(Cn),Pr in On?Cn(zt.cond(Kr).then(tn,".enable(",On[Pr],");").else(tn,".disable(",On[Pr],");"),Mr,".",Pr,"=",Kr,";"):Cn(tn,".",Tn[Pr],"(",Kr,");",Mr,".",Pr,"=",Kr,";")}),0===Object.keys(mr.state).length&&Sr(Mr,".dirty=false;"),Gt(Sr)}function cr(zt,Gt,mr,Er){var tn=zt.shared,Qr=zt.current,Cr=tn.current,Mr=tn.gl;U(Object.keys(mr)).forEach(function(Ir){var Sr=mr[Ir];if(!Er||Er(Sr)){var Pr=Sr.append(zt,Gt);if(On[Ir]){var Kr=On[Ir];Z(Sr)?Gt(Mr,Pr?".enable(":".disable(",Kr,");"):Gt(zt.cond(Pr).then(Mr,".enable(",Kr,");").else(Mr,".disable(",Kr,");")),Gt(Cr,".",Ir,"=",Pr,";")}else if(f(Pr)){var vn=Qr[Ir];Gt(Mr,".",Tn[Ir],"(",Pr,");",Pr.map(function(Cn,ln){return vn+"["+ln+"]="+Cn}).join(";"),";")}else Gt(Mr,".",Tn[Ir],"(",Pr,");",Cr,".",Ir,"=",Pr,";")}})}function _r(zt,Gt){cn&&(zt.instancing=Gt.def(zt.shared.extensions,".angle_instanced_arrays"))}function xr(zt,Gt,mr,Er,tn){function Qr(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Cr(yn){yn(Sr=Gt.def(),"=",Qr(),";"),"string"==typeof tn?yn(vn,".count+=",tn,";"):yn(vn,".count++;"),Rt&&(Er?yn(Pr=Gt.def(),"=",ln,".getNumPendingQueries();"):yn(ln,".beginQuery(",vn,");"))}function Mr(yn){yn(vn,".cpuTime+=",Qr(),"-",Sr,";"),Rt&&(Er?yn(ln,".pushScopeStats(",Pr,",",ln,".getNumPendingQueries(),",vn,");"):yn(ln,".endQuery();"))}function Ir(yn){var Zr=Gt.def(Cn,".profile");Gt(Cn,".profile=",yn,";"),Gt.exit(Cn,".profile=",Zr,";")}var Sr,Pr,Kr=zt.shared,vn=zt.stats,Cn=Kr.current,ln=Kr.timer;if(mr=mr.profile){if(Z(mr))return void(mr.enable?(Cr(Gt),Mr(Gt.exit),Ir("true")):Ir("false"));Ir(mr=mr.append(zt,Gt))}else mr=Gt.def(Cn,".profile");Cr(Kr=zt.block()),Gt("if(",mr,"){",Kr,"}"),Mr(zt=zt.block()),Gt.exit("if(",mr,"){",zt,"}")}function dr(zt,Gt,mr,Er,tn){var Cr=zt.shared;Er.forEach(function(Mr){var Ir,Sr=Mr.name,Pr=mr.attributes[Sr];if(Pr){if(!tn(Pr))return;Ir=Pr.append(zt,Gt)}else{if(!tn(We))return;var Kr=zt.scopeAttrib(Sr);Ir={},Object.keys(new Nn).forEach(function(vn){Ir[vn]=Gt.def(Kr,".",vn)})}!function(Mr,Ir,Sr){function Pr(){Gt("if(!",ln,".buffer){",vn,".enableVertexAttribArray(",Cn,");}");var pn,Mn=Sr.type;pn=Sr.size?Gt.def(Sr.size,"||",Ir):Ir,Gt("if(",ln,".type!==",Mn,"||",ln,".size!==",pn,"||",Wr.map(function(Dn){return ln+"."+Dn+"!=="+Sr[Dn]}).join("||"),"){",vn,".bindBuffer(",34962,",",yn,".buffer);",vn,".vertexAttribPointer(",[Cn,pn,Mn,Sr.normalized,Sr.stride,Sr.offset],");",ln,".type=",Mn,";",ln,".size=",pn,";",Wr.map(function(Dn){return ln+"."+Dn+"="+Sr[Dn]+";"}).join(""),"}"),cn&&Gt("if(",ln,".divisor!==",Mn=Sr.divisor,"){",zt.instancing,".vertexAttribDivisorANGLE(",[Cn,Mn],");",ln,".divisor=",Mn,";}")}function Kr(){Gt("if(",ln,".buffer){",vn,".disableVertexAttribArray(",Cn,");",ln,".buffer=null;","}if(",ot.map(function(pn,Mn){return ln+"."+pn+"!=="+Zr[Mn]}).join("||"),"){",vn,".vertexAttrib4f(",Cn,",",Zr,");",ot.map(function(pn,Mn){return ln+"."+pn+"="+Zr[Mn]+";"}).join(""),"}")}var vn=Cr.gl,Cn=Gt.def(Mr,".location"),ln=Gt.def(Cr.attributes,"[",Cn,"]"),yn=Sr.buffer,Zr=[Sr.x,Sr.y,Sr.z,Sr.w],Wr=["buffer","normalized","offset","stride"];1===(Mr=Sr.state)?Pr():2===Mr?Kr():(Gt("if(",Mr,"===",1,"){"),Pr(),Gt("}else{"),Kr(),Gt("}"))}(zt.link(Mr),function(vn){switch(vn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Mr.info.type),Ir)})}function pr(zt,Gt,mr,Er,tn,Qr){for(var Cr,Mr=zt.shared,Ir=Mr.gl,Sr={},Pr=0;Pr<Er.length;++Pr){var Kr=(Wr=Er[Pr]).name,vn=Wr.info.type,Cn=Wr.info.size,ln=mr.uniforms[Kr];if(1<Cn){if(!ln)continue;var yn=Kr.replace("[0]","");if(Sr[yn])continue;Sr[yn]=1}var Zr,Wr=zt.link(Wr)+".location";if(ln){if(!tn(ln))continue;if(Z(ln)){if(Kr=ln.value,35678===vn||35680===vn)Gt(Ir,".uniform1i(",Wr,",",(vn=zt.link(Kr._texture||Kr.color[0]._texture))+".bind());"),Gt.exit(vn,".unbind();");else if(35674===vn||35675===vn||35676===vn)Cn=zt.global.def("new Float32Array(["+Array.prototype.slice.call(Kr)+"])"),Kr=2,35675===vn?Kr=3:35676===vn&&(Kr=4),Gt(Ir,".uniformMatrix",Kr,"fv(",Wr,",false,",Cn,");");else{switch(vn){case 5126:Cr="1f";break;case 35664:Cr="2f";break;case 35665:Cr="3f";break;case 35666:Cr="4f";break;case 35670:case 5124:Cr="1i";break;case 35671:case 35667:Cr="2i";break;case 35672:case 35668:Cr="3i";break;case 35673:Cr="4i";break;case 35669:Cr="4i"}1<Cn?(Cr+="v",Kr=zt.global.def("["+Array.prototype.slice.call(Kr)+"]")):Kr=f(Kr)?Array.prototype.slice.call(Kr):Kr,Gt(Ir,".uniform",Cr,"(",Wr,",",Kr,");")}continue}Zr=ln.append(zt,Gt)}else{if(!tn(We))continue;Zr=Gt.def(Mr.uniforms,"[",Qe.id(Kr),"]")}switch(35678===vn?Gt("if(",Zr,"&&",Zr,'._reglType==="framebuffer"){',Zr,"=",Zr,".color[0];","}"):35680===vn&&Gt("if(",Zr,"&&",Zr,'._reglType==="framebufferCube"){',Zr,"=",Zr,".color[0];","}"),Kr=1,vn){case 35678:case 35680:vn=Gt.def(Zr,"._texture"),Gt(Ir,".uniform1i(",Wr,",",vn,".bind());"),Gt.exit(vn,".unbind();");continue;case 5124:case 35670:Cr="1i";break;case 35667:case 35671:Cr="2i",Kr=2;break;case 35668:case 35672:Cr="3i",Kr=3;break;case 35669:case 35673:Cr="4i",Kr=4;break;case 5126:Cr="1f";break;case 35664:Cr="2f",Kr=2;break;case 35665:Cr="3f",Kr=3;break;case 35666:Cr="4f",Kr=4;break;case 35674:Cr="Matrix2fv";break;case 35675:Cr="Matrix3fv";break;case 35676:Cr="Matrix4fv"}if(-1===Cr.indexOf("Matrix")&&1<Cn&&(Cr+="v",Kr=1),"M"===Cr.charAt(0)){Gt(Ir,".uniform",Cr,"(",Wr,","),Wr=Math.pow(vn-35674+2,2);var pn=zt.global.def("new Float32Array(",Wr,")");Array.isArray(Zr)?Gt("false,(",i(Wr,function(Dn){return pn+"["+Dn+"]="+Zr[Dn]}),",",pn,")"):Gt("false,(Array.isArray(",Zr,")||",Zr," instanceof Float32Array)?",Zr,":(",i(Wr,function(Dn){return pn+"["+Dn+"]="+Zr+"["+Dn+"]"}),",",pn,")"),Gt(");")}else{if(1<Kr){vn=[];var Mn=[];for(Cn=0;Cn<Kr;++Cn)Array.isArray(Zr)?Mn.push(Zr[Cn]):Mn.push(Gt.def(Zr+"["+Cn+"]")),Qr&&vn.push(Gt.def());Qr&&Gt("if(!",zt.batchId,"||",vn.map(function(Dn,hi){return Dn+"!=="+Mn[hi]}).join("||"),"){",vn.map(function(Dn,hi){return Dn+"="+Mn[hi]+";"}).join("")),Gt(Ir,".uniform",Cr,"(",Wr,",",Mn.join(","),");")}else Qr&&(vn=Gt.def(),Gt("if(!",zt.batchId,"||",vn,"!==",Zr,"){",vn,"=",Zr,";")),Gt(Ir,".uniform",Cr,"(",Wr,",",Zr,");");Qr&&Gt("}")}}}function br(zt,Gt,mr,Er){function tn(Mn){var Dn=vn[Mn];return Dn?Dn.append(zt,Dn.contextDep&&Er.contextDynamic||Dn.propDep?mr:Gt):Gt.def(Kr,".",Mn)}function Qr(){function Mn(){mr(Ir,".drawElementsInstancedANGLE(",[ln,Zr,Wr,yn+"<<(("+Wr+"-5121)>>1)",Mr],");")}function Dn(){mr(Ir,".drawArraysInstancedANGLE(",[ln,yn,Zr,Mr],");")}Cn&&"null"!==Cn?pn?Mn():(mr("if(",Cn,"){"),Mn(),mr("}else{"),Dn(),mr("}")):Dn()}function Cr(){function Mn(){mr(Pr+".drawElements("+[ln,Zr,Wr,yn+"<<(("+Wr+"-5121)>>1)"]+");")}function Dn(){mr(Pr+".drawArrays("+[ln,yn,Zr]+");")}Cn&&"null"!==Cn?pn?Mn():(mr("if(",Cn,"){"),Mn(),mr("}else{"),Dn(),mr("}")):Dn()}var Mr,Ir,Mn,Dn,Sr=zt.shared,Pr=Sr.gl,Kr=Sr.draw,vn=Er.draw,Cn=(Dn=Gt,(Mn=vn.elements)?((Mn.contextDep&&Er.contextDynamic||Mn.propDep)&&(Dn=mr),Mn=Mn.append(zt,Dn),vn.elementsActive&&Dn("if("+Mn+")"+Pr+".bindBuffer(34963,"+Mn+".buffer.buffer);")):(Mn=Dn.def(),Dn(Mn,"=",Kr,".","elements",";","if(",Mn,"){",Pr,".bindBuffer(",34963,",",Mn,".buffer.buffer);}","else if(",Sr.vao,".currentVAO){",Mn,"=",zt.shared.elements+".getElements("+Sr.vao,".currentVAO.elements);",Lr?"":"if("+Mn+")"+Pr+".bindBuffer(34963,"+Mn+".buffer.buffer);","}")),Mn),ln=tn("primitive"),yn=tn("offset"),Zr=function(){var Mn=vn.count,Dn=Gt;return Mn?((Mn.contextDep&&Er.contextDynamic||Mn.propDep)&&(Dn=mr),Mn=Mn.append(zt,Dn)):Mn=Dn.def(Kr,".","count"),Mn}();if("number"==typeof Zr){if(0===Zr)return}else mr("if(",Zr,"){"),mr.exit("}");cn&&(Mr=tn("instances"),Ir=zt.instancing);var Wr=Cn+".type",pn=vn.elements&&Z(vn.elements)&&!vn.vaoActive;cn&&("number"!=typeof Mr||0<=Mr)?"string"==typeof Mr?(mr("if(",Mr,">0){"),Qr(),mr("}else if(",Mr,"<0){"),Cr(),mr("}")):Qr():Cr()}function Nr(zt,Gt,mr,Er,tn){return tn=(Gt=Qt()).proc("body",tn),cn&&(Gt.instancing=tn.def(Gt.shared.extensions,".angle_instanced_arrays")),zt(Gt,tn,mr,Er),Gt.compile().body}function kr(zt,Gt,mr,Er){_r(zt,Gt),mr.useVAO?mr.drawVAO?Gt(zt.shared.vao,".setVAO(",mr.drawVAO.append(zt,Gt),");"):Gt(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(Gt(zt.shared.vao,".setVAO(null);"),dr(zt,Gt,mr,Er.attributes,function(){return!0})),pr(zt,Gt,mr,Er.uniforms,function(){return!0},!1),br(zt,Gt,Gt,mr)}function Hr(zt,Gt,mr,Er){function tn(){return!0}zt.batchId="a1",_r(zt,Gt),dr(zt,Gt,mr,Er.attributes,tn),pr(zt,Gt,mr,Er.uniforms,tn,!1),br(zt,Gt,Gt,mr)}function an(zt,Gt,mr,Er){function tn(Kr){return Kr.contextDep&&Cr||Kr.propDep}function Qr(Kr){return!tn(Kr)}_r(zt,Gt);var Cr=mr.contextDep,Mr=Gt.def(),Ir=Gt.def();zt.shared.props=Ir,zt.batchId=Mr;var Sr=zt.scope(),Pr=zt.scope();Gt(Sr.entry,"for(",Mr,"=0;",Mr,"<","a1",";++",Mr,"){",Ir,"=","a0","[",Mr,"];",Pr,"}",Sr.exit),mr.needsContext&&or(zt,Pr,mr.context),mr.needsFramebuffer&&Wt(zt,Pr,mr.framebuffer),cr(zt,Pr,mr.state,tn),mr.profile&&tn(mr.profile)&&xr(zt,Pr,mr,!1,!0),Er?(mr.useVAO?mr.drawVAO?tn(mr.drawVAO)?Pr(zt.shared.vao,".setVAO(",mr.drawVAO.append(zt,Pr),");"):Sr(zt.shared.vao,".setVAO(",mr.drawVAO.append(zt,Sr),");"):Sr(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(Sr(zt.shared.vao,".setVAO(null);"),dr(zt,Sr,mr,Er.attributes,Qr),dr(zt,Pr,mr,Er.attributes,tn)),pr(zt,Sr,mr,Er.uniforms,Qr,!1),pr(zt,Pr,mr,Er.uniforms,tn,!0),br(zt,Sr,Pr,mr)):(Gt=zt.global.def("{}"),Er=mr.shader.progVar.append(zt,Pr),Ir=Pr.def(Er,".id"),Sr=Pr.def(Gt,"[",Ir,"]"),Pr(zt.shared.gl,".useProgram(",Er,".program);","if(!",Sr,"){",Sr,"=",Gt,"[",Ir,"]=",zt.link(function(Kr){return Nr(Hr,zt,mr,Kr,2)}),"(",Er,");}",Sr,".call(this,a0[",Mr,"],",Mr,");"))}function zn(zt,Gt,mr){var Er=Gt.static[mr];if(Er&&function(Pr){if("object"==typeof Pr&&!f(Pr)){for(var Kr=Object.keys(Pr),vn=0;vn<Kr.length;++vn)if(Q.isDynamic(Pr[Kr[vn]]))return!0;return!1}}(Er)){var tn=zt.global,Qr=Object.keys(Er),Cr=!1,Mr=!1,Ir=!1,Sr=zt.global.def("{}");Qr.forEach(function(Pr){var Kr=Er[Pr];if(Q.isDynamic(Kr))"function"==typeof Kr&&(Kr=Er[Pr]=Q.unbox(Kr)),Pr=W(Kr,null),Cr=Cr||Pr.thisDep,Ir=Ir||Pr.propDep,Mr=Mr||Pr.contextDep;else{switch(tn(Sr,".",Pr,"="),typeof Kr){case"number":tn(Kr);break;case"string":tn('"',Kr,'"');break;case"object":Array.isArray(Kr)&&tn("[",Kr.join(),"]");break;default:tn(zt.link(Kr))}tn(";")}}),Gt.dynamic[mr]=new Q.DynamicVariable(4,{thisDep:Cr,contextDep:Mr,propDep:Ir,ref:Sr,append:function(Pr,Kr){Qr.forEach(function(vn){var Cn=Er[vn];Q.isDynamic(Cn)&&(Cn=Pr.invoke(Kr,Cn),Kr(Sr,".",vn,"=",Cn,";"))})}}),delete Gt.static[mr]}}var Nn=ft.Record,In={add:32774,subtract:32778,"reverse subtract":32779};Ae.ext_blend_minmax&&(In.min=32775,In.max=32776);var cn=Ae.angle_instanced_arrays,jr=Ae.webgl_draw_buffers,Lr=Ae.oes_vertex_array_object,Xr={dirty:!0,profile:$e.profile},Un={},qr=[],On={},Tn={};Bt("dither",3024),Bt("blend.enable",3042),Ut("blend.color","blendColor",[0,0,0,0]),Ut("blend.equation","blendEquationSeparate",[32774,32774]),Ut("blend.func","blendFuncSeparate",[1,0,1,0]),Bt("depth.enable",2929,!0),Ut("depth.func","depthFunc",513),Ut("depth.range","depthRange",[0,1]),Ut("depth.mask","depthMask",!0),Ut("colorMask","colorMask",[!0,!0,!0,!0]),Bt("cull.enable",2884),Ut("cull.face","cullFace",1029),Ut("frontFace","frontFace",2305),Ut("lineWidth","lineWidth",1),Bt("polygonOffset.enable",32823),Ut("polygonOffset.offset","polygonOffset",[0,0]),Bt("sample.alpha",32926),Bt("sample.enable",32928),Ut("sample.coverage","sampleCoverage",[1,!1]),Bt("stencil.enable",2960),Ut("stencil.mask","stencilMask",-1),Ut("stencil.func","stencilFunc",[519,0,-1]),Ut("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ut("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Bt("scissor.enable",3089),Ut("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Ut("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var rn={gl:Be,context:Ot,strings:Qe,next:Un,current:Xr,draw:ut,elements:Ie,buffer:Oe,shader:It,attributes:ft.state,vao:ft,uniforms:vt,framebuffer:ct,extensions:Ae,timer:Rt,isBufferArgs:H},Vn={primTypes:Le,compareFuncs:Xt,blendFuncs:Et,blendEquations:In,stencilOps:nr,glTypes:ue,orientationType:Ue};jr&&(Vn.backBuffer=[1029],Vn.drawBuffer=i(De.maxDrawbuffers,function(zt){return 0===zt?[0]:i(zt,function(Gt){return 36064+Gt})}));var ar=0;return{next:Un,current:Xr,procs:function(){var zt=Qt(),Gt=zt.proc("poll"),mr=zt.proc("refresh"),Er=zt.block();Gt(Er),mr(Er);var tn,Qr=zt.shared,Cr=Qr.gl,Mr=Qr.next,Ir=Qr.current;Er(Ir,".dirty=false;"),Wt(zt,Gt),Wt(zt,mr,null,!0),cn&&(tn=zt.link(cn)),Ae.oes_vertex_array_object&&mr(zt.link(Ae.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Sr=0;Sr<De.maxAttributes;++Sr){var Pr=mr.def(Qr.attributes,"[",Sr,"]"),Kr=zt.cond(Pr,".buffer");Kr.then(Cr,".enableVertexAttribArray(",Sr,");",Cr,".bindBuffer(",34962,",",Pr,".buffer.buffer);",Cr,".vertexAttribPointer(",Sr,",",Pr,".size,",Pr,".type,",Pr,".normalized,",Pr,".stride,",Pr,".offset);").else(Cr,".disableVertexAttribArray(",Sr,");",Cr,".vertexAttrib4f(",Sr,",",Pr,".x,",Pr,".y,",Pr,".z,",Pr,".w);",Pr,".buffer=null;"),mr(Kr),cn&&mr(tn,".vertexAttribDivisorANGLE(",Sr,",",Pr,".divisor);")}return mr(zt.shared.vao,".currentVAO=null;",zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"),Object.keys(On).forEach(function(vn){var Cn=On[vn],ln=Er.def(Mr,".",vn),yn=zt.block();yn("if(",ln,"){",Cr,".enable(",Cn,")}else{",Cr,".disable(",Cn,")}",Ir,".",vn,"=",ln,";"),mr(yn),Gt("if(",ln,"!==",Ir,".",vn,"){",yn,"}")}),Object.keys(Tn).forEach(function(vn){var Cn,ln,yn=Tn[vn],Zr=Xr[vn],Wr=zt.block();Wr(Cr,".",yn,"("),f(Zr)?(yn=Zr.length,Cn=zt.global.def(Mr,".",vn),ln=zt.global.def(Ir,".",vn),Wr(i(yn,function(pn){return Cn+"["+pn+"]"}),");",i(yn,function(pn){return ln+"["+pn+"]="+Cn+"["+pn+"];"}).join("")),Gt("if(",i(yn,function(pn){return Cn+"["+pn+"]!=="+ln+"["+pn+"]"}).join("||"),"){",Wr,"}")):(Cn=Er.def(Mr,".",vn),ln=Er.def(Ir,".",vn),Wr(Cn,");",Ir,".",vn,"=",Cn,";"),Gt("if(",Cn,"!==",ln,"){",Wr,"}")),mr(Wr)}),zt.compile()}(),compile:function(zt,Gt,mr,Er,tn){var Qr=Qt();Qr.stats=Qr.link(tn),Object.keys(Gt.static).forEach(function(Mr){zn(Qr,Gt,Mr)}),it.forEach(function(Mr){zn(Qr,zt,Mr)});var Cr=Zt(zt,Gt,mr,Er);return function(Mr,Ir){var Sr=Mr.proc("draw",1);_r(Mr,Sr),or(Mr,Sr,Ir.context),Wt(Mr,Sr,Ir.framebuffer),er(Mr,Sr,Ir),cr(Mr,Sr,Ir.state),xr(Mr,Sr,Ir,!1,!0);var Pr=Ir.shader.progVar.append(Mr,Sr);if(Sr(Mr.shared.gl,".useProgram(",Pr,".program);"),Ir.shader.program)kr(Mr,Sr,Ir,Ir.shader.program);else{Sr(Mr.shared.vao,".setVAO(null);");var Kr=Mr.global.def("{}"),vn=Sr.def(Pr,".id"),Cn=Sr.def(Kr,"[",vn,"]");Sr(Mr.cond(Cn).then(Cn,".call(this,a0);").else(Cn,"=",Kr,"[",vn,"]=",Mr.link(function(ln){return Nr(kr,Mr,Ir,ln,1)}),"(",Pr,");",Cn,".call(this,a0);"))}0<Object.keys(Ir.state).length&&Sr(Mr.shared.current,".dirty=true;"),Mr.shared.vao&&Sr(Mr.shared.vao,".setVAO(null);")}(Qr,Cr),function(zt,Gt){function mr(Cr){var Mr=Gt.shader[Cr];Mr&&Er.set(tn.shader,"."+Cr,Mr.append(zt,Er))}var Er=zt.proc("scope",3);zt.batchId="a2";var tn=zt.shared,Qr=tn.current;or(zt,Er,Gt.context),Gt.framebuffer&&Gt.framebuffer.append(zt,Er),U(Object.keys(Gt.state)).forEach(function(Cr){var Mr=Gt.state[Cr].append(zt,Er);f(Mr)?Mr.forEach(function(Ir,Sr){Er.set(zt.next[Cr],"["+Sr+"]",Ir)}):Er.set(tn.next,"."+Cr,Mr)}),xr(zt,Er,Gt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Cr){var Mr=Gt.draw[Cr];Mr&&Er.set(tn.draw,"."+Cr,""+Mr.append(zt,Er))}),Object.keys(Gt.uniforms).forEach(function(Cr){var Mr=Gt.uniforms[Cr].append(zt,Er);Array.isArray(Mr)&&(Mr="["+Mr.join()+"]"),Er.set(tn.uniforms,"["+Qe.id(Cr)+"]",Mr)}),Object.keys(Gt.attributes).forEach(function(Cr){var Mr=Gt.attributes[Cr].append(zt,Er),Ir=zt.scopeAttrib(Cr);Object.keys(new Nn).forEach(function(Sr){Er.set(Ir,"."+Sr,Mr[Sr])})}),Gt.scopeVAO&&Er.set(tn.vao,".targetVAO",Gt.scopeVAO.append(zt,Er)),mr("vert"),mr("frag"),0<Object.keys(Gt.state).length&&(Er(Qr,".dirty=true;"),Er.exit(Qr,".dirty=true;")),Er("a1(",zt.shared.context,",a0,",zt.batchId,");")}(Qr,Cr),function(Mr,Ir){function Sr(Zr){return Zr.contextDep&&Kr||Zr.propDep}var Pr=Mr.proc("batch",2);Mr.batchId="0",_r(Mr,Pr);var Kr=!1,vn=!0;Object.keys(Ir.context).forEach(function(Zr){Kr=Kr||Ir.context[Zr].propDep}),Kr||(or(Mr,Pr,Ir.context),vn=!1);var Cn=!1;if((ln=Ir.framebuffer)?(ln.propDep?Kr=Cn=!0:ln.contextDep&&Kr&&(Cn=!0),Cn||Wt(Mr,Pr,ln)):Wt(Mr,Pr,null),Ir.state.viewport&&Ir.state.viewport.propDep&&(Kr=!0),er(Mr,Pr,Ir),cr(Mr,Pr,Ir.state,function(Zr){return!Sr(Zr)}),Ir.profile&&Sr(Ir.profile)||xr(Mr,Pr,Ir,!1,"a1"),Ir.contextDep=Kr,Ir.needsContext=vn,Ir.needsFramebuffer=Cn,(vn=Ir.shader.progVar).contextDep&&Kr||vn.propDep)an(Mr,Pr,Ir,null);else if(vn=vn.append(Mr,Pr),Pr(Mr.shared.gl,".useProgram(",vn,".program);"),Ir.shader.program)an(Mr,Pr,Ir,Ir.shader.program);else{Pr(Mr.shared.vao,".setVAO(null);");var ln=Mr.global.def("{}"),yn=(Cn=Pr.def(vn,".id"),Pr.def(ln,"[",Cn,"]"));Pr(Mr.cond(yn).then(yn,".call(this,a0,a1);").else(yn,"=",ln,"[",Cn,"]=",Mr.link(function(Zr){return Nr(an,Mr,Ir,Zr,2)}),"(",vn,");",yn,".call(this,a0,a1);"))}0<Object.keys(Ir.state).length&&Pr(Mr.shared.current,".dirty=true;"),Mr.shared.vao&&Pr(Mr.shared.vao,".setVAO(null);")}(Qr,Cr),N(Qr.compile(),{destroy:function(){Cr.shader.program.destroy()}})}}}function z(Be,Qe){for(var Ae=0;Ae<Be.length;++Ae)if(Be[Ae]===Qe)return Ae;return-1}var N=function(Be,Qe){for(var Ae=Object.keys(Qe),De=0;De<Ae.length;++De)Be[Ae[De]]=Qe[Ae[De]];return Be},V=0,Q={DynamicVariable:d,define:function(Be,Qe){return new d(Be,g(Qe+""))},isDynamic:function(Be){return"function"==typeof Be&&!Be._reglType||Be instanceof d},unbox:function Be(Qe,Ae){return"function"==typeof Qe?new d(0,Qe):"number"==typeof Qe||"boolean"==typeof Qe?new d(5,Qe):Array.isArray(Qe)?new d(6,Qe.map(function(De,Oe){return Be(De,Ae+"["+Oe+"]")})):Qe instanceof d?Qe:void 0},accessor:g},j={next:"function"==typeof requestAnimationFrame?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:"function"==typeof cancelAnimationFrame?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},J="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},K=o();K.zero=o();var ie=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},ce=function(Be){return Object.keys(Be).map(function(Qe){return Be[Qe]})},se={shape:function(Be){for(var Qe=[];Be.length;Be=Be[0])Qe.push(Be.length);return Qe},flatten:function(Be,Qe,Ae,De){var Oe=1;if(Qe.length)for(var Ie=0;Ie<Qe.length;++Ie)Oe*=Qe[Ie];else Oe=0;switch(Ae=De||K.allocType(Ae,Oe),Qe.length){case 0:break;case 1:for(De=Qe[0],Qe=0;Qe<De;++Qe)Ae[Qe]=Be[Qe];break;case 2:for(De=Qe[0],Qe=Qe[1],Ie=Oe=0;Ie<De;++Ie)for(var et=Be[Ie],ct=0;ct<Qe;++ct)Ae[Oe++]=et[ct];break;case 3:p(Be,Qe[0],Qe[1],Qe[2],Ae,0);break;default:!function vt(ft,It,ut,Ot,Rt){for(var $e=1,yt=ut+1;yt<It.length;++yt)$e*=It[yt];var Bt=It[ut];if(It.length-ut==4){var Ut=It[ut+1],Qt=It[ut+2];for(It=It[ut+3],yt=0;yt<Bt;++yt)p(ft[yt],Ut,Qt,It,Ot,Rt),Rt+=$e}else for(yt=0;yt<Bt;++yt)vt(ft[yt],It,ut+1,Ot,Rt),Rt+=$e}(Be,Qe,0,Ae,0)}return Ae}},de={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ue={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ge={dynamic:35048,stream:35040,static:35044},be=se.flatten,Te=se.shape,we=[];we[5120]=1,we[5122]=2,we[5124]=4,we[5121]=1,we[5123]=2,we[5125]=4,we[5126]=4;var Le={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fe=new Float32Array(1),ve=new Uint32Array(fe.buffer),Me=[9984,9986,9985,9987],ke=[0,6409,6410,6407,6408],Ce={};Ce[6409]=Ce[6406]=Ce[6402]=1,Ce[34041]=Ce[6410]=2,Ce[6407]=Ce[35904]=3,Ce[6408]=Ce[35906]=4;var Pe=l("HTMLCanvasElement"),Fe=l("OffscreenCanvas"),qe=l("CanvasRenderingContext2D"),rt=l("ImageBitmap"),ze=l("HTMLImageElement"),He=l("HTMLVideoElement"),Xe=Object.keys(de).concat([Pe,Fe,qe,rt,ze,He]),Je=[];Je[5121]=1,Je[5126]=4,Je[36193]=2,Je[5123]=2,Je[5125]=4;var at=[];at[32854]=2,at[32855]=2,at[36194]=2,at[34041]=4,at[33776]=.5,at[33777]=.5,at[33778]=1,at[33779]=1,at[35986]=.5,at[35987]=1,at[34798]=1,at[35840]=.5,at[35841]=.25,at[35842]=.5,at[35843]=.25,at[36196]=.5;var pt=[];pt[32854]=2,pt[32855]=2,pt[36194]=2,pt[33189]=2,pt[36168]=1,pt[34041]=4,pt[35907]=4,pt[34836]=16,pt[34842]=8,pt[34843]=6;var Ft=[];Ft[6408]=4,Ft[6407]=3;var Dt=[];Dt[5121]=1,Dt[5126]=4,Dt[36193]=2;var ot=["x","y","z","w"],it="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Et={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Xt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},nr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ue={cw:2304,ccw:2305},We=new X(!1,!1,!1,function(){});return function(Be){function Qe(){if(0===Hr.length)Re&&Re.update(),Nn=null;else{Nn=j.next(Qe),It();for(var cn=Hr.length-1;0<=cn;--cn){var jr=Hr[cn];jr&&jr(Zt,null,0)}Rt.flush(),Re&&Re.update()}}function Ae(){!Nn&&0<Hr.length&&(Nn=j.next(Qe))}function De(){Nn&&(j.cancel(Qe),Nn=null)}function Oe(cn){cn.preventDefault(),De(),an.forEach(function(jr){jr()})}function Ie(cn){Rt.getError(),yt.restore(),_r.restore(),Wt.restore(),xr.restore(),dr.restore(),pr.restore(),cr.restore(),Re&&Re.restore(),br.procs.refresh(),Ae(),fn.forEach(function(jr){jr()})}function et(cn){function jr(zt,Gt){var mr={},Er={};return Object.keys(zt).forEach(function(tn){var Qr=zt[tn];if(Q.isDynamic(Qr))Er[tn]=Q.unbox(Qr,tn);else{if(Gt&&Array.isArray(Qr))for(var Cr=0;Cr<Qr.length;++Cr)if(Q.isDynamic(Qr[Cr]))return void(Er[tn]=Q.unbox(Qr,tn));mr[tn]=Qr}}),{dynamic:Er,static:mr}}var Lr=jr(cn.context||{},!0),Xr=jr(cn.uniforms||{},!0),Un=jr(cn.attributes||{},!1);cn=jr(function(zt){function Gt(Er){if(Er in mr){var tn=mr[Er];delete mr[Er],Object.keys(tn).forEach(function(Qr){mr[Er+"."+Qr]=tn[Qr]})}}var mr=N({},zt);return delete mr.uniforms,delete mr.attributes,delete mr.context,delete mr.vao,"stencil"in mr&&mr.stencil.op&&(mr.stencil.opBack=mr.stencil.opFront=mr.stencil.op,delete mr.stencil.op),Gt("blend"),Gt("depth"),Gt("cull"),Gt("stencil"),Gt("polygonOffset"),Gt("scissor"),Gt("sample"),"vao"in zt&&(mr.vao=zt.vao),mr}(cn),!1);var qr={gpuTime:0,cpuTime:0,count:0},On=br.compile(cn,Un,Xr,Lr,qr),Tn=On.draw,rn=On.batch,Vn=On.scope,ar=[];return N(function(zt,Gt){var mr;if("function"==typeof zt)return Vn.call(this,null,zt,0);if("function"==typeof Gt)if("number"==typeof zt)for(mr=0;mr<zt;++mr)Vn.call(this,null,Gt,mr);else{if(!Array.isArray(zt))return Vn.call(this,zt,Gt,0);for(mr=0;mr<zt.length;++mr)Vn.call(this,zt[mr],Gt,mr)}else if("number"==typeof zt){if(0<zt)return rn.call(this,function(Er){for(;ar.length<Er;)ar.push(null);return ar}(0|zt),0|zt)}else{if(!Array.isArray(zt))return Tn.call(this,zt);if(zt.length)return rn.call(this,zt,zt.length)}},{stats:qr,destroy:function(){On.destroy()}})}function ct(cn,jr){var Lr=0;br.procs.poll();var Xr=jr.color;Xr&&(Rt.clearColor(+Xr[0]||0,+Xr[1]||0,+Xr[2]||0,+Xr[3]||0),Lr|=16384),"depth"in jr&&(Rt.clearDepth(+jr.depth),Lr|=256),"stencil"in jr&&(Rt.clearStencil(0|jr.stencil),Lr|=1024),Rt.clear(Lr)}function vt(cn){return Hr.push(cn),Ae(),{cancel:function(){var jr=z(Hr,cn);Hr[jr]=function Lr(){var Xr=z(Hr,Lr);Hr[Xr]=Hr[Hr.length-1],--Hr.length,0>=Hr.length&&De()}}}}function ft(){var cn=Nr.viewport,jr=Nr.scissor_box;cn[0]=cn[1]=jr[0]=jr[1]=0,Zt.viewportWidth=Zt.framebufferWidth=Zt.drawingBufferWidth=cn[2]=jr[2]=Rt.drawingBufferWidth,Zt.viewportHeight=Zt.framebufferHeight=Zt.drawingBufferHeight=cn[3]=jr[3]=Rt.drawingBufferHeight}function It(){Zt.tick+=1,Zt.time=Ot(),ft(),br.procs.poll()}function ut(){xr.refresh(),ft(),br.procs.refresh(),Re&&Re.update()}function Ot(){return(J()-ht)/1e3}if(!(Be=function(Be){var Qe,Ae,De,Oe,Ie=Be||{};Be={};var et=[],ct=[],vt="undefined"==typeof window?1:window.devicePixelRatio,ft=!1,It=function(Ot){},ut=function(){};if("string"==typeof Ie?Qe=document.querySelector(Ie):"object"==typeof Ie&&("string"==typeof Ie.nodeName&&"function"==typeof Ie.appendChild&&"function"==typeof Ie.getBoundingClientRect?Qe=Ie:"function"==typeof Ie.drawArrays||"function"==typeof Ie.drawElements?De=(Oe=Ie).canvas:("gl"in Ie?Oe=Ie.gl:"canvas"in Ie?De=t(Ie.canvas):"container"in Ie&&(Ae=t(Ie.container)),"attributes"in Ie&&(Be=Ie.attributes),"extensions"in Ie&&(et=_(Ie.extensions)),"optionalExtensions"in Ie&&(ct=_(Ie.optionalExtensions)),"onDone"in Ie&&(It=Ie.onDone),"profile"in Ie&&(ft=!!Ie.profile),"pixelRatio"in Ie&&(vt=+Ie.pixelRatio))),Qe&&("canvas"===Qe.nodeName.toLowerCase()?De=Qe:Ae=Qe),!Oe){if(!De){if(!(Qe=function(Ot,Rt,$e){function yt(){var Qt=window.innerWidth,Re=window.innerHeight;Ot!==document.body&&(Qt=(Re=Ut.getBoundingClientRect()).right-Re.left,Re=Re.bottom-Re.top),Ut.width=$e*Qt,Ut.height=$e*Re}var Bt,Ut=document.createElement("canvas");return N(Ut.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ot.appendChild(Ut),Ot===document.body&&(Ut.style.position="absolute",N(Ot.style,{margin:0,padding:0})),Ot!==document.body&&"function"==typeof ResizeObserver?(Bt=new ResizeObserver(function(){setTimeout(yt)})).observe(Ot):window.addEventListener("resize",yt,!1),yt(),{canvas:Ut,onDestroy:function(){Bt?Bt.disconnect():window.removeEventListener("resize",yt),Ot.removeChild(Ut)}}}(Ae||document.body,0,vt)))return null;De=Qe.canvas,ut=Qe.onDestroy}void 0===Be.premultipliedAlpha&&(Be.premultipliedAlpha=!0),Oe=function(Ot,Rt){function $e(yt){try{return Ot.getContext(yt,Rt)}catch(Bt){return null}}return $e("webgl")||$e("experimental-webgl")||$e("webgl-experimental")}(De,Be)}return Oe?{gl:Oe,canvas:De,container:Ae,extensions:et,optionalExtensions:ct,pixelRatio:vt,profile:ft,onDone:It,onDestroy:ut}:(ut(),It("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Be)))return null;var Rt=Be.gl,$e=Rt.getContextAttributes();Rt.isContextLost();var yt=function(cn,jr){function Lr(On){var Tn;On=On.toLowerCase();try{Tn=Xr[On]=cn.getExtension(On)}catch(rn){}return!!Tn}for(var Xr={},Un=0;Un<jr.extensions.length;++Un){var qr=jr.extensions[Un];if(!Lr(qr))return jr.onDestroy(),jr.onDone('"'+qr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return jr.optionalExtensions.forEach(Lr),{extensions:Xr,restore:function(){Object.keys(Xr).forEach(function(On){if(Xr[On]&&!Lr(On))throw Error("(regl): error restoring extension "+On)})}}}(Rt,Be);if(!yt)return null;var cn,jr,Bt=(cn={"":0},jr=[""],{id:function(Lr){var Xr=cn[Lr];return Xr||(Xr=cn[Lr]=jr.length,jr.push(Lr),Xr)},str:function(Lr){return jr[Lr]}}),Ut={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Qt=yt.extensions,Re=function(cn,jr){function Lr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Xr(ar,zt,Gt){var mr=On.pop()||new Lr;mr.startQueryIndex=ar,mr.endQueryIndex=zt,mr.sum=0,mr.stats=Gt,Tn.push(mr)}if(!jr.ext_disjoint_timer_query)return null;var Un=[],qr=[],On=[],Tn=[],rn=[],Vn=[];return{beginQuery:function(ar){var zt=Un.pop()||jr.ext_disjoint_timer_query.createQueryEXT();jr.ext_disjoint_timer_query.beginQueryEXT(35007,zt),qr.push(zt),Xr(qr.length-1,qr.length,ar)},endQuery:function(){jr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Xr,update:function(){var ar,zt;if(0!==(ar=qr.length)){Vn.length=Math.max(Vn.length,ar+1),rn.length=Math.max(rn.length,ar+1),rn[0]=0;var Gt=Vn[0]=0;for(zt=ar=0;zt<qr.length;++zt){var mr=qr[zt];jr.ext_disjoint_timer_query.getQueryObjectEXT(mr,34919)?(Gt+=jr.ext_disjoint_timer_query.getQueryObjectEXT(mr,34918),Un.push(mr)):qr[ar++]=mr,rn[zt+1]=Gt,Vn[zt+1]=ar}for(qr.length=ar,zt=ar=0;zt<Tn.length;++zt){var Er=(Gt=Tn[zt]).startQueryIndex;Gt.sum+=rn[mr=Gt.endQueryIndex]-rn[Er],(mr=Vn[mr])===(Er=Vn[Er])?(Gt.stats.gpuTime+=Gt.sum/1e6,On.push(Gt)):(Gt.startQueryIndex=Er,Gt.endQueryIndex=mr,Tn[ar++]=Gt)}Tn.length=ar}},getNumPendingQueries:function(){return qr.length},clear:function(){Un.push.apply(Un,qr);for(var ar=0;ar<Un.length;ar++)jr.ext_disjoint_timer_query.deleteQueryEXT(Un[ar]);qr.length=0,Un.length=0},restore:function(){qr.length=0,Un.length=0}}}(0,Qt),ht=J(),Mt=Rt.drawingBufferWidth,Nt=Rt.drawingBufferHeight,Zt={tick:0,time:0,viewportWidth:Mt,viewportHeight:Nt,framebufferWidth:Mt,framebufferHeight:Nt,drawingBufferWidth:Mt,drawingBufferHeight:Nt,pixelRatio:Be.pixelRatio},or=(Mt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Be,Qe){var Ae=1;Qe.ext_texture_filter_anisotropic&&(Ae=Be.getParameter(34047));var De=1,Oe=1;Qe.webgl_draw_buffers&&(De=Be.getParameter(34852),Oe=Be.getParameter(36063));var Ie=!!Qe.oes_texture_float;if(Ie){Ie=Be.createTexture(),Be.bindTexture(3553,Ie),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var et=Be.createFramebuffer();if(Be.bindFramebuffer(36160,et),Be.framebufferTexture2D(36160,36064,3553,Ie,0),Be.bindTexture(3553,null),36053!==Be.checkFramebufferStatus(36160))Ie=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var ct=K.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,ct),Be.getError()?Ie=!1:(Be.deleteFramebuffer(et),Be.deleteTexture(Ie),Ie=1===ct[0]),K.freeType(ct)}}return ct=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ct=Be.createTexture(),et=K.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,ct),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,et),K.freeType(et),Be.bindTexture(34067,null),Be.deleteTexture(ct),ct=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(Qe).filter(function(vt){return!!Qe[vt]}),maxAnisotropic:Ae,maxDrawbuffers:De,maxColorAttachments:Oe,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:Ie,npotTextureCube:ct}}(Rt,Qt)),Wt=function(Be,Qe,Ae,De){function Oe(ut){this.id=vt++,this.buffer=Be.createBuffer(),this.type=ut,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ae.profile&&(this.stats={size:0})}function Ie(ut,Ot,Rt){ut.byteLength=Ot.byteLength,Be.bufferData(ut.type,Ot,Rt)}function et(ut,Ot,Rt,$e,yt,Bt){if(ut.usage=Rt,Array.isArray(Ot)){if(ut.dtype=$e||5126,0<Ot.length)if(Array.isArray(Ot[0])){yt=Te(Ot);for(var Ut=$e=1;Ut<yt.length;++Ut)$e*=yt[Ut];ut.dimension=$e,Ie(ut,Ot=be(Ot,yt,ut.dtype),Rt),Bt?ut.persistentData=Ot:K.freeType(Ot)}else"number"==typeof Ot[0]?(ut.dimension=yt,a(yt=K.allocType(ut.dtype,Ot.length),Ot),Ie(ut,yt,Rt),Bt?ut.persistentData=yt:K.freeType(yt)):ie(Ot[0])&&(ut.dimension=Ot[0].length,ut.dtype=$e||s(Ot[0])||5126,Ie(ut,Ot=be(Ot,[Ot.length,Ot[0].length],ut.dtype),Rt),Bt?ut.persistentData=Ot:K.freeType(Ot))}else if(ie(Ot))ut.dtype=$e||s(Ot),ut.dimension=yt,Ie(ut,Ot,Rt),Bt&&(ut.persistentData=new Uint8Array(new Uint8Array(Ot.buffer)));else if(n(Ot)){var Qt=Ot.stride,Re=(Ut=Ot.offset,0),ht=0,Mt=0,Nt=0;1===(yt=Ot.shape).length?(Re=yt[0],ht=1,Mt=Qt[0],Nt=0):2===yt.length&&(Re=yt[0],ht=yt[1],Mt=Qt[0],Nt=Qt[1]),ut.dtype=$e||s(Ot.data)||5126,ut.dimension=ht,c(yt=K.allocType(ut.dtype,Re*ht),Ot.data,Re,ht,Mt,Nt,Ut),Ie(ut,yt,Rt),Bt?ut.persistentData=yt:K.freeType(yt)}else Ot instanceof ArrayBuffer&&(ut.dtype=5121,ut.dimension=yt,Ie(ut,Ot,Rt),Bt&&(ut.persistentData=new Uint8Array(new Uint8Array(Ot))))}function ct(ut){Qe.bufferCount--,De(ut),Be.deleteBuffer(ut.buffer),ut.buffer=null,delete ft[ut.id]}var vt=0,ft={};Oe.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},Oe.prototype.destroy=function(){ct(this)};var It=[];return Ae.profile&&(Qe.getTotalBufferSize=function(){var ut=0;return Object.keys(ft).forEach(function(Ot){ut+=ft[Ot].stats.size}),ut}),{create:function(ut,Ot,Rt,$e){function yt(Ut){var Qt=35044,Re=null,ht=0,Mt=0,Nt=1;return Array.isArray(Ut)||ie(Ut)||n(Ut)||Ut instanceof ArrayBuffer?Re=Ut:"number"==typeof Ut?ht=0|Ut:Ut&&("data"in Ut&&(Re=Ut.data),"usage"in Ut&&(Qt=ge[Ut.usage]),"type"in Ut&&(Mt=ue[Ut.type]),"dimension"in Ut&&(Nt=0|Ut.dimension),"length"in Ut&&(ht=0|Ut.length)),Bt.bind(),Re?et(Bt,Re,Qt,Mt,Nt,$e):(ht&&Be.bufferData(Bt.type,ht,Qt),Bt.dtype=Mt||5121,Bt.usage=Qt,Bt.dimension=Nt,Bt.byteLength=ht),Ae.profile&&(Bt.stats.size=Bt.byteLength*we[Bt.dtype]),yt}Qe.bufferCount++;var Bt=new Oe(Ot);return ft[Bt.id]=Bt,Rt||yt(ut),yt._reglType="buffer",yt._buffer=Bt,yt.subdata=function(Ut,Qt){var Re,ht=0|(Qt||0);if(Bt.bind(),ie(Ut)||Ut instanceof ArrayBuffer)Be.bufferSubData(Bt.type,ht,Ut);else if(Array.isArray(Ut)){if(0<Ut.length)if("number"==typeof Ut[0]){var Mt=K.allocType(Bt.dtype,Ut.length);a(Mt,Ut),Be.bufferSubData(Bt.type,ht,Mt),K.freeType(Mt)}else(Array.isArray(Ut[0])||ie(Ut[0]))&&(Re=Te(Ut),Mt=be(Ut,Re,Bt.dtype),Be.bufferSubData(Bt.type,ht,Mt),K.freeType(Mt))}else if(n(Ut)){var Nt=Ut.stride,Zt=Mt=0,or=0,Wt=0;1===(Re=Ut.shape).length?(Mt=Re[0],Zt=1,or=Nt[0],Wt=0):2===Re.length&&(Mt=Re[0],Zt=Re[1],or=Nt[0],Wt=Nt[1]),Re=Array.isArray(Ut.data)?Bt.dtype:s(Ut.data),c(Re=K.allocType(Re,Mt*Zt),Ut.data,Mt,Zt,or,Wt,Ut.offset),Be.bufferSubData(Bt.type,ht,Re),K.freeType(Re)}return yt},Ae.profile&&(yt.stats=Bt.stats),yt.destroy=function(){ct(Bt)},yt},createStream:function(ut,Ot){var Rt=It.pop();return Rt||(Rt=new Oe(ut)),Rt.bind(),et(Rt,Ot,35040,0,1,!1),Rt},destroyStream:function(ut){It.push(ut)},clear:function(){ce(ft).forEach(ct),It.forEach(ct)},getBuffer:function(ut){return ut&&ut._buffer instanceof Oe?ut._buffer:null},restore:function(){ce(ft).forEach(function(ut){ut.buffer=Be.createBuffer(),Be.bindBuffer(ut.type,ut.buffer),Be.bufferData(ut.type,ut.persistentData||ut.byteLength,ut.usage)})},_initBuffer:et}}(Rt,Ut,Be,function(cn){return cr.destroyBuffer(cn)}),er=function(Be,Qe,Ae,De){function Oe(ut){this.id=vt++,ct[this.id]=this,this.buffer=ut,this.primType=4,this.type=this.vertCount=0}function Ie(ut,Ot,Rt,$e,yt,Bt,Ut){var Qt;if(ut.buffer.bind(),Ot?((Qt=Ut)||ie(Ot)&&(!n(Ot)||ie(Ot.data))||(Qt=Qe.oes_element_index_uint?5125:5123),Ae._initBuffer(ut.buffer,Ot,Rt,Qt,3)):(Be.bufferData(34963,Bt,Rt),ut.buffer.dtype=Qt||5121,ut.buffer.usage=Rt,ut.buffer.dimension=3,ut.buffer.byteLength=Bt),Qt=Ut,!Ut){switch(ut.buffer.dtype){case 5121:case 5120:Qt=5121;break;case 5123:case 5122:Qt=5123;break;case 5125:case 5124:Qt=5125}ut.buffer.dtype=Qt}ut.type=Qt,0>(Ot=yt)&&(Ot=ut.buffer.byteLength,5123===Qt?Ot>>=1:5125===Qt&&(Ot>>=2)),ut.vertCount=Ot,Ot=$e,0>$e&&(Ot=4,1===($e=ut.buffer.dimension)&&(Ot=0),2===$e&&(Ot=1),3===$e&&(Ot=4)),ut.primType=Ot}function et(ut){De.elementsCount--,delete ct[ut.id],ut.buffer.destroy(),ut.buffer=null}var ct={},vt=0,ft={uint8:5121,uint16:5123};Qe.oes_element_index_uint&&(ft.uint32=5125),Oe.prototype.bind=function(){this.buffer.bind()};var It=[];return{create:function(ut,Ot){function Rt(Bt){if(Bt)if("number"==typeof Bt)$e(Bt),yt.primType=4,yt.vertCount=0|Bt,yt.type=5121;else{var Ut=null,Qt=35044,Re=-1,ht=-1,Mt=0,Nt=0;Array.isArray(Bt)||ie(Bt)||n(Bt)?Ut=Bt:("data"in Bt&&(Ut=Bt.data),"usage"in Bt&&(Qt=ge[Bt.usage]),"primitive"in Bt&&(Re=Le[Bt.primitive]),"count"in Bt&&(ht=0|Bt.count),"type"in Bt&&(Nt=ft[Bt.type]),"length"in Bt?Mt=0|Bt.length:(Mt=ht,5123===Nt||5122===Nt?Mt*=2:5125!==Nt&&5124!==Nt||(Mt*=4))),Ie(yt,Ut,Qt,Re,ht,Mt,Nt)}else $e(),yt.primType=4,yt.vertCount=0,yt.type=5121;return Rt}var $e=Ae.create(null,34963,!0),yt=new Oe($e._buffer);return De.elementsCount++,Rt(ut),Rt._reglType="elements",Rt._elements=yt,Rt.subdata=function(Bt,Ut){return $e.subdata(Bt,Ut),Rt},Rt.destroy=function(){et(yt)},Rt},createStream:function(ut){var Ot=It.pop();return Ot||(Ot=new Oe(Ae.create(null,34963,!0,!1)._buffer)),Ie(Ot,ut,35040,-1,-1,0,0),Ot},destroyStream:function(ut){It.push(ut)},getElements:function(ut){return"function"==typeof ut&&ut._elements instanceof Oe?ut._elements:null},clear:function(){ce(ct).forEach(et)}}}(Rt,Qt,Wt,Ut),cr=function(Be,Qe,Ae,De,Oe,Ie,et){function ct(){this.id=++It,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Rt=Qe.oes_vertex_array_object;this.vao=Rt?Rt.createVertexArrayOES():null,ut[this.id]=this,this.buffers=[]}var vt=Ae.maxAttributes,ft=Array(vt);for(Ae=0;Ae<vt;++Ae)ft[Ae]=new I;var It=0,ut={},Ot={Record:I,scope:{},state:ft,currentVAO:null,targetVAO:null,restore:Qe.oes_vertex_array_object?function(){Qe.oes_vertex_array_object&&ce(ut).forEach(function(Rt){Rt.refresh()})}:function(){},createVAO:function(Rt){function $e(Bt){var Ut;Array.isArray(Bt)?(Ut=Bt,yt.elements&&yt.ownsElements&&yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1,yt.offset=0,yt.count=0,yt.instances=-1,yt.primitive=4):(Bt.elements?(Ut=Bt.elements,yt.ownsElements?("function"==typeof Ut&&"elements"===Ut._reglType?yt.elements.destroy():yt.elements(Ut),yt.ownsElements=!1):Ie.getElements(Bt.elements)?(yt.elements=Bt.elements,yt.ownsElements=!1):(yt.elements=Ie.create(Bt.elements),yt.ownsElements=!0)):(yt.elements=null,yt.ownsElements=!1),Ut=Bt.attributes,yt.offset=0,yt.count=-1,yt.instances=-1,yt.primitive=4,yt.elements&&(yt.count=yt.elements._elements.vertCount,yt.primitive=yt.elements._elements.primType),"offset"in Bt&&(yt.offset=0|Bt.offset),"count"in Bt&&(yt.count=0|Bt.count),"instances"in Bt&&(yt.instances=0|Bt.instances),"primitive"in Bt&&(yt.primitive=Le[Bt.primitive])),Bt={};var Qt=yt.attributes;Qt.length=Ut.length;for(var Re=0;Re<Ut.length;++Re){var ht,Mt=Ut[Re],Nt=Qt[Re]=new I,Zt=Mt.data||Mt;Array.isArray(Zt)||ie(Zt)||n(Zt)?(yt.buffers[Re]&&(ht=yt.buffers[Re],ie(Zt)&&ht._buffer.byteLength>=Zt.byteLength?ht.subdata(Zt):(ht.destroy(),yt.buffers[Re]=null)),yt.buffers[Re]||(ht=yt.buffers[Re]=Oe.create(Mt,34962,!1,!0)),Nt.buffer=Oe.getBuffer(ht),Nt.size=0|Nt.buffer.dimension,Nt.normalized=!1,Nt.type=Nt.buffer.dtype,Nt.offset=0,Nt.stride=0,Nt.divisor=0,Nt.state=1,Bt[Re]=1):Oe.getBuffer(Mt)?(Nt.buffer=Oe.getBuffer(Mt),Nt.size=0|Nt.buffer.dimension,Nt.normalized=!1,Nt.type=Nt.buffer.dtype,Nt.offset=0,Nt.stride=0,Nt.divisor=0,Nt.state=1):Oe.getBuffer(Mt.buffer)?(Nt.buffer=Oe.getBuffer(Mt.buffer),Nt.size=0|(+Mt.size||Nt.buffer.dimension),Nt.normalized=!!Mt.normalized||!1,Nt.type="type"in Mt?ue[Mt.type]:Nt.buffer.dtype,Nt.offset=0|(Mt.offset||0),Nt.stride=0|(Mt.stride||0),Nt.divisor=0|(Mt.divisor||0),Nt.state=1):"x"in Mt&&(Nt.x=+Mt.x||0,Nt.y=+Mt.y||0,Nt.z=+Mt.z||0,Nt.w=+Mt.w||0,Nt.state=2)}for(ht=0;ht<yt.buffers.length;++ht)!Bt[ht]&&yt.buffers[ht]&&(yt.buffers[ht].destroy(),yt.buffers[ht]=null);return yt.refresh(),$e}var yt=new ct;return De.vaoCount+=1,$e.destroy=function(){for(var Bt=0;Bt<yt.buffers.length;++Bt)yt.buffers[Bt]&&yt.buffers[Bt].destroy();yt.buffers.length=0,yt.ownsElements&&(yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1),yt.destroy()},$e._vao=yt,$e._reglType="vao",$e(Rt)},getVAO:function(Rt){return"function"==typeof Rt&&Rt._vao?Rt._vao:null},destroyBuffer:function(Rt){for(var $e=0;$e<ft.length;++$e){var yt=ft[$e];yt.buffer===Rt&&(Be.disableVertexAttribArray($e),yt.buffer=null)}},setVAO:Qe.oes_vertex_array_object?function(Rt){Rt!==Ot.currentVAO&&(Qe.oes_vertex_array_object.bindVertexArrayOES(Rt?Rt.vao:null),Ot.currentVAO=Rt)}:function(Rt){if(Rt!==Ot.currentVAO){if(Rt)Rt.bindAttrs();else{for(var $e=Qe.angle_instanced_arrays,yt=0;yt<ft.length;++yt){var Bt=ft[yt];Bt.buffer?(Be.enableVertexAttribArray(yt),Bt.buffer.bind(),Be.vertexAttribPointer(yt,Bt.size,Bt.type,Bt.normalized,Bt.stride,Bt.offfset),$e&&Bt.divisor&&$e.vertexAttribDivisorANGLE(yt,Bt.divisor)):(Be.disableVertexAttribArray(yt),Be.vertexAttrib4f(yt,Bt.x,Bt.y,Bt.z,Bt.w))}Be.bindBuffer(34963,et.elements?et.elements.buffer.buffer:null)}Ot.currentVAO=Rt}},clear:Qe.oes_vertex_array_object?function(){ce(ut).forEach(function(Rt){Rt.destroy()})}:function(){}};return ct.prototype.bindAttrs=function(){for(var Rt=Qe.angle_instanced_arrays,$e=this.attributes,yt=0;yt<$e.length;++yt){var Bt=$e[yt];Bt.buffer?(Be.enableVertexAttribArray(yt),Be.bindBuffer(34962,Bt.buffer.buffer),Be.vertexAttribPointer(yt,Bt.size,Bt.type,Bt.normalized,Bt.stride,Bt.offset),Rt&&Bt.divisor&&Rt.vertexAttribDivisorANGLE(yt,Bt.divisor)):(Be.disableVertexAttribArray(yt),Be.vertexAttrib4f(yt,Bt.x,Bt.y,Bt.z,Bt.w))}for(Rt=$e.length;Rt<vt;++Rt)Be.disableVertexAttribArray(Rt);(Rt=Ie.getElements(this.elements))?Be.bindBuffer(34963,Rt.buffer.buffer):Be.bindBuffer(34963,null)},ct.prototype.refresh=function(){var Rt=Qe.oes_vertex_array_object;Rt&&(Rt.bindVertexArrayOES(this.vao),this.bindAttrs(),Ot.currentVAO=null,Rt.bindVertexArrayOES(null))},ct.prototype.destroy=function(){if(this.vao){var Rt=Qe.oes_vertex_array_object;this===Ot.currentVAO&&(Ot.currentVAO=null,Rt.bindVertexArrayOES(null)),Rt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ut[this.id]&&(delete ut[this.id],--De.vaoCount)},Ot}(Rt,Qt,or,Ut,Wt,er,Mt),_r=function(Be,Qe,Ae,De){function Oe($e,yt,Bt,Ut){this.name=$e,this.id=yt,this.location=Bt,this.info=Ut}function Ie($e,yt){for(var Bt=0;Bt<$e.length;++Bt)if($e[Bt].id===yt.id)return void($e[Bt].location=yt.location);$e.push(yt)}function et($e,yt,Bt){if(!(Qt=(Bt=35632===$e?ft:It)[yt])){var Ut=Qe.str(yt),Qt=Be.createShader($e);Be.shaderSource(Qt,Ut),Be.compileShader(Qt),Bt[yt]=Qt}return Qt}function ct($e,yt){this.id=Rt++,this.fragId=$e,this.vertId=yt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,De.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function vt($e,yt,Bt){var Ut;Ut=et(35632,$e.fragId);var Qt=et(35633,$e.vertId);if(yt=$e.program=Be.createProgram(),Be.attachShader(yt,Ut),Be.attachShader(yt,Qt),Bt)for(Ut=0;Ut<Bt.length;++Ut)Be.bindAttribLocation(yt,(Qt=Bt[Ut])[0],Qt[1]);Be.linkProgram(yt),Qt=Be.getProgramParameter(yt,35718),De.profile&&($e.stats.uniformsCount=Qt);var Re=$e.uniforms;for(Ut=0;Ut<Qt;++Ut)if(Bt=Be.getActiveUniform(yt,Ut)){if(1<Bt.size)for(var ht=0;ht<Bt.size;++ht){var Mt=Bt.name.replace("[0]","["+ht+"]");Ie(Re,new Oe(Mt,Qe.id(Mt),Be.getUniformLocation(yt,Mt),Bt))}ht=Bt.name,1<Bt.size&&(ht=ht.replace("[0]","")),Ie(Re,new Oe(ht,Qe.id(ht),Be.getUniformLocation(yt,ht),Bt))}for(Qt=Be.getProgramParameter(yt,35721),De.profile&&($e.stats.attributesCount=Qt),$e=$e.attributes,Ut=0;Ut<Qt;++Ut)(Bt=Be.getActiveAttrib(yt,Ut))&&Ie($e,new Oe(Bt.name,Qe.id(Bt.name),Be.getAttribLocation(yt,Bt.name),Bt))}var ft={},It={},ut={},Ot=[],Rt=0;return De.profile&&(Ae.getMaxUniformsCount=function(){var $e=0;return Ot.forEach(function(yt){yt.stats.uniformsCount>$e&&($e=yt.stats.uniformsCount)}),$e},Ae.getMaxAttributesCount=function(){var $e=0;return Ot.forEach(function(yt){yt.stats.attributesCount>$e&&($e=yt.stats.attributesCount)}),$e}),{clear:function(){var $e=Be.deleteShader.bind(Be);ce(ft).forEach($e),ft={},ce(It).forEach($e),It={},Ot.forEach(function(yt){Be.deleteProgram(yt.program)}),Ot.length=0,ut={},Ae.shaderCount=0},program:function($e,yt,Bt,Ut){var Qt=ut[yt];Qt||(Qt=ut[yt]={});var Re=Qt[$e];if(Re&&(Re.refCount++,!Ut))return Re;var ht=new ct(yt,$e);return Ae.shaderCount++,vt(ht,Bt,Ut),Re||(Qt[$e]=ht),Ot.push(ht),N(ht,{destroy:function(){if(ht.refCount--,0>=ht.refCount){Be.deleteProgram(ht.program);var Mt=Ot.indexOf(ht);Ot.splice(Mt,1),Ae.shaderCount--}0>=Qt[ht.vertId].refCount&&(Be.deleteShader(It[ht.vertId]),delete It[ht.vertId],delete ut[ht.fragId][ht.vertId]),Object.keys(ut[ht.fragId]).length||(Be.deleteShader(ft[ht.fragId]),delete ft[ht.fragId],delete ut[ht.fragId])}})},restore:function(){ft={},It={};for(var $e=0;$e<Ot.length;++$e)vt(Ot[$e],null,Ot[$e].attributes.map(function(yt){return[yt.location,yt.name]}))},shader:et,frag:-1,vert:-1}}(Rt,Bt,Ut,Be),xr=function(Be,Qe,Ae,De,Oe,Ie,et){function ct(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function vt(ar,zt){ar.internalformat=zt.internalformat,ar.format=zt.format,ar.type=zt.type,ar.compressed=zt.compressed,ar.premultiplyAlpha=zt.premultiplyAlpha,ar.flipY=zt.flipY,ar.unpackAlignment=zt.unpackAlignment,ar.colorSpace=zt.colorSpace,ar.width=zt.width,ar.height=zt.height,ar.channels=zt.channels}function ft(ar,zt){if("object"==typeof zt&&zt){"premultiplyAlpha"in zt&&(ar.premultiplyAlpha=zt.premultiplyAlpha),"flipY"in zt&&(ar.flipY=zt.flipY),"alignment"in zt&&(ar.unpackAlignment=zt.alignment),"colorSpace"in zt&&(ar.colorSpace=Nr[zt.colorSpace]),"type"in zt&&(ar.type=kr[zt.type]);var Gt=ar.width,mr=ar.height,Er=ar.channels,tn=!1;"shape"in zt?(Gt=zt.shape[0],mr=zt.shape[1],3===zt.shape.length&&(Er=zt.shape[2],tn=!0)):("radius"in zt&&(Gt=mr=zt.radius),"width"in zt&&(Gt=zt.width),"height"in zt&&(mr=zt.height),"channels"in zt&&(Er=zt.channels,tn=!0)),ar.width=0|Gt,ar.height=0|mr,ar.channels=0|Er,Gt=!1,"format"in zt&&(mr=ar.internalformat=Hr[Gt=zt.format],ar.format=Xr[mr],Gt in kr&&!("type"in zt)&&(ar.type=kr[Gt]),Gt in an&&(ar.compressed=!0),Gt=!0),!tn&&Gt?ar.channels=Ce[ar.format]:tn&&!Gt&&ar.channels!==ke[ar.format]&&(ar.format=ar.internalformat=ke[ar.channels])}}function It(ar){Be.pixelStorei(37440,ar.flipY),Be.pixelStorei(37441,ar.premultiplyAlpha),Be.pixelStorei(37443,ar.colorSpace),Be.pixelStorei(3317,ar.unpackAlignment)}function ut(){ct.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ot(ar,zt){var Gt=null;if(b(zt)?Gt=zt:zt&&(ft(ar,zt),"x"in zt&&(ar.xOffset=0|zt.x),"y"in zt&&(ar.yOffset=0|zt.y),b(zt.data)&&(Gt=zt.data)),zt.copy){var mr=Oe.viewportWidth,Er=Oe.viewportHeight;ar.width=ar.width||mr-ar.xOffset,ar.height=ar.height||Er-ar.yOffset,ar.needsCopy=!0}else if(Gt){if(ie(Gt))ar.channels=ar.channels||4,ar.data=Gt,"type"in zt||5121!==ar.type||(ar.type=0|de[Object.prototype.toString.call(Gt)]);else if(x(Gt)){switch(ar.channels=ar.channels||4,Er=(mr=Gt).length,ar.type){case 5121:case 5123:case 5125:case 5126:(Er=K.allocType(ar.type,Er)).set(mr),ar.data=Er;break;case 36193:ar.data=v(mr)}ar.alignment=1,ar.needsFree=!0}else if(n(Gt)){mr=Gt.data,Array.isArray(mr)||5121!==ar.type||(ar.type=0|de[Object.prototype.toString.call(mr)]);var tn,Qr,Cr,Mr,Ir=Gt.stride;3===(Er=Gt.shape).length?(Cr=Er[2],Mr=Ir[2]):Mr=Cr=1,tn=Er[0],Qr=Er[1],Er=Ir[0],Ir=Ir[1],ar.alignment=1,ar.width=tn,ar.height=Qr,ar.channels=Cr,ar.format=ar.internalformat=ke[Cr],ar.needsFree=!0,tn=Mr,Gt=Gt.offset;for(var Sr=K.allocType(36193===ar.type?5126:ar.type,(Cr=ar.width)*(Mr=ar.height)*(Qr=ar.channels)),Pr=0,Kr=0;Kr<Mr;++Kr)for(var vn=0;vn<Cr;++vn)for(var Cn=0;Cn<Qr;++Cn)Sr[Pr++]=mr[Er*vn+Ir*Kr+tn*Cn+Gt];k(ar,Sr)}else if(w(Gt)===Pe||w(Gt)===Fe||w(Gt)===qe)ar.element=w(Gt)===Pe||w(Gt)===Fe?Gt:Gt.canvas,ar.width=ar.element.width,ar.height=ar.element.height,ar.channels=4;else if(w(Gt)===rt)ar.element=Gt,ar.width=Gt.width,ar.height=Gt.height,ar.channels=4;else if(w(Gt)===ze)ar.element=Gt,ar.width=Gt.naturalWidth,ar.height=Gt.naturalHeight,ar.channels=4;else if(w(Gt)===He)ar.element=Gt,ar.width=Gt.videoWidth,ar.height=Gt.videoHeight,ar.channels=4;else if(m(Gt)){for(mr=ar.width||Gt[0].length,Er=ar.height||Gt.length,Ir=ar.channels,Ir=f(Gt[0][0])?Ir||Gt[0][0].length:Ir||1,tn=se.shape(Gt),Cr=1,Mr=0;Mr<tn.length;++Mr)Cr*=tn[Mr];Cr=K.allocType(36193===ar.type?5126:ar.type,Cr),se.flatten(Gt,tn,"",Cr),k(ar,Cr),ar.alignment=1,ar.width=mr,ar.height=Er,ar.channels=Ir,ar.format=ar.internalformat=ke[Ir],ar.needsFree=!0}}else ar.width=ar.width||1,ar.height=ar.height||1,ar.channels=ar.channels||4}function Rt(ar,zt,Gt,mr,Er){var tn=ar.element,Qr=ar.data,Cr=ar.internalformat,Mr=ar.format,Ir=ar.type,Sr=ar.width,Pr=ar.height;It(ar),tn?Be.texSubImage2D(zt,Er,Gt,mr,Mr,Ir,tn):ar.compressed?Be.compressedTexSubImage2D(zt,Er,Gt,mr,Cr,Sr,Pr,Qr):ar.needsCopy?(De(),Be.copyTexSubImage2D(zt,Er,Gt,mr,ar.xOffset,ar.yOffset,Sr,Pr)):Be.texSubImage2D(zt,Er,Gt,mr,Sr,Pr,Mr,Ir,Qr)}function $e(){return Un.pop()||new ut}function yt(ar){ar.needsFree&&K.freeType(ar.data),ut.call(ar),Un.push(ar)}function Bt(){ct.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Ut(ar,zt,Gt){var mr=ar.images[0]=$e();ar.mipmask=1,mr.width=ar.width=zt,mr.height=ar.height=Gt,mr.channels=ar.channels=4}function Qt(ar,zt){var Gt=null;if(b(zt))vt(Gt=ar.images[0]=$e(),ar),Ot(Gt,zt),ar.mipmask=1;else if(ft(ar,zt),Array.isArray(zt.mipmap))for(var mr=zt.mipmap,Er=0;Er<mr.length;++Er)vt(Gt=ar.images[Er]=$e(),ar),Gt.width>>=Er,Gt.height>>=Er,Ot(Gt,mr[Er]),ar.mipmask|=1<<Er;else vt(Gt=ar.images[0]=$e(),ar),Ot(Gt,zt),ar.mipmask=1;vt(ar,ar.images[0])}function Re(ar,zt){for(var Gt=ar.images,mr=0;mr<Gt.length&&Gt[mr];++mr){var Er=Gt[mr],tn=zt,Qr=mr,Cr=Er.element,Mr=Er.data,Ir=Er.internalformat,Sr=Er.format,Pr=Er.type,Kr=Er.width,vn=Er.height;It(Er),Cr?Be.texImage2D(tn,Qr,Sr,Sr,Pr,Cr):Er.compressed?Be.compressedTexImage2D(tn,Qr,Ir,Kr,vn,0,Mr):Er.needsCopy?(De(),Be.copyTexImage2D(tn,Qr,Sr,Er.xOffset,Er.yOffset,Kr,vn,0)):Be.texImage2D(tn,Qr,Sr,Kr,vn,0,Sr,Pr,Mr||null)}}function ht(){var ar=qr.pop()||new Bt;ct.call(ar);for(var zt=ar.mipmask=0;16>zt;++zt)ar.images[zt]=null;return ar}function Mt(ar){for(var zt=ar.images,Gt=0;Gt<zt.length;++Gt)zt[Gt]&&yt(zt[Gt]),zt[Gt]=null;qr.push(ar)}function Nt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Zt(ar,zt){"min"in zt&&(ar.minFilter=br[zt.min],0<=Me.indexOf(ar.minFilter)&&!("faces"in zt)&&(ar.genMipmaps=!0)),"mag"in zt&&(ar.magFilter=pr[zt.mag]);var Gt=ar.wrapS,mr=ar.wrapT;if("wrap"in zt){var Er=zt.wrap;"string"==typeof Er?Gt=mr=dr[Er]:Array.isArray(Er)&&(Gt=dr[Er[0]],mr=dr[Er[1]])}else"wrapS"in zt&&(Gt=dr[zt.wrapS]),"wrapT"in zt&&(mr=dr[zt.wrapT]);if(ar.wrapS=Gt,ar.wrapT=mr,"anisotropic"in zt&&(ar.anisotropic=zt.anisotropic),"mipmap"in zt){switch(Gt=!1,typeof zt.mipmap){case"string":ar.mipmapHint=xr[zt.mipmap],Gt=ar.genMipmaps=!0;break;case"boolean":Gt=ar.genMipmaps=zt.mipmap;break;case"object":ar.genMipmaps=!1,Gt=!0}!Gt||"min"in zt||(ar.minFilter=9984)}}function or(ar,zt){Be.texParameteri(zt,10241,ar.minFilter),Be.texParameteri(zt,10240,ar.magFilter),Be.texParameteri(zt,10242,ar.wrapS),Be.texParameteri(zt,10243,ar.wrapT),Qe.ext_texture_filter_anisotropic&&Be.texParameteri(zt,34046,ar.anisotropic),ar.genMipmaps&&(Be.hint(33170,ar.mipmapHint),Be.generateMipmap(zt))}function Wt(ar){ct.call(this),this.mipmask=0,this.internalformat=6408,this.id=On++,this.refCount=1,this.target=ar,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Nt,et.profile&&(this.stats={size:0})}function er(ar){Be.activeTexture(33984),Be.bindTexture(ar.target,ar.texture)}function cr(){var ar=Vn[0];ar?Be.bindTexture(ar.target,ar.texture):Be.bindTexture(3553,null)}function _r(ar){var zt=ar.texture,Gt=ar.unit,mr=ar.target;0<=Gt&&(Be.activeTexture(33984+Gt),Be.bindTexture(mr,null),Vn[Gt]=null),Be.deleteTexture(zt),ar.texture=null,ar.params=null,ar.pixels=null,ar.refCount=0,delete Tn[ar.id],Ie.textureCount--}var xr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},dr={repeat:10497,clamp:33071,mirror:33648},pr={nearest:9728,linear:9729},br=N({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},pr),Nr={none:0,browser:37444},kr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Hr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},an={};Qe.ext_srgb&&(Hr.srgb=35904,Hr.srgba=35906),Qe.oes_texture_float&&(kr.float32=kr.float=5126),Qe.oes_texture_half_float&&(kr.float16=kr["half float"]=36193),Qe.webgl_depth_texture&&(N(Hr,{depth:6402,"depth stencil":34041}),N(kr,{uint16:5123,uint32:5125,"depth stencil":34042})),Qe.webgl_compressed_texture_s3tc&&N(an,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Qe.webgl_compressed_texture_atc&&N(an,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Qe.webgl_compressed_texture_pvrtc&&N(an,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Qe.webgl_compressed_texture_etc1&&(an["rgb etc1"]=36196);var fn=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(an).forEach(function(ar){var zt=an[ar];0<=fn.indexOf(zt)&&(Hr[ar]=zt)});var zn=Object.keys(Hr);Ae.textureFormats=zn;var Nn=[];Object.keys(Hr).forEach(function(ar){Nn[Hr[ar]]=ar});var In=[];Object.keys(kr).forEach(function(ar){In[kr[ar]]=ar});var cn=[];Object.keys(pr).forEach(function(ar){cn[pr[ar]]=ar});var jr=[];Object.keys(br).forEach(function(ar){jr[br[ar]]=ar});var Lr=[];Object.keys(dr).forEach(function(ar){Lr[dr[ar]]=ar});var Xr=zn.reduce(function(ar,zt){var Gt=Hr[zt];return ar[Gt]=6409===Gt||6406===Gt||6409===Gt||6410===Gt||6402===Gt||34041===Gt||Qe.ext_srgb&&(35904===Gt||35906===Gt)?Gt:32855===Gt||0<=zt.indexOf("rgba")?6408:6407,ar},{}),Un=[],qr=[],On=0,Tn={},rn=Ae.maxTextureUnits,Vn=Array(rn).map(function(){return null});return N(Wt.prototype,{bind:function(){this.bindCount+=1;var ar=this.unit;if(0>ar){for(var zt=0;zt<rn;++zt){var Gt=Vn[zt];if(Gt){if(0<Gt.bindCount)continue;Gt.unit=-1}Vn[zt]=this,ar=zt;break}et.profile&&Ie.maxTextureUnits<ar+1&&(Ie.maxTextureUnits=ar+1),this.unit=ar,Be.activeTexture(33984+ar),Be.bindTexture(this.target,this.texture)}return ar},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&_r(this)}}),et.profile&&(Ie.getTotalTextureSize=function(){var ar=0;return Object.keys(Tn).forEach(function(zt){ar+=Tn[zt].stats.size}),ar}),{create2D:function(ar,zt){function Gt(Er,tn){var Qr=mr.texInfo;Nt.call(Qr);var Cr=ht();return"number"==typeof Er?Ut(Cr,0|Er,"number"==typeof tn?0|tn:0|Er):Er?(Zt(Qr,Er),Qt(Cr,Er)):Ut(Cr,1,1),Qr.genMipmaps&&(Cr.mipmask=(Cr.width<<1)-1),mr.mipmask=Cr.mipmask,vt(mr,Cr),mr.internalformat=Cr.internalformat,Gt.width=Cr.width,Gt.height=Cr.height,er(mr),Re(Cr,3553),or(Qr,3553),cr(),Mt(Cr),et.profile&&(mr.stats.size=T(mr.internalformat,mr.type,Cr.width,Cr.height,Qr.genMipmaps,!1)),Gt.format=Nn[mr.internalformat],Gt.type=In[mr.type],Gt.mag=cn[Qr.magFilter],Gt.min=jr[Qr.minFilter],Gt.wrapS=Lr[Qr.wrapS],Gt.wrapT=Lr[Qr.wrapT],Gt}var mr=new Wt(3553);return Tn[mr.id]=mr,Ie.textureCount++,Gt(ar,zt),Gt.subimage=function(Er,tn,Qr,Cr){tn|=0,Qr|=0,Cr|=0;var Mr=$e();return vt(Mr,mr),Mr.width=0,Mr.height=0,Ot(Mr,Er),Mr.width=Mr.width||(mr.width>>Cr)-tn,Mr.height=Mr.height||(mr.height>>Cr)-Qr,er(mr),Rt(Mr,3553,tn,Qr,Cr),cr(),yt(Mr),Gt},Gt.resize=function(Er,tn){var Qr=0|Er,Cr=0|tn||Qr;if(Qr===mr.width&&Cr===mr.height)return Gt;Gt.width=mr.width=Qr,Gt.height=mr.height=Cr,er(mr);for(var Mr=0;mr.mipmask>>Mr;++Mr){var Ir=Qr>>Mr,Sr=Cr>>Mr;if(!Ir||!Sr)break;Be.texImage2D(3553,Mr,mr.format,Ir,Sr,0,mr.format,mr.type,null)}return cr(),et.profile&&(mr.stats.size=T(mr.internalformat,mr.type,Qr,Cr,!1,!1)),Gt},Gt._reglType="texture2d",Gt._texture=mr,et.profile&&(Gt.stats=mr.stats),Gt.destroy=function(){mr.decRef()},Gt},createCube:function(ar,zt,Gt,mr,Er,tn){function Qr(Ir,Sr,Pr,Kr,vn,Cn){var ln,yn=Cr.texInfo;for(Nt.call(yn),ln=0;6>ln;++ln)Mr[ln]=ht();if("number"!=typeof Ir&&Ir){if("object"==typeof Ir)if(Sr)Qt(Mr[0],Ir),Qt(Mr[1],Sr),Qt(Mr[2],Pr),Qt(Mr[3],Kr),Qt(Mr[4],vn),Qt(Mr[5],Cn);else if(Zt(yn,Ir),ft(Cr,Ir),"faces"in Ir)for(Ir=Ir.faces,ln=0;6>ln;++ln)vt(Mr[ln],Cr),Qt(Mr[ln],Ir[ln]);else for(ln=0;6>ln;++ln)Qt(Mr[ln],Ir)}else for(Ir=0|Ir||1,ln=0;6>ln;++ln)Ut(Mr[ln],Ir,Ir);for(vt(Cr,Mr[0]),Cr.mipmask=yn.genMipmaps?(Mr[0].width<<1)-1:Mr[0].mipmask,Cr.internalformat=Mr[0].internalformat,Qr.width=Mr[0].width,Qr.height=Mr[0].height,er(Cr),ln=0;6>ln;++ln)Re(Mr[ln],34069+ln);for(or(yn,34067),cr(),et.profile&&(Cr.stats.size=T(Cr.internalformat,Cr.type,Qr.width,Qr.height,yn.genMipmaps,!0)),Qr.format=Nn[Cr.internalformat],Qr.type=In[Cr.type],Qr.mag=cn[yn.magFilter],Qr.min=jr[yn.minFilter],Qr.wrapS=Lr[yn.wrapS],Qr.wrapT=Lr[yn.wrapT],ln=0;6>ln;++ln)Mt(Mr[ln]);return Qr}var Cr=new Wt(34067);Tn[Cr.id]=Cr,Ie.cubeCount++;var Mr=Array(6);return Qr(ar,zt,Gt,mr,Er,tn),Qr.subimage=function(Ir,Sr,Pr,Kr,vn){Pr|=0,Kr|=0,vn|=0;var Cn=$e();return vt(Cn,Cr),Cn.width=0,Cn.height=0,Ot(Cn,Sr),Cn.width=Cn.width||(Cr.width>>vn)-Pr,Cn.height=Cn.height||(Cr.height>>vn)-Kr,er(Cr),Rt(Cn,34069+Ir,Pr,Kr,vn),cr(),yt(Cn),Qr},Qr.resize=function(Ir){if((Ir|=0)!==Cr.width){Qr.width=Cr.width=Ir,Qr.height=Cr.height=Ir,er(Cr);for(var Sr=0;6>Sr;++Sr)for(var Pr=0;Cr.mipmask>>Pr;++Pr)Be.texImage2D(34069+Sr,Pr,Cr.format,Ir>>Pr,Ir>>Pr,0,Cr.format,Cr.type,null);return cr(),et.profile&&(Cr.stats.size=T(Cr.internalformat,Cr.type,Qr.width,Qr.height,!1,!0)),Qr}},Qr._reglType="textureCube",Qr._texture=Cr,et.profile&&(Qr.stats=Cr.stats),Qr.destroy=function(){Cr.decRef()},Qr},clear:function(){for(var ar=0;ar<rn;++ar)Be.activeTexture(33984+ar),Be.bindTexture(3553,null),Vn[ar]=null;ce(Tn).forEach(_r),Ie.cubeCount=0,Ie.textureCount=0},getTexture:function(ar){return null},restore:function(){for(var ar=0;ar<rn;++ar){var zt=Vn[ar];zt&&(zt.bindCount=0,zt.unit=-1,Vn[ar]=null)}ce(Tn).forEach(function(Gt){Gt.texture=Be.createTexture(),Be.bindTexture(Gt.target,Gt.texture);for(var mr=0;32>mr;++mr)if(0!=(Gt.mipmask&1<<mr))if(3553===Gt.target)Be.texImage2D(3553,mr,Gt.internalformat,Gt.width>>mr,Gt.height>>mr,0,Gt.internalformat,Gt.type,null);else for(var Er=0;6>Er;++Er)Be.texImage2D(34069+Er,mr,Gt.internalformat,Gt.width>>mr,Gt.height>>mr,0,Gt.internalformat,Gt.type,null);or(Gt.texInfo,Gt.target)})},refresh:function(){for(var ar=0;ar<rn;++ar){var zt=Vn[ar];zt&&(zt.bindCount=0,zt.unit=-1,Vn[ar]=null),Be.activeTexture(33984+ar),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}(Rt,Qt,or,function(){br.procs.poll()},Zt,Ut,Be),dr=function(Be,Qe,Ae,De,Oe){function Ie(ut){this.id=ft++,this.refCount=1,this.renderbuffer=ut,this.format=32854,this.height=this.width=0,Oe.profile&&(this.stats={size:0})}function et(ut){var Ot=ut.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(Ot),ut.renderbuffer=null,ut.refCount=0,delete It[ut.id],De.renderbufferCount--}var ct={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Qe.ext_srgb&&(ct.srgba=35907),Qe.ext_color_buffer_half_float&&(ct.rgba16f=34842,ct.rgb16f=34843),Qe.webgl_color_buffer_float&&(ct.rgba32f=34836);var vt=[];Object.keys(ct).forEach(function(ut){vt[ct[ut]]=ut});var ft=0,It={};return Ie.prototype.decRef=function(){0>=--this.refCount&&et(this)},Oe.profile&&(De.getTotalRenderbufferSize=function(){var ut=0;return Object.keys(It).forEach(function(Ot){ut+=It[Ot].stats.size}),ut}),{create:function(ut,Ot){function Rt(yt,Bt){var Ut=0,Qt=0,Re=32854;if("object"==typeof yt&&yt?("shape"in yt?(Ut=0|(Qt=yt.shape)[0],Qt=0|Qt[1]):("radius"in yt&&(Ut=Qt=0|yt.radius),"width"in yt&&(Ut=0|yt.width),"height"in yt&&(Qt=0|yt.height)),"format"in yt&&(Re=ct[yt.format])):"number"==typeof yt?(Ut=0|yt,Qt="number"==typeof Bt?0|Bt:Ut):yt||(Ut=Qt=1),Ut!==$e.width||Qt!==$e.height||Re!==$e.format)return Rt.width=$e.width=Ut,Rt.height=$e.height=Qt,$e.format=Re,Be.bindRenderbuffer(36161,$e.renderbuffer),Be.renderbufferStorage(36161,Re,Ut,Qt),Oe.profile&&($e.stats.size=pt[$e.format]*$e.width*$e.height),Rt.format=vt[$e.format],Rt}var $e=new Ie(Be.createRenderbuffer());return It[$e.id]=$e,De.renderbufferCount++,Rt(ut,Ot),Rt.resize=function(yt,Bt){var Ut=0|yt,Qt=0|Bt||Ut;return Ut===$e.width&&Qt===$e.height||(Rt.width=$e.width=Ut,Rt.height=$e.height=Qt,Be.bindRenderbuffer(36161,$e.renderbuffer),Be.renderbufferStorage(36161,$e.format,Ut,Qt),Oe.profile&&($e.stats.size=pt[$e.format]*$e.width*$e.height)),Rt},Rt._reglType="renderbuffer",Rt._renderbuffer=$e,Oe.profile&&(Rt.stats=$e.stats),Rt.destroy=function(){$e.decRef()},Rt},clear:function(){ce(It).forEach(et)},restore:function(){ce(It).forEach(function(ut){ut.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,ut.renderbuffer),Be.renderbufferStorage(36161,ut.format,ut.width,ut.height)}),Be.bindRenderbuffer(36161,null)}}}(Rt,Qt,0,Ut,Be),pr=function(Be,Qe,Ae,De,Oe,Ie){function et(Wt,er,cr){this.target=Wt,this.texture=er,this.renderbuffer=cr;var _r=Wt=0;er?(Wt=er.width,_r=er.height):cr&&(Wt=cr.width,_r=cr.height),this.width=Wt,this.height=_r}function ct(Wt){Wt&&(Wt.texture&&Wt.texture._texture.decRef(),Wt.renderbuffer&&Wt.renderbuffer._renderbuffer.decRef())}function vt(Wt,er,cr){Wt&&(Wt.texture?Wt.texture._texture.refCount+=1:Wt.renderbuffer._renderbuffer.refCount+=1)}function ft(Wt,er){er&&(er.texture?Be.framebufferTexture2D(36160,Wt,er.target,er.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,Wt,36161,er.renderbuffer._renderbuffer.renderbuffer))}function It(Wt){var er=3553,cr=null,_r=null,xr=Wt;return"object"==typeof Wt&&(xr=Wt.data,"target"in Wt&&(er=0|Wt.target)),"texture2d"===(Wt=xr._reglType)||"textureCube"===Wt?cr=xr:"renderbuffer"===Wt&&(_r=xr,er=36161),new et(er,cr,_r)}function ut(Wt,er,cr,_r,xr){return cr?((Wt=De.create2D({width:Wt,height:er,format:_r,type:xr}))._texture.refCount=0,new et(3553,Wt,null)):((Wt=Oe.create({width:Wt,height:er,format:_r}))._renderbuffer.refCount=0,new et(36161,null,Wt))}function Ot(Wt){return Wt&&(Wt.texture||Wt.renderbuffer)}function Rt(Wt,er,cr){Wt&&(Wt.texture?Wt.texture.resize(er,cr):Wt.renderbuffer&&Wt.renderbuffer.resize(er,cr),Wt.width=er,Wt.height=cr)}function $e(){this.id=Zt++,or[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function yt(Wt){Wt.colorAttachments.forEach(ct),ct(Wt.depthAttachment),ct(Wt.stencilAttachment),ct(Wt.depthStencilAttachment)}function Bt(Wt){Be.deleteFramebuffer(Wt.framebuffer),Wt.framebuffer=null,Ie.framebufferCount--,delete or[Wt.id]}function Ut(Wt){var er;Be.bindFramebuffer(36160,Wt.framebuffer);var cr=Wt.colorAttachments;for(er=0;er<cr.length;++er)ft(36064+er,cr[er]);for(er=cr.length;er<Ae.maxColorAttachments;++er)Be.framebufferTexture2D(36160,36064+er,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),ft(36096,Wt.depthAttachment),ft(36128,Wt.stencilAttachment),ft(33306,Wt.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,Re.next?Re.next.framebuffer:null),Re.cur=Re.next,Be.getError()}function Qt(Wt,er){function cr(xr,dr){var pr,br=0,Nr=0,kr=!0,Hr=!0;pr=null;var an=!0,fn="rgba",zn="uint8",Nn=1,In=null,cn=null,jr=null,Lr=!1;"number"==typeof xr?(br=0|xr,Nr=0|dr||br):xr?("shape"in xr?(br=(Nr=xr.shape)[0],Nr=Nr[1]):("radius"in xr&&(br=Nr=xr.radius),"width"in xr&&(br=xr.width),"height"in xr&&(Nr=xr.height)),("color"in xr||"colors"in xr)&&(pr=xr.color||xr.colors,Array.isArray(pr)),pr||("colorCount"in xr&&(Nn=0|xr.colorCount),"colorTexture"in xr&&(an=!!xr.colorTexture,fn="rgba4"),"colorType"in xr&&(zn=xr.colorType,!an)&&("half float"===zn||"float16"===zn?fn="rgba16f":"float"!==zn&&"float32"!==zn||(fn="rgba32f")),"colorFormat"in xr&&(0<=ht.indexOf(fn=xr.colorFormat)?an=!0:0<=Mt.indexOf(fn)&&(an=!1))),("depthTexture"in xr||"depthStencilTexture"in xr)&&(Lr=!(!xr.depthTexture&&!xr.depthStencilTexture)),"depth"in xr&&("boolean"==typeof xr.depth?kr=xr.depth:(In=xr.depth,Hr=!1)),"stencil"in xr&&("boolean"==typeof xr.stencil?Hr=xr.stencil:(cn=xr.stencil,kr=!1)),"depthStencil"in xr&&("boolean"==typeof xr.depthStencil?kr=Hr=xr.depthStencil:(jr=xr.depthStencil,Hr=kr=!1))):br=Nr=1;var Xr=null,Un=null,qr=null,On=null;if(Array.isArray(pr))Xr=pr.map(It);else if(pr)Xr=[It(pr)];else for(Xr=Array(Nn),pr=0;pr<Nn;++pr)Xr[pr]=ut(br,Nr,an,fn,zn);for(br=br||Xr[0].width,Nr=Nr||Xr[0].height,In?Un=It(In):kr&&!Hr&&(Un=ut(br,Nr,Lr,"depth","uint32")),cn?qr=It(cn):Hr&&!kr&&(qr=ut(br,Nr,!1,"stencil","uint8")),jr?On=It(jr):!In&&!cn&&Hr&&kr&&(On=ut(br,Nr,Lr,"depth stencil","depth stencil")),kr=null,pr=0;pr<Xr.length;++pr)vt(Xr[pr]),Xr[pr]&&Xr[pr].texture&&(Hr=Ft[Xr[pr].texture._texture.format]*Dt[Xr[pr].texture._texture.type],null===kr&&(kr=Hr));return vt(Un),vt(qr),vt(On),yt(_r),_r.width=br,_r.height=Nr,_r.colorAttachments=Xr,_r.depthAttachment=Un,_r.stencilAttachment=qr,_r.depthStencilAttachment=On,cr.color=Xr.map(Ot),cr.depth=Ot(Un),cr.stencil=Ot(qr),cr.depthStencil=Ot(On),cr.width=_r.width,cr.height=_r.height,Ut(_r),cr}var _r=new $e;return Ie.framebufferCount++,cr(Wt,er),N(cr,{resize:function(xr,dr){var pr=Math.max(0|xr,1),br=Math.max(0|dr||pr,1);if(pr===_r.width&&br===_r.height)return cr;for(var Nr=_r.colorAttachments,kr=0;kr<Nr.length;++kr)Rt(Nr[kr],pr,br);return Rt(_r.depthAttachment,pr,br),Rt(_r.stencilAttachment,pr,br),Rt(_r.depthStencilAttachment,pr,br),_r.width=cr.width=pr,_r.height=cr.height=br,Ut(_r),cr},_reglType:"framebuffer",_framebuffer:_r,destroy:function(){Bt(_r),yt(_r)},use:function(xr){Re.setFBO({framebuffer:cr},xr)}})}var Re={cur:null,next:null,dirty:!1,setFBO:null},ht=["rgba"],Mt=["rgba4","rgb565","rgb5 a1"];Qe.ext_srgb&&Mt.push("srgba"),Qe.ext_color_buffer_half_float&&Mt.push("rgba16f","rgb16f"),Qe.webgl_color_buffer_float&&Mt.push("rgba32f");var Nt=["uint8"];Qe.oes_texture_half_float&&Nt.push("half float","float16"),Qe.oes_texture_float&&Nt.push("float","float32");var Zt=0,or={};return N(Re,{getFramebuffer:function(Wt){return"function"==typeof Wt&&"framebuffer"===Wt._reglType&&(Wt=Wt._framebuffer)instanceof $e?Wt:null},create:Qt,createCube:function(Wt){function er(_r){var xr,dr={color:null},pr=0,br=null;xr="rgba";var Nr="uint8",kr=1;if("number"==typeof _r?pr=0|_r:_r?("shape"in _r?pr=_r.shape[0]:("radius"in _r&&(pr=0|_r.radius),"width"in _r?pr=0|_r.width:"height"in _r&&(pr=0|_r.height)),("color"in _r||"colors"in _r)&&(br=_r.color||_r.colors,Array.isArray(br)),br||("colorCount"in _r&&(kr=0|_r.colorCount),"colorType"in _r&&(Nr=_r.colorType),"colorFormat"in _r&&(xr=_r.colorFormat)),"depth"in _r&&(dr.depth=_r.depth),"stencil"in _r&&(dr.stencil=_r.stencil),"depthStencil"in _r&&(dr.depthStencil=_r.depthStencil)):pr=1,br)if(Array.isArray(br))for(_r=[],xr=0;xr<br.length;++xr)_r[xr]=br[xr];else _r=[br];else for(_r=Array(kr),br={radius:pr,format:xr,type:Nr},xr=0;xr<kr;++xr)_r[xr]=De.createCube(br);for(dr.color=Array(_r.length),xr=0;xr<_r.length;++xr)kr=_r[xr],pr=pr||kr.width,dr.color[xr]={target:34069,data:_r[xr]};for(xr=0;6>xr;++xr){for(kr=0;kr<_r.length;++kr)dr.color[kr].target=34069+xr;0<xr&&(dr.depth=cr[0].depth,dr.stencil=cr[0].stencil,dr.depthStencil=cr[0].depthStencil),cr[xr]?cr[xr](dr):cr[xr]=Qt(dr)}return N(er,{width:pr,height:pr,color:_r})}var cr=Array(6);return er(Wt),N(er,{faces:cr,resize:function(_r){var xr=0|_r;if(xr===er.width)return er;var dr=er.color;for(_r=0;_r<dr.length;++_r)dr[_r].resize(xr);for(_r=0;6>_r;++_r)cr[_r].resize(xr);return er.width=er.height=xr,er},_reglType:"framebufferCube",destroy:function(){cr.forEach(function(_r){_r.destroy()})}})},clear:function(){ce(or).forEach(Bt)},restore:function(){Re.cur=null,Re.next=null,Re.dirty=!0,ce(or).forEach(function(Wt){Wt.framebuffer=Be.createFramebuffer(),Ut(Wt)})}})}(Rt,Qt,or,xr,dr,Ut),br=te(Rt,Bt,Qt,or,Wt,er,0,pr,{},cr,_r,Mt,Zt,Re,Be),Nr=(Bt=function(Be,Qe,Ae,De,Oe,Ie,et){function ct(vt){var ft;ft=null===Qe.next?5121:Qe.next.colorAttachments[0].texture._texture.type;var It=0,ut=0,Ot=De.framebufferWidth,Rt=De.framebufferHeight,$e=null;return ie(vt)?$e=vt:vt&&(It=0|vt.x,ut=0|vt.y,Ot=0|(vt.width||De.framebufferWidth-It),Rt=0|(vt.height||De.framebufferHeight-ut),$e=vt.data||null),Ae(),vt=Ot*Rt*4,$e||(5121===ft?$e=new Uint8Array(vt):5126===ft&&($e=$e||new Float32Array(vt))),Be.pixelStorei(3333,4),Be.readPixels(It,ut,Ot,Rt,6408,ft,$e),$e}return function(vt){return vt&&"framebuffer"in vt?(Qe.setFBO({framebuffer:(ft=vt).framebuffer},function(){It=ct(ft)}),It):ct(vt);var ft,It}}(Rt,pr,br.procs.poll,Zt),br.next),kr=Rt.canvas,Hr=[],an=[],fn=[],zn=[Be.onDestroy],Nn=null;kr&&(kr.addEventListener("webglcontextlost",Oe,!1),kr.addEventListener("webglcontextrestored",Ie,!1));var In=pr.setFBO=et({framebuffer:Q.define.call(null,1,"framebuffer")});return ut(),$e=N(et,{clear:function(cn){if("framebuffer"in cn)if(cn.framebuffer&&"framebufferCube"===cn.framebuffer_reglType)for(var jr=0;6>jr;++jr)In(N({framebuffer:cn.framebuffer.faces[jr]},cn),ct);else In(cn,ct);else ct(0,cn)},prop:Q.define.bind(null,1),context:Q.define.bind(null,2),this:Q.define.bind(null,3),draw:et({}),buffer:function(cn){return Wt.create(cn,34962,!1,!1)},elements:function(cn){return er.create(cn,!1)},texture:xr.create2D,cube:xr.createCube,renderbuffer:dr.create,framebuffer:pr.create,framebufferCube:pr.createCube,vao:cr.createVAO,attributes:$e,frame:vt,on:function(cn,jr){var Lr;switch(cn){case"frame":return vt(jr);case"lost":Lr=an;break;case"restore":Lr=fn;break;case"destroy":Lr=zn}return Lr.push(jr),{cancel:function(){for(var Xr=0;Xr<Lr.length;++Xr)if(Lr[Xr]===jr){Lr[Xr]=Lr[Lr.length-1],Lr.pop();break}}}},limits:or,hasExtension:function(cn){return 0<=or.extensions.indexOf(cn.toLowerCase())},read:Bt,destroy:function(){Hr.length=0,De(),kr&&(kr.removeEventListener("webglcontextlost",Oe),kr.removeEventListener("webglcontextrestored",Ie)),_r.clear(),pr.clear(),dr.clear(),cr.clear(),xr.clear(),er.clear(),Wt.clear(),Re&&Re.clear(),zn.forEach(function(cn){cn()})},_gl:Rt,_refresh:ut,poll:function(){It(),Re&&Re.update()},now:Ot,stats:Ut}),Be.onDone(null,$e),$e}},"object"==typeof ee&&void 0!==$?$.exports=g():this.createREGL=g()},{}],284:[function(y,$,ee){var d=y("buffer"),g=d.Buffer;function _(e,i){for(var r in e)i[r]=e[r]}function t(e,i,r){return g(e,i,r)}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?$.exports=d:(_(d,ee),ee.Buffer=t),t.prototype=Object.create(g.prototype),_(g,t),t.from=function(e,i,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return g(e,i,r)},t.alloc=function(e,i,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=g(e);return void 0!==i?"string"==typeof r?o.fill(i,r):o.fill(i):o.fill(0),o},t.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g(e)},t.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return d.SlowBuffer(e)}},{buffer:85}],285:[function(y,$,ee){$.exports=g;var d=y("events").EventEmitter;function g(){d.call(this)}y("inherits")(g,d),g.Readable=y("readable-stream/lib/_stream_readable.js"),g.Writable=y("readable-stream/lib/_stream_writable.js"),g.Duplex=y("readable-stream/lib/_stream_duplex.js"),g.Transform=y("readable-stream/lib/_stream_transform.js"),g.PassThrough=y("readable-stream/lib/_stream_passthrough.js"),g.finished=y("readable-stream/lib/internal/streams/end-of-stream.js"),g.pipeline=y("readable-stream/lib/internal/streams/pipeline.js"),g.Stream=g,g.prototype.pipe=function(_,t){var e=this;function i(c){_.writable&&!1===_.write(c)&&e.pause&&e.pause()}function r(){e.readable&&e.resume&&e.resume()}e.on("data",i),_.on("drain",r),_._isStdio||t&&!1===t.end||(e.on("end",n),e.on("close",p));var o=!1;function n(){o||(o=!0,_.end())}function p(){o||(o=!0,"function"==typeof _.destroy&&_.destroy())}function s(c){if(a(),0===d.listenerCount(this,"error"))throw c}function a(){e.removeListener("data",i),_.removeListener("drain",r),e.removeListener("end",n),e.removeListener("close",p),e.removeListener("error",s),_.removeListener("error",s),e.removeListener("end",a),e.removeListener("close",a),_.removeListener("close",a)}return e.on("error",s),_.on("error",s),e.on("end",a),e.on("close",a),_.on("close",a),_.emit("pipe",e),_}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(y,$,ee){"use strict";var d={};function g(t,e,i){i||(i=Error);var r=function(o){var n,p;function s(a,c,u){return o.call(this,"string"==typeof e?e:e(a,c,u))||this}return p=o,(n=s).prototype=Object.create(p.prototype),n.prototype.constructor=n,n.__proto__=p,s}(i);r.prototype.name=i.name,r.prototype.code=t,d[t]=r}function _(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map(function(r){return String(r)}),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}g("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(t,e,i){var r,p,a,u;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(r="must not be",e=e.replace(/^not /,"")):r="must be",a=t,(void 0===u||u>a.length)&&(u=a.length)," argument"===a.substring(u-" argument".length,u))p="The ".concat(t," ").concat(r," ").concat(_(e,"type"));else{var s=function(a,c,u){return"number"!=typeof u&&(u=0),!(u+".".length>a.length)&&-1!==a.indexOf(".",u)}(t)?"property":"argument";p='The "'.concat(t,'" ').concat(s," ").concat(r," ").concat(_(e,"type"))}return p+". Received type ".concat(typeof i)},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.codes=d},{}],287:[function(y,$,ee){(function(d){(function(){"use strict";var g=Object.keys||function(s){var a=[];for(var c in s)a.push(c);return a};$.exports=o;var _=y("./_stream_readable"),t=y("./_stream_writable");y("inherits")(o,_);for(var e=g(t.prototype),i=0;i<e.length;i++){var r=e[i];o.prototype[r]||(o.prototype[r]=t.prototype[r])}function o(s){if(!(this instanceof o))return new o(s);_.call(this,s),t.call(this,s),this.allowHalfOpen=!0,s&&(!1===s.readable&&(this.readable=!1),!1===s.writable&&(this.writable=!1),!1===s.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||d.nextTick(p,this)}function p(s){s.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(s){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,y("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(y,$,ee){"use strict";$.exports=g;var d=y("./_stream_transform");function g(_){if(!(this instanceof g))return new g(_);d.call(this,_)}y("inherits")(g,d),g.prototype._transform=function(_,t,e){e(null,_)}},{"./_stream_transform":290,inherits:231}],289:[function(y,$,ee){(function(d,g){(function(){"use strict";var _;$.exports=T,T.ReadableState=k,y("events");var o,t=function(z,N){return z.listeners(N).length},e=y("./internal/streams/stream"),i=y("buffer").Buffer,r=g.Uint8Array||function(){},n=y("util");o=n&&n.debuglog?n.debuglog("stream"):function(){};var p,s,a,c=y("./internal/streams/buffer_list"),u=y("./internal/streams/destroy"),h=y("./internal/streams/state").getHighWaterMark,v=y("../errors").codes,f=v.ERR_INVALID_ARG_TYPE,l=v.ERR_STREAM_PUSH_AFTER_EOF,x=v.ERR_METHOD_NOT_IMPLEMENTED,m=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;y("inherits")(T,e);var w=u.errorOrDestroy,b=["error","close","destroy","pause","resume"];function k(z,N,V){_=_||y("./_stream_duplex"),"boolean"!=typeof V&&(V=N instanceof _),this.objectMode=!!(z=z||{}).objectMode,V&&(this.objectMode=this.objectMode||!!z.readableObjectMode),this.highWaterMark=h(this,z,"readableHighWaterMark",V),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==z.emitClose,this.autoDestroy=!!z.autoDestroy,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(p||(p=y("string_decoder/").StringDecoder),this.decoder=new p(z.encoding),this.encoding=z.encoding)}function T(z){if(_=_||y("./_stream_duplex"),!(this instanceof T))return new T(z);this._readableState=new k(z,this,this instanceof _),this.readable=!0,z&&("function"==typeof z.read&&(this._read=z.read),"function"==typeof z.destroy&&(this._destroy=z.destroy)),e.call(this)}function L(z,N,V,Q,j){o("readableAddChunk",N);var J,re,ie,ce,se,K=z._readableState;if(null===N)K.reading=!1,function(re,ie){if(o("onEofChunk"),!ie.ended){if(ie.decoder){var ce=ie.decoder.end();ce&&ce.length&&(ie.buffer.push(ce),ie.length+=ie.objectMode?1:ce.length)}ie.ended=!0,ie.sync?D(re):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,S(re)))}}(z,K);else if(j||(re=K,i.isBuffer(se=ie=N)||se instanceof r||"string"==typeof ie||void 0===ie||re.objectMode||(ce=new f("chunk",["string","Buffer","Uint8Array"],ie)),J=ce),J)w(z,J);else if(K.objectMode||N&&N.length>0)if("string"==typeof N||K.objectMode||Object.getPrototypeOf(N)===i.prototype||(N=function(re){return i.from(re)}(N)),Q)K.endEmitted?w(z,new m):A(z,K,N,!0);else if(K.ended)w(z,new l);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!V?(N=K.decoder.write(N),K.objectMode||0!==N.length?A(z,K,N,!1):C(z,K)):A(z,K,N,!1)}else Q||(K.reading=!1,C(z,K));return!K.ended&&(K.length<K.highWaterMark||0===K.length)}function A(z,N,V,Q){N.flowing&&0===N.length&&!N.sync?(N.awaitDrain=0,z.emit("data",V)):(N.length+=N.objectMode?1:V.length,Q?N.buffer.unshift(V):N.buffer.push(V),N.needReadable&&D(z)),C(z,N)}function I(z,N){return z<=0||0===N.length&&N.ended?0:N.objectMode?1:z!=z?N.flowing&&N.length?N.buffer.head.data.length:N.length:(z>N.highWaterMark&&(N.highWaterMark=((V=z)>=1073741824?V=1073741824:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V)),z<=N.length?z:N.ended?N.length:(N.needReadable=!0,0));var V}function D(z){var N=z._readableState;o("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(o("emitReadable",N.flowing),N.emittedReadable=!0,d.nextTick(S,z))}function S(z){var N=z._readableState;o("emitReadable_",N.destroyed,N.length,N.ended),N.destroyed||!N.length&&!N.ended||(z.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,X(z)}function C(z,N){N.readingMore||(N.readingMore=!0,d.nextTick(R,z,N))}function R(z,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&0===N.length);){var V=N.length;if(o("maybeReadMore read 0"),z.read(0),V===N.length)break}N.readingMore=!1}function F(z){var N=z._readableState;N.readableListening=z.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:z.listenerCount("data")>0&&z.resume()}function H(z){o("readable nexttick read 0"),z.read(0)}function U(z,N){o("resume",N.reading),N.reading||z.read(0),N.resumeScheduled=!1,z.emit("resume"),X(z),N.flowing&&!N.reading&&z.read(0)}function X(z){var N=z._readableState;for(o("flow",N.flowing);N.flowing&&null!==z.read(););}function Z(z,N){return 0===N.length?null:(N.objectMode?V=N.buffer.shift():!z||z>=N.length?(V=N.decoder?N.buffer.join(""):1===N.buffer.length?N.buffer.first():N.buffer.concat(N.length),N.buffer.clear()):V=N.buffer.consume(z,N.decoder),V);var V}function Y(z){var N=z._readableState;o("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,d.nextTick(W,N,z))}function W(z,N){if(o("endReadableNT",z.endEmitted,z.length),!z.endEmitted&&0===z.length&&(z.endEmitted=!0,N.readable=!1,N.emit("end"),z.autoDestroy)){var V=N._writableState;(!V||V.autoDestroy&&V.finished)&&N.destroy()}}function te(z,N){for(var V=0,Q=z.length;V<Q;V++)if(z[V]===N)return V;return-1}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(z){this._readableState&&(this._readableState.destroyed=z)}}),T.prototype.destroy=u.destroy,T.prototype._undestroy=u.undestroy,T.prototype._destroy=function(z,N){N(z)},T.prototype.push=function(z,N){var V,Q=this._readableState;return Q.objectMode?V=!0:"string"==typeof z&&((N=N||Q.defaultEncoding)!==Q.encoding&&(z=i.from(z,N),N=""),V=!0),L(this,z,N,!1,V)},T.prototype.unshift=function(z){return L(this,z,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(z){p||(p=y("string_decoder/").StringDecoder);var N=new p(z);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,Q="";null!==V;)Q+=N.write(V.data),V=V.next;return this._readableState.buffer.clear(),""!==Q&&this._readableState.buffer.push(Q),this._readableState.length=Q.length,this},T.prototype.read=function(z){o("read",z),z=parseInt(z,10);var N=this._readableState,V=z;if(0!==z&&(N.emittedReadable=!1),0===z&&N.needReadable&&((0!==N.highWaterMark?N.length>=N.highWaterMark:N.length>0)||N.ended))return o("read: emitReadable",N.length,N.ended),0===N.length&&N.ended?Y(this):D(this),null;if(0===(z=I(z,N))&&N.ended)return 0===N.length&&Y(this),null;var Q,j=N.needReadable;return o("need readable",j),(0===N.length||N.length-z<N.highWaterMark)&&o("length less than watermark",j=!0),N.ended||N.reading?o("reading or ended",j=!1):j&&(o("do read"),N.reading=!0,N.sync=!0,0===N.length&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(z=I(V,N))),null===(Q=z>0?Z(z,N):null)?(N.needReadable=N.length<=N.highWaterMark,z=0):(N.length-=z,N.awaitDrain=0),0===N.length&&(N.ended||(N.needReadable=!0),V!==z&&N.ended&&Y(this)),null!==Q&&this.emit("data",Q),Q},T.prototype._read=function(z){w(this,new x("_read()"))},T.prototype.pipe=function(z,N){var V=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=z;break;case 1:Q.pipes=[Q.pipes,z];break;default:Q.pipes.push(z)}Q.pipesCount+=1,o("pipe count=%d opts=%j",Q.pipesCount,N);var j=N&&!1===N.end||z===d.stdout||z===d.stderr?ge:K;function K(){o("onend"),z.end()}Q.endEmitted?d.nextTick(j):V.once("end",j),z.on("unpipe",function J(be,Te){o("onunpipe"),be===V&&Te&&!1===Te.hasUnpiped&&(Te.hasUnpiped=!0,o("cleanup"),z.removeListener("close",de),z.removeListener("finish",ue),z.removeListener("drain",re),z.removeListener("error",se),z.removeListener("unpipe",J),V.removeListener("end",K),V.removeListener("end",ge),V.removeListener("data",ce),ie=!0,!Q.awaitDrain||z._writableState&&!z._writableState.needDrain||re())});var be,re=(be=V,function(){var Te=be._readableState;o("pipeOnDrain",Te.awaitDrain),Te.awaitDrain&&Te.awaitDrain--,0===Te.awaitDrain&&t(be,"data")&&(Te.flowing=!0,X(be))});z.on("drain",re);var ie=!1;function ce(be){o("ondata");var Te=z.write(be);o("dest.write",Te),!1===Te&&((1===Q.pipesCount&&Q.pipes===z||Q.pipesCount>1&&-1!==te(Q.pipes,z))&&!ie&&(o("false write response, pause",Q.awaitDrain),Q.awaitDrain++),V.pause())}function se(be){o("onerror",be),ge(),z.removeListener("error",se),0===t(z,"error")&&w(z,be)}function de(){z.removeListener("finish",ue),ge()}function ue(){o("onfinish"),z.removeListener("close",de),ge()}function ge(){o("unpipe"),V.unpipe(z)}return V.on("data",ce),function(be,Te,we){if("function"==typeof be.prependListener)return be.prependListener(Te,we);be._events&&be._events[Te]?Array.isArray(be._events[Te])?be._events[Te].unshift(we):be._events[Te]=[we,be._events[Te]]:be.on(Te,we)}(z,"error",se),z.once("close",de),z.once("finish",ue),z.emit("pipe",V),Q.flowing||(o("pipe resume"),V.resume()),z},T.prototype.unpipe=function(z){var N=this._readableState,V={hasUnpiped:!1};if(0===N.pipesCount)return this;if(1===N.pipesCount)return z&&z!==N.pipes||(z||(z=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,z&&z.emit("unpipe",this,V)),this;if(!z){var Q=N.pipes,j=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var J=0;J<j;J++)Q[J].emit("unpipe",this,{hasUnpiped:!1});return this}var K=te(N.pipes,z);return-1===K||(N.pipes.splice(K,1),N.pipesCount-=1,1===N.pipesCount&&(N.pipes=N.pipes[0]),z.emit("unpipe",this,V)),this},T.prototype.addListener=T.prototype.on=function(z,N){var V=e.prototype.on.call(this,z,N),Q=this._readableState;return"data"===z?(Q.readableListening=this.listenerCount("readable")>0,!1!==Q.flowing&&this.resume()):"readable"===z&&(Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,o("on readable",Q.length,Q.reading),Q.length?D(this):Q.reading||d.nextTick(H,this))),V},T.prototype.removeListener=function(z,N){var V=e.prototype.removeListener.call(this,z,N);return"readable"===z&&d.nextTick(F,this),V},T.prototype.removeAllListeners=function(z){var N=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==z&&void 0!==z||d.nextTick(F,this),N},T.prototype.resume=function(){var V,z=this._readableState;return z.flowing||(o("resume"),z.flowing=!z.readableListening,this,(V=z).resumeScheduled||(V.resumeScheduled=!0,d.nextTick(U,this,V))),z.paused=!1,this},T.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(z){var N=this,V=this._readableState,Q=!1;for(var j in z.on("end",function(){if(o("wrapped end"),V.decoder&&!V.ended){var K=V.decoder.end();K&&K.length&&N.push(K)}N.push(null)}),z.on("data",function(K){o("wrapped data"),V.decoder&&(K=V.decoder.write(K)),V.objectMode&&null==K||(V.objectMode||K&&K.length)&&(N.push(K)||(Q=!0,z.pause()))}),z)void 0===this[j]&&"function"==typeof z[j]&&(this[j]=function(K){return function(){return z[K].apply(z,arguments)}}(j));for(var J=0;J<b.length;J++)z.on(b[J],this.emit.bind(this,b[J]));return this._read=function(K){o("wrapped _read",K),Q&&(Q=!1,z.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=y("./internal/streams/async_iterator")),s(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(z){this._readableState&&(this._readableState.flowing=z)}}),T._fromList=Z,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(z,N){return void 0===a&&(a=y("./internal/streams/from")),a(T,z,N)})}).call(this)}).call(this,y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(y,$,ee){"use strict";$.exports=o;var d=y("../errors").codes,g=d.ERR_METHOD_NOT_IMPLEMENTED,_=d.ERR_MULTIPLE_CALLBACK,t=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=d.ERR_TRANSFORM_WITH_LENGTH_0,i=y("./_stream_duplex");function r(s,a){var c=this._transformState;c.transforming=!1;var u=c.writecb;if(null===u)return this.emit("error",new _);c.writechunk=null,c.writecb=null,null!=a&&this.push(a),u(s);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function o(s){if(!(this instanceof o))return new o(s);i.call(this,s),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&("function"==typeof s.transform&&(this._transform=s.transform),"function"==typeof s.flush&&(this._flush=s.flush)),this.on("prefinish",n)}function n(){var s=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush(function(a,c){p(s,a,c)})}function p(s,a,c){if(a)return s.emit("error",a);if(null!=c&&s.push(c),s._writableState.length)throw new e;if(s._transformState.transforming)throw new t;return s.push(null)}y("inherits")(o,i),o.prototype.push=function(s,a){return this._transformState.needTransform=!1,i.prototype.push.call(this,s,a)},o.prototype._transform=function(s,a,c){c(new g("_transform()"))},o.prototype._write=function(s,a,c){var u=this._transformState;if(u.writecb=c,u.writechunk=s,u.writeencoding=a,!u.transforming){var h=this._readableState;(u.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},o.prototype._read=function(s){var a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},o.prototype._destroy=function(s,a){i.prototype._destroy.call(this,s,function(c){a(c)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(y,$,ee){(function(d,g){(function(){"use strict";function _(R){var F=this;this.next=null,this.entry=null,this.finish=function(){!function(H,U,X){var Z=H.entry;for(H.entry=null;Z;){var Y=Z.callback;U.pendingcb--,Y(undefined),Z=Z.next}U.corkedRequestsFree.next=H}(F,R)}}var t;$.exports=T,T.WritableState=k;var n,e={deprecate:y("util-deprecate")},i=y("./internal/streams/stream"),r=y("buffer").Buffer,o=g.Uint8Array||function(){},p=y("./internal/streams/destroy"),s=y("./internal/streams/state").getHighWaterMark,a=y("../errors").codes,c=a.ERR_INVALID_ARG_TYPE,u=a.ERR_METHOD_NOT_IMPLEMENTED,h=a.ERR_MULTIPLE_CALLBACK,v=a.ERR_STREAM_CANNOT_PIPE,f=a.ERR_STREAM_DESTROYED,l=a.ERR_STREAM_NULL_VALUES,x=a.ERR_STREAM_WRITE_AFTER_END,m=a.ERR_UNKNOWN_ENCODING,w=p.errorOrDestroy;function b(){}function k(R,F,H){t=t||y("./_stream_duplex"),"boolean"!=typeof H&&(H=F instanceof t),this.objectMode=!!(R=R||{}).objectMode,H&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=s(this,R,"writableHighWaterMark",H),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===R.decodeStrings),this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){!function(Z,Y){var V,W=Z._writableState,te=W.sync,z=W.writecb;if("function"!=typeof z)throw new h;if((V=W).writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0,Y)!function(V,Q,j,J,K){--Q.pendingcb,j?(d.nextTick(K,J),d.nextTick(C,V,Q),V._writableState.errorEmitted=!0,w(V,J)):(K(J),V._writableState.errorEmitted=!0,w(V,J),C(V,Q))}(Z,W,te,Y,z);else{var N=D(W)||Z.destroyed;N||W.corked||W.bufferProcessing||!W.bufferedRequest||I(Z,W),te?d.nextTick(A,Z,W,N,z):A(Z,W,N,z)}}(F,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _(this)}function T(R){var F=this instanceof(t=t||y("./_stream_duplex"));if(!F&&!n.call(T,this))return new T(R);this._writableState=new k(R,this,F),this.writable=!0,R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final)),i.call(this)}function L(R,F,H,U,X,Z,Y){F.writelen=U,F.writecb=Y,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new f("write")):H?R._writev(X,F.onwrite):R._write(X,Z,F.onwrite),F.sync=!1}function A(R,F,H,U){var X,Z;H||(X=R,0===(Z=F).length&&Z.needDrain&&(Z.needDrain=!1,X.emit("drain"))),F.pendingcb--,U(),C(R,F)}function I(R,F){F.bufferProcessing=!0;var H=F.bufferedRequest;if(R._writev&&H&&H.next){var X=new Array(F.bufferedRequestCount),Z=F.corkedRequestsFree;Z.entry=H;for(var Y=0,W=!0;H;)X[Y]=H,H.isBuf||(W=!1),H=H.next,Y+=1;X.allBuffers=W,L(R,F,!0,F.length,X,"",Z.finish),F.pendingcb++,F.lastBufferedRequest=null,Z.next?(F.corkedRequestsFree=Z.next,Z.next=null):F.corkedRequestsFree=new _(F),F.bufferedRequestCount=0}else{for(;H;){var te=H.chunk;if(L(R,F,!1,F.objectMode?1:te.length,te,H.encoding,H.callback),H=H.next,F.bufferedRequestCount--,F.writing)break}null===H&&(F.lastBufferedRequest=null)}F.bufferedRequest=H,F.bufferProcessing=!1}function D(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function S(R,F){R._final(function(H){F.pendingcb--,H&&w(R,H),F.prefinished=!0,R.emit("prefinish"),C(R,F)})}function C(R,F){var X,Z,H=D(F);if(H&&(X=R,(Z=F).prefinished||Z.finalCalled||("function"!=typeof X._final||Z.destroyed?(Z.prefinished=!0,X.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,d.nextTick(S,X,Z))),0===F.pendingcb&&(F.finished=!0,R.emit("finish"),F.autoDestroy))){var U=R._readableState;(!U||U.autoDestroy&&U.endEmitted)&&R.destroy()}return H}y("inherits")(T,i),k.prototype.getBuffer=function(){for(var R=this.bufferedRequest,F=[];R;)F.push(R),R=R.next;return F},function(){try{Object.defineProperty(k.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(R){return!!n.call(this,R)||this===T&&R&&R._writableState instanceof k}})):n=function(R){return R instanceof this},T.prototype.pipe=function(){w(this,new v)},T.prototype.write=function(R,F,H){var U,W,te,z,X=this._writableState,Z=!1,Y=!X.objectMode&&(r.isBuffer(U=R)||U instanceof o);return Y&&!r.isBuffer(R)&&(R=r.from(R)),"function"==typeof F&&(H=F,F=null),Y?F="buffer":F||(F=X.defaultEncoding),"function"!=typeof H&&(H=b),X.ending?(W=this,te=H,z=new x,w(W,z),d.nextTick(te,z)):(Y||function(W,te,z,N){var V;return null===z?V=new l:"string"==typeof z||te.objectMode||(V=new c("chunk",["string","Buffer"],z)),!V||(w(W,V),d.nextTick(N,V),!1)}(this,X,R,H))&&(X.pendingcb++,Z=function(W,te,z,N,V,Q){if(!z){var j=(ce=N,(ie=te).objectMode||!1===ie.decodeStrings||"string"!=typeof ce||(ce=r.from(ce,V)),ce);N!==j&&(z=!0,V="buffer",N=j)}var ie,ce,J=te.objectMode?1:N.length;te.length+=J;var K=te.length<te.highWaterMark;if(K||(te.needDrain=!0),te.writing||te.corked){var re=te.lastBufferedRequest;te.lastBufferedRequest={chunk:N,encoding:V,isBuf:z,callback:Q,next:null},re?re.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else L(W,te,!1,J,N,V,Q);return K}(this,X,Y,R,F,H)),Z},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||I(this,R))},T.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new m(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(R,F,H){H(new u("_write()"))},T.prototype._writev=null,T.prototype.end=function(R,F,H){var X,Z,Y,U=this._writableState;return"function"==typeof R?(H=R,R=null,F=null):"function"==typeof F&&(H=F,F=null),null!=R&&this.write(R,F),U.corked&&(U.corked=1,this.uncork()),U.ending||(X=this,Y=H,(Z=U).ending=!0,C(X,Z),Y&&(Z.finished?d.nextTick(Y):X.once("finish",Y)),Z.ended=!0,X.writable=!1),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),T.prototype.destroy=p.destroy,T.prototype._undestroy=p.undestroy,T.prototype._destroy=function(R,F){F(R)}}).call(this)}).call(this,y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(y,$,ee){(function(d){(function(){"use strict";var g;function _(f,l,x){return l in f?Object.defineProperty(f,l,{value:x,enumerable:!0,configurable:!0,writable:!0}):f[l]=x,f}var t=y("./end-of-stream"),e=Symbol("lastResolve"),i=Symbol("lastReject"),r=Symbol("error"),o=Symbol("ended"),n=Symbol("lastPromise"),p=Symbol("handlePromise"),s=Symbol("stream");function a(f,l){return{value:f,done:l}}function c(f){var l=f[e];if(null!==l){var x=f[s].read();null!==x&&(f[n]=null,f[e]=null,f[i]=null,l(a(x,!1)))}}function u(f){d.nextTick(c,f)}var h=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((_(g={get stream(){return this[s]},next:function(){var f=this,l=this[r];if(null!==l)return Promise.reject(l);if(this[o])return Promise.resolve(a(void 0,!0));if(this[s].destroyed)return new Promise(function(b,k){d.nextTick(function(){f[r]?k(f[r]):b(a(void 0,!0))})});var x,b,k,m=this[n];if(m)x=new Promise((b=m,k=this,function(T,L){b.then(function(){k[o]?T(a(void 0,!0)):k[p](T,L)},L)}));else{var w=this[s].read();if(null!==w)return Promise.resolve(a(w,!1));x=new Promise(this[p])}return this[n]=x,x}},Symbol.asyncIterator,function(){return this}),_(g,"return",function(){var f=this;return new Promise(function(l,x){f[s].destroy(null,function(m){m?x(m):l(a(void 0,!0))})})}),g),h);$.exports=function(f){var l,x=Object.create(v,(_(l={},s,{value:f,writable:!0}),_(l,e,{value:null,writable:!0}),_(l,i,{value:null,writable:!0}),_(l,r,{value:null,writable:!0}),_(l,o,{value:f._readableState.endEmitted,writable:!0}),_(l,p,{value:function(m,w){var b=x[s].read();b?(x[n]=null,x[e]=null,x[i]=null,m(a(b,!1))):(x[e]=m,x[i]=w)},writable:!0}),l));return x[n]=null,t(f,function(m){if(m&&"ERR_STREAM_PREMATURE_CLOSE"!==m.code){var w=x[i];return null!==w&&(x[n]=null,x[e]=null,x[i]=null,w(m)),void(x[r]=m)}var b=x[e];null!==b&&(x[n]=null,x[e]=null,x[i]=null,b(a(void 0,!0))),x[o]=!0}),f.on("readable",u.bind(null,x)),x}}).call(this)}).call(this,y("_process"))},{"./end-of-stream":295,_process:277}],293:[function(y,$,ee){"use strict";function d(r,o){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(r);o&&(p=p.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,p)}return n}function g(r,o,n){return o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function _(r,o){for(var n=0;n<o.length;n++){var p=o[n];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(r,p.key,p)}}var t=y("buffer").Buffer,e=y("util").inspect,i=e&&e.custom||"inspect";$.exports=function(){function r(){(function(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")})(this,r),this.head=null,this.tail=null,this.length=0}var o,n;return o=r,(n=[{key:"push",value:function(s){var a={data:s,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length}},{key:"unshift",value:function(s){var a={data:s,next:this.head};0===this.length&&(this.tail=a),this.head=a,++this.length}},{key:"shift",value:function(){if(0!==this.length){var s=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(0===this.length)return"";for(var a=this.head,c=""+a.data;a=a.next;)c+=s+a.data;return c}},{key:"concat",value:function(s){if(0===this.length)return t.alloc(0);for(var h=t.allocUnsafe(s>>>0),v=this.head,f=0;v;)t.prototype.copy.call(v.data,h,f),f+=v.data.length,v=v.next;return h}},{key:"consume",value:function(s,a){var c;return s<this.head.data.length?(c=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):c=s===this.head.data.length?this.shift():a?this._getString(s):this._getBuffer(s),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var a=this.head,c=1,u=a.data;for(s-=u.length;a=a.next;){var h=a.data,v=s>h.length?h.length:s;if(u+=v===h.length?h:h.slice(0,s),0==(s-=v)){v===h.length?(++c,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=h.slice(v));break}++c}return this.length-=c,u}},{key:"_getBuffer",value:function(s){var a=t.allocUnsafe(s),c=this.head,u=1;for(c.data.copy(a),s-=c.data.length;c=c.next;){var h=c.data,v=s>h.length?h.length:s;if(h.copy(a,a.length-s,0,v),0==(s-=v)){v===h.length?(++u,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=h.slice(v));break}++u}return this.length-=u,a}},{key:i,value:function(s,a){return e(this,function(c){for(var u=1;u<arguments.length;u++){var h=null!=arguments[u]?arguments[u]:{};u%2?d(Object(h),!0).forEach(function(v){g(c,v,h[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(h)):d(Object(h)).forEach(function(v){Object.defineProperty(c,v,Object.getOwnPropertyDescriptor(h,v))})}return c}({},a,{depth:0,customInspect:!1}))}}])&&_(o.prototype,n),r}()},{buffer:85,util:83}],294:[function(y,$,ee){(function(d){(function(){"use strict";function g(e,i){t(e,i),_(e)}function _(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function t(e,i){e.emit("error",i)}$.exports={destroy:function(e,i){var r=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(t,this,e)):d.nextTick(t,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(p){!i&&p?r._writableState?r._writableState.errorEmitted?d.nextTick(_,r):(r._writableState.errorEmitted=!0,d.nextTick(g,r,p)):d.nextTick(g,r,p):i?(d.nextTick(_,r),i(p)):d.nextTick(_,r)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,i){var r=e._readableState,o=e._writableState;r&&r.autoDestroy||o&&o.autoDestroy?e.destroy(i):e.emit("error",i)}}}).call(this)}).call(this,y("_process"))},{_process:277}],295:[function(y,$,ee){"use strict";var d=y("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function g(){}$.exports=function _(t,e,i){if("function"==typeof e)return _(t,null,e);var f,l;e||(e={}),f=i||g,l=!1,i=function(){if(!l){l=!0;for(var x=arguments.length,m=new Array(x),w=0;w<x;w++)m[w]=arguments[w];f.apply(this,m)}};var r=e.readable||!1!==e.readable&&t.readable,o=e.writable||!1!==e.writable&&t.writable,n=function(){t.writable||s()},p=t._writableState&&t._writableState.finished,s=function(){o=!1,p=!0,r||i.call(t)},a=t._readableState&&t._readableState.endEmitted,c=function(){r=!1,a=!0,o||i.call(t)},u=function(f){i.call(t,f)},h=function(){var f;return r&&!a?(t._readableState&&t._readableState.ended||(f=new d),i.call(t,f)):o&&!p?(t._writableState&&t._writableState.ended||(f=new d),i.call(t,f)):void 0},v=function(){t.req.on("finish",s)};return function(f){return f.setHeader&&"function"==typeof f.abort}(t)?(t.on("complete",s),t.on("abort",h),t.req?v():t.on("request",v)):o&&!t._writableState&&(t.on("end",n),t.on("close",n)),t.on("end",c),t.on("finish",s),!1!==e.error&&t.on("error",u),t.on("close",h),function(){t.removeListener("complete",s),t.removeListener("abort",h),t.removeListener("request",v),t.req&&t.req.removeListener("finish",s),t.removeListener("end",n),t.removeListener("close",n),t.removeListener("finish",s),t.removeListener("end",c),t.removeListener("error",u),t.removeListener("close",h)}}},{"../../../errors":286}],296:[function(y,$,ee){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(y,$,ee){"use strict";var d,g=y("../../../errors").codes,_=g.ERR_MISSING_ARGS,t=g.ERR_STREAM_DESTROYED;function e(p){if(p)throw p}function i(p,s,a,c){var v,f;v=c,f=!1,c=function(){f||(f=!0,v.apply(void 0,arguments))};var u=!1;p.on("close",function(){u=!0}),void 0===d&&(d=y("./end-of-stream")),d(p,{readable:s,writable:a},function(v){if(v)return c(v);u=!0,c()});var h=!1;return function(v){if(!u&&!h)return h=!0,function(f){return f.setHeader&&"function"==typeof f.abort}(p)?p.abort():"function"==typeof p.destroy?p.destroy():void c(v||new t("pipe"))}}function r(p){p()}function o(p,s){return p.pipe(s)}function n(p){return p.length?"function"!=typeof p[p.length-1]?e:p.pop():e}$.exports=function(){for(var p=arguments.length,s=new Array(p),a=0;a<p;a++)s[a]=arguments[a];var c,u=n(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new _("streams");var h=s.map(function(v,f){var l=f<s.length-1;return i(v,l,f>0,function(x){c||(c=x),x&&h.forEach(r),l||(h.forEach(r),u(c))})});return s.reduce(o)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(y,$,ee){"use strict";var d=y("../../../errors").codes.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function(g,_,t,e){var r,i=null!=(r=_).highWaterMark?r.highWaterMark:e?r[t]:null;if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new d(e?t:"highWaterMark",i);return Math.floor(i)}return g.objectMode?16:16384}}},{"../../../errors":286}],299:[function(y,$,ee){$.exports=y("events").EventEmitter},{events:84}],300:[function(y,$,ee){"use strict";var d=y("safe-buffer").Buffer,g=d.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _(a){var c;switch(this.encoding=function(u){var h=function(v){if(!v)return"utf8";for(var f;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(f)return;v=(""+v).toLowerCase(),f=!0}}(u);if("string"!=typeof h&&(d.isEncoding===g||!g(u)))throw new Error("Unknown encoding: "+u);return h||u}(a),this.encoding){case"utf16le":this.text=i,this.end=r,c=4;break;case"utf8":this.fillLast=e,c=4;break;case"base64":this.text=o,this.end=n,c=3;break;default:return this.write=p,void(this.end=s)}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(c)}function t(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function e(a){var c=this.lastTotal-this.lastNeed,u=function(h,v,f){if(128!=(192&v[0]))return h.lastNeed=0,"\ufffd";if(h.lastNeed>1&&v.length>1){if(128!=(192&v[1]))return h.lastNeed=1,"\ufffd";if(h.lastNeed>2&&v.length>2&&128!=(192&v[2]))return h.lastNeed=2,"\ufffd"}}(this,a);return void 0!==u?u:this.lastNeed<=a.length?(a.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,c,0,a.length),void(this.lastNeed-=a.length))}function i(a,c){if((a.length-c)%2==0){var u=a.toString("utf16le",c);if(u){var h=u.charCodeAt(u.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",c,a.length-1)}function r(a){var c=a&&a.length?this.write(a):"";return this.lastNeed?c+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):c}function o(a,c){var u=(a.length-c)%3;return 0===u?a.toString("base64",c):(this.lastNeed=3-u,this.lastTotal=3,1===u?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",c,a.length-u))}function n(a){var c=a&&a.length?this.write(a):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function p(a){return a.toString(this.encoding)}function s(a){return a&&a.length?this.write(a):""}ee.StringDecoder=_,_.prototype.write=function(a){if(0===a.length)return"";var c,u;if(this.lastNeed){if(void 0===(c=this.fillLast(a)))return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<a.length?c?c+this.text(a,u):this.text(a,u):c||""},_.prototype.end=function(a){var c=a&&a.length?this.write(a):"";return this.lastNeed?c+"\ufffd":c},_.prototype.text=function(a,c){var u=function(v,f,l){var x=f.length-1;if(x<l)return 0;var m=t(f[x]);return m>=0?(m>0&&(v.lastNeed=m-1),m):--x<l||-2===m?0:(m=t(f[x]))>=0?(m>0&&(v.lastNeed=m-2),m):--x<l||-2===m?0:(m=t(f[x]))>=0?(m>0&&(2===m?m=0:v.lastNeed=m-3),m):0}(this,a,c);if(!this.lastNeed)return a.toString("utf8",c);this.lastTotal=u;var h=a.length-(u-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",c,h)},_.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},{"safe-buffer":284}],301:[function(y,$,ee){(function(d,g){(function(){var _=y("assert"),t=y("debug")("stream-parser");function e(u){t("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=-1,u._parserCallback=null,"function"==typeof u.push&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function i(u,h){_(!this._parserCallback,'there is already a "callback" set!'),_(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||e(this),t("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=h,this._parserState=0}function r(u,h){_(!this._parserCallback,'there is already a "callback" set!'),_(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||e(this),t("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=h,this._parserState=1}function o(u,h){_(!this._parserCallback,'There is already a "callback" set!'),_(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||e(this),t("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=h,this._parserState=2}function n(u,h,v){this._parserInit||e(this),t("write(%o bytes)",u.length),"function"==typeof h&&(v=h),a(this,u,null,v)}function p(u,h,v){this._parserInit||e(this),t("transform(%o bytes)",u.length),"function"!=typeof h&&(h=this._parserOutput),a(this,u,h,v)}function s(u,h,v,f){if(u._parserBytesLeft-=h.length,t("%o bytes left for stream piece",u._parserBytesLeft),0===u._parserState?(u._parserBuffers.push(h),u._parserBuffered+=h.length):2===u._parserState&&v(h),0!==u._parserBytesLeft)return f;var l=u._parserCallback;if(l&&0===u._parserState&&u._parserBuffers.length>1&&(h=g.concat(u._parserBuffers,u._parserBuffered)),0!==u._parserState&&(h=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=-1,u._parserBuffers.splice(0),l){var x=[];h&&x.push(h),v&&x.push(v);var m=l.length>x.length;m&&x.push(c(f));var w=l.apply(u,x);if(!m||f===w)return f}}$.exports=function(u){var h=u&&"function"==typeof u._transform;if(!(h||u&&"function"==typeof u._write))throw new Error("must pass a Writable or Transform stream in");t("extending Parser into stream"),u._bytes=i,u._skipBytes=r,h&&(u._passthrough=o),h?u._transform=p:u._write=n};var a=c(function u(h,v,f,l){return h._parserBytesLeft<=0?l(new Error("got data but not currently parsing anything")):v.length<=h._parserBytesLeft?function(){return s(h,v,f,l)}:function(){var x=v.slice(0,h._parserBytesLeft);return s(h,x,f,function(m){return m?l(m):v.length>x.length?function(){return u(h,v.slice(x.length),f,l)}:void 0})}});function c(u){return function(){for(var h=u.apply(this,arguments);"function"==typeof h;)h=h();return h}}}).call(this)}).call(this,y("_process"),y("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(y,$,ee){(function(d){(function(){function g(){var _;try{_=ee.storage.debug}catch(t){}return!_&&void 0!==d&&"env"in d&&(_=d.env.DEBUG),_}(ee=$.exports=y("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ee.formatArgs=function(_){var t=this.useColors;if(_[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+_[0]+(t?"%c ":" ")+"+"+ee.humanize(this.diff),t){var e="color: "+this.color;_.splice(1,0,e,"color: inherit");var i=0,r=0;_[0].replace(/%[a-zA-Z%]/g,function(o){"%%"!==o&&(i++,"%c"===o&&(r=i))}),_.splice(r,0,e)}},ee.save=function(_){try{null==_?ee.storage.removeItem("debug"):ee.storage.debug=_}catch(t){}},ee.load=g,ee.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ee.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(_){}}(),ee.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ee.formatters.j=function(_){try{return JSON.stringify(_)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},ee.enable(g())}).call(this)}).call(this,y("_process"))},{"./debug":303,_process:277}],303:[function(y,$,ee){var d;function g(_){function t(){if(t.enabled){var e=t,i=+new Date;e.diff=i-(d||i),e.prev=d,e.curr=i,d=i;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=ee.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var p=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(a,c){if("%%"===a)return a;p++;var u=ee.formatters[c];return"function"==typeof u&&(a=u.call(e,o[p]),o.splice(p,1),p--),a}),ee.formatArgs.call(e,o),(t.log||ee.log||console.log.bind(console)).apply(e,o)}}return t.namespace=_,t.enabled=ee.enabled(_),t.useColors=ee.useColors(),t.color=function(e){var i,r=0;for(i in e)r=(r<<5)-r+e.charCodeAt(i),r|=0;return ee.colors[Math.abs(r)%ee.colors.length]}(_),"function"==typeof ee.init&&ee.init(t),t}(ee=$.exports=g.debug=g.default=g).coerce=function(_){return _ instanceof Error?_.stack||_.message:_},ee.disable=function(){ee.enable("")},ee.enable=function(_){ee.save(_),ee.names=[],ee.skips=[];for(var t=("string"==typeof _?_:"").split(/[\s,]+/),e=t.length,i=0;i<e;i++)t[i]&&("-"===(_=t[i].replace(/\*/g,".*?"))[0]?ee.skips.push(new RegExp("^"+_.substr(1)+"$")):ee.names.push(new RegExp("^"+_+"$")))},ee.enabled=function(_){var t,e;for(t=0,e=ee.skips.length;t<e;t++)if(ee.skips[t].test(_))return!1;for(t=0,e=ee.names.length;t<e;t++)if(ee.names[t].test(_))return!0;return!1},ee.humanize=y("ms"),ee.names=[],ee.skips=[],ee.formatters={}},{ms:304}],304:[function(y,$,ee){var d=1e3,g=6e4,_=60*g,t=24*_;function e(i,r,o){if(!(i<r))return i<1.5*r?Math.floor(i/r)+" "+o:Math.ceil(i/r)+" "+o+"s"}$.exports=function(i,r){r=r||{};var o,p,n=typeof i;if("string"===n&&i.length>0)return function(p){if(!((p=String(p)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*t;case"hours":case"hour":case"hrs":case"hr":case"h":return a*_;case"minutes":case"minute":case"mins":case"min":case"m":return a*g;case"seconds":case"second":case"secs":case"sec":case"s":return a*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(i);if("number"===n&&!1===isNaN(i))return r.long?e(o=i,t,"day")||e(o,_,"hour")||e(o,g,"minute")||e(o,d,"second")||o+" ms":(p=i)>=t?Math.round(p/t)+"d":p>=_?Math.round(p/_)+"h":p>=g?Math.round(p/g)+"m":p>=d?Math.round(p/d)+"s":p+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}},{}],305:[function(y,$,ee){"use strict";var d=y("parenthesis");$.exports=function(g,_,t){if(null==g)throw Error("First argument should be a string");if(null==_)throw Error("Separator should be a string or a RegExp");t?("string"==typeof t||Array.isArray(t))&&(t={ignore:t}):t={},null==t.escape&&(t.escape=!0),null==t.ignore?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof t.ignore&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(s){return 1===s.length&&(s+=s),s}));var e=d.parse(g,{flat:!0,brackets:t.ignore}),i=e[0].split(_);if(t.escape){for(var r=[],o=0;o<i.length;o++){var n=i[o];"\\"===n[n.length-1]&&"\\"!==n[n.length-2]?(r.push(n+_+i[o+1]),o++):r.push(n)}i=r}for(o=0;o<i.length;o++)e[0]=i[o],i[o]=d.stringify(e,{flat:!0});return i}},{parenthesis:248}],306:[function(y,$,ee){"use strict";$.exports=function(d){for(var g=d.length,_=new Array(g),t=new Array(g),e=new Array(g),i=new Array(g),r=new Array(g),o=new Array(g),n=0;n<g;++n)_[n]=-1,t[n]=0,e[n]=!1,i[n]=0,r[n]=-1,o[n]=[];var p,s=0,a=[],c=[];function u(f){var l=[f],x=[f];for(_[f]=t[f]=s,e[f]=!0,s+=1;x.length>0;){var m=d[f=x[x.length-1]];if(i[f]<m.length){for(var w=i[f];w<m.length;++w){var b=m[w];if(_[b]<0){_[b]=t[b]=s,e[b]=!0,s+=1,l.push(b),x.push(b);break}e[b]&&(t[f]=0|Math.min(t[f],t[b])),r[b]>=0&&o[f].push(r[b])}i[f]=w}else{if(t[f]===_[f]){var k=[],T=[],L=0;for(w=l.length-1;w>=0;--w){var A=l[w];if(e[A]=!1,k.push(A),T.push(o[A]),L+=o[A].length,r[A]=a.length,A===f){l.length=w;break}}a.push(k);var I=new Array(L);for(w=0;w<T.length;w++)for(var D=0;D<T[w].length;D++)I[--L]=T[w][D];c.push(I)}x.pop()}}}for(n=0;n<g;++n)_[n]<0&&u(n);for(n=0;n<c.length;n++){var h=c[n];if(0!==h.length){h.sort(function(f,l){return f-l}),p=[h[0]];for(var v=1;v<h.length;v++)h[v]!==h[v-1]&&p.push(h[v]);c[n]=p}}return{components:a,adjacencyList:c}}},{}],307:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var g=2*Math.PI,_=function(i,r,o,n,p,s,a){var c=i.x,u=i.y;return{x:n*(c*=r)-p*(u*=o)+s,y:p*c+n*u+a}},t=function(i,r){var o=1.5707963267948966===r?.551915024494:-1.5707963267948966===r?-.551915024494:4/3*Math.tan(r/4),n=Math.cos(i),p=Math.sin(i),s=Math.cos(i+r),a=Math.sin(i+r);return[{x:n-p*o,y:p+n*o},{x:s+a*o,y:a-s*o},{x:s,y:a}]},e=function(i,r,o,n){var p=i*o+r*n;return p>1&&(p=1),p<-1&&(p=-1),(i*n-r*o<0?-1:1)*Math.acos(p)};ee.default=function(i){var r=i.px,o=i.py,n=i.cx,p=i.cy,s=i.rx,a=i.ry,c=i.xAxisRotation,u=void 0===c?0:c,h=i.largeArcFlag,v=void 0===h?0:h,f=i.sweepFlag,l=void 0===f?0:f,x=[];if(0===s||0===a)return[];var m=Math.sin(u*g/360),w=Math.cos(u*g/360),b=w*(r-n)/2+m*(o-p)/2,k=-m*(r-n)/2+w*(o-p)/2;if(0===b&&0===k)return[];s=Math.abs(s),a=Math.abs(a);var T=Math.pow(b,2)/Math.pow(s,2)+Math.pow(k,2)/Math.pow(a,2);T>1&&(s*=Math.sqrt(T),a*=Math.sqrt(T));var A=function(i,r){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return function(o,n){var p=[],s=!0,a=!1,c=void 0;try{for(var u,h=o[Symbol.iterator]();!(s=(u=h.next()).done)&&(p.push(u.value),!n||p.length!==n);s=!0);}catch(v){a=!0,c=v}finally{try{!s&&h.return&&h.return()}finally{if(a)throw c}}return p}(i,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(U,X,Z,Y,W,te,z,N,V,Q,j,J){var K=Math.pow(W,2),re=Math.pow(te,2),ie=Math.pow(j,2),ce=Math.pow(J,2),se=K*re-K*ce-re*ie;se<0&&(se=0),se/=K*ce+re*ie;var de=(se=Math.sqrt(se)*(z===N?-1:1))*W/te*J,ue=se*-te/W*j,ge=Q*de-V*ue+(U+Z)/2,be=V*de+Q*ue+(X+Y)/2,Te=(j-de)/W,we=(J-ue)/te,Le=(-j-de)/W,fe=(-J-ue)/te,ve=e(1,0,Te,we),Me=e(Te,we,Le,fe);return 0===N&&Me>0&&(Me-=g),1===N&&Me<0&&(Me+=g),[ge,be,ve,Me]}(r,o,n,p,s,a,v,l,m,w,b,k),4),I=A[0],D=A[1],S=A[2],C=A[3],R=Math.abs(C)/(g/4);Math.abs(1-R)<1e-7&&(R=1);var F=Math.max(Math.ceil(R),1);C/=F;for(var H=0;H<F;H++)x.push(t(S,C)),S+=C;return x.map(function(U){var X=_(U[0],s,a,w,m,I,D),Z=X.x,Y=X.y,W=_(U[1],s,a,w,m,I,D),te=W.x,z=W.y,N=_(U[2],s,a,w,m,I,D);return{x1:Z,y1:Y,x2:te,y2:z,x:N.x,y:N.y}})},$.exports=ee.default},{}],308:[function(y,$,ee){"use strict";var d=y("parse-svg-path"),g=y("abs-svg-path"),_=y("normalize-svg-path"),t=y("is-svg-path"),e=y("assert");$.exports=function(i){if(Array.isArray(i)&&1===i.length&&"string"==typeof i[0]&&(i=i[0]),"string"==typeof i&&(e(t(i),"String is not an SVG path."),i=d(i)),e(Array.isArray(i),"Argument should be a string or an array of path segments."),i=g(i),!(i=_(i)).length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],o=0,n=i.length;o<n;o++)for(var p=i[o].slice(1),s=0;s<p.length;s+=2)p[s+0]<r[0]&&(r[0]=p[s+0]),p[s+1]<r[1]&&(r[1]=p[s+1]),p[s+0]>r[2]&&(r[2]=p[s+0]),p[s+1]>r[3]&&(r[3]=p[s+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(y,$,ee){"use strict";$.exports=function(t){for(var e,i=[],r=0,o=0,n=0,p=0,s=null,a=null,c=0,u=0,h=0,v=t.length;h<v;h++){var f=t[h],l=f[0];switch(l){case"M":n=f[1],p=f[2];break;case"A":var x=d({px:c,py:u,cx:f[6],cy:f[7],rx:f[1],ry:f[2],xAxisRotation:f[3],largeArcFlag:f[4],sweepFlag:f[5]});if(!x.length)continue;for(var m,w=0;w<x.length;w++)f=["C",(m=x[w]).x1,m.y1,m.x2,m.y2,m.x,m.y],w<x.length-1&&i.push(f);break;case"S":var b=c,k=u;"C"!=e&&"S"!=e||(b+=b-r,k+=k-o),f=["C",b,k,f[1],f[2],f[3],f[4]];break;case"T":"Q"==e||"T"==e?(s=2*c-s,a=2*u-a):(s=c,a=u),f=_(c,u,s,a,f[1],f[2]);break;case"Q":s=f[1],a=f[2],f=_(c,u,f[1],f[2],f[3],f[4]);break;case"L":f=g(c,u,f[1],f[2]);break;case"H":f=g(c,u,f[1],u);break;case"V":f=g(c,u,c,f[1]);break;case"Z":f=g(c,u,n,p)}e=l,c=f[f.length-2],u=f[f.length-1],f.length>4?(r=f[f.length-4],o=f[f.length-3]):(r=c,o=u),i.push(f)}return i};var d=y("svg-arc-to-cubic-bezier");function g(t,e,i,r){return["C",t,e,i,r,i,r]}function _(t,e,i,r,o,n){return["C",t/3+2/3*i,e/3+2/3*r,o/3+2/3*i,n/3+2/3*r,o,n]}},{"svg-arc-to-cubic-bezier":307}],310:[function(y,$,ee){"use strict";var d,g=y("svg-path-bounds"),_=y("parse-svg-path"),t=y("draw-svg-path"),e=y("is-svg-path"),i=y("bitmap-sdf"),r=document.createElement("canvas"),o=r.getContext("2d");$.exports=function(n,p){if(!e(n))throw Error("Argument should be valid svg path string");var s,a;p||(p={}),p.shape?(s=p.shape[0],a=p.shape[1]):(s=r.width=p.w||p.width||200,a=r.height=p.h||p.height||200);var c=Math.min(s,a),u=p.stroke||0,h=p.viewbox||p.viewBox||g(n),v=[s/(h[2]-h[0]),a/(h[3]-h[1])],f=Math.min(v[0]||0,v[1]||0)/2;if(o.fillStyle="black",o.fillRect(0,0,s,a),o.fillStyle="white",u&&("number"!=typeof u&&(u=1),o.strokeStyle=u>0?"white":"black",o.lineWidth=Math.abs(u)),o.translate(.5*s,.5*a),o.scale(f,f),function(){if(null!=d)return d;var m=document.createElement("canvas").getContext("2d");if(m.canvas.width=m.canvas.height=1,!window.Path2D)return d=!1;var w=new Path2D("M0,0h1v1h-1v-1Z");m.fillStyle="black",m.fill(w);var b=m.getImageData(0,0,1,1);return d=b&&b.data&&255===b.data[3]}()){var l=new Path2D(n);o.fill(l),u&&o.stroke(l)}else{var x=_(n);t(o,x),o.fill(),u&&o.stroke()}return o.setTransform(1,0,0,1,0,0),i(o,{cutoff:null!=p.cutoff?p.cutoff:.5,radius:null!=p.radius?p.radius:.5*c})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(y,$,ee){(function(d,g){(function(){var _=y("process/browser.js").nextTick,t=Function.prototype.apply,e=Array.prototype.slice,i={},r=0;function o(n,p){this._id=n,this._clearFn=p}ee.setTimeout=function(){return new o(t.call(setTimeout,window,arguments),clearTimeout)},ee.setInterval=function(){return new o(t.call(setInterval,window,arguments),clearInterval)},ee.clearTimeout=ee.clearInterval=function(n){n.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},ee.enroll=function(n,p){clearTimeout(n._idleTimeoutId),n._idleTimeout=p},ee.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},ee._unrefActive=ee.active=function(n){clearTimeout(n._idleTimeoutId);var p=n._idleTimeout;p>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},p))},ee.setImmediate="function"==typeof d?d:function(n){var p=r++,s=!(arguments.length<2)&&e.call(arguments,1);return i[p]=!0,_(function(){i[p]&&(s?n.apply(null,s):n.call(null),ee.clearImmediate(p))}),p},ee.clearImmediate="function"==typeof g?g:function(n){delete i[n]}}).call(this)}).call(this,y("timers").setImmediate,y("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(y,$,ee){!function(d){var g=/^\s+/,_=/\s+$/,t=0,e=d.round,i=d.min,r=d.max,o=d.random;function n(V,Q){if(Q=Q||{},(V=V||"")instanceof n)return V;if(!(this instanceof n))return new n(V,Q);var J,be,Te,K,re,ie,ce,se,de,ue,j=(K={r:0,g:0,b:0},re=1,ie=null,ce=null,se=null,de=!1,ue=!1,"string"==typeof(J=V)&&(J=function(we){we=we.replace(g,"").replace(_,"").toLowerCase();var Le,fe=!1;if(I[we])we=I[we],fe=!0;else if("transparent"==we)return{r:0,g:0,b:0,a:0,format:"name"};return(Le=z.rgb.exec(we))?{r:Le[1],g:Le[2],b:Le[3]}:(Le=z.rgba.exec(we))?{r:Le[1],g:Le[2],b:Le[3],a:Le[4]}:(Le=z.hsl.exec(we))?{h:Le[1],s:Le[2],l:Le[3]}:(Le=z.hsla.exec(we))?{h:Le[1],s:Le[2],l:Le[3],a:Le[4]}:(Le=z.hsv.exec(we))?{h:Le[1],s:Le[2],v:Le[3]}:(Le=z.hsva.exec(we))?{h:Le[1],s:Le[2],v:Le[3],a:Le[4]}:(Le=z.hex8.exec(we))?{r:F(Le[1]),g:F(Le[2]),b:F(Le[3]),a:Z(Le[4]),format:fe?"name":"hex8"}:(Le=z.hex6.exec(we))?{r:F(Le[1]),g:F(Le[2]),b:F(Le[3]),format:fe?"name":"hex"}:(Le=z.hex4.exec(we))?{r:F(Le[1]+""+Le[1]),g:F(Le[2]+""+Le[2]),b:F(Le[3]+""+Le[3]),a:Z(Le[4]+""+Le[4]),format:fe?"name":"hex8"}:!!(Le=z.hex3.exec(we))&&{r:F(Le[1]+""+Le[1]),g:F(Le[2]+""+Le[2]),b:F(Le[3]+""+Le[3]),format:fe?"name":"hex"}}(J)),"object"==typeof J&&(N(J.r)&&N(J.g)&&N(J.b)?(be=J.g,Te=J.b,K={r:255*C(J.r,255),g:255*C(be,255),b:255*C(Te,255)},de=!0,ue="%"===String(J.r).substr(-1)?"prgb":"rgb"):N(J.h)&&N(J.s)&&N(J.v)?(ie=U(J.s),ce=U(J.v),K=function(we,Le,fe){we=6*C(we,360),Le=C(Le,100),fe=C(fe,100);var ve=d.floor(we),Me=we-ve,ke=fe*(1-Le),Ce=fe*(1-Me*Le),Pe=fe*(1-(1-Me)*Le),Fe=ve%6;return{r:255*[fe,Ce,ke,ke,Pe,fe][Fe],g:255*[Pe,fe,fe,Ce,ke,ke][Fe],b:255*[ke,ke,Pe,fe,fe,Ce][Fe]}}(J.h,ie,ce),de=!0,ue="hsv"):N(J.h)&&N(J.s)&&N(J.l)&&(ie=U(J.s),se=U(J.l),K=function(we,Le,fe){var ve,Me,ke;function Ce(qe,rt,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<1/6?qe+6*(rt-qe)*ze:ze<.5?rt:ze<2/3?qe+(rt-qe)*(2/3-ze)*6:qe}if(we=C(we,360),Le=C(Le,100),fe=C(fe,100),0===Le)ve=Me=ke=fe;else{var Pe=fe<.5?fe*(1+Le):fe+Le-fe*Le,Fe=2*fe-Pe;ve=Ce(Fe,Pe,we+1/3),Me=Ce(Fe,Pe,we),ke=Ce(Fe,Pe,we-1/3)}return{r:255*ve,g:255*Me,b:255*ke}}(J.h,ie,se),de=!0,ue="hsl"),J.hasOwnProperty("a")&&(re=J.a)),re=S(re),{ok:de,format:J.format||ue,r:i(255,r(K.r,0)),g:i(255,r(K.g,0)),b:i(255,r(K.b,0)),a:re});this._originalInput=V,this._r=j.r,this._g=j.g,this._b=j.b,this._a=j.a,this._roundA=e(100*this._a)/100,this._format=Q.format||j.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=j.ok,this._tc_id=t++}function p(V,Q,j){V=C(V,255),Q=C(Q,255),j=C(j,255);var J,K,re=r(V,Q,j),ie=i(V,Q,j),ce=(re+ie)/2;if(re==ie)J=K=0;else{var se=re-ie;switch(K=ce>.5?se/(2-re-ie):se/(re+ie),re){case V:J=(Q-j)/se+(Q<j?6:0);break;case Q:J=(j-V)/se+2;break;case j:J=(V-Q)/se+4}J/=6}return{h:J,s:K,l:ce}}function s(V,Q,j){V=C(V,255),Q=C(Q,255),j=C(j,255);var J,K,re=r(V,Q,j),ie=i(V,Q,j),ce=re,se=re-ie;if(K=0===re?0:se/re,re==ie)J=0;else{switch(re){case V:J=(Q-j)/se+(Q<j?6:0);break;case Q:J=(j-V)/se+2;break;case j:J=(V-Q)/se+4}J/=6}return{h:J,s:K,v:ce}}function a(V,Q,j,J){var K=[H(e(V).toString(16)),H(e(Q).toString(16)),H(e(j).toString(16))];return J&&K[0].charAt(0)==K[0].charAt(1)&&K[1].charAt(0)==K[1].charAt(1)&&K[2].charAt(0)==K[2].charAt(1)?K[0].charAt(0)+K[1].charAt(0)+K[2].charAt(0):K.join("")}function c(V,Q,j,J){return[H(X(J)),H(e(V).toString(16)),H(e(Q).toString(16)),H(e(j).toString(16))].join("")}function u(V,Q){Q=0===Q?0:Q||10;var j=n(V).toHsl();return j.s-=Q/100,j.s=R(j.s),n(j)}function h(V,Q){Q=0===Q?0:Q||10;var j=n(V).toHsl();return j.s+=Q/100,j.s=R(j.s),n(j)}function v(V){return n(V).desaturate(100)}function f(V,Q){Q=0===Q?0:Q||10;var j=n(V).toHsl();return j.l+=Q/100,j.l=R(j.l),n(j)}function l(V,Q){Q=0===Q?0:Q||10;var j=n(V).toRgb();return j.r=r(0,i(255,j.r-e(-Q/100*255))),j.g=r(0,i(255,j.g-e(-Q/100*255))),j.b=r(0,i(255,j.b-e(-Q/100*255))),n(j)}function x(V,Q){Q=0===Q?0:Q||10;var j=n(V).toHsl();return j.l-=Q/100,j.l=R(j.l),n(j)}function m(V,Q){var j=n(V).toHsl(),J=(j.h+Q)%360;return j.h=J<0?360+J:J,n(j)}function w(V){var Q=n(V).toHsl();return Q.h=(Q.h+180)%360,n(Q)}function b(V){var Q=n(V).toHsl(),j=Q.h;return[n(V),n({h:(j+120)%360,s:Q.s,l:Q.l}),n({h:(j+240)%360,s:Q.s,l:Q.l})]}function k(V){var Q=n(V).toHsl(),j=Q.h;return[n(V),n({h:(j+90)%360,s:Q.s,l:Q.l}),n({h:(j+180)%360,s:Q.s,l:Q.l}),n({h:(j+270)%360,s:Q.s,l:Q.l})]}function T(V){var Q=n(V).toHsl(),j=Q.h;return[n(V),n({h:(j+72)%360,s:Q.s,l:Q.l}),n({h:(j+216)%360,s:Q.s,l:Q.l})]}function L(V,Q,j){Q=Q||6,j=j||30;var J=n(V).toHsl(),K=360/j,re=[n(V)];for(J.h=(J.h-(K*Q>>1)+720)%360;--Q;)J.h=(J.h+K)%360,re.push(n(J));return re}function A(V,Q){Q=Q||6;for(var j=n(V).toHsv(),J=j.h,K=j.s,re=j.v,ie=[],ce=1/Q;Q--;)ie.push(n({h:J,s:K,v:re})),re=(re+ce)%1;return ie}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var V=this.toRgb();return(299*V.r+587*V.g+114*V.b)/1e3},getLuminance:function(){var V,Q,j,J=this.toRgb();return Q=J.g/255,j=J.b/255,.2126*((V=J.r/255)<=.03928?V/12.92:d.pow((V+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:d.pow((Q+.055)/1.055,2.4))+.0722*(j<=.03928?j/12.92:d.pow((j+.055)/1.055,2.4))},setAlpha:function(V){return this._a=S(V),this._roundA=e(100*this._a)/100,this},toHsv:function(){var V=s(this._r,this._g,this._b);return{h:360*V.h,s:V.s,v:V.v,a:this._a}},toHsvString:function(){var V=s(this._r,this._g,this._b),Q=e(360*V.h),j=e(100*V.s),J=e(100*V.v);return 1==this._a?"hsv("+Q+", "+j+"%, "+J+"%)":"hsva("+Q+", "+j+"%, "+J+"%, "+this._roundA+")"},toHsl:function(){var V=p(this._r,this._g,this._b);return{h:360*V.h,s:V.s,l:V.l,a:this._a}},toHslString:function(){var V=p(this._r,this._g,this._b),Q=e(360*V.h),j=e(100*V.s),J=e(100*V.l);return 1==this._a?"hsl("+Q+", "+j+"%, "+J+"%)":"hsla("+Q+", "+j+"%, "+J+"%, "+this._roundA+")"},toHex:function(V){return a(this._r,this._g,this._b,V)},toHexString:function(V){return"#"+this.toHex(V)},toHex8:function(V){return j=this._g,J=this._b,K=this._a,re=V,ie=[H(e(this._r).toString(16)),H(e(j).toString(16)),H(e(J).toString(16)),H(X(K))],re&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)&&ie[3].charAt(0)==ie[3].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0)+ie[3].charAt(0):ie.join("");var j,J,K,re,ie},toHex8String:function(V){return"#"+this.toHex8(V)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*C(this._r,255))+"%",g:e(100*C(this._g,255))+"%",b:e(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*C(this._r,255))+"%, "+e(100*C(this._g,255))+"%, "+e(100*C(this._b,255))+"%)":"rgba("+e(100*C(this._r,255))+"%, "+e(100*C(this._g,255))+"%, "+e(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(D[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(V){var Q="#"+c(this._r,this._g,this._b,this._a),j=Q,J=this._gradientType?"GradientType = 1, ":"";if(V){var K=n(V);j="#"+c(K._r,K._g,K._b,K._a)}return"progid:DXImageTransform.Microsoft.gradient("+J+"startColorstr="+Q+",endColorstr="+j+")"},toString:function(V){var Q=!!V;V=V||this._format;var j=!1;return Q||!(this._a<1&&this._a>=0)||"hex"!==V&&"hex6"!==V&&"hex3"!==V&&"hex4"!==V&&"hex8"!==V&&"name"!==V?("rgb"===V&&(j=this.toRgbString()),"prgb"===V&&(j=this.toPercentageRgbString()),"hex"!==V&&"hex6"!==V||(j=this.toHexString()),"hex3"===V&&(j=this.toHexString(!0)),"hex4"===V&&(j=this.toHex8String(!0)),"hex8"===V&&(j=this.toHex8String()),"name"===V&&(j=this.toName()),"hsl"===V&&(j=this.toHslString()),"hsv"===V&&(j=this.toHsvString()),j||this.toHexString()):"name"===V&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(V,Q){var j=V.apply(null,[this].concat([].slice.call(Q)));return this._r=j._r,this._g=j._g,this._b=j._b,this.setAlpha(j._a),this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(l,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(m,arguments)},_applyCombination:function(V,Q){return V.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},n.fromRatio=function(V,Q){if("object"==typeof V){var j={};for(var J in V)V.hasOwnProperty(J)&&(j[J]="a"===J?V[J]:U(V[J]));V=j}return n(V,Q)},n.equals=function(V,Q){return!(!V||!Q)&&n(V).toRgbString()==n(Q).toRgbString()},n.random=function(){return n.fromRatio({r:o(),g:o(),b:o()})},n.mix=function(V,Q,j){j=0===j?0:j||50;var J=n(V).toRgb(),K=n(Q).toRgb(),re=j/100;return n({r:(K.r-J.r)*re+J.r,g:(K.g-J.g)*re+J.g,b:(K.b-J.b)*re+J.b,a:(K.a-J.a)*re+J.a})},n.readability=function(V,Q){var j=n(V),J=n(Q);return(d.max(j.getLuminance(),J.getLuminance())+.05)/(d.min(j.getLuminance(),J.getLuminance())+.05)},n.isReadable=function(V,Q,j){var J,K,ie,ce,se,re=n.readability(V,Q);switch(K=!1,(ie=j,"AA"!==(ce=((ie=ie||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==ce&&(ce="AA"),"small"!==(se=(ie.size||"small").toLowerCase())&&"large"!==se&&(se="small"),J={level:ce,size:se}).level+J.size){case"AAsmall":case"AAAlarge":K=re>=4.5;break;case"AAlarge":K=re>=3;break;case"AAAsmall":K=re>=7}return K},n.mostReadable=function(V,Q,j){var J,K,re,ie,ce=null,se=0;K=(j=j||{}).includeFallbackColors,re=j.level,ie=j.size;for(var de=0;de<Q.length;de++)(J=n.readability(V,Q[de]))>se&&(se=J,ce=n(Q[de]));return n.isReadable(V,ce,{level:re,size:ie})||!K?ce:(j.includeFallbackColors=!1,n.mostReadable(V,["#fff","#000"],j))};var I=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=n.hexNames=function(V){var Q={};for(var j in V)V.hasOwnProperty(j)&&(Q[V[j]]=j);return Q}(I);function S(V){return V=parseFloat(V),(isNaN(V)||V<0||V>1)&&(V=1),V}function C(V,Q){var J;"string"==typeof(J=V)&&-1!=J.indexOf(".")&&1===parseFloat(J)&&(V="100%");var j=function(J){return"string"==typeof J&&-1!=J.indexOf("%")}(V);return V=i(Q,r(0,parseFloat(V))),j&&(V=parseInt(V*Q,10)/100),d.abs(V-Q)<1e-6?1:V%Q/parseFloat(Q)}function R(V){return i(1,r(0,V))}function F(V){return parseInt(V,16)}function H(V){return 1==V.length?"0"+V:""+V}function U(V){return V<=1&&(V=100*V+"%"),V}function X(V){return d.round(255*parseFloat(V)).toString(16)}function Z(V){return F(V)/255}var Y,W,te,z=(W="[\\s|\\(]+("+(Y="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",te="[\\s|\\(]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",{CSS_UNIT:new RegExp(Y),rgb:new RegExp("rgb"+W),rgba:new RegExp("rgba"+te),hsl:new RegExp("hsl"+W),hsla:new RegExp("hsla"+te),hsv:new RegExp("hsv"+W),hsva:new RegExp("hsva"+te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function N(V){return!!z.CSS_UNIT.exec(V)}void 0!==$&&$.exports?$.exports=n:window.tinycolor=n}(Math)},{}],313:[function(y,$,ee){"use strict";$.exports=g,$.exports.float32=$.exports.float=g,$.exports.fract32=$.exports.fract=function(_,t){if(_.length){if(_ instanceof Float32Array)return new Float32Array(_.length);t instanceof Float32Array||(t=g(_));for(var e=0,i=t.length;e<i;e++)t[e]=_[e]-t[e];return t}return g(_-g(_))};var d=new Float32Array(1);function g(_){return _.length?_ instanceof Float32Array?_:new Float32Array(_):(d[0]=_,d[0])}},{}],314:[function(y,$,ee){"use strict";var d=y("parse-unit");function g(t,e){var i=d(getComputedStyle(t).getPropertyValue(e));return i[0]*_(i[1],t)}function _(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return function(i,r){var o=document.createElement("div");o.style["font-size"]="128"+i,r.appendChild(o);var n=g(o,"font-size")/128;return r.removeChild(o),n}(t,e);case"em":return g(e,"font-size");case"rem":return g(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}$.exports=_},{"parse-unit":251}],315:[function(y,$,ee){var d;d=this,function(d){"use strict";function g(c){return c}function _(c){if(null==c)return g;var u,h,v=c.scale[0],f=c.scale[1],l=c.translate[0],x=c.translate[1];return function(m,w){w||(u=h=0);var b=2,k=m.length,T=new Array(k);for(T[0]=(u+=m[0])*v+l,T[1]=(h+=m[1])*f+x;b<k;)T[b]=m[b],++b;return T}}function t(c){var u,h=_(c.transform),v=1/0,f=v,l=-v,x=-v;function m(b){(b=h(b))[0]<v&&(v=b[0]),b[0]>l&&(l=b[0]),b[1]<f&&(f=b[1]),b[1]>x&&(x=b[1])}function w(b){switch(b.type){case"GeometryCollection":b.geometries.forEach(w);break;case"Point":m(b.coordinates);break;case"MultiPoint":b.coordinates.forEach(m)}}for(u in c.arcs.forEach(function(b){for(var k,T=-1,L=b.length;++T<L;)(k=h(b[T],T))[0]<v&&(v=k[0]),k[0]>l&&(l=k[0]),k[1]<f&&(f=k[1]),k[1]>x&&(x=k[1])}),c.objects)w(c.objects[u]);return[v,f,l,x]}function e(c,u){var h=u.id,v=u.bbox,f=null==u.properties?{}:u.properties,l=i(c,u);return null==h&&null==v?{type:"Feature",properties:f,geometry:l}:null==v?{type:"Feature",id:h,properties:f,geometry:l}:{type:"Feature",id:h,bbox:v,properties:f,geometry:l}}function i(c,u){var h=_(c.transform),v=c.arcs;function f(b,k){k.length&&k.pop();for(var T=v[b<0?~b:b],L=0,A=T.length;L<A;++L)k.push(h(T[L],L));b<0&&function(I,D){for(var S,C=I.length,R=C-D;R<--C;)S=I[R],I[R++]=I[C],I[C]=S}(k,A)}function l(b){return h(b)}function x(b){for(var k=[],T=0,L=b.length;T<L;++T)f(b[T],k);return k.length<2&&k.push(k[0]),k}function m(b){for(var k=x(b);k.length<4;)k.push(k[0]);return k}function w(b){return b.map(m)}return function b(k){var T,L=k.type;switch(L){case"GeometryCollection":return{type:L,geometries:k.geometries.map(b)};case"Point":T=l(k.coordinates);break;case"MultiPoint":T=k.coordinates.map(l);break;case"LineString":T=x(k.arcs);break;case"MultiLineString":T=k.arcs.map(x);break;case"Polygon":T=w(k.arcs);break;case"MultiPolygon":T=k.arcs.map(w);break;default:return null}return{type:L,coordinates:T}}(u)}function r(c,u){var h={},v={},f={},l=[],x=-1;function m(w,b){for(var k in w){var T=w[k];delete b[T.start],delete T.start,delete T.end,T.forEach(function(L){h[L<0?~L:L]=1}),l.push(T)}}return u.forEach(function(w,b){var k,T=c.arcs[w<0?~w:w];T.length<3&&!T[1][0]&&!T[1][1]&&(k=u[++x],u[x]=w,u[b]=k)}),u.forEach(function(w){var b,k,S,C,R,F,T=(F=(R=c.arcs[(S=w)<0?~S:S])[0],c.transform?(C=[0,0],R.forEach(function(H){C[0]+=H[0],C[1]+=H[1]})):C=R[R.length-1],S<0?[C,F]:[F,C]),L=T[0],A=T[1];if(b=f[L])if(delete f[b.end],b.push(w),b.end=A,k=v[A]){delete v[k.start];var I=k===b?b:b.concat(k);v[I.start=b.start]=f[I.end=k.end]=I}else v[b.start]=f[b.end]=b;else if(b=v[A])if(delete v[b.start],b.unshift(w),b.start=L,k=f[L]){delete f[k.end];var D=k===b?b:k.concat(b);v[D.start=k.start]=f[D.end=b.end]=D}else v[b.start]=f[b.end]=b;else v[(b=[w]).start=L]=f[b.end=A]=b}),m(f,v),m(v,f),u.forEach(function(w){h[w<0?~w:w]||l.push([w])}),l}function o(c,u,h){var v,f,l;if(arguments.length>1)v=n(0,u,h);else for(f=0,v=new Array(l=c.arcs.length);f<l;++f)v[f]=f;return{type:"MultiLineString",arcs:r(c,v)}}function n(c,u,h){var v,f=[],l=[];function x(b){var k=b<0?~b:b;(l[k]||(l[k]=[])).push({i:b,g:v})}function m(b){b.forEach(x)}function w(b){b.forEach(m)}return function b(k){switch(v=k,k.type){case"GeometryCollection":k.geometries.forEach(b);break;case"LineString":m(k.arcs);break;case"MultiLineString":case"Polygon":w(k.arcs);break;case"MultiPolygon":k.arcs.forEach(w)}}(u),l.forEach(null==h?function(b){f.push(b[0].i)}:function(b){h(b[0].g,b[b.length-1].g)&&f.push(b[0].i)}),f}function p(c,u){var h={},v=[],f=[];function l(m){m.forEach(function(w){w.forEach(function(b){(h[b=b<0?~b:b]||(h[b]=[])).push(m)})}),v.push(m)}function x(m){return function(w){for(var b,k=-1,T=w.length,L=w[T-1],A=0;++k<T;)A+=(b=L)[0]*(L=w[k])[1]-b[1]*L[0];return Math.abs(A)}(i(c,{type:"Polygon",arcs:[m]}).coordinates[0])}return u.forEach(function m(w){switch(w.type){case"GeometryCollection":w.geometries.forEach(m);break;case"Polygon":l(w.arcs);break;case"MultiPolygon":w.arcs.forEach(l)}}),v.forEach(function(m){if(!m._){var w=[],b=[m];for(m._=1,f.push(w);m=b.pop();)w.push(m),m.forEach(function(k){k.forEach(function(T){h[T<0?~T:T].forEach(function(L){L._||(L._=1,b.push(L))})})})}}),v.forEach(function(m){delete m._}),{type:"MultiPolygon",arcs:f.map(function(m){var w,b=[];if(m.forEach(function(I){I.forEach(function(D){D.forEach(function(S){h[S<0?~S:S].length<2&&b.push(S)})})}),(w=(b=r(c,b)).length)>1)for(var k,T,L=1,A=x(b[0]);L<w;++L)(k=x(b[L]))>A&&(T=b[0],b[0]=b[L],b[L]=T,A=k);return b}).filter(function(m){return m.length>0})}}function s(c,u){for(var h=0,v=c.length;h<v;){var f=h+v>>>1;c[f]<u?h=f+1:v=f}return h}function a(c){if(null==c)return g;var u,h,v=c.scale[0],f=c.scale[1],l=c.translate[0],x=c.translate[1];return function(m,w){w||(u=h=0);var b=2,k=m.length,T=new Array(k),L=Math.round((m[0]-l)/v),A=Math.round((m[1]-x)/f);for(T[0]=L-u,u=L,T[1]=A-h,h=A;b<k;)T[b]=m[b],++b;return T}}d.bbox=t,d.feature=function(c,u){return"string"==typeof u&&(u=c.objects[u]),"GeometryCollection"===u.type?{type:"FeatureCollection",features:u.geometries.map(function(h){return e(c,h)})}:e(c,u)},d.merge=function(c){return i(c,p.apply(this,arguments))},d.mergeArcs=p,d.mesh=function(c){return i(c,o.apply(this,arguments))},d.meshArcs=o,d.neighbors=function(c){var u={},h=c.map(function(){return[]});function v(I,D){I.forEach(function(S){S<0&&(S=~S);var C=u[S];C?C.push(D):u[S]=[D]})}function f(I,D){I.forEach(function(S){v(S,D)})}var l={LineString:v,MultiLineString:f,Polygon:f,MultiPolygon:function(I,D){I.forEach(function(S){f(S,D)})}};for(var x in c.forEach(function I(D,S){"GeometryCollection"===D.type?D.geometries.forEach(function(C){I(C,S)}):D.type in l&&l[D.type](D.arcs,S)}),u)for(var m=u[x],w=m.length,b=0;b<w;++b)for(var k=b+1;k<w;++k){var T,L=m[b],A=m[k];(T=h[L])[x=s(T,A)]!==A&&T.splice(x,0,A),(T=h[A])[x=s(T,L)]!==L&&T.splice(x,0,L)}return h},d.quantize=function(c,u){if(c.transform)throw new Error("already quantized");if(u&&u.scale)m=c.bbox;else{if(!((h=Math.floor(u))>=2))throw new Error("n must be \u22652");var h,v=(m=c.bbox||t(c))[0],f=m[1],l=m[2],x=m[3];u={scale:[l-v?(l-v)/(h-1):1,x-f?(x-f)/(h-1):1],translate:[v,f]}}var m,w,b=a(u),k=c.objects,T={};function L(I){return b(I)}function A(I){var D;switch(I.type){case"GeometryCollection":D={type:"GeometryCollection",geometries:I.geometries.map(A)};break;case"Point":D={type:"Point",coordinates:L(I.coordinates)};break;case"MultiPoint":D={type:"MultiPoint",coordinates:I.coordinates.map(L)};break;default:return I}return null!=I.id&&(D.id=I.id),null!=I.bbox&&(D.bbox=I.bbox),null!=I.properties&&(D.properties=I.properties),D}for(w in k)T[w]=A(k[w]);return{type:"Topology",bbox:m,transform:u,objects:T,arcs:c.arcs.map(function(I){var D,S=0,C=1,R=I.length,F=new Array(R);for(F[0]=b(I[0],0);++S<R;)((D=b(I[S],S))[0]||D[1])&&(F[C++]=D);return 1===C&&(F[C++]=[0,0]),F.length=C,F})}},d.transform=_,d.untransform=a,Object.defineProperty(d,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(d=d||self).topojson=d.topojson||{})},{}],316:[function(y,$,ee){"use strict";var d=y("../prototype/is");$.exports=function(g){if("function"!=typeof g||!hasOwnProperty.call(g,"length"))return!1;try{if("number"!=typeof g.length||"function"!=typeof g.call||"function"!=typeof g.apply)return!1}catch(_){return!1}return!d(g)}},{"../prototype/is":323}],317:[function(y,$,ee){"use strict";var d=y("../value/is"),g=y("../object/is"),_=y("../string/coerce"),t=y("./to-short-string"),e=function(i,r){return i.replace("%v",t(r))};$.exports=function(i,r,o){if(!g(o))throw new TypeError(e(r,i));if(!d(i)){if("default"in o)return o.default;if(o.isOptional)return null}var n=_(o.errorMessage);throw d(n)||(n=r),new TypeError(e(n,i))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(y,$,ee){"use strict";$.exports=function(d){try{return d.toString()}catch(g){try{return String(d)}catch(_){return null}}}},{}],319:[function(y,$,ee){"use strict";var d=y("./safe-to-string"),g=/[\n\r\u2028\u2029]/g;$.exports=function(_){var t=d(_);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"\u2026"),t=t.replace(g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(y,$,ee){"use strict";var d=y("../value/is"),g={object:!0,function:!0,undefined:!0};$.exports=function(_){return!!d(_)&&hasOwnProperty.call(g,typeof _)}},{"../value/is":326}],321:[function(y,$,ee){"use strict";var d=y("../lib/resolve-exception"),g=y("./is");$.exports=function(_){return g(_)?_:d(_,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(y,$,ee){"use strict";var d=y("../function/is"),g=/^\s*class[\s{/}]/,_=Function.prototype.toString;$.exports=function(t){return!!d(t)&&!g.test(_.call(t))}},{"../function/is":316}],323:[function(y,$,ee){"use strict";var d=y("../object/is");$.exports=function(g){if(!d(g))return!1;try{return!!g.constructor&&g.constructor.prototype===g}catch(_){return!1}}},{"../object/is":320}],324:[function(y,$,ee){"use strict";var d=y("../value/is"),g=y("../object/is"),_=Object.prototype.toString;$.exports=function(t){if(!d(t))return null;if(g(t)){var e=t.toString;if("function"!=typeof e||e===_)return null}try{return""+t}catch(i){return null}}},{"../object/is":320,"../value/is":326}],325:[function(y,$,ee){"use strict";var d=y("../lib/resolve-exception"),g=y("./is");$.exports=function(_){return g(_)?_:d(_,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(y,$,ee){"use strict";$.exports=function(d){return null!=d}},{}],327:[function(y,$,ee){(function(d){(function(){"use strict";var g=y("bit-twiddle"),_=y("dup"),t=y("buffer").Buffer;d.__TYPEDARRAY_POOL||(d.__TYPEDARRAY_POOL={UINT8:_([32,0]),UINT16:_([32,0]),UINT32:_([32,0]),BIGUINT64:_([32,0]),INT8:_([32,0]),INT16:_([32,0]),INT32:_([32,0]),BIGINT64:_([32,0]),FLOAT:_([32,0]),DOUBLE:_([32,0]),DATA:_([32,0]),UINT8C:_([32,0]),BUFFER:_([32,0])});var e="undefined"!=typeof Uint8ClampedArray,i="undefined"!=typeof BigUint64Array,r="undefined"!=typeof BigInt64Array,o=d.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=_([32,0])),o.BIGUINT64||(o.BIGUINT64=_([32,0])),o.BIGINT64||(o.BIGINT64=_([32,0])),o.BUFFER||(o.BUFFER=_([32,0]));var n=o.DATA,p=o.BUFFER;function s(A){if(A){var D=g.log2(A.length||A.byteLength);n[D].push(A)}}function a(A){A=g.nextPow2(A);var I=g.log2(A),D=n[I];return D.length>0?D.pop():new ArrayBuffer(A)}function c(A){return new Uint8Array(a(A),0,A)}function u(A){return new Uint16Array(a(2*A),0,A)}function h(A){return new Uint32Array(a(4*A),0,A)}function v(A){return new Int8Array(a(A),0,A)}function f(A){return new Int16Array(a(2*A),0,A)}function l(A){return new Int32Array(a(4*A),0,A)}function x(A){return new Float32Array(a(4*A),0,A)}function m(A){return new Float64Array(a(8*A),0,A)}function w(A){return e?new Uint8ClampedArray(a(A),0,A):c(A)}function b(A){return i?new BigUint64Array(a(8*A),0,A):null}function k(A){return r?new BigInt64Array(a(8*A),0,A):null}function T(A){return new DataView(a(A),0,A)}function L(A){A=g.nextPow2(A);var I=g.log2(A),D=p[I];return D.length>0?D.pop():new t(A)}ee.free=function(A){if(t.isBuffer(A))p[g.log2(A.length)].push(A);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(A)&&(A=A.buffer),!A)return;var D=0|g.log2(A.length||A.byteLength);n[D].push(A)}},ee.freeUint8=ee.freeUint16=ee.freeUint32=ee.freeBigUint64=ee.freeInt8=ee.freeInt16=ee.freeInt32=ee.freeBigInt64=ee.freeFloat32=ee.freeFloat=ee.freeFloat64=ee.freeDouble=ee.freeUint8Clamped=ee.freeDataView=function(A){s(A.buffer)},ee.freeArrayBuffer=s,ee.freeBuffer=function(A){p[g.log2(A.length)].push(A)},ee.malloc=function(A,I){if(void 0===I||"arraybuffer"===I)return a(A);switch(I){case"uint8":return c(A);case"uint16":return u(A);case"uint32":return h(A);case"int8":return v(A);case"int16":return f(A);case"int32":return l(A);case"float":case"float32":return x(A);case"double":case"float64":return m(A);case"uint8_clamped":return w(A);case"bigint64":return k(A);case"biguint64":return b(A);case"buffer":return L(A);case"data":case"dataview":return T(A);default:return null}return null},ee.mallocArrayBuffer=a,ee.mallocUint8=c,ee.mallocUint16=u,ee.mallocUint32=h,ee.mallocInt8=v,ee.mallocInt16=f,ee.mallocInt32=l,ee.mallocFloat32=ee.mallocFloat=x,ee.mallocFloat64=ee.mallocDouble=m,ee.mallocUint8Clamped=w,ee.mallocBigUint64=b,ee.mallocBigInt64=k,ee.mallocDataView=T,ee.mallocBuffer=L,ee.clearCache=function(){for(var A=0;A<32;++A)o.UINT8[A].length=0,o.UINT16[A].length=0,o.UINT32[A].length=0,o.INT8[A].length=0,o.INT16[A].length=0,o.INT32[A].length=0,o.FLOAT[A].length=0,o.DOUBLE[A].length=0,o.BIGUINT64[A].length=0,o.BIGINT64[A].length=0,o.UINT8C[A].length=0,n[A].length=0,p[A].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(y,$,ee){var d=/[\'\"]/;$.exports=function(g){return g?(d.test(g.charAt(0))&&(g=g.substr(1)),d.test(g.charAt(g.length-1))&&(g=g.substr(0,g.length-1)),g):""}},{}],329:[function(y,$,ee){"use strict";$.exports=function(d,g,_){Array.isArray(_)||(_=[].slice.call(arguments,2));for(var t=0,e=_.length;t<e;t++){var i=_[t];for(var r in i)if((void 0===g[r]||Array.isArray(g[r])||d[r]!==g[r])&&r in g){var o;if(!0===i[r])o=g[r];else if(!1===i[r]||"function"==typeof i[r]&&void 0===(o=i[r](g[r],d,g)))continue;d[r]=o}}return d}},{}],330:[function(y,$,ee){(function(d){(function(){function g(_){try{if(!d.localStorage)return!1}catch(e){return!1}var t=d.localStorage[_];return null!=t&&"true"===String(t).toLowerCase()}$.exports=function(_,t){if(g("noDeprecation"))return _;var e=!1;return function(){if(!e){if(g("throwDeprecation"))throw new Error(t);g("traceDeprecation")?console.trace(t):console.warn(t),e=!0}return _.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(y,$,ee){var d=y("get-canvas-context");$.exports=function(g){return d("webgl",g)}},{"get-canvas-context":194}],332:[function(y,$,ee){var d=y("../main"),g=y("object-assign"),_=d.instance();function t(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}g(t.prototype=new d.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(s,a){if("string"==typeof s){var c=s.match(i);return c?c[0]:""}var u=this._validateYear(s),h=s.month(),v=""+this.toChineseMonth(u,h);return a&&v.length<2&&(v="0"+v),this.isIntercalaryMonth(u,h)&&(v+="i"),v},monthNames:function(s){if("string"==typeof s){var a=s.match(r);return a?a[0]:""}var c=this._validateYear(s),u=s.month(),h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(c,u)-1];return this.isIntercalaryMonth(c,u)&&(h="\u95f0"+h),h},monthNamesShort:function(s){if("string"==typeof s){var a=s.match(o);return a?a[0]:""}var c=this._validateYear(s),u=s.month(),h=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(c,u)-1];return this.isIntercalaryMonth(c,u)&&(h="\u95f0"+h),h},parseMonth:function(s,a){s=this._validateYear(s);var c,u=parseInt(a);if(isNaN(u))"\u95f0"===a[0]&&(c=!0,a=a.substring(1)),"\u6708"===a[a.length-1]&&(a=a.substring(0,a.length-1)),u=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(a);else{var h=a[a.length-1];c="i"===h||"I"===h}return this.toMonthIndex(s,u,c)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(s,a){if(s.year&&(s=s.year()),"number"!=typeof s||s<1888||s>2111)throw a.replace(/\{0\}/,this.local.name);return s},toMonthIndex:function(s,a,c){var u=this.intercalaryMonth(s);if(c&&a!==u||a<1||a>12)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!c&&a<=u?a-1:a:a-1},toChineseMonth:function(s,a){s.year&&(a=(s=s.year()).month());var c=this.intercalaryMonth(s);if(a<0||a>(c?12:11))throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?a<c?a+1:a:a+1},intercalaryMonth:function(s){return s=this._validateYear(s),n[s-n[0]]>>13},isIntercalaryMonth:function(s,a){s.year&&(a=(s=s.year()).month());var c=this.intercalaryMonth(s);return!!c&&c===a},leapYear:function(s){return 0!==this.intercalaryMonth(s)},weekOfYear:function(s,a,c){var u,h=this._validateYear(s,d.local.invalidyear),v=p[h-p[0]];(u=_.newDate(v>>9&4095,v>>5&15,31&v)).add(4-(u.dayOfWeek()||7),"d");var m=this.toJD(s,a,c)-u.toJD();return 1+Math.floor(m/7)},monthsInYear:function(s){return this.leapYear(s)?13:12},daysInMonth:function(s,a){s.year&&(a=s.month(),s=s.year()),s=this._validateYear(s);var c=n[s-n[0]];if(a>(c>>13?12:11))throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-a?30:29},weekDay:function(s,a,c){return(this.dayOfWeek(s,a,c)||7)<6},toJD:function(s,a,c){var u=this._validate(s,v,c,d.local.invalidDate);s=this._validateYear(u.year()),a=u.month(),c=u.day();var h=this.isIntercalaryMonth(s,a),v=this.toChineseMonth(s,a),f=function(l,x,m,w,b){var k,T,L;if("object"==typeof l)T=l,k=x||{};else{var A;if(!("number"==typeof l&&l>=1888&&l<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof x&&x>=1&&x<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof m&&m>=1&&m<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof w?(A=!1,k=w):(A=!!w,k={}),T={year:l,month:x,day:m,isIntercalary:A}}L=T.day-1;var I,D=n[T.year-n[0]],S=D>>13;I=S&&(T.month>S||T.isIntercalary)?T.month:T.month-1;for(var C=0;C<I;C++)L+=D&1<<12-C?30:29;var R=p[T.year-p[0]],F=new Date(R>>9&4095,(R>>5&15)-1,(31&R)+L);return k.year=F.getFullYear(),k.month=1+F.getMonth(),k.day=F.getDate(),k}(s,v,c,h);return _.toJD(f.year,f.month,f.day)},fromJD:function(s){var a=_.fromJD(s),c=function(h,v,f,l){var x,m;if("object"==typeof h)x=h,m=v||{};else{if(!("number"==typeof h&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof v&&v>=1&&v<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof f&&f>=1&&f<=31))throw new Error("Solar day outside range 1 - 31");x={year:h,month:v,day:f},m={}}var w=p[x.year-p[0]];m.year=(x.year<<9|x.month<<5|x.day)>=w?x.year:x.year-1,w=p[m.year-p[0]];var k,T=new Date(w>>9&4095,(w>>5&15)-1,31&w),L=new Date(x.year,x.month-1,x.day);k=Math.round((L-T)/864e5);var A,I=n[m.year-n[0]];for(A=0;A<13;A++){var D=I&1<<12-A?30:29;if(k<D)break;k-=D}var S=I>>13;return!S||A<S?(m.isIntercalary=!1,m.month=1+A):A===S?(m.isIntercalary=!0,m.month=A):(m.isIntercalary=!1,m.month=A),m.day=1+k,m}(a.year(),a.month(),a.day()),u=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,u,c.day)},fromString:function(s){var a=s.match(e),c=this._validateYear(+a[1]),v=this.toMonthIndex(c,+a[2],!!a[3]);return this.newDate(c,v,+a[4])},add:function(s,a,c){var u=s.year(),h=s.month(),v=this.isIntercalaryMonth(u,h),f=this.toChineseMonth(u,h),l=Object.getPrototypeOf(t.prototype).add.call(this,s,a,c);if("y"===c){var x=l.year(),m=l.month(),w=this.isIntercalaryMonth(x,f),b=this.toMonthIndex(x,f,!(!v||!w));b!==m&&l.month(b)}return l}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,i=/^\d?\d[iI]?/m,r=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,o=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;d.calendars.chinese=t;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(y,$,ee){var d=y("../main");function _(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var e=this._validate(t,this.minMonth,this.minDay,d.local.invalidYear);return(t=e.year()+(e.year()<0?1:0))%4==3||t%4==-1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(t,e,i){var r=this.newDate(t,e,i);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,e){var i=this._validate(t,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(t,e,i){return(this.dayOfWeek(t,e,i)||7)<6},toJD:function(t,e,i){var r=this._validate(t,e,i,d.local.invalidDate);return(t=r.year())<0&&t++,r.day()+30*(r.month()-1)+365*(t-1)+Math.floor(t/4)+this.jdEpoch-1},fromJD:function(t){var e=Math.floor(t)+.5-this.jdEpoch,i=Math.floor((e-Math.floor((e+366)/1461))/365)+1;i<=0&&i--,e=Math.floor(t)+.5-this.newDate(i,1,1).toJD();var r=Math.floor(e/30)+1;return this.newDate(i,r,e-30*(r-1)+1)}}),d.calendars.coptic=_},{"../main":346,"object-assign":247}],334:[function(y,$,ee){var d=y("../main");function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),400},weekOfYear:function(e,i,r){var o=this.newDate(e,i,r);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/8)+1},daysInMonth:function(e,i){var r=this._validate(e,i,this.minDay,d.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,i,r){return(this._validate(e,i,r,d.local.invalidDate).day()+1)%8},weekDay:function(e,i,r){var o=this.dayOfWeek(e,i,r);return o>=2&&o<=6},extraInfo:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate);return{century:t[Math.floor((o.year()-1)/100)+1]||""}},toJD:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate);return e=o.year()+(o.year()<0?1:0),i=o.month(),(r=o.day())+(i>1?16:0)+(i>2?32*(i-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var i=Math.floor(e/400)+1;e-=400*(i-1),e+=e>15?16:0;var r=Math.floor(e/32)+1;return this.newDate(i<=0?i-1:i,r,e-32*(r-1)+1)}});var t={20:"Fruitbat",21:"Anchovy"};d.calendars.discworld=_},{"../main":346,"object-assign":247}],335:[function(y,$,ee){var d=y("../main");function _(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var e=this._validate(t,this.minMonth,this.minDay,d.local.invalidYear);return(t=e.year()+(e.year()<0?1:0))%4==3||t%4==-1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(t,e,i){var r=this.newDate(t,e,i);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,e){var i=this._validate(t,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(t,e,i){return(this.dayOfWeek(t,e,i)||7)<6},toJD:function(t,e,i){var r=this._validate(t,e,i,d.local.invalidDate);return(t=r.year())<0&&t++,r.day()+30*(r.month()-1)+365*(t-1)+Math.floor(t/4)+this.jdEpoch-1},fromJD:function(t){var e=Math.floor(t)+.5-this.jdEpoch,i=Math.floor((e-Math.floor((e+366)/1461))/365)+1;i<=0&&i--,e=Math.floor(t)+.5-this.newDate(i,1,1).toJD();var r=Math.floor(e/30)+1;return this.newDate(i,r,e-30*(r-1)+1)}}),d.calendars.ethiopian=_},{"../main":346,"object-assign":247}],336:[function(y,$,ee){var d=y("../main");function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function t(e,i){return e-i*Math.floor(e/i)}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return this._leapYear(i.year())},_leapYear:function(e){return t(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,i,r){var o=this.newDate(e,i,r);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,i){return e.year&&(i=e.month(),e=e.year()),this._validate(e,i,this.minDay,d.local.invalidMonth),12===i&&this.leapYear(e)||8===i&&5===t(this.daysInYear(e),10)?30:9===i&&3===t(this.daysInYear(e),10)?29:this.daysPerMonth[i-1]},weekDay:function(e,i,r){return 6!==this.dayOfWeek(e,i,r)},extraInfo:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate);e=o.year(),i=o.month(),r=o.day();var n=e<=0?e+1:e,p=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(i<7){for(var s=7;s<=this.monthsInYear(e);s++)p+=this.daysInMonth(e,s);for(s=1;s<i;s++)p+=this.daysInMonth(e,s)}else for(s=7;s<i;s++)p+=this.daysInMonth(e,s);return p},_delay1:function(e){var i=Math.floor((235*e-234)/19),o=29*i+Math.floor((12084+13753*i)/25920);return t(3*(o+1),7)<3&&o++,o},_delay2:function(e){var i=this._delay1(e-1),r=this._delay1(e);return this._delay1(e+1)-r==356?2:r-i==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var i=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===i?1:i+1,7,1);)i++;for(var r=e<this.toJD(i,1,1)?7:1;e>this.toJD(i,r,this.daysInMonth(i,r));)r++;var o=e-this.toJD(i,r,1)+1;return this.newDate(i,r,o)}}),d.calendars.hebrew=_},{"../main":346,"object-assign":247}],337:[function(y,$,ee){var d=y("../main");function _(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){return(11*this._validate(t,this.minMonth,this.minDay,d.local.invalidYear).year()+14)%30<11},weekOfYear:function(t,e,i){var r=this.newDate(t,e,i);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){return this.leapYear(t)?355:354},daysInMonth:function(t,e){var i=this._validate(t,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(t,e,i){return 5!==this.dayOfWeek(t,e,i)},toJD:function(t,e,i){var r=this._validate(t,e,i,d.local.invalidDate);return t=r.year(),e=r.month(),t=t<=0?t+1:t,(i=r.day())+Math.ceil(29.5*(e-1))+354*(t-1)+Math.floor((3+11*t)/30)+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var e=Math.floor((30*(t-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var i=Math.min(12,Math.ceil((t-29-this.toJD(e,1,1))/29.5)+1),r=t-this.toJD(e,i,1)+1;return this.newDate(e,i,r)}}),d.calendars.islamic=_},{"../main":346,"object-assign":247}],338:[function(y,$,ee){var d=y("../main");function _(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var e=this._validate(t,this.minMonth,this.minDay,d.local.invalidYear);return(t=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(t,e,i){var r=this.newDate(t,e,i);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,e){var i=this._validate(t,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(t,e,i){return(this.dayOfWeek(t,e,i)||7)<6},toJD:function(t,e,i){var r=this._validate(t,e,i,d.local.invalidDate);return t=r.year(),e=r.month(),i=r.day(),t<0&&t++,e<=2&&(t--,e+=12),Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+i-1524.5},fromJD:function(t){var e=Math.floor(t+.5)+1524,i=Math.floor((e-122.1)/365.25),r=Math.floor(365.25*i),o=Math.floor((e-r)/30.6001),n=o-Math.floor(o<14?1:13),p=i-Math.floor(n>2?4716:4715),s=e-r-Math.floor(30.6001*o);return p<=0&&p--,this.newDate(p,n,s)}}),d.calendars.julian=_},{"../main":346,"object-assign":247}],339:[function(y,$,ee){var d=y("../main");function _(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function t(i,r){return i-r*Math.floor(i/r)}function e(i,r){return t(i-1,r)+1}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,d.local.invalidYear),!1},formatYear:function(i){i=this._validate(i,this.minMonth,this.minDay,d.local.invalidYear).year();var r=Math.floor(i/400);return i%=400,i+=i<0?400:0,r+"."+Math.floor(i/20)+"."+i%20},forYear:function(i){if((i=i.split(".")).length<3)throw"Invalid Mayan year";for(var r=0,o=0;o<i.length;o++){var n=parseInt(i[o],10);if(Math.abs(n)>19||o>0&&n<0)throw"Invalid Mayan year";r=20*r+n}return r},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,d.local.invalidYear),18},weekOfYear:function(i,r,o){return this._validate(i,r,o,d.local.invalidDate),0},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,d.local.invalidYear),360},daysInMonth:function(i,r){return this._validate(i,r,this.minDay,d.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(i,r,o){return this._validate(i,r,o,d.local.invalidDate).day()},weekDay:function(i,r,o){return this._validate(i,r,o,d.local.invalidDate),!0},extraInfo:function(i,r,o){var n=this._validate(i,r,o,d.local.invalidDate).toJD(),p=this._toHaab(n),s=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[p[0]-1],haabMonth:p[0],haabDay:p[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(i){var r=t(8+(i-=this.jdEpoch)+340,365);return[Math.floor(r/20)+1,t(r,20)]},_toTzolkin:function(i){return[e(20+(i-=this.jdEpoch),20),e(i+4,13)]},toJD:function(i,r,o){var n=this._validate(i,r,o,d.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(i){i=Math.floor(i)+.5-this.jdEpoch;var r=Math.floor(i/360);i%=360,i+=i<0?360:0;var o=Math.floor(i/20);return this.newDate(r,o,i%20)}}),d.calendars.mayan=_},{"../main":346,"object-assign":247}],340:[function(y,$,ee){var d=y("../main"),g=y("object-assign");function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_.prototype=new d.baseCalendar;var t=d.instance("gregorian");g(_.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return t.leapYear(i.year()+(i.year()<1?1:0)+1469)},weekOfYear:function(e,i,r){var o=this.newDate(e,i,r);return o.add(1-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(e,i){var r=this._validate(e,i,this.minDay,d.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,i,r){return(this.dayOfWeek(e,i,r)||7)<6},toJD:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidMonth);(e=o.year())<0&&e++;for(var n=o.day(),p=1;p<o.month();p++)n+=this.daysPerMonth[p-1];return n+t.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var i=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(i+1,1,1);)i++;for(var r=e-Math.floor(this.toJD(i,1,1)+.5)+1,o=1;r>this.daysInMonth(i,o);)r-=this.daysInMonth(i,o),o++;return this.newDate(i,o,r)}}),d.calendars.nanakshahi=_},{"../main":346,"object-assign":247}],341:[function(y,$,ee){var d=y("../main");function _(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(t){return this.daysInYear(t)!==this.daysPerYear},weekOfYear:function(t,e,i){var r=this.newDate(t,e,i);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){if(t=this._validate(t,this.minMonth,this.minDay,d.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[t])return this.daysPerYear;for(var e=0,i=this.minMonth;i<=12;i++)e+=this.NEPALI_CALENDAR_DATA[t][i];return e},daysInMonth:function(t,e){return t.year&&(e=t.month(),t=t.year()),this._validate(t,e,this.minDay,d.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[t]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[t][e]},weekDay:function(t,e,i){return 6!==this.dayOfWeek(t,e,i)},toJD:function(t,e,i){var r=this._validate(t,e,i,d.local.invalidDate);t=r.year(),e=r.month(),i=r.day();var o=d.instance(),n=0,p=e,s=t;this._createMissingCalendarData(t);var a=t-(p>9||9===p&&i>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(9!==e&&(n=i,p--);9!==p;)p<=0&&(p=12,s--),n+=this.NEPALI_CALENDAR_DATA[s][p],p--;return 9===e?(n+=i-this.NEPALI_CALENDAR_DATA[s][0])<0&&(n+=o.daysInYear(a)):n+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],o.newDate(a,1,1).add(n,"d").toJD()},fromJD:function(t){var e=d.instance().fromJD(t),i=e.year(),r=e.dayOfYear(),o=i+56;this._createMissingCalendarData(o);for(var n=9,s=this.NEPALI_CALENDAR_DATA[o][n]-this.NEPALI_CALENDAR_DATA[o][0]+1;r>s;)++n>12&&(n=1,o++),s+=this.NEPALI_CALENDAR_DATA[o][n];return this.newDate(o,n,this.NEPALI_CALENDAR_DATA[o][n]-(s-r))},_createMissingCalendarData:function(t){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var i=t-1;i<t+2;i++)void 0===this.NEPALI_CALENDAR_DATA[i]&&(this.NEPALI_CALENDAR_DATA[i]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),d.calendars.nepali=_},{"../main":346,"object-assign":247}],342:[function(y,$,ee){var d=y("../main");function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function t(e,i){return e-i*Math.floor(e/i)}y("object-assign")(_.prototype=new d.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return 682*((i.year()-(i.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,i,r){var o=this.newDate(e,i,r);return o.add(-(o.dayOfWeek()+1)%7,"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(e,i){var r=this._validate(e,i,this.minDay,d.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,i,r){return 5!==this.dayOfWeek(e,i,r)},toJD:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate);e=o.year(),i=o.month(),r=o.day();var n=e-(e>=0?474:473),p=474+t(n,2820);return r+(i<=7?31*(i-1):30*(i-1)+6)+Math.floor((682*p-110)/2816)+365*(p-1)+1029983*Math.floor(n/2820)+this.jdEpoch-1},fromJD:function(e){var i=(e=Math.floor(e)+.5)-this.toJD(475,1,1),r=Math.floor(i/1029983),o=t(i,1029983),n=2820;if(1029982!==o){var p=Math.floor(o/366),s=t(o,366);n=Math.floor((2134*p+2816*s+2815)/1028522)+p+1}var a=n+2820*r+474,c=e-this.toJD(a=a<=0?a-1:a,1,1)+1,u=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),h=e-this.toJD(a,u,1)+1;return this.newDate(a,u,h)}}),d.calendars.persian=_,d.calendars.jalali=_},{"../main":346,"object-assign":247}],343:[function(y,$,ee){var d=y("../main"),g=y("object-assign"),_=d.instance();function t(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}g(t.prototype=new d.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return e=this._t2gYear(i.year()),_.leapYear(e)},weekOfYear:function(e,i,r){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return e=this._t2gYear(o.year()),_.weekOfYear(e,o.month(),o.day())},daysInMonth:function(e,i){var r=this._validate(e,i,this.minDay,d.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,i,r){return(this.dayOfWeek(e,i,r)||7)<6},toJD:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate);return e=this._t2gYear(o.year()),_.toJD(e,o.month(),o.day())},fromJD:function(e){var i=_.fromJD(e),r=this._g2tYear(i.year());return this.newDate(r,i.month(),i.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),d.calendars.taiwan=t},{"../main":346,"object-assign":247}],344:[function(y,$,ee){var d=y("../main"),g=y("object-assign"),_=d.instance();function t(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}g(t.prototype=new d.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return e=this._t2gYear(i.year()),_.leapYear(e)},weekOfYear:function(e,i,r){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return e=this._t2gYear(o.year()),_.weekOfYear(e,o.month(),o.day())},daysInMonth:function(e,i){var r=this._validate(e,i,this.minDay,d.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,i,r){return(this.dayOfWeek(e,i,r)||7)<6},toJD:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate);return e=this._t2gYear(o.year()),_.toJD(e,o.month(),o.day())},fromJD:function(e){var i=_.fromJD(e),r=this._g2tYear(i.year());return this.newDate(r,i.month(),i.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),d.calendars.thai=t},{"../main":346,"object-assign":247}],345:[function(y,$,ee){var d=y("../main");function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y("object-assign")(_.prototype=new d.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return 355===this.daysInYear(i.year())},weekOfYear:function(e,i,r){var o=this.newDate(e,i,r);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var i=0,r=1;r<=12;r++)i+=this.daysInMonth(e,r);return i},daysInMonth:function(e,i){for(var r=this._validate(e,i,this.minDay,d.local.invalidMonth).toJD()-24e5+.5,o=0,n=0;n<t.length;n++){if(t[n]>r)return t[o]-t[o-1];o++}return 30},weekDay:function(e,i,r){return 5!==this.dayOfWeek(e,i,r)},toJD:function(e,i,r){var o=this._validate(e,i,r,d.local.invalidDate),n=12*(o.year()-1)+o.month()-15292;return o.day()+t[n-1]-1+24e5-.5},fromJD:function(e){for(var i=e-24e5+.5,r=0,o=0;o<t.length&&!(t[o]>i);o++)r++;var n=r+15292,p=Math.floor((n-1)/12);return this.newDate(p+1,n-12*p,i-t[r-1]+1)},isValid:function(e,i,r){var o=d.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(o=(e=null!=e.year?e.year:e)>=1276&&e<=1500),o},_validate:function(e,i,r,o){var n=d.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw o.replace(/\{0\}/,this.local.name);return n}}),d.calendars.ummalqura=_;var t=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(y,$,ee){var d=y("object-assign");function g(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function _(o,n,p,s){if(this._calendar=o,this._year=n,this._month=p,this._day=s,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(r.local.invalidDate||r.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function t(o,n){return"000000".substring(0,n-(o=""+o).length)+o}function e(){this.shortYearCutoff="+10"}function i(o){this.local=this.regionalOptions[o]||this.regionalOptions[""]}d(g.prototype,{instance:function(o,n){o=(o||"gregorian").toLowerCase();var p=this._localCals[o+"-"+(n=n||"")];if(!p&&this.calendars[o]&&(p=new this.calendars[o](n),this._localCals[o+"-"+n]=p),!p)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,o);return p},newDate:function(o,n,p,s,a){return(s=(null!=o&&o.year?o.calendar():"string"==typeof s?this.instance(s,a):s)||this.instance()).newDate(o,n,p)},substituteDigits:function(o){return function(n){return(n+"").replace(/[0-9]/g,function(p){return o[p]})}},substituteChineseDigits:function(o,n){return function(p){for(var s="",a=0;p>0;){var c=p%10;s=(0===c?"":o[c]+n[a])+s,a++,p=Math.floor(p/10)}return 0===s.indexOf(o[1]+n[1])&&(s=s.substr(1)),s||o[0]}}}),d(_.prototype,{newDate:function(o,n,p){return this._calendar.newDate(null==o?this:o,n,p)},year:function(o){return 0===arguments.length?this._year:this.set(o,"y")},month:function(o){return 0===arguments.length?this._month:this.set(o,"m")},day:function(o){return 0===arguments.length?this._day:this.set(o,"d")},date:function(o,n,p){if(!this._calendar.isValid(o,n,p))throw(r.local.invalidDate||r.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=o,this._month=n,this._day=p,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(o,n){return this._calendar.add(this,o,n)},set:function(o,n){return this._calendar.set(this,o,n)},compareTo:function(o){if(this._calendar.name!==o._calendar.name)throw(r.local.differentCalendars||r.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,o._calendar.local.name);var n=this._year!==o._year?this._year-o._year:this._month!==o._month?this.monthOfYear()-o.monthOfYear():this._day-o._day;return 0===n?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(o){return this._calendar.fromJD(o)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(o){return this._calendar.fromJSDate(o)},toString:function(){return(this.year()<0?"-":"")+t(Math.abs(this.year()),4)+"-"+t(this.month(),2)+"-"+t(this.day(),2)}}),d(e.prototype,{_validateLevel:0,newDate:function(o,n,p){return null==o?this.today():(o.year&&(this._validate(o,n,p,r.local.invalidDate||r.regionalOptions[""].invalidDate),p=o.day(),n=o.month(),o=o.year()),new _(this,o,n,p))},today:function(){return this.fromJSDate(new Date)},epoch:function(o){return this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(o){var n=this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+t(Math.abs(n.year()),4)},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),12},monthOfYear:function(o,n){var p=this._validate(o,n,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth);return(p.month()+this.monthsInYear(p)-this.firstMonth)%this.monthsInYear(p)+this.minMonth},fromMonthOfYear:function(o,n){var p=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(o)+this.minMonth;return this._validate(o,p,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth),p},daysInYear:function(o){var n=this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(o,n,p){var s=this._validate(o,n,p,r.local.invalidDate||r.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(o,n,p){var s=this._validate(o,n,p,r.local.invalidDate||r.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(o,n,p){return this._validate(o,n,p,r.local.invalidDate||r.regionalOptions[""].invalidDate),{}},add:function(o,n,p){return this._validate(o,this.minMonth,this.minDay,r.local.invalidDate||r.regionalOptions[""].invalidDate),this._correctAdd(o,this._add(o,n,p),n,p)},_add:function(o,n,p){if(this._validateLevel++,"d"===p||"w"===p){var s=o.toJD()+n*("w"===p?this.daysInWeek():1),a=o.calendar().fromJD(s);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var c=o.year()+("y"===p?n:0),u=o.monthOfYear()+("m"===p?n:0);a=o.day(),"y"===p?(o.month()!==this.fromMonthOfYear(c,u)&&(u=this.newDate(c,o.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(c)),a=Math.min(a,this.daysInMonth(c,this.fromMonthOfYear(c,u)))):"m"===p&&(function(v){for(;u<v.minMonth;)c--,u+=v.monthsInYear(c);for(var f=v.monthsInYear(c);u>f-1+v.minMonth;)c++,u-=f,f=v.monthsInYear(c)}(this),a=Math.min(a,this.daysInMonth(c,this.fromMonthOfYear(c,u))));var h=[c,this.fromMonthOfYear(c,u),a];return this._validateLevel--,h}catch(v){throw this._validateLevel--,v}},_correctAdd:function(o,n,p,s){if(!(this.hasYearZero||"y"!==s&&"m"!==s||0!==n[0]&&o.year()>0==n[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s];n=this._add(o,p*a[0]+(p<0?-1:1)*a[1],a[2])}return o.date(n[0],n[1],n[2])},set:function(o,n,p){this._validate(o,this.minMonth,this.minDay,r.local.invalidDate||r.regionalOptions[""].invalidDate);var s="y"===p?n:o.year(),a="m"===p?n:o.month(),c="d"===p?n:o.day();return"y"!==p&&"m"!==p||(c=Math.min(c,this.daysInMonth(s,a))),o.date(s,a,c)},isValid:function(o,n,p){this._validateLevel++;var s=this.hasYearZero||0!==o;if(s){var a=this.newDate(o,n,this.minDay);s=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(a)&&p>=this.minDay&&p-this.minDay<this.daysInMonth(a)}return this._validateLevel--,s},toJSDate:function(o,n,p){var s=this._validate(o,n,p,r.local.invalidDate||r.regionalOptions[""].invalidDate);return r.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(o){return this.fromJD(r.instance().fromJSDate(o).toJD())},_validate:function(o,n,p,s){if(o.year){if(0===this._validateLevel&&this.name!==o.calendar().name)throw(r.local.differentCalendars||r.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,o.calendar().local.name);return o}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(o,n,p))throw s.replace(/\{0\}/,this.local.name);var a=this.newDate(o,n,p);return this._validateLevel--,a}catch(c){throw this._validateLevel--,c}}}),d(i.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var n=this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return(o=n.year()+(n.year()<0?1:0))%4==0&&(o%100!=0||o%400==0)},weekOfYear:function(o,n,p){var s=this.newDate(o,n,p);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(o,n){var p=this._validate(o,n,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(o,n,p){return(this.dayOfWeek(o,n,p)||7)<6},toJD:function(o,n,p){var s=this._validate(o,n,p,r.local.invalidDate||r.regionalOptions[""].invalidDate);o=s.year(),n=s.month(),p=s.day(),o<0&&o++,n<3&&(n+=12,o--);var a=Math.floor(o/100),c=2-a+Math.floor(a/4);return Math.floor(365.25*(o+4716))+Math.floor(30.6001*(n+1))+p+c-1524.5},fromJD:function(o){var n=Math.floor(o+.5),p=Math.floor((n-1867216.25)/36524.25),s=1524+(p=n+1+p-Math.floor(p/4)),a=Math.floor((s-122.1)/365.25),c=Math.floor(365.25*a),u=Math.floor((s-c)/30.6001),h=s-c-Math.floor(30.6001*u),v=u-(u>13.5?13:1),f=a-(v>2.5?4716:4715);return f<=0&&f--,this.newDate(f,v,h)},toJSDate:function(o,n,p){var s=this._validate(o,n,p,r.local.invalidDate||r.regionalOptions[""].invalidDate),a=new Date(s.year(),s.month()-1,s.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(o){return this.newDate(o.getFullYear(),o.getMonth()+1,o.getDate())}});var r=$.exports=new g;r.cdate=_,r.baseCalendar=e,r.calendars.gregorian=i},{"object-assign":247}],347:[function(y,$,ee){var d=y("object-assign"),g=y("./main");d(g.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),g.local=g.regionalOptions[""],d(g.cdate.prototype,{formatDate:function(_,t){return"string"!=typeof _&&(t=_,_=""),this._calendar.formatDate(_||"",this,t)}}),d(g.baseCalendar.prototype,{UNIX_EPOCH:g.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:g.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(_,t,e){if("string"!=typeof _&&(e=t,t=_,_=""),!t)return"";if(t.calendar()!==this)throw g.local.invalidFormat||g.regionalOptions[""].invalidFormat;_=_||this.local.dateFormat;for(var r,o,n,p=(e=e||{}).dayNamesShort||this.local.dayNamesShort,s=e.dayNames||this.local.dayNames,a=e.monthNumbers||this.local.monthNumbers,c=e.monthNamesShort||this.local.monthNamesShort,u=e.monthNames||this.local.monthNames,h=function(L,A){for(var I=1;T+I<_.length&&_.charAt(T+I)===L;)I++;return T+=I-1,Math.floor(I/(A||1))>1},v=function(L,A,I,D){var S=""+A;if(h(L,D))for(;S.length<I;)S="0"+S;return S},f=this,x=function(L,A){return A?"function"==typeof u?u.call(f,L):u[L.month()-f.minMonth]:"function"==typeof c?c.call(f,L):c[L.month()-f.minMonth]},m=this.local.digits,w=function(L){return e.localNumbers&&m?m(L):L},b="",k=!1,T=0;T<_.length;T++)if(k)"'"!==_.charAt(T)||h("'")?b+=_.charAt(T):k=!1;else switch(_.charAt(T)){case"d":b+=w(v("d",t.day(),2));break;case"D":b+=("D",r=t.dayOfWeek(),o=p,n=s,h("D")?n[r]:o[r]);break;case"o":b+=v("o",t.dayOfYear(),3);break;case"w":b+=v("w",t.weekOfYear(),2);break;case"m":b+=(L=t,"function"==typeof a?a.call(f,L,h("m")):w(v("m",L.month(),2)));break;case"M":b+=x(t,h("M"));break;case"y":b+=h("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":h("Y",2),b+=t.formatYear();break;case"J":b+=t.toJD();break;case"@":b+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":b+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":h("'")?b+="'":k=!0;break;default:b+=_.charAt(T)}var L;return b},parseDate:function(_,t,e){if(null==t)throw g.local.invalidArguments||g.regionalOptions[""].invalidArguments;if(""===(t="object"==typeof t?t.toString():t+""))return null;_=_||this.local.dateFormat;var i=(e=e||{}).shortYearCutoff||this.shortYearCutoff;i="string"!=typeof i?i:this.today().year()%100+parseInt(i,10);for(var r=e.dayNamesShort||this.local.dayNamesShort,o=e.dayNames||this.local.dayNames,n=e.parseMonth||this.local.parseMonth,p=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,a=e.monthNames||this.local.monthNames,c=-1,u=-1,h=-1,v=-1,f=-1,l=!1,x=!1,m=function(R,F){for(var H=1;D+H<_.length&&_.charAt(D+H)===R;)H++;return D+=H-1,Math.floor(H/(F||1))>1},w=function(R,F){var H=m(R,F),U=[2,3,H?4:2,H?4:2,10,11,20]["oyYJ@!".indexOf(R)+1],X=new RegExp("^-?\\d{1,"+U+"}"),Z=t.substring(I).match(X);if(!Z)throw(g.local.missingNumberAt||g.regionalOptions[""].missingNumberAt).replace(/\{0\}/,I);return I+=Z[0].length,parseInt(Z[0],10)},b=this,k=function(){if("function"==typeof p){m("m");var R=p.call(b,t.substring(I));return I+=R.length,R}return w("m")},T=function(R,F,H,U){for(var X=m(R,U)?H:F,Z=0;Z<X.length;Z++)if(t.substr(I,X[Z].length).toLowerCase()===X[Z].toLowerCase())return I+=X[Z].length,Z+b.minMonth;throw(g.local.unknownNameAt||g.regionalOptions[""].unknownNameAt).replace(/\{0\}/,I)},L=function(){if("function"==typeof a){var R=m("M")?a.call(b,t.substring(I)):s.call(b,t.substring(I));return I+=R.length,R}return T("M",s,a)},A=function(){if(t.charAt(I)!==_.charAt(D))throw(g.local.unexpectedLiteralAt||g.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,I);I++},I=0,D=0;D<_.length;D++)if(x)"'"!==_.charAt(D)||m("'")?A():x=!1;else switch(_.charAt(D)){case"d":v=w("d");break;case"D":T("D",r,o);break;case"o":f=w("o");break;case"w":w("w");break;case"m":h=k();break;case"M":h=L();break;case"y":var S=D;l=!m("y",2),D=S,u=w("y",2);break;case"Y":u=w("Y",2);break;case"J":c=w("J")+.5,"."===t.charAt(I)&&(I++,w("J"));break;case"@":c=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=w("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":I=t.length;break;case"'":m("'")?A():x=!0;break;default:A()}if(I<t.length)throw g.local.unexpectedText||g.regionalOptions[""].unexpectedText;if(-1===u?u=this.today().year():u<100&&l&&(u+=-1===i?1900:this.today().year()-this.today().year()%100-(u<=i?0:100)),"string"==typeof h&&(h=n.call(this,u,h)),f>-1){v=f;for(var C=this.daysInMonth(u,h=1);v>C;C=this.daysInMonth(u,h))h++,v-=C}return c>-1?this.fromJD(c):this.newDate(u,h,v)},determineDate:function(_,t,e,i,r){e&&"object"!=typeof e&&(r=i,i=e,e=null),"string"!=typeof i&&(r=i,i="");var o=this;return t=t?t.newDate():null,null==_?t:"string"==typeof _?function(n){try{return o.parseDate(i,n,r)}catch(c){}for(var p=((n=n.toLowerCase()).match(/^c/)&&e?e.newDate():null)||o.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=s.exec(n);a;)p.add(parseInt(a[1],10),a[2]||"d"),a=s.exec(n);return p}(_):"number"==typeof _?isNaN(_)||_===1/0||_===-1/0?t:o.today().add(_,"d"):o.newDate(_)}})},{"./main":346,"object-assign":247}],348:[function(y,$,ee){"use strict";$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(y,$,ee){"use strict";var d=y("./arrow_paths"),g=y("../../plots/font_attributes"),_=y("../../plots/cartesian/constants"),t=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),$.exports=t("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:g({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",_.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",_.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",_.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",_.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:g({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("./draw").draw;function t(i){d.filterVisible(i._fullLayout.annotations).forEach(function(o){var n=g.getFromId(i,o.xref),p=g.getFromId(i,o.yref),s=g.getRefType(o.xref),a=g.getRefType(o.yref);o._extremes={},"range"===s&&e(o,n),"range"===a&&e(o,p)})}function e(i,r){var o,n=r._id,p=n.charAt(0),s=i[p],a=i["a"+p],h=i["_"+p+"padplus"],v=i["_"+p+"padminus"],f={x:1,y:-1}[p]*i[p+"shift"],l=3*i.arrowsize*i.arrowwidth||0,x=l+f,m=l-f,w=3*i.startarrowsize*i.arrowwidth||0,b=w+f,k=w-f;if(i["a"+p+"ref"]===i[p+"ref"]){var T=g.findExtremes(r,[r.r2c(s)],{ppadplus:x,ppadminus:m}),L=g.findExtremes(r,[r.r2c(a)],{ppadplus:Math.max(h,b),ppadminus:Math.max(v,k)});o={min:[T.min[0],L.min[0]],max:[T.max[0],L.max[0]]}}else b=a?b+a:b,k=a?k-a:k,o=g.findExtremes(r,[r.r2c(s)],{ppadplus:Math.max(h,x,b),ppadminus:Math.max(v,m,k)});i._extremes[n]=o}$.exports=function(i){if(d.filterVisible(i._fullLayout.annotations).length&&i._fullData.length)return d.syncOrAsync([_,t],i)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry"),_=y("../../plot_api/plot_template").arrayEditor;function t(i,r){var o,n,p,s,a,c,u,h=i._fullLayout.annotations,v=[],f=[],l=[],x=(r||[]).length;for(o=0;o<h.length;o++)if(s=(p=h[o]).clicktoshow){for(n=0;n<x;n++)if(c=(a=r[n]).xaxis,u=a.yaxis,c._id===p.xref&&u._id===p.yref&&c.d2r(a.x)===e(p._xclick,c)&&u.d2r(a.y)===e(p._yclick,u)){(p.visible?"onout"===s?f:l:v).push(o);break}n===x&&p.visible&&"onout"===s&&f.push(o)}return{on:v,off:f,explicitOff:l}}function e(i,r){return"log"===r.type?r.l2r(i):r.d2r(i)}$.exports={hasClickToShow:function(i,r){var o=t(i,r);return o.on.length>0||o.explicitOff.length>0},onClick:function(i,r){var o,n,p=t(i,r),s=p.on,a=p.off.concat(p.explicitOff),c={},u=i._fullLayout.annotations;if(s.length||a.length){for(o=0;o<s.length;o++)(n=_(i.layout,"annotations",u[s[o]])).modifyItem("visible",!0),d.extendFlat(c,n.getUpdateObj());for(o=0;o<a.length;o++)(n=_(i.layout,"annotations",u[a[o]])).modifyItem("visible",!1),d.extendFlat(c,n.getUpdateObj());return g.call("update",i,{},c)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../color");$.exports=function(_,t,e,i){i("opacity");var r=i("bgcolor"),o=i("bordercolor"),n=g.opacity(o);i("borderpad");var p=i("borderwidth"),s=i("showarrow");if(i("text",s?" ":e._dfltTitle.annotation),i("textangle"),d.coerceFont(i,"font",e.font),i("width"),i("align"),i("height")&&i("valign"),s){var a,c,u=i("arrowside");-1!==u.indexOf("end")&&(a=i("arrowhead"),c=i("arrowsize")),-1!==u.indexOf("start")&&(i("startarrowhead",a),i("startarrowsize",c)),i("arrowcolor",n?t.bordercolor:g.defaultLine),i("arrowwidth",2*(n&&p||1)),i("standoff"),i("startstandoff")}var h=i("hovertext"),v=e.hoverlabel||{};if(h){var f=i("hoverlabel.bgcolor",v.bgcolor||(g.opacity(r)?g.rgb(r):g.defaultLine)),l=i("hoverlabel.bordercolor",v.bordercolor||g.contrast(f));d.coerceFont(i,"hoverlabel.font",{family:v.font.family,size:v.font.size,color:v.font.color||l})}i("captureevents",!!h)}},{"../../lib":503,"../color":366}],353:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib/to_log_range");$.exports=function(_,t,e,i){t=t||{};var r="log"===e&&"linear"===t.type;if(r||"linear"===e&&"log"===t.type)for(var n,p,s=_._fullLayout.annotations,a=t._id.charAt(0),c=0;c<s.length;c++)p="annotations["+c+"].",(n=s[c])[a+"ref"]===t._id&&u(a),n["a"+a+"ref"]===t._id&&u("a"+a);function u(h){var v=n[h],f=null;f=r?g(v,t.range):Math.pow(10,v),d(f)||(f=null),i(p+h,f)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../../plots/array_container_defaults"),t=y("./common_defaults"),e=y("./attributes");function i(r,o,n){function p(L,A){return d.coerce(r,o,e,L,A)}var s=p("visible"),a=p("clicktoshow");if(s||a){t(r,o,n,p);for(var c=o.showarrow,u=["x","y"],h=[-10,-30],v={_fullLayout:n},f=0;f<2;f++){var l=u[f],x=g.coerceRef(r,o,v,l,"","paper");if("paper"!==x&&g.getFromId(v,x)._annIndices.push(o._index),g.coercePosition(o,v,p,x,l,.5),c){var m="a"+l,w=g.coerceRef(r,o,v,m,"pixel",["pixel","paper"]);"pixel"!==w&&w!==x&&(w=o[m]="pixel"),g.coercePosition(o,v,p,w,m,"pixel"===w?h[f]:.4)}p(l+"anchor"),p(l+"shift")}if(d.noneOrAll(r,o,["x","y"]),c&&d.noneOrAll(r,o,["ax","ay"]),a){var k=p("xclick"),T=p("yclick");o._xclick=void 0===k?o.x:g.cleanPosition(k,v,o.xref),o._yclick=void 0===T?o.y:g.cleanPosition(T,v,o.yref)}}}$.exports=function(r,o){_(r,o,{name:"annotations",handleItemDefaults:i})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../plots/plots"),t=y("../../lib"),e=t.strTranslate,i=y("../../plots/cartesian/axes"),r=y("../color"),o=y("../drawing"),n=y("../fx"),p=y("../../lib/svg_text_utils"),s=y("../../lib/setcursor"),a=y("../dragelement"),c=y("../../plot_api/plot_template").arrayEditor,u=y("./draw_arrow_head");function h(l,x){var m=l._fullLayout.annotations[x]||{},w=i.getFromId(l,m.xref),b=i.getFromId(l,m.yref);w&&w.setScale(),b&&b.setScale(),f(l,m,x,!1,w,b)}function v(l,x,m,w,b){var k=b[m],T=b[m+"ref"],L=-1!==m.indexOf("y"),A="domain"===i.getRefType(T),I=L?w.h:w.w;return l?A?k+(L?-x:x)/l._length:l.p2r(l.r2p(k)+x):k+(L?-x:x)/I}function f(l,x,m,w,b,k){var T,L,A=l._fullLayout,I=l._fullLayout._size,D=l._context.edits;w?(T="annotation-"+w,L=w+".annotations"):(T="annotation",L="annotations");var S=c(l.layout,L,x),C=S.modifyBase,R=S.modifyItem,F=S.getUpdateObj;A._infolayer.selectAll("."+T+'[data-index="'+m+'"]').remove();var H="clip"+A._uid+"_ann"+m;if(x._input&&!1!==x.visible){var U={x:{},y:{}},X=+x.textangle||0,Z=A._infolayer.append("g").classed(T,!0).attr("data-index",String(m)).style("opacity",x.opacity),Y=Z.append("g").classed("annotation-text-g",!0),W=D[x.showarrow?"annotationTail":"annotationPosition"],te=x.captureevents||D.annotationText||W,z=Y.append("g").style("pointer-events",te?"all":null).call(s,"pointer").on("click",function(){l._dragging=!1,l.emit("plotly_clickannotation",se(d.event))});x.hovertext&&z.on("mouseover",function(){var ge=x.hoverlabel,be=ge.font,Te=this.getBoundingClientRect(),we=l.getBoundingClientRect();n.loneHover({x0:Te.left-we.left,x1:Te.right-we.left,y:(Te.top+Te.bottom)/2-we.top,text:x.hovertext,color:ge.bgcolor,borderColor:ge.bordercolor,fontFamily:be.family,fontSize:be.size,fontColor:be.color},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:l})}).on("mouseout",function(){n.loneUnhover(A._hoverlayer.node())});var N=x.borderwidth,Q=N+x.borderpad,j=z.append("rect").attr("class","bg").style("stroke-width",N+"px").call(r.stroke,x.bordercolor).call(r.fill,x.bgcolor),J=x.width||x.height,K=A._topclips.selectAll("#"+H).data(J?[0]:[]);K.enter().append("clipPath").classed("annclip",!0).attr("id",H).append("rect"),K.exit().remove();var re=x.font,ie=A._meta?t.templateString(x.text,A._meta):x.text,ce=z.append("text").classed("annotation-text",!0).text(ie);D.annotationText?ce.call(p.makeEditable,{delegate:z,gd:l}).call(de).on("edit",function(ge){x.text=ge,this.call(de),R("text",ge),b&&b.autorange&&C(b._name+".autorange",!0),k&&k.autorange&&C(k._name+".autorange",!0),g.call("_guiRelayout",l,F())}):ce.call(de)}else d.selectAll("#"+H).remove();function se(ge){var be={index:m,annotation:x._input,fullAnnotation:x,event:ge};return w&&(be.subplotId=w),be}function de(ge){return ge.call(o.font,re).attr({"text-anchor":{left:"start",right:"end"}[x.align]||"middle"}),p.convertToTspans(ge,l,ue),ge}function ue(){var ge=ce.selectAll("a");1===ge.size()&&ge.text()===ce.text()&&z.insert("a",":first-child").attr({"xlink:xlink:href":ge.attr("xlink:href"),"xlink:xlink:show":ge.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(j.node());var be=z.select(".annotation-text-math-group"),Te=!be.empty(),we=o.bBox((Te?be:ce).node()),Le=we.width,fe=we.height,ve=x.width||Le,Me=x.height||fe,ke=Math.round(ve+2*Q),Ce=Math.round(Me+2*Q);function Pe($e,yt){return"auto"===yt&&(yt=$e<1/3?"left":$e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[yt]}for(var Fe=!1,qe=["x","y"],rt=0;rt<qe.length;rt++){var ze,He,Xe,Je,at,pt=qe[rt],xt=x[pt+"ref"]||pt,Ft=x["a"+pt+"ref"],Dt={x:b,y:k}[pt],ot=(X+("x"===pt?0:-90))*Math.PI/180,it=ke*Math.cos(ot),Et=Ce*Math.sin(ot),Xt=Math.abs(it)+Math.abs(Et),nr=x[pt+"anchor"],Ue=x[pt+"shift"]*("x"===pt?1:-1),We=U[pt],Be=i.getRefType(xt);if(Dt&&"domain"!==Be){var Qe=Dt.r2fraction(x[pt]);(Qe<0||Qe>1)&&(Ft===xt?((Qe=Dt.r2fraction(x["a"+pt]))<0||Qe>1)&&(Fe=!0):Fe=!0),ze=Dt._offset+Dt.r2p(x[pt]),Je=.5}else{var Ae="domain"===Be;"x"===pt?(Xe=x[pt],ze=Ae?Dt._offset+Dt._length*Xe:ze=I.l+I.w*Xe):(Xe=1-x[pt],ze=Ae?Dt._offset+Dt._length*Xe:ze=I.t+I.h*Xe),Je=x.showarrow?.5:Xe}if(x.showarrow){We.head=ze;var De=x["a"+pt];if(at=it*Pe(.5,x.xanchor)-Et*Pe(.5,x.yanchor),Ft===xt){var Oe=i.getRefType(Ft);"domain"===Oe?("y"===pt&&(De=1-De),We.tail=Dt._offset+Dt._length*De):We.tail="paper"===Oe?"y"===pt?I.t+I.h*(De=1-De):I.l+I.w*De:Dt._offset+Dt.r2p(De),He=at}else We.tail=ze+De,He=at+De;We.text=We.tail+at;var Ie=A["x"===pt?"width":"height"];if("paper"===xt&&(We.head=t.constrain(We.head,1,Ie-1)),"pixel"===Ft){var et=-Math.max(We.tail-3,We.text),ct=Math.min(We.tail+3,We.text)-Ie;et>0?(We.tail+=et,We.text+=et):ct>0&&(We.tail-=ct,We.text-=ct)}We.tail+=Ue,We.head+=Ue}else He=at=Xt*Pe(Je,nr),We.text=ze+at;We.text+=Ue,at+=Ue,x["_"+pt+"padplus"]=Xt/2+(He+=Ue),x["_"+pt+"padminus"]=Xt/2-He,x["_"+pt+"size"]=Xt,x["_"+pt+"shift"]=at}if(Fe)z.remove();else{var vt=0,ft=0;"left"!==x.align&&(vt=(ve-Le)*("center"===x.align?.5:1)),"top"!==x.valign&&(ft=(Me-fe)*("middle"===x.valign?.5:1)),Te?be.select("svg").attr({x:Q+vt-1,y:Q+ft}).call(o.setClipUrl,J?H:null,l):ce.call(p.positionText,Q+vt-we.left,Q+ft-we.top).call(o.setClipUrl,J?H:null,l),K.select("rect").call(o.setRect,Q,Q,ve,Me),j.call(o.setRect,N/2,N/2,ke-N,Ce-N),z.call(o.setTranslate,Math.round(U.x.text-ke/2),Math.round(U.y.text-Ce/2)),Y.attr({transform:"rotate("+X+","+U.x.text+","+U.y.text+")"});var Ot,Rt=function($e,yt){Z.selectAll(".annotation-arrow-g").remove();var Bt=U.x.head,Ut=U.y.head,Qt=U.x.tail+$e,Re=U.y.tail+yt,ht=U.x.text+$e,Mt=U.y.text+yt,Nt=t.rotationXYMatrix(X,ht,Mt),Zt=t.apply2DTransform(Nt),or=t.apply2DTransform2(Nt),Wt=+j.attr("width"),er=+j.attr("height"),cr=ht-.5*Wt,_r=cr+Wt,xr=Mt-.5*er,dr=xr+er,pr=[[cr,xr,cr,dr],[cr,dr,_r,dr],[_r,dr,_r,xr],[_r,xr,cr,xr]].map(or);if(!pr.reduce(function(Lr,Xr){return Lr^!!t.segmentsIntersect(Bt,Ut,Bt+1e6,Ut+1e6,Xr[0],Xr[1],Xr[2],Xr[3])},!1)){pr.forEach(function(Lr){var Xr=t.segmentsIntersect(Qt,Re,Bt,Ut,Lr[0],Lr[1],Lr[2],Lr[3]);Xr&&(Qt=Xr.x,Re=Xr.y)});var br=x.arrowwidth,Nr=x.arrowcolor,kr=x.arrowside,Hr=Z.append("g").style({opacity:r.opacity(Nr)}).classed("annotation-arrow-g",!0),an=Hr.append("path").attr("d","M"+Qt+","+Re+"L"+Bt+","+Ut).style("stroke-width",br+"px").call(r.stroke,r.rgb(Nr));if(u(an,kr,x),D.annotationPosition&&an.node().parentNode&&!w){var fn=Bt,zn=Ut;if(x.standoff){var Nn=Math.sqrt(Math.pow(Bt-Qt,2)+Math.pow(Ut-Re,2));fn+=x.standoff*(Qt-Bt)/Nn,zn+=x.standoff*(Re-Ut)/Nn}var In,cn,jr=Hr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Qt-fn)+","+(Re-zn),transform:e(fn,zn)}).style("stroke-width",br+6+"px").call(r.stroke,"rgba(0,0,0,0)").call(r.fill,"rgba(0,0,0,0)");a.init({element:jr.node(),gd:l,prepFn:function(){var Lr=o.getTranslate(z);In=Lr.x,cn=Lr.y,b&&b.autorange&&C(b._name+".autorange",!0),k&&k.autorange&&C(k._name+".autorange",!0)},moveFn:function(Lr,Xr){var Un=Zt(In,cn),qr=Un[0]+Lr,On=Un[1]+Xr;z.call(o.setTranslate,qr,On),R("x",v(b,Lr,"x",I,x)),R("y",v(k,Xr,"y",I,x)),x.axref===x.xref&&R("ax",v(b,Lr,"ax",I,x)),x.ayref===x.yref&&R("ay",v(k,Xr,"ay",I,x)),Hr.attr("transform",e(Lr,Xr)),Y.attr({transform:"rotate("+X+","+qr+","+On+")"})},doneFn:function(){g.call("_guiRelayout",l,F());var Lr=document.querySelector(".js-notes-box-panel");Lr&&Lr.redraw(Lr.selectedObj)}})}}};x.showarrow&&Rt(0,0),W&&a.init({element:z.node(),gd:l,prepFn:function(){Ot=Y.attr("transform")},moveFn:function($e,yt){var Bt="pointer";if(x.showarrow)R("ax",x.axref===x.xref?v(b,$e,"ax",I,x):x.ax+$e),R("ay",x.ayref===x.yref?v(k,yt,"ay",I.w,x):x.ay+yt),Rt($e,yt);else{if(w)return;var Ut,Qt;if(b)Ut=v(b,$e,"x",I,x);else{var Re=x._xsize/I.w;Ut=a.align(x.x+(x._xshift-x.xshift)/I.w-Re/2+$e/I.w,Re,0,1,x.xanchor)}if(k)Qt=v(k,yt,"y",I,x);else{var Mt=x._ysize/I.h;Qt=a.align(x.y-(x._yshift+x.yshift)/I.h-Mt/2-yt/I.h,Mt,0,1,x.yanchor)}R("x",Ut),R("y",Qt),b&&k||(Bt=a.getCursor(b?.5:Ut,k?.5:Qt,x.xanchor,x.yanchor))}Y.attr({transform:e($e,yt)+Ot}),s(z,Bt)},clickFn:function($e,yt){x.captureevents&&l.emit("plotly_clickannotation",se(yt))},doneFn:function(){s(z),g.call("_guiRelayout",l,F());var $e=document.querySelector(".js-notes-box-panel");$e&&$e.redraw($e.selectedObj)}})}}}$.exports={draw:function(l){var x=l._fullLayout;x._infolayer.selectAll(".annotation").remove();for(var m=0;m<x.annotations.length;m++)x.annotations[m].visible&&h(l,m);return _.previousPromises(l)},drawOne:h,drawRaw:f}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../color"),_=y("./arrow_paths"),t=y("../../lib"),e=t.strScale,i=t.strRotate,r=t.strTranslate;$.exports=function(o,n,p){var s,a,c,u,h=o.node(),v=_[p.arrowhead||0],f=_[p.startarrowhead||0],l=(p.arrowwidth||1)*(p.arrowsize||1),x=(p.arrowwidth||1)*(p.startarrowsize||1),m=n.indexOf("start")>=0,w=n.indexOf("end")>=0,b=v.backoff*l+p.standoff,k=f.backoff*x+p.startstandoff;if("line"===h.nodeName){s={x:+o.attr("x1"),y:+o.attr("y1")},a={x:+o.attr("x2"),y:+o.attr("y2")};var T=s.x-a.x,L=s.y-a.y;if(u=(c=Math.atan2(L,T))+Math.PI,b&&k&&b+k>Math.sqrt(T*T+L*L))return void Z();if(b){if(b*b>T*T+L*L)return void Z();var A=b*Math.cos(c),I=b*Math.sin(c);a.x+=A,a.y+=I,o.attr({x2:a.x,y2:a.y})}if(k){if(k*k>T*T+L*L)return void Z();var D=k*Math.cos(c),S=k*Math.sin(c);s.x-=D,s.y-=S,o.attr({x1:s.x,y1:s.y})}}else if("path"===h.nodeName){var C=h.getTotalLength(),R="";if(C<b+k)return void Z();var F=h.getPointAtLength(0),H=h.getPointAtLength(.1);c=Math.atan2(F.y-H.y,F.x-H.x),s=h.getPointAtLength(Math.min(k,C)),R="0px,"+k+"px,";var U=h.getPointAtLength(C),X=h.getPointAtLength(C-.1);u=Math.atan2(U.y-X.y,U.x-X.x),a=h.getPointAtLength(Math.max(0,C-b)),o.style("stroke-dasharray",R+=C-(R?k+b:b)+"px,"+C+"px")}function Z(){o.style("stroke-dasharray","0px,100px")}function Y(W,te,z,N){W.path&&(W.noRotate&&(z=0),d.select(h.parentNode).append("path").attr({class:o.attr("class"),d:W.path,transform:r(te.x,te.y)+i(180*z/Math.PI)+e(N)}).style({fill:g.rgb(p.arrowcolor),"stroke-width":0}))}m&&Y(f,s,c,x),w&&Y(v,a,u,l)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(y,$,ee){"use strict";var d=y("./draw"),g=y("./click");$.exports={moduleType:"component",name:"annotations",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("annotations"),calcAutorange:y("./calc_autorange"),draw:d.draw,drawOne:d.drawOne,drawRaw:d.drawRaw,hasClickToShow:g.hasClickToShow,onClick:g.onClick,convertCoords:y("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(y,$,ee){"use strict";var d=y("../annotations/attributes"),g=y("../../plot_api/edit_types").overrideAll,_=y("../../plot_api/plot_template").templatedArray;$.exports=g(_("annotation",{visible:d.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:d.xanchor,xshift:d.xshift,yanchor:d.yanchor,yshift:d.yshift,text:d.text,textangle:d.textangle,font:d.font,width:d.width,height:d.height,opacity:d.opacity,align:d.align,valign:d.valign,bgcolor:d.bgcolor,bordercolor:d.bordercolor,borderpad:d.borderpad,borderwidth:d.borderwidth,showarrow:d.showarrow,arrowcolor:d.arrowcolor,arrowhead:d.arrowhead,startarrowhead:d.startarrowhead,arrowside:d.arrowside,arrowsize:d.arrowsize,startarrowsize:d.startarrowsize,arrowwidth:d.arrowwidth,standoff:d.standoff,startstandoff:d.startstandoff,hovertext:d.hovertext,hoverlabel:d.hoverlabel,captureevents:d.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes");function _(t,e){var i=e.fullSceneLayout.domain,r=e.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},d.extendFlat(t._xa,o),g.setConvert(t._xa),t._xa._offset=r.l+i.x[0]*r.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*r.w*(i.x[1]-i.x[0])},t._ya={},d.extendFlat(t._ya,o),g.setConvert(t._ya),t._ya._offset=r.t+(1-i.y[1])*r.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*r.h*(i.y[1]-i.y[0])}}$.exports=function(t){for(var e=t.fullSceneLayout.annotations,i=0;i<e.length;i++)_(e[i],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../../plots/array_container_defaults"),t=y("../annotations/common_defaults"),e=y("./attributes");function i(r,o,n,p){function s(c,u){return d.coerce(r,o,e,c,u)}function a(c){var u=c+"axis",h={_fullLayout:{}};return h._fullLayout[u]=n[u],g.coercePosition(o,h,s,c,c,.5)}s("visible")&&(t(r,o,p.fullLayout,s),a("x"),a("y"),a("z"),d.noneOrAll(r,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",s("ax",-10),s("ay",-30),d.noneOrAll(r,o,["ax","ay"])))}$.exports=function(r,o,n){_(r,o,{name:"annotations",handleItemDefaults:i,fullLayout:n.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(y,$,ee){"use strict";var d=y("../annotations/draw").drawRaw,g=y("../../plots/gl3d/project"),_=["x","y","z"];$.exports=function(t){for(var e=t.fullSceneLayout,i=t.dataScale,r=e.annotations,o=0;o<r.length;o++){for(var n=r[o],p=!1,s=0;s<3;s++){var a=_[s],u=e[a+"axis"].r2fraction(n[a]);if(u<0||u>1){p=!0;break}}p?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+o+'"]').remove():(n._pdata=g(t.glplot.cameraParams,[e.xaxis.r2l(n.x)*i[0],e.yaxis.r2l(n.y)*i[1],e.zaxis.r2l(n.z)*i[2]]),d(t.graphDiv,n,o,t.id,n._xa,n._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib");$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:y("./attributes")}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),includeBasePlot:function(_,t){var e=d.subplotsRegistry.gl3d;if(e)for(var i=e.attrRegex,r=Object.keys(_),o=0;o<r.length;o++){var n=r[o];i.test(n)&&(_[n].annotations||[]).length&&(g.pushUnique(t._basePlotModules,e),g.pushUnique(t._subplots.gl3d,n))}},convert:y("./convert"),draw:y("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(y,$,ee){"use strict";$.exports=y("world-calendars/dist/main"),y("world-calendars/dist/plus"),y("world-calendars/dist/calendars/chinese"),y("world-calendars/dist/calendars/coptic"),y("world-calendars/dist/calendars/discworld"),y("world-calendars/dist/calendars/ethiopian"),y("world-calendars/dist/calendars/hebrew"),y("world-calendars/dist/calendars/islamic"),y("world-calendars/dist/calendars/julian"),y("world-calendars/dist/calendars/mayan"),y("world-calendars/dist/calendars/nanakshahi"),y("world-calendars/dist/calendars/nepali"),y("world-calendars/dist/calendars/persian"),y("world-calendars/dist/calendars/taiwan"),y("world-calendars/dist/calendars/thai"),y("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(y,$,ee){"use strict";var d=y("./calendars"),g=y("../../lib"),_=y("../../constants/numerical"),t=_.EPOCHJD,e=_.ONEDAY,i={valType:"enumerated",values:g.sortObjectKeys(d.calendars),editType:"calc",dflt:"gregorian"},r=function(f,l,x,m){var w={};return w[x]=i,g.coerce(f,l,w,x,m)},o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function p(f){return n[f]||(n[f]=d.instance(f))}function s(f){return g.extendFlat({},i,{description:f})}function a(f){return"Sets the calendar system to use with `"+f+"` date data."}var c={xcalendar:s(a("x"))},u=g.extendFlat({},c,{ycalendar:s(a("y"))}),h=g.extendFlat({},u,{zcalendar:s(a("z"))}),v=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:u,bar:u,box:u,heatmap:u,contour:u,histogram:u,histogram2d:u,histogram2dcontour:u,scatter3d:h,surface:h,mesh3d:h,scattergl:u,ohlc:c,candlestick:c},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:v},yaxis:{calendar:v},scene:{xaxis:{calendar:v},yaxis:{calendar:v},zaxis:{calendar:v}},polar:{radialaxis:{calendar:v}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:i,handleDefaults:r,handleTraceDefaults:function(f,l,x,m){for(var w=0;w<x.length;w++)r(f,l,x[w]+"calendar",m.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(f,l,x){for(var m,w,b,k,T,L=Math.floor((l+.05)/e)+t,A=p(x).fromJD(L),I=0;-1!==(I=f.indexOf("%",I));)"0"===(m=f.charAt(I+1))||"-"===m||"_"===m?(b=3,w=f.charAt(I+2),"_"===m&&(m="-")):(w=m,m="0",b=2),(k=o[w])?(T="##"===k?"##":A.formatDate(k[m]),f=f.substr(0,I)+T+f.substr(I+b),I+=T.length):I+=b;return f}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(y,$,ee){"use strict";ee.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ee.defaultLine="#444",ee.lightLine="#eee",ee.background="#fff",ee.borderLine="#BEC8D9",ee.lightFraction=1e3/11},{}],366:[function(y,$,ee){"use strict";var d=y("tinycolor2"),g=y("fast-isnumeric"),_=y("../../lib/array").isTypedArray,t=$.exports={},e=y("./attributes");t.defaults=e.defaults;var i=t.defaultLine=e.defaultLine;t.lightLine=e.lightLine;var r=t.background=e.background;function o(n){if(g(n)||"string"!=typeof n)return n;var p=n.trim();if("rgb"!==p.substr(0,3))return n;var s=p.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return n;var a=s[1].trim().split(/\s*[\s,]\s*/),c="a"===p.charAt(3)&&4===a.length;if(!c&&3!==a.length)return n;for(var u=0;u<a.length;u++){if(!(a[u].length&&(a[u]=Number(a[u]),a[u]>=0)))return n;if(3===u)a[u]>1&&(a[u]=1);else if(a[u]>=1)return n}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return c?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}t.tinyRGB=function(n){var p=n.toRgb();return"rgb("+Math.round(p.r)+", "+Math.round(p.g)+", "+Math.round(p.b)+")"},t.rgb=function(n){return t.tinyRGB(d(n))},t.opacity=function(n){return n?d(n).getAlpha():0},t.addOpacity=function(n,p){var s=d(n).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+p+")"},t.combine=function(n,p){var s=d(n).toRgb();if(1===s.a)return d(n).toRgbString();var a=d(p||r).toRgb(),c=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};return d({r:c.r*(1-s.a)+s.r*s.a,g:c.g*(1-s.a)+s.g*s.a,b:c.b*(1-s.a)+s.b*s.a}).toRgbString()},t.contrast=function(n,p,s){var a=d(n);return 1!==a.getAlpha()&&(a=d(t.combine(n,r))),(a.isDark()?p?a.lighten(p):r:s?a.darken(s):i).toString()},t.stroke=function(n,p){var s=d(p);n.style({stroke:t.tinyRGB(s),"stroke-opacity":s.getAlpha()})},t.fill=function(n,p){var s=d(p);n.style({fill:t.tinyRGB(s),"fill-opacity":s.getAlpha()})},t.clean=function(n){if(n&&"object"==typeof n){var p,s,a,c,u=Object.keys(n);for(p=0;p<u.length;p++)if(c=n[a=u[p]],"color"===a.substr(a.length-5))if(Array.isArray(c))for(s=0;s<c.length;s++)c[s]=o(c[s]);else n[a]=o(c);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(c))for(s=0;s<c.length;s++)Array.isArray(c[s])&&(c[s][1]=o(c[s][1]));else if(Array.isArray(c)){var h=c[0];if(!Array.isArray(h)&&h&&"object"==typeof h)for(s=0;s<c.length;s++)t.clean(c[s])}else c&&"object"==typeof c&&!_(c)&&t.clean(c)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/layout_attributes"),g=y("../../plots/font_attributes"),_=y("../../lib/extend").extendFlat,t=y("../../plot_api/edit_types").overrideAll;$.exports=t({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:_({},d.ticks,{dflt:""}),ticklabeloverflow:_({},d.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:g({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,minexponent:d.minexponent,showexponent:d.showexponent,title:{text:{valType:"string"},font:g({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:g({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(y,$,ee){"use strict";$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plot_api/plot_template"),_=y("../../plots/cartesian/tick_value_defaults"),t=y("../../plots/cartesian/tick_mark_defaults"),e=y("../../plots/cartesian/tick_label_defaults"),i=y("../../plots/cartesian/prefix_suffix_defaults"),r=y("./attributes");$.exports=function(o,n,p){var s=g.newContainer(n,"colorbar"),a=o.colorbar||{};function c(L,A){return d.coerce(a,s,r,L,A)}var u=p.margin||{t:0,b:0,l:0,r:0},h=p.width-u.l-u.r,v=p.height-u.t-u.b,f="v"===c("orientation"),l=c("thicknessmode");c("thickness","fraction"===l?30/(f?h:v):30);var x=c("lenmode");c("len","fraction"===x?1:f?v:h),c("x",f?1.02:.5),c("xanchor",f?"left":"center"),c("xpad"),c("y",f?.5:1.02),c("yanchor",f?"middle":"bottom"),c("ypad"),d.noneOrAll(a,s,["x","y"]),c("outlinecolor"),c("outlinewidth"),c("bordercolor"),c("borderwidth"),c("bgcolor");var m=d.coerce(a,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:f?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");c("ticklabeloverflow",-1!==m.indexOf("inside")?"hide past domain":"hide past div"),_(a,s,c,"linear");var w=p.font,b={outerTicks:!1,font:w};-1!==m.indexOf("inside")&&(b.bgColor="black"),i(a,s,c,"linear",b),e(a,s,c,"linear",b),t(a,s,c,"linear",b),c("title.text",p._dfltTitle.colorbar);var k=s.tickfont,T=d.extendFlat({},k,{color:w.color,size:d.bigFont(k.size)});d.coerceFont(c,"title.font",T),c("title.side",f?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("tinycolor2"),_=y("../../plots/plots"),t=y("../../registry"),e=y("../../plots/cartesian/axes"),i=y("../dragelement"),r=y("../../lib"),o=r.strTranslate,n=y("../../lib/extend").extendFlat,p=y("../../lib/setcursor"),s=y("../drawing"),a=y("../color"),c=y("../titles"),u=y("../../lib/svg_text_utils"),h=y("../colorscale/helpers").flipScale,v=y("../../plots/cartesian/axis_defaults"),f=y("../../plots/cartesian/position_defaults"),l=y("../../plots/cartesian/layout_attributes"),x=y("../../constants/alignment"),m=x.LINE_SPACING,w=x.FROM_TL,b=x.FROM_BR,k=y("./constants").cn;$.exports={draw:function(T){var L=T._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(A){var I,D,S,C,R=A._fullLayout,F=A.calcdata,H=[];function U(J){return n(J,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function X(){"function"==typeof C.calc?C.calc(A,S,I):(I._fillgradient=D.reversescale?h(D.colorscale):D.colorscale,I._zrange=[D[C.min],D[C.max]])}for(var Z=0;Z<F.length;Z++){var W=(S=F[Z][0].trace)._module.colorbar;if(!0===S.visible&&W)for(var te=Array.isArray(W),z=te?W:[W],N=0;N<z.length;N++){var V=(C=z[N]).container;(D=V?S[V]:S)&&D.showscale&&((I=U(D.colorbar))._id="cb"+S.uid+(te&&V?"-"+V:""),I._traceIndex=S.index,I._propPrefix=(V?V+".":"")+"colorbar.",I._meta=S._meta,X(),H.push(I))}}for(var Q in R._colorAxes)if((D=R[Q]).showscale){var j=R._colorAxes[Q];(I=U(D.colorbar))._id="cb"+Q,I._propPrefix=Q+".colorbar.",I._meta=R._meta,C={min:"cmin",max:"cmax"},"heatmap"!==j[0]&&(C.calc=(S=j[1])._module.colorbar.calc),X(),H.push(I)}return H}(T),function(A){return A._id});L.enter().append("g").attr("class",function(A){return A._id}).classed(k.colorbar,!0),L.each(function(A){var I=d.select(this);r.ensureSingle(I,"rect",k.cbbg),r.ensureSingle(I,"g",k.cbfills),r.ensureSingle(I,"g",k.cblines),r.ensureSingle(I,"g",k.cbaxis,function(S){S.classed(k.crisp,!0)}),r.ensureSingle(I,"g",k.cbtitleunshift,function(S){S.append("g").classed(k.cbtitle,!0)}),r.ensureSingle(I,"rect",k.cboutline);var S,C,R,F,H,U,X,Z,D=function(S,C,R){var F="v"===C.orientation,H=C.len,U=C.lenmode,X=C.thickness,Z=C.thicknessmode,Y=C.outlinewidth,W=C.borderwidth,te=C.bgcolor,z=C.xanchor,N=C.yanchor,V=C.xpad,Q=C.ypad,j=C.x,J=F?C.y:1-C.y,K=R._fullLayout,re=K._size,ie=C._fillcolor,ce=C._line,se=C.title,de=se.side,ue=C._zrange||d.extent(("function"==typeof ie?ie:ce.color).domain()),ge="function"==typeof ce.color?ce.color:function(){return ce.color},be="function"==typeof ie?ie:function(){return ie},Te=C._levels,we=function(Be,Qe,Ae){var De,Oe,Ie=Qe._levels,et=[],ct=[],vt=Ie.end+Ie.size/100,ft=Ie.size,It=1.001*Ae[0]-.001*Ae[1],ut=1.001*Ae[1]-.001*Ae[0];for(Oe=0;Oe<1e5&&(De=Ie.start+Oe*ft,!(ft>0?De>=vt:De<=vt));Oe++)De>It&&De<ut&&et.push(De);if(Qe._fillgradient)ct=[0];else if("function"==typeof Qe._fillcolor){var Ot=Qe._filllevels;if(Ot)for(vt=Ot.end+Ot.size/100,ft=Ot.size,Oe=0;Oe<1e5&&(De=Ot.start+Oe*ft,!(ft>0?De>=vt:De<=vt));Oe++)De>Ae[0]&&De<Ae[1]&&ct.push(De);else(ct=et.map(function(Rt){return Rt-Ie.size/2})).push(ct[ct.length-1]+Ie.size)}else Qe._fillcolor&&"string"==typeof Qe._fillcolor&&(ct=[0]);return Ie.size<0&&(et.reverse(),ct.reverse()),{line:et,fill:ct}}(0,C,ue),Le=we.fill,fe=we.line,ve=Math.round(X*("fraction"===Z?F?re.w:re.h:1)),Me=ve/(F?re.w:re.h),ke=Math.round(H*("fraction"===U?F?re.h:re.w:1)),Ce=ke/(F?re.h:re.w),Pe=Math.round(F?j*re.w+V:J*re.h+Q),Fe={center:.5,right:1}[z]||0,qe={top:1,middle:.5}[N]||0,rt=F?j-Fe*Me:J-qe*Me,ze=F?J-qe*Ce:j-Fe*Ce,He=Math.round(F?re.h*(1-ze):re.w*ze);C._lenFrac=Ce,C._thickFrac=Me,C._uFrac=rt,C._vFrac=ze;var Xe=C._axis=function(Be,Qe,Ae){var De=Be._fullLayout,Oe="v"===Qe.orientation,Ie={type:"linear",range:Ae,tickmode:Qe.tickmode,nticks:Qe.nticks,tick0:Qe.tick0,dtick:Qe.dtick,tickvals:Qe.tickvals,ticktext:Qe.ticktext,ticks:Qe.ticks,ticklen:Qe.ticklen,tickwidth:Qe.tickwidth,tickcolor:Qe.tickcolor,showticklabels:Qe.showticklabels,ticklabelposition:Qe.ticklabelposition,ticklabeloverflow:Qe.ticklabeloverflow,tickfont:Qe.tickfont,tickangle:Qe.tickangle,tickformat:Qe.tickformat,exponentformat:Qe.exponentformat,minexponent:Qe.minexponent,separatethousands:Qe.separatethousands,showexponent:Qe.showexponent,showtickprefix:Qe.showtickprefix,tickprefix:Qe.tickprefix,showticksuffix:Qe.showticksuffix,ticksuffix:Qe.ticksuffix,title:Qe.title,showline:!0,anchor:"free",side:Oe?"right":"bottom",position:1},et=Oe?"y":"x",ct={type:"linear",_id:et+Qe._id},vt={letter:et,font:De.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:De.calendar};function ft(It,ut){return r.coerce(Ie,ct,l,It,ut)}return v(Ie,ct,ft,vt,De),f(Ie,ct,ft,vt),ct}(R,C,ue);Xe.position=Me+(F?j+V/re.w:J+Q/re.h);var Je=-1!==["top","bottom"].indexOf(de);if(F&&Je&&(Xe.title.side=de,Xe.titlex=j+V/re.w,Xe.titley=ze+("top"===se.side?Ce-Q/re.h:Q/re.h)),F||Je||(Xe.title.side=de,Xe.titley=J+Q/re.h,Xe.titlex=ze+V/re.w),ce.color&&"auto"===C.tickmode){Xe.tickmode="linear",Xe.tick0=Te.start;var at=Te.size,pt=r.constrain(ke/50,4,15)+1,xt=(ue[1]-ue[0])/((C.nticks||pt)*at);if(xt>1){var Ft=Math.pow(10,Math.floor(Math.log(xt)/Math.LN10));at*=Ft*r.roundUp(xt/Ft,[2,5,10]),(Math.abs(Te.start)/Te.size+1e-6)%1<2e-6&&(Xe.tick0=0)}Xe.dtick=at}Xe.domain=F?[ze+Q/re.h,ze+Ce-Q/re.h]:[ze+V/re.w,ze+Ce-V/re.w],Xe.setScale(),S.attr("transform",o(Math.round(re.l),Math.round(re.t)));var Dt,ot=S.select("."+k.cbtitleunshift).attr("transform",o(-Math.round(re.l),-Math.round(re.t))),it=Xe.ticklabelposition,Et=Xe.title.font.size,Xt=S.select("."+k.cbaxis),nr=0,Ue=0;function We(Be,Qe){var Ae={propContainer:Xe,propName:C._propPrefix+"title",traceIndex:C._traceIndex,_meta:C._meta,placeholder:K._dfltTitle.colorbar,containerGroup:S.select("."+k.cbtitle)},De="h"===Be.charAt(0)?Be.substr(1):"h"+Be;S.selectAll("."+De+",."+De+"-math-group").remove(),c.draw(R,Be,n(Ae,Qe||{}))}return r.syncOrAsync([_.previousPromises,function(){var Be,Qe;(F&&Je||!F&&!Je)&&("top"===de&&(Be=V+re.l+re.w*j,Qe=Q+re.t+re.h*(1-ze-Ce)+3+.75*Et),"bottom"===de&&(Be=V+re.l+re.w*j,Qe=Q+re.t+re.h*(1-ze)-3-.25*Et),"right"===de&&(Qe=Q+re.t+re.h*J+3+.75*Et,Be=V+re.l+re.w*ze),We(Xe._id+"title",{attributes:{x:Be,y:Qe,"text-anchor":F?"start":"middle"}}))},function(){if(!F&&!Je||F&&Je){var Be,Qe=S.select("."+k.cbtitle),Ae=Qe.select("text"),De=[-Y/2,Y/2],Oe=Qe.select(".h"+Xe._id+"title-math-group").node(),Ie=15.6;if(Ae.node()&&(Ie=parseInt(Ae.node().style.fontSize,10)*m),Oe?(Be=s.bBox(Oe),Ue=Be.width,(nr=Be.height)>Ie&&(De[1]-=(nr-Ie)/2)):Ae.node()&&!Ae.classed(k.jsPlaceholder)&&(Be=s.bBox(Ae.node()),Ue=Be.width,nr=Be.height),F){if(nr){if(nr+=5,"top"===de)Xe.domain[1]-=nr/re.h,De[1]*=-1;else{Xe.domain[0]+=nr/re.h;var et=u.lineCount(Ae);De[1]+=(1-et)*Ie}Qe.attr("transform",o(De[0],De[1])),Xe.setScale()}}else Ue&&("right"===de&&(Xe.domain[0]+=(Ue+Et/2)/re.w),Qe.attr("transform",o(De[0],De[1])),Xe.setScale())}S.selectAll("."+k.cbfills+",."+k.cblines).attr("transform",F?o(0,Math.round(re.h*(1-Xe.domain[1]))):o(Math.round(re.w*Xe.domain[0]),0)),Xt.attr("transform",F?o(0,Math.round(-re.t)):o(Math.round(-re.l),0));var ct=S.select("."+k.cbfills).selectAll("rect."+k.cbfill).attr("style","").data(Le);ct.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),ct.exit().remove();var vt=ue.map(Xe.c2p).map(Math.round).sort(function(Rt,$e){return Rt-$e});ct.each(function(Rt,$e){var yt=[0===$e?ue[0]:(Le[$e]+Le[$e-1])/2,$e===Le.length-1?ue[1]:(Le[$e]+Le[$e+1])/2].map(Xe.c2p).map(Math.round);F&&(yt[1]=r.constrain(yt[1]+(yt[1]>yt[0])?1:-1,vt[0],vt[1]));var Bt=d.select(this).attr(F?"x":"y",Pe).attr(F?"y":"x",d.min(yt)).attr(F?"width":"height",Math.max(ve,2)).attr(F?"height":"width",Math.max(d.max(yt)-d.min(yt),2));if(C._fillgradient)s.gradient(Bt,R,C._id,F?"vertical":"horizontalreversed",C._fillgradient,"fill");else{var Ut=be(Rt).replace("e-","");Bt.attr("fill",g(Ut).toHexString())}});var ft=S.select("."+k.cblines).selectAll("path."+k.cbline).data(ce.color&&ce.width?fe:[]);ft.enter().append("path").classed(k.cbline,!0),ft.exit().remove(),ft.each(function(Rt){var $e=Pe,yt=Math.round(Xe.c2p(Rt))+ce.width/2%1;d.select(this).attr("d","M"+(F?$e+","+yt:yt+","+$e)+(F?"h":"v")+ve).call(s.lineGroupStyle,ce.width,ge(Rt),ce.dash)}),Xt.selectAll("g."+Xe._id+"tick,path").remove();var It=Pe+ve+(Y||0)/2-("outside"===C.ticks?1:0),ut=e.calcTicks(Xe),Ot=e.getTickSigns(Xe)[2];return e.drawTicks(R,Xe,{vals:"inside"===Xe.ticks?e.clipEnds(Xe,ut):ut,layer:Xt,path:e.makeTickPath(Xe,It,Ot),transFn:e.makeTransTickFn(Xe)}),e.drawLabels(R,Xe,{vals:ut,layer:Xt,transFn:e.makeTransTickLabelFn(Xe),labelFns:e.makeLabelFns(Xe,It)})},function(){if(F&&!Je||!F&&Je){var Be,Qe,Ae=Xe.position||0,De=Xe._offset+Xe._length/2;if("right"===de)Qe=De,Be=re.l+re.w*Ae+10+Et*(Xe.showticklabels?1:.5);else if(Be=De,"bottom"===de&&(Qe=re.t+re.h*Ae+10+(-1===it.indexOf("inside")?Xe.tickfont.size:0)+("intside"!==Xe.ticks&&C.ticklen||0)),"top"===de){var Oe=se.text.split("<br>").length;Qe=re.t+re.h*Ae+10-ve-m*Et*Oe}We((F?"h":"v")+Xe._id+"title",{avoid:{selection:d.select(R).selectAll("g."+Xe._id+"tick"),side:de,offsetTop:F?0:re.t,offsetLeft:F?re.l:0,maxShift:F?K.width:K.height},attributes:{x:Be,y:Qe,"text-anchor":"middle"},transform:{rotate:F?-90:0,offset:0}})}},_.previousPromises,function(){var Be,Qe=ve+Y/2;-1===it.indexOf("inside")&&(Be=s.bBox(Xt.node()),Qe+=F?Be.width:Be.height),Dt=ot.select("text");var Ae=0,De=F&&"top"===de,Oe=!F&&"right"===de,Ie=0;if(Dt.node()&&!Dt.classed(k.jsPlaceholder)){var et,ct=ot.select(".h"+Xe._id+"title-math-group").node();ct&&(F&&Je||!F&&!Je)?(Ae=(Be=s.bBox(ct)).width,et=Be.height):(Ae=(Be=s.bBox(ot.node())).right-re.l-(F?Pe:He),et=Be.bottom-re.t-(F?He:Pe),F||"top"!==de||(Qe+=Be.height,Ie=Be.height)),Oe&&(Dt.attr("transform",o(Ae/2+Et/2,0)),Ae*=2),Qe=Math.max(Qe,F?Ae:et)}var vt=2*(F?V:Q)+Qe+W+Y/2,ft=0;!F&&se.text&&"bottom"===N&&J<=0&&(vt+=ft=vt/2,Ie+=ft),K._hColorbarMoveTitle=ft,K._hColorbarMoveCBTitle=Ie;var It=W+Y;S.select("."+k.cbbg).attr("x",(F?Pe:He)-It/2-(F?V:0)).attr("y",(F?He:Pe)-(F?ke:Q+Ie-ft)).attr(F?"width":"height",Math.max(vt-ft,2)).attr(F?"height":"width",Math.max(ke+It,2)).call(a.fill,te).call(a.stroke,C.bordercolor).style("stroke-width",W);var ut=Oe?Math.max(Ae-10,0):0;if(S.selectAll("."+k.cboutline).attr("x",(F?Pe:He+V)+ut).attr("y",(F?He+Q-ke:Pe)+(De?nr:0)).attr(F?"width":"height",Math.max(ve,2)).attr(F?"height":"width",Math.max(ke-(F?2*Q+nr:2*V+ut),2)).call(a.stroke,C.outlinecolor).style({fill:"none","stroke-width":Y}),S.attr("transform",o(re.l-(F?Fe*vt:0),re.t-(F?0:(1-qe)*vt-Ie))),!F&&(W||g(te).getAlpha()&&!g.equals(K.paper_bgcolor,te))){var Ot=Xt.selectAll("text"),Rt=Ot[0].length,$e=S.select("."+k.cbbg).node(),yt=s.bBox($e),Bt=s.getTranslate(S);Ot.each(function(Zt,or){var Wt=Rt-1;if(0===or||or===Wt){var er,cr=s.bBox(this),_r=s.getTranslate(this);or===Wt?(er=yt.right+Bt.x+He-W-2+j-(cr.right+_r.x))>0&&(er=0):0===or&&(er=yt.left+Bt.x+He+W+2-(cr.left+_r.x))<0&&(er=0),er&&(Rt<3?this.setAttribute("transform","translate("+er+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ut={},Qt=w[z],Re=b[z],ht=w[N],Mt=b[N],Nt=vt-ve;F?("pixels"===U?(Ut.y=J,Ut.t=ke*ht,Ut.b=ke*Mt):(Ut.t=Ut.b=0,Ut.yt=J+H*ht,Ut.yb=J-H*Mt),"pixels"===Z?(Ut.x=j,Ut.l=vt*Qt,Ut.r=vt*Re):(Ut.l=Nt*Qt,Ut.r=Nt*Re,Ut.xl=j-X*Qt,Ut.xr=j+X*Re)):("pixels"===U?(Ut.x=j,Ut.l=ke*Qt,Ut.r=ke*Re):(Ut.l=Ut.r=0,Ut.xl=j+H*Qt,Ut.xr=j-H*Re),"pixels"===Z?(Ut.y=1-J,Ut.t=vt*ht,Ut.b=vt*Mt):(Ut.t=Nt*ht,Ut.b=Nt*Mt,Ut.yt=J-X*ht,Ut.yb=J+X*Mt)),_.autoMargin(R,C._id,Ut)}],R)}(I,A,T);D&&D.then&&(T._promises||[]).push(D),T._context.edits.colorbarPosition&&(X="v"===(C=A).orientation,Z=(R=T)._fullLayout._size,i.init({element:(S=I).node(),gd:R,prepFn:function(){F=S.attr("transform"),p(S)},moveFn:function(Y,W){S.attr("transform",F+o(Y,W)),H=i.align((X?C._uFrac:C._vFrac)+Y/Z.w,X?C._thickFrac:C._lenFrac,0,1,C.xanchor),U=i.align((X?C._vFrac:1-C._uFrac)-W/Z.h,X?C._lenFrac:C._thickFrac,0,1,C.yanchor);var te=i.getCursor(H,U,C.xanchor,C.yanchor);p(S,te)},doneFn:function(){if(p(S),void 0!==H&&void 0!==U){var Y={};Y[C._propPrefix+"x"]=H,Y[C._propPrefix+"y"]=U,void 0!==C._traceIndex?t.call("_guiRestyle",R,Y,C._traceIndex):t.call("_guiRelayout",R,Y)}}}))}),L.exit().each(function(A){_.autoMargin(T,A._id)}).remove(),L.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g){return d.isPlainObject(g.colorbar)}},{"../../lib":503}],372:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"colorbar",attributes:y("./attributes"),supplyDefaults:y("./defaults"),draw:y("./draw").draw,hasColorbar:y("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(y,$,ee){"use strict";var d=y("../colorbar/attributes"),g=y("../../lib/regex").counter,_=y("../../lib/sort_object_keys"),t=y("./scales.js").scales;function e(i){return"`"+i+"`"}_(t),$.exports=function(i,r){i=i||"";var o,n=(r=r||{}).cLetter||"c",p=("onlyIfNumerical"in r||Boolean(i),"noScale"in r?r.noScale:"marker.line"===i),s="showScaleDflt"in r?r.showScaleDflt:"z"===n,a="string"==typeof r.colorscaleDflt?t[r.colorscaleDflt]:null,c=r.editTypeOverride||"",u=i?i+".":"";"colorAttr"in r?o=r.colorAttr:e(u+(o={z:"z",c:"color"}[n]));var h=n+"auto",v=n+"min",f=n+"max",l=n+"mid",x=(e(u+h),e(u+v),e(u+f),{});x[v]=x[f]=void 0;var m={};m[h]=!1;var w={};return"color"===o&&(w.color={valType:"color",arrayOk:!0,editType:c||"style"},r.anim&&(w.color.anim=!0)),w[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x},w[v]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:m},w[f]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:m},w[l]={valType:"number",dflt:null,editType:"calc",impliedEdits:x},w.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},w.autocolorscale={valType:"boolean",dflt:!1!==r.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},w.reversescale={valType:"boolean",dflt:!1,editType:"plot"},p||(w.showscale={valType:"boolean",dflt:s,editType:"calc"},w.colorbar=d),r.noColorAxis||(w.coloraxis={valType:"subplotid",regex:g("coloraxis"),dflt:null,editType:"calc"}),w}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("./helpers").extractOpts;$.exports=function(t,e,i){var o=t._fullLayout,n=i.vals,p=i.containerStr,s=p?g.nestedProperty(e,p).get():e,a=_(s),c=!1!==a.auto,u=a.min,h=a.max,v=a.mid,f=function(){return g.aggNums(Math.min,null,n)},l=function(){return g.aggNums(Math.max,null,n)};void 0===u?u=f():c&&(u=s._colorAx&&d(u)?Math.min(u,f()):f()),void 0===h?h=l():c&&(h=s._colorAx&&d(h)?Math.max(h,l()):l()),c&&void 0!==v&&(h-v>v-u?u=v-(h-v):h-v<v-u&&(h=v+(v-u))),u===h&&(u-=.5,h+=.5),a._sync("min",u),a._sync("max",h),a.autocolorscale&&a._sync("colorscale",u*h<0?o.colorscale.diverging:u>=0?o.colorscale.sequential:o.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./helpers").hasColorscale,_=y("./helpers").extractOpts;$.exports=function(t,e){function i(c,u){var h=c["_"+u];void 0!==h&&(c[u]=h)}function r(c,u){var h=u.container?d.nestedProperty(c,u.container).get():c;if(h)if(h.coloraxis)h._colorAx=e[h.coloraxis];else{var v=_(h),f=v.auto;(f||void 0===v.min)&&i(h,u.min),(f||void 0===v.max)&&i(h,u.max),v.autocolorscale&&i(h,"colorscale")}}for(var o=0;o<t.length;o++){var n=t[o],p=n._module.colorbar;if(p)if(Array.isArray(p))for(var s=0;s<p.length;s++)r(n,p[s]);else r(n,p);g(n,"marker.line")&&r(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in e._colorAxes)r(e[a],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../colorbar/has_colorbar"),t=y("../colorbar/defaults"),e=y("./scales").isValid,i=y("../../registry").traceIs;function r(o,n){var p=n.slice(0,n.length-1);return n?g.nestedProperty(o,p).get()||{}:o}$.exports=function o(n,p,s,a,c){var u=c.prefix,h=c.cLetter,v="_module"in p,f=r(n,u),l=r(p,u),x=r(p._template||{},u)||{},m=function(){return delete n.coloraxis,delete p.coloraxis,o(n,p,s,a,c)};if(v){var w=s._colorAxes||{},b=a(u+"coloraxis");if(b){var k=i(p,"contour")&&g.nestedProperty(p,"contours.coloring").get()||"heatmap",T=w[b];return void(T?(T[2].push(m),T[0]!==k&&(T[0]=!1,g.warn(["Ignoring coloraxis:",b,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[b]=[k,p,[m]])}}var L=f[h+"min"],A=f[h+"max"],I=d(L)&&d(A)&&L<A;a(u+h+"auto",!I)?a(u+h+"mid"):(a(u+h+"min"),a(u+h+"max"));var D,S,C=f.colorscale,R=x.colorscale;void 0!==C&&(D=!e(C)),void 0!==R&&(D=!e(R)),a(u+"autocolorscale",D),a(u+"colorscale"),a(u+"reversescale"),"marker.line."!==u&&(u&&v&&(S=_(f)),a(u+"showscale",S)&&(u&&x&&(l._template=x),t(f,l,s)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("tinycolor2"),_=y("fast-isnumeric"),t=y("../../lib"),e=y("../color"),i=y("./scales").isValid,r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],o=["min","max","mid","auto"];function n(u){var h,v,f,l=u._colorAx,x=l||u,m={};for(v=0;v<r.length;v++)m[f=r[v]]=x[f];if(l)for(h="c",v=0;v<o.length;v++)m[f=o[v]]=x["c"+f];else{var w;for(v=0;v<o.length;v++)((w="c"+(f=o[v]))in x||(w="z"+f)in x)&&(m[f]=x[w]);h=w.charAt(0)}return m._sync=function(b,k){var T=-1!==o.indexOf(b)?h+b:b;x[T]=x["_"+T]=k},m}function p(u){for(var h=n(u),v=h.min,f=h.max,l=h.reversescale?s(h.colorscale):h.colorscale,x=l.length,m=new Array(x),w=new Array(x),b=0;b<x;b++){var k=l[b];m[b]=v+k[0]*(f-v),w[b]=k[1]}return{domain:m,range:w}}function s(u){for(var h=u.length,v=new Array(h),f=h-1,l=0;f>=0;f--,l++){var x=u[f];v[l]=[1-x[0],x[1]]}return v}function a(u,h){h=h||{};for(var v=u.domain,f=u.range,l=f.length,x=new Array(l),m=0;m<l;m++){var w=g(f[m]).toRgb();x[m]=[w.r,w.g,w.b,w.a]}var b,k=d.scale.linear().domain(v).range(x).clamp(!0),T=h.noNumericCheck,L=h.returnArray;return(b=T&&L?k:T?function(A){return c(k(A))}:L?function(A){return _(A)?k(A):g(A).isValid()?A:e.defaultLine}:function(A){return _(A)?c(k(A)):g(A).isValid()?A:e.defaultLine}).domain=k.domain,b.range=function(){return f},b}function c(u){return g({r:u[0],g:u[1],b:u[2],a:u[3]}).toRgbString()}$.exports={hasColorscale:function(u,h,v){var f=h?t.nestedProperty(u,h).get()||{}:u,l=f[v||"color"],x=!1;if(t.isArrayOrTypedArray(l))for(var m=0;m<l.length;m++)if(_(l[m])){x=!0;break}return t.isPlainObject(f)&&(x||!0===f.showscale||_(f.cmin)&&_(f.cmax)||i(f.colorscale)||t.isPlainObject(f.colorbar))},extractOpts:n,extractScale:p,flipScale:s,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(u,h){return a(p(u),h)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(y,$,ee){"use strict";var d=y("./scales"),g=y("./helpers");$.exports={moduleType:"component",name:"colorscale",attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),handleDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),calc:y("./calc"),scales:d.scales,defaultScale:d.defaultScale,getScale:d.get,isValidScale:d.isValid,hasColorscale:g.hasColorscale,extractOpts:g.extractOpts,extractScale:g.extractScale,flipScale:g.flipScale,makeColorScaleFunc:g.makeColorScaleFunc,makeColorScaleFuncFromTrace:g.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(y,$,ee){"use strict";var d=y("../../lib/extend").extendFlat,g=y("./attributes"),_=y("./scales").scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:_.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:_.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:_.RdBu,editType:"calc"}},coloraxis:d({_isSubplotObj:!0,editType:"calc"},g("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plot_api/plot_template"),_=y("./layout_attributes"),t=y("./defaults");$.exports=function(e,i){function r(h,v){return d.coerce(e,i,_,h,v)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var o,n,p=i._colorAxes;function s(h,v){return d.coerce(o,n,_.coloraxis,h,v)}for(var a in p){var c=p[a];if(c[0])o=e[a]||{},(n=g.newContainer(i,a,"coloraxis"))._name=a,t(o,n,i,s,{prefix:"",cLetter:"c"});else{for(var u=0;u<c[2].length;u++)c[2][u]();delete i._colorAxes[a]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(y,$,ee){"use strict";var d=y("tinycolor2"),g={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},_=g.RdBu;function t(e){var i=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var r=0;r<e.length;r++){var o=e[r];if(2!==o.length||+o[0]<i||!d(o[1]).isValid())return!1;i=+o[0]}return!0}$.exports={scales:g,defaultScale:_,get:function(e,i){if(i||(i=_),!e)return i;function r(){try{e=g[e]||JSON.parse(e)}catch(o){e=i}}return"string"==typeof e&&(r(),"string"==typeof e&&r()),t(e)?e:i},isValid:function(e){return void 0!==g[e]||t(e)}}},{tinycolor2:312}],382:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e){var i=(d-_)/(t-_),r=i+g/(t-_),o=(i+r)/2;return"left"===e||"bottom"===e?i:"center"===e||"middle"===e?o:"right"===e||"top"===e?r:i<2/3-o?i:r>4/3-o?r:o}},{}],383:[function(y,$,ee){"use strict";var d=y("../../lib"),g=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(_,t,e,i){return _="left"===e?0:"center"===e?1:"right"===e?2:d.constrain(Math.floor(3*_),0,2),t="bottom"===i?0:"middle"===i?1:"top"===i?2:d.constrain(Math.floor(3*t),0,2),g[t][_]}},{"../../lib":503}],384:[function(y,$,ee){"use strict";ee.selectMode=function(d){return"lasso"===d||"select"===d},ee.drawMode=function(d){return"drawclosedpath"===d||"drawopenpath"===d||"drawline"===d||"drawrect"===d||"drawcircle"===d},ee.openMode=function(d){return"drawline"===d||"drawopenpath"===d},ee.rectMode=function(d){return"select"===d||"drawline"===d||"drawrect"===d||"drawcircle"===d},ee.freeMode=function(d){return"lasso"===d||"drawclosedpath"===d||"drawopenpath"===d},ee.selectingOrDrawing=function(d){return ee.freeMode(d)||ee.rectMode(d)}},{}],385:[function(y,$,ee){"use strict";var d=y("mouse-event-offset"),g=y("has-hover"),_=y("has-passive-events"),t=y("../../lib").removeElement,e=y("../../plots/cartesian/constants"),i=$.exports={};i.align=y("./align"),i.getCursor=y("./cursor");var r=y("./unhover");function o(){var p=document.createElement("div");p.className="dragcover";var s=p.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(p),p}function n(p){return d(p.changedTouches?p.changedTouches[0]:p,document.body)}i.unhover=r.wrapped,i.unhoverRaw=r.raw,i.init=function(p){var s,a,c,u,h,v,f,l,x=p.gd,m=1,w=x._context.doubleClickDelay,b=p.element;x._mouseDownTime||(x._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=T,_?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=T,b.addEventListener("touchstart",T,{passive:!1})):b.ontouchstart=T;var k=p.clampFn||function(I,D,S){return Math.abs(I)<S&&(I=0),Math.abs(D)<S&&(D=0),[I,D]};function T(I){x._dragged=!1,x._dragging=!0;var D=n(I);s=D[0],a=D[1],f=I.target,v=I,l=2===I.buttons||I.ctrlKey,void 0===I.clientX&&void 0===I.clientY&&(I.clientX=s,I.clientY=a),(c=(new Date).getTime())-x._mouseDownTime<w?m+=1:(m=1,x._mouseDownTime=c),p.prepFn&&p.prepFn(I,s,a),g&&!l?(h=o()).style.cursor=window.getComputedStyle(b).cursor:g||(h=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),!1!==p.dragmode&&(I.preventDefault(),document.addEventListener("mousemove",L),document.addEventListener("touchmove",L,{passive:!1}))}function L(I){I.preventDefault();var D=n(I),C=k(D[0]-s,D[1]-a,p.minDrag||e.MINDRAG),R=C[0],F=C[1];(R||F)&&(x._dragged=!0,i.unhover(x,I)),x._dragged&&p.moveFn&&!l&&(x._dragdata={element:b,dx:R,dy:F},p.moveFn(R,F))}function A(I){if(delete x._dragdata,!1!==p.dragmode&&(I.preventDefault(),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),g?t(h):u&&(h.documentElement.style.cursor=u,u=null),x._dragging){if(x._dragging=!1,(new Date).getTime()-x._mouseDownTime>w&&(m=Math.max(m-1,1)),x._dragged)p.doneFn&&p.doneFn();else if(p.clickFn&&p.clickFn(m,v),!l){var D;try{D=new MouseEvent("click",I)}catch(C){var S=n(I);(D=document.createEvent("MouseEvents")).initMouseEvent("click",I.bubbles,I.cancelable,I.view,I.detail,I.screenX,I.screenY,S[0],S[1],I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.button,I.relatedTarget)}f.dispatchEvent(D)}x._dragging=!1,x._dragged=!1}else x._dragged=!1}},i.coverSlip=o},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(y,$,ee){"use strict";var d=y("../../lib/events"),g=y("../../lib/throttle"),_=y("../../lib/dom").getGraphDiv,t=y("../fx/constants"),e=$.exports={};e.wrapped=function(i,r,o){(i=_(i))._fullLayout&&g.clear(i._fullLayout._uid+t.HOVERID),e.raw(i,r,o)},e.raw=function(i,r){var o=i._fullLayout,n=i._hoverdata;r||(r={}),r.target&&!i._dragged&&!1===d.triggerHandler(i,"plotly_beforehover",r)||(o._hoverlayer.selectAll("g").remove(),o._hoverlayer.selectAll("line").remove(),o._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,r.target&&n&&i.emit("plotly_unhover",{event:r,points:n}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(y,$,ee){"use strict";ee.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ee.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=g.numberFormat,t=y("fast-isnumeric"),e=y("tinycolor2"),i=y("../../registry"),r=y("../color"),o=y("../colorscale"),n=g.strTranslate,p=y("../../lib/svg_text_utils"),s=y("../../constants/xmlns_namespaces"),a=y("../../constants/alignment").LINE_SPACING,c=y("../../constants/interactions").DESELECTDIM,u=y("../../traces/scatter/subtypes"),h=y("../../traces/scatter/make_bubble_size_func"),v=y("../../components/fx/helpers").appendArrayPointValue,f=$.exports={};f.font=function(Z,Y,W,te){g.isPlainObject(Y)&&(te=Y.color,W=Y.size,Y=Y.family),Y&&Z.style("font-family",Y),W+1&&Z.style("font-size",W+"px"),te&&Z.call(r.fill,te)},f.setPosition=function(Z,Y,W){Z.attr("x",Y).attr("y",W)},f.setSize=function(Z,Y,W){Z.attr("width",Y).attr("height",W)},f.setRect=function(Z,Y,W,te,z){Z.call(f.setPosition,Y,W).call(f.setSize,te,z)},f.translatePoint=function(Z,Y,W,te){var z=W.c2p(Z.x),N=te.c2p(Z.y);return!!(t(z)&&t(N)&&Y.node())&&("text"===Y.node().nodeName?Y.attr("x",z).attr("y",N):Y.attr("transform",n(z,N)),!0)},f.translatePoints=function(Z,Y,W){Z.each(function(te){var z=d.select(this);f.translatePoint(te,z,Y,W)})},f.hideOutsideRangePoint=function(Z,Y,W,te,z,N){Y.attr("display",W.isPtWithinRange(Z,z)&&te.isPtWithinRange(Z,N)?null:"none")},f.hideOutsideRangePoints=function(Z,Y){if(Y._hasClipOnAxisFalse){var W=Y.xaxis,te=Y.yaxis;Z.each(function(z){var N=z[0].trace,V=N.xcalendar,Q=N.ycalendar,j=i.traceIs(N,"bar-like")?".bartext":".point,.textpoint";Z.selectAll(j).each(function(J){f.hideOutsideRangePoint(J,d.select(this),W,te,V,Q)})})}},f.crispRound=function(Z,Y,W){return Y&&t(Y)?Z._context.staticPlot?Y:Y<1?1:Math.round(Y):W||0},f.singleLineStyle=function(Z,Y,W,te,z){Y.style("fill","none");var N=(((Z||[])[0]||{}).trace||{}).line||{},V=W||N.width||0,Q=z||N.dash||"";r.stroke(Y,te||N.color),f.dashLine(Y,Q,V)},f.lineGroupStyle=function(Z,Y,W,te){Z.style("fill","none").each(function(z){var N=(((z||[])[0]||{}).trace||{}).line||{},V=Y||N.width||0,Q=te||N.dash||"";d.select(this).call(r.stroke,W||N.color).call(f.dashLine,Q,V)})},f.dashLine=function(Z,Y,W){Y=f.dashStyle(Y,W=+W||0),Z.style({"stroke-dasharray":Y,"stroke-width":W+"px"})},f.dashStyle=function(Z,Y){Y=+Y||1;var W=Math.max(Y,3);return"solid"===Z?Z="":"dot"===Z?Z=W+"px,"+W+"px":"dash"===Z?Z=3*W+"px,"+3*W+"px":"longdash"===Z?Z=5*W+"px,"+5*W+"px":"dashdot"===Z?Z=3*W+"px,"+W+"px,"+W+"px,"+W+"px":"longdashdot"===Z&&(Z=5*W+"px,"+2*W+"px,"+W+"px,"+2*W+"px"),Z},f.singleFillStyle=function(Z){var Y=(((d.select(Z.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;Y&&Z.call(r.fill,Y)},f.fillGroupStyle=function(Z){Z.style("stroke-width",0).each(function(Y){var W=d.select(this);Y[0].trace&&W.call(r.fill,Y[0].trace.fillcolor)})};var l=y("./symbol_defs");f.symbolNames=[],f.symbolFuncs=[],f.symbolNeedLines={},f.symbolNoDot={},f.symbolNoFill={},f.symbolList=[],Object.keys(l).forEach(function(Z){var Y=l[Z],W=Y.n;f.symbolList.push(W,String(W),Z,W+100,String(W+100),Z+"-open"),f.symbolNames[W]=Z,f.symbolFuncs[W]=Y.f,Y.needLine&&(f.symbolNeedLines[W]=!0),Y.noDot?f.symbolNoDot[W]=!0:f.symbolList.push(W+200,String(W+200),Z+"-dot",W+300,String(W+300),Z+"-open-dot"),Y.noFill&&(f.symbolNoFill[W]=!0)});var x=f.symbolNames.length;function m(Z,Y){return f.symbolFuncs[Z%100](Y)+(Z>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}f.symbolNumber=function(Z){if(t(Z))Z=+Z;else if("string"==typeof Z){var Y=0;Z.indexOf("-open")>0&&(Y=100,Z=Z.replace("-open","")),Z.indexOf("-dot")>0&&(Y+=200,Z=Z.replace("-dot","")),(Z=f.symbolNames.indexOf(Z))>=0&&(Z+=Y)}return Z%100>=x||Z>=400?0:Math.floor(Math.max(Z,0))};var w={x1:1,x2:0,y1:0,y2:0},b={x1:0,x2:0,y1:1,y2:0},k=_("~f"),T={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:b},verticalreversed:{node:"linearGradient",attrs:b,reversed:!0}};f.gradient=function(Z,Y,W,te,z,N){for(var V=z.length,Q=T[te],j=new Array(V),J=0;J<V;J++)Q.reversed?j[V-1-J]=[k(100*(1-z[J][0])),z[J][1]]:j[J]=[k(100*z[J][0]),z[J][1]];var K=Y._fullLayout,re="g"+K._uid+"-"+W,ie=K._defs.select(".gradients").selectAll("#"+re).data([te+j.join(";")],g.identity);ie.exit().remove(),ie.enter().append(Q.node).each(function(){var de=d.select(this);Q.attrs&&de.attr(Q.attrs),de.attr("id",re);var ue=de.selectAll("stop").data(j);ue.exit().remove(),ue.enter().append("stop"),ue.each(function(ge){var be=e(ge[1]);d.select(this).attr({offset:ge[0]+"%","stop-color":r.tinyRGB(be),"stop-opacity":be.getAlpha()})})}),Z.style(N,H(re,Y)).style(N+"-opacity",null);var ce=function(de){return"."+de.attr("class").replace(/\s/g,".")},se=ce(d.select(Z.node().parentNode))+">"+ce(Z);K._gradientUrlQueryParts[se]=1},f.pattern=function(Z,Y,W,te,z,N,V,Q,j,J,K,re){var ie="legend"===Y;Q&&("overlay"===j?K=r.contrast(J=Q):(J=void 0,K=Q));var ce,se,de,ue,ge,be,Te,we,fe,Me=W._fullLayout,ke="p"+Me._uid+"-"+te,Ce={};switch(z){case"/":ce=N*Math.sqrt(2),se=N*Math.sqrt(2),be="path",Ce={d:de="M-"+ce/4+","+se/4+"l"+ce/2+",-"+se/2+"M0,"+se+"L"+ce+",0M"+ce/4*3+","+se/4*5+"l"+ce/2+",-"+se/2,opacity:re,stroke:K,"stroke-width":(ue=V*N)+"px"};break;case"\\":ce=N*Math.sqrt(2),se=N*Math.sqrt(2),be="path",Ce={d:de="M"+ce/4*3+",-"+se/4+"l"+ce/2+","+se/2+"M0,0L"+ce+","+se+"M-"+ce/4+","+se/4*3+"l"+ce/2+","+se/2,opacity:re,stroke:K,"stroke-width":(ue=V*N)+"px"};break;case"x":ce=N*Math.sqrt(2),se=N*Math.sqrt(2),de="M-"+ce/4+","+se/4+"l"+ce/2+",-"+se/2+"M0,"+se+"L"+ce+",0M"+ce/4*3+","+se/4*5+"l"+ce/2+",-"+se/2+"M"+ce/4*3+",-"+se/4+"l"+ce/2+","+se/2+"M0,0L"+ce+","+se+"M-"+ce/4+","+se/4*3+"l"+ce/2+","+se/2,ue=N-N*Math.sqrt(1-V),be="path",Ce={d:de,opacity:re,stroke:K,"stroke-width":ue+"px"};break;case"|":be="path",be="path",Ce={d:de="M"+(ce=N)/2+",0L"+ce/2+","+(se=N),opacity:re,stroke:K,"stroke-width":(ue=V*N)+"px"};break;case"-":be="path",be="path",Ce={d:de="M0,"+(se=N)/2+"L"+(ce=N)+","+se/2,opacity:re,stroke:K,"stroke-width":(ue=V*N)+"px"};break;case"+":be="path",de="M"+(ce=N)/2+",0L"+ce/2+","+(se=N)+"M0,"+se/2+"L"+ce+","+se/2,ue=N-N*Math.sqrt(1-V),be="path",Ce={d:de,opacity:re,stroke:K,"stroke-width":ue+"px"};break;case".":ce=N,se=N,V<Math.PI/4?ge=Math.sqrt(V*N*N/Math.PI):(Te=V,we=Math.PI/4,1,ge=(fe=N/2)+(N/Math.sqrt(2)-fe)*(Te-we)/(1-we)),be="circle",Ce={cx:ce/2,cy:se/2,r:ge,opacity:re,fill:K}}var Pe=[z||"noSh",J||"noBg",K||"noFg",N,V].join(";"),Fe=Me._defs.select(".patterns").selectAll("#"+ke).data([Pe],g.identity);Fe.exit().remove(),Fe.enter().append("pattern").each(function(){var rt=d.select(this);if(rt.attr({id:ke,width:ce+"px",height:se+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),J){var ze=rt.selectAll("rect").data([0]);ze.exit().remove(),ze.enter().append("rect").attr({width:ce+"px",height:se+"px",fill:J})}var He=rt.selectAll(be).data([0]);He.exit().remove(),He.enter().append(be).attr(Ce)}),Z.style("fill",H(ke,W)).style("fill-opacity",null),Z.classed("pattern_filled",!0);var qe="."+d.select(Z.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";Me._patternUrlQueryParts[qe]=1},f.initGradients=function(Z){var Y=Z._fullLayout;g.ensureSingle(Y._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),Y._gradientUrlQueryParts={}},f.initPatterns=function(Z){var Y=Z._fullLayout;g.ensureSingle(Y._defs,"g","patterns").selectAll("pattern").remove(),Y._patternUrlQueryParts={}},f.getPatternAttr=function(Z,Y,W){return Z&&g.isArrayOrTypedArray(Z)?Y<Z.length?Z[Y]:W:Z},f.pointStyle=function(Z,Y,W){if(Z.size()){var te=f.makePointStyleFns(Y);Z.each(function(z){f.singlePointStyle(z,d.select(this),Y,te,W)})}},f.singlePointStyle=function(Z,Y,W,te,z){var N=W.marker,V=N.line;if(Y.style("opacity",te.selectedOpacityFn?te.selectedOpacityFn(Z):void 0===Z.mo?N.opacity:Z.mo),te.ms2mrc){var Q;Q="various"===Z.ms||"various"===N.size?3:te.ms2mrc(Z.ms),Z.mrc=Q,te.selectedSizeFn&&(Q=Z.mrc=te.selectedSizeFn(Z));var j=f.symbolNumber(Z.mx||N.symbol)||0;Z.om=j%200>=100,Y.attr("d",m(j,Q))}var J,K,re,ie=!1;if(Z.so?(re=V.outlierwidth,K=V.outliercolor,J=N.outliercolor):(re=(Z.mlw+1||(V||{}).width+1||(Z.trace?(Z.trace.marker.line||{}).width:0)+1)-1||0,K="mlc"in Z?Z.mlcc=te.lineScale(Z.mlc):g.isArrayOrTypedArray(V.color)?r.defaultLine:V.color,g.isArrayOrTypedArray(N.color)&&(J=r.defaultLine,ie=!0),J="mc"in Z?Z.mcc=te.markerScale(Z.mc):N.color||"rgba(0,0,0,0)",te.selectedColorFn&&(J=te.selectedColorFn(Z))),Z.om)Y.call(r.stroke,J).style({"stroke-width":(re||1)+"px",fill:"none"});else{Y.style("stroke-width",(Z.isBlank?0:re)+"px");var se=N.gradient,de=Z.mgt;de?ie=!0:de=se&&se.type,g.isArrayOrTypedArray(de)&&(T[de=de[0]]||(de=0));var ue=N.pattern,ge=ue&&f.getPatternAttr(ue.shape,Z.i,"");if(de&&"none"!==de){var be=Z.mgc;be?ie=!0:be=se.color;var Te=W.uid;ie&&(Te+="-"+Z.i),f.gradient(Y,z,Te,de,[[0,be],[1,J]],"fill")}else if(ge){var we=f.getPatternAttr(ue.bgcolor,Z.i,null),Le=f.getPatternAttr(ue.fgcolor,Z.i,null),fe=ue.fgopacity,ve=f.getPatternAttr(ue.size,Z.i,8),Me=f.getPatternAttr(ue.solidity,Z.i,.3),ke=Z.mcc||g.isArrayOrTypedArray(ue.shape)||g.isArrayOrTypedArray(ue.bgcolor)||g.isArrayOrTypedArray(ue.size)||g.isArrayOrTypedArray(ue.solidity),Ce=W.uid;ke&&(Ce+="-"+Z.i),f.pattern(Y,"point",z,Ce,ge,ve,Me,Z.mcc,ue.fillmode,we,Le,fe)}else r.fill(Y,J);re&&r.stroke(Y,K)}},f.makePointStyleFns=function(Z){var Y={},W=Z.marker;return Y.markerScale=f.tryColorscale(W,""),Y.lineScale=f.tryColorscale(W,"line"),i.traceIs(Z,"symbols")&&(Y.ms2mrc=u.isBubble(Z)?h(Z):function(){return(W.size||6)/2}),Z.selectedpoints&&g.extendFlat(Y,f.makeSelectedPointStyleFns(Z)),Y},f.makeSelectedPointStyleFns=function(Z){var Y={},z=Z.marker||{},N=(Z.selected||{}).marker||{},V=(Z.unselected||{}).marker||{},j=N.opacity,J=V.opacity,K=void 0!==j,re=void 0!==J;(g.isArrayOrTypedArray(z.opacity)||K||re)&&(Y.selectedOpacityFn=function(we){var Le=void 0===we.mo?z.opacity:we.mo;return we.selected?K?j:Le:re?J:c*Le});var ie=z.color,ce=N.color,se=V.color;(ce||se)&&(Y.selectedColorFn=function(we){var Le=we.mcc||ie;return we.selected?ce||Le:se||Le});var de=z.size,ue=N.size,ge=V.size,be=void 0!==ue,Te=void 0!==ge;return i.traceIs(Z,"symbols")&&(be||Te)&&(Y.selectedSizeFn=function(we){var Le=we.mrc||de/2;return we.selected?be?ue/2:Le:Te?ge/2:Le}),Y},f.makeSelectedTextStyleFns=function(Z){var Y={},Q=(Z.textfont||{}).color,j=((Z.selected||{}).textfont||{}).color,J=((Z.unselected||{}).textfont||{}).color;return Y.selectedTextColorFn=function(K){var re=K.tc||Q;return K.selected?j||re:J||(j?re:r.addOpacity(re,c))},Y},f.selectedPointStyle=function(Z,Y){if(Z.size()&&Y.selectedpoints){var W=f.makeSelectedPointStyleFns(Y),te=Y.marker||{},z=[];W.selectedOpacityFn&&z.push(function(N,V){N.style("opacity",W.selectedOpacityFn(V))}),W.selectedColorFn&&z.push(function(N,V){r.fill(N,W.selectedColorFn(V))}),W.selectedSizeFn&&z.push(function(N,V){var Q=V.mx||te.symbol||0,j=W.selectedSizeFn(V);N.attr("d",m(f.symbolNumber(Q),j)),V.mrc2=j}),z.length&&Z.each(function(N){for(var V=d.select(this),Q=0;Q<z.length;Q++)z[Q](V,N)})}},f.tryColorscale=function(Z,Y){var W=Y?g.nestedProperty(Z,Y).get():Z;return W&&(W.colorscale||W._colorAx)&&g.isArrayOrTypedArray(W.color)?o.makeColorScaleFuncFromTrace(W):g.identity};var L={start:1,end:-1,middle:0,bottom:1,top:-1};function A(Z,Y,W,te,z){var N=d.select(Z.node().parentNode),V=-1!==Y.indexOf("top")?"top":-1!==Y.indexOf("bottom")?"bottom":"middle",Q=-1!==Y.indexOf("left")?"end":-1!==Y.indexOf("right")?"start":"middle",j=te?te/.8+1:0,J=(p.lineCount(Z)-1)*a+1,K=L[Q]*j,re=.75*W+L[V]*j+(L[V]-1)*J*W/2;Z.attr("text-anchor",Q),z||N.attr("transform",n(K,re))}function I(Z,Y){var W=Z.ts||Y.textfont.size;return t(W)&&W>0?W:0}function D(Z,Y,W,te){var z=Z[0]-Y[0],N=Z[1]-Y[1],V=W[0]-Y[0],Q=W[1]-Y[1],j=Math.pow(z*z+N*N,.25),J=Math.pow(V*V+Q*Q,.25),K=(J*J*z-j*j*V)*te,re=(J*J*N-j*j*Q)*te,ie=3*J*(j+J),ce=3*j*(j+J);return[[d.round(Y[0]+(ie&&K/ie),2),d.round(Y[1]+(ie&&re/ie),2)],[d.round(Y[0]-(ce&&K/ce),2),d.round(Y[1]-(ce&&re/ce),2)]]}f.textPointStyle=function(Z,Y,W){if(Z.size()){var te;if(Y.selectedpoints){var z=f.makeSelectedTextStyleFns(Y);te=z.selectedTextColorFn}var N=Y.texttemplate,V=W._fullLayout;Z.each(function(Q){var j=d.select(this),J=N?g.extractOption(Q,Y,"txt","texttemplate"):g.extractOption(Q,Y,"tx","text");if(J||0===J){if(N){var K=Y._module.formatLabels,re=K?K(Q,Y,V):{},ie={};v(ie,Y,Q.i),J=g.texttemplateString(J,re,V._d3locale,ie,Q,Y._meta||{})}var se=Q.tp||Y.textposition,de=I(Q,Y),ue=te?te(Q):Q.tc||Y.textfont.color;j.call(f.font,Q.tf||Y.textfont.family,de,ue).text(J).call(p.convertToTspans,W).call(A,se,de,Q.mrc)}else j.remove()})}},f.selectedTextStyle=function(Z,Y){if(Z.size()&&Y.selectedpoints){var W=f.makeSelectedTextStyleFns(Y);Z.each(function(te){var z=d.select(this),N=W.selectedTextColorFn(te),V=te.tp||Y.textposition,Q=I(te,Y);r.fill(z,N);var j=i.traceIs(Y,"bar-like");A(z,V,Q,te.mrc2||te.mrc,j)})}},f.smoothopen=function(Z,Y){if(Z.length<3)return"M"+Z.join("L");var W,te="M"+Z[0],z=[];for(W=1;W<Z.length-1;W++)z.push(D(Z[W-1],Z[W],Z[W+1],Y));for(te+="Q"+z[0][0]+" "+Z[1],W=2;W<Z.length-1;W++)te+="C"+z[W-2][1]+" "+z[W-1][0]+" "+Z[W];return te+"Q"+z[Z.length-3][1]+" "+Z[Z.length-1]},f.smoothclosed=function(Z,Y){if(Z.length<3)return"M"+Z.join("L")+"Z";var W,te="M"+Z[0],z=Z.length-1,N=[D(Z[z],Z[0],Z[1],Y)];for(W=1;W<z;W++)N.push(D(Z[W-1],Z[W],Z[W+1],Y));for(N.push(D(Z[z-1],Z[z],Z[0],Y)),W=1;W<=z;W++)te+="C"+N[W-1][1]+" "+N[W][0]+" "+Z[W];return te+"C"+N[z][1]+" "+N[0][0]+" "+Z[0]+"Z"};var S={hv:function(Z,Y){return"H"+d.round(Y[0],2)+"V"+d.round(Y[1],2)},vh:function(Z,Y){return"V"+d.round(Y[1],2)+"H"+d.round(Y[0],2)},hvh:function(Z,Y){return"H"+d.round((Z[0]+Y[0])/2,2)+"V"+d.round(Y[1],2)+"H"+d.round(Y[0],2)},vhv:function(Z,Y){return"V"+d.round((Z[1]+Y[1])/2,2)+"H"+d.round(Y[0],2)+"V"+d.round(Y[1],2)}},C=function(Z,Y){return"L"+d.round(Y[0],2)+","+d.round(Y[1],2)};f.steps=function(Z){var Y=S[Z]||C;return function(W){for(var te="M"+d.round(W[0][0],2)+","+d.round(W[0][1],2),z=1;z<W.length;z++)te+=Y(W[z-1],W[z]);return te}},f.makeTester=function(){var Z=g.ensureSingleById(d.select("body"),"svg","js-plotly-tester",function(W){W.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Y=g.ensureSingle(Z,"path","js-reference-point",function(W){W.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});f.tester=Z,f.testref=Y},f.savedBBoxes={};var R=0;function F(Z){var Y=Z.getAttribute("data-unformatted");if(null!==Y)return Y+Z.getAttribute("data-math")+Z.getAttribute("text-anchor")+Z.getAttribute("style")}function H(Z,Y){if(!Z)return null;var W=Y._context,te=W._exportedPlot?"":W._baseUrl||"";return te?"url('"+te+"#"+Z+"')":"url(#"+Z+")"}f.bBox=function(Z,Y,W){var te,z,N;if(W||(W=F(Z)),W){if(te=f.savedBBoxes[W])return g.extendFlat({},te)}else if(1===Z.childNodes.length){var V=Z.childNodes[0];if(W=F(V)){var Q=+V.getAttribute("x")||0,j=+V.getAttribute("y")||0,J=V.getAttribute("transform");if(!J){var K=f.bBox(V,!1,W);return Q&&(K.left+=Q,K.right+=Q),j&&(K.top+=j,K.bottom+=j),K}if(te=f.savedBBoxes[W+="~"+Q+"~"+j+"~"+J])return g.extendFlat({},te)}}Y?z=Z:(N=f.tester.node(),z=Z.cloneNode(!0),N.appendChild(z)),d.select(z).attr("transform",null).call(p.positionText,0,0);var re=z.getBoundingClientRect(),ie=f.testref.node().getBoundingClientRect();Y||N.removeChild(z);var ce={height:re.height,width:re.width,left:re.left-ie.left,top:re.top-ie.top,right:re.right-ie.left,bottom:re.bottom-ie.top};return R>=1e4&&(f.savedBBoxes={},R=0),W&&(f.savedBBoxes[W]=ce),R++,g.extendFlat({},ce)},f.setClipUrl=function(Z,Y,W){Z.attr("clip-path",H(Y,W))},f.getTranslate=function(Z){var Y=(Z[Z.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(W,te,z){return[te,z].join(" ")}).split(" ");return{x:+Y[0]||0,y:+Y[1]||0}},f.setTranslate=function(Z,Y,W){var z=Z.attr?"attr":"setAttribute",N=Z[Z.attr?"attr":"getAttribute"]("transform")||"";return Y=Y||0,W=W||0,N=N.replace(/(\btranslate\(.*?\);?)/,"").trim(),N=(N+=n(Y,W)).trim(),Z[z]("transform",N),N},f.getScale=function(Z){var Y=(Z[Z.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(W,te,z){return[te,z].join(" ")}).split(" ");return{x:+Y[0]||1,y:+Y[1]||1}},f.setScale=function(Z,Y,W){var z=Z.attr?"attr":"setAttribute",N=Z[Z.attr?"attr":"getAttribute"]("transform")||"";return Y=Y||1,W=W||1,N=N.replace(/(\bscale\(.*?\);?)/,"").trim(),N=(N+="scale("+Y+","+W+")").trim(),Z[z]("transform",N),N};var U=/\s*sc.*/;f.setPointGroupScale=function(Z,Y,W){if(Y=Y||1,W=W||1,Z){var te=1===Y&&1===W?"":"scale("+Y+","+W+")";Z.each(function(){var z=(this.getAttribute("transform")||"").replace(U,"");z=(z+=te).trim(),this.setAttribute("transform",z)})}};var X=/translate\([^)]*\)\s*$/;f.setTextPointsScale=function(Z,Y,W){Z&&Z.each(function(){var te,z=d.select(this),N=z.select("text");if(N.node()){var V=parseFloat(N.attr("x")||0),Q=parseFloat(N.attr("y")||0),j=(z.attr("transform")||"").match(X);te=1===Y&&1===W?[]:[n(V,Q),"scale("+Y+","+W+")",n(-V,-Q)],j&&te.push(j),z.attr("transform",te.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(y,$,ee){"use strict";var d=y("@plotly/d3");$.exports={circle:{n:0,f:function(g){var _=d.round(g,2);return"M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z"}},square:{n:1,f:function(g){var _=d.round(g,2);return"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z"}},diamond:{n:2,f:function(g){var _=d.round(1.3*g,2);return"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"Z"}},cross:{n:3,f:function(g){var _=d.round(.4*g,2),t=d.round(1.2*g,2);return"M"+t+","+_+"H"+_+"V"+t+"H-"+_+"V"+_+"H-"+t+"V-"+_+"H-"+_+"V-"+t+"H"+_+"V-"+_+"H"+t+"Z"}},x:{n:4,f:function(g){var _=d.round(.8*g/Math.sqrt(2),2),t="l"+_+","+_,e="l"+_+",-"+_,i="l-"+_+",-"+_,r="l-"+_+","+_;return"M0,"+_+t+e+i+e+i+r+i+r+t+r+t+"Z"}},"triangle-up":{n:5,f:function(g){var _=d.round(2*g/Math.sqrt(3),2);return"M-"+_+","+d.round(g/2,2)+"H"+_+"L0,-"+d.round(g,2)+"Z"}},"triangle-down":{n:6,f:function(g){var _=d.round(2*g/Math.sqrt(3),2);return"M-"+_+",-"+d.round(g/2,2)+"H"+_+"L0,"+d.round(g,2)+"Z"}},"triangle-left":{n:7,f:function(g){var _=d.round(2*g/Math.sqrt(3),2);return"M"+d.round(g/2,2)+",-"+_+"V"+_+"L-"+d.round(g,2)+",0Z"}},"triangle-right":{n:8,f:function(g){var _=d.round(2*g/Math.sqrt(3),2);return"M-"+d.round(g/2,2)+",-"+_+"V"+_+"L"+d.round(g,2)+",0Z"}},"triangle-ne":{n:9,f:function(g){var _=d.round(.6*g,2),t=d.round(1.2*g,2);return"M-"+t+",-"+_+"H"+_+"V"+t+"Z"}},"triangle-se":{n:10,f:function(g){var _=d.round(.6*g,2),t=d.round(1.2*g,2);return"M"+_+",-"+t+"V"+_+"H-"+t+"Z"}},"triangle-sw":{n:11,f:function(g){var _=d.round(.6*g,2),t=d.round(1.2*g,2);return"M"+t+","+_+"H-"+_+"V-"+t+"Z"}},"triangle-nw":{n:12,f:function(g){var _=d.round(.6*g,2),t=d.round(1.2*g,2);return"M-"+_+","+t+"V-"+_+"H"+t+"Z"}},pentagon:{n:13,f:function(g){var _=d.round(.951*g,2),t=d.round(.588*g,2),e=d.round(-g,2),i=d.round(-.309*g,2);return"M"+_+","+i+"L"+t+","+d.round(.809*g,2)+"H-"+t+"L-"+_+","+i+"L0,"+e+"Z"}},hexagon:{n:14,f:function(g){var _=d.round(g,2),t=d.round(g/2,2),e=d.round(g*Math.sqrt(3)/2,2);return"M"+e+",-"+t+"V"+t+"L0,"+_+"L-"+e+","+t+"V-"+t+"L0,-"+_+"Z"}},hexagon2:{n:15,f:function(g){var _=d.round(g,2),t=d.round(g/2,2),e=d.round(g*Math.sqrt(3)/2,2);return"M-"+t+","+e+"H"+t+"L"+_+",0L"+t+",-"+e+"H-"+t+"L-"+_+",0Z"}},octagon:{n:16,f:function(g){var _=d.round(.924*g,2),t=d.round(.383*g,2);return"M-"+t+",-"+_+"H"+t+"L"+_+",-"+t+"V"+t+"L"+t+","+_+"H-"+t+"L-"+_+","+t+"V-"+t+"Z"}},star:{n:17,f:function(g){var _=1.4*g,t=d.round(.225*_,2),e=d.round(.951*_,2),i=d.round(.363*_,2),r=d.round(.588*_,2),o=d.round(-_,2),n=d.round(-.309*_,2),p=d.round(.118*_,2),s=d.round(.809*_,2);return"M"+t+","+n+"H"+e+"L"+i+","+p+"L"+r+","+s+"L0,"+d.round(.382*_,2)+"L-"+r+","+s+"L-"+i+","+p+"L-"+e+","+n+"H-"+t+"L0,"+o+"Z"}},hexagram:{n:18,f:function(g){var _=d.round(.66*g,2),t=d.round(.38*g,2),e=d.round(.76*g,2);return"M-"+e+",0l-"+t+",-"+_+"h"+e+"l"+t+",-"+_+"l"+t+","+_+"h"+e+"l-"+t+","+_+"l"+t+","+_+"h-"+e+"l-"+t+","+_+"l-"+t+",-"+_+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(g){var _=d.round(g*Math.sqrt(3)*.8,2),t=d.round(.8*g,2),e=d.round(1.6*g,2),i=d.round(4*g,2),r="A "+i+","+i+" 0 0 1 ";return"M-"+_+","+t+r+_+","+t+r+"0,-"+e+r+"-"+_+","+t+"Z"}},"star-triangle-down":{n:20,f:function(g){var _=d.round(g*Math.sqrt(3)*.8,2),t=d.round(.8*g,2),e=d.round(1.6*g,2),i=d.round(4*g,2),r="A "+i+","+i+" 0 0 1 ";return"M"+_+",-"+t+r+"-"+_+",-"+t+r+"0,"+e+r+_+",-"+t+"Z"}},"star-square":{n:21,f:function(g){var _=d.round(1.1*g,2),t=d.round(2*g,2),e="A "+t+","+t+" 0 0 1 ";return"M-"+_+",-"+_+e+"-"+_+","+_+e+_+","+_+e+_+",-"+_+e+"-"+_+",-"+_+"Z"}},"star-diamond":{n:22,f:function(g){var _=d.round(1.4*g,2),t=d.round(1.9*g,2),e="A "+t+","+t+" 0 0 1 ";return"M-"+_+",0"+e+"0,"+_+e+_+",0"+e+"0,-"+_+e+"-"+_+",0Z"}},"diamond-tall":{n:23,f:function(g){var _=d.round(.7*g,2),t=d.round(1.4*g,2);return"M0,"+t+"L"+_+",0L0,-"+t+"L-"+_+",0Z"}},"diamond-wide":{n:24,f:function(g){var _=d.round(1.4*g,2),t=d.round(.7*g,2);return"M0,"+t+"L"+_+",0L0,-"+t+"L-"+_+",0Z"}},hourglass:{n:25,f:function(g){var _=d.round(g,2);return"M"+_+","+_+"H-"+_+"L"+_+",-"+_+"H-"+_+"Z"},noDot:!0},bowtie:{n:26,f:function(g){var _=d.round(g,2);return"M"+_+","+_+"V-"+_+"L-"+_+","+_+"V-"+_+"Z"},noDot:!0},"circle-cross":{n:27,f:function(g){var _=d.round(g,2);return"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(g){var _=d.round(g,2),t=d.round(g/Math.sqrt(2),2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(g){var _=d.round(g,2);return"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(g){var _=d.round(g,2);return"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_+"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(g){var _=d.round(1.3*g,2);return"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"ZM0,-"+_+"V"+_+"M-"+_+",0H"+_},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(g){var _=d.round(1.3*g,2),t=d.round(.65*g,2);return"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"ZM-"+t+",-"+t+"L"+t+","+t+"M-"+t+","+t+"L"+t+",-"+t},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(g){var _=d.round(1.4*g,2);return"M0,"+_+"V-"+_+"M"+_+",0H-"+_},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(g){var _=d.round(g,2);return"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(g){var _=d.round(1.2*g,2),t=d.round(.85*g,2);return"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(g){var _=d.round(g/2,2),t=d.round(g,2);return"M"+_+","+t+"V-"+t+"m-"+t+",0V"+t+"M"+t+","+_+"H-"+t+"m0,-"+t+"H"+t},needLine:!0,noFill:!0},"y-up":{n:37,f:function(g){var _=d.round(1.2*g,2),t=d.round(1.6*g,2),e=d.round(.8*g,2);return"M-"+_+","+e+"L0,0M"+_+","+e+"L0,0M0,-"+t+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(g){var _=d.round(1.2*g,2),t=d.round(1.6*g,2),e=d.round(.8*g,2);return"M-"+_+",-"+e+"L0,0M"+_+",-"+e+"L0,0M0,"+t+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(g){var _=d.round(1.2*g,2),t=d.round(1.6*g,2),e=d.round(.8*g,2);return"M"+e+","+_+"L0,0M"+e+",-"+_+"L0,0M-"+t+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(g){var _=d.round(1.2*g,2),t=d.round(1.6*g,2),e=d.round(.8*g,2);return"M-"+e+","+_+"L0,0M-"+e+",-"+_+"L0,0M"+t+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(g){var _=d.round(1.4*g,2);return"M"+_+",0H-"+_},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(g){var _=d.round(1.4*g,2);return"M0,"+_+"V-"+_},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(g){var _=d.round(g,2);return"M"+_+",-"+_+"L-"+_+","+_},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(g){var _=d.round(g,2);return"M"+_+","+_+"L-"+_+",-"+_},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(g){var _=d.round(g,2);return"M0,0L-"+_+","+d.round(2*g,2)+"H"+_+"Z"},noDot:!0},"arrow-down":{n:46,f:function(g){var _=d.round(g,2);return"M0,0L-"+_+",-"+d.round(2*g,2)+"H"+_+"Z"},noDot:!0},"arrow-left":{n:47,f:function(g){var _=d.round(2*g,2),t=d.round(g,2);return"M0,0L"+_+",-"+t+"V"+t+"Z"},noDot:!0},"arrow-right":{n:48,f:function(g){var _=d.round(2*g,2),t=d.round(g,2);return"M0,0L-"+_+",-"+t+"V"+t+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(g){var _=d.round(g,2);return"M-"+_+",0H"+_+"M0,0L-"+_+","+d.round(2*g,2)+"H"+_+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(g){var _=d.round(g,2);return"M-"+_+",0H"+_+"M0,0L-"+_+",-"+d.round(2*g,2)+"H"+_+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(g){var _=d.round(2*g,2),t=d.round(g,2);return"M0,-"+t+"V"+t+"M0,0L"+_+",-"+t+"V"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(g){var _=d.round(2*g,2),t=d.round(g,2);return"M0,-"+t+"V"+t+"M0,0L-"+_+",-"+t+"V"+t+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(y,$,ee){"use strict";$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../registry"),_=y("../../plots/cartesian/axes"),t=y("../../lib"),e=y("./compute_error");function i(r,o,n,p){var s=o["error_"+p]||{},a=[];if(s.visible&&-1!==["linear","log"].indexOf(n.type)){for(var c=e(s),u=0;u<r.length;u++){var h=r[u],v=h.i;if(void 0===v)v=u;else if(null===v)continue;var f=h[p];if(d(n.c2l(f))){var l=c(f,v);if(d(l[0])&&d(l[1])){var x=h[p+"s"]=f-l[0],m=h[p+"h"]=f+l[1];a.push(x,m)}}}var b=o._extremes[n._id],k=_.findExtremes(n,a,t.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(k.min),b.max=b.max.concat(k.max)}}$.exports=function(r){for(var o=r.calcdata,n=0;n<o.length;n++){var p=o[n],s=p[0].trace;if(!0===s.visible&&g.traceIs(s,"errorBarsOK")){var a=_.getFromId(r,s.xaxis),c=_.getFromId(r,s.yaxis);i(p,s,a,"x"),i(p,s,c,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(y,$,ee){"use strict";function d(g,_){return"percent"===g?function(t){return Math.abs(t*_/100)}:"constant"===g?function(){return Math.abs(_)}:"sqrt"===g?function(t){return Math.sqrt(Math.abs(t))}:void 0}$.exports=function(g){var _=g.type,t=g.symmetric;if("data"===_){var e=g.array||[];if(t)return function(n,p){var s=+e[p];return[s,s]};var i=g.arrayminus||[];return function(n,p){var s=+e[p],a=+i[p];return isNaN(s)&&isNaN(a)?[NaN,NaN]:[a||0,s||0]}}var r=d(_,g.value),o=d(_,g.valueminus);return t||void 0===g.valueminus?function(n){var p=r(n);return[p,p]}:function(n){return[o(n),r(n)]}}},{}],393:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../registry"),_=y("../../lib"),t=y("../../plot_api/plot_template"),e=y("./attributes");$.exports=function(i,r,o,n){var p="error_"+n.axis,s=t.newContainer(r,p),a=i[p]||{};function c(f,l){return _.coerce(a,s,e,f,l)}if(!1!==c("visible",void 0!==a.array||void 0!==a.value||"sqrt"===a.type)){var u=c("type","array"in a?"data":"percent"),h=!0;"sqrt"!==u&&(h=c("symmetric",!(("data"===u?"arrayminus":"valueminus")in a))),"data"===u?(c("array"),c("traceref"),h||(c("arrayminus"),c("tracerefminus"))):"percent"!==u&&"constant"!==u||(c("value"),h||c("valueminus"));var v="copy_"+n.inherit+"style";n.inherit&&(r["error_"+n.inherit]||{}).visible&&c(v,!(a.color||d(a.thickness)||d(a.width))),n.inherit&&s[v]||(c("color",o),c("thickness"),c("width",g.traceIs(r,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plot_api/edit_types").overrideAll,_=y("./attributes"),t={error_x:d.extendFlat({},_),error_y:d.extendFlat({},_)};delete t.error_x.copy_zstyle,delete t.error_y.copy_zstyle,delete t.error_y.copy_ystyle;var e={error_x:d.extendFlat({},_),error_y:d.extendFlat({},_),error_z:d.extendFlat({},_)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:t,bar:t,histogram:t,scatter3d:g(e,"calc","nested"),scattergl:g(t,"calc","nested")}},supplyDefaults:y("./defaults"),calc:y("./calc"),makeComputeError:y("./compute_error"),plot:y("./plot"),style:y("./style"),hoverInfo:function(i,r,o){(r.error_y||{}).visible&&(o.yerr=i.yh-i.y,r.error_y.symmetric||(o.yerrneg=i.y-i.ys)),(r.error_x||{}).visible&&(o.xerr=i.xh-i.x,r.error_x.symmetric||(o.xerrneg=i.x-i.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("../drawing"),t=y("../../traces/scatter/subtypes");$.exports=function(e,i,r,o){var n=r.xaxis,p=r.yaxis,s=o&&o.duration>0;i.each(function(a){var c,u=a[0].trace,h=u.error_x||{},v=u.error_y||{};u.ids&&(c=function(m){return m.id});var f=t.hasMarkers(u)&&u.marker.maxdisplayed>0;v.visible||h.visible||(a=[]);var l=d.select(this).selectAll("g.errorbar").data(a,c);if(l.exit().remove(),a.length){h.visible||l.selectAll("path.xerror").remove(),v.visible||l.selectAll("path.yerror").remove(),l.style("opacity",1);var x=l.enter().append("g").classed("errorbar",!0);s&&x.style("opacity",0).transition().duration(o.duration).style("opacity",1),_.setClipUrl(l,r.layerClipId,e),l.each(function(m){var D,S,C,R,w=d.select(this),b=(C=p,R={x:(S=n).c2p((D=m).x),y:C.c2p(D.y)},void 0!==D.yh&&(R.yh=C.c2p(D.yh),R.ys=C.c2p(D.ys),g(R.ys)||(R.noYS=!0,R.ys=C.c2p(D.ys,!0))),void 0!==D.xh&&(R.xh=S.c2p(D.xh),R.xs=S.c2p(D.xs),g(R.xs)||(R.noXS=!0,R.xs=S.c2p(D.xs,!0))),R);if(!f||m.vis){var k,T=w.select("path.yerror");if(v.visible&&g(b.x)&&g(b.yh)&&g(b.ys)){var L=v.width;k="M"+(b.x-L)+","+b.yh+"h"+2*L+"m-"+L+",0V"+b.ys,b.noYS||(k+="m-"+L+",0h"+2*L),T.size()?s&&(T=T.transition().duration(o.duration).ease(o.easing)):T=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),T.attr("d",k)}else T.remove();var A=w.select("path.xerror");if(h.visible&&g(b.y)&&g(b.xh)&&g(b.xs)){var I=(h.copy_ystyle?v:h).width;k="M"+b.xh+","+(b.y-I)+"v"+2*I+"m0,-"+I+"H"+b.xs,b.noXS||(k+="m0,-"+I+"v"+2*I),A.size()?s&&(A=A.transition().duration(o.duration).ease(o.easing)):A=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),A.attr("d",k)}else A.remove()}})}})}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../color");$.exports=function(_){_.each(function(t){var e=t[0].trace,i=e.error_y||{},r=e.error_x||{},o=d.select(this);o.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(g.stroke,i.color),r.copy_ystyle&&(r=i),o.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(g.stroke,r.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("./layout_attributes").hoverlabel,_=y("../../lib/extend").extendFlat;$.exports={hoverlabel:{bgcolor:_({},g.bgcolor,{arrayOk:!0}),bordercolor:_({},g.bordercolor,{arrayOk:!0}),font:d({arrayOk:!0,editType:"none"}),align:_({},g.align,{arrayOk:!0}),namelength:_({},g.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry");function _(t,e,i,r){r=r||d.identity,Array.isArray(t)&&(e[0][i]=r(t))}$.exports=function(t){var e=t.calcdata,i=t._fullLayout;function r(a){return function(c){return d.coerceHoverinfo({hoverinfo:c},{_module:a._module},i)}}for(var o=0;o<e.length;o++){var n=e[o],p=n[0].trace;if(!g.traceIs(p,"pie-like")){var s=g.traceIs(p,"2dMap")?_:d.fillArray;s(p.hoverinfo,n,"hi",r(p)),p.hovertemplate&&s(p.hovertemplate,n,"ht"),p.hoverlabel&&(s(p.hoverlabel.bgcolor,n,"hbg"),s(p.hoverlabel.bordercolor,n,"hbc"),s(p.hoverlabel.font.size,n,"hts"),s(p.hoverlabel.font.color,n,"htc"),s(p.hoverlabel.font.family,n,"htf"),s(p.hoverlabel.namelength,n,"hnl"),s(p.hoverlabel.align,n,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("./hover").hover;$.exports=function(_,t,e){var i=d.getComponentMethod("annotations","onClick")(_,_._hoverdata);function r(){_.emit("plotly_click",{points:_._hoverdata,event:t})}void 0!==e&&g(_,t,e,!0),_._hoverdata&&t&&t.target&&(i&&i.then?i.then(r):r(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(y,$,ee){"use strict";$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("./hoverlabel_defaults");$.exports=function(t,e,i,r){var o=d.extendFlat({},r.hoverlabel);e.hovertemplate&&(o.namelength=-1),_(t,e,function(n,p){return d.coerce(t,e,g,n,p)},o)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(y,$,ee){"use strict";var d=y("../../lib");ee.getSubplot=function(r){return r.subplot||r.xaxis+r.yaxis||r.geo},ee.isTraceInSubplots=function(r,o){if("splom"===r.type){for(var n=r.xaxes||[],p=r.yaxes||[],s=0;s<n.length;s++)for(var a=0;a<p.length;a++)if(-1!==o.indexOf(n[s]+p[a]))return!0;return!1}return-1!==o.indexOf(ee.getSubplot(r))},ee.flat=function(r,o){for(var n=new Array(r.length),p=0;p<r.length;p++)n[p]=o;return n},ee.p2c=function(r,o){for(var n=new Array(r.length),p=0;p<r.length;p++)n[p]=r[p].p2c(o);return n},ee.getDistanceFunction=function(r,o,n,p){return"closest"===r?p||ee.quadrature(o,n):"x"===r.charAt(0)?o:n},ee.getClosest=function(r,o,n){if(!1!==n.index)n.index>=0&&n.index<r.length?n.distance=0:n.index=!1;else for(var p=0;p<r.length;p++){var s=o(r[p]);s<=n.distance&&(n.index=p,n.distance=s)}return n},ee.inbox=function(r,o,n){return r*o<0||0===r?n:1/0},ee.quadrature=function(r,o){return function(n){var p=r(n),s=o(n);return Math.sqrt(p*p+s*s)}},ee.makeEventData=function(r,o,n){var p="index"in r?r.index:r.pointNumber,s={data:o._input,fullData:o,curveNumber:o.index,pointNumber:p};if(o._indexToPoints){var a=o._indexToPoints[p];1===a.length?s.pointIndex=a[0]:s.pointIndices=a}else s.pointIndex=p;return o._module.eventData?s=o._module.eventData(s,r,o,n,p):("xVal"in r?s.x=r.xVal:"x"in r&&(s.x=r.x),"yVal"in r?s.y=r.yVal:"y"in r&&(s.y=r.y),r.xa&&(s.xaxis=r.xa),r.ya&&(s.yaxis=r.ya),void 0!==r.zLabelVal&&(s.z=r.zLabelVal)),ee.appendArrayPointValue(s,o,p),s},ee.appendArrayPointValue=function(r,o,n){var p=o._arrayAttrs;if(p)for(var s=0;s<p.length;s++){var a=p[s],c=_(a);if(void 0===r[c]){var u=t(d.nestedProperty(o,a).get(),n);void 0!==u&&(r[c]=u)}}},ee.appendArrayMultiPointValues=function(r,o,n){var p=o._arrayAttrs;if(p)for(var s=0;s<p.length;s++){var a=p[s],c=_(a);if(void 0===r[c]){for(var u=d.nestedProperty(o,a).get(),h=new Array(n.length),v=0;v<n.length;v++)h[v]=t(u,n[v]);r[c]=h}}};var g={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function _(r){return g[r]||r}function t(r,o){return Array.isArray(o)?Array.isArray(r)&&Array.isArray(r[o[0]])?r[o[0]][o[1]]:void 0:r[o]}var e={x:!0,y:!0},i={"x unified":!0,"y unified":!0};ee.isUnifiedHover=function(r){return"string"==typeof r&&!!i[r]},ee.isXYhover=function(r){return"string"==typeof r&&!!e[r]}},{"../../lib":503}],403:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("tinycolor2"),t=y("../../lib"),e=t.strTranslate,i=t.strRotate,r=y("../../lib/events"),o=y("../../lib/svg_text_utils"),n=y("../../lib/override_cursor"),p=y("../drawing"),s=y("../color"),a=y("../dragelement"),c=y("../../plots/cartesian/axes"),u=y("../../registry"),h=y("./helpers"),v=y("./constants"),f=y("../legend/defaults"),l=y("../legend/draw"),x=v.YANGLE,m=Math.PI*x/180,w=1/Math.sin(m),b=Math.cos(m),k=Math.sin(m),T=v.HOVERARROWSIZE,L=v.HOVERTEXTPAD,A={box:!0,ohlc:!0,violin:!0,candlestick:!0},I={scatter:!0,scattergl:!0,splom:!0};function D(N){return[N.trace.index,N.index,N.x0,N.y0,N.name,N.attr,N.xa?N.xa._id:"",N.ya?N.ya._id:""].join(",")}ee.hover=function(N,V,Q,j){N=t.getGraphDiv(N);var J=V.target;t.throttle(N._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){!function(K,re,ie,ce,se){ie||(ie="xy");var de=Array.isArray(ie)?ie:[ie],ue=K._fullLayout,ge=ue._plots||[],be=ge[ie],Te=ue._has("cartesian");if(be){var we=be.overlays.map(function(qr){return qr.id});de=de.concat(we)}for(var Le=de.length,fe=new Array(Le),ve=new Array(Le),Me=!1,ke=0;ke<Le;ke++){var Ce=de[ke];if(ge[Ce])Me=!0,fe[ke]=ge[Ce].xaxis,ve[ke]=ge[Ce].yaxis;else{if(!ue[Ce]||!ue[Ce]._subplot)return void t.warn("Unrecognized subplot: "+Ce);var Pe=ue[Ce]._subplot;fe[ke]=Pe.xaxis,ve[ke]=Pe.yaxis}}var Fe=re.hovermode||ue.hovermode;if(Fe&&!Me&&(Fe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Fe)||!K.calcdata||K.querySelector(".zoombox")||K._dragging)return a.unhoverRaw(K,re);var qe=ue.hoverdistance;-1===qe&&(qe=1/0);var rt=ue.spikedistance;-1===rt&&(rt=1/0);var ze,He,Xe,Je,at,pt,xt,Ft,Dt,ot,it,Et,Xt,nr=[],Ue=[],We={hLinePoint:null,vLinePoint:null},Be=!1;if(Array.isArray(re))for(Fe="array",Xe=0;Xe<re.length;Xe++)(at=K.calcdata[re[Xe].curveNumber||0])&&(pt=at[0].trace,"skip"!==at[0].trace.hoverinfo&&(Ue.push(at),"h"===pt.orientation&&(Be=!0)));else{for(Je=0;Je<K.calcdata.length;Je++)"skip"!==(pt=(at=K.calcdata[Je])[0].trace).hoverinfo&&h.isTraceInSubplots(pt,de)&&(Ue.push(at),"h"===pt.orientation&&(Be=!0));var Qe,Ae;if(se){if(!1===r.triggerHandler(K,"plotly_beforehover",re))return;var De=se.getBoundingClientRect();Qe=re.clientX-De.left,Ae=re.clientY-De.top,ue._calcInverseTransform(K);var Oe=t.apply3DTransform(ue._invTransform)(Qe,Ae);if(Ae=Oe[1],(Qe=Oe[0])<0||Qe>fe[0]._length||Ae<0||Ae>ve[0]._length)return a.unhoverRaw(K,re)}else Qe="xpx"in re?re.xpx:fe[0]._length/2,Ae="ypx"in re?re.ypx:ve[0]._length/2;if(re.pointerX=Qe+fe[0]._offset,re.pointerY=Ae+ve[0]._offset,ze="xval"in re?h.flat(de,re.xval):h.p2c(fe,Qe),He="yval"in re?h.flat(de,re.yval):h.p2c(ve,Ae),!g(ze[0])||!g(He[0]))return t.warn("Fx.hover failed",re,K),a.unhoverRaw(K,re)}var Ie=1/0;function et(qr,On){for(Je=0;Je<Ue.length;Je++)if((at=Ue[Je])&&at[0]&&at[0].trace&&!0===(pt=at[0].trace).visible&&0!==pt._length&&-1===["carpet","contourcarpet"].indexOf(pt._module.name)){if("splom"===pt.type?xt=de[Ft=0]:(xt=h.getSubplot(pt),Ft=de.indexOf(xt)),h.isUnifiedHover(Dt=Fe)&&(Dt=Dt.charAt(0)),Et={cd:at,trace:pt,xa:fe[Ft],ya:ve[Ft],maxHoverDistance:qe,maxSpikeDistance:rt,index:!1,distance:Math.min(Ie,qe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:pt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ue[xt]&&(Et.subplot=ue[xt]._subplot),ue._splomScenes&&ue._splomScenes[pt.uid]&&(Et.scene=ue._splomScenes[pt.uid]),Xt=nr.length,"array"===Dt){var Tn=re[Je];"pointNumber"in Tn?(Et.index=Tn.pointNumber,Dt="closest"):(Dt="","xval"in Tn&&(ot=Tn.xval,Dt="x"),"yval"in Tn&&(it=Tn.yval,Dt=Dt?"closest":"y"))}else void 0!==qr&&void 0!==On?(ot=qr,it=On):(ot=ze[Ft],it=He[Ft]);if(0!==qe)if(pt._module&&pt._module.hoverPoints){var rn=pt._module.hoverPoints(Et,ot,it,Dt,{finiteRange:!0,hoverLayer:ue._hoverlayer});if(rn)for(var Vn,ar=0;ar<rn.length;ar++)g((Vn=rn[ar]).x0)&&g(Vn.y0)&&nr.push(H(Vn,Fe))}else t.log("Unrecognized trace type in hover:",pt);if("closest"===Fe&&nr.length>Xt&&(nr.splice(0,Xt),Ie=nr[0].distance),Te&&0!==rt&&0===nr.length){Et.distance=rt,Et.index=!1;var zt=pt._module.hoverPoints(Et,ot,it,"closest",{hoverLayer:ue._hoverlayer});if(zt&&(zt=zt.filter(function(Cr){return Cr.spikeDistance<=rt})),zt&&zt.length){var Gt,mr=zt.filter(function(Cr){return Cr.xa.showspikes&&"hovered data"!==Cr.xa.spikesnap});if(mr.length){var Er=mr[0];g(Er.x0)&&g(Er.y0)&&(Gt=vt(Er),(!We.vLinePoint||We.vLinePoint.spikeDistance>Gt.spikeDistance)&&(We.vLinePoint=Gt))}var tn=zt.filter(function(Cr){return Cr.ya.showspikes&&"hovered data"!==Cr.ya.spikesnap});if(tn.length){var Qr=tn[0];g(Qr.x0)&&g(Qr.y0)&&(Gt=vt(Qr),(!We.hLinePoint||We.hLinePoint.spikeDistance>Gt.spikeDistance)&&(We.hLinePoint=Gt))}}}}}function ct(qr,On,Tn){for(var rn,Vn=null,ar=1/0,zt=0;zt<qr.length;zt++)rn=qr[zt].spikeDistance,Tn&&0===zt&&(rn=-1/0),rn<=ar&&rn<=On&&(Vn=qr[zt],ar=rn);return Vn}function vt(qr){return qr?{xa:qr.xa,ya:qr.ya,x:void 0!==qr.xSpike?qr.xSpike:(qr.x0+qr.x1)/2,y:void 0!==qr.ySpike?qr.ySpike:(qr.y0+qr.y1)/2,distance:qr.distance,spikeDistance:qr.spikeDistance,curveNumber:qr.trace.index,color:qr.color,pointNumber:qr.index}:null}et();var ft={fullLayout:ue,container:ue._hoverlayer,event:re},It=K._spikepoints;K._spikepoints={vLinePoint:We.vLinePoint,hLinePoint:We.hLinePoint};var Ot=function(){nr.sort(function(qr,On){return qr.distance-On.distance}),nr=function(qr,On){for(var Tn=On.charAt(0),rn=[],Vn=[],ar=[],zt=0;zt<qr.length;zt++){var Gt=qr[zt];u.traceIs(Gt.trace,"bar-like")||u.traceIs(Gt.trace,"box-violin")?ar.push(Gt):Gt.trace[Tn+"period"]?Vn.push(Gt):rn.push(Gt)}return rn.concat(Vn).concat(ar)}(nr,Fe)};Ot();var Rt=Fe.charAt(0),$e=("x"===Rt||"y"===Rt)&&nr[0]&&I[nr[0].trace.type];if(Te&&0!==rt&&0!==nr.length){var yt=ct(nr.filter(function(qr){return qr.ya.showspikes}),rt,$e);We.hLinePoint=vt(yt);var Bt=ct(nr.filter(function(qr){return qr.xa.showspikes}),rt,$e);We.vLinePoint=vt(Bt)}if(0===nr.length){var Ut=a.unhoverRaw(K,re);return!Te||null===We.hLinePoint&&null===We.vLinePoint||X(It)&&U(K,We,ft),Ut}if(Te&&X(It)&&U(K,We,ft),h.isXYhover(Dt)&&0!==nr[0].length&&"splom"!==nr[0].trace.type){var Qt=nr[0],Re=(nr=A[Qt.trace.type]?nr.filter(function(qr){return qr.trace.index===Qt.trace.index}):[Qt]).length;et(Y("x",Qt,ue),Y("y",Qt,ue));var Nt,Zt=[],or={},Wt=0,er=function(qr){var On=A[qr.trace.type]?D(qr):qr.trace.index;if(or[On]){var Tn=or[On]-1,rn=Zt[Tn];Tn>0&&Math.abs(qr.distance)<Math.abs(rn.distance)&&(Zt[Tn]=qr)}else Wt++,or[On]=Wt,Zt.push(qr)};for(Nt=0;Nt<Re;Nt++)er(nr[Nt]);for(Nt=nr.length-1;Nt>Re-1;Nt--)er(nr[Nt]);nr=Zt,Ot()}var cr=K._hoverdata,_r=[],xr=W(K),dr=te(K);for(Xe=0;Xe<nr.length;Xe++){var pr=nr[Xe],br=h.makeEventData(pr,pr.trace,pr.cd);if(!1!==pr.hovertemplate){var Nr=!1;pr.cd[pr.index]&&pr.cd[pr.index].ht&&(Nr=pr.cd[pr.index].ht),pr.hovertemplate=Nr||pr.trace.hovertemplate||!1}if(pr.xa&&pr.ya){var kr=pr.x0+pr.xa._offset,Hr=pr.x1+pr.xa._offset,an=pr.y0+pr.ya._offset,fn=pr.y1+pr.ya._offset,zn=Math.min(kr,Hr),Nn=Math.max(kr,Hr),In=Math.min(an,fn),cn=Math.max(an,fn);br.bbox={x0:zn+dr,x1:Nn+dr,y0:In+xr,y1:cn+xr}}pr.eventData=[br],_r.push(br)}K._hoverdata=_r;var jr="y"===Fe&&(Ue.length>1||nr.length>1)||"closest"===Fe&&Be&&nr.length>1,Lr=s.combine(ue.plot_bgcolor||s.background,ue.paper_bgcolor),Xr=C(nr,{gd:K,hovermode:Fe,rotateLabels:jr,bgColor:Lr,container:ue._hoverlayer,outerContainer:ue._paper.node(),commonLabelOpts:ue.hoverlabel,hoverdistance:ue.hoverdistance});if(h.isUnifiedHover(Fe)||(function(qr,On,Tn){var rn,Vn,ar,zt,Gt,mr,Er,tn=0,Qr=1,Cr=qr.size(),Mr=new Array(Cr),Ir=0;function Sr(Wr){var pn=Wr[0],Mn=Wr[Wr.length-1];if(ar=Mn.pos+Mn.dp+Mn.size-pn.pmax,(Vn=pn.pmin-pn.pos-pn.dp+pn.size)>.01){for(Gt=Wr.length-1;Gt>=0;Gt--)Wr[Gt].dp+=Vn;rn=!1}if(!(ar<.01)){if(Vn<-.01){for(Gt=Wr.length-1;Gt>=0;Gt--)Wr[Gt].dp-=ar;rn=!1}if(rn){var Dn=0;for(zt=0;zt<Wr.length;zt++)(mr=Wr[zt]).pos+mr.dp+mr.size>pn.pmax&&Dn++;for(zt=Wr.length-1;zt>=0&&!(Dn<=0);zt--)(mr=Wr[zt]).pos>pn.pmax-1&&(mr.del=!0,Dn--);for(zt=0;zt<Wr.length&&!(Dn<=0);zt++)if((mr=Wr[zt]).pos<pn.pmin+1)for(mr.del=!0,Dn--,ar=2*mr.size,Gt=Wr.length-1;Gt>=0;Gt--)Wr[Gt].dp-=ar;for(zt=Wr.length-1;zt>=0&&!(Dn<=0);zt--)(mr=Wr[zt]).pos+mr.dp+mr.size>pn.pmax&&(mr.del=!0,Dn--)}}}for(qr.each(function(Wr){var pn=Wr[On],Mn="x"===pn._id.charAt(0),Dn=pn.range;0===Ir&&Dn&&Dn[0]>Dn[1]!==Mn&&(Qr=-1),Mr[Ir++]=[{datum:Wr,traceIndex:Wr.trace.index,dp:0,pos:Wr.pos,posref:Wr.posref,size:Wr.by*(Mn?w:1)/2,pmin:0,pmax:Mn?Tn.width:Tn.height}]}),Mr.sort(function(Wr,pn){return Wr[0].posref-pn[0].posref||Qr*(pn[0].traceIndex-Wr[0].traceIndex)});!rn&&tn<=Cr;){for(tn++,rn=!0,zt=0;zt<Mr.length-1;){var Pr=Mr[zt],Kr=Mr[zt+1],vn=Pr[Pr.length-1],Cn=Kr[0];if((Vn=vn.pos+vn.dp+vn.size-Cn.pos-Cn.dp+Cn.size)>.01&&vn.pmin===Cn.pmin&&vn.pmax===Cn.pmax){for(Gt=Kr.length-1;Gt>=0;Gt--)Kr[Gt].dp+=Vn;for(Pr.push.apply(Pr,Kr),Mr.splice(zt+1,1),Er=0,Gt=Pr.length-1;Gt>=0;Gt--)Er+=Pr[Gt].dp;for(ar=Er/Pr.length,Gt=Pr.length-1;Gt>=0;Gt--)Pr[Gt].dp-=ar;rn=!1}else zt++}Mr.forEach(Sr)}for(zt=Mr.length-1;zt>=0;zt--){var ln=Mr[zt];for(Gt=ln.length-1;Gt>=0;Gt--){var yn=ln[Gt],Zr=yn.datum;Zr.offset=yn.dp,Zr.del=yn.del}}}(Xr,jr?"xa":"ya",ue),F(Xr,jr,ue._invScaleX,ue._invScaleY)),se&&se.tagName){var Un=u.getComponentMethod("annotations","hasClickToShow")(K,_r);n(d.select(se),Un?"pointer":"")}!se||ce||!function(qr,On,Tn){if(!Tn||Tn.length!==qr._hoverdata.length)return!0;for(var rn=Tn.length-1;rn>=0;rn--){var Vn=Tn[rn],ar=qr._hoverdata[rn];if(Vn.curveNumber!==ar.curveNumber||String(Vn.pointNumber)!==String(ar.pointNumber)||String(Vn.pointNumbers)!==String(ar.pointNumbers))return!0}return!1}(K,0,cr)||(cr&&K.emit("plotly_unhover",{event:re,points:cr}),K.emit("plotly_hover",{event:re,points:K._hoverdata,xaxes:fe,yaxes:ve,xvals:ze,yvals:He}))}(N,V,Q,j,J)})},ee.loneHover=function(N,V){var Q=!0;Array.isArray(N)||(Q=!1,N=[N]);var j=V.gd,J=W(j),K=te(j),re=C(N.map(function(se){var de=se._x0||se.x0||se.x||0,ue=se._x1||se.x1||se.x||0,ge=se._y0||se.y0||se.y||0,be=se._y1||se.y1||se.y||0,Te=se.eventData;if(Te){var we=Math.min(de,ue),Le=Math.max(de,ue),fe=Math.min(ge,be),ve=Math.max(ge,be),Me=se.trace;if(u.traceIs(Me,"gl3d")){var ke=j._fullLayout[Me.scene]._scene.container,Ce=ke.offsetLeft,Pe=ke.offsetTop;we+=Ce,Le+=Ce,fe+=Pe,ve+=Pe}Te.bbox={x0:we+K,x1:Le+K,y0:fe+J,y1:ve+J},V.inOut_bbox&&V.inOut_bbox.push(Te.bbox)}else Te=!1;return{color:se.color||s.defaultLine,x0:se.x0||se.x||0,x1:se.x1||se.x||0,y0:se.y0||se.y||0,y1:se.y1||se.y||0,xLabel:se.xLabel,yLabel:se.yLabel,zLabel:se.zLabel,text:se.text,name:se.name,idealAlign:se.idealAlign,borderColor:se.borderColor,fontFamily:se.fontFamily,fontSize:se.fontSize,fontColor:se.fontColor,nameLength:se.nameLength,textAlign:se.textAlign,trace:se.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:se.hovertemplate||!1,hovertemplateLabels:se.hovertemplateLabels||!1,eventData:Te}}),{gd:j,hovermode:"closest",rotateLabels:!1,bgColor:V.bgColor||s.background,container:d.select(V.container),outerContainer:V.outerContainer||V.container}),ie=0,ce=0;return re.sort(function(se,de){return se.y0-de.y0}).each(function(se,de){var ue=se.y0-se.by/2;se.offset=ue-5<ie?ie-ue+5:0,ie=ue+se.by+se.offset,de===V.anchorIndex&&(ce=se.offset)}).each(function(se){se.offset-=ce}),F(re,!1,j._fullLayout._invScaleX,j._fullLayout._invScaleY),Q?re:re.node()};var S=/<extra>([\s\S]*)<\/extra>/;function C(N,V){var Q=V.gd,j=Q._fullLayout,J=V.hovermode,K=V.rotateLabels,re=V.bgColor,ie=V.container,ce=V.outerContainer,se=V.commonLabelOpts||{};if(0===N.length)return[[]];var de=V.fontFamily||v.HOVERFONT,ue=V.fontSize||v.HOVERFONTSIZE,ge=N[0],be=ge.xa,Te=ge.ya,we=J.charAt(0),Le=ge[we+"Label"],fe=z(Q,ce),ve=fe.top,Me=fe.width,ke=fe.height,Ce=void 0!==Le&&ge.distance<=V.hoverdistance&&("x"===J||"y"===J);if(Ce){var Pe,Fe,qe=!0;for(Pe=0;Pe<N.length;Pe++)if(qe&&void 0===N[Pe].zLabel&&(qe=!1),Fe=N[Pe].hoverinfo||N[Pe].trace.hoverinfo){var rt=Array.isArray(Fe)?Fe:Fe.split("+");if(-1===rt.indexOf("all")&&-1===rt.indexOf(J)){Ce=!1;break}}qe&&(Ce=!1)}var ze=ie.selectAll("g.axistext").data(Ce?[0]:[]);if(ze.enter().append("g").classed("axistext",!0),ze.exit().remove(),ze.each(function(){var $e=d.select(this),yt=t.ensureSingle($e,"path","",function(Hr){Hr.style({"stroke-width":"1px"})}),Bt=t.ensureSingle($e,"text","",function(Hr){Hr.attr("data-notex",1)}),Ut=se.bgcolor||s.defaultLine,Qt=se.bordercolor||s.contrast(Ut),Re=s.contrast(Ut),ht={family:se.font.family||de,size:se.font.size||ue,color:se.font.color||Re};yt.style({fill:Ut,stroke:Qt}),Bt.text(Le).call(p.font,ht).call(o.positionText,0,0).call(o.convertToTspans,Q),$e.attr("transform","");var Mt,Nt,Zt=z(Q,Bt.node());if("x"===J){var or="top"===be.side?"-":"";Bt.attr("text-anchor","middle").call(o.positionText,0,"top"===be.side?ve-Zt.bottom-T-L:ve-Zt.top+T+L),Nt=Te._offset+("top"===be.side?0:Te._length);var Wt=Zt.width/2+L;(Mt=be._offset+(ge.x0+ge.x1)/2)<Wt?(Mt=Wt,yt.attr("d","M-"+(Wt-T)+",0L-"+(Wt-2*T)+","+or+T+"H"+(L+Zt.width/2)+"v"+or+(2*L+Zt.height)+"H-"+Wt+"V"+or+T+"Z")):Mt>j.width-Wt?(Mt=j.width-Wt,yt.attr("d","M"+(Wt-T)+",0L"+Wt+","+or+T+"v"+or+(2*L+Zt.height)+"H-"+Wt+"V"+or+T+"H"+(Wt-2*T)+"Z")):yt.attr("d","M0,0L"+T+","+or+T+"H"+(L+Zt.width/2)+"v"+or+(2*L+Zt.height)+"H-"+(L+Zt.width/2)+"V"+or+T+"H-"+T+"Z")}else{var er,cr,_r;"right"===Te.side?(er="start",cr=1,_r="",Mt=be._offset+be._length):(er="end",cr=-1,_r="-",Mt=be._offset),Nt=Te._offset+(ge.y0+ge.y1)/2,Bt.attr("text-anchor",er),yt.attr("d","M0,0L"+_r+T+","+T+"V"+(L+Zt.height/2)+"h"+_r+(2*L+Zt.width)+"V-"+(L+Zt.height/2)+"H"+_r+T+"V-"+T+"Z");var xr,dr=Zt.height/2,pr=ve-Zt.top-dr,br="clip"+j._uid+"commonlabel"+Te._id;if(Mt<Zt.width+2*L+T){xr="M-"+(T+L)+"-"+dr+"h-"+(Zt.width-L)+"V"+dr+"h"+(Zt.width-L)+"Z";var Nr=Zt.width-Mt+L;o.positionText(Bt,Nr,pr),"end"===er&&Bt.selectAll("tspan").each(function(){var Hr=d.select(this),an=p.tester.append("text").text(Hr.text()).call(p.font,ht),fn=z(Q,an.node());Math.round(fn.width)<Math.round(Zt.width)&&Hr.attr("x",Nr-fn.width),an.remove()})}else o.positionText(Bt,cr*(L+T),pr),xr=null;var kr=j._topclips.selectAll("#"+br).data(xr?[0]:[]);kr.enter().append("clipPath").attr("id",br).append("path"),kr.exit().remove(),kr.select("path").attr("d",xr),p.setClipUrl(Bt,xr?br:null,Q)}$e.attr("transform",e(Mt,Nt))}),h.isUnifiedHover(J)){ie.selectAll("g.hovertext").remove();var He=N.filter(function($e){return"none"!==$e.hoverinfo});if(0===He.length)return;var Xe=j.hoverlabel,Je=Xe.font,pt={font:Je};f({showlegend:!0,legend:{title:{text:Le,font:Je},font:Je,bgcolor:Xe.bgcolor,bordercolor:Xe.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:j.legend?j.legend.traceorder:void 0,orientation:"v"}},pt,Q._fullData);var xt=pt.legend;xt.entries=[];for(var Ft=0;Ft<He.length;Ft++){var Dt=He[Ft];if("none"!==Dt.hoverinfo){var ot=R(Dt,!0,J,j,Le),it=ot[0],Et=ot[1];Dt.name=Et,Dt.text=""!==Et?Et+" : "+it:it;var Xt=Dt.cd[Dt.index];Xt&&(Xt.mc&&(Dt.mc=Xt.mc),Xt.mcc&&(Dt.mc=Xt.mcc),Xt.mlc&&(Dt.mlc=Xt.mlc),Xt.mlcc&&(Dt.mlc=Xt.mlcc),Xt.mlw&&(Dt.mlw=Xt.mlw),Xt.mrc&&(Dt.mrc=Xt.mrc),Xt.dir&&(Dt.dir=Xt.dir)),Dt._distinct=!0,xt.entries.push([Dt])}}xt.entries.sort(function($e,yt){return $e[0].trace.index-yt[0].trace.index}),xt.layer=ie,xt._inHover=!0,xt._groupTitleFont=Xe.grouptitlefont,l(Q,xt);var nr,Ue,We,Be,Qe=ie.select("g.legend"),Ae=z(Q,Qe.node()),De=Ae.width+2*L,Oe=Ae.height+2*L,Ie=He[0],et=(Ie.x0+Ie.x1)/2,ct=(Ie.y0+Ie.y1)/2,vt=!(u.traceIs(Ie.trace,"bar-like")||u.traceIs(Ie.trace,"box-violin"));"y"===we?vt?(Ue=ct-L,nr=ct+L):(Ue=Math.min.apply(null,He.map(function($e){return Math.min($e.y0,$e.y1)})),nr=Math.max.apply(null,He.map(function($e){return Math.max($e.y0,$e.y1)}))):Ue=nr=t.mean(He.map(function($e){return($e.y0+$e.y1)/2}))-Oe/2,"x"===we?vt?(We=et+L,Be=et-L):(We=Math.max.apply(null,He.map(function($e){return Math.max($e.x0,$e.x1)})),Be=Math.min.apply(null,He.map(function($e){return Math.min($e.x0,$e.x1)}))):We=Be=t.mean(He.map(function($e){return($e.x0+$e.x1)/2}))-De/2;var ft,It,ut=be._offset,Ot=Te._offset;return Be+=ut-De,Ue+=Ot-Oe,ft=(We+=ut)+De<Me&&We>=0?We:Be+De<Me&&Be>=0?Be:ut+De<Me?ut:We-et<et-Be+De?Me-De:0,It=(nr+=Ot)+Oe<ke&&nr>=0?nr:Ue+Oe<ke&&Ue>=0?Ue:Ot+Oe<ke?Ot:nr-ct<ct-Ue+Oe?ke-Oe:0,Qe.attr("transform",e((ft+=L)-1,(It+=L)-1)),Qe}var Rt=ie.selectAll("g.hovertext").data(N,function($e){return D($e)});return Rt.enter().append("g").classed("hovertext",!0).each(function(){var $e=d.select(this);$e.append("rect").call(s.fill,s.addOpacity(re,.8)),$e.append("text").classed("name",!0),$e.append("path").style("stroke-width","1px"),$e.append("text").classed("nums",!0).call(p.font,de,ue)}),Rt.exit().remove(),Rt.each(function($e){var yt=d.select(this).attr("transform",""),Bt=$e.color;Array.isArray(Bt)&&(Bt=Bt[$e.eventData[0].pointNumber]);var Ut=$e.bgcolor||Bt,Qt=s.combine(s.opacity(Ut)?Ut:s.defaultLine,re),Re=s.combine(s.opacity(Bt)?Bt:s.defaultLine,re),ht=$e.borderColor||s.contrast(Qt),Mt=R($e,Ce,J,j,Le,yt),Nt=Mt[0],Zt=Mt[1],or=yt.select("text.nums").call(p.font,$e.fontFamily||de,$e.fontSize||ue,$e.fontColor||ht).text(Nt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,Q),Wt=yt.select("text.name"),er=0,cr=0;if(Zt&&Zt!==Nt){Wt.call(p.font,$e.fontFamily||de,$e.fontSize||ue,Re).text(Zt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,Q);var _r=z(Q,Wt.node());er=_r.width+2*L,cr=_r.height+2*L}else Wt.remove(),yt.select("rect").remove();yt.select("path").style({fill:Qt,stroke:ht});var xr=$e.xa._offset+($e.x0+$e.x1)/2,dr=$e.ya._offset+($e.y0+$e.y1)/2,pr=Math.abs($e.x1-$e.x0),br=Math.abs($e.y1-$e.y0),Nr=z(Q,or.node()),kr=Nr.width/j._invScaleX,Hr=Nr.height/j._invScaleY;$e.ty0=(ve-Nr.top)/j._invScaleY,$e.bx=kr+2*L,$e.by=Math.max(Hr+2*L,cr),$e.anchor="start",$e.txwidth=kr,$e.tx2width=er,$e.offset=0;var an,fn,zn=(kr+T+L+er)*j._invScaleX;if(K)$e.pos=xr,an=dr+br/2+zn<=ke,fn=dr-br/2-zn>=0,"top"!==$e.idealAlign&&an||!fn?an?(dr+=br/2,$e.anchor="start"):$e.anchor="middle":(dr-=br/2,$e.anchor="end");else if($e.pos=dr,an=xr+pr/2+zn<=Me,fn=xr-pr/2-zn>=0,"left"!==$e.idealAlign&&an||!fn)if(an)xr+=pr/2,$e.anchor="start";else{$e.anchor="middle";var Nn=zn/2,In=xr+Nn-Me,cn=xr-Nn;In>0&&(xr-=In),cn<0&&(xr+=-cn)}else xr-=pr/2,$e.anchor="end";or.attr("text-anchor",$e.anchor),er&&Wt.attr("text-anchor",$e.anchor),yt.attr("transform",e(xr,dr)+(K?i(x):""))}),Rt}function R(N,V,Q,j,J,K){var re="",ie="";void 0!==N.nameOverride&&(N.name=N.nameOverride),N.name&&(N.trace._meta&&(N.name=t.templateString(N.name,N.trace._meta)),re=Z(N.name,N.nameLength));var ce=Q.charAt(0);void 0!==N.zLabel?(void 0!==N.xLabel&&(ie+="x: "+N.xLabel+"<br>"),void 0!==N.yLabel&&(ie+="y: "+N.yLabel+"<br>"),"choropleth"!==N.trace.type&&"choroplethmapbox"!==N.trace.type&&(ie+=(ie?"z: ":"")+N.zLabel)):V&&N[ce+"Label"]===J?ie=N[("x"===ce?"y":"x")+"Label"]||"":void 0===N.xLabel?void 0!==N.yLabel&&"scattercarpet"!==N.trace.type&&(ie=N.yLabel):ie=void 0===N.yLabel?N.xLabel:"("+N.xLabel+", "+N.yLabel+")",!N.text&&0!==N.text||Array.isArray(N.text)||(ie+=(ie?"<br>":"")+N.text),void 0!==N.extraText&&(ie+=(ie?"<br>":"")+N.extraText),K&&""===ie&&!N.hovertemplate&&(""===re&&K.remove(),ie=re);var de=N.hovertemplate||!1;if(de){var ue=N.hovertemplateLabels||N;N[ce+"Label"]!==J&&(ue[ce+"other"]=ue[ce+"Val"],ue[ce+"otherLabel"]=ue[ce+"Label"]),ie=(ie=t.hovertemplateString(de,ue,j._d3locale,N.eventData[0]||{},N.trace._meta)).replace(S,function(ge,be){return re=Z(be,N.nameLength),""})}return[ie,re]}function F(N,V,Q,j){var J=function(re){return re*Q},K=function(re){return re*j};N.each(function(re){var ie=d.select(this);if(re.del)return ie.remove();var ce=ie.select("text.nums"),se=re.anchor,de="end"===se?-1:1,ue={start:1,end:-1,middle:0}[se],ge=ue*(T+L),be=ge+ue*(re.txwidth+L),Te=0,we=re.offset,Le="middle"===se;Le&&(ge-=re.tx2width/2,be+=re.txwidth/2+L),V&&(we*=-k,Te=re.offset*b),ie.select("path").attr("d",Le?"M-"+J(re.bx/2+re.tx2width/2)+","+K(we-re.by/2)+"h"+J(re.bx)+"v"+K(re.by)+"h-"+J(re.bx)+"Z":"M0,0L"+J(de*T+Te)+","+K(T+we)+"v"+K(re.by/2-T)+"h"+J(de*re.bx)+"v-"+K(re.by)+"H"+J(de*T+Te)+"V"+K(we-T)+"Z");var fe=Te+ge,ve=we+re.ty0-re.by/2+L,Me=re.textAlign||"auto";"auto"!==Me&&("left"===Me&&"start"!==se?(ce.attr("text-anchor","start"),fe=Le?-re.bx/2-re.tx2width/2+L:-re.bx-L):"right"===Me&&"end"!==se&&(ce.attr("text-anchor","end"),fe=Le?re.bx/2-re.tx2width/2-L:re.bx+L)),ce.call(o.positionText,J(fe),K(ve)),re.tx2width&&(ie.select("text.name").call(o.positionText,J(be+ue*L+Te),K(we+re.ty0-re.by/2+L)),ie.select("rect").call(p.setRect,J(be+(ue-1)*re.tx2width/2+Te),K(we-re.by/2-1),J(re.tx2width),K(re.by+2)))})}function H(N,V){var Q=N.index,j=N.trace||{},J=N.cd[0],K=N.cd[Q]||{};function re(ge){return ge||g(ge)&&0===ge}var ie=Array.isArray(Q)?function(ge,be){var Te=t.castOption(J,Q,ge);return re(Te)?Te:t.extractOption({},j,"",be)}:function(ge,be){return t.extractOption(K,j,ge,be)};function ce(ge,be,Te){var we=ie(be,Te);re(we)&&(N[ge]=we)}if(ce("hoverinfo","hi","hoverinfo"),ce("bgcolor","hbg","hoverlabel.bgcolor"),ce("borderColor","hbc","hoverlabel.bordercolor"),ce("fontFamily","htf","hoverlabel.font.family"),ce("fontSize","hts","hoverlabel.font.size"),ce("fontColor","htc","hoverlabel.font.color"),ce("nameLength","hnl","hoverlabel.namelength"),ce("textAlign","hta","hoverlabel.align"),N.posref="y"===V||"closest"===V&&"h"===j.orientation?N.xa._offset+(N.x0+N.x1)/2:N.ya._offset+(N.y0+N.y1)/2,N.x0=t.constrain(N.x0,0,N.xa._length),N.x1=t.constrain(N.x1,0,N.xa._length),N.y0=t.constrain(N.y0,0,N.ya._length),N.y1=t.constrain(N.y1,0,N.ya._length),void 0!==N.xLabelVal&&(N.xLabel="xLabel"in N?N.xLabel:c.hoverLabelText(N.xa,N.xLabelVal,j.xhoverformat),N.xVal=N.xa.c2d(N.xLabelVal)),void 0!==N.yLabelVal&&(N.yLabel="yLabel"in N?N.yLabel:c.hoverLabelText(N.ya,N.yLabelVal,j.yhoverformat),N.yVal=N.ya.c2d(N.yLabelVal)),void 0!==N.zLabelVal&&void 0===N.zLabel&&(N.zLabel=String(N.zLabelVal)),!(isNaN(N.xerr)||"log"===N.xa.type&&N.xerr<=0)){var se=c.tickText(N.xa,N.xa.c2l(N.xerr),"hover").text;N.xLabel+=void 0!==N.xerrneg?" +"+se+" / -"+c.tickText(N.xa,N.xa.c2l(N.xerrneg),"hover").text:" \xb1 "+se,"x"===V&&(N.distance+=1)}if(!(isNaN(N.yerr)||"log"===N.ya.type&&N.yerr<=0)){var de=c.tickText(N.ya,N.ya.c2l(N.yerr),"hover").text;N.yLabel+=void 0!==N.yerrneg?" +"+de+" / -"+c.tickText(N.ya,N.ya.c2l(N.yerrneg),"hover").text:" \xb1 "+de,"y"===V&&(N.distance+=1)}var ue=N.hoverinfo||N.trace.hoverinfo;return ue&&"all"!==ue&&(-1===(ue=Array.isArray(ue)?ue:ue.split("+")).indexOf("x")&&(N.xLabel=void 0),-1===ue.indexOf("y")&&(N.yLabel=void 0),-1===ue.indexOf("z")&&(N.zLabel=void 0),-1===ue.indexOf("text")&&(N.text=void 0),-1===ue.indexOf("name")&&(N.name=void 0)),N}function U(N,V,Q){var j,J,K=Q.container,re=Q.fullLayout,ie=re._size,ce=Q.event,se=!!V.hLinePoint,de=!!V.vLinePoint;if(K.selectAll(".spikeline").remove(),de||se){var ue=s.combine(re.plot_bgcolor,re.paper_bgcolor);if(se){var ge,be,Te=V.hLinePoint;j=Te&&Te.xa,"cursor"===(J=Te&&Te.ya).spikesnap?(ge=ce.pointerX,be=ce.pointerY):(ge=j._offset+Te.x,be=J._offset+Te.y);var we,Le,fe=_.readability(Te.color,ue)<1.5?s.contrast(ue):Te.color,ve=J.spikemode,Me=J.spikethickness,ke=J.spikecolor||fe,Ce=c.getPxPosition(N,J);if(-1!==ve.indexOf("toaxis")||-1!==ve.indexOf("across")){if(-1!==ve.indexOf("toaxis")&&(we=Ce,Le=ge),-1!==ve.indexOf("across")){var Pe=J._counterDomainMin,Fe=J._counterDomainMax;"free"===J.anchor&&(Pe=Math.min(Pe,J.position),Fe=Math.max(Fe,J.position)),we=ie.l+Pe*ie.w,Le=ie.l+Fe*ie.w}K.insert("line",":first-child").attr({x1:we,x2:Le,y1:be,y2:be,"stroke-width":Me,stroke:ke,"stroke-dasharray":p.dashStyle(J.spikedash,Me)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:we,x2:Le,y1:be,y2:be,"stroke-width":Me+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}-1!==ve.indexOf("marker")&&K.insert("circle",":first-child").attr({cx:Ce+("right"!==J.side?Me:-Me),cy:be,r:Me,fill:ke}).classed("spikeline",!0)}if(de){var qe,rt,ze=V.vLinePoint;J=ze&&ze.ya,"cursor"===(j=ze&&ze.xa).spikesnap?(qe=ce.pointerX,rt=ce.pointerY):(qe=j._offset+ze.x,rt=J._offset+ze.y);var He,Xe,Je=_.readability(ze.color,ue)<1.5?s.contrast(ue):ze.color,at=j.spikemode,pt=j.spikethickness,xt=j.spikecolor||Je,Ft=c.getPxPosition(N,j);if(-1!==at.indexOf("toaxis")||-1!==at.indexOf("across")){if(-1!==at.indexOf("toaxis")&&(He=Ft,Xe=rt),-1!==at.indexOf("across")){var Dt=j._counterDomainMin,ot=j._counterDomainMax;"free"===j.anchor&&(Dt=Math.min(Dt,j.position),ot=Math.max(ot,j.position)),He=ie.t+(1-ot)*ie.h,Xe=ie.t+(1-Dt)*ie.h}K.insert("line",":first-child").attr({x1:qe,x2:qe,y1:He,y2:Xe,"stroke-width":pt,stroke:xt,"stroke-dasharray":p.dashStyle(j.spikedash,pt)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:qe,x2:qe,y1:He,y2:Xe,"stroke-width":pt+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}-1!==at.indexOf("marker")&&K.insert("circle",":first-child").attr({cx:qe,cy:Ft-("top"!==j.side?pt:-pt),r:pt,fill:xt}).classed("spikeline",!0)}}}function X(N,V){return!V||V.vLinePoint!==N._spikepoints.vLinePoint||V.hLinePoint!==N._spikepoints.hLinePoint}function Z(N,V){return o.plainText(N||"",{len:V,allowedTags:["br","sub","sup","b","i","em"]})}function Y(N,V,Q){var j=V[N+"a"],J=V[N+"Val"],K=V.cd[0];if("category"===j.type)J=j._categoriesMap[J];else if("date"===j.type){var re=V.trace[N+"periodalignment"];if(re){var ie=V.cd[V.index],ce=ie[N+"Start"];void 0===ce&&(ce=ie[N]);var se=ie[N+"End"];void 0===se&&(se=ie[N]);var de=se-ce;"end"===re?J+=de:"middle"===re&&(J+=de/2)}J=j.d2c(J)}return K&&K.t&&K.t.posLetter===j._id&&("group"!==Q.boxmode&&"group"!==Q.violinmode||(J+=K.t.dPos)),J}function W(N){return N.offsetTop+N.clientTop}function te(N){return N.offsetLeft+N.clientLeft}function z(N,V){var Q=N._fullLayout,j=V.getBoundingClientRect(),J=j.x,K=j.y,re=J+j.width,ie=K+j.height,ce=t.apply3DTransform(Q._invTransform)(J,K),se=t.apply3DTransform(Q._invTransform)(re,ie),de=ce[0],ue=ce[1],ge=se[0],be=se[1];return{x:de,y:ue,width:ge-de,height:be-ue,top:Math.min(ue,be),left:Math.min(de,ge),right:Math.max(de,ge),bottom:Math.max(ue,be)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../color"),_=y("./helpers").isUnifiedHover;$.exports=function(t,e,i,r){r=r||{};var o=e.legend;function n(p){r.font[p]||(r.font[p]=o?e.legend.font[p]:e.font[p])}e&&_(e.hovermode)&&(r.font||(r.font={}),n("size"),n("family"),n("color"),o?(r.bgcolor||(r.bgcolor=g.combine(e.legend.bgcolor,e.paper_bgcolor)),r.bordercolor||(r.bordercolor=e.legend.bordercolor)):r.bgcolor||(r.bgcolor=e.paper_bgcolor)),i("hoverlabel.bgcolor",r.bgcolor),i("hoverlabel.bordercolor",r.bordercolor),i("hoverlabel.namelength",r.namelength),d.coerceFont(i,"hoverlabel.font",r.font),i("hoverlabel.align",r.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t){function e(i,r){return void 0!==t[i]?t[i]:d.coerce(_,t,g,i,r)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../dragelement"),t=y("./helpers"),e=y("./layout_attributes"),i=y("./hover");$.exports={moduleType:"component",name:"fx",constants:y("./constants"),schema:{layout:e},attributes:y("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:y("./layout_global_defaults"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),getDistanceFunction:t.getDistanceFunction,getClosest:t.getClosest,inbox:t.inbox,quadrature:t.quadrature,appendArrayPointValue:t.appendArrayPointValue,castHoverOption:function(r,o,n){return g.castOption(r,o,"hoverlabel."+n)},castHoverinfo:function(r,o,n){return g.castOption(r,n,"hoverinfo",function(p){return g.coerceHoverinfo({hoverinfo:p},{_module:r._module},o)})},hover:i.hover,unhover:_.unhover,loneHover:i.loneHover,loneUnhover:function(r){var o=g.isD3Selection(r)?r:d.select(r);o.selectAll("g.hovertext").remove(),o.selectAll(".spikeline").remove()},click:y("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(y,$,ee){"use strict";var d=y("./constants"),g=y("../../plots/font_attributes"),_=g({editType:"none"});_.family.dflt=d.HOVERFONT,_.size.dflt=d.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:_,grouptitlefont:g({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes"),_=y("./hovermode_defaults"),t=y("./hoverlabel_defaults");$.exports=function(e,i){function r(s,a){return d.coerce(e,i,g,s,a)}_(e,i)&&(r("hoverdistance"),r("spikedistance")),"select"===r("dragmode")&&r("selectdirection");var o=i._has("mapbox"),n=i._has("geo"),p=i._basePlotModules.length;"zoom"===i.dragmode&&((o||n)&&1===p||o&&n&&2===p)&&(i.dragmode="pan"),t(e,i,r),d.coerceFont(r,"hoverlabel.grouptitlefont",i.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./hoverlabel_defaults"),_=y("./layout_attributes");$.exports=function(t,e){g(t,e,function(i,r){return d.coerce(t,e,_,i,r)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../lib/regex").counter,_=y("../../plots/domain").attributes,t=y("../../plots/cartesian/constants").idRegex,e=y("../../plot_api/plot_template"),i={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[g("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[t.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[t.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:_({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function r(p,s,a){var c=s[a+"axes"],u=Object.keys((p._splomAxes||{})[a]||{});return Array.isArray(c)?c:u.length?u:void 0}function o(p,s,a,c,u,h){var v=s(p+"gap",a),f=s("domain."+p);s(p+"side",c);for(var l=new Array(u),x=f[0],m=(f[1]-x)/(u-v),w=m*(1-v),b=0;b<u;b++){var k=x+m*b;l[h?u-1-b:b]=[k,k+w]}return l}function n(p,s,a,c,u){var h,v=new Array(a);function f(l,x){-1!==s.indexOf(x)&&void 0===c[x]?(v[l]=x,c[x]=l):v[l]=""}if(Array.isArray(p))for(h=0;h<a;h++)f(h,p[h]);else for(f(0,u),h=1;h<a;h++)f(h,u+(h+1));return v}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:i}},layoutAttributes:i,sizeDefaults:function(p,s){var a=p.grid||{},c=r(s,a,"x"),u=r(s,a,"y");if(p.grid||c||u){var h,v,f=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),l=Array.isArray(c),x=Array.isArray(u),m=l&&c!==a.xaxes&&x&&u!==a.yaxes;f?(h=a.subplots.length,v=a.subplots[0].length):(x&&(h=u.length),l&&(v=c.length));var w=e.newContainer(s,"grid"),b=S("rows",h),k=S("columns",v);if(b*k>1){!f&&!l&&!x&&"independent"===S("pattern")&&(f=!0),w._hasSubplotGrid=f;var T,L,A="top to bottom"===S("roworder"),D=f?.3:.1;m&&s._splomGridDflt&&(T=s._splomGridDflt.xside,L=s._splomGridDflt.yside),w._domains={x:o("x",S,f?.2:.1,T,k),y:o("y",S,D,L,b,A)}}else delete s.grid}function S(C,R){return d.coerce(a,w,i,C,R)}},contentDefaults:function(p,s){var a=s.grid;if(a&&a._domains){var c,u,h,v,f,l,x,m=p.grid||{},w=s._subplots,b=a._hasSubplotGrid,k=a.rows,T=a.columns,L="independent"===a.pattern,A=a._axisMap={};if(b){var I=m.subplots||[];l=a.subplots=new Array(k);var D=1;for(c=0;c<k;c++){var S=l[c]=new Array(T),C=I[c]||[];for(u=0;u<T;u++)if(L?(f=1===D?"xy":"x"+D+"y"+D,D++):f=C[u],S[u]="",-1!==w.cartesian.indexOf(f)){if(x=f.indexOf("y"),h=f.slice(0,x),v=f.slice(x),void 0!==A[h]&&A[h]!==u||void 0!==A[v]&&A[v]!==c)continue;S[u]=f,A[h]=u,A[v]=c}}}else{var R=r(s,m,"x"),F=r(s,m,"y");a.xaxes=n(R,w.xaxis,T,A,"x"),a.yaxes=n(F,w.yaxis,k,A,"y")}var H=a._anchors={},U="top to bottom"===a.roworder;for(var X in A){var Z,Y,W,te=X.charAt(0),z=a[te+"side"];if(z.length<8)H[X]="free";else if("x"===te){if("t"===z.charAt(0)===U?(Z=0,Y=1,W=k):(Z=k-1,Y=-1,W=-1),b){var N=A[X];for(c=Z;c!==W;c+=Y)if((f=l[c][N])&&(x=f.indexOf("y"),f.slice(0,x)===X)){H[X]=f.slice(x);break}}else for(c=Z;c!==W;c+=Y)if(-1!==w.cartesian.indexOf(X+(v=a.yaxes[c]))){H[X]=v;break}}else if("l"===z.charAt(0)?(Z=0,Y=1,W=T):(Z=T-1,Y=-1,W=-1),b){var V=A[X];for(c=Z;c!==W;c+=Y)if((f=l[V][c])&&(x=f.indexOf("y"),f.slice(x)===X)){H[X]=f.slice(0,x);break}}else for(c=Z;c!==W;c+=Y)if(-1!==w.cartesian.indexOf((h=a.xaxes[c])+X)){H[X]=h;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/constants"),g=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),$.exports=g("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib/to_log_range");$.exports=function(_,t,e,i){t=t||{};var r="log"===e&&"linear"===t.type;if(r||"linear"===e&&"log"===t.type)for(var n,p,s=_._fullLayout.images,a=t._id.charAt(0),c=0;c<s.length;c++)if(p="images["+c+"].",(n=s[c])[a+"ref"]===t._id){var u=n[a],h=n["size"+a],v=null,f=null;if(r){v=g(u,t.range);var l=h/Math.pow(10,v)/2;f=2*Math.log(l+Math.sqrt(1+l*l))/Math.LN10}else f=(v=Math.pow(10,u))*(Math.pow(10,h/2)-Math.pow(10,-h/2));d(v)?d(f)||(f=null):(v=null,f=null),i(p+a,v),i(p+"size"+a,f)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../../plots/array_container_defaults"),t=y("./attributes");function e(i,r,o){function n(v,f){return d.coerce(i,r,t,v,f)}var p=n("source");if(!n("visible",!!p))return r;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var s={_fullLayout:o},a=["x","y"],c=0;c<2;c++){var u=a[c],h=g.coerceRef(i,r,s,u,"paper",void 0);"paper"!==h&&g.getFromId(s,h)._imgIndices.push(r._index),g.coercePosition(r,s,n,h,u,0)}return r}$.exports=function(i,r){_(i,r,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../drawing"),_=y("../../plots/cartesian/axes"),t=y("../../plots/cartesian/axis_ids"),e=y("../../constants/xmlns_namespaces");$.exports=function(i){var r,o,n=i._fullLayout,p=[],s={},a=[];for(o=0;o<n.images.length;o++){var c=n.images[o];if(c.visible)if("below"===c.layer&&"paper"!==c.xref&&"paper"!==c.yref){r=t.ref2id(c.xref)+t.ref2id(c.yref);var u=n._plots[r];if(!u){a.push(c);continue}u.mainplot&&(r=u.mainplot.id),s[r]||(s[r]=[]),s[r].push(c)}else"above"===c.layer?p.push(c):a.push(c)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},v={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function f(T){var L=d.select(this);if(this._imgSrc!==T.source)if(L.attr("xmlns",e.svg),T.source&&"data:"===T.source.slice(0,5))L.attr("xlink:href",T.source),this._imgSrc=T.source;else{var A=new Promise(function(I){var D=new Image;function S(){L.remove(),I()}this.img=D,D.setAttribute("crossOrigin","anonymous"),D.onerror=S,D.onload=function(){var C=document.createElement("canvas");C.width=this.width,C.height=this.height,C.getContext("2d").drawImage(this,0,0);var R=C.toDataURL("image/png");L.attr("xlink:href",R),I()},L.on("error",S),D.src=T.source,this._imgSrc=T.source}.bind(this));i._promises.push(A)}}function l(T){var L,A,I=d.select(this),D=_.getFromId(i,T.xref),S=_.getFromId(i,T.yref),C="domain"===_.getRefType(T.xref),R="domain"===_.getRefType(T.yref),F=n._size;L=void 0!==D?"string"==typeof T.xref&&C?D._length*T.sizex:Math.abs(D.l2p(T.sizex)-D.l2p(0)):T.sizex*F.w,A=void 0!==S?"string"==typeof T.yref&&R?S._length*T.sizey:Math.abs(S.l2p(T.sizey)-S.l2p(0)):T.sizey*F.h;var H,U,X=L*h[T.xanchor].offset,Z=A*v[T.yanchor].offset,Y=h[T.xanchor].sizing+v[T.yanchor].sizing;switch(H=void 0!==D?"string"==typeof T.xref&&C?D._length*T.x+D._offset:D.r2p(T.x)+D._offset:T.x*F.w+F.l,H+=X,U=void 0!==S?"string"==typeof T.yref&&R?S._length*(1-T.y)+S._offset:S.r2p(T.y)+S._offset:F.h-T.y*F.h+F.t,U+=Z,T.sizing){case"fill":Y+=" slice";break;case"stretch":Y="none"}I.attr({x:H,y:U,width:L,height:A,preserveAspectRatio:Y,opacity:T.opacity});var W=(D&&"domain"!==_.getRefType(T.xref)?D._id:"")+(S&&"domain"!==_.getRefType(T.yref)?S._id:"");g.setClipUrl(I,W?"clip"+n._uid+W:null,i)}var x=n._imageLowerLayer.selectAll("image").data(a),m=n._imageUpperLayer.selectAll("image").data(p);x.enter().append("image"),m.enter().append("image"),x.exit().remove(),m.exit().remove(),x.each(function(T){f.bind(this)(T),l.bind(this)(T)}),m.each(function(T){f.bind(this)(T),l.bind(this)(T)});var w=Object.keys(n._plots);for(o=0;o<w.length;o++){var b=n._plots[r=w[o]];if(b.imagelayer){var k=b.imagelayer.selectAll("image").data(s[r]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(T){f.bind(this)(T),l.bind(this)(T)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"images",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("images"),draw:y("./draw"),convertCoords:y("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("../color/attributes");$.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d({editType:"legend"}),grouptitlefont:d({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:d({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(y,$,ee){"use strict";$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../../plot_api/plot_template"),t=y("../../plots/attributes"),e=y("./attributes"),i=y("../../plots/layout_attributes"),r=y("./helpers");$.exports=function(o,n,p){var s,a=o.legend||{},c=_.newContainer(n,"legend");function u(S,C){return g.coerce(a,c,e,S,C)}for(var h=function(S,C){return g.coerce(s._input,s,t,S,C)},v=n.font||{},f=g.coerceFont(u,"grouptitlefont",g.extendFlat({},v,{size:Math.round(1.1*v.size)})),l=0,x=!1,m="normal",w=0;w<p.length;w++)(s=p[w]).visible&&((s.showlegend||s._dfltShowLegend&&!(s._module&&s._module.attributes&&s._module.attributes.showlegend&&!1===s._module.attributes.showlegend.dflt))&&(l++,s.showlegend&&(x=!0,(d.traceIs(s,"pie-like")||!0===s._input.showlegend)&&l++),g.coerceFont(h,"legendgrouptitle.font",f)),(d.traceIs(s,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(s.fill))&&(m=r.isGrouped({traceorder:m})?"grouped+reversed":"reversed"),void 0!==s.legendgroup&&""!==s.legendgroup&&(m=r.isReversed({traceorder:m})?"reversed+grouped":"grouped"));var b=g.coerce(o,n,i,"showlegend",x&&l>1);if(!1===b&&(n.legend=void 0),(!1!==b||a.uirevision)&&(u("uirevision",n.uirevision),!1!==b)){u("bgcolor",n.paper_bgcolor),u("bordercolor"),u("borderwidth");var k,T,L,A=g.coerceFont(u,"font",n.font),I="h"===u("orientation");if(I?(k=0,d.getComponentMethod("rangeslider","isVisible")(o.xaxis)?(T=1.1,L="bottom"):(T=-.1,L="top")):(k=1.02,T=1,L="auto"),u("traceorder",m),r.isGrouped(n.legend)&&u("tracegroupgap"),u("itemsizing"),u("itemwidth"),u("itemclick"),u("itemdoubleclick"),u("groupclick"),u("x",k),u("xanchor"),u("y",T),u("yanchor",L),u("valign"),g.noneOrAll(a,c,["x","y"]),u("title.text")){u("title.side",I?"left":"top");var D=g.extendFlat({},A,{size:g.bigFont(A.size)});g.coerceFont(u,"title.font",D)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../plots/plots"),t=y("../../registry"),e=y("../../lib/events"),i=y("../dragelement"),r=y("../drawing"),o=y("../color"),n=y("../../lib/svg_text_utils"),p=y("./handle_click"),s=y("./constants"),a=y("../../constants/alignment"),c=a.LINE_SPACING,u=a.FROM_TL,h=a.FROM_BR,v=y("./get_legend_data"),f=y("./style"),l=y("./helpers");function x(A,I,D,S,C){var R=D.data()[0][0].trace,F={event:C,node:D.node(),curveNumber:R.index,expandedIndex:R._expandedIndex,data:A.data,layout:A.layout,frames:A._transitionData._frames,config:A._context,fullData:A._fullData,fullLayout:A._fullLayout};R._group&&(F.group=R._group),t.traceIs(R,"pie-like")&&(F.label=D.datum()[0].label),!1!==e.triggerHandler(A,"plotly_legendclick",F)&&(1===S?I._clickTimeout=setTimeout(function(){A._fullLayout&&p(D,A,S)},A._context.doubleClickDelay):2===S&&(I._clickTimeout&&clearTimeout(I._clickTimeout),A._legendMouseDownTime=0,!1!==e.triggerHandler(A,"plotly_legenddoubleclick",F)&&p(D,A,S)))}function m(A,I,D){var S,C,R=A.data()[0][0],F=R.trace,H=t.traceIs(F,"pie-like"),U=!D._inHover&&I._context.edits.legendText&&!H,X=D._maxNameLength;R.groupTitle?(S=R.groupTitle.text,C=R.groupTitle.font):(C=D.font,D.entries?S=R.text:(S=H?R.label:F.name,F._meta&&(S=g.templateString(S,F._meta))));var Z=g.ensureSingle(A,"text","legendtext");Z.attr("text-anchor","start").call(r.font,C).text(U?w(S,X):S),n.positionText(Z,D.itemwidth+2*s.itemGap,0),U?Z.call(n.makeEditable,{gd:I,text:S}).call(k,A,I,D).on("edit",function(W){this.text(w(W,X)).call(k,A,I,D);var te=R.trace._fullInput||{},z={};if(t.hasTransform(te,"groupby")){var N=t.getTransformIndices(te,"groupby"),Q=g.keyedContainer(te,"transforms["+N[N.length-1]+"].styles","target","value.name");Q.set(R.trace._group,W),z=Q.constructUpdate()}else z.name=W;return t.call("_guiRestyle",I,z,F.index)}):k(Z,A,I,D)}function w(A,I){var D=Math.max(4,I);if(A&&A.trim().length>=D/2)return A;for(var S=D-(A=A||"").length;S>0;S--)A+=" ";return A}function b(A,I){var D,S=I._context.doubleClickDelay,C=1,R=g.ensureSingle(A,"rect","legendtoggle",function(F){I._context.staticPlot||F.style("cursor","pointer").attr("pointer-events","all"),F.call(o.fill,"rgba(0,0,0,0)")});I._context.staticPlot||(R.on("mousedown",function(){(D=(new Date).getTime())-I._legendMouseDownTime<S?C+=1:(C=1,I._legendMouseDownTime=D)}),R.on("mouseup",function(){if(!I._dragged&&!I._editing){var F=I._fullLayout.legend;(new Date).getTime()-I._legendMouseDownTime>S&&(C=Math.max(C-1,1)),x(I,F,A,C,d.event)}}))}function k(A,I,D,S,C){S._inHover&&A.attr("data-notex",!0),n.convertToTspans(A,D,function(){!function(R,F,H,U){var X=R.data()[0][0];if(H._inHover||!X||X.trace.showlegend){var Z=R.select("g[class*=math-group]"),Y=Z.node();H||(H=F._fullLayout.legend);var z,N,te=H.borderwidth,V=(1===U?H.title.font:X.groupTitle?X.groupTitle.font:H.font).size*c;if(Y){var Q=r.bBox(Y);z=Q.height,N=Q.width,1===U?r.setTranslate(Z,te,te+.75*z):r.setTranslate(Z,0,.25*z)}else{var j=R.select(1===U?".legendtitletext":".legendtext"),J=n.lineCount(j),K=j.node();if(z=V*J,N=K?r.bBox(K).width:0,1===U)"left"===H.title.side&&(N+=2*s.itemGap),n.positionText(j,te+s.titlePad,te+V);else{var re=2*s.itemGap+H.itemwidth;X.groupTitle&&(re=s.itemGap,N-=H.itemwidth),n.positionText(j,re,-V*((J-1)/2-.3))}}1===U?(H._titleWidth=N,H._titleHeight=z):(X.lineHeight=V,X.height=Math.max(z,16)+3,X.width=N)}else R.remove()}(I,D,S,C)})}function T(A){return g.isRightAnchor(A)?"right":g.isCenterAnchor(A)?"center":"left"}function L(A){return g.isBottomAnchor(A)?"bottom":g.isMiddleAnchor(A)?"middle":"top"}$.exports=function(A,I){return I||(I=A._fullLayout.legend||{}),function(D,S){var C,R,F=D._fullLayout,H="legend"+F._uid,U=S._inHover;if(U?(C=S.layer,H+="-hover"):C=F._infolayer,C){if(D._legendMouseDownTime||(D._legendMouseDownTime=0),U){if(!S.entries)return;R=v(S.entries,S)}else{if(!D.calcdata)return;R=F.showlegend&&v(D.calcdata,S)}var X=F.hiddenlabels||[];if(!(U||F.showlegend&&R.length))return C.selectAll(".legend").remove(),F._topdefs.select("#"+H).remove(),_.autoMargin(D,"legend");var Z=g.ensureSingle(C,"g","legend",function(J){U||J.attr("pointer-events","all")}),Y=g.ensureSingleById(F._topdefs,"clipPath",H,function(J){J.append("rect")}),W=g.ensureSingle(Z,"rect","bg",function(J){J.attr("shape-rendering","crispEdges")});W.call(o.stroke,S.bordercolor).call(o.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px");var te=g.ensureSingle(Z,"g","scrollbox"),z=S.title;if(S._titleWidth=0,S._titleHeight=0,z.text){var N=g.ensureSingle(te,"text","legendtitletext");N.attr("text-anchor","start").call(r.font,z.font).text(z.text),k(N,te,D,S,1)}else te.selectAll(".legendtitletext").remove();var V=g.ensureSingle(Z,"rect","scrollbar",function(J){J.attr(s.scrollBarEnterAttrs).call(o.fill,s.scrollBarColor)}),Q=te.selectAll("g.groups").data(R);Q.enter().append("g").attr("class","groups"),Q.exit().remove();var j=Q.selectAll("g.traces").data(g.identity);j.enter().append("g").attr("class","traces"),j.exit().remove(),j.style("opacity",function(J){var K=J[0].trace;return t.traceIs(K,"pie-like")?-1!==X.indexOf(J[0].label)?.5:1:"legendonly"===K.visible?.5:1}).each(function(){d.select(this).call(m,D,S)}).call(f,D,S).each(function(){U||d.select(this).call(b,D)}),g.syncOrAsync([_.previousPromises,function(){return function(J,K,re,ie){var ce=J._fullLayout;ie||(ie=ce.legend);var se=ce._size,de=l.isVertical(ie),ue=l.isGrouped(ie),ge=ie.borderwidth,be=2*ge,Te=s.itemGap,we=ie.itemwidth+2*Te,Le=2*(ge+Te),fe=L(ie),ve=ie.y<0||0===ie.y&&"top"===fe,Me=ie.y>1||1===ie.y&&"bottom"===fe,ke=ie.tracegroupgap;ie._maxHeight=Math.max(ve||Me?ce.height/2:se.h,30);var Ce=0;ie._width=0,ie._height=0;var Be,Qe,Ae,De,Pe=(Qe=0,Ae=0,(De=(Be=ie).title.side)&&(-1!==De.indexOf("left")&&(Qe=Be._titleWidth),-1!==De.indexOf("top")&&(Ae=Be._titleHeight)),[Qe,Ae]);if(de)re.each(function(Be){var Qe=Be[0].height;r.setTranslate(this,ge+Pe[0],ge+Pe[1]+ie._height+Qe/2+Te),ie._height+=Qe,ie._width=Math.max(ie._width,Be[0].width)}),Ce=we+ie._width,ie._width+=Te+we+be,ie._height+=Le,ue&&(K.each(function(Be,Qe){r.setTranslate(this,0,Qe*ie.tracegroupgap)}),ie._height+=(ie._lgroupsLength-1)*ie.tracegroupgap);else{var Fe=T(ie),ze=Me||ve,He=ce.width/2;ie._maxWidth=Math.max(ie.x<0||0===ie.x&&"right"===Fe?ze&&"left"===Fe?se.l+se.w:He:ie.x>1||1===ie.x&&"left"===Fe?ze&&"right"===Fe?se.r+se.w:He:se.w,2*we);var Xe=0,Je=0;re.each(function(Be){var Qe=Be[0].width+we;Xe=Math.max(Xe,Qe),Je+=Qe}),Ce=null;var at=0;if(ue){var pt=0,xt=0,Ft=0;K.each(function(){var Be=0,Qe=0;d.select(this).selectAll("g.traces").each(function(De){var Oe=De[0].width,Ie=De[0].height;r.setTranslate(this,Pe[0],Pe[1]+ge+Te+Ie/2+Qe),Qe+=Ie,Be=Math.max(Be,we+Oe)}),pt=Math.max(pt,Qe);var Ae=Be+Te;xt>0&&Ae+ge+xt>ie._maxWidth&&(at=Math.max(at,xt),xt=0,Ft+=pt+ke,pt=Qe),r.setTranslate(this,xt,Ft),xt+=Ae}),ie._width=Math.max(at,xt)+ge,ie._height=Ft+pt+Le}else{var Dt=re.size(),ot=Je+be+(Dt-1)*Te<ie._maxWidth,it=0,Et=0,Xt=0,nr=0;re.each(function(Be){var Qe=Be[0].height,Ae=we+Be[0].width,De=(ot?Ae:Xe)+Te;De+ge+Et-Te>=ie._maxWidth&&(at=Math.max(at,nr),Et=0,Xt+=it,ie._height+=it,it=0),r.setTranslate(this,Pe[0]+ge+Et,Pe[1]+ge+Xt+Qe/2+Te),nr=Et+Ae+Te,Et+=De,it=Math.max(it,Qe)}),ot?(ie._width=Et+be,ie._height=it+Le):(ie._width=Math.max(at,nr)+be,ie._height+=it+Le)}}ie._width=Math.ceil(Math.max(ie._width+Pe[0],ie._titleWidth+2*(ge+s.titlePad))),ie._height=Math.ceil(Math.max(ie._height+Pe[1],ie._titleHeight+2*(ge+s.itemGap))),ie._effHeight=Math.min(ie._height,ie._maxHeight);var Ue=J._context.edits,We=Ue.legendText||Ue.legendPosition;re.each(function(Be){var Qe=d.select(this).select(".legendtoggle"),Ae=Be[0].height,De=We?we:Ce||we+Be[0].width;de||(De+=Te/2),r.setRect(Qe,0,-Ae/2,De,Ae)})}(D,Q,j,S)},function(){var J,K,re,ie,ze,He,Xe,Je,ce=F._size,se=S.borderwidth;if(!U){if(Xe=T(He=(ze=D)._fullLayout.legend),Je=L(He),_.autoMargin(ze,"legend",{x:He.x,y:He.y,l:He._width*u[Xe],r:He._width*h[Xe],b:He._effHeight*h[Je],t:He._effHeight*u[Je]}))return;var de=ce.l+ce.w*S.x-u[T(S)]*S._width,ue=ce.t+ce.h*(1-S.y)-u[L(S)]*S._effHeight;if(F.margin.autoexpand){var ge=de,be=ue;de=g.constrain(de,0,F.width-S._width),ue=g.constrain(ue,0,F.height-S._effHeight),de!==ge&&g.log("Constrain legend.x to make legend fit inside graph"),ue!==be&&g.log("Constrain legend.y to make legend fit inside graph")}r.setTranslate(Z,de,ue)}if(V.on(".drag",null),Z.on("wheel",null),U||S._height<=S._maxHeight||D._context.staticPlot){var Te=S._effHeight;U&&(Te=S._height),W.attr({width:S._width-se,height:Te-se,x:se/2,y:se/2}),r.setTranslate(te,0,0),Y.select("rect").attr({width:S._width-2*se,height:Te-2*se,x:se,y:se}),r.setClipUrl(te,H,D),r.setRect(V,0,0,0,0),delete S._scrollY}else{var we,fe,ve=Math.max(s.scrollBarMinHeight,S._effHeight*S._effHeight/S._height),Me=S._effHeight-ve-2*s.scrollBarMargin,ke=S._height-S._effHeight,Ce=Me/ke,Pe=Math.min(S._scrollY||0,ke);W.attr({width:S._width-2*se+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-se,x:se/2,y:se/2}),Y.select("rect").attr({width:S._width-2*se+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-2*se,x:se,y:se+Pe}),r.setClipUrl(te,H,D),rt(Pe,ve,Ce),Z.on("wheel",function(){rt(Pe=g.constrain(S._scrollY+d.event.deltaY/Me*ke,0,ke),ve,Ce),0!==Pe&&Pe!==ke&&d.event.preventDefault()});var Fe=d.behavior.drag().on("dragstart",function(){var ze=d.event.sourceEvent;we="touchstart"===ze.type?ze.changedTouches[0].clientY:ze.clientY,fe=Pe}).on("drag",function(){var ze=d.event.sourceEvent;2===ze.buttons||ze.ctrlKey||rt(Pe=function(He,Xe,Je){return g.constrain((Je-Xe)/Ce+He,0,ke)}(fe,we,"touchmove"===ze.type?ze.changedTouches[0].clientY:ze.clientY),ve,Ce)});V.call(Fe);var qe=d.behavior.drag().on("dragstart",function(){var ze=d.event.sourceEvent;"touchstart"===ze.type&&(we=ze.changedTouches[0].clientY,fe=Pe)}).on("drag",function(){var ze=d.event.sourceEvent;"touchmove"===ze.type&&rt(Pe=function(He,Xe,Je){return g.constrain((Xe-Je)/Ce+He,0,ke)}(fe,we,ze.changedTouches[0].clientY),ve,Ce)});te.call(qe)}function rt(ze,He,Xe){S._scrollY=D._fullLayout.legend._scrollY=ze,r.setTranslate(te,0,-ze),r.setRect(V,S._width,s.scrollBarMargin+ze*Xe,s.scrollBarWidth,He),Y.select("rect").attr("y",se+ze)}D._context.edits.legendPosition&&(Z.classed("cursor-move",!0),i.init({element:Z.node(),gd:D,prepFn:function(){var ze=r.getTranslate(Z);re=ze.x,ie=ze.y},moveFn:function(ze,He){var Xe=re+ze,Je=ie+He;r.setTranslate(Z,Xe,Je),J=i.align(Xe,0,ce.l,ce.l+ce.w,S.xanchor),K=i.align(Je,0,ce.t+ce.h,ce.t,S.yanchor)},doneFn:function(){void 0!==J&&void 0!==K&&t.call("_guiRelayout",D,{"legend.x":J,"legend.y":K})},clickFn:function(ze,He){var Xe=C.selectAll("g.traces").filter(function(){var Je=this.getBoundingClientRect();return He.clientX>=Je.left&&He.clientX<=Je.right&&He.clientY>=Je.top&&He.clientY<=Je.bottom});Xe.size()>0&&x(D,Z,Xe,ze,He)}}))}],D)}}(A,I)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("./helpers");$.exports=function(_,t){var e,i,r=t._inHover,o=g.isGrouped(t),n=g.isReversed(t),p={},s=[],a=!1,c={},u=0,h=0;function v(F,H){if(""!==F&&g.isGrouped(t))-1===s.indexOf(F)?(s.push(F),a=!0,p[F]=[H]):p[F].push(H);else{var U="~~i"+u;s.push(U),p[U]=[H],u++}}for(e=0;e<_.length;e++){var f=_[e],l=f[0],x=l.trace,m=x.legendgroup;if(r||x.visible&&x.showlegend)if(d.traceIs(x,"pie-like"))for(c[m]||(c[m]={}),i=0;i<f.length;i++){var w=f[i].label;c[m][w]||(v(m,{label:w,color:f[i].color,i:f[i].i,trace:x,pts:f[i].pts}),c[m][w]=!0,h=Math.max(h,(w||"").length))}else v(m,l),h=Math.max(h,(x.name||"").length)}if(!s.length)return[];var b=!a||!o,k=[];for(e=0;e<s.length;e++){var T=p[s[e]];k.push(b?T[0]:T)}for(b&&(k=[k]),e=0;e<k.length;e++){var L=1/0;for(i=0;i<k[e].length;i++){var A=k[e][i].trace.legendrank;L>A&&(L=A)}k[e][0]._groupMinRank=L,k[e][0]._preGroupSort=e}var I=function(F,H){return F.trace.legendrank-H.trace.legendrank||F._preSort-H._preSort};for(k.forEach(function(F,H){F[0]._preGroupSort=H}),k.sort(function(F,H){return F[0]._groupMinRank-H[0]._groupMinRank||F[0]._preGroupSort-H[0]._preGroupSort}),e=0;e<k.length;e++){k[e].forEach(function(F,H){F._preSort=H}),k[e].sort(I);var D=k[e][0].trace,S=null;for(i=0;i<k[e].length;i++){var C=k[e][i].trace.legendgrouptitle;if(C&&C.text){S=C,r&&(C.font=t._groupTitleFont);break}}if(n&&k[e].reverse(),S){var R=!1;for(i=0;i<k[e].length;i++)if(d.traceIs(k[e][i].trace,"pie-like")){R=!0;break}k[e].unshift({i:-1,groupTitle:S,noClick:R,trace:{showlegend:D.showlegend,legendgroup:D.legendgroup,visible:"toggleitem"===t.groupclick||D.visible}})}for(i=0;i<k[e].length;i++)k[e][i]=[k[e][i]]}return t._lgroupsLength=k.length,t._maxNameLength=h,k}},{"../../registry":638,"./helpers":422}],421:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry"),_=!0;$.exports=function(t,e,i){var r=e._fullLayout;if(!e._dragged&&!e._editing){var o,n=r.legend.itemclick,p=r.legend.itemdoubleclick,s=r.legend.groupclick;if(1===i&&"toggle"===n&&"toggleothers"===p&&_&&e.data&&e._context.showTips&&d.notifier(d._(e,"Double-click on legend to isolate one trace"),"long"),_=!1,1===i?o=n:2===i&&(o=p),o){var a="togglegroup"===s,c=r.hiddenlabels?r.hiddenlabels.slice():[],u=t.data()[0][0];if(!u.groupTitle||!u.noClick){var h,v,f,l,x,m=e._fullData,w=u.trace,b=w.legendgroup,k={},T=[],L=[],A=[];if(g.traceIs(w,"pie-like")){var I=u.label,D=c.indexOf(I);"toggle"===o?-1===D?c.push(I):c.splice(D,1):"toggleothers"===o&&(c=[],e.calcdata[0].forEach(function(V){I!==V.label&&c.push(V.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===c.length&&-1===D&&(c=[])),g.call("_guiRelayout",e,"hiddenlabels",c)}else{var S,C=b&&b.length,R=[];if(C)for(h=0;h<m.length;h++)(S=m[h]).visible&&S.legendgroup===b&&R.push(h);if("toggle"===o){var F;switch(w.visible){case!0:F="legendonly";break;case!1:F=!1;break;case"legendonly":F=!0}if(C)if(a)for(h=0;h<m.length;h++)!1!==m[h].visible&&m[h].legendgroup===b&&N(m[h],F);else N(w,F);else N(w,F)}else if("toggleothers"===o){var X,Y=!0;for(h=0;h<m.length;h++)if(X=!0!==m[h].showlegend,!(m[h]===w||X||C&&m[h].legendgroup===b||!0!==m[h].visible||g.traceIs(m[h],"notLegendIsolatable"))){Y=!1;break}for(h=0;h<m.length;h++)if(!1!==m[h].visible&&!g.traceIs(m[h],"notLegendIsolatable"))switch(w.visible){case"legendonly":N(m[h],!0);break;case!0:X=!0!==m[h].showlegend&&!m[h].legendgroup,N(m[h],!!(m[h]===w||C&&m[h].legendgroup===b||X)||!!Y||"legendonly")}}for(h=0;h<L.length;h++)if(f=L[h]){var W=f.constructUpdate(),te=Object.keys(W);for(v=0;v<te.length;v++)(k[l=te[v]]=k[l]||[])[A[h]]=W[l]}for(x=Object.keys(k),h=0;h<x.length;h++)for(l=x[h],v=0;v<T.length;v++)k[l].hasOwnProperty(v)||(k[l][v]=void 0);g.call("_guiRestyle",e,k,T)}}}}function z(V,Q,j){var J=T.indexOf(V),K=k[Q];return K||(K=k[Q]=[]),-1===T.indexOf(V)&&(T.push(V),J=T.length-1),K[J]=j,J}function N(V,Q){if(!u.groupTitle||a){var j=V._fullInput;if(g.hasTransform(j,"groupby")){var J=L[j.index];if(!J){var K=g.getTransformIndices(j,"groupby");J=d.keyedContainer(j,"transforms["+K[K.length-1]+"].styles","target","value.visible"),L[j.index]=J}var ie=J.get(V._group);void 0===ie&&(ie=!0),!1!==ie&&J.set(V._group,Q),A[j.index]=z(j.index,"visible",!1!==j.visible)}else z(j.index,"visible",!1!==j.visible&&Q)}}}},{"../../lib":503,"../../registry":638}],422:[function(y,$,ee){"use strict";ee.isGrouped=function(d){return-1!==(d.traceorder||"").indexOf("grouped")},ee.isVertical=function(d){return"h"!==d.orientation},ee.isReversed=function(d){return-1!==(d.traceorder||"").indexOf("reversed")}},{}],423:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"legend",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),draw:y("./draw"),style:y("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../lib"),t=_.strTranslate,e=y("../drawing"),i=y("../color"),r=y("../colorscale/helpers").extractOpts,o=y("../../traces/scatter/subtypes"),n=y("../../traces/pie/style_one"),p=y("../../traces/pie/helpers").castOption,s=y("./constants");function a(h,v){return(v?"radial":"horizontal")+(h?"":"reversed")}function c(h){var v=h[0].trace,f=v.contours,l=o.hasLines(v),x=o.hasMarkers(v),m=v.visible&&v.fill&&"none"!==v.fill,w=!1,b=!1;if(f){var k=f.coloring;"lines"===k?w=!0:l="none"===k||"heatmap"===k||f.showlines,"constraint"===f.type?m="="!==f._operation:"fill"!==k&&"heatmap"!==k||(b=!0)}return{showMarker:x,showLine:l,showFill:m,showGradientLine:w,showGradientFill:b,anyLine:l||w,anyFill:m||b}}function u(h,v,f){return h&&_.isArrayOrTypedArray(h)?v:h>f?f:h}$.exports=function(h,v,f){f||(f=v._fullLayout.legend);var x="constant"===f.itemsizing,m=f.itemwidth,b=t((m+2*s.itemGap)/2,0),k=function(A,I,D,S){var C;if(A+1)C=A;else{if(!(I&&I.width>0))return 0;C=I.width}return x?S:Math.min(C,D)};function T(A,I,D){var S=A[0].trace,C=S.marker||{},R=C.line||{},F=D?S.visible&&S.type===D:g.traceIs(S,"bar"),H=d.select(I).select("g.legendpoints").selectAll("path.legend"+D).data(F?[A]:[]);H.enter().append("path").classed("legend"+D,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),H.exit().remove(),H.each(function(U){var X=d.select(this),Z=U[0],Y=k(Z.mlw,C.line,5,2);X.style("stroke-width",Y+"px");var W=Z.mcc;if(!f._inHover&&"mc"in Z){var te=r(C),z=te.mid;void 0===z&&(z=(te.max+te.min)/2),W=e.tryColorscale(C,"")(z)}var N=W||Z.mc||C.color,V=C.pattern,Q=V&&e.getPatternAttr(V.shape,0,"");if(Q){var j=e.getPatternAttr(V.bgcolor,0,null),J=e.getPatternAttr(V.fgcolor,0,null),K=V.fgopacity,re=u(V.size,8,10),ie=u(V.solidity,.5,1);X.call(e.pattern,"legend",v,"legend-"+S.uid,Q,re,ie,W,V.fillmode,j,J,K)}else X.call(i.fill,N);Y&&i.stroke(X,Z.mlc||R.color)})}function L(A,I,D){var S=A[0],C=S.trace,R=D?C.visible&&C.type===D:g.traceIs(C,D),F=d.select(I).select("g.legendpoints").selectAll("path.legend"+D).data(R?[A]:[]);if(F.enter().append("path").classed("legend"+D,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),F.exit().remove(),F.size()){var H=(C.marker||{}).line,U=k(p(H.width,S.pts),H,5,2),X=_.minExtend(C,{marker:{line:{width:U}}});X.marker.line.color=H.color;var Z=_.minExtend(S,{trace:X});n(F,Z,X)}}h.each(function(A){var I=d.select(this),D=_.ensureSingle(I,"g","layers");D.style("opacity",A[0].trace.opacity);var S=f.valign,C=A[0].lineHeight,R=A[0].height;D.attr("transform","middle"!==S&&C&&R?t(0,{top:1,bottom:-1}[S]*(.5*(C-R+3))):null),D.selectAll("g.legendfill").data([A]).enter().append("g").classed("legendfill",!0),D.selectAll("g.legendlines").data([A]).enter().append("g").classed("legendlines",!0);var H=D.selectAll("g.legendsymbols").data([A]);H.enter().append("g").classed("legendsymbols",!0),H.selectAll("g.legendpoints").data([A]).enter().append("g").classed("legendpoints",!0)}).each(function(A){var I,D=A[0].trace,S=[];if(D.visible)switch(D.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],I=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],I=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],I="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],I=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],I=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],I=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],I=!1}var C=d.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);C.enter().append("path").classed("legend3dandfriends",!0).attr("transform",b).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(R,F){var H,U=d.select(this),X=r(D),Z=X.colorscale,Y=X.reversescale;if(Z){if(!I){var W=Z.length;H=0===F?Z[Y?W-1:0][1]:1===F?Z[Y?0:W-1][1]:Z[Math.floor((W-1)/2)][1]}}else{var te=D.vertexcolor||D.facecolor||D.color;H=_.isArrayOrTypedArray(te)?te[F]||te[0]:te}U.attr("d",R[0]),H?U.call(i.fill,H):U.call(function(z){z.size()&&e.gradient(z,v,"legendfill-"+D.uid,a(Y,"radial"===I),Z,"fill")})})}).each(function(A){var I=A[0].trace,D="waterfall"===I.type;if(A[0]._distinct&&D){var S=A[0].trace[A[0].dir].marker;return A[0].mc=S.color,A[0].mlw=S.line.width,A[0].mlc=S.line.color,T(A,this,"waterfall")}var C=[];I.visible&&D&&(C=A[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var R=d.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(C);R.enter().append("path").classed("legendwaterfall",!0).attr("transform",b).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(F){var H=d.select(this),U=I[F[0]].marker,X=k(void 0,U.line,5,2);H.attr("d",F[1]).style("stroke-width",X+"px").call(i.fill,U.color),X&&H.call(i.stroke,U.line.color)})}).each(function(A){T(A,this,"funnel")}).each(function(A){T(A,this)}).each(function(A){var I=A[0].trace,D=d.select(this).select("g.legendpoints").selectAll("path.legendbox").data(I.visible&&g.traceIs(I,"box-violin")?[A]:[]);D.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),D.exit().remove(),D.each(function(){var S=d.select(this);if("all"!==I.boxpoints&&"all"!==I.points||0!==i.opacity(I.fillcolor)||0!==i.opacity((I.line||{}).color)){var C=k(void 0,I.line,5,2);S.style("stroke-width",C+"px").call(i.fill,I.fillcolor),C&&i.stroke(S,I.line.color)}else{var R=_.minExtend(I,{marker:{size:x?12:_.constrain(I.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});D.call(e.pointStyle,R,v)}})}).each(function(A){L(A,this,"funnelarea")}).each(function(A){L(A,this,"pie")}).each(function(A){var I,D,S=c(A),C=S.showFill,R=S.showLine,F=S.showGradientLine,H=S.showGradientFill,U=S.anyFill,X=S.anyLine,Z=A[0],Y=Z.trace,W=r(Y),te=W.colorscale,z=W.reversescale,N=o.hasMarkers(Y)||!U?"M5,0":X?"M5,-2":"M5,-3",V=d.select(this),Q=V.select(".legendfill").selectAll("path").data(C||H?[A]:[]);if(Q.enter().append("path").classed("js-fill",!0),Q.exit().remove(),Q.attr("d",N+"h"+m+"v6h-"+m+"z").call(C?e.fillGroupStyle:function(K){K.size()&&e.gradient(K,v,"legendfill-"+Y.uid,a(z),te,"fill")}),R||F){var j=k(void 0,Y.line,10,5);D=_.minExtend(Y,{line:{width:j}}),I=[_.minExtend(Z,{trace:D})]}var J=V.select(".legendlines").selectAll("path").data(R||F?[I]:[]);J.enter().append("path").classed("js-line",!0),J.exit().remove(),J.attr("d",N+(F?"l"+m+",0.0001":"h"+m)).call(R?e.lineGroupStyle:function(K){if(K.size()){var re="legendline-"+Y.uid;e.lineGroupStyle(K),e.gradient(K,v,re,a(z),te,"stroke")}})}).each(function(A){var I,D,S=c(A),F=S.showLine,H=S.showMarker,U=A[0],X=U.trace,Z=!H&&!S.anyLine&&!S.anyFill&&o.hasText(X);function Y(J,K,re,ie){var ce=_.nestedProperty(X,J).get(),se=_.isArrayOrTypedArray(ce)&&K?K(ce):ce;if(x&&se&&void 0!==ie&&(se=ie),re){if(se<re[0])return re[0];if(se>re[1])return re[1]}return se}function W(J){return U._distinct&&U.index&&J[U.index]?J[U.index]:J[0]}if(H||Z||F){var te={},z={};if(H){te.mc=Y("marker.color",W),te.mx=Y("marker.symbol",W),te.mo=Y("marker.opacity",_.mean,[.2,1]),te.mlc=Y("marker.line.color",W),te.mlw=Y("marker.line.width",_.mean,[0,5],2),z.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var N=Y("marker.size",_.mean,[2,16],12);te.ms=N,z.marker.size=N}F&&(z.line={width:Y("line.width",W,[0,10],5)}),Z&&(te.tx="Aa",te.tp=Y("textposition",W),te.ts=10,te.tc=Y("textfont.color",W),te.tf=Y("textfont.family",W)),I=[_.minExtend(U,te)],(D=_.minExtend(X,z)).selectedpoints=null,D.texttemplate=null}var V=d.select(this).select("g.legendpoints"),Q=V.selectAll("path.scatterpts").data(H?I:[]);Q.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",b),Q.exit().remove(),Q.call(e.pointStyle,D,v),H&&(I[0].mrc=3);var j=V.selectAll("g.pointtext").data(Z?I:[]);j.enter().append("g").classed("pointtext",!0).append("text").attr("transform",b),j.exit().remove(),j.selectAll("text").call(e.textPointStyle,D,v)}).each(function(A){var I=A[0].trace,D=d.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(I.visible&&"candlestick"===I.type?[A,A]:[]);D.enter().append("path").classed("legendcandle",!0).attr("d",function(S,C){return C?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",b).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(S,C){var R=d.select(this),F=I[C?"increasing":"decreasing"],H=k(void 0,F.line,5,2);R.style("stroke-width",H+"px").call(i.fill,F.fillcolor),H&&i.stroke(R,F.line.color)})}).each(function(A){var I=A[0].trace,D=d.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(I.visible&&"ohlc"===I.type?[A,A]:[]);D.enter().append("path").classed("legendohlc",!0).attr("d",function(S,C){return C?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",b).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(S,C){var R=d.select(this),F=I[C?"increasing":"decreasing"],H=k(void 0,F.line,5,2);R.style("fill","none").call(e.dashLine,F.line.dash,H),H&&i.stroke(R,F.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(y,$,ee){"use strict";y("./constants"),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../plots/plots"),_=y("../../plots/cartesian/axis_ids"),t=y("../../fonts/ploticon"),e=y("../shapes/draw").eraseActiveShape,i=y("../../lib"),r=i._,o=$.exports={};function n(l,x){var m,w,b=x.currentTarget,k=b.getAttribute("data-attr"),T=b.getAttribute("data-val")||!0,L=l._fullLayout,A={},I=_.list(l,null,!0),D=L._cartesianSpikesEnabled;if("zoom"===k){var S,C="in"===T?.5:2,R=(1+C)/2,F=(1-C)/2;for(w=0;w<I.length;w++)if(!(m=I[w]).fixedrange)if(S=m._name,"auto"===T)A[S+".autorange"]=!0;else if("reset"===T){if(void 0===m._rangeInitial)A[S+".autorange"]=!0;else{var H=m._rangeInitial.slice();A[S+".range[0]"]=H[0],A[S+".range[1]"]=H[1]}void 0!==m._showSpikeInitial&&(A[S+".showspikes"]=m._showSpikeInitial,"on"!==D||m._showSpikeInitial||(D="off"))}else{var U=[m.r2l(m.range[0]),m.r2l(m.range[1])],X=[R*U[0]+F*U[1],R*U[1]+F*U[0]];A[S+".range[0]"]=m.l2r(X[0]),A[S+".range[1]"]=m.l2r(X[1])}}else"hovermode"!==k||"x"!==T&&"y"!==T||b.setAttribute("data-val",T=L._isHoriz?"y":"x"),A[k]=T;L._cartesianSpikesEnabled=D,d.call("_guiRelayout",l,A)}function p(l,x){for(var m=x.currentTarget,w=m.getAttribute("data-attr"),b=m.getAttribute("data-val")||!0,k=l._fullLayout._subplots.gl3d||[],T={},L=w.split("."),A=0;A<k.length;A++)T[k[A]+"."+L[1]]=b;T.dragmode="pan"===b?b:"zoom",d.call("_guiRelayout",l,T)}function s(l,x){for(var m=x.currentTarget.getAttribute("data-attr"),w="resetLastSave"===m,b="resetDefault"===m,k=l._fullLayout,T=k._subplots.gl3d||[],L={},A=0;A<T.length;A++){var I,D=T[A],S=D+".camera",C=D+".aspectratio",R=D+".aspectmode",F=k[D]._scene;w?(L[S+".up"]=F.viewInitial.up,L[S+".eye"]=F.viewInitial.eye,L[S+".center"]=F.viewInitial.center,I=!0):b&&(L[S+".up"]=null,L[S+".eye"]=null,L[S+".center"]=null,I=!0),I&&(L[C+".x"]=F.viewInitial.aspectratio.x,L[C+".y"]=F.viewInitial.aspectratio.y,L[C+".z"]=F.viewInitial.aspectratio.z,L[R]=F.viewInitial.aspectmode)}d.call("_guiRelayout",l,L)}function a(l,x){var m=x.currentTarget,w=m._previousVal,b=l._fullLayout,k=b._subplots.gl3d||[],T=["xaxis","yaxis","zaxis"],L={},A={};if(w)A=w,m._previousVal=null;else{for(var I=0;I<k.length;I++){var D=k[I],S=b[D],C=D+".hovermode";L[C]=S.hovermode,A[C]=!1;for(var R=0;R<3;R++){var F=T[R],H=D+"."+F+".showspikes";A[H]=!1,L[H]=S[F].showspikes}}m._previousVal=L}return A}function c(l,x){for(var m=x.currentTarget,w=m.getAttribute("data-attr"),b=m.getAttribute("data-val")||!0,k=l._fullLayout,T=k._subplots.geo||[],L=0;L<T.length;L++){var A=T[L];if("zoom"===w){var D=k[A].projection.scale;d.call("_guiRelayout",l,A+".projection.scale","in"===b?2*D:.5*D)}}"reset"===w&&f(l,"geo")}function u(l){var x=l._fullLayout;return!x.hovermode&&(x._has("cartesian")?x._isHoriz?"y":"x":"closest")}function h(l){var x=u(l);d.call("_guiRelayout",l,"hovermode",x)}function v(l,x){for(var m=x.currentTarget.getAttribute("data-val"),w=l._fullLayout,b=w._subplots.mapbox||[],k={},T=0;T<b.length;T++){var L=b[T],A=w[L].zoom;k[L+".zoom"]="in"===m?1.05*A:A/1.05}d.call("_guiRelayout",l,k)}function f(l,x){for(var m=l._fullLayout,w=m._subplots[x]||[],b={},k=0;k<w.length;k++)for(var T=w[k],L=m[T]._subplot.viewInitial,A=Object.keys(L),I=0;I<A.length;I++){var D=A[I];b[T+"."+D]=L[D]}d.call("_guiRelayout",l,b)}o.toImage={name:"toImage",title:function(l){return r(l,"png"===((l._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:t.camera,click:function(l){var x=l._context.toImageButtonOptions,m={format:x.format||"png"};i.notifier(r(l,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==m.format&&i.isIE()&&(i.notifier(r(l,"IE only supports svg.  Changing format to svg."),"long"),m.format="svg"),["filename","width","height","scale"].forEach(function(w){w in x&&(m[w]=x[w])}),d.call("downloadImage",l,m).then(function(w){i.notifier(r(l,"Snapshot succeeded")+" - "+w,"long")}).catch(function(){i.notifier(r(l,"Sorry, there was a problem downloading your snapshot!"),"long")})}},o.sendDataToCloud={name:"sendDataToCloud",title:function(l){return r(l,"Edit in Chart Studio")},icon:t.disk,click:function(l){g.sendDataToCloud(l)}},o.editInChartStudio={name:"editInChartStudio",title:function(l){return r(l,"Edit in Chart Studio")},icon:t.pencil,click:function(l){g.sendDataToCloud(l)}},o.zoom2d={name:"zoom2d",_cat:"zoom",title:function(l){return r(l,"Zoom")},attr:"dragmode",val:"zoom",icon:t.zoombox,click:n},o.pan2d={name:"pan2d",_cat:"pan",title:function(l){return r(l,"Pan")},attr:"dragmode",val:"pan",icon:t.pan,click:n},o.select2d={name:"select2d",_cat:"select",title:function(l){return r(l,"Box Select")},attr:"dragmode",val:"select",icon:t.selectbox,click:n},o.lasso2d={name:"lasso2d",_cat:"lasso",title:function(l){return r(l,"Lasso Select")},attr:"dragmode",val:"lasso",icon:t.lasso,click:n},o.drawclosedpath={name:"drawclosedpath",title:function(l){return r(l,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:t.drawclosedpath,click:n},o.drawopenpath={name:"drawopenpath",title:function(l){return r(l,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:t.drawopenpath,click:n},o.drawline={name:"drawline",title:function(l){return r(l,"Draw line")},attr:"dragmode",val:"drawline",icon:t.drawline,click:n},o.drawrect={name:"drawrect",title:function(l){return r(l,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:t.drawrect,click:n},o.drawcircle={name:"drawcircle",title:function(l){return r(l,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:t.drawcircle,click:n},o.eraseshape={name:"eraseshape",title:function(l){return r(l,"Erase active shape")},icon:t.eraseshape,click:e},o.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(l){return r(l,"Zoom in")},attr:"zoom",val:"in",icon:t.zoom_plus,click:n},o.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(l){return r(l,"Zoom out")},attr:"zoom",val:"out",icon:t.zoom_minus,click:n},o.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(l){return r(l,"Autoscale")},attr:"zoom",val:"auto",icon:t.autoscale,click:n},o.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(l){return r(l,"Reset axes")},attr:"zoom",val:"reset",icon:t.home,click:n},o.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(l){return r(l,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:t.tooltip_basic,gravity:"ne",click:n},o.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(l){return r(l,"Compare data on hover")},attr:"hovermode",val:function(l){return l._fullLayout._isHoriz?"y":"x"},icon:t.tooltip_compare,gravity:"ne",click:n},o.zoom3d={name:"zoom3d",_cat:"zoom",title:function(l){return r(l,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:t.zoombox,click:p},o.pan3d={name:"pan3d",_cat:"pan",title:function(l){return r(l,"Pan")},attr:"scene.dragmode",val:"pan",icon:t.pan,click:p},o.orbitRotation={name:"orbitRotation",title:function(l){return r(l,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:t["3d_rotate"],click:p},o.tableRotation={name:"tableRotation",title:function(l){return r(l,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:t["z-axis"],click:p},o.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(l){return r(l,"Reset camera to default")},attr:"resetDefault",icon:t.home,click:s},o.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(l){return r(l,"Reset camera to last save")},attr:"resetLastSave",icon:t.movie,click:s},o.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(l){return r(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:t.tooltip_basic,gravity:"ne",click:function(l,x){var m=a(l,x);d.call("_guiRelayout",l,m)}},o.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(l){return r(l,"Zoom in")},attr:"zoom",val:"in",icon:t.zoom_plus,click:c},o.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(l){return r(l,"Zoom out")},attr:"zoom",val:"out",icon:t.zoom_minus,click:c},o.resetGeo={name:"resetGeo",_cat:"reset",title:function(l){return r(l,"Reset")},attr:"reset",val:null,icon:t.autoscale,click:c},o.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(l){return r(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:t.tooltip_basic,gravity:"ne",click:h},o.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(l){return r(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:t.tooltip_basic,gravity:"ne",click:h},o.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(l){return r(l,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:t.tooltip_basic,gravity:"ne",click:h},o.resetViewSankey={name:"resetSankeyGroup",title:function(l){return r(l,"Reset view")},icon:t.home,click:function(l){for(var x={"node.groups":[],"node.x":[],"node.y":[]},m=0;m<l._fullData.length;m++){var w=l._fullData[m]._viewInitial;x["node.groups"].push(w.node.groups.slice()),x["node.x"].push(w.node.x.slice()),x["node.y"].push(w.node.y.slice())}d.call("restyle",l,x)}},o.toggleHover={name:"toggleHover",title:function(l){return r(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:t.tooltip_basic,gravity:"ne",click:function(l,x){var m=a(l,x);m.hovermode=u(l),d.call("_guiRelayout",l,m)}},o.resetViews={name:"resetViews",title:function(l){return r(l,"Reset views")},icon:t.home,click:function(l,x){var m=x.currentTarget;m.setAttribute("data-attr","zoom"),m.setAttribute("data-val","reset"),n(l,x),m.setAttribute("data-attr","resetLastSave"),s(l,x),f(l,"geo"),f(l,"mapbox")}},o.toggleSpikelines={name:"toggleSpikelines",title:function(l){return r(l,"Toggle Spike Lines")},icon:t.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(l){var x=l._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on",d.call("_guiRelayout",l,function(w){for(var b="on"===w._fullLayout._cartesianSpikesEnabled,k=_.list(w,null,!0),T={},L=0;L<k.length;L++){var A=k[L];T[A._name+".showspikes"]=!!b||A._showSpikeInitial}return T}(l))}},o.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(l){return r(l,"Reset view")},attr:"reset",icon:t.home,click:function(l){f(l,"mapbox")}},o.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(l){return r(l,"Zoom in")},attr:"zoom",val:"in",icon:t.zoom_plus,click:v},o.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(l){return r(l,"Zoom out")},attr:"zoom",val:"out",icon:t.zoom_minus,click:v}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(y,$,ee){"use strict";var d=y("./buttons"),g=Object.keys(d),_=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],t=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(_),e=[];g.forEach(function(i){!function(r){if(-1===t.indexOf(r._cat||r.name)){var o=r.name,n=(r._cat||r.name).toLowerCase();-1===e.indexOf(o)&&e.push(o),-1===e.indexOf(n)&&e.push(n)}}(d[i])}),e.sort(),$.exports={DRAW_MODES:_,backButtons:t,foreButtons:e}},{"./buttons":426}],428:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../color"),_=y("../../plot_api/plot_template"),t=y("./attributes");$.exports=function(e,i){var r=e.modebar||{},o=_.newContainer(i,"modebar");function n(s,a){return d.coerce(r,o,t,s,a)}n("orientation"),n("bgcolor",g.addOpacity(i.paper_bgcolor,.5));var p=g.contrast(g.rgb(i.modebar.bgcolor));n("color",g.addOpacity(p,.3)),n("activecolor",g.addOpacity(p,.7)),n("uirevision",i.uirevision),n("add"),n("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"modebar",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),manage:y("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axis_ids"),g=y("../../traces/scatter/subtypes"),_=y("../../registry"),t=y("../fx/helpers").isUnifiedHover,e=y("./modebar"),i=y("./buttons"),r=y("./constants").DRAW_MODES;$.exports=function(o){var n=o._fullLayout,p=o._context,s=n._modeBar;if(p.displayModeBar||p.watermark){if(!Array.isArray(p.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(p.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a,c=p.modeBarButtons;a=Array.isArray(c)&&c.length?function(u){for(var h=0;h<u.length;h++)for(var v=u[h],f=0;f<v.length;f++){var l=v[f];if("string"==typeof l){if(void 0===i[l])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));u[h][f]=i[l]}}return u}(c):!p.displayModeBar&&p.watermark?[]:function(u){var h=u._fullLayout,v=u._fullData,f=u._context;function l(ie,ce){if("string"==typeof ce){if(ce.toLowerCase()===ie.toLowerCase())return!0}else if(ce.name===ie||(ce._cat||ce.name)===ie.toLowerCase())return!0;return!1}var x=h.modebar.add;"string"==typeof x&&(x=[x]);var m=h.modebar.remove;"string"==typeof m&&(m=[m]);var w=f.modeBarButtonsToAdd.concat(x.filter(function(ie){for(var ce=0;ce<f.modeBarButtonsToRemove.length;ce++)if(l(ie,f.modeBarButtonsToRemove[ce]))return!1;return!0})),b=f.modeBarButtonsToRemove.concat(m.filter(function(ie){for(var ce=0;ce<f.modeBarButtonsToAdd.length;ce++)if(l(ie,f.modeBarButtonsToAdd[ce]))return!1;return!0})),k=h._has("cartesian"),T=h._has("gl3d"),L=h._has("geo"),A=h._has("pie"),I=h._has("funnelarea"),D=h._has("gl2d"),S=h._has("ternary"),C=h._has("mapbox"),R=h._has("polar"),F=h._has("smith"),H=h._has("sankey"),U=function(ie){for(var ce=d.list({_fullLayout:ie},null,!0),se=0;se<ce.length;se++)if(!ce[se].fixedrange)return!1;return!0}(h),X=t(h.hovermode),Z=[];function Y(ie){if(ie.length){for(var ce=[],se=0;se<ie.length;se++){for(var de=ie[se],ue=i[de],ge=ue.name.toLowerCase(),be=(ue._cat||ue.name).toLowerCase(),Te=!1,we=0;we<b.length;we++){var Le=b[we].toLowerCase();if(Le===ge||Le===be){Te=!0;break}}Te||ce.push(i[de])}Z.push(ce)}}var W=["toImage"];f.showEditInChartStudio?W.push("editInChartStudio"):f.showSendToCloud&&W.push("sendDataToCloud"),Y(W);var te=[],z=[],N=[],V=[];(k||D||A||I||S)+L+T+C+R+F>1?(z=["toggleHover"],N=["resetViews"]):L?(te=["zoomInGeo","zoomOutGeo"],z=["hoverClosestGeo"],N=["resetGeo"]):T?(z=["hoverClosest3d"],N=["resetCameraDefault3d","resetCameraLastSave3d"]):C?(te=["zoomInMapbox","zoomOutMapbox"],z=["toggleHover"],N=["resetViewMapbox"]):D?z=["hoverClosestGl2d"]:A?z=["hoverClosestPie"]:H?(z=["hoverClosestCartesian","hoverCompareCartesian"],N=["resetViewSankey"]):z=["toggleHover"],k&&(z=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ie){for(var ce=0;ce<ie.length;ce++)if(!_.traceIs(ie[ce],"noHover"))return!1;return!0}(v)||X)&&(z=[]),!k&&!D||U||(te=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==N[0]&&(N=["resetScale2d"])),T?V=["zoom3d","pan3d","orbitRotation","tableRotation"]:(k||D)&&!U||S?V=["zoom2d","pan2d"]:C||L?V=["pan2d"]:R&&(V=["zoom2d"]),function(ie){for(var ce=!1,se=0;se<ie.length&&!ce;se++){var de=ie[se];de._module&&de._module.selectPoints&&(_.traceIs(de,"scatter-like")?(g.hasMarkers(de)||g.hasText(de))&&(ce=!0):_.traceIs(de,"box-violin")&&"all"!==de.boxpoints&&"all"!==de.points||(ce=!0))}return ce}(v)&&V.push("select2d","lasso2d");var Q=[],j=function(ie){-1===Q.indexOf(ie)&&-1!==z.indexOf(ie)&&Q.push(ie)};if(Array.isArray(w)){for(var J=[],K=0;K<w.length;K++){var re=w[K];"string"==typeof re?(re=re.toLowerCase(),-1!==r.indexOf(re)?(h._has("mapbox")||h._has("cartesian"))&&V.push(re):"togglespikelines"===re?j("toggleSpikelines"):"togglehover"===re?j("toggleHover"):"hovercompare"===re?j("hoverCompareCartesian"):"hoverclosest"===re?(j("hoverClosestCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie")):"v1hovermode"===re&&(j("toggleHover"),j("hoverClosestCartesian"),j("hoverCompareCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie"))):J.push(re)}w=J}return Y(V),Y(te.concat(N)),Y(Q),function(ie,ce){if(ce.length)if(Array.isArray(ce[0]))for(var se=0;se<ce.length;se++)ie.push(ce[se]);else ie.push(ce);return ie}(Z,w)}(o),s?s.update(o,a):n._modeBar=e(o,a)}else s&&(s.destroy(),delete n._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("../../lib"),t=y("../../fonts/ploticon"),e=new DOMParser;function i(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var r=i.prototype;r.update=function(o,n){this.graphInfo=o;var p=this.graphInfo._context,s=this.graphInfo._fullLayout,a="modebar-"+s._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar","hover"===p.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",n=n.reverse());var c=s.modebar,u="hover"===p.displayModeBar?".js-plotly-plot .plotly:hover ":"";_.deleteRelatedStyleRule(a),_.addRelatedStyleRule(a,u+"#"+a+" .modebar-group","background-color: "+c.bgcolor),_.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+c.color),_.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+c.activecolor),_.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+c.activecolor);var h=!this.hasButtons(n),v=this.hasLogo!==p.displaylogo,f=this.locale!==p.locale;if(this.locale=p.locale,(h||v||f)&&(this.removeAllButtons(),this.updateButtons(n),p.watermark||p.displaylogo)){var l=this.getLogo();p.watermark&&(l.className=l.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(l,this.element.childNodes[0]):this.element.appendChild(l),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(o){var n=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(p){var s=n.createGroup();p.forEach(function(a){var c=a.name;if(!c)throw new Error("must provide button 'name' in button config");if(-1!==n.buttonsNames.indexOf(c))throw new Error("button name '"+c+"' is taken");n.buttonsNames.push(c);var u=n.createButton(a);n.buttonElements.push(u),s.appendChild(u)}),n.element.appendChild(s)})},r.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},r.createButton=function(o){var n=this,p=document.createElement("a");p.setAttribute("rel","tooltip"),p.className="modebar-btn";var s=o.title;void 0===s?s=o.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&p.setAttribute("data-title",s),void 0!==o.attr&&p.setAttribute("data-attr",o.attr);var a=o.val;if(void 0!==a&&("function"==typeof a&&(a=a(this.graphInfo)),p.setAttribute("data-val",a)),"function"!=typeof o.click)throw new Error("must provide button 'click' function in button config");p.addEventListener("click",function(u){o.click(n.graphInfo,u),n.updateActiveButton(u.currentTarget)}),p.setAttribute("data-toggle",o.toggle||!1),o.toggle&&d.select(p).classed("active",!0);var c=o.icon;return p.appendChild("function"==typeof c?c():this.createIcon(c||t.question)),p.setAttribute("data-gravity",o.gravity||"n"),p},r.createIcon=function(o){var n,p=g(o.height)?Number(o.height):o.ascent-o.descent,s="http://www.w3.org/2000/svg";if(o.path){(n=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,o.width,p].join(" ")),n.setAttribute("class","icon");var a=document.createElementNS(s,"path");a.setAttribute("d",o.path),o.transform?a.setAttribute("transform",o.transform):void 0!==o.ascent&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),n.appendChild(a)}return o.svg&&(n=e.parseFromString(o.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},r.updateActiveButton=function(o){var n=this.graphInfo._fullLayout,p=void 0!==o?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var a=s.getAttribute("data-val")||!0,c=s.getAttribute("data-attr"),u="true"===s.getAttribute("data-toggle"),h=d.select(s);if(u)c===p&&h.classed("active",!h.classed("active"));else{var v=null===c?c:_.nestedProperty(n,c).get();h.classed("active",v===a)}})},r.hasButtons=function(o){var n=this.buttons;if(!n||o.length!==n.length)return!1;for(var p=0;p<o.length;++p){if(o[p].length!==n[p].length)return!1;for(var s=0;s<o[p].length;s++)if(o[p][s].name!==n[p][s].name)return!1}return!0},r.getLogo=function(){var o=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",_._(this.graphInfo,"Produced with Plotly")),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(t.newplotlylogo)),o.appendChild(n),o},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){_.removeElement(this.container.querySelector(".modebar")),_.deleteRelatedStyleRule(this._uid)},$.exports=function(o,n){var p=o._fullLayout,s=new i({graphInfo:o,container:p._modebardiv.node(),buttons:n});return p._privateplot&&d.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("../color/attributes"),_=(0,y("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:_,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:d({editType:"plot"}),bgcolor:{valType:"color",dflt:g.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(y,$,ee){"use strict";$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../color"),_=y("../../plot_api/plot_template"),t=y("../../plots/array_container_defaults"),e=y("./attributes"),i=y("./constants");function r(o,n,p,s){var a=s.calendar;function c(h,v){return d.coerce(o,n,e.buttons,h,v)}if(c("visible")){var u=c("step");"all"!==u&&(!a||"gregorian"===a||"month"!==u&&"year"!==u?c("stepmode"):n.stepmode="backward",c("count")),c("label")}}$.exports=function(o,n,p,s,a){var c=o.rangeselector||{},u=_.newContainer(n,"rangeselector");function h(l,x){return d.coerce(c,u,e,l,x)}if(h("visible",t(c,u,{name:"buttons",handleItemDefaults:r,calendar:a}).length>0)){var v=function(l,x,m){for(var w=m.filter(function(L){return x[L].anchor===l._id}),b=0,k=0;k<w.length;k++){var T=x[w[k]].domain;T&&(b=Math.max(T[1],b))}return[l.domain[0],b+i.yPad]}(n,p,s);h("x",v[0]),h("y",v[1]),d.noneOrAll(o,n,["x","y"]),h("xanchor"),h("yanchor"),d.coerceFont(h,"font",p.font);var f=h("bgcolor");h("activecolor",g.contrast(f,i.lightAmount,i.darkAmount)),h("bordercolor"),h("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../plots/plots"),t=y("../color"),e=y("../drawing"),i=y("../../lib"),r=i.strTranslate,o=y("../../lib/svg_text_utils"),n=y("../../plots/cartesian/axis_ids"),p=y("../../constants/alignment"),s=p.LINE_SPACING,a=p.FROM_TL,c=p.FROM_BR,u=y("./constants"),h=y("./get_update_object");function v(x){return x._id}function f(x,m,w){var k,T,b=i.ensureSingle(x,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});b.attr({rx:u.rx,ry:u.ry}),b.call(t.stroke,m.bordercolor).call(t.fill,(k=m,T=w,T._isActive||T._isHovered?k.activecolor:k.bgcolor)).style("stroke-width",m.borderwidth+"px")}function l(x,m,w,b){var k,T;i.ensureSingle(x,"text","selector-text",function(k){k.attr("text-anchor","middle")}).call(e.font,m.font).text((k=w,T=b._fullLayout._meta,k.label?T?i.templateString(k.label,T):k.label:"all"===k.step?"all":k.count+k.step.charAt(0))).call(function(k){o.convertToTspans(k,b)})}$.exports=function(x){var m=x._fullLayout._infolayer.selectAll(".rangeselector").data(function(w){for(var b=n.list(w,"x",!0),k=[],T=0;T<b.length;T++){var L=b[T];L.rangeselector&&L.rangeselector.visible&&k.push(L)}return k}(x),v);m.enter().append("g").classed("rangeselector",!0),m.exit().remove(),m.style({cursor:"pointer","pointer-events":"all"}),m.each(function(w){var b=d.select(this),k=w,T=k.rangeselector,L=b.selectAll("g.button").data(i.filterVisible(T.buttons));L.enter().append("g").classed("button",!0),L.exit().remove(),L.each(function(A){var I=d.select(this),D=h(k,A);A._isActive=function(S,C,R){if("all"===C.step)return!0===S.autorange;var F=Object.keys(R);return S.range[0]===R[F[0]]&&S.range[1]===R[F[1]]}(k,A,D),I.call(f,T,A),I.call(l,T,A,x),I.on("click",function(){x._dragged||g.call("_guiRelayout",x,D)}),I.on("mouseover",function(){A._isHovered=!0,I.call(f,T,A)}),I.on("mouseout",function(){A._isHovered=!1,I.call(f,T,A)})}),function(A,I,D,S,C){var R=0,F=0,H=D.borderwidth;I.each(function(){var te=d.select(this).select(".selector-text"),N=Math.max(D.font.size*s*o.lineCount(te),16)+3;F=Math.max(F,N)}),I.each(function(){var te=d.select(this),z=te.select(".selector-rect"),N=te.select(".selector-text"),V=N.node()&&e.bBox(N.node()).width,Q=D.font.size*s,j=o.lineCount(N),J=Math.max(V+10,u.minButtonWidth);te.attr("transform",r(H+R,H)),z.attr({x:0,y:0,width:J,height:F}),o.positionText(N,J/2,F/2-(j-1)*Q/2+3),R+=J+5});var U=A._fullLayout._size,X=U.l+U.w*D.x,Z=U.t+U.h*(1-D.y),Y="left";i.isRightAnchor(D)&&(X-=R,Y="right"),i.isCenterAnchor(D)&&(X-=R/2,Y="center");var W="top";i.isBottomAnchor(D)&&(Z-=F,W="bottom"),i.isMiddleAnchor(D)&&(Z-=F/2,W="middle"),R=Math.ceil(R),F=Math.ceil(F),X=Math.round(X),Z=Math.round(Z),_.autoMargin(A,S+"-range-selector",{x:D.x,y:D.y,l:R*a[Y],r:R*c[Y],b:F*c[W],t:F*a[W]}),C.attr("transform",r(X,Z))}(x,L,T,k._name,b)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(y,$,ee){"use strict";var d=y("d3-time"),g=y("../../lib").titleCase;$.exports=function(_,t){var e=_._name,i={};if("all"===t.step)i[e+".autorange"]=!0;else{var r=function(o,n){var p,s=o.range,a=new Date(o.r2l(s[1])),u=d["utc"+g(n.step)],h=n.count;switch(n.stepmode){case"backward":p=o.l2r(+u.offset(a,-h));break;case"todate":var v=u.offset(a,-h);p=o.l2r(+u.ceil(v))}return[p,s[1]]}(_,t);i[e+".range[0]"]=r[0],i[e+".range[1]"]=r[1]}return i}},{"../../lib":503,"d3-time":122}],437:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:y("./attributes")}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),draw:y("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(y,$,ee){"use strict";var d=y("../color/attributes");$.exports={bgcolor:{valType:"color",dflt:d.background,editType:"plot"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axis_ids").list,g=y("../../plots/cartesian/autorange").getAutoRange,_=y("./constants");$.exports=function(t){for(var e=d(t,"x",!0),i=0;i<e.length;i++){var r=e[i],o=r[_.name];o&&o.visible&&o.autorange&&(o._input.autorange=!0,o._input.range=o.range=g(t,r))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(y,$,ee){"use strict";$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plot_api/plot_template"),_=y("../../plots/cartesian/axis_ids"),t=y("./attributes"),e=y("./oppaxis_attributes");$.exports=function(i,r,o){var n=i[o],p=r[o];if(n.rangeslider||r._requestRangeslider[p._id]){d.isPlainObject(n.rangeslider)||(n.rangeslider={});var s,a,c=n.rangeslider,u=g.newContainer(p,"rangeslider");if(b("visible")){b("bgcolor",r.plot_bgcolor),b("bordercolor"),b("borderwidth"),b("thickness"),b("autorange",!p.isValidRange(c.range)),b("range");var h=r._subplots;if(h)for(var v=h.cartesian.filter(function(T){return T.substr(0,T.indexOf("y"))===_.name2id(o)}).map(function(T){return T.substr(T.indexOf("y"),T.length)}),f=d.simpleMap(v,_.id2name),l=0;l<f.length;l++){var x=f[l];s=c[x]||{},a=g.newContainer(u,x,"yaxis");var m,w=r[x];s.range&&w.isValidRange(s.range)&&(m="fixed"),"match"!==k("rangemode",m)&&k("range",w.range.slice())}u._input=c}}function b(T,L){return d.coerce(c,u,t,T,L)}function k(T,L){return d.coerce(s,a,e,T,L)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../plots/plots"),t=y("../../lib"),e=t.strTranslate,i=y("../drawing"),r=y("../color"),o=y("../titles"),n=y("../../plots/cartesian"),p=y("../../plots/cartesian/axis_ids"),s=y("../dragelement"),a=y("../../lib/setcursor"),c=y("./constants");function u(m,w,b,k){var T=t.ensureSingle(m,"rect",c.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),L=k.borderwidth%2==0?k.borderwidth:k.borderwidth-1,A=-k._offsetShift,I=i.crispRound(w,k.borderwidth);T.attr({width:k._width+L,height:k._height+L,transform:e(A,A),fill:k.bgcolor,stroke:k.bordercolor,"stroke-width":I})}function h(m,w,b,k){t.ensureSingleById(w._fullLayout._topdefs,"clipPath",k._clipId,function(L){L.append("rect").attr({x:0,y:0})}).select("rect").attr({width:k._width,height:k._height})}function v(m,w,b,k){var T,L=w.calcdata,A=m.selectAll("g."+c.rangePlotClassName).data(b._subplotsWith,t.identity);A.enter().append("g").attr("class",function(I){return c.rangePlotClassName+" "+I}).call(i.setClipUrl,k._clipId,w),A.order(),A.exit().remove(),A.each(function(I,D){var S=d.select(this),C=0===D,R=p.getFromId(w,I,"y"),F=R._name,H=k[F],U={data:[],layout:{xaxis:{type:b.type,domain:[0,1],range:k.range.slice(),calendar:b.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:w._context};b.rangebreaks&&(U.layout.xaxis.rangebreaks=b.rangebreaks),U.layout[F]={type:R.type,domain:[0,1],range:"match"!==H.rangemode?H.range.slice():R.range.slice(),calendar:R.calendar},R.rangebreaks&&(U.layout[F].rangebreaks=R.rangebreaks),_.supplyDefaults(U);var X=U._fullLayout.xaxis,Z=U._fullLayout[F];X.clearCalc(),X.setScale(),Z.clearCalc(),Z.setScale();var Y={id:I,plotgroup:S,xaxis:X,yaxis:Z,isRangePlot:!0};C?T=Y:(Y.mainplot="xy",Y.mainplotinfo=T),n.rangePlot(w,Y,function(W,te){for(var z=[],N=0;N<W.length;N++){var V=W[N],Q=V[0].trace;Q.xaxis+Q.yaxis===te&&z.push(V)}return z}(L,I))})}function f(m,w,b,k,T){t.ensureSingle(m,"rect",c.maskMinClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(r.fill,c.maskColor),t.ensureSingle(m,"rect",c.maskMaxClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(r.fill,c.maskColor),"match"!==T.rangemode&&(t.ensureSingle(m,"rect",c.maskMinOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).call(r.fill,c.maskOppAxisColor),t.ensureSingle(m,"rect",c.maskMaxOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).style("border-top",c.maskOppBorder).call(r.fill,c.maskOppAxisColor))}function l(m,w,b,k){w._context.staticPlot||t.ensureSingle(m,"rect",c.slideBoxClassName,function(T){T.attr({y:0,cursor:c.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:k._height,fill:c.slideBoxFill})}function x(m,w,b,k){var T=t.ensureSingle(m,"g",c.grabberMinClassName),L=t.ensureSingle(m,"g",c.grabberMaxClassName),A={x:0,width:c.handleWidth,rx:c.handleRadius,fill:r.background,stroke:r.defaultLine,"stroke-width":c.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(k._height/4),height:Math.round(k._height/2)};t.ensureSingle(T,"rect",c.handleMinClassName,function(S){S.attr(A)}).attr(I),t.ensureSingle(L,"rect",c.handleMaxClassName,function(S){S.attr(A)}).attr(I);var D={width:c.grabAreaWidth,x:0,y:0,fill:c.grabAreaFill,cursor:w._context.staticPlot?void 0:c.grabAreaCursor};t.ensureSingle(T,"rect",c.grabAreaMinClassName,function(S){S.attr(D)}).attr("height",k._height),t.ensureSingle(L,"rect",c.grabAreaMaxClassName,function(S){S.attr(D)}).attr("height",k._height)}$.exports=function(m){for(var w=m._fullLayout,b=w._rangeSliderData,k=0;k<b.length;k++){var T=b[k][c.name];T._clipId=T._id+"-"+w._uid}var L=w._infolayer.selectAll("g."+c.containerClassName).data(b,function(A){return A._name});L.exit().each(function(A){w._topdefs.select("#"+A[c.name]._clipId).remove()}).remove(),0!==b.length&&(L.enter().append("g").classed(c.containerClassName,!0).attr("pointer-events","all"),L.each(function(A){var I=d.select(this),D=A[c.name],S=w[p.id2name(A.anchor)],C=D[p.id2name(A.anchor)];if(D.range){var R,F=t.simpleMap(D.range,A.r2l),H=t.simpleMap(A.range,A.r2l);R=H[0]<H[1]?[Math.min(F[0],H[0]),Math.max(F[1],H[1])]:[Math.max(F[0],H[0]),Math.min(F[1],H[1])],D.range=D._input.range=t.simpleMap(R,A.l2r)}A.cleanRange("rangeslider.range");var U=w._size,X=A.domain;D._width=U.w*(X[1]-X[0]);var Z=Math.round(U.l+U.w*X[0]),Y=Math.round(U.t+U.h*(1-A._counterDomainMin)+("bottom"===A.side?A._depth:0)+D._offsetShift+c.extraPad);I.attr("transform",e(Z,Y)),D._rl=t.simpleMap(D.range,A.r2l);var W=D._rl[0],te=D._rl[1],z=te-W;if(D.p2d=function(ce){return ce/D._width*z+W},D.d2p=function(ce){return(ce-W)/z*D._width},A.rangebreaks){var N=A.locateBreaks(W,te);if(N.length){var V,Q,j=0;for(V=0;V<N.length;V++)j+=(Q=N[V]).max-Q.min;var J=D._width/(te-W-j),K=[-J*W];for(V=0;V<N.length;V++)K.push(K[K.length-1]-J*((Q=N[V]).max-Q.min));for(D.d2p=function(ce){for(var se=K[0],de=0;de<N.length;de++){var ue=N[de];if(ce>=ue.max)se=K[de+1];else if(ce<ue.min)break}return se+J*ce},V=0;V<N.length;V++)(Q=N[V]).pmin=D.d2p(Q.min),Q.pmax=D.d2p(Q.max);D.p2d=function(ce){for(var se=K[0],de=0;de<N.length;de++){var ue=N[de];if(ce>=ue.pmax)se=K[de+1];else if(ce<ue.pmin)break}return(ce-se)/J}}}if("match"!==C.rangemode){var re=S.r2l(C.range[0]),ie=S.r2l(C.range[1])-re;D.d2pOppAxis=function(ce){return(ce-re)/ie*D._height}}I.call(u,m,A,D).call(h,m,A,D).call(v,m,A,D).call(f,m,A,D,C).call(l,m,A,D).call(x,m,A,D),function(ce,se,de,ue){if(!se._context.staticPlot){var ge=ce.select("rect."+c.slideBoxClassName).node(),be=ce.select("rect."+c.grabAreaMinClassName).node(),Te=ce.select("rect."+c.grabAreaMaxClassName).node();ce.on("mousedown",we),ce.on("touchstart",we)}function we(){var Le=d.event,fe=Le.target,ve=Le.clientX||Le.touches[0].clientX,Me=ve-ce.node().getBoundingClientRect().left,ke=ue.d2p(de._rl[0]),Ce=ue.d2p(de._rl[1]),Pe=s.coverSlip();function Fe(rt){var ze,He,Xe,Je=+(rt.clientX||rt.touches[0].clientX)-ve;switch(fe){case ge:Xe="ew-resize",ze=ke+Je,He=Ce+Je;break;case be:Xe="col-resize",ze=ke+Je,He=Ce;break;case Te:Xe="col-resize",ze=ke,He=Ce+Je;break;default:Xe="ew-resize",ze=Me,He=Me+Je}if(He<ze){var at=He;He=ze,ze=at}ue._pixelMin=ze,ue._pixelMax=He,a(d.select(Pe),Xe),function(pt,xt,Ft,Dt){function ot(Xt){return Ft.l2r(t.constrain(Xt,Dt._rl[0],Dt._rl[1]))}var it=ot(Dt.p2d(Dt._pixelMin)),Et=ot(Dt.p2d(Dt._pixelMax));window.requestAnimationFrame(function(){g.call("_guiRelayout",xt,Ft._name+".range",[it,Et])})}(0,se,de,ue)}function qe(){Pe.removeEventListener("mousemove",Fe),Pe.removeEventListener("mouseup",qe),this.removeEventListener("touchmove",Fe),this.removeEventListener("touchend",qe),t.removeElement(Pe)}this.addEventListener("touchmove",Fe),this.addEventListener("touchend",qe),Pe.addEventListener("mousemove",Fe),Pe.addEventListener("mouseup",qe)}}(I,m,A,D),function(ce,se,de,ue,ge,be){var Te=c.handleWidth/2;function we(qe){return t.constrain(qe,0,ue._width)}function Le(qe){return t.constrain(qe,0,ue._height)}function fe(qe){return t.constrain(qe,-Te,ue._width+Te)}var ve=we(ue.d2p(de._rl[0])),Me=we(ue.d2p(de._rl[1]));if(ce.select("rect."+c.slideBoxClassName).attr("x",ve).attr("width",Me-ve),ce.select("rect."+c.maskMinClassName).attr("width",ve),ce.select("rect."+c.maskMaxClassName).attr("x",Me).attr("width",ue._width-Me),"match"!==be.rangemode){var ke=ue._height-Le(ue.d2pOppAxis(ge._rl[1])),Ce=ue._height-Le(ue.d2pOppAxis(ge._rl[0]));ce.select("rect."+c.maskMinOppAxisClassName).attr("x",ve).attr("height",ke).attr("width",Me-ve),ce.select("rect."+c.maskMaxOppAxisClassName).attr("x",ve).attr("y",Ce).attr("height",ue._height-Ce).attr("width",Me-ve),ce.select("rect."+c.slideBoxClassName).attr("y",ke).attr("height",Ce-ke)}var Pe=Math.round(fe(ve-Te))-.5,Fe=Math.round(fe(Me-Te))+.5;ce.select("g."+c.grabberMinClassName).attr("transform",e(Pe,.5)),ce.select("g."+c.grabberMaxClassName).attr("transform",e(Fe,.5))}(I,0,A,D,S,C),"bottom"===A.side&&o.draw(m,A._id+"title",{propContainer:A,propName:A._name+".title",placeholder:w._dfltTitle.x,attributes:{x:A._offset+A._length/2,y:Y+D._height+D._offsetShift+10+1.5*A.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axis_ids"),g=y("../../lib/svg_text_utils"),_=y("./constants"),t=y("../../constants/alignment").LINE_SPACING,e=_.name;function i(r){var o=r&&r[e];return o&&o.visible}ee.isVisible=i,ee.makeData=function(r){var o=d.list({_fullLayout:r},"x",!0),n=r.margin,p=[];if(!r._has("gl2d"))for(var s=0;s<o.length;s++){var a=o[s];if(i(a)){p.push(a);var c=a[e];c._id=e+a._id,c._height=(r.height-n.b-n.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}r._rangeSliderData=p},ee.autoMarginOpts=function(r,o){var n=r._fullLayout,p=o[e],s=o._id.charAt(0),a=0,c=0;return"bottom"===o.side&&(a=o._depth,o.title.text!==n._dfltTitle[s]&&(c=1.5*o.title.font.size+10+p._offsetShift,c+=(o.title.text.match(g.BR_TAG_ALL)||[]).length*o.title.font.size*t)),{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:p._height+a+Math.max(n.margin.b,c),pad:_.extraPad+2*p._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("./oppaxis_attributes"),t=y("./helpers");$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:d.extendFlat({},g,{yaxis:_})}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),calcAutorange:y("./calc_autorange"),draw:y("./draw"),isVisible:t.isVisible,makeData:t.makeData,autoMarginOpts:t.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(y,$,ee){"use strict";$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(y,$,ee){"use strict";var d=y("../annotations/attributes"),g=y("../../traces/scatter/attributes").line,_=y("../drawing/attributes").dash,t=y("../../lib/extend").extendFlat,e=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),$.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:t({},d.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:t({},d.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:t({},g.color,{editType:"arraydraw"}),width:t({},g.width,{editType:"calc+arraydraw"}),dash:t({},_,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("./constants"),t=y("./helpers");function e(n){return r(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function i(n){return r(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function r(n,p,s,a,c,u){var h=n/2,v=u;if("pixel"===p){var f=c?t.extractPathCoords(c,u?_.paramIsY:_.paramIsX):[s,a],l=d.aggNums(Math.max,null,f),x=d.aggNums(Math.min,null,f),m=x<0?Math.abs(x)+h:h,w=l>0?l+h:h;return{ppad:h,ppadplus:v?m:w,ppadminus:v?w:m}}return{ppad:h}}function o(n,p,s,a,c){var u="category"===n.type||"multicategory"===n.type?n.r2c:n.d2c;if(void 0!==p)return[u(p),u(s)];if(a){var h,v,f,l,x=1/0,m=-1/0,w=a.match(_.segmentRE);for("date"===n.type&&(u=t.decodeDate(u)),h=0;h<w.length;h++)void 0!==(v=c[w[h].charAt(0)].drawn)&&(!(f=w[h].substr(1).match(_.paramRE))||f.length<v||((l=u(f[v]))<x&&(x=l),l>m&&(m=l)));return m>=x?[x,m]:void 0}}$.exports=function(n){var s=d.filterVisible(n._fullLayout.shapes);if(s.length&&n._fullData.length)for(var a=0;a<s.length;a++){var c,u,h=s[a];h._extremes={};var v=g.getRefType(h.xref),f=g.getRefType(h.yref);if("paper"!==h.xref&&"domain"!==v){var l="pixel"===h.xsizemode?h.xanchor:h.x0,x="pixel"===h.xsizemode?h.xanchor:h.x1;(u=o(c=g.getFromId(n,h.xref),l,x,h.path,_.paramIsX))&&(h._extremes[c._id]=g.findExtremes(c,u,e(h)))}if("paper"!==h.yref&&"domain"!==f){var m="pixel"===h.ysizemode?h.yanchor:h.y0,w="pixel"===h.ysizemode?h.yanchor:h.y1;(u=o(c=g.getFromId(n,h.yref),m,w,h.path,_.paramIsY))&&(h._extremes[c._id]=g.findExtremes(c,u,i(h)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(y,$,ee){"use strict";$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../../plots/array_container_defaults"),t=y("./attributes"),e=y("./helpers");function i(r,o,n){function p(C,R){return d.coerce(r,o,t,C,R)}if(p("visible")){var s=p("path"),a=p("type",s?"path":"rect");"path"!==o.type&&delete o.path,p("editable"),p("layer"),p("opacity"),p("fillcolor"),p("fillrule"),p("line.width")&&(p("line.color"),p("line.dash"));for(var c=p("xsizemode"),u=p("ysizemode"),h=["x","y"],v=0;v<2;v++){var f,l,x,m=h[v],w=m+"anchor",b="x"===m?c:u,k={_fullLayout:n},T=g.coerceRef(r,o,k,m,void 0,"paper");if("range"===g.getRefType(T)?((f=g.getFromId(k,T))._shapeIndices.push(o._index),x=e.rangeToShapePosition(f),l=e.shapePositionToRange(f)):l=x=d.identity,"path"!==a){var L=m+"0",A=m+"1",I=r[L],D=r[A];r[L]=l(r[L],!0),r[A]=l(r[A],!0),"pixel"===b?(p(L,0),p(A,10)):(g.coercePosition(o,k,p,T,L,.25),g.coercePosition(o,k,p,T,A,.75)),o[L]=x(o[L]),o[A]=x(o[A]),r[L]=I,r[A]=D}if("pixel"===b){var S=r[w];r[w]=l(r[w],!0),g.coercePosition(o,k,p,T,w,.25),o[w]=x(o[w]),r[w]=S}}"path"===a?p("path"):d.noneOrAll(r,o,["x0","x1","y0","y1"])}}$.exports=function(r,o){_(r,o,{name:"shapes",handleItemDefaults:i})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../../plots/cartesian/axes"),t=y("./draw_newshape/helpers").readPaths,e=y("./draw_newshape/display_outlines"),i=y("../../plots/cartesian/handle_outline").clearOutlineControllers,r=y("../color"),o=y("../drawing"),n=y("../../plot_api/plot_template").arrayEditor,p=y("../dragelement"),s=y("../../lib/setcursor"),a=y("./constants"),c=y("./helpers");function u(b){var k=b._fullLayout;for(var T in k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove(),k._plots){var L=k._plots[T].shapelayer;L&&L.selectAll("path").remove()}for(var A=0;A<k.shapes.length;A++)k.shapes[A].visible&&f(b,A)}function h(b){return!!b._fullLayout._drawing}function v(b){return!b._context.edits.shapePosition}function f(b,k){b._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var T=c.makeOptionsAndPlotinfo(b,k),L=T.options,A=T.plotinfo;L._input&&!1!==L.visible&&function(D){var S=x(b,L),C={"data-index":k,"fill-rule":L.fillrule,d:S},R=L.opacity,F=L.fillcolor,H=L.line.width?L.line.color:"rgba(0,0,0,0)",U=L.line.width,X=L.line.dash;U||!0!==L.editable||(U=5,X="solid");var Z="Z"!==S[S.length-1],Y=v(b)&&L.editable&&b._fullLayout._activeShapeIndex===k;Y&&(F=Z?"rgba(0,0,0,0)":b._fullLayout.activeshape.fillcolor,R=b._fullLayout.activeshape.opacity);var W,te=D.append("path").attr(C).style("opacity",R).call(r.stroke,H).call(r.fill,F).call(o.dashLine,X,U);if(l(te,b,L),(Y||b._context.edits.shapePosition)&&(W=n(b.layout,"shapes",L)),Y){te.style({cursor:"move"});var z={element:te.node(),plotinfo:A,gd:b,editHelpers:W,isActiveShape:!0},N=t(S,b);e(N,te,z)}else b._context.edits.shapePosition?function(V,Q,j,J,K,re){var ie,ce,se,de,ue,ge,be,Te,we,Le,fe,ve,Me,ke,Ce,Pe,Fe="pixel"===j.xsizemode,qe="pixel"===j.ysizemode,rt="line"===j.type,ze="path"===j.type,He=re.modifyItem,Xe=_.getFromId(V,j.xref),Je=_.getRefType(j.xref),at=_.getFromId(V,j.yref),pt=_.getRefType(j.yref),xt=c.getDataToPixel(V,Xe,!1,Je),Ft=c.getDataToPixel(V,at,!0,pt),Dt=c.getPixelToData(V,Xe,!1,Je),ot=c.getPixelToData(V,at,!0,pt),it=rt?function(){var Qe=Math.max(j.line.width,10),Ae=K.append("g").attr("data-index",J);Ae.append("path").attr("d",Q.attr("d")).style({cursor:"move","stroke-width":Qe,"stroke-opacity":"0"});var De={"fill-opacity":"0"},Oe=Math.max(Qe/2,10);return Ae.append("circle").attr({"data-line-point":"start-point",cx:Fe?xt(j.xanchor)+j.x0:xt(j.x0),cy:qe?Ft(j.yanchor)-j.y0:Ft(j.y0),r:Oe}).style(De).classed("cursor-grab",!0),Ae.append("circle").attr({"data-line-point":"end-point",cx:Fe?xt(j.xanchor)+j.x1:xt(j.x1),cy:qe?Ft(j.yanchor)-j.y1:Ft(j.y1),r:Oe}).style(De).classed("cursor-grab",!0),Ae}():Q,Et={element:it.node(),gd:V,prepFn:function(Qe){var Ae,De,Oe,Ie,et,ct,vt,ft;h(V)||(Fe&&(ue=xt(j.xanchor)),qe&&(ge=Ft(j.yanchor)),"path"===j.type?Ce=j.path:(ie=Fe?j.x0:xt(j.x0),ce=qe?j.y0:Ft(j.y0),se=Fe?j.x1:xt(j.x1),de=qe?j.y1:Ft(j.y1)),ie<se?(we=ie,Me="x0",Le=se,ke="x1"):(we=se,Me="x1",Le=ie,ke="x0"),!qe&&ce<de||qe&&ce>de?(be=ce,fe="y0",Te=de,ve="y1"):(be=de,fe="y1",Te=ce,ve="y0"),Xt(Qe),We(K,j),Ae=Q,et=(De=j).yref,ct=_.getFromId(Oe=V,Ie=De.xref),vt=_.getFromId(Oe,et),ft="","paper"===Ie||ct.autorange||(ft+=Ie),"paper"===et||vt.autorange||(ft+=et),o.setClipUrl(Ae,ft?"clip"+Oe._fullLayout._uid+ft:null,Oe),Et.moveFn="move"===Pe?nr:Ue,Et.altKey=Qe.altKey)},doneFn:function(){h(V)||(s(Q),Be(K),l(Q,V,j),d.call("_guiRelayout",V,re.getUpdateObj()))},clickFn:function(){h(V)||Be(K)}};function Xt(Qe){if(h(V))Pe=null;else if(rt)Pe="path"===Qe.target.tagName?"move":"start-point"===Qe.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ae=Et.element.getBoundingClientRect(),De=Ae.right-Ae.left,Oe=Ae.bottom-Ae.top,ct=!ze&&De>10&&Oe>10&&!Qe.shiftKey?p.getCursor((Qe.clientX-Ae.left)/De,1-(Qe.clientY-Ae.top)/Oe):"move";s(Q,ct),Pe=ct.split("-")[0]}}function nr(Qe,Ae){if("path"===j.type){var De=function(et){return et},Oe=De,Ie=De;Fe?He("xanchor",j.xanchor=Dt(ue+Qe)):(Oe=function(et){return Dt(xt(et)+Qe)},Xe&&"date"===Xe.type&&(Oe=c.encodeDate(Oe))),qe?He("yanchor",j.yanchor=ot(ge+Ae)):(Ie=function(et){return ot(Ft(et)+Ae)},at&&"date"===at.type&&(Ie=c.encodeDate(Ie))),He("path",j.path=m(Ce,Oe,Ie))}else Fe?He("xanchor",j.xanchor=Dt(ue+Qe)):(He("x0",j.x0=Dt(ie+Qe)),He("x1",j.x1=Dt(se+Qe))),qe?He("yanchor",j.yanchor=ot(ge+Ae)):(He("y0",j.y0=ot(ce+Ae)),He("y1",j.y1=ot(de+Ae)));Q.attr("d",x(V,j)),We(K,j)}function Ue(Qe,Ae){if(ze){var De=function(Re){return Re},Oe=De,Ie=De;Fe?He("xanchor",j.xanchor=Dt(ue+Qe)):(Oe=function(Re){return Dt(xt(Re)+Qe)},Xe&&"date"===Xe.type&&(Oe=c.encodeDate(Oe))),qe?He("yanchor",j.yanchor=ot(ge+Ae)):(Ie=function(Re){return ot(Ft(Re)+Ae)},at&&"date"===at.type&&(Ie=c.encodeDate(Ie))),He("path",j.path=m(Ce,Oe,Ie))}else if(rt){if("resize-over-start-point"===Pe){var et=ie+Qe,ct=qe?ce-Ae:ce+Ae;He("x0",j.x0=Fe?et:Dt(et)),He("y0",j.y0=qe?ct:ot(ct))}else if("resize-over-end-point"===Pe){var vt=se+Qe,ft=qe?de-Ae:de+Ae;He("x1",j.x1=Fe?vt:Dt(vt)),He("y1",j.y1=qe?ft:ot(ft))}}else{var It=function(Re){return-1!==Pe.indexOf(Re)},ut=It("n"),Ot=It("s"),Rt=It("w"),$e=It("e"),yt=ut?be+Ae:be,Bt=Ot?Te+Ae:Te,Ut=Rt?we+Qe:we,Qt=$e?Le+Qe:Le;qe&&(ut&&(yt=be-Ae),Ot&&(Bt=Te-Ae)),(!qe&&Bt-yt>10||qe&&yt-Bt>10)&&(He(fe,j[fe]=qe?yt:ot(yt)),He(ve,j[ve]=qe?Bt:ot(Bt))),Qt-Ut>10&&(He(Me,j[Me]=Fe?Ut:Dt(Ut)),He(ke,j[ke]=Fe?Qt:Dt(Qt)))}Q.attr("d",x(V,j)),We(K,j)}function We(Qe,Ae){(Fe||qe)&&function(){var De="path"!==Ae.type,Oe=Qe.selectAll(".visual-cue").data([0]);Oe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ie=xt(Fe?Ae.xanchor:g.midRange(De?[Ae.x0,Ae.x1]:c.extractPathCoords(Ae.path,a.paramIsX))),et=Ft(qe?Ae.yanchor:g.midRange(De?[Ae.y0,Ae.y1]:c.extractPathCoords(Ae.path,a.paramIsY)));Ie=c.roundPositionForSharpStrokeRendering(Ie,1),et=c.roundPositionForSharpStrokeRendering(et,1),Oe.attr("d",Fe&&qe?"M"+(Ie-1-1)+","+(et-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Fe?"M"+(Ie-1-1)+","+(et-9-1)+"v18 h2 v-18 Z":"M"+(Ie-9-1)+","+(et-1-1)+"h18 v2 h-18 Z")}()}function Be(Qe){Qe.selectAll(".visual-cue").remove()}p.init(Et),it.node().onmousemove=Xt}(b,te,L,k,D,W):!0===L.editable&&te.style("pointer-events",Z||r.opacity(F)*R<=.5?"stroke":"all");te.node().addEventListener("click",function(){return function(V,Q){if(v(V)){var j=+Q.node().getAttribute("data-index");if(j>=0){if(j===V._fullLayout._activeShapeIndex)return void w(V);V._fullLayout._activeShapeIndex=j,V._fullLayout._deactivateShape=w,u(V)}}}(b,te)})}("below"!==L.layer?b._fullLayout._shapeUpperLayer:"paper"===L.xref||"paper"===L.yref?b._fullLayout._shapeLowerLayer:A._hadPlotinfo?(A.mainplotinfo||A).shapelayer:b._fullLayout._shapeLowerLayer)}function l(b,k,T){var L=(T.xref+T.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(b,L?"clip"+k._fullLayout._uid+L:null,k)}function x(b,k){var T,L,A,I,D,S,C,R,K,re,ie,se,de,ue,ge,F=k.type,H=_.getRefType(k.xref),U=_.getRefType(k.yref),X=_.getFromId(b,k.xref),Z=_.getFromId(b,k.yref),Y=b._fullLayout._size;if(X?"domain"===H?L=function(K){return X._offset+X._length*K}:(T=c.shapePositionToRange(X),L=function(K){return X._offset+X.r2p(T(K,!0))}):L=function(K){return Y.l+Y.w*K},Z?"domain"===U?I=function(K){return Z._offset+Z._length*(1-K)}:(A=c.shapePositionToRange(Z),I=function(K){return Z._offset+Z.r2p(A(K,!0))}):I=function(K){return Y.t+Y.h*(1-K)},"path"===F)return X&&"date"===X.type&&(L=c.decodeDate(L)),Z&&"date"===Z.type&&(I=c.decodeDate(I)),re=L,ie=I,se=(K=k).xsizemode,de=K.ysizemode,ue=K.xanchor,ge=K.yanchor,K.path.replace(a.segmentRE,function(be){var Te=0,we=be.charAt(0),Le=a.paramIsX[we],fe=a.paramIsY[we],ve=a.numParams[we],Me=be.substr(1).replace(a.paramRE,function(ke){return Le[Te]?ke="pixel"===se?re(ue)+Number(ke):re(ke):fe[Te]&&(ke="pixel"===de?ie(ge)-Number(ke):ie(ke)),++Te>ve&&(ke="X"),ke});return Te>ve&&(Me=Me.replace(/[\s,]*X.*/,""),g.log("Ignoring extra params in segment "+be)),we+Me});if("pixel"===k.xsizemode){var W=L(k.xanchor);D=W+k.x0,S=W+k.x1}else D=L(k.x0),S=L(k.x1);if("pixel"===k.ysizemode){var te=I(k.yanchor);C=te-k.y0,R=te-k.y1}else C=I(k.y0),R=I(k.y1);if("line"===F)return"M"+D+","+C+"L"+S+","+R;if("rect"===F)return"M"+D+","+C+"H"+S+"V"+R+"H"+D+"Z";var z=(D+S)/2,N=(C+R)/2,V=Math.abs(z-D),Q=Math.abs(N-C),j="A"+V+","+Q,J=z+V+","+N;return"M"+J+j+" 0 1,1 "+z+","+(N-Q)+j+" 0 0,1 "+J+"Z"}function m(b,k,T){return b.replace(a.segmentRE,function(L){var A=0,I=L.charAt(0),D=a.paramIsX[I],S=a.paramIsY[I],C=a.numParams[I];return I+L.substr(1).replace(a.paramRE,function(R){return A>=C||(D[A]?R=k(R):S[A]&&(R=T(R)),A++),R})})}function w(b){v(b)&&b._fullLayout._activeShapeIndex>=0&&(i(b),delete b._fullLayout._activeShapeIndex,u(b))}$.exports={draw:u,drawOne:f,eraseActiveShape:function(b){if(v(b)){i(b);var k=b._fullLayout._activeShapeIndex,T=(b.layout||{}).shapes||[];if(k<T.length){for(var L=[],A=0;A<T.length;A++)A!==k&&L.push(T[A]);delete b._fullLayout._activeShapeIndex,d.call("_guiRelayout",b,{shapes:L})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(y,$,ee){"use strict";var d=y("../../drawing/attributes").dash,g=y("../../../lib/extend").extendFlat;$.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:g({},d,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(y,$,ee){"use strict";$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(y,$,ee){"use strict";var d=y("../../color");$.exports=function(g,_,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity"),t("newshape.line.width")&&(t("newshape.line.color",d.contrast((g||{}).plot_bgcolor||"#FFF")),t("newshape.line.dash")),t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":366}],454:[function(y,$,ee){"use strict";var d=y("../../dragelement"),g=y("../../dragelement/helpers").drawMode,_=y("../../../registry"),t=y("./constants"),e=t.i000,i=t.i090,r=t.i180,o=t.i270,n=y("../../../plots/cartesian/handle_outline").clearOutlineControllers,p=y("./helpers"),s=p.pointsShapeRectangle,a=p.pointsShapeEllipse,c=p.writePaths,u=y("./newshapes");$.exports=function h(v,f,l,x){x||(x=0);var m=l.gd;function w(){h(v,f,l,x++),a(v[0])&&b({redrawing:!0})}function b(W){l.isActiveShape=!1;var te=u(f,l);Object.keys(te).length&&_.call((W||{}).redrawing?"relayout":"_guiRelayout",m,te)}var k,T,L,A,I,D=l.isActiveShape,S=m._fullLayout._zoomlayer;function R(W){L=+W.srcElement.getAttribute("data-i"),A=+W.srcElement.getAttribute("data-j"),k[L][A].moveFn=F}function F(W,te){if(v.length){var z=I[L][A][1],N=I[L][A][2],V=v[L],Q=V.length;if(s(V)){for(var j=0;j<Q;j++)if(j!==A){var J=V[j];J[1]===V[A][1]&&(J[1]=z+W),J[2]===V[A][2]&&(J[2]=N+te)}if(V[A][1]=z+W,V[A][2]=N+te,!s(V))for(var K=0;K<Q;K++)for(var re=0;re<V[K].length;re++)V[K][re]=I[L][K][re]}else V[A][1]=z+W,V[A][2]=N+te;w()}}function H(){b()}function U(W,te){if(2===W){L=+te.srcElement.getAttribute("data-i"),A=+te.srcElement.getAttribute("data-j");var z=v[L];s(z)||a(z)||function(){if(v.length&&v[L]&&v[L].length){for(var N=[],V=0;V<v[L].length;V++)V!==A&&N.push(v[L][V]);N.length>1&&(2!==N.length||"Z"!==N[1][0])&&(0===A&&(N[0][0]="M"),v[L]=N,w(),b())}}()}}function X(W,te){(function(z,N){if(v.length)for(var V=0;V<v.length;V++)for(var Q=0;Q<v[V].length;Q++)for(var j=0;j+2<v[V][Q].length;j+=2)v[V][Q][j+1]=I[V][Q][j+1]+z,v[V][Q][j+2]=I[V][Q][j+2]+N})(W,te),w()}g(l.dragmode)?m._fullLayout._drawing=!0:m._fullLayout._activeShapeIndex>=0&&n(m),f.attr("d",c(v)),D&&!x&&(I=function(W,te){for(var z=0;z<te.length;z++){var N=te[z];W[z]=[];for(var V=0;V<N.length;V++){W[z][V]=[];for(var Q=0;Q<N[V].length;Q++)W[z][V][Q]=N[V][Q]}}return W}([],v),function(W){k=[];for(var te=0;te<v.length;te++){var z=v[te],N=!s(z)&&a(z);k[te]=[];for(var V=0;V<z.length;V++)if("Z"!==z[V][0]&&(!N||V===e||V===i||V===r||V===o)){var Q=z[V][1],j=z[V][2],J=W.append("circle").classed("cursor-grab",!0).attr("data-i",te).attr("data-j",V).attr("cx",Q).attr("cy",j).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});k[te][V]={element:J.node(),gd:m,prepFn:R,doneFn:H,clickFn:U},d.init(k[te][V])}}}(S.append("g").attr("class","outline-controllers")),T=[],v.length&&(T[0]={element:f[0][0],gd:m,prepFn:function(W){(L=+W.srcElement.getAttribute("data-i"))||(L=0),T[L].moveFn=X},doneFn:function(){b()}},d.init(T[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(y,$,ee){"use strict";var d=y("parse-svg-path"),g=y("./constants"),_=g.CIRCLE_SIDES,t=g.SQRT2,e=y("../../../plots/cartesian/helpers"),i=e.p2r,r=e.r2p,o=[0,3,4,5,6,1,2],n=[0,3,4,1,2];function p(a,c){return Math.abs(a-c)<=1e-6}function s(a,c){var u=c[1]-a[1],h=c[2]-a[2];return Math.sqrt(u*u+h*h)}ee.writePaths=function(a){var c=a.length;if(!c)return"M0,0Z";for(var u="",h=0;h<c;h++)for(var v=a[h].length,f=0;f<v;f++){var l=a[h][f][0];if("Z"===l)u+="Z";else for(var x=a[h][f].length,m=0;m<x;m++){var w=m;"Q"===l||"S"===l?w=n[m]:"C"===l&&(w=o[m]),u+=a[h][f][w],m>0&&m<x-1&&(u+=",")}}return u},ee.readPaths=function(a,c,u,h){var v,f,l,x=d(a),m=[],w=-1,b=0,k=0,T=function(){f=b,l=k};T();for(var L=0;L<x.length;L++){var C=[],R=x[L][0],F=R;switch(R){case"M":m[++w]=[],C.push([F,b=+x[L][1],k=+x[L][2]]),T();break;case"Q":case"S":C.push([F,b=+x[L][3],k=+x[L][4],+x[L][1],+x[L][2]]);break;case"C":C.push([F,b=+x[L][5],k=+x[L][6],+x[L][1],+x[L][2],+x[L][3],+x[L][4]]);break;case"T":case"L":C.push([F,b=+x[L][1],k=+x[L][2]]);break;case"H":C.push([F="L",b=+x[L][1],k]);break;case"V":C.push([F="L",b,k=+x[L][1]]);break;case"A":F="L";var H=+x[L][1],U=+x[L][2];+x[L][4]||(H=-H,U=-U);var X=b-H,Z=k;for(v=1;v<=_/2;v++){var Y=2*Math.PI*v/_;C.push([F,X+H*Math.cos(Y),Z+U*Math.sin(Y)])}break;case"Z":b===f&&k===l||C.push([F,b=f,k=l])}for(var W=(u||{}).domain,te=c._fullLayout._size,z=u&&"pixel"===u.xsizemode,N=u&&"pixel"===u.ysizemode,V=!1===h,Q=0;Q<C.length;Q++){for(v=0;v+2<7;v+=2){var j=C[Q][v+1],J=C[Q][v+2];void 0!==j&&void 0!==J&&(b=j,k=J,u&&(u.xaxis&&u.xaxis.p2r?(V&&(j-=u.xaxis._offset),j=z?r(u.xaxis,u.xanchor)+j:i(u.xaxis,j)):(V&&(j-=te.l),W?j=W.x[0]+j/te.w:j/=te.w),u.yaxis&&u.yaxis.p2r?(V&&(J-=u.yaxis._offset),J=N?r(u.yaxis,u.yanchor)-J:i(u.yaxis,J)):(V&&(J-=te.t),J=W?W.y[1]-J/te.h:1-J/te.h)),C[Q][v+1]=j,C[Q][v+2]=J)}m[w].push(C[Q].slice())}}return m},ee.pointsShapeRectangle=function(a){if(5!==a.length)return!1;for(var c=1;c<3;c++)if(!p(a[0][c]-a[1][c],a[3][c]-a[2][c])||!p(a[0][c]-a[3][c],a[1][c]-a[2][c]))return!1;return!(!p(a[0][1],a[1][1])&&!p(a[0][1],a[3][1])||!(s(a[0],a[1])*s(a[0],a[3])))},ee.pointsShapeEllipse=function(a){var c=a.length;if(c!==_+1)return!1;c=_;for(var u=0;u<c;u++){var h=(2*c-u)%c,v=(c/2+h)%c;if(!p(s(a[u],a[(c/2+u)%c]),s(a[h],a[v])))return!1}return!0},ee.handleEllipse=function(a,c,u){if(!a)return[c,u];var h=ee.ellipseOver({x0:c[0],y0:c[1],x1:u[0],y1:u[1]}),v=(h.x1+h.x0)/2,f=(h.y1+h.y0)/2,l=(h.x1-h.x0)/2,x=(h.y1-h.y0)/2;l||(l=x/=t),x||(x=l/=t);for(var m=[],w=0;w<_;w++){var b=2*w*Math.PI/_;m.push([v+l*Math.cos(b),f+x*Math.sin(b)])}return m},ee.ellipseOver=function(a){var c=a.x0,u=a.y0,h=a.x1,v=a.y1,f=h-c,l=v-u,x=((c-=f)+h)/2,m=((u-=l)+v)/2;return{x0:x-(f*=t),y0:m-(l*=t),x1:x+f,y1:m+l}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(y,$,ee){"use strict";var d=y("../../dragelement/helpers"),g=d.drawMode,_=d.openMode,t=y("./constants"),e=t.i000,i=t.i090,r=t.i180,o=t.i270,n=t.cos45,p=t.sin45,s=y("../../../plots/cartesian/helpers"),a=s.p2r,c=s.r2p,u=y("../../../plots/cartesian/handle_outline").clearSelect,h=y("./helpers"),v=h.readPaths,f=h.writePaths,l=h.ellipseOver;$.exports=function(x,m){if(x.length){var w=x[0][0];if(w){var b=w.getAttribute("d"),k=m.gd,T=k._fullLayout.newshape,L=m.plotinfo,A=L.xaxis,I=L.yaxis,D=!!L.domain||!L.xaxis,S=!!L.domain||!L.yaxis,C=m.isActiveShape,R=m.dragmode,F=(k.layout||{}).shapes||[];if(!g(R)&&void 0!==C){var H=k._fullLayout._activeShapeIndex;if(H<F.length)switch(k._fullLayout.shapes[H].type){case"rect":R="drawrect";break;case"circle":R="drawcircle";break;case"line":R="drawline";break;case"path":var U=F[H].path||"";R="Z"===U[U.length-1]?"drawclosedpath":"drawopenpath"}}var X,Z=_(R),Y=v(b,k,L,C),W={editable:!0,xref:D?"paper":A._id,yref:S?"paper":I._id,layer:T.layer,opacity:T.opacity,line:{color:T.line.color,width:T.line.width,dash:T.line.dash}};if(Z||(W.fillcolor=T.fillcolor,W.fillrule=T.fillrule),1===Y.length&&(X=Y[0]),X&&"drawrect"===R)W.type="rect",W.x0=X[0][1],W.y0=X[0][2],W.x1=X[2][1],W.y1=X[2][2];else if(X&&"drawline"===R)W.type="line",W.x0=X[0][1],W.y0=X[0][2],W.x1=X[1][1],W.y1=X[1][2];else if(X&&"drawcircle"===R){W.type="circle";var te=X[e][1],z=X[i][1],N=X[r][1],V=X[o][1],Q=X[e][2],j=X[i][2],J=X[r][2],K=X[o][2],re=L.xaxis&&("date"===L.xaxis.type||"log"===L.xaxis.type),ie=L.yaxis&&("date"===L.yaxis.type||"log"===L.yaxis.type);re&&(te=c(L.xaxis,te),z=c(L.xaxis,z),N=c(L.xaxis,N),V=c(L.xaxis,V)),ie&&(Q=c(L.yaxis,Q),j=c(L.yaxis,j),J=c(L.yaxis,J),K=c(L.yaxis,K));var ce=(z+V)/2,se=(Q+J)/2,de=l({x0:ce,y0:se,x1:ce+(V-z+N-te)/2*n,y1:se+(K-j+J-Q)/2*p});re&&(de.x0=a(L.xaxis,de.x0),de.x1=a(L.xaxis,de.x1)),ie&&(de.y0=a(L.yaxis,de.y0),de.y1=a(L.yaxis,de.y1)),W.x0=de.x0,W.y0=de.y0,W.x1=de.x1,W.y1=de.y1}else W.type="path",A&&I&&function(fe,ve,Me){var ke="date"===ve.type,Ce="date"===Me.type;if(!ke&&!Ce)return fe;for(var Pe=0;Pe<fe.length;Pe++)for(var Fe=0;Fe<fe[Pe].length;Fe++)for(var qe=0;qe+2<fe[Pe][Fe].length;qe+=2)ke&&(fe[Pe][Fe][qe+1]=fe[Pe][Fe][qe+1].replace(" ","_")),Ce&&(fe[Pe][Fe][qe+2]=fe[Pe][Fe][qe+2].replace(" ","_"))}(Y,A,I),W.path=f(Y),X=null;u(k);for(var ue=m.editHelpers,ge=(ue||{}).modifyItem,be=[],Te=0;Te<F.length;Te++){var we=k._fullLayout.shapes[Te];if(be[Te]=we._input,void 0!==C&&Te===k._fullLayout._activeShapeIndex){var Le=W;switch(we.type){case"line":case"rect":case"circle":ge("x0",Le.x0),ge("x1",Le.x1),ge("y0",Le.y0),ge("y1",Le.y1);break;case"path":ge("path",Le.path)}}}return void 0===C?(be.push(W),be):ue?ue.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(y,$,ee){"use strict";var d=y("./constants"),g=y("../../lib");ee.rangeToShapePosition=function(_){return"log"===_.type?_.r2d:function(t){return t}},ee.shapePositionToRange=function(_){return"log"===_.type?_.d2r:function(t){return t}},ee.decodeDate=function(_){return function(t){return t.replace&&(t=t.replace("_"," ")),_(t)}},ee.encodeDate=function(_){return function(t){return _(t).replace(" ","_")}},ee.extractPathCoords=function(_,t){var e=[];return _.match(d.segmentRE).forEach(function(i){var r=t[i.charAt(0)].drawn;if(void 0!==r){var o=i.substr(1).match(d.paramRE);!o||o.length<r||e.push(g.cleanNumber(o[r]))}}),e},ee.getDataToPixel=function(_,t,e,i){var r,o=_._fullLayout._size;if(t)if("domain"===i)r=function(p){return t._length*(e?1-p:p)+t._offset};else{var n=ee.shapePositionToRange(t);r=function(p){return t._offset+t.r2p(n(p,!0))},"date"===t.type&&(r=ee.decodeDate(r))}else r=e?function(p){return o.t+o.h*(1-p)}:function(p){return o.l+o.w*p};return r},ee.getPixelToData=function(_,t,e,i){var r,o=_._fullLayout._size;if(t)if("domain"===i)r=function(p){var s=(p-t._offset)/t._length;return e?1-s:s};else{var n=ee.rangeToShapePosition(t);r=function(p){return n(t.p2r(p-t._offset))}}else r=e?function(p){return 1-(p-o.t)/o.h}:function(p){return(p-o.l)/o.w};return r},ee.roundPositionForSharpStrokeRendering=function(_,t){var e=1===Math.round(t%2),i=Math.round(_);return e?i+.5:i},ee.makeOptionsAndPlotinfo=function(_,t){var e=_._fullLayout.shapes[t]||{},i=_._fullLayout._plots[e.xref+e.yref];return i?i._hadPlotinfo=!0:(i={},e.xref&&"paper"!==e.xref&&(i.xaxis=_._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(i.yaxis=_._fullLayout[e.yref+"axis"])),i.xsizemode=e.xsizemode,i.ysizemode=e.ysizemode,i.xanchor=e.xanchor,i.yanchor=e.yanchor,{options:e,plotinfo:i}}},{"../../lib":503,"./constants":448}],458:[function(y,$,ee){"use strict";var d=y("./draw");$.exports={moduleType:"component",name:"shapes",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),supplyDrawNewShapeDefaults:y("./draw_newshape/defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("shapes"),calcAutorange:y("./calc_autorange"),draw:d.draw,drawOne:d.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("../../plots/pad_attributes"),_=y("../../lib/extend").extendDeepAll,t=y("../../plot_api/edit_types").overrideAll,e=y("../../plots/animation_attributes"),i=y("../../plot_api/plot_template").templatedArray,r=y("./constants"),o=i("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=t(i("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:o,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:_(g({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:d({})},font:d({}),activebgcolor:{valType:"color",dflt:r.gripBgActiveColor},bgcolor:{valType:"color",dflt:r.railBgColor},bordercolor:{valType:"color",dflt:r.railBorderColor},borderwidth:{valType:"number",min:0,dflt:r.railBorderWidth},ticklen:{valType:"number",min:0,dflt:r.tickLength},tickcolor:{valType:"color",dflt:r.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:r.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(y,$,ee){"use strict";$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/array_container_defaults"),_=y("./attributes"),t=y("./constants").name,e=_.steps;function i(o,n,p){function s(v,f){return d.coerce(o,n,_,v,f)}for(var a=g(o,n,{name:"steps",handleItemDefaults:r}),c=0,u=0;u<a.length;u++)a[u].visible&&c++;if(c<2?n.visible=!1:s("visible")){n._stepCount=c;var h=n._visibleSteps=d.filterVisible(a);(a[s("active")]||{}).visible||(n.active=h[0]._index),s("x"),s("y"),d.noneOrAll(o,n,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),d.coerceFont(s,"font",p.font),s("currentvalue.visible")&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),d.coerceFont(s,"currentvalue.font",n.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function r(o,n){function p(a,c){return d.coerce(o,n,e,a,c)}if("skip"===o.method||Array.isArray(o.args)?p("visible"):n.visible=!1){p("method"),p("args");var s=p("label","step-"+n._index);p("value",s),p("execute")}}$.exports=function(o,n){g(o,n,{name:t,handleItemDefaults:i})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../plots/plots"),_=y("../color"),t=y("../drawing"),e=y("../../lib"),i=e.strTranslate,r=y("../../lib/svg_text_utils"),o=y("../../plot_api/plot_template").arrayEditor,n=y("./constants"),p=y("../../constants/alignment"),s=p.LINE_SPACING,a=p.FROM_TL,c=p.FROM_BR;function u(C){return n.autoMarginIdRoot+C._index}function h(C){return C._index}function v(C,R){var F=t.tester.selectAll("g."+n.labelGroupClass).data(R._visibleSteps);F.enter().append("g").classed(n.labelGroupClass,!0);var H=0,U=0;F.each(function(Q){var j=x(d.select(this),{step:Q},R).node();if(j){var J=t.bBox(j);U=Math.max(U,J.height),H=Math.max(H,J.width)}}),F.remove();var X=R._dims={};X.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var Z=C._fullLayout._size;if(X.lx=Z.l+Z.w*R.x,X.ly=Z.t+Z.h*(1-R.y),X.outerLength="fraction"===R.lenmode?Math.round(Z.w*R.len):R.len,X.inputAreaStart=0,X.inputAreaLength=Math.round(X.outerLength-R.pad.l-R.pad.r),X.labelStride=Math.max(1,Math.ceil((H+n.labelPadding)/((X.inputAreaLength-2*n.stepInset)/(R._stepCount-1)))),X.labelHeight=U,X.currentValueMaxWidth=0,X.currentValueHeight=0,X.currentValueTotalHeight=0,X.currentValueMaxLines=1,R.currentvalue.visible){var te=t.tester.append("g");F.each(function(Q){var j=f(te,R,Q.label),J=j.node()&&t.bBox(j.node())||{width:0,height:0},K=r.lineCount(j);X.currentValueMaxWidth=Math.max(X.currentValueMaxWidth,Math.ceil(J.width)),X.currentValueHeight=Math.max(X.currentValueHeight,Math.ceil(J.height)),X.currentValueMaxLines=Math.max(X.currentValueMaxLines,K)}),X.currentValueTotalHeight=X.currentValueHeight+R.currentvalue.offset,te.remove()}X.height=X.currentValueTotalHeight+n.tickOffset+R.ticklen+n.labelOffset+X.labelHeight+R.pad.t+R.pad.b;var z="left";e.isRightAnchor(R)&&(X.lx-=X.outerLength,z="right"),e.isCenterAnchor(R)&&(X.lx-=X.outerLength/2,z="center");var N="top";e.isBottomAnchor(R)&&(X.ly-=X.height,N="bottom"),e.isMiddleAnchor(R)&&(X.ly-=X.height/2,N="middle"),X.outerLength=Math.ceil(X.outerLength),X.height=Math.ceil(X.height),X.lx=Math.round(X.lx),X.ly=Math.round(X.ly);var V={y:R.y,b:X.height*c[N],t:X.height*a[N]};"fraction"===R.lenmode?(V.l=0,V.xl=R.x-R.len*a[z],V.r=0,V.xr=R.x+R.len*c[z]):(V.x=R.x,V.l=X.outerLength*a[z],V.r=X.outerLength*c[z]),g.autoMargin(C,u(R),V)}function f(C,R,F){if(R.currentvalue.visible){var H,U,X=R._dims;switch(R.currentvalue.xanchor){case"right":H=X.inputAreaLength-n.currentValueInset-X.currentValueMaxWidth,U="left";break;case"center":H=.5*X.inputAreaLength,U="middle";break;default:H=n.currentValueInset,U="left"}var Z=e.ensureSingle(C,"text",n.labelClass,function(V){V.attr({"text-anchor":U,"data-notex":1})}),Y=R.currentvalue.prefix?R.currentvalue.prefix:"";if("string"==typeof F)Y+=F;else{var W=R.steps[R.active].label,te=R._gd._fullLayout._meta;te&&(W=e.templateString(W,te)),Y+=W}R.currentvalue.suffix&&(Y+=R.currentvalue.suffix),Z.call(t.font,R.currentvalue.font).text(Y).call(r.convertToTspans,R._gd);var z=r.lineCount(Z);return r.positionText(Z,H,(X.currentValueMaxLines+1-z)*R.currentvalue.font.size*s),Z}}function l(C,R,F){e.ensureSingle(C,"rect",n.gripRectClass,function(H){H.call(k,R,C,F).style("pointer-events","all")}).attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(_.stroke,F.bordercolor).call(_.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function x(C,R,F){var H=e.ensureSingle(C,"text",n.labelClass,function(Z){Z.attr({"text-anchor":"middle","data-notex":1})}),U=R.step.label,X=F._gd._fullLayout._meta;return X&&(U=e.templateString(U,X)),H.call(t.font,F.font).text(U).call(r.convertToTspans,F._gd),H}function m(C,R){var F=e.ensureSingle(C,"g",n.labelsClass),H=R._dims,U=F.selectAll("g."+n.labelGroupClass).data(H.labelSteps);U.enter().append("g").classed(n.labelGroupClass,!0),U.exit().remove(),U.each(function(X){var Z=d.select(this);Z.call(x,X,R),t.setTranslate(Z,A(R,X.fraction),n.tickOffset+R.ticklen+R.font.size*s+n.labelOffset+H.currentValueTotalHeight)})}function w(C,R,F,H,U){var X=Math.round(H*(F._stepCount-1)),Z=F._visibleSteps[X]._index;Z!==F.active&&b(C,R,F,Z,!0,U)}function b(C,R,F,H,U,X){var Z=F.active;F.active=H,o(C.layout,n.name,F).applyUpdate("active",H);var Y=F.steps[F.active];R.call(L,F,X),R.call(f,F),C.emit("plotly_sliderchange",{slider:F,step:F.steps[F.active],interaction:U,previousActive:Z}),Y&&Y.method&&U&&(R._nextMethod?(R._nextMethod.step=Y,R._nextMethod.doCallback=U,R._nextMethod.doTransition=X):(R._nextMethod={step:Y,doCallback:U,doTransition:X},R._nextMethodRaf=window.requestAnimationFrame(function(){var W=R._nextMethod.step;W.method&&(W.execute&&g.executeAPICommand(C,W.method,W.args),R._nextMethod=null,R._nextMethodRaf=null)})))}function k(C,R,F){var H=F.node(),U=d.select(R);function X(){return F.data()[0]}function Z(){var Y=X();R.emit("plotly_sliderstart",{slider:Y});var W=F.select("."+n.gripRectClass);d.event.stopPropagation(),d.event.preventDefault(),W.call(_.fill,Y.activebgcolor);var te=I(Y,d.mouse(H)[0]);function z(){var V=X(),Q=I(V,d.mouse(H)[0]);w(R,F,V,Q,!1)}function N(){var V=X();V._dragging=!1,W.call(_.fill,V.bgcolor),U.on("mouseup",null),U.on("mousemove",null),U.on("touchend",null),U.on("touchmove",null),R.emit("plotly_sliderend",{slider:V,step:V.steps[V.active]})}w(R,F,Y,te,!0),Y._dragging=!0,U.on("mousemove",z),U.on("touchmove",z),U.on("mouseup",N),U.on("touchend",N)}C.on("mousedown",Z),C.on("touchstart",Z)}function T(C,R){var F=C.selectAll("rect."+n.tickRectClass).data(R._visibleSteps),H=R._dims;F.enter().append("rect").classed(n.tickRectClass,!0),F.exit().remove(),F.attr({width:R.tickwidth+"px","shape-rendering":"crispEdges"}),F.each(function(U,X){var Z=X%H.labelStride==0,Y=d.select(this);Y.attr({height:Z?R.ticklen:R.minorticklen}).call(_.fill,R.tickcolor),t.setTranslate(Y,A(R,X/(R._stepCount-1))-.5*R.tickwidth,(Z?n.tickOffset:n.minorTickOffset)+H.currentValueTotalHeight)})}function L(C,R,F){for(var H=C.select("rect."+n.gripRectClass),U=0,X=0;X<R._stepCount;X++)if(R._visibleSteps[X]._index===R.active){U=X;break}var Z=A(R,U/(R._stepCount-1));if(!R._invokingCommand){var Y=H;F&&R.transition.duration>0&&(Y=Y.transition().duration(R.transition.duration).ease(R.transition.easing)),Y.attr("transform",i(Z-.5*n.gripWidth,R._dims.currentValueTotalHeight))}}function A(C,R){var F=C._dims;return F.inputAreaStart+n.stepInset+(F.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,R))}function I(C,R){var F=C._dims;return Math.min(1,Math.max(0,(R-n.stepInset-F.inputAreaStart)/(F.inputAreaLength-2*n.stepInset-2*F.inputAreaStart)))}function D(C,R,F){var H=F._dims,U=e.ensureSingle(C,"rect",n.railTouchRectClass,function(X){X.call(k,R,C,F).style("pointer-events","all")});U.attr({width:H.inputAreaLength,height:Math.max(H.inputAreaWidth,n.tickOffset+F.ticklen+H.labelHeight)}).call(_.fill,F.bgcolor).attr("opacity",0),t.setTranslate(U,0,H.currentValueTotalHeight)}function S(C,R){var F=R._dims,H=F.inputAreaLength-2*n.railInset,U=e.ensureSingle(C,"rect",n.railRectClass);U.attr({width:H,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(_.stroke,R.bordercolor).call(_.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),t.setTranslate(U,n.railInset,.5*(F.inputAreaWidth-n.railWidth)+F.currentValueTotalHeight)}$.exports=function(C){var R=C._fullLayout,F=function(W,te){for(var z=W[n.name],N=[],V=0;V<z.length;V++){var Q=z[V];Q.visible&&(Q._gd=te,N.push(Q))}return N}(R,C),H=R._infolayer.selectAll("g."+n.containerClassName).data(F.length>0?[0]:[]);function U(W){W._commandObserver&&(W._commandObserver.remove(),delete W._commandObserver),g.autoMargin(C,u(W))}if(H.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize"),H.exit().each(function(){d.select(this).selectAll("g."+n.groupClassName).each(U)}).remove(),0!==F.length){var X=H.selectAll("g."+n.groupClassName).data(F,h);X.enter().append("g").classed(n.groupClassName,!0),X.exit().each(U).remove();for(var Z=0;Z<F.length;Z++)v(C,F[Z]);X.each(function(W){var te=d.select(this);(function(z){var N=z._dims;N.labelSteps=[];for(var V=z._stepCount,Q=0;Q<V;Q+=N.labelStride)N.labelSteps.push({fraction:Q/(V-1),step:z._visibleSteps[Q]})})(W),g.manageCommandObserver(C,W,W._visibleSteps,function(z){var N=te.data()[0];N.active!==z.index&&(N._dragging||b(C,te,N,z.index,!1,!0))}),function(z,N,V){(V.steps[V.active]||{}).visible||(V.active=V._visibleSteps[0]._index),N.call(f,V).call(S,V).call(m,V).call(T,V).call(D,z,V).call(l,z,V);var Q=V._dims;t.setTranslate(N,Q.lx+V.pad.l,Q.ly+V.pad.t),N.call(L,V,!1),N.call(f,V)}(C,d.select(this),W)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(y,$,ee){"use strict";var d=y("./constants");$.exports={moduleType:"component",name:d.name,layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),draw:y("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("../../plots/plots"),t=y("../../registry"),e=y("../../lib"),i=e.strTranslate,r=y("../drawing"),o=y("../color"),n=y("../../lib/svg_text_utils"),p=y("../../constants/interactions"),s=y("../../constants/alignment").OPPOSITE_SIDE,a=/ [XY][0-9]* /;$.exports={draw:function(c,u,h){var v,l=h.propName,x=h.placeholder,m=h.traceIndex,w=h.avoid||{},b=h.attributes,k=h.transform,T=h.containerGroup,L=c._fullLayout,A=1,I=!1,D=h.propContainer.title,S=(D&&D.text?D.text:"").trim(),C=D&&D.font?D.font:{},R=C.family,F=C.size,H=C.color;"title.text"===l?v="titleText":-1!==l.indexOf("axis")?v="axisTitleText":l.indexOf(!0)&&(v="colorbarTitleText");var U=c._context.edits[v];""===S?A=0:S.replace(a," % ")===x.replace(a," % ")&&(A=.2,I=!0,U||(S="")),h._meta?S=e.templateString(S,h._meta):L._meta&&(S=e.templateString(S,L._meta));var X,Z=S||U;T||(T=e.ensureSingle(L._infolayer,"g","g-"+u),X=L._hColorbarMoveTitle);var Y=T.selectAll("text").data(Z?[0]:[]);if(Y.enter().append("text"),Y.text(S).attr("class",u),Y.exit().remove(),!Z)return T;function W(N){e.syncOrAsync([te,z],N)}function te(N){var V;return!k&&X&&(k={}),k?(V="",k.rotate&&(V+="rotate("+[k.rotate,b.x,b.y]+")"),(k.offset||X)&&(V+=i(0,(k.offset||0)-(X||0)))):V=null,N.attr("transform",V),N.style({"font-family":R,"font-size":d.round(F,2)+"px",fill:o.rgb(H),opacity:A*o.opacity(H),"font-weight":_.fontWeight}).attr(b).call(n.convertToTspans,c),_.previousPromises(c)}function z(N){var V=d.select(N.node().parentNode);if(w&&w.selection&&w.side&&S){V.attr("transform",null);var Q=s[w.side],j="left"===w.side||"top"===w.side?-1:1,J=g(w.pad)?w.pad:2,K=r.bBox(V.node()),ie=w.maxShift||j*({left:0,top:0,right:L.width,bottom:L.height}[w.side]-K[w.side]),ce=0;if(ie<0)ce=ie;else{var se=w.offsetLeft||0,de=w.offsetTop||0;K.left-=se,K.right-=se,K.top-=de,K.bottom-=de,w.selection.each(function(){var ge=r.bBox(this);e.bBoxIntersect(K,ge,J)&&(ce=Math.max(ce,j*(ge[w.side]-K[Q])+J))}),ce=Math.min(ie,ce)}if(ce>0||ie<0){var ue={left:[-ce,0],right:[ce,0],top:[0,-ce],bottom:[0,ce]}[w.side];V.attr("transform",i(ue[0],ue[1]))}}}return Y.call(W),U&&(S?Y.on(".opacity",null):(A=0,I=!0,Y.text(x).on("mouseover.opacity",function(){d.select(this).transition().duration(p.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(p.HIDE_PLACEHOLDER).style("opacity",0)})),Y.call(n.makeEditable,{gd:c}).on("edit",function(N){void 0!==m?t.call("_guiRestyle",c,l,N,m):t.call("_guiRelayout",c,l,N)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(W)}).on("input",function(N){this.text(N||" ").call(n.positionText,b.x,b.y)})),Y.classed("js-placeholder",I),T}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("../color/attributes"),_=y("../../lib/extend").extendFlat,t=y("../../plot_api/edit_types").overrideAll,e=y("../../plots/pad_attributes"),i=y("../../plot_api/plot_template").templatedArray,r=i("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=t(i("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:r,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:_(e({editType:"arraydraw"}),{}),font:d({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:g.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(y,$,ee){"use strict";$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/array_container_defaults"),_=y("./attributes"),t=y("./constants").name,e=_.buttons;function i(o,n,p){function s(a,c){return d.coerce(o,n,_,a,c)}s("visible",g(o,n,{name:"buttons",handleItemDefaults:r}).length>0)&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),d.noneOrAll(o,n,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),d.coerceFont(s,"font",p.font),s("bgcolor",p.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function r(o,n){function p(s,a){return d.coerce(o,n,e,s,a)}p("visible","skip"===o.method||Array.isArray(o.args))&&(p("method"),p("args"),p("args2"),p("label"),p("execute"))}$.exports=function(o,n){g(o,n,{name:t,handleItemDefaults:i})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../plots/plots"),_=y("../color"),t=y("../drawing"),e=y("../../lib"),i=y("../../lib/svg_text_utils"),r=y("../../plot_api/plot_template").arrayEditor,o=y("../../constants/alignment").LINE_SPACING,n=y("./constants"),p=y("./scrollbox");function s(A){return A._index}function a(A,I){return+A.attr(n.menuIndexAttrName)===I._index}function c(A,I,D,S,C,R,F,H){I.active=F,r(A.layout,n.name,I).applyUpdate("active",F),"buttons"===I.type?h(A,S,null,null,I):"dropdown"===I.type&&(C.attr(n.menuIndexAttrName,"-1"),u(A,S,C,R,I),H||h(A,S,C,R,I))}function u(A,I,D,S,C){var R=e.ensureSingle(I,"g",n.headerClassName,function(Y){Y.style("pointer-events","all")}),F=C._dims,X={y:C.pad.t,yPad:0,x:C.pad.l,xPad:0,index:0},Z={width:F.headerWidth,height:F.headerHeight};R.call(v,C,C.buttons[C.active]||n.blankHeaderOpts,A).call(T,C,X,Z),e.ensureSingle(I,"text",n.headerArrowClassName,function(Y){Y.attr("text-anchor","end").call(t.font,C.font).text(n.arrowSymbol[C.direction])}).attr({x:F.headerWidth-n.arrowOffsetX+C.pad.l,y:F.headerHeight/2+n.textOffsetY+C.pad.t}),R.on("click",function(){D.call(L,String(a(D,C)?-1:C._index)),h(A,I,D,S,C)}),R.on("mouseover",function(){R.call(m)}),R.on("mouseout",function(){R.call(w,C)}),t.setTranslate(I,F.lx,F.ly)}function h(A,I,D,S,C){D||(D=I).attr("pointer-events","all");var R=-1==+D.attr(n.menuIndexAttrName)&&"buttons"!==C.type?[]:C.buttons,F="dropdown"===C.type?n.dropdownButtonClassName:n.buttonClassName,H=D.selectAll("g."+F).data(e.filterVisible(R)),U=H.enter().append("g").classed(F,!0),X=H.exit();"dropdown"===C.type?(U.attr("opacity","0").transition().attr("opacity","1"),X.transition().attr("opacity","0").remove()):X.remove();var Z=0,Y=0,W=C._dims,te=-1!==["up","down"].indexOf(C.direction);"dropdown"===C.type&&(te?Y=W.headerHeight+n.gapButtonHeader:Z=W.headerWidth+n.gapButtonHeader),"dropdown"===C.type&&"up"===C.direction&&(Y=-n.gapButtonHeader+n.gapButton-W.openHeight),"dropdown"===C.type&&"left"===C.direction&&(Z=-n.gapButtonHeader+n.gapButton-W.openWidth);var V,Q,j,z={x:W.lx+Z+C.pad.l,y:W.ly+Y+C.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},N={l:z.x+C.borderwidth,t:z.y+C.borderwidth};H.each(function(V,Q){var j=d.select(this);j.call(v,C,V,A).call(T,C,z),j.on("click",function(){d.event.defaultPrevented||(V.execute&&(V.args2&&C.active===Q?(c(A,C,0,I,D,S,-1),g.executeAPICommand(A,V.method,V.args2)):(c(A,C,0,I,D,S,Q),g.executeAPICommand(A,V.method,V.args))),A.emit("plotly_buttonclicked",{menu:C,button:V,active:C.active}))}),j.on("mouseover",function(){j.call(m)}),j.on("mouseout",function(){j.call(w,C),H.call(x,C)})}),H.call(x,C),te?(N.w=Math.max(W.openWidth,W.headerWidth),N.h=z.y-N.t):(N.w=z.x-N.l,N.h=Math.max(W.openHeight,W.headerHeight)),N.direction=C.direction,S&&(H.size()?function(V,Q,j,J,K,re){var ie,ce,se,de=K.direction,ge=K._dims,be=K.active;if("up"===de||"down"===de)for(ce=0,se=0;se<be;se++)ce+=ge.heights[se]+n.gapButton;else for(ie=0,se=0;se<be;se++)ie+=ge.widths[se]+n.gapButton;J.enable(re,ie,ce),J.hbar&&J.hbar.attr("opacity","0").transition().attr("opacity","1"),J.vbar&&J.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,C,N):(j=!!(V=S).vbar,(Q=!!V.hbar)&&V.hbar.transition().attr("opacity","0").each("end",function(){Q=!1,j||V.disable()}),j&&V.vbar.transition().attr("opacity","0").each("end",function(){j=!1,Q||V.disable()})))}function v(A,I,D,S){A.call(f,I).call(l,I,D,S)}function f(A,I){e.ensureSingle(A,"rect",n.itemRectClassName,function(D){D.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})}).call(_.stroke,I.bordercolor).call(_.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px")}function l(A,I,D,S){var C=e.ensureSingle(A,"text",n.itemTextClassName,function(H){H.attr({"text-anchor":"start","data-notex":1})}),R=D.label,F=S._fullLayout._meta;F&&(R=e.templateString(R,F)),C.call(t.font,I.font).text(R).call(i.convertToTspans,S)}function x(A,I){var D=I.active;A.each(function(S,C){var R=d.select(this);C===D&&I.showactive&&R.select("rect."+n.itemRectClassName).call(_.fill,n.activeColor)})}function m(A){A.select("rect."+n.itemRectClassName).call(_.fill,n.hoverColor)}function w(A,I){A.select("rect."+n.itemRectClassName).call(_.fill,I.bgcolor)}function b(A,I){var D=I._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=t.tester.selectAll("g."+n.dropdownButtonClassName).data(e.filterVisible(I.buttons));S.enter().append("g").classed(n.dropdownButtonClassName,!0);var C=-1!==["up","down"].indexOf(I.direction);S.each(function(Z,Y){var W=d.select(this);W.call(v,I,Z,A);var te=W.select("."+n.itemTextClassName),z=te.node()&&t.bBox(te.node()).width,N=Math.max(z+n.textPadX,n.minWidth),V=I.font.size*o,Q=i.lineCount(te),j=Math.max(V*Q,n.minHeight)+n.textOffsetY;j=Math.ceil(j),N=Math.ceil(N),D.widths[Y]=N,D.heights[Y]=j,D.height1=Math.max(D.height1,j),D.width1=Math.max(D.width1,N),C?(D.totalWidth=Math.max(D.totalWidth,N),D.openWidth=D.totalWidth,D.totalHeight+=j+n.gapButton,D.openHeight+=j+n.gapButton):(D.totalWidth+=N+n.gapButton,D.openWidth+=N+n.gapButton,D.totalHeight=Math.max(D.totalHeight,j),D.openHeight=D.totalHeight)}),C?D.totalHeight-=n.gapButton:D.totalWidth-=n.gapButton,D.headerWidth=D.width1+n.arrowPadX,D.headerHeight=D.height1,"dropdown"===I.type&&(C?(D.width1+=n.arrowPadX,D.totalHeight=D.height1):D.totalWidth=D.width1,D.totalWidth+=n.arrowPadX),S.remove();var R=D.totalWidth+I.pad.l+I.pad.r,F=D.totalHeight+I.pad.t+I.pad.b,H=A._fullLayout._size;D.lx=H.l+H.w*I.x,D.ly=H.t+H.h*(1-I.y);var U="left";e.isRightAnchor(I)&&(D.lx-=R,U="right"),e.isCenterAnchor(I)&&(D.lx-=R/2,U="center");var X="top";e.isBottomAnchor(I)&&(D.ly-=F,X="bottom"),e.isMiddleAnchor(I)&&(D.ly-=F/2,X="middle"),D.totalWidth=Math.ceil(D.totalWidth),D.totalHeight=Math.ceil(D.totalHeight),D.lx=Math.round(D.lx),D.ly=Math.round(D.ly),g.autoMargin(A,k(I),{x:I.x,y:I.y,l:R*({right:1,center:.5}[U]||0),r:R*({left:1,center:.5}[U]||0),b:F*({top:1,middle:.5}[X]||0),t:F*({bottom:1,middle:.5}[X]||0)})}function k(A){return n.autoMarginIdRoot+A._index}function T(A,I,D,S){S=S||{};var C=A.select("."+n.itemRectClassName),R=A.select("."+n.itemTextClassName),F=I.borderwidth,H=D.index,U=I._dims;t.setTranslate(A,F+D.x,F+D.y);var X=-1!==["up","down"].indexOf(I.direction),Z=S.height||(X?U.heights[H]:U.height1);C.attr({x:0,y:0,width:S.width||(X?U.width1:U.widths[H]),height:Z});var Y=I.font.size*o,W=(i.lineCount(R)-1)*Y/2;i.positionText(R,n.textOffsetX,Z/2-W+n.textOffsetY),X?D.y+=U.heights[H]+D.yPad:D.x+=U.widths[H]+D.xPad,D.index++}function L(A,I){A.attr(n.menuIndexAttrName,I||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}$.exports=function(A){var I=A._fullLayout,D=e.filterVisible(I[n.name]);function S(Y){g.autoMargin(A,k(Y))}var C=I._menulayer.selectAll("g."+n.containerClassName).data(D.length>0?[0]:[]);if(C.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),C.exit().each(function(){d.select(this).selectAll("g."+n.headerGroupClassName).each(S)}).remove(),0!==D.length){var R=C.selectAll("g."+n.headerGroupClassName).data(D,s);R.enter().append("g").classed(n.headerGroupClassName,!0);for(var F=e.ensureSingle(C,"g",n.dropdownButtonGroupClassName,function(Y){Y.style("pointer-events","all")}),H=0;H<D.length;H++)b(A,D[H]);var Z=new p(A,F,"updatemenus"+I._uid);R.enter().size()&&(F.node().parentNode.appendChild(F.node()),F.call(L)),R.exit().each(function(Y){F.call(L),S(Y)}).remove(),R.each(function(Y){var W=d.select(this),te="dropdown"===Y.type?F:null;g.manageCommandObserver(A,Y,Y.buttons,function(z){c(A,Y,0,W,te,Z,z.index,!0)}),"dropdown"===Y.type?(u(A,W,F,Z,Y),a(F,Y)&&h(A,W,F,Z,Y)):h(A,W,null,null,Y)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(y,$,ee){arguments[4][463][0].apply(ee,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(y,$,ee){"use strict";$.exports=e;var d=y("@plotly/d3"),g=y("../color"),_=y("../drawing"),t=y("../../lib");function e(i,r,o){this.gd=i,this.container=r,this.id=o,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(i,r,o){var n=this.gd._fullLayout,p=n.width,s=n.height;this.position=i;var a,c,u,h,v=this.position.l,f=this.position.w,l=this.position.t,x=this.position.h,m=this.position.direction,w="down"===m,b="left"===m,k="up"===m,T=f,L=x;w||b||"right"===m||k||(this.position.direction="down",w=!0),w||k?(c=(a=v)+T,w?(u=l,L=(h=Math.min(u+L,s))-u):L=(h=l+L)-(u=Math.max(h-L,0))):(h=(u=l)+L,b?T=(c=v+T)-(a=Math.max(c-T,0)):(a=v,T=(c=Math.min(a+T,p))-a)),this._box={l:a,t:u,w:T,h:L};var A=f>T,I=e.barLength+2*e.barPad,D=e.barWidth+2*e.barPad,S=v,C=l+x;C+D>s&&(C=s-D);var R=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-horizontal",!0).call(g.fill,e.barColor),A?(this.hbar=R.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:C,width:I,height:D}),this._hbarXMin=S+I/2,this._hbarTranslateMax=T-I):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=x>L,H=e.barWidth+2*e.barPad,U=e.barLength+2*e.barPad,X=v+f,Z=l;X+H>p&&(X=p-H);var Y=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);Y.exit().on(".drag",null).remove(),Y.enter().append("rect").classed("scrollbar-vertical",!0).call(g.fill,e.barColor),F?(this.vbar=Y.attr({rx:e.barRadius,ry:e.barRadius,x:X,y:Z,width:H,height:U}),this._vbarYMin=Z+U/2,this._vbarTranslateMax=L-U):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var W=this.id,te=a-.5,z=F?c+H+.5:c+.5,N=u-.5,V=A?h+D+.5:h+.5,Q=n._topdefs.selectAll("#"+W).data(A||F?[0]:[]);if(Q.exit().remove(),Q.enter().append("clipPath").attr("id",W).append("rect"),A||F?(this._clipRect=Q.select("rect").attr({x:Math.floor(te),y:Math.floor(N),width:Math.ceil(z)-Math.floor(te),height:Math.ceil(V)-Math.floor(N)}),this.container.call(_.setClipUrl,W,this.gd),this.bg.attr({x:v,y:l,width:f,height:x})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(_.setClipUrl,null),delete this._clipRect),A||F){var j=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(j);var J=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault(),d.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));A&&this.hbar.on(".drag",null).call(J),F&&this.vbar.on(".drag",null).call(J)}this.setTranslate(r,o)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(_.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var i=this.translateX,r=this.translateY;this.hbar&&(i-=d.event.dx),this.vbar&&(r-=d.event.dy),this.setTranslate(i,r)},e.prototype._onBoxWheel=function(){var i=this.translateX,r=this.translateY;this.hbar&&(i+=d.event.deltaY),this.vbar&&(r+=d.event.deltaY),this.setTranslate(i,r)},e.prototype._onBarDrag=function(){var i=this.translateX,r=this.translateY;if(this.hbar){var o=i+this._hbarXMin,n=o+this._hbarTranslateMax;i=(t.constrain(d.event.x,o,n)-o)/(n-o)*(this.position.w-this._box.w)}if(this.vbar){var p=r+this._vbarYMin,s=p+this._vbarTranslateMax;r=(t.constrain(d.event.y,p,s)-p)/(s-p)*(this.position.h-this._box.h)}this.setTranslate(i,r)},e.prototype.setTranslate=function(i,r){var o=this.position.w-this._box.w,n=this.position.h-this._box.h;i=t.constrain(i||0,0,o),r=t.constrain(r||0,0,n),this.translateX=i,this.translateY=r,this.container.call(_.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar&&this.hbar.call(_.setTranslate,i+i/o*this._hbarTranslateMax,r),this.vbar&&this.vbar.call(_.setTranslate,i,r+r/n*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(y,$,ee){"use strict";$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(y,$,ee){"use strict";$.exports={axisRefDescription:function(d,g,_){return["If set to a",d,"axis id (e.g. *"+d+"* or","*"+d+"2*), the `"+d+"` position refers to a",d,"coordinate. If set to *paper*, the `"+d+"`","position refers to the distance from the",g,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",g,"("+_+"). If set to a",d,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",g,"of the domain of that axis: e.g.,","*"+d+"2 domain* refers to the domain of the second",d," axis and a",d,"position of 0.5 refers to the","point between the",g,"and the",_,"of the domain of the","second",d,"axis."].join(" ")}}},{}],473:[function(y,$,ee){"use strict";$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(y,$,ee){"use strict";$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(y,$,ee){"use strict";$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(y,$,ee){"use strict";$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(y,$,ee){"use strict";$.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(y,$,ee){"use strict";$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(y,$,ee){"use strict";$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(y,$,ee){"use strict";ee.xmlns="http://www.w3.org/2000/xmlns/",ee.svg="http://www.w3.org/2000/svg",ee.xlink="http://www.w3.org/1999/xlink",ee.svgAttrs={xmlns:ee.svg,"xmlns:xlink":ee.xlink}},{}],481:[function(y,$,ee){"use strict";ee.version=y("./version").version,y("native-promise-only"),y("../build/plotcss");for(var d=y("./registry"),g=ee.register=d.register,_=y("./plot_api"),t=Object.keys(_),e=0;e<t.length;e++){var i=t[e];"_"!==i.charAt(0)&&(ee[i]=_[i]),g({moduleType:"apiMethod",name:i,fn:_[i]})}g(y("./traces/scatter")),g([y("./components/legend"),y("./components/fx"),y("./components/annotations"),y("./components/annotations3d"),y("./components/shapes"),y("./components/images"),y("./components/updatemenus"),y("./components/sliders"),y("./components/rangeslider"),y("./components/rangeselector"),y("./components/grid"),y("./components/errorbars"),y("./components/colorscale"),y("./components/colorbar"),y("./components/modebar")]),g([y("./locale-en"),y("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(g(window.PlotlyLocales),delete window.PlotlyLocales),ee.Icons=y("./fonts/ploticon");var r=y("./components/fx"),o=y("./plots/plots");ee.Plots={resize:o.resize,graphJson:o.graphJson,sendDataToCloud:o.sendDataToCloud},ee.Fx={hover:r.hover,unhover:r.unhover,loneHover:r.loneHover,loneUnhover:r.loneUnhover},ee.Snapshot=y("./snapshot"),ee.PlotSchema=y("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(y,$,ee){"use strict";$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(y,$,ee){"use strict";ee.isLeftAnchor=function(d){return"left"===d.xanchor||"auto"===d.xanchor&&d.x<=1/3},ee.isCenterAnchor=function(d){return"center"===d.xanchor||"auto"===d.xanchor&&d.x>1/3&&d.x<2/3},ee.isRightAnchor=function(d){return"right"===d.xanchor||"auto"===d.xanchor&&d.x>=2/3},ee.isTopAnchor=function(d){return"top"===d.yanchor||"auto"===d.yanchor&&d.y>=2/3},ee.isMiddleAnchor=function(d){return"middle"===d.yanchor||"auto"===d.yanchor&&d.y>1/3&&d.y<2/3},ee.isBottomAnchor=function(d){return"bottom"===d.yanchor||"auto"===d.yanchor&&d.y<=1/3}},{}],484:[function(y,$,ee){"use strict";var d=y("./mod"),g=d.mod,_=d.modHalf,t=Math.PI,e=2*t;function i(p){return Math.abs(p[1]-p[0])>e-1e-14}function r(p,s){return _(s-p,e)}function o(p,s){if(i(s))return!0;var a,c;s[0]<s[1]?(a=s[0],c=s[1]):(a=s[1],c=s[0]),(a=g(a,e))>(c=g(c,e))&&(c+=e);var u=g(p,e),h=u+e;return u>=a&&u<=c||h>=a&&h<=c}function n(p,s,a,c,u,h,v){u=u||0,h=h||0;var f,l,x,m,w,b=i([a,c]);function k(I,D){return[I*Math.cos(D)+u,h-I*Math.sin(D)]}b?(f=0,l=t,x=e):a<c?(f=a,x=c):(f=c,x=a),p<s?(m=p,w=s):(m=s,w=p);var T,L=Math.abs(x-f)<=t?0:1;function A(I,D,S){return"A"+[I,I]+" "+[0,L,S]+" "+k(I,D)}return b?T=null===m?"M"+k(w,f)+A(w,l,0)+A(w,x,0)+"Z":"M"+k(m,f)+A(m,l,0)+A(m,x,0)+"ZM"+k(w,f)+A(w,l,1)+A(w,x,1)+"Z":null===m?(T="M"+k(w,f)+A(w,x,0),v&&(T+="L0,0Z")):T="M"+k(m,f)+"L"+k(w,f)+A(w,x,0)+"L"+k(m,x)+A(m,f,1)+"Z",T}$.exports={deg2rad:function(p){return p/180*t},rad2deg:function(p){return p/t*180},angleDelta:r,angleDist:function(p,s){return Math.abs(r(p,s))},isFullCircle:i,isAngleInsideSector:o,isPtInsideSector:function(p,s,a,c){return!!o(s,c)&&(a[0]<a[1]?(u=a[0],h=a[1]):(u=a[1],h=a[0]),p>=u&&p<=h);var u,h},pathArc:function(p,s,a,c,u){return n(null,p,s,a,c,u,0)},pathSector:function(p,s,a,c,u){return n(null,p,s,a,c,u,1)},pathAnnulus:function(p,s,a,c,u,h){return n(p,s,a,c,u,h,1)}}},{"./mod":510}],485:[function(y,$,ee){"use strict";var d=Array.isArray,g=ArrayBuffer,_=DataView;function t(r){return g.isView(r)&&!(r instanceof _)}function e(r){return d(r)||t(r)}function i(r,o,n){if(e(r)){if(e(r[0])){for(var p=n,s=0;s<r.length;s++)p=o(p,r[s].length);return p}return r.length}return 0}ee.isTypedArray=t,ee.isArrayOrTypedArray=e,ee.isArray1D=function(r){return!e(r[0])},ee.ensureArray=function(r,o){return d(r)||(r=[]),r.length=o,r},ee.concat=function(){var r,o,n,p,s,a,c,u,h=[],v=!0,f=0;for(n=0;n<arguments.length;n++)(a=(p=arguments[n]).length)&&(o?h.push(p):(o=p,s=a),d(p)?r=!1:(v=!1,f?r!==p.constructor&&(r=!1):r=p.constructor),f+=a);if(!f)return[];if(!h.length)return o;if(v)return o.concat.apply(o,h);if(r){for((c=new r(f)).set(o),n=0;n<h.length;n++)c.set(p=h[n],s),s+=p.length;return c}for(c=new Array(f),u=0;u<o.length;u++)c[u]=o[u];for(n=0;n<h.length;n++){for(p=h[n],u=0;u<p.length;u++)c[s+u]=p[u];s+=u}return c},ee.maxRowLength=function(r){return i(r,Math.max,0)},ee.minRowLength=function(r){return i(r,Math.min,1/0)}},{}],486:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../constants/numerical").BADNUM,_=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(t){return"string"==typeof t&&(t=t.replace(_,"")),d(t)?Number(t):g}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(y,$,ee){"use strict";$.exports=function(d){var g=d._fullLayout;g._glcanvas&&g._glcanvas.size()&&g._glcanvas.each(function(_){_.regl&&_.regl.clear({color:!0,depth:!0})})}},{}],488:[function(y,$,ee){"use strict";$.exports=function(d){d._responsiveChartHandler&&(window.removeEventListener("resize",d._responsiveChartHandler),delete d._responsiveChartHandler)}},{}],489:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("tinycolor2"),_=y("../plots/attributes"),t=y("../components/colorscale/scales"),e=y("../components/color"),i=y("../constants/interactions").DESELECTDIM,r=y("./nested_property"),o=y("./regex").counter,n=y("./mod").modHalf,p=y("./array").isArrayOrTypedArray;function s(a,c){var u=ee.valObjectMeta[c.valType];if(c.arrayOk&&p(a))return!0;if(u.validateFunction)return u.validateFunction(a,c);var h={},v=h;return u.coerceFunction(a,{set:function(l){v=l}},h,c),v!==h}ee.valObjectMeta={data_array:{coerceFunction:function(a,c,u){p(a)?c.set(a):void 0!==u&&c.set(u)}},enumerated:{coerceFunction:function(a,c,u,h){h.coerceNumber&&(a=+a),-1===h.values.indexOf(a)?c.set(u):c.set(a)},validateFunction:function(a,c){c.coerceNumber&&(a=+a);for(var u=c.values,h=0;h<u.length;h++){var v=String(u[h]);if("/"===v.charAt(0)&&"/"===v.charAt(v.length-1)){if(new RegExp(v.substr(1,v.length-2)).test(a))return!0}else if(a===u[h])return!0}return!1}},boolean:{coerceFunction:function(a,c,u){c.set(!0===a||!1===a?a:u)}},number:{coerceFunction:function(a,c,u,h){!d(a)||void 0!==h.min&&a<h.min||void 0!==h.max&&a>h.max?c.set(u):c.set(+a)}},integer:{coerceFunction:function(a,c,u,h){a%1||!d(a)||void 0!==h.min&&a<h.min||void 0!==h.max&&a>h.max?c.set(u):c.set(+a)}},string:{coerceFunction:function(a,c,u,h){c.set("string"!=typeof a?!0!==h.strict&&"number"==typeof a?String(a):u:h.noBlank&&!a?u:a)}},color:{coerceFunction:function(a,c,u){g(a).isValid()?c.set(a):c.set(u)}},colorlist:{coerceFunction:function(a,c,u){Array.isArray(a)&&a.length&&a.every(function(h){return g(h).isValid()})?c.set(a):c.set(u)}},colorscale:{coerceFunction:function(a,c,u){c.set(t.get(a,u))}},angle:{coerceFunction:function(a,c,u){"auto"===a?c.set("auto"):d(a)?c.set(n(+a,360)):c.set(u)}},subplotid:{coerceFunction:function(a,c,u,h){var v=h.regex||o(u);"string"==typeof a&&v.test(a)?c.set(a):c.set(u)},validateFunction:function(a,c){var u=c.dflt;return a===u||"string"==typeof a&&!!o(u).test(a)}},flaglist:{coerceFunction:function(a,c,u,h){if("string"==typeof a)if(-1===(h.extras||[]).indexOf(a)){for(var v=a.split("+"),f=0;f<v.length;){var l=v[f];-1===h.flags.indexOf(l)||v.indexOf(l)<f?v.splice(f,1):f++}c.set(v.length?v.join("+"):u)}else c.set(a);else c.set(u)}},any:{coerceFunction:function(a,c,u){c.set(void 0===a?u:a)}},info_array:{coerceFunction:function(a,c,u,h){function v(C,R,F){var H;return void 0===F&&(F=R.dflt),ee.valObjectMeta[R.valType].coerceFunction(C,{set:function(X){H=X}},F,R),H}var f=2===h.dimensions||"1-2"===h.dimensions&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var l,x,m,b,k,T=h.items,L=[],A=Array.isArray(T),I=A&&f&&Array.isArray(T[0]),D=f&&A&&!I,S=A&&!D?T.length:a.length;if(u=Array.isArray(u)?u:[],f)for(l=0;l<S;l++)for(L[l]=[],m=Array.isArray(a[l])?a[l]:[],b=D?T.length:A?T[l].length:m.length,x=0;x<b;x++)void 0!==(k=v(m[x],D?T[x]:A?T[l][x]:T,(u[l]||[])[x]))&&(L[l][x]=k);else for(l=0;l<S;l++)void 0!==(k=v(a[l],A?T[l]:T,u[l]))&&(L[l]=k);c.set(L)}else c.set(u)},validateFunction:function(a,c){if(!Array.isArray(a))return!1;var u=c.items,h=Array.isArray(u),v=2===c.dimensions;if(!c.freeLength&&a.length!==u.length)return!1;for(var f=0;f<a.length;f++)if(v){if(!Array.isArray(a[f])||!c.freeLength&&a[f].length!==u[f].length)return!1;for(var l=0;l<a[f].length;l++)if(!s(a[f][l],h?u[f][l]:u))return!1}else if(!s(a[f],h?u[f]:u))return!1;return!0}}},ee.coerce=function(a,c,u,h,v){var f=r(u,h).get(),l=r(a,h),x=r(c,h),m=l.get(),w=c._template;if(void 0===m&&w&&(m=r(w,h).get(),w=0),void 0===v&&(v=f.dflt),f.arrayOk&&p(m))return x.set(m),m;var b=ee.valObjectMeta[f.valType].coerceFunction;b(m,x,v,f);var k=x.get();return w&&k===v&&!s(m,f)&&(b(m=r(w,h).get(),x,v,f),k=x.get()),k},ee.coerce2=function(a,c,u,h,v){var f=r(a,h),l=ee.coerce(a,c,u,h,v);return null!=f.get()&&l},ee.coerceFont=function(a,c,u){var h={};return h.family=a(c+".family",(u=u||{}).family),h.size=a(c+".size",u.size),h.color=a(c+".color",u.color),h},ee.coercePattern=function(a,c,u,h){if(a(c+".shape")){a(c+".solidity"),a(c+".size");var v="overlay"===a(c+".fillmode");if(!h){var f=a(c+".bgcolor",v?u:void 0);a(c+".fgcolor",v?e.contrast(f):u)}a(c+".fgopacity",v?.5:1)}},ee.coerceHoverinfo=function(a,c,u){var h,v=c._module.attributes,f=v.hoverinfo?v:_,l=f.hoverinfo;if(1===u._dataLength){var x="all"===l.dflt?l.flags.slice():l.dflt.split("+");x.splice(x.indexOf("name"),1),h=x.join("+")}return ee.coerce(a,c,f,"hoverinfo",h)},ee.coerceSelectionMarkerOpacity=function(a,c){if(a.marker){var u,h,v=a.marker.opacity;void 0!==v&&(p(v)||a.selected||a.unselected||(u=v,h=i*v),c("selected.marker.opacity",u),c("unselected.marker.opacity",h))}},ee.validate=s},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(y,$,ee){"use strict";var d,g,_=y("d3-time-format").timeFormat,t=y("fast-isnumeric"),e=y("./loggers"),i=y("./mod").mod,r=y("../constants/numerical"),o=r.BADNUM,n=r.ONEDAY,p=r.ONEHOUR,s=r.ONEMIN,a=r.ONESEC,c=r.EPOCHJD,u=y("../registry"),h=y("d3-time-format").utcFormat,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,l=(new Date).getFullYear()-70;function x(R){return R&&u.componentsRegistry.calendars&&"string"==typeof R&&"gregorian"!==R}function m(R,F){return String(R+Math.pow(10,F)).substr(1)}ee.dateTick0=function(R,F){var X,Z,H=(Z=!!F,x(X=R)?Z?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[X]:u.getComponentMethod("calendars","CANONICAL_TICK")[X]:Z?"2000-01-02":"2000-01-01");if(F<2)return H;var U=ee.dateTime2ms(H,R);return ee.ms2DateTime(U+=n*(F-1),0,R)},ee.dfltRange=function(R){return x(R)?u.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},ee.isJSDate=function(R){return"object"==typeof R&&null!==R&&"function"==typeof R.getTime},ee.dateTime2ms=function(R,F){if(ee.isJSDate(R)){var H=R.getTimezoneOffset()*s,U=(R.getUTCMinutes()-R.getMinutes())*s+(R.getUTCSeconds()-R.getSeconds())*a+(R.getUTCMilliseconds()-R.getMilliseconds());if(U){var X=3*s;H=H-X/2+i(U-H+X/2,X)}return(R=Number(R)-H)>=d&&R<=g?R:o}if("string"!=typeof R&&"number"!=typeof R)return o;R=String(R);var Z=x(F),Y=R.charAt(0);!Z||"G"!==Y&&"g"!==Y||(R=R.substr(1),F="");var W=Z&&"chinese"===F.substr(0,7),te=R.match(W?f:v);if(!te)return o;var z=te[1],N=te[3]||"1",V=Number(te[5]||1),Q=Number(te[7]||0),j=Number(te[9]||0),J=Number(te[11]||0);if(Z){if(2===z.length)return o;var K;z=Number(z);try{var re=u.getComponentMethod("calendars","getCal")(F);if(W){var ie="i"===N.charAt(N.length-1);N=parseInt(N,10),K=re.newDate(z,re.toMonthIndex(z,N,ie),V)}else K=re.newDate(z,Number(N),V)}catch(se){return o}return K?(K.toJD()-c)*n+Q*p+j*s+J*a:o}z=2===z.length?(Number(z)+2e3-l)%100+l:Number(z),N-=1;var ce=new Date(Date.UTC(2e3,N,V,Q,j));return ce.setUTCFullYear(z),ce.getUTCMonth()!==N||ce.getUTCDate()!==V?o:ce.getTime()+J*a},d=ee.MIN_MS=ee.dateTime2ms("-9999"),g=ee.MAX_MS=ee.dateTime2ms("9999-12-31 23:59:59.9999"),ee.isDateTime=function(R,F){return ee.dateTime2ms(R,F)!==o};var w=90*n,b=3*p,k=5*s;function T(R,F,H,U,X){if((F||H||U||X)&&(R+=" "+m(F,2)+":"+m(H,2),(U||X)&&(R+=":"+m(U,2),X))){for(var Z=4;X%10==0;)Z-=1,X/=10;R+="."+m(X,Z)}return R}ee.ms2DateTime=function(R,F,H){if("number"!=typeof R||!(R>=d&&R<=g))return o;F||(F=0);var U,X,Z,Y,W,te,z=Math.floor(10*i(R+.05,1)),N=Math.round(R-z/10);if(x(H)){var V=Math.floor(N/n)+c,Q=Math.floor(i(R,n));try{U=u.getComponentMethod("calendars","getCal")(H).fromJD(V).formatDate("yyyy-mm-dd")}catch(j){U=h("G%Y-%m-%d")(new Date(N))}if("-"===U.charAt(0))for(;U.length<11;)U="-0"+U.substr(1);else for(;U.length<10;)U="0"+U;X=F<w?Math.floor(Q/p):0,Z=F<w?Math.floor(Q%p/s):0,Y=F<b?Math.floor(Q%s/a):0,W=F<k?Q%a*10+z:0}else te=new Date(N),U=h("%Y-%m-%d")(te),X=F<w?te.getUTCHours():0,Z=F<w?te.getUTCMinutes():0,Y=F<b?te.getUTCSeconds():0,W=F<k?10*te.getUTCMilliseconds()+z:0;return T(U,X,Z,Y,W)},ee.ms2DateTimeLocal=function(R){if(!(R>=d+n&&R<=g-n))return o;var F=Math.floor(10*i(R+.05,1)),H=new Date(Math.round(R-F/10));return T(_("%Y-%m-%d")(H),H.getHours(),H.getMinutes(),H.getSeconds(),10*H.getUTCMilliseconds()+F)},ee.cleanDate=function(R,F,H){if(R===o)return F;if(ee.isJSDate(R)||"number"==typeof R&&isFinite(R)){if(x(H))return e.error("JS Dates and milliseconds are incompatible with world calendars",R),F;if(!(R=ee.ms2DateTimeLocal(+R))&&void 0!==F)return F}else if(!ee.isDateTime(R,H))return e.error("unrecognized date",R),F;return R};var L=/%\d?f/g,A=/%h/g,I={1:"1",2:"1",3:"2",4:"2"};function D(R,F,H,U){R=R.replace(L,function(Z){var Y=Math.min(+Z.charAt(1)||6,6);return(F/1e3%1+2).toFixed(Y).substr(2).replace(/0+$/,"")||"0"});var X=new Date(Math.floor(F+.05));if(R=R.replace(A,function(){return I[H("%q")(X)]}),x(U))try{R=u.getComponentMethod("calendars","worldCalFmt")(R,F,U)}catch(Z){return"Invalid"}return H(R)(X)}var S=[59,59.9,59.99,59.999,59.9999];ee.formatDate=function(R,F,H,U,X,Z){if(X=x(X)&&X,!F)if("y"===H)F=Z.year;else if("m"===H)F=Z.month;else{if("d"!==H)return function(Y,W){var te=i(Y+.05,n),z=m(Math.floor(te/p),2)+":"+m(i(Math.floor(te/s),60),2);if("M"!==W){t(W)||(W=0);var N=(100+Math.min(i(Y/a,60),S[W])).toFixed(W).substr(1);W>0&&(N=N.replace(/0+$/,"").replace(/[\.]$/,"")),z+=":"+N}return z}(R,H)+"\n"+D(Z.dayMonthYear,R,U,X);F=Z.dayMonth+"\n"+Z.year}return D(F,R,U,X)};var C=3*n;ee.incrementMonth=function(R,F,H){H=x(H)&&H;var U=i(R,n);if(R=Math.round(R-U),H)try{var X=Math.round(R/n)+c,Z=u.getComponentMethod("calendars","getCal")(H),Y=Z.fromJD(X);return F%12?Z.add(Y,F,"m"):Z.add(Y,F/12,"y"),(Y.toJD()-c)*n+U}catch(te){e.error("invalid ms "+R+" in calendar "+H)}var W=new Date(R+C);return W.setUTCMonth(W.getUTCMonth()+F)+U-C},ee.findExactDates=function(R,F){for(var H,U,X=0,Z=0,Y=0,W=0,te=x(F)&&u.getComponentMethod("calendars","getCal")(F),z=0;z<R.length;z++)if(t(U=R[z])){if(!(U%n))if(te)try{1===(H=te.fromJD(U/n+c)).day()?1===H.month()?X++:Z++:Y++}catch(V){}else 1===(H=new Date(U)).getUTCDate()?0===H.getUTCMonth()?X++:Z++:Y++}else W++;Y+=Z+=X;var N=R.length-W;return{exactYears:X/N,exactMonths:Z/N,exactDays:Y/N}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("./loggers"),_=y("./matrix"),t=y("gl-mat4");function e(p){var s=p&&p.parentNode;s&&s.removeChild(p)}function i(p,s,a){var c="plotly.js-style-"+p,u=document.getElementById(c);u||((u=document.createElement("style")).setAttribute("id",c),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var h=u.sheet;h.insertRule?h.insertRule(s+"{"+a+"}",0):h.addRule?h.addRule(s,a,0):g.warn("addStyleRule failed")}function r(p){var s=window.getComputedStyle(p,null),a=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("-moz-transform")||s.getPropertyValue("-ms-transform")||s.getPropertyValue("-o-transform")||s.getPropertyValue("transform");return"none"===a?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(c){return+c})}function o(p){for(var s=[];n(p);)s.push(p),p=p.parentNode;return s}function n(p){return p&&(p instanceof Element||p instanceof HTMLElement)}$.exports={getGraphDiv:function(p){var s;if("string"==typeof p){if(null===(s=document.getElementById(p)))throw new Error("No DOM element with id '"+p+"' exists on the page.");return s}if(null==p)throw new Error("DOM element provided is null or undefined");return p},isPlotDiv:function(p){var s=d.select(p);return s.node()instanceof HTMLElement&&s.size()&&s.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(p,s){i("global",p,s)},addRelatedStyleRule:i,deleteRelatedStyleRule:function(p){var a=document.getElementById("plotly.js-style-"+p);a&&e(a)},getFullTransformMatrix:function(p){var s=o(p),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return s.forEach(function(c){var u=r(c);if(u){var h=_.convertCssMatrix(u);a=t.multiply(a,a,h)}}),a},getElementTransformMatrix:r,getElementAndAncestors:o,equalDomRects:function(p,s){return p&&s&&p.x===s.x&&p.y===s.y&&p.top===s.top&&p.left===s.left&&p.right===s.right&&p.bottom===s.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(y,$,ee){"use strict";var d=y("events").EventEmitter;$.exports={init:function(_){if(_._ev instanceof d)return _;var t=new d,e=new d;return _._ev=t,_._internalEv=e,_.on=t.on.bind(t),_.once=t.once.bind(t),_.removeListener=t.removeListener.bind(t),_.removeAllListeners=t.removeAllListeners.bind(t),_._internalOn=e.on.bind(e),_._internalOnce=e.once.bind(e),_._removeInternalListener=e.removeListener.bind(e),_._removeAllInternalListeners=e.removeAllListeners.bind(e),_.emit=function(i,r){"undefined"!=typeof jQuery&&jQuery(_).trigger(i,r),t.emit(i,r),e.emit(i,r)},_},triggerHandler:function(_,t,e){var i,r;"undefined"!=typeof jQuery&&(i=jQuery(_).triggerHandler(t,e));var o=_._ev;if(!o)return i;var n,p=o._events[t];if(!p)return i;function s(a){return a.listener?(o.removeListener(t,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(o,[e]))):a.apply(o,[e])}for(p=Array.isArray(p)?p:[p],n=0;n<p.length-1;n++)s(p[n]);return r=s(p[n]),void 0!==i?i:r},purge:function(_){return delete _._ev,delete _.on,delete _.once,delete _.removeListener,delete _.removeAllListeners,delete _.emit,delete _._ev,delete _._internalEv,delete _._internalOn,delete _._internalOnce,delete _._removeInternalListener,delete _._removeAllInternalListeners,_}}},{events:84}],493:[function(y,$,ee){"use strict";var d=y("./is_plain_object.js"),g=Array.isArray;function _(t,e,i,r){var o,n,p,s,a,c,u=t[0],h=t.length;if(2===h&&g(u)&&g(t[1])&&0===u.length){if(function(f,l){var x,m;for(x=0;x<f.length;x++){if(null!==(m=f[x])&&"object"==typeof m)return!1;void 0!==m&&(l[x]=m)}return!0}(t[1],u))return u;u.splice(0,u.length)}for(var v=1;v<h;v++)for(n in o=t[v])p=u[n],s=o[n],r&&g(s)?u[n]=s:e&&s&&(d(s)||(a=g(s)))?(a?(a=!1,c=p&&g(p)?p:[]):c=p&&d(p)?p:{},u[n]=_([c,s],e,i,r)):(void 0!==s||i)&&(u[n]=s);return u}ee.extendFlat=function(){return _(arguments,!1,!1,!1)},ee.extendDeep=function(){return _(arguments,!0,!1,!1)},ee.extendDeepAll=function(){return _(arguments,!0,!0,!1)},ee.extendDeepNoArrays=function(){return _(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(y,$,ee){"use strict";$.exports=function(d){for(var g={},_=[],t=0,e=0;e<d.length;e++){var i=d[e];1!==g[i]&&(g[i]=1,_[t++]=i)}return _}},{}],495:[function(y,$,ee){"use strict";function d(_){return!0===_.visible}function g(_){var t=_[0].trace;return!0===t.visible&&0!==t._length}$.exports=function(_){for(var t,e=(t=_,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?g:d),i=[],r=0;r<_.length;r++){var o=_[r];e(o)&&i.push(o)}return i}},{}],496:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("country-regex"),_=y("@turf/area"),t=y("@turf/centroid"),e=y("@turf/bbox"),i=y("./identity"),r=y("./loggers"),o=y("./is_plain_object"),n=y("./nested_property"),p=y("./polygon"),s=Object.keys(g),a={"ISO-3":i,"USA-states":i,"country names":function(u){for(var h=0;h<s.length;h++){var v=s[h];if(new RegExp(g[v]).test(u.trim().toLowerCase()))return v}return r.log("Unrecognized country name: "+u+"."),!1}};function c(u){var h=u.geojson,v=window.PlotlyGeoAssets||{},f="string"==typeof h?v[h]:h;return o(f)?f:(r.error("Oops ... something went wrong when fetching "+h),!1)}$.exports={locationToFeature:function(u,h,v){if(!h||"string"!=typeof h)return!1;var f,l,x,m=a[u](h);if(m){if("USA-states"===u)for(f=[],x=0;x<v.length;x++)(l=v[x]).properties&&l.properties.gu&&"USA"===l.properties.gu&&f.push(l);else f=v;for(x=0;x<f.length;x++)if((l=f[x]).id===m)return l;r.log(["Location with id",m,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var h,v,f,l,x=u.geometry,m=x.coordinates,w=u.id,b=[];function k(T){for(var L=0;L<T.length-1;L++)if(T[L][0]>0&&T[L+1][0]<0)return L;return null}switch(h="RUS"===w||"FJI"===w?function(T){var L;if(null===k(T))L=T;else for(L=new Array(T.length),l=0;l<T.length;l++)L[l]=[T[l][0]<0?T[l][0]+360:T[l][0],T[l][1]];b.push(p.tester(L))}:"ATA"===w?function(T){var L=k(T);if(null===L)return b.push(p.tester(T));var A=new Array(T.length+1),I=0;for(l=0;l<T.length;l++)l>L?A[I++]=[T[l][0]+360,T[l][1]]:l===L?(A[I++]=T[l],A[I++]=[T[l][0],-90]):A[I++]=T[l];var D=p.tester(A);D.pts.pop(),b.push(D)}:function(T){b.push(p.tester(T))},x.type){case"MultiPolygon":for(v=0;v<m.length;v++)for(f=0;f<m[v].length;f++)h(m[v][f]);break;case"Polygon":for(v=0;v<m.length;v++)h(m[v])}return b},getTraceGeojson:c,extractTraceFeature:function(u){var h=u[0].trace,v=c(h);if(!v)return!1;var f,l={},x=[];for(f=0;f<h._length;f++){var m=u[f];(m.loc||0===m.loc)&&(l[m.loc]=m)}function w(T){var L=n(T,h.featureidkey||"id").get(),A=l[L];if(A){var I=T.geometry;if("Polygon"===I.type||"MultiPolygon"===I.type){var D={type:"Feature",id:L,geometry:I,properties:{}};D.properties.ct=function(S){var C,R=S.geometry;if("MultiPolygon"===R.type)for(var F=R.coordinates,H=0,U=0;U<F.length;U++){var X={type:"Polygon",coordinates:F[U]},Z=_.default(X);Z>H&&(H=Z,C=X)}else C=R;return t.default(C).geometry.coordinates}(D),A.fIn=T,A.fOut=D,x.push(D)}else r.log(["Location",A.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete l[L]}switch(v.type){case"FeatureCollection":var b=v.features;for(f=0;f<b.length;f++)w(b[f]);break;case"Feature":w(v);break;default:return r.warn(["Invalid GeoJSON type",(v.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in l)r.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return x},fetchTraceGeoData:function(u){var h=window.PlotlyGeoAssets||{},v=[];function f(w){return new Promise(function(b,k){d.json(w,function(T,L){return T?(delete h[w],k(new Error(404===T.status?'GeoJSON at URL "'+w+'" does not exist.':"Unexpected error while fetching from "+w))):(h[w]=L,b(L))})})}function l(w){return new Promise(function(b,k){var T=0,L=setInterval(function(){return h[w]&&"pending"!==h[w]?(clearInterval(L),b(h[w])):T>100?(clearInterval(L),k("Unexpected error while fetching from "+w)):void T++},50)})}for(var x=0;x<u.length;x++){var m=u[x][0].trace.geojson;"string"==typeof m&&(h[m]?"pending"===h[m]&&v.push(l(m)):(h[m]="pending",v.push(f(m))))}return v},computeBbox:function(u){return e.default(u)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(y,$,ee){"use strict";var d=y("../constants/numerical").BADNUM;ee.calcTraceToLineCoords=function(g){for(var _=g[0].trace.connectgaps,t=[],e=[],i=0;i<g.length;i++){var r=g[i].lonlat;r[0]!==d?e.push(r):!_&&e.length>0&&(t.push(e),e=[])}return e.length>0&&t.push(e),t},ee.makeLine=function(g){return 1===g.length?{type:"LineString",coordinates:g[0]}:{type:"MultiLineString",coordinates:g}},ee.makePolygon=function(g){if(1===g.length)return{type:"Polygon",coordinates:g};for(var _=new Array(g.length),t=0;t<g.length;t++)_[t]=[g[t]];return{type:"MultiPolygon",coordinates:_}},ee.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(y,$,ee){"use strict";var d,g,_,t=y("./mod").mod;function e(r,o,n,p,s,a,c,u){var h=n-r,v=s-r,f=c-s,l=p-o,x=a-o,m=u-a,w=h*m-f*l;if(0===w)return null;var b=(v*m-f*x)/w,k=(v*l-h*x)/w;return k<0||k>1||b<0||b>1?null:{x:r+h*b,y:o+l*b}}function i(r,o,n,p,s){var a=p*r+s*o;if(a<0)return p*p+s*s;if(a>n){var c=p-r,u=s-o;return c*c+u*u}var h=p*o-s*r;return h*h/n}ee.segmentsIntersect=e,ee.segmentDistance=function(r,o,n,p,s,a,c,u){if(e(r,o,n,p,s,a,c,u))return 0;var h=n-r,v=p-o,f=c-s,l=u-a,x=h*h+v*v,m=f*f+l*l,w=Math.min(i(h,v,x,s-r,a-o),i(h,v,x,c-r,u-o),i(f,l,m,r-s,o-a),i(f,l,m,n-s,p-a));return Math.sqrt(w)},ee.getTextLocation=function(r,o,n,p){if(r===g&&p===_||(d={},g=r,_=p),d[n])return d[n];var s=r.getPointAtLength(t(n-p/2,o)),a=r.getPointAtLength(t(n+p/2,o)),c=Math.atan((a.y-s.y)/(a.x-s.x)),u=r.getPointAtLength(t(n,o)),h={x:(4*u.x+s.x+a.x)/6,y:(4*u.y+s.y+a.y)/6,theta:c};return d[n]=h,h},ee.clearLocationCache=function(){g=null},ee.getVisibleSegment=function(r,o,n){var p,s,a=o.left,c=o.right,u=o.top,h=o.bottom,v=0,f=r.getTotalLength(),l=f;function x(w){var b=r.getPointAtLength(w);0===w?p=b:w===f&&(s=b);var k=b.x<a?a-b.x:b.x>c?b.x-c:0,T=b.y<u?u-b.y:b.y>h?b.y-h:0;return Math.sqrt(k*k+T*T)}for(var m=x(v);m;){if((v+=m+n)>l)return;m=x(v)}for(m=x(l);m;){if(v>(l-=m+n))return;m=x(l)}return{min:v,max:l,len:l-v,total:f,isClosed:0===v&&l===f&&Math.abs(p.x-s.x)<.1&&Math.abs(p.y-s.y)<.1}},ee.findPointOnPath=function(r,o,n,p){for(var s,a,c,u=(p=p||{}).pathLength||r.getTotalLength(),h=p.tolerance||.001,v=p.iterationLimit||30,f=r.getPointAtLength(0)[n]>r.getPointAtLength(u)[n]?-1:1,l=0,x=0,m=u;l<v;){if(c=(a=r.getPointAtLength(s=(x+m)/2))[n]-o,Math.abs(c)<h)return a;f*c>0?m=s:x=s,l++}return a}},{"./mod":510}],499:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("tinycolor2"),_=y("color-normalize"),t=y("../components/colorscale"),e=y("../components/color/attributes").defaultLine,i=y("./array").isArrayOrTypedArray,r=_(e);function o(s,a){var c=s;return c[3]*=a,c}function n(s){if(d(s))return r;var a=_(s);return a.length?a:r}function p(s){return d(s)?s:1}$.exports={formatColor:function(s,a,c){var u,h,v,f,l,x=s.color,m=i(x),w=i(a),b=t.extractOpts(s),k=[];if(u=void 0!==b.colorscale?t.makeColorScaleFuncFromTrace(s):n,h=m?function(L,A){return void 0===L[A]?r:_(u(L[A]))}:n,v=w?function(L,A){return void 0===L[A]?1:p(L[A])}:p,m||w)for(var T=0;T<c;T++)f=h(x,T),l=v(a,T),k[T]=o(f,l);else k=o(_(x),a);return k},parseColorScale:function(s){var a=t.extractOpts(s),c=a.colorscale;return a.reversescale&&(c=t.flipScale(a.colorscale)),c.map(function(u){var h=u[0],v=g(u[1]).toRgb();return{index:h,rgb:[v.r,v.g,v.b,v.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(y,$,ee){"use strict";var d=y("./identity");function g(_){return[_]}$.exports={keyFun:function(_){return _.key},repeat:g,descend:d,wrap:g,unwrap:function(_){return _[0]}}},{"./identity":501}],501:[function(y,$,ee){"use strict";$.exports=function(d){return d}},{}],502:[function(y,$,ee){"use strict";$.exports=function(d,g){if(!g)return d;var _=1/Math.abs(g),t=_>1?(_*d+_*g)/_:d+g,e=String(t).length;if(e>16){var i=String(g).length;if(e>=String(d).length+i){var r=parseFloat(t).toPrecision(12);-1===r.indexOf("e+")&&(t=+r)}}return t}},{}],503:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-time-format").utcFormat,_=y("d3-format").format,t=y("fast-isnumeric"),e=y("../constants/numerical"),i=e.FP_SAFE,r=-i,o=e.BADNUM,n=$.exports={};n.adjustFormat=function(z){return!z||/^\d[.]\df/.test(z)||/[.]\d%/.test(z)?z:"0.f"===z?"~f":/^\d%/.test(z)?"~%":/^\ds/.test(z)?"~s":!/^[~,.0$]/.test(z)&&/[&fps]/.test(z)?"~"+z:z};var p={};n.warnBadFormat=function(z){var N=String(z);p[N]||(p[N]=1,n.warn('encountered bad format: "'+N+'"'))},n.noFormat=function(z){return String(z)},n.numberFormat=function(z){var N;try{N=_(n.adjustFormat(z))}catch(V){return n.warnBadFormat(z),n.noFormat}return N},n.nestedProperty=y("./nested_property"),n.keyedContainer=y("./keyed_container"),n.relativeAttr=y("./relative_attr"),n.isPlainObject=y("./is_plain_object"),n.toLogRange=y("./to_log_range"),n.relinkPrivateKeys=y("./relink_private");var s=y("./array");n.isTypedArray=s.isTypedArray,n.isArrayOrTypedArray=s.isArrayOrTypedArray,n.isArray1D=s.isArray1D,n.ensureArray=s.ensureArray,n.concat=s.concat,n.maxRowLength=s.maxRowLength,n.minRowLength=s.minRowLength;var a=y("./mod");n.mod=a.mod,n.modHalf=a.modHalf;var c=y("./coerce");n.valObjectMeta=c.valObjectMeta,n.coerce=c.coerce,n.coerce2=c.coerce2,n.coerceFont=c.coerceFont,n.coercePattern=c.coercePattern,n.coerceHoverinfo=c.coerceHoverinfo,n.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,n.validate=c.validate;var u=y("./dates");n.dateTime2ms=u.dateTime2ms,n.isDateTime=u.isDateTime,n.ms2DateTime=u.ms2DateTime,n.ms2DateTimeLocal=u.ms2DateTimeLocal,n.cleanDate=u.cleanDate,n.isJSDate=u.isJSDate,n.formatDate=u.formatDate,n.incrementMonth=u.incrementMonth,n.dateTick0=u.dateTick0,n.dfltRange=u.dfltRange,n.findExactDates=u.findExactDates,n.MIN_MS=u.MIN_MS,n.MAX_MS=u.MAX_MS;var h=y("./search");n.findBin=h.findBin,n.sorterAsc=h.sorterAsc,n.sorterDes=h.sorterDes,n.distinctVals=h.distinctVals,n.roundUp=h.roundUp,n.sort=h.sort,n.findIndexOfMin=h.findIndexOfMin,n.sortObjectKeys=y("./sort_object_keys");var v=y("./stats");n.aggNums=v.aggNums,n.len=v.len,n.mean=v.mean,n.median=v.median,n.midRange=v.midRange,n.variance=v.variance,n.stdev=v.stdev,n.interp=v.interp;var f=y("./matrix");n.init2dArray=f.init2dArray,n.transposeRagged=f.transposeRagged,n.dot=f.dot,n.translationMatrix=f.translationMatrix,n.rotationMatrix=f.rotationMatrix,n.rotationXYMatrix=f.rotationXYMatrix,n.apply3DTransform=f.apply3DTransform,n.apply2DTransform=f.apply2DTransform,n.apply2DTransform2=f.apply2DTransform2,n.convertCssMatrix=f.convertCssMatrix,n.inverseTransformMatrix=f.inverseTransformMatrix;var l=y("./angles");n.deg2rad=l.deg2rad,n.rad2deg=l.rad2deg,n.angleDelta=l.angleDelta,n.angleDist=l.angleDist,n.isFullCircle=l.isFullCircle,n.isAngleInsideSector=l.isAngleInsideSector,n.isPtInsideSector=l.isPtInsideSector,n.pathArc=l.pathArc,n.pathSector=l.pathSector,n.pathAnnulus=l.pathAnnulus;var x=y("./anchor_utils");n.isLeftAnchor=x.isLeftAnchor,n.isCenterAnchor=x.isCenterAnchor,n.isRightAnchor=x.isRightAnchor,n.isTopAnchor=x.isTopAnchor,n.isMiddleAnchor=x.isMiddleAnchor,n.isBottomAnchor=x.isBottomAnchor;var m=y("./geometry2d");n.segmentsIntersect=m.segmentsIntersect,n.segmentDistance=m.segmentDistance,n.getTextLocation=m.getTextLocation,n.clearLocationCache=m.clearLocationCache,n.getVisibleSegment=m.getVisibleSegment,n.findPointOnPath=m.findPointOnPath;var w=y("./extend");n.extendFlat=w.extendFlat,n.extendDeep=w.extendDeep,n.extendDeepAll=w.extendDeepAll,n.extendDeepNoArrays=w.extendDeepNoArrays;var b=y("./loggers");n.log=b.log,n.warn=b.warn,n.error=b.error;var k=y("./regex");n.counterRegex=k.counter;var T=y("./throttle");n.throttle=T.throttle,n.throttleDone=T.done,n.clearThrottle=T.clear;var L=y("./dom");function A(z){var N={};for(var V in z)for(var Q=z[V],j=0;j<Q.length;j++)N[Q[j]]=+V;return N}n.getGraphDiv=L.getGraphDiv,n.isPlotDiv=L.isPlotDiv,n.removeElement=L.removeElement,n.addStyleRule=L.addStyleRule,n.addRelatedStyleRule=L.addRelatedStyleRule,n.deleteRelatedStyleRule=L.deleteRelatedStyleRule,n.getFullTransformMatrix=L.getFullTransformMatrix,n.getElementTransformMatrix=L.getElementTransformMatrix,n.getElementAndAncestors=L.getElementAndAncestors,n.equalDomRects=L.equalDomRects,n.clearResponsive=y("./clear_responsive"),n.preserveDrawingBuffer=y("./preserve_drawing_buffer"),n.makeTraceGroups=y("./make_trace_groups"),n._=y("./localize"),n.notifier=y("./notifier"),n.filterUnique=y("./filter_unique"),n.filterVisible=y("./filter_visible"),n.pushUnique=y("./push_unique"),n.increment=y("./increment"),n.cleanNumber=y("./clean_number"),n.ensureNumber=function(z){return t(z)?(z=Number(z))>i||z<r?o:z:o},n.isIndex=function(z,N){return!(void 0!==N&&z>=N)&&t(z)&&z>=0&&z%1==0},n.noop=y("./noop"),n.identity=y("./identity"),n.repeat=function(z,N){for(var V=new Array(N),Q=0;Q<N;Q++)V[Q]=z;return V},n.swapAttrs=function(z,N,V,Q){V||(V="x"),Q||(Q="y");for(var j=0;j<N.length;j++){var J=N[j],K=n.nestedProperty(z,J.replace("?",V)),re=n.nestedProperty(z,J.replace("?",Q)),ie=K.get();K.set(re.get()),re.set(ie)}},n.raiseToTop=function(z){z.parentNode.appendChild(z)},n.cancelTransition=function(z){return z.transition().duration(0)},n.constrain=function(z,N,V){return N>V?Math.max(V,Math.min(N,z)):Math.max(N,Math.min(V,z))},n.bBoxIntersect=function(z,N,V){return z.left<=N.right+(V=V||0)&&N.left<=z.right+V&&z.top<=N.bottom+V&&N.top<=z.bottom+V},n.simpleMap=function(z,N,V,Q,j){for(var J=z.length,K=new Array(J),re=0;re<J;re++)K[re]=N(z[re],V,Q,j);return K},n.randstr=function z(N,V,Q,j){if(Q||(Q=16),void 0===V&&(V=24),V<=0)return"0";var J,K,re=Math.log(Math.pow(2,V))/Math.log(Q),ie="";for(J=2;re===1/0;J*=2)re=Math.log(Math.pow(2,V/J))/Math.log(Q)*J;var ce=re-Math.floor(re);for(J=0;J<Math.floor(re);J++)ie=Math.floor(Math.random()*Q).toString(Q)+ie;ce&&(K=Math.pow(Q,ce),ie=Math.floor(Math.random()*K).toString(Q)+ie);var se=parseInt(ie,Q);return N&&N[ie]||se!==1/0&&se>=Math.pow(2,V)?j>10?(n.warn("randstr failed uniqueness"),ie):z(N,V,Q,(j||0)+1):ie},n.OptionControl=function(z,N){z||(z={}),N||(N="opt");var V={optionList:[],_newoption:function(Q){Q[N]=z,V[Q.name]=Q,V.optionList.push(Q)}};return V["_"+N]=z,V},n.smooth=function(z,N){if((N=Math.round(N)||0)<2)return z;var V,Q,j,J,K=z.length,re=2*K,ie=2*N-1,ce=new Array(ie),se=new Array(K);for(V=0;V<ie;V++)ce[V]=(1-Math.cos(Math.PI*(V+1)/N))/(2*N);for(V=0;V<K;V++){for(J=0,Q=0;Q<ie;Q++)(j=V+Q+1-N)<-K?j-=re*Math.round(j/re):j>=re&&(j-=re*Math.floor(j/re)),j<0?j=-1-j:j>=K&&(j=re-1-j),J+=z[j]*ce[Q];se[V]=J}return se},n.syncOrAsync=function(z,N,V){var Q;function j(){return n.syncOrAsync(z,N,V)}for(;z.length;)if((Q=(0,z.splice(0,1)[0])(N))&&Q.then)return Q.then(j);return V&&V(N)},n.stripTrailingSlash=function(z){return"/"===z.substr(-1)?z.substr(0,z.length-1):z},n.noneOrAll=function(z,N,V){if(z){var Q,j=!1,J=!0;for(Q=0;Q<V.length;Q++)null!=z[V[Q]]?j=!0:J=!1;if(j&&!J)for(Q=0;Q<V.length;Q++)z[V[Q]]=N[V[Q]]}},n.mergeArray=function(z,N,V,Q){var j="function"==typeof Q;if(n.isArrayOrTypedArray(z))for(var J=Math.min(z.length,N.length),K=0;K<J;K++){var re=z[K];N[K][V]=j?Q(re):re}},n.mergeArrayCastPositive=function(z,N,V){return n.mergeArray(z,N,V,function(Q){var j=+Q;return isFinite(j)&&j>0?j:0})},n.fillArray=function(z,N,V,Q){if(Q=Q||n.identity,n.isArrayOrTypedArray(z))for(var j=0;j<N.length;j++)N[j][V]=Q(z[j])},n.castOption=function(z,N,V,Q){Q=Q||n.identity;var j=n.nestedProperty(z,V).get();return n.isArrayOrTypedArray(j)?Array.isArray(N)&&n.isArrayOrTypedArray(j[N[0]])?Q(j[N[0]][N[1]]):Q(j[N]):j},n.extractOption=function(z,N,V,Q){if(V in z)return z[V];var j=n.nestedProperty(N,Q).get();return Array.isArray(j)?void 0:j},n.tagSelected=function(z,N,V){var Q,j,J=N.selectedpoints,K=N._indexToPoints;K&&(Q=A(K));for(var re=0;re<J.length;re++){var ie=J[re];if(n.isIndex(ie)||n.isArrayOrTypedArray(ie)&&n.isIndex(ie[0])&&n.isIndex(ie[1])){var ce=Q?Q[ie]:ie,se=V?V[ce]:ce;void 0!==(j=se)&&j<z.length&&(z[se].selected=1)}}},n.selIndices2selPoints=function(z){var N=z.selectedpoints,V=z._indexToPoints;if(V){for(var Q=A(V),j=[],J=0;J<N.length;J++){var K=N[J];if(n.isIndex(K)){var re=Q[K];n.isIndex(re)&&j.push(re)}}return j}return N},n.getTargetArray=function(z,N){var V=N.target;if("string"==typeof V&&V){var Q=n.nestedProperty(z,V).get();return!!Array.isArray(Q)&&Q}return!!Array.isArray(V)&&V},n.minExtend=function(z,N){var V={};"object"!=typeof N&&(N={});var Q,j,J,K=Object.keys(z);for(Q=0;Q<K.length;Q++)J=z[j=K[Q]],"_"!==j.charAt(0)&&"function"!=typeof J&&(V[j]="module"===j?J:Array.isArray(J)?"colorscale"===j?J.slice():J.slice(0,3):n.isTypedArray(J)?J.subarray(0,3):J&&"object"==typeof J?n.minExtend(z[j],N[j]):J);for(K=Object.keys(N),Q=0;Q<K.length;Q++)"object"==typeof(J=N[j=K[Q]])&&j in V&&"object"==typeof V[j]||(V[j]=J);return V},n.titleCase=function(z){return z.charAt(0).toUpperCase()+z.substr(1)},n.containsAny=function(z,N){for(var V=0;V<N.length;V++)if(-1!==z.indexOf(N[V]))return!0;return!1},n.isIE=function(){return void 0!==window.navigator.msSaveBlob};var I=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return I.test(window.navigator.userAgent)};var D=/iPad|iPhone|iPod/;n.isIOS=function(){return D.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var z=S.exec(window.navigator.userAgent);if(z&&2===z.length){var N=parseInt(z[1]);if(!isNaN(N))return N}return null},n.isD3Selection=function(z){return z instanceof d.selection},n.ensureSingle=function(z,N,V,Q){var j=z.select(N+(V?"."+V:""));if(j.size())return j;var J=z.append(N);return V&&J.classed(V,!0),Q&&J.call(Q),J},n.ensureSingleById=function(z,N,V,Q){var j=z.select(N+"#"+V);if(j.size())return j;var J=z.append(N).attr("id",V);return Q&&J.call(Q),J},n.objectFromPath=function(z,N){for(var V,Q=z.split("."),j=V={},J=0;J<Q.length;J++){var K=Q[J],re=null,ie=Q[J].match(/(.*)\[([0-9]+)\]/);ie?(re=ie[2],(V=V[K=ie[1]]=[])[re]=J===Q.length-1?N:{},V=V[re]):(V[K]=J===Q.length-1?N:{},V=V[K])}return j};var C=/^([^\[\.]+)\.(.+)?/,R=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(z){var N,V,Q,j,J,K,re;if("object"==typeof z&&!Array.isArray(z))for(V in z)z.hasOwnProperty(V)&&((N=V.match(C))?(j=z[V],Q=N[1],delete z[V],z[Q]=n.extendDeepNoArrays(z[Q]||{},n.objectFromPath(V,n.expandObjectPaths(j))[Q])):(N=V.match(R))?(j=z[V],Q=N[1],J=parseInt(N[2]),delete z[V],z[Q]=z[Q]||[],"."===N[3]?(re=N[4],K=z[Q][J]=z[Q][J]||{},n.extendDeepNoArrays(K,n.objectFromPath(re,n.expandObjectPaths(j)))):z[Q][J]=n.expandObjectPaths(j)):z[V]=n.expandObjectPaths(z[V]));return z},n.numSeparate=function(z,N,V){if(V||(V=!1),"string"!=typeof N||0===N.length)throw new Error("Separator string required for formatting!");"number"==typeof z&&(z=String(z));var Q=/(\d+)(\d{3})/,j=N.charAt(0),J=N.charAt(1),K=z.split("."),re=K[0],ie=K.length>1?j+K[1]:"";if(J&&(K.length>1||re.length>4||V))for(;Q.test(re);)re=re.replace(Q,"$1"+J+"$2");return re+ie},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var F=/^\w*$/;n.templateString=function(z,N){var V={};return z.replace(n.TEMPLATE_STRING_REGEX,function(Q,j){var J;return F.test(j)?J=N[j]:(V[j]=V[j]||n.nestedProperty(N,j).get,J=V[j]()),n.isValidTextValue(J)?J:""})};var H={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return Z.apply(H,arguments)};var U={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return Z.apply(U,arguments)};var X=/^[:|\|]/;function Z(z,N,V){var Q=this,j=arguments;N||(N={});var J={};return z.replace(n.TEMPLATE_STRING_REGEX,function(K,re,ie){var ce,se,de,ue="_xother"===re||"_yother"===re,ge="_xother_"===re||"_yother_"===re,be="xother_"===re||"yother_"===re,Te="xother"===re||"yother"===re||ue||be||ge,we=re;if((ue||ge)&&(we=we.substring(1)),(be||ge)&&(we=we.substring(0,we.length-1)),Te){if(void 0===(ce=N[we]))return""}else for(de=3;de<j.length;de++)if(se=j[de]){if(se.hasOwnProperty(we)){ce=se[we];break}if(F.test(we)||(ce=n.nestedProperty(se,we).get(),(ce=J[we]||n.nestedProperty(se,we).get())&&(J[we]=ce)),void 0!==ce)break}if(void 0===ce&&Q)return Q.count<Q.max&&(n.warn("Variable '"+we+"' in "+Q.name+" could not be found!"),ce=K),Q.count===Q.max&&n.warn("Too many "+Q.name+" warnings - additional warnings will be suppressed"),Q.count++,K;if(ie){var Le;if(":"===ie[0]&&(ce=(Le=V?V.numberFormat:n.numberFormat)(ie.replace(X,""))(ce)),"|"===ie[0]){Le=V?V.timeFormat:g;var fe=n.dateTime2ms(ce);ce=n.formatDate(fe,ie.replace(X,""),!1,Le)}}else{var ve=we+"Label";N.hasOwnProperty(ve)&&(ce=N[ve])}return Te&&(ce="("+ce+")",(ue||ge)&&(ce=" "+ce),(be||ge)&&(ce+=" ")),ce})}n.subplotSort=function(z,N){for(var V=Math.min(z.length,N.length)+1,Q=0,j=0,J=0;J<V;J++){var K=z.charCodeAt(J)||0,re=N.charCodeAt(J)||0,ie=K>=48&&K<=57,ce=re>=48&&re<=57;if(ie&&(Q=10*Q+K-48),ce&&(j=10*j+re-48),!ie||!ce){if(Q!==j)return Q-j;if(K!==re)return K-re}}return j-Q};var Y=2e9;n.seedPseudoRandom=function(){Y=2e9},n.pseudoRandom=function(){var z=Y;return Y=(69069*Y+1)%4294967296,Math.abs(Y-z)<429496729?n.pseudoRandom():Y/4294967296},n.fillText=function(z,N,V){var Q=Array.isArray(V)?function(K){V.push(K)}:function(K){V.text=K},j=n.extractOption(z,N,"htx","hovertext");if(n.isValidTextValue(j))return Q(j);var J=n.extractOption(z,N,"tx","text");return n.isValidTextValue(J)?Q(J):void 0},n.isValidTextValue=function(z){return z||0===z},n.formatPercent=function(z,N){N=N||0;for(var V=(Math.round(100*z*Math.pow(10,N))*Math.pow(.1,N)).toFixed(N)+"%",Q=0;Q<N;Q++)-1!==V.indexOf(".")&&(V=(V=V.replace("0%","%")).replace(".%","%"));return V},n.isHidden=function(z){var N=window.getComputedStyle(z).display;return!N||"none"===N},n.strTranslate=function(z,N){return z||N?"translate("+z+","+N+")":""},n.strRotate=function(z){return z?"rotate("+z+")":""},n.strScale=function(z){return 1!==z?"scale("+z+")":""},n.getTextTransform=function(z){var N=z.noCenter,V=z.textX,Q=z.textY,ie=z.rotate,ce=z.scale;return ce?ce>1&&(ce=1):ce=0,n.strTranslate(z.targetX-ce*(V+(z.anchorX||0)),z.targetY-ce*(Q+(z.anchorY||0)))+n.strScale(ce)+(ie?"rotate("+ie+(N?"":" "+V+" "+Q)+")":"")},n.ensureUniformFontSize=function(z,N){var V=n.extendFlat({},N);return V.size=Math.max(N.size,z._fullLayout.uniformtext.minsize||0),V},n.join2=function(z,N,V){var Q=z.length;return Q>1?z.slice(0,-1).join(N)+V+z[Q-1]:z.join(N)},n.bigFont=function(z){return Math.round(1.2*z)};var W=n.getFirefoxVersion(),te=null!==W&&W<86;n.getPositionFromD3Event=function(){return te?[d.event.layerX,d.event.layerY]:[d.event.offsetX,d.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(y,$,ee){"use strict";$.exports=function(d){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(d):"[object Object]"===Object.prototype.toString.call(d)&&Object.getPrototypeOf(d).hasOwnProperty("hasOwnProperty")}},{}],505:[function(y,$,ee){"use strict";var d=y("./nested_property"),g=/^\w*$/;$.exports=function(_,t,e,i){var r,o,n;e=e||"name",i=i||"value";var p={};t&&t.length?(n=d(_,t),o=n.get()):o=_,t=t||"";var s={};if(o)for(r=0;r<o.length;r++)s[o[r][e]]=r;var a=g.test(i),c={set:function(u,h){var v=null===h?4:0;if(!o){if(!n||4===v)return;n.set(o=[])}var f=s[u];if(void 0===f){if(4===v)return;v|=3,s[u]=f=o.length}else h!==(a?o[f][i]:d(o[f],i).get())&&(v|=2);var l=o[f]=o[f]||{};return l[e]=u,a?l[i]=h:d(l,i).set(h),null!==h&&(v&=-5),p[f]=p[f]|v,c},get:function(u){if(o){var h=s[u];return void 0===h?void 0:a?o[h][i]:d(o[h],i).get()}},rename:function(u,h){var v=s[u];return void 0===v||(p[v]=1|p[v],s[h]=v,delete s[u],o[v][e]=h),c},remove:function(u){var h=s[u];if(void 0===h)return c;var v=o[h];if(Object.keys(v).length>2)return p[h]=2|p[h],c.set(u,null);if(a){for(r=h;r<o.length;r++)p[r]=3|p[r];for(r=h;r<o.length;r++)s[o[r][e]]--;o.splice(h,1),delete s[u]}else d(v,i).set(null),p[h]=6|p[h];return c},constructUpdate:function(){for(var u,h,v={},f=Object.keys(p),l=0;l<f.length;l++)u=t+"["+(h=f[l])+"]",o[h]?(1&p[h]&&(v[u+"."+e]=o[h][e]),2&p[h]&&(v[u+"."+i]=a?4&p[h]?null:o[h][i]:4&p[h]?null:d(o[h],i).get())):v[u]=null;return v}};return c}},{"./nested_property":511}],506:[function(y,$,ee){"use strict";var d=y("../registry");$.exports=function(g,_){for(var t=g._context.locale,e=0;e<2;e++){for(var i=g._context.locales,r=0;r<2;r++){var o=(i[t]||{}).dictionary;if(o){var n=o[_];if(n)return n}i=d.localeRegistry}var p=t.split("-")[0];if(p===t)break;t=p}return _}},{"../registry":638}],507:[function(y,$,ee){"use strict";var d=y("../plot_api/plot_config").dfltConfig,g=y("./notifier"),_=$.exports={};_.log=function(){var t;if(d.logging>1){var e=["LOG:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(d.notifyOnLogging>1){var i=[];for(t=0;t<arguments.length;t++)i.push(arguments[t]);g(i.join("<br>"),"long")}},_.warn=function(){var t;if(d.logging>0){var e=["WARN:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(d.notifyOnLogging>0){var i=[];for(t=0;t<arguments.length;t++)i.push(arguments[t]);g(i.join("<br>"),"stick")}},_.error=function(){var t;if(d.logging>0){var e=["ERROR:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(d.notifyOnLogging>0){var i=[];for(t=0;t<arguments.length;t++)i.push(arguments[t]);g(i.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(y,$,ee){"use strict";var d=y("@plotly/d3");$.exports=function(g,_,t){var e=g.selectAll("g."+t.replace(/\s/g,".")).data(_,function(r){return r[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",t),e.order();var i=g.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(r){r[0][i]=d.select(this)}),e}},{"@plotly/d3":58}],509:[function(y,$,ee){"use strict";var d=y("gl-mat4");ee.init2dArray=function(g,_){for(var t=new Array(g),e=0;e<g;e++)t[e]=new Array(_);return t},ee.transposeRagged=function(g){var _,t,e=0,i=g.length;for(_=0;_<i;_++)e=Math.max(e,g[_].length);var r=new Array(e);for(_=0;_<e;_++)for(r[_]=new Array(i),t=0;t<i;t++)r[_][t]=g[t][_];return r},ee.dot=function(g,_){if(!g.length||!_.length||g.length!==_.length)return null;var t,e,i=g.length;if(g[0].length)for(t=new Array(i),e=0;e<i;e++)t[e]=ee.dot(g[e],_);else if(_[0].length){var r=ee.transposeRagged(_);for(t=new Array(r.length),e=0;e<r.length;e++)t[e]=ee.dot(g,r[e])}else for(t=0,e=0;e<i;e++)t+=g[e]*_[e];return t},ee.translationMatrix=function(g,_){return[[1,0,g],[0,1,_],[0,0,1]]},ee.rotationMatrix=function(g){var _=g*Math.PI/180;return[[Math.cos(_),-Math.sin(_),0],[Math.sin(_),Math.cos(_),0],[0,0,1]]},ee.rotationXYMatrix=function(g,_,t){return ee.dot(ee.dot(ee.translationMatrix(_,t),ee.rotationMatrix(g)),ee.translationMatrix(-_,-t))},ee.apply3DTransform=function(g){return function(){var _=arguments,t=1===arguments.length?_[0]:[_[0],_[1],_[2]||0];return ee.dot(g,[t[0],t[1],t[2],1]).slice(0,3)}},ee.apply2DTransform=function(g){return function(){var _=arguments;3===_.length&&(_=_[0]);var t=1===arguments.length?_[0]:[_[0],_[1]];return ee.dot(g,[t[0],t[1],1]).slice(0,2)}},ee.apply2DTransform2=function(g){var _=ee.apply2DTransform(g);return function(t){return _(t.slice(0,2)).concat(_(t.slice(2,4)))}},ee.convertCssMatrix=function(g){if(g){var _=g.length;if(16===_)return g;if(6===_)return[g[0],g[1],0,0,g[2],g[3],0,0,0,0,1,0,g[4],g[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ee.inverseTransformMatrix=function(g){var _=[];return d.invert(_,g),[[_[0],_[1],_[2],_[3]],[_[4],_[5],_[6],_[7]],[_[8],_[9],_[10],_[11]],[_[12],_[13],_[14],_[15]]]}},{"gl-mat4":210}],510:[function(y,$,ee){"use strict";$.exports={mod:function(d,g){var _=d%g;return _<0?_+g:_},modHalf:function(d,g){return Math.abs(d)>g/2?d-Math.round(d/g)*g:d}}},{}],511:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("./array").isArrayOrTypedArray;function _(p,s){return function(){var a,c,u,h,v,f=p;for(h=0;h<s.length-1;h++){if(-1===(a=s[h])){for(c=!0,u=[],v=0;v<f.length;v++)u[v]=_(f[v],s.slice(h+1))(),u[v]!==u[0]&&(c=!1);return c?u[0]:u}if("number"==typeof a&&!g(f)||"object"!=typeof(f=f[a])||null===f)return}if("object"==typeof f&&null!==f&&null!==(u=f[s[h]]))return u}}$.exports=function(p,s){if(d(s))s=String(s);else if("string"!=typeof s||"[-1]"===s.substr(s.length-4))throw"bad property string";for(var a,c,u,h=0,v=s.split(".");h<v.length;){if(a=String(v[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])v[h]=a[1];else{if(0!==h)throw"bad property string";v.splice(0,1)}for(c=a[2].substr(1,a[2].length-2).split("]["),u=0;u<c.length;u++)h++,v.splice(h,0,Number(c[u]))}h++}return"object"!=typeof p?{set:function(){throw"bad container"},get:function(){},astr:s,parts:v,obj:p}:{set:i(p,v,s),get:_(p,v),astr:s,parts:v,obj:p}};var t=/(^|\.)args\[/;function e(p,s){return void 0===p||null===p&&!s.match(t)}function i(p,s,a){return function(c){var u,h,v=p,f="",l=[[p,f]],x=e(c,a);for(h=0;h<s.length-1;h++){if("number"==typeof(u=s[h])&&!g(v))throw"array index but container is not an array";if(-1===u){if(x=!o(v,s.slice(h+1),c,a))break;return}if(!n(v,u,s[h+1],x))break;if("object"!=typeof(v=v[u])||null===v)throw"container is not an object";f=r(f,u),l.push([v,f])}if(x){if(h===s.length-1&&(delete v[s[h]],Array.isArray(v)&&+s[h]==v.length-1))for(;v.length&&void 0===v[v.length-1];)v.pop()}else v[s[h]]=c}}function r(p,s){var a=s;return d(s)?a="["+s+"]":p&&(a="."+s),p+a}function o(p,s,a,c){var u,h=g(a),v=!0,f=a,l=c.replace("-1",0),x=!h&&e(a,l),m=s[0];for(u=0;u<p.length;u++)l=c.replace("-1",u),h&&(x=e(f=a[u%a.length],l)),x&&(v=!1),n(p,u,m,x)&&i(p[u],s,c.replace("-1",u))(f);return v}function n(p,s,a,c){if(void 0===p[s]){if(c)return!1;p[s]="number"==typeof a?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(y,$,ee){"use strict";$.exports=function(){}},{}],513:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=[];$.exports=function(t,e){if(-1===_.indexOf(t)){_.push(t);var i=1e3;g(e)?i=e:"long"===e&&(i=3e3);var r=d.select("body").selectAll(".plotly-notifier").data([0]);r.enter().append("div").classed("plotly-notifier",!0),r.selectAll(".notifier-note").data(_).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(n){var p=d.select(this);p.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){p.transition().call(o)});for(var s=p.append("p"),a=n.split(/<br\s*\/?>/g),c=0;c<a.length;c++)c&&s.append("br"),s.append("span").text(a[c]);"stick"===e?p.transition().duration(350).style("opacity",1):p.transition().duration(700).style("opacity",1).transition().delay(i).call(o)})}function o(n){n.duration(700).style("opacity",0).each("end",function(p){var s=_.indexOf(p);-1!==s&&_.splice(s,1),d.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(y,$,ee){"use strict";var d=y("./setcursor"),g="data-savedcursor";$.exports=function(_,t){var e=_.attr(g);if(t){if(!e){for(var i=(_.attr("class")||"").split(" "),r=0;r<i.length;r++){var o=i[r];0===o.indexOf("cursor-")&&_.attr(g,o.substr(7)).classed(o,!1)}_.attr(g)||_.attr(g,"!!")}d(_,t)}else e&&(_.attr(g,null),"!!"===e?d(_):d(_,e))}},{"./setcursor":524}],515:[function(y,$,ee){"use strict";var d=y("./matrix").dot,g=y("../constants/numerical").BADNUM,_=$.exports={};_.tester=function(t){var e,i=t.slice(),r=i[0][0],o=r,n=i[0][1],p=n;for(i.push(i[0]),e=1;e<i.length;e++)r=Math.min(r,i[e][0]),o=Math.max(o,i[e][0]),n=Math.min(n,i[e][1]),p=Math.max(p,i[e][1]);var s,a=!1;5===i.length&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(a=!0,s=function(h){return h[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(a=!0,s=function(h){return h[1]===i[0][1]}));var c=!0,u=i[0];for(e=1;e<i.length;e++)if(u[0]!==i[e][0]||u[1]!==i[e][1]){c=!1;break}return{xmin:r,xmax:o,ymin:n,ymax:p,pts:i,contains:a?function(h,v){var f=h[0],l=h[1];return!(f===g||f<r||f>o||l===g||l<n||l>p||v&&s(h))}:function(h,v){var f=h[0],l=h[1];if(f===g||f<r||f>o||l===g||l<n||l>p)return!1;var x,m,w,b,k,T=i.length,L=i[0][0],A=i[0][1],I=0;for(x=1;x<T;x++)if(m=L,w=A,L=i[x][0],A=i[x][1],!(f<(b=Math.min(m,L))||f>Math.max(m,L)||l>Math.max(w,A)))if(l<Math.min(w,A))f!==b&&I++;else{if(l===(k=L===m?l:w+(f-m)*(A-w)/(L-m)))return 1!==x||!v;l<=k&&f!==b&&I++}return I%2==1},isRect:a,degenerate:c}},_.isSegmentBent=function(t,e,i,r){var o,n,p,s=t[e],a=[t[i][0]-s[0],t[i][1]-s[1]],c=d(a,a),u=Math.sqrt(c),h=[-a[1]/u,a[0]/u];for(o=e+1;o<i;o++)if((p=d(n=[t[o][0]-s[0],t[o][1]-s[1]],a))<0||p>c||Math.abs(d(n,h))>r)return!0;return!1},_.filter=function(t,e){var i=[t[0]],r=0,o=0;function n(p){t.push(p);var s=i.length,a=r;i.splice(o+1);for(var c=a+1;c<t.length;c++)(c===t.length-1||_.isSegmentBent(t,a,c+1,e))&&(i.push(t[c]),i.length<s-2&&(r=c,o=i.length-1),a=c)}return t.length>1&&n(t.pop()),{addPt:n,raw:t,filtered:i}}},{"../constants/numerical":479,"./matrix":509}],516:[function(y,$,ee){(function(d){(function(){"use strict";var g=y("./show_no_webgl_msg"),_=y("regl");$.exports=function(t,e){var i=t._fullLayout,r=!0;return i._glcanvas.each(function(o){if(!o.regl&&(!o.pick||i._has("parcoords"))){try{o.regl=_({canvas:this,attributes:{antialias:!o.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||d.devicePixelRatio,extensions:e||[]})}catch(n){r=!1}o.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(n){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:n,layer:o.key})},!1)}}),r||g({container:i._glcontainer.node()}),r}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("is-mobile");$.exports=function(_){var t,s;if("string"!=typeof(t=_&&_.hasOwnProperty("userAgent")?_.userAgent:("undefined"!=typeof navigator&&(s=navigator.userAgent),s&&s.headers&&"string"==typeof s.headers["user-agent"]&&(s=s.headers["user-agent"]),s)))return!0;var e=g({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!e)for(var i=t.split(" "),r=1;r<i.length;r++)if(-1!==i[r].indexOf("Safari"))for(var o=r-1;o>-1;o--){var n=i[o];if("Version/"===n.substr(0,8)){var p=n.substr(8).split(".")[0];if(d(p)&&(p=+p),p>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(y,$,ee){"use strict";$.exports=function(d,g){if(g instanceof RegExp){for(var _=g.toString(),t=0;t<d.length;t++)if(d[t]instanceof RegExp&&d[t].toString()===_)return d;d.push(g)}else!g&&0!==g||-1!==d.indexOf(g)||d.push(g);return d}},{}],519:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plot_api/plot_config").dfltConfig,_={add:function(t,e,i,r,o){var n,p;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},p=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(t.undoQueue.queue.splice(p,t.undoQueue.queue.length-p,n={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),t.undoQueue.index+=1):n=t.undoQueue.queue[p-1],t.undoQueue.beginSequence=!1,n&&(n.undo.calls.unshift(e),n.undo.args.unshift(i),n.redo.calls.push(r),n.redo.args.push(o)),t.undoQueue.queue.length>g.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,i;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<e.undo.calls.length;i++)_.plotDo(t,e.undo.calls[i],e.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,i;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<e.redo.calls.length;i++)_.plotDo(t,e.redo.calls[i],e.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}},plotDo:function(t,e,i){t.autoplay=!0,i=function(r,o){for(var n,p=[],s=0;s<o.length;s++)p[s]=(n=o[s])===r?n:"object"==typeof n?Array.isArray(n)?d.extendDeep([],n):d.extendDeepAll({},n):n;return p}(t,i),e.apply(null,i)}};$.exports=_},{"../lib":503,"../plot_api/plot_config":541}],520:[function(y,$,ee){"use strict";ee.counter=function(d,g,_,t){var e=(g||"")+(_?"":"$"),i=!1===t?"":"^";return"xy"===d?new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(i+d+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(y,$,ee){"use strict";var d=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,g=/^[^\.\[\]]+$/;$.exports=function(_,t){for(;t;){var e=_.match(d);if(e)_=e[1];else{if(!_.match(g))throw new Error("bad relativeAttr call:"+[_,t]);_=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return _&&"["!==t.charAt(0)?_+"."+t:_+t}},{}],522:[function(y,$,ee){"use strict";var d=y("./array").isArrayOrTypedArray,g=y("./is_plain_object");$.exports=function _(t,e){for(var i in e){var r=e[i],o=t[i];if(o!==r)if("_"===i.charAt(0)||"function"==typeof r){if(i in t)continue;t[i]=r}else if(d(r)&&d(o)&&g(r[0])){if("customdata"===i||"ids"===i)continue;for(var n=Math.min(r.length,o.length),p=0;p<n;p++)o[p]!==r[p]&&g(r[p])&&g(o[p])&&_(o[p],r[p])}else g(r)&&g(o)&&(_(o,r),Object.keys(o).length||delete t[i])}}},{"./array":485,"./is_plain_object":504}],523:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("./loggers"),_=y("./identity"),t=y("../constants/numerical").BADNUM;function e(n,p){return n<p}function i(n,p){return n<=p}function r(n,p){return n>p}function o(n,p){return n>=p}ee.findBin=function(n,p,s){if(d(p.start))return s?Math.ceil((n-p.start)/p.size-1e-9)-1:Math.floor((n-p.start)/p.size+1e-9);var a,c,u=0,h=p.length,v=0,f=h>1?(p[h-1]-p[0])/(h-1):1;for(c=f>=0?s?e:i:s?o:r,n+=1e-9*f*(s?-1:1)*(f>=0?1:-1);u<h&&v++<100;)c(p[a=Math.floor((u+h)/2)],n)?u=a+1:h=a;return v>90&&g.log("Long binary search..."),u-1},ee.sorterAsc=function(n,p){return n-p},ee.sorterDes=function(n,p){return p-n},ee.distinctVals=function(n){var p,s=n.slice();for(s.sort(ee.sorterAsc),p=s.length-1;p>-1&&s[p]===t;p--);for(var a,c=s[p]-s[0]||1,u=c/(p||1)/1e4,h=[],v=0;v<=p;v++){var f=s[v],l=f-a;void 0===a?(h.push(f),a=f):l>u&&(c=Math.min(c,l),h.push(f),a=f)}return{vals:h,minDiff:c}},ee.roundUp=function(n,p,s){for(var a,c=0,u=p.length-1,h=0,v=s?0:1,f=s?1:0,l=s?Math.ceil:Math.floor;c<u&&h++<100;)p[a=l((c+u)/2)]<=n?c=a+v:u=a-f;return p[c]},ee.sort=function(n,p){for(var s=0,a=0,c=1;c<n.length;c++){var u=p(n[c],n[c-1]);if(u<0?s=1:u>0&&(a=1),s&&a)return n.sort(p)}return a?n:n.reverse()},ee.findIndexOfMin=function(n,p){p=p||_;for(var s,a=1/0,c=0;c<n.length;c++){var u=p(n[c]);u<a&&(a=u,s=c)}return s}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(y,$,ee){"use strict";$.exports=function(d,g){(d.attr("class")||"").split(" ").forEach(function(_){0===_.indexOf("cursor-")&&d.classed(_,!1)}),g&&d.classed("cursor-"+g,!0)}},{}],525:[function(y,$,ee){"use strict";var d=y("../components/color"),g=function(){};$.exports=function(_){for(var t in _)"function"==typeof _[t]&&(_[t]=g);_.destroy=function(){_.container.parentNode.removeChild(_.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=d.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=d.lightLine,e.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",e.appendChild(i),_.container.appendChild(e),_.container.style.background="#FFFFFF",_.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(y,$,ee){"use strict";$.exports=function(d){return Object.keys(d).sort()}},{}],527:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("./array").isArrayOrTypedArray;ee.aggNums=function(_,t,e,i){var r,o;if((!i||i>e.length)&&(i=e.length),d(t)||(t=!1),g(e[0])){for(o=new Array(i),r=0;r<i;r++)o[r]=ee.aggNums(_,t,e[r]);e=o}for(r=0;r<i;r++)d(t)?d(e[r])&&(t=_(+t,+e[r])):t=e[r];return t},ee.len=function(_){return ee.aggNums(function(t){return t+1},0,_)},ee.mean=function(_,t){return t||(t=ee.len(_)),ee.aggNums(function(e,i){return e+i},0,_)/t},ee.midRange=function(_){if(void 0!==_&&0!==_.length)return(ee.aggNums(Math.max,null,_)+ee.aggNums(Math.min,null,_))/2},ee.variance=function(_,t,e){return t||(t=ee.len(_)),d(e)||(e=ee.mean(_,t)),ee.aggNums(function(i,r){return i+Math.pow(r-e,2)},0,_)/t},ee.stdev=function(_,t,e){return Math.sqrt(ee.variance(_,t,e))},ee.median=function(_){var t=_.slice().sort();return ee.interp(t,.5)},ee.interp=function(_,t){if(!d(t))throw"n should be a finite number";if((t=t*_.length-.5)<0)return _[0];if(t>_.length-1)return _[_.length-1];var e=t%1;return e*_[Math.ceil(t)]+(1-e)*_[Math.floor(t)]}},{"./array":485,"fast-isnumeric":190}],528:[function(y,$,ee){"use strict";var d=y("color-normalize");$.exports=function(g){return g?d(g):[0,0,0,1]}},{"color-normalize":89}],529:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../lib"),_=g.strTranslate,t=y("../constants/xmlns_namespaces"),e=y("../constants/alignment").LINE_SPACING,i=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ee.convertToTspans=function(D,S,C){var R=D.text(),F=!D.attr("data-notex")&&"undefined"!=typeof MathJax&&R.match(i),H=d.select(D.node().parentNode);if(!H.empty()){var U=D.attr("class")?D.attr("class").split(" ")[0]:"text";return H.selectAll("svg."+(U+="-math")).remove(),H.selectAll("g."+U+"-group").remove(),D.style("display",null).attr({"data-unformatted":R,"data-math":"N"}),F?(S&&S._promises||[]).push(new Promise(function(Z){D.style("display","none");var te,z,N,V,Q,j,J,Y=parseInt(D.node().style.fontSize,10);te=F[2],z={fontSize:Y},N=function(te,z,N){H.selectAll("svg."+U).remove(),H.selectAll("g."+U+"-group").remove();var V=te&&te.select("svg");if(!V||!V.node())return X(),void Z();var Q=H.append("g").classed(U+"-group",!0).attr({"pointer-events":"none","data-unformatted":R,"data-math":"Y"});Q.node().appendChild(V.node()),z&&z.node()&&V.node().insertBefore(z.node().cloneNode(!0),V.node().firstChild);var j=N.width,J=N.height;V.attr({class:U,height:J,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var K=D.node().style.fill||"black",re=V.select("g");re.attr({fill:K,stroke:K});var ie=re.node().getBoundingClientRect(),ce=ie.width,se=ie.height;(ce>j||se>J)&&(V.style("overflow","hidden"),ce=(ie=V.node().getBoundingClientRect()).width,se=ie.height);var de=+D.attr("x"),ue=+D.attr("y"),ge=-(Y||D.node().getBoundingClientRect().height)/4;if("y"===U[0])Q.attr({transform:"rotate("+[-90,de,ue]+")"+_(-ce/2,ge-se/2)});else if("l"===U[0])ue=ge-se/2;else if("a"===U[0]&&0!==U.indexOf("atitle"))de=0,ue=ge;else{var be=D.attr("text-anchor");de-=ce*("middle"===be?.5:"end"===be?1:0),ue=ue+ge-se/2}V.attr({x:de,y:ue}),C&&C.call(D,Q),Z(Q)},MathJax.Hub.Queue(function(){return Q=g.extendDeepAll({},MathJax.Hub.config),j=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(V=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var K="math-output-"+g.randstr({},64);return J=d.select("body").append("div").attr({id:K}).style({visibility:"hidden",position:"absolute"}).style({"font-size":z.fontSize+"px"}).text(te.replace(r,"\\lt ").replace(o,"\\gt ")),MathJax.Hub.Typeset(J.node())},function(){var K=d.select("body").select("#MathJax_SVG_glyphs");if(J.select(".MathJax_SVG").empty()||!J.select("svg").node())g.log("There was an error in the tex syntax.",te),N();else{var re=J.select("svg").node().getBoundingClientRect();N(J.select(".MathJax_SVG"),K,re)}if(J.remove(),"SVG"!==V)return MathJax.Hub.setRenderer(V)},function(){return void 0!==j&&(MathJax.Hub.processSectionDelay=j),MathJax.Hub.Config(Q)})})):X(),D}function X(){H.empty()||(U=D.attr("class")+"-math",H.select("svg."+U).remove()),D.text("").style("white-space","pre"),function(Z,Y){Y=Y.replace(c," ");var W,te=!1,z=[],N=-1;function V(){N++;var Le=document.createElementNS(t.svg,"tspan");d.select(Le).attr({class:"line",dy:N*e+"em"}),Z.appendChild(Le),W=Le;var fe=z;if(z=[{node:Le}],fe.length>1)for(var ve=1;ve<fe.length;ve++)Q(fe[ve])}function Q(Le){var fe,ve=Le.type,Me={};if("a"===ve){fe="a";var ke=Le.target,Ce=Le.href,Pe=Le.popup;Ce&&(Me={"xlink:xlink:show":"_blank"===ke||"_"!==ke.charAt(0)?"new":"replace",target:ke,"xlink:xlink:href":Ce},Pe&&(Me.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Pe+'");return false;'))}else fe="tspan";Le.style&&(Me.style=Le.style);var Fe=document.createElementNS(t.svg,fe);if("sup"===ve||"sub"===ve){j(W,"\u200b"),W.appendChild(Fe);var qe=document.createElementNS(t.svg,"tspan");j(qe,"\u200b"),d.select(qe).attr("dy",s[ve]),Me.dy=p[ve],W.appendChild(Fe),W.appendChild(qe)}else W.appendChild(Fe);d.select(Fe).attr(Me),W=Le.node=Fe,z.push(Le)}function j(Le,fe){Le.appendChild(document.createTextNode(fe))}function J(Le){if(1!==z.length){var fe=z.pop();Le!==fe.type&&g.log("Start tag <"+fe.type+"> doesnt match end tag <"+Le+">. Pretending it did match.",Y),W=z[z.length-1].node}else g.log("Ignoring unexpected end tag </"+Le+">.",Y)}v.test(Y)?V():(W=Z,z=[{node:Z}]);for(var K=Y.split(u),re=0;re<K.length;re++){var ie=K[re],ce=ie.match(h),se=ce&&ce[2].toLowerCase(),de=n[se];if("br"===se)V();else if(void 0===de)j(W,L(ie));else if(ce[1])J(se);else{var ue=ce[4],ge={type:se},be=w(ue,f);if(be?(be=be.replace(b,"$1 fill:"),de&&(be+=";"+de)):de&&(be=de),be&&(ge.style=be),"a"===se){te=!0;var Te=w(ue,l);if(Te){var we=A(Te);we&&(ge.href=we,ge.target=w(ue,x)||"_blank",ge.popup=w(ue,m))}}Q(ge)}}return te}(D.node(),R)&&D.style("pointer-events","all"),ee.positionText(D),C&&C.call(D)}};var r=/(<|&lt;|&#60;)/g,o=/(>|&gt;|&#62;)/g,n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},p={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},a=["http:","https:","mailto:","",void 0,":"],c=ee.NEWLINES=/(\r\n?|\n)/g,u=/(<[^<>]*>)/,h=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;ee.BR_TAG_ALL=/<br(\s+.*)?>/gi;var f=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,l=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(D,S){if(!D)return null;var C=D.match(S),R=C&&(C[3]||C[4]);return R&&L(R)}var b=/(^|;)\s*color:/;ee.plainText=function(D,S){for(var C=void 0!==(S=S||{}).len&&-1!==S.len?S.len:1/0,R=void 0!==S.allowedTags?S.allowedTags:["br"],F="...".length,H=D.split(u),U=[],X="",Z=0,Y=0;Y<H.length;Y++){var W=H[Y],te=W.match(h),z=te&&te[2].toLowerCase();if(z)-1!==R.indexOf(z)&&(U.push(W),X=z);else{var N=W.length;if(Z+N<C)U.push(W),Z+=N;else if(Z<C){var V=C-Z;X&&("br"!==X||V<=F||N<=F)&&U.pop(),U.push(C>F?W.substr(0,V-F)+"...":W.substr(0,V));break}X=""}}return U.join("")};var k={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},T=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(D){return D.replace(T,function(S,C){return("#"===C.charAt(0)?function(R){if(!(R>1114111)){var F=String.fromCodePoint;if(F)return F(R);var H=String.fromCharCode;return R<=65535?H(R):H(55232+(R>>10),R%1024+56320)}}("x"===C.charAt(1)?parseInt(C.substr(2),16):parseInt(C.substr(1),10)):k[C])||S})}function A(D){var S=encodeURI(decodeURI(D)),C=document.createElement("a"),R=document.createElement("a");C.href=D,R.href=S;var H=R.protocol;return-1!==a.indexOf(C.protocol)&&-1!==a.indexOf(H)?S:""}function I(D,S,C){var R,F,H,U=C.horizontalAlign,X=C.verticalAlign||"top",Z=D.node().getBoundingClientRect(),Y=S.node().getBoundingClientRect();return F="bottom"===X?function(){return Z.bottom-R.height}:"middle"===X?function(){return Z.top+(Z.height-R.height)/2}:function(){return Z.top},H="right"===U?function(){return Z.right-R.width}:"center"===U?function(){return Z.left+(Z.width-R.width)/2}:function(){return Z.left},function(){R=this.node().getBoundingClientRect();var W=H()-Y.left,te=F()-Y.top,z=C.gd||{};if(C.gd){z._fullLayout._calcInverseTransform(z);var N=g.apply3DTransform(z._fullLayout._invTransform)(W,te);W=N[0],te=N[1]}return this.style({top:te+"px",left:W+"px","z-index":1e3}),this}}ee.convertEntities=L,ee.sanitizeHTML=function(D){D=D.replace(c," ");for(var S=document.createElement("p"),C=S,R=[],F=D.split(u),H=0;H<F.length;H++){var U=F[H],X=U.match(h),Z=X&&X[2].toLowerCase();if(Z in n)if(X[1])R.length&&(C=R.pop());else{var Y=X[4],W=w(Y,f),te=W?{style:W}:{};if("a"===Z){var z=w(Y,l);if(z){var N=A(z);if(N){te.href=N;var V=w(Y,x);V&&(te.target=V)}}}var Q=document.createElement(Z);C.appendChild(Q),d.select(Q).attr(te),C=Q,R.push(Q)}else C.appendChild(document.createTextNode(L(U)))}return S.innerHTML},ee.lineCount=function(D){return D.selectAll("tspan.line").size()||1},ee.positionText=function(D,S,C){return D.each(function(){var R=d.select(this);function F(X,Z){return void 0===Z?null===(Z=R.attr(X))&&(R.attr(X,0),Z=0):R.attr(X,Z),Z}var H=F("x",S),U=F("y",C);"text"===this.nodeName&&R.selectAll("tspan.line").attr({x:H,y:U})})},ee.makeTextShadow=function(D){var S="1px ",C="1px ",R="1px ";return S+C+R+D+", -"+S+"-"+C+R+D+", "+S+"-"+C+R+D+", -"+S+C+R+D},ee.makeEditable=function(D,S){var C=S.gd,R=S.delegate,F=d.dispatch("edit","input","cancel"),H=R||D;if(D.style({"pointer-events":R?"none":"all"}),1!==D.size())throw new Error("boo");function U(){var W,te,z,N,V;W=d.select(C).select(".svg-container"),te=W.append("div"),z=D.node().style,N=parseFloat(z.fontSize||12),void 0===(V=S.text)&&(V=D.attr("data-unformatted")),te.classed("plugin-editable editable",!0).style({position:"absolute","font-family":z.fontFamily||"Arial","font-size":N,color:S.fill||z.fill||"black",opacity:1,"background-color":S.background||"transparent",outline:"#ffffff33 1px solid",margin:[-N/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(V).call(I(D,W,S)).on("blur",function(){C._editing=!1,D.text(this.textContent).style({opacity:1});var Q,j=d.select(this).attr("class");(Q=j?"."+j.split(" ")[0]+"-math-group":"[class*=-math-group]")&&d.select(D.node().parentNode).select(Q).style({opacity:0});var J=this.textContent;d.select(this).transition().duration(0).remove(),d.select(document).on("mouseup",null),F.edit.call(D,J)}).on("focus",function(){var Q=this;C._editing=!0,d.select(document).on("mouseup",function(){if(d.event.target===Q)return!1;document.activeElement===te.node()&&te.node().blur()})}).on("keyup",function(){27===d.event.which?(C._editing=!1,D.style({opacity:1}),d.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),F.cancel.call(D,this.textContent)):(F.input.call(D,this.textContent),d.select(this).call(I(D,W,S)))}).on("keydown",function(){13===d.event.which&&this.blur()}).call(X),D.style({opacity:0});var Z,Y=H.attr("class");(Z=Y?"."+Y.split(" ")[0]+"-math-group":"[class*=-math-group]")&&d.select(D.node().parentNode).select(Z).style({opacity:0})}function X(Z){var Y=Z.node(),W=document.createRange();W.selectNodeContents(Y);var te=window.getSelection();te.removeAllRanges(),te.addRange(W),Y.focus()}return S.immediate?U():H.on("click",U),d.rebind(D,F,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(y,$,ee){"use strict";var d={};function g(_){_&&null!==_.timer&&(clearTimeout(_.timer),_.timer=null)}ee.throttle=function(_,t,e){var i=d[_],r=Date.now();if(!i){for(var o in d)d[o].ts<r-6e4&&delete d[o];i=d[_]={ts:0,timer:null}}function n(){e(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}g(i),r>i.ts+t?n():i.timer=setTimeout(function(){n(),i.timer=null},t)},ee.done=function(_){var t=d[_];return t&&t.timer?new Promise(function(e){var i=t.onDone;t.onDone=function(){i&&i(),e(),t.onDone=null}}):Promise.resolve()},ee.clear=function(_){if(_)g(d[_]),delete d[_];else for(var t in d)ee.clear(t)}},{}],531:[function(y,$,ee){"use strict";var d=y("fast-isnumeric");$.exports=function(g,_){if(g>0)return Math.log(g)/Math.LN10;var t=Math.log(Math.min(_[0],_[1]))/Math.LN10;return d(t)||(t=Math.log(Math.max(_[0],_[1]))/Math.LN10-6),t}},{"fast-isnumeric":190}],532:[function(y,$,ee){"use strict";var d=$.exports={},g=y("../plots/geo/constants").locationmodeToLayer,_=y("topojson-client").feature;d.getTopojsonName=function(t){return[t.scope.replace(/ /g,"-"),"_",t.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(t,e){return t+e+".json"},d.getTopojsonFeatures=function(t,e){return _(e,e.objects[g[t.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(y,$,ee){"use strict";$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(y,$,ee){"use strict";$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(y,$,ee){"use strict";var d=y("../registry");$.exports=function(g){for(var _,t,e=d.layoutArrayContainers,i=d.layoutArrayRegexes,r=g.split("[")[0],o=0;o<i.length;o++)if((t=g.match(i[o]))&&0===t.index){_=t[0];break}if(_||(_=e[e.indexOf(r)]),!_)return!1;var n=g.substr(_.length);return n?!!(t=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:_,index:Number(t[1]),property:t[3]||""}:{array:_,index:"",property:""}}},{"../registry":638}],536:[function(y,$,ee){"use strict";var d=y("../lib"),g=d.extendFlat,_=d.isPlainObject,t={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},i=t.flags.slice().concat(["fullReplot"]),r=e.flags.slice().concat("layoutReplot");function o(s){for(var a={},c=0;c<s.length;c++)a[s[c]]=!1;return a}function n(s,a,c){var u=g({},s);for(var h in u){var v=u[h];_(v)&&(u[h]=p(v,a,0,h))}return"from-root"===c&&(u.editType=a),u}function p(s,a,c,u){if(s.valType){var h=g({},s);if(h.editType=a,Array.isArray(s.items)){h.items=new Array(s.items.length);for(var v=0;v<s.items.length;v++)h.items[v]=p(s.items[v],a)}return h}return n(s,a,"_"===u.charAt(0)?"nested":"from-root")}$.exports={traces:t,layout:e,traceFlags:function(){return o(i)},layoutFlags:function(){return o(r)},update:function(s,a){var c=a.editType;if(c&&"none"!==c)for(var u=c.split("+"),h=0;h<u.length;h++)s[u[h]]=!0},overrideAll:n}},{"../lib":503}],537:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("gl-mat4/fromQuat"),_=y("../registry"),t=y("../lib"),e=y("../plots/plots"),i=y("../plots/cartesian/axis_ids"),r=y("../components/color"),o=i.cleanId,n=i.getFromTrace,p=_.traceIs;function s(m,w){var b=m[w],k=w.charAt(0);b&&"paper"!==b&&(m[w]=o(b,k,!0))}function a(m){function w(b,k){m[b]&&(!m.title||!m.title[k])&&(m.title||(m.title={}),m.title[k]=m[b],delete m[b])}m&&("string"!=typeof m.title&&"number"!=typeof m.title||(m.title={text:m.title}),w("titlefont","font"),w("titleposition","position"),w("titleside","side"),w("titleoffset","offset"))}function c(m){if(!t.isPlainObject(m))return!1;var w=m.name;return delete m.name,delete m.showlegend,("string"==typeof w||"number"==typeof w)&&String(w)}function u(m,w,b,k){if(b&&!k)return m;if(k&&!b||!m.trim())return w;if(!w.trim())return m;var T,L=Math.min(m.length,w.length);for(T=0;T<L&&m.charAt(T)===w.charAt(T);T++);return m.substr(0,T).trim()}function h(m){var w="middle",b="center";return"string"==typeof m&&(-1!==m.indexOf("top")?w="top":-1!==m.indexOf("bottom")&&(w="bottom"),-1!==m.indexOf("left")?b="left":-1!==m.indexOf("right")&&(b="right")),w+" "+b}function v(m,w){return w in m&&"object"==typeof m[w]&&0===Object.keys(m[w]).length}ee.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&t.log("Clearing previous rejected promises from queue."),m._promises=[]},ee.cleanLayout=function(m){var w,b;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var k=(e.subplotsRegistry.cartesian||{}).attrRegex,T=(e.subplotsRegistry.polar||{}).attrRegex,L=(e.subplotsRegistry.ternary||{}).attrRegex,A=(e.subplotsRegistry.gl3d||{}).attrRegex,I=Object.keys(m);for(w=0;w<I.length;w++){var D=I[w];if(k&&k.test(D)){var S=m[D];S.anchor&&"free"!==S.anchor&&(S.anchor=o(S.anchor)),S.overlaying&&(S.overlaying=o(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":!1===S.isdate&&!1===S.islog&&(S.type="linear")),"withzero"!==S.autorange&&"tozero"!==S.autorange||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,v(S,"domain")&&delete S.domain,void 0!==S.autotick&&(void 0===S.tickmode&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),a(S)}else if(T&&T.test(D))a(m[D].radialaxis);else if(L&&L.test(D)){var C=m[D];a(C.aaxis),a(C.baxis),a(C.caxis)}else if(A&&A.test(D)){var R=m[D],F=R.cameraposition;if(Array.isArray(F)&&4===F[0].length){var U=F[1],X=F[2],Z=g([],F[0]),Y=[];for(b=0;b<3;++b)Y[b]=U[b]+X*Z[2+4*b];R.camera={eye:{x:Y[0],y:Y[1],z:Y[2]},center:{x:U[0],y:U[1],z:U[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}a(R.xaxis),a(R.yaxis),a(R.zaxis)}}var W=Array.isArray(m.annotations)?m.annotations.length:0;for(w=0;w<W;w++){var te=m.annotations[w];t.isPlainObject(te)&&(te.ref&&("paper"===te.ref?(te.xref="paper",te.yref="paper"):"data"===te.ref&&(te.xref="x",te.yref="y"),delete te.ref),s(te,"xref"),s(te,"yref"))}var z=Array.isArray(m.shapes)?m.shapes.length:0;for(w=0;w<z;w++){var N=m.shapes[w];t.isPlainObject(N)&&(s(N,"xref"),s(N,"yref"))}var V=Array.isArray(m.images)?m.images.length:0;for(w=0;w<V;w++){var Q=m.images[w];t.isPlainObject(Q)&&(s(Q,"xref"),s(Q,"yref"))}var j=m.legend;return j&&(j.x>3?(j.x=1.02,j.xanchor="left"):j.x<-2&&(j.x=-.02,j.xanchor="right"),j.y>3?(j.y=1.02,j.yanchor="bottom"):j.y<-2&&(j.y=-.02,j.yanchor="top")),a(m),"rotate"===m.dragmode&&(m.dragmode="orbit"),r.clean(m),m.template&&m.template.layout&&ee.cleanLayout(m.template.layout),m},ee.cleanData=function(m){for(var w=0;w<m.length;w++){var b,k=m[w];if("histogramy"===k.type&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var T=r.defaults,L=k.error_y.color||(p(k,"bar")?r.defaultLine:T[w%T.length]);k.error_y.color=r.addOpacity(r.rgb(L),r.opacity(L)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&("h"!==k.bardir||!p(k,"bar")&&"histogram"!==k.type.substr(0,9)||(k.orientation="h",ee.swapXYData(k)),delete k.bardir),"histogramy"===k.type&&ee.swapXYData(k),"histogramx"!==k.type&&"histogramy"!==k.type||(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=o(k.xaxis,"x")),k.yaxis&&(k.yaxis=o(k.yaxis,"y")),p(k,"gl3d")&&k.scene&&(k.scene=e.subplotsRegistry.gl3d.cleanId(k.scene)),!p(k,"pie-like")&&!p(k,"bar-like"))if(Array.isArray(k.textposition))for(b=0;b<k.textposition.length;b++)k.textposition[b]=h(k.textposition[b]);else k.textposition&&(k.textposition=h(k.textposition));var A=_.getModule(k);if(A&&A.colorbar){var I=A.colorbar.container,D=I?k[I]:k;D&&D.colorscale&&("YIGnBu"===D.colorscale&&(D.colorscale="YlGnBu"),"YIOrRd"===D.colorscale&&(D.colorscale="YlOrRd"))}if("surface"===k.type&&t.isPlainObject(k.contours)){var S=["x","y","z"];for(b=0;b<S.length;b++){var C=k.contours[S[b]];t.isPlainObject(C)&&(C.highlightColor&&(C.highlightcolor=C.highlightColor,delete C.highlightColor),C.highlightWidth&&(C.highlightwidth=C.highlightWidth,delete C.highlightWidth))}}if("candlestick"===k.type||"ohlc"===k.type){var R=!1!==(k.increasing||{}).showlegend,F=!1!==(k.decreasing||{}).showlegend,H=c(k.increasing),U=c(k.decreasing);if(!1!==H&&!1!==U){var X=u(H,U,R,F);X&&(k.name=X)}else!H&&!U||k.name||(k.name=H||U)}if(Array.isArray(k.transforms)){var Z=k.transforms;for(b=0;b<Z.length;b++){var Y=Z[b];if(t.isPlainObject(Y))switch(Y.type){case"filter":Y.filtersrc&&(Y.target=Y.filtersrc,delete Y.filtersrc),Y.calendar&&(Y.valuecalendar||(Y.valuecalendar=Y.calendar),delete Y.calendar);break;case"groupby":if(Y.styles=Y.styles||Y.style,Y.styles&&!Array.isArray(Y.styles)){var W=Y.styles,te=Object.keys(W);Y.styles=[];for(var z=0;z<te.length;z++)Y.styles.push({target:te[z],value:W[te[z]]})}}}}v(k,"line")&&delete k.line,"marker"in k&&(v(k.marker,"line")&&delete k.marker.line,v(k,"marker")&&delete k.marker),r.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),a(k),k.colorbar&&a(k.colorbar),k.marker&&k.marker.colorbar&&a(k.marker.colorbar),k.line&&k.line.colorbar&&a(k.line.colorbar),k.aaxis&&a(k.aaxis),k.baxis&&a(k.baxis)}},ee.swapXYData=function(m){var w;if(t.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var b=m.error_y,k="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);t.swapAttrs(m,["error_?.copy_ystyle"]),k&&t.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof m.hoverinfo){var T=m.hoverinfo.split("+");for(w=0;w<T.length;w++)"x"===T[w]?T[w]="y":"y"===T[w]&&(T[w]="x");m.hoverinfo=T.join("+")}},ee.coerceTraceIndices=function(m,w){if(d(w))return[w];if(!Array.isArray(w)||!w.length)return m.data.map(function(T,L){return L});if(Array.isArray(w)){for(var b=[],k=0;k<w.length;k++)t.isIndex(w[k],m.data.length)?b.push(w[k]):t.warn("trace index (",w[k],") is not a number or is out of bounds");return b}return w},ee.manageArrayContainers=function(m,w,b){var k=m.obj,T=m.parts,L=T.length,A=T[L-1],I=d(A);if(I&&null===w){var D=T.slice(0,L-1).join(".");t.nestedProperty(k,D).get().splice(A,1)}else I&&void 0===m.get()&&void 0===m.get()&&(b[m.astr]=null),m.set(w)};var f=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(m){var w=m.search(f);if(w>0)return m.substr(0,w)}ee.hasParent=function(m,w){for(var b=l(w);b;){if(b in m)return!0;b=l(b)}return!1};var x=["x","y","z"];ee.clearAxisTypes=function(m,w,b){for(var k=0;k<w.length;k++)for(var T=m._fullData[k],L=0;L<3;L++){var A=n(m,T,x[L]);if(A&&"log"!==A.type){var I=A._name,D=A._id.substr(1);if("scene"===D.substr(0,5)){if(void 0!==b[D])continue;I=D+"."+I}var S=I+".type";void 0===b[I]&&void 0===b[S]&&t.nestedProperty(m.layout,S).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(y,$,ee){"use strict";var d=y("./plot_api");ee._doPlot=d._doPlot,ee.newPlot=d.newPlot,ee.restyle=d.restyle,ee.relayout=d.relayout,ee.redraw=d.redraw,ee.update=d.update,ee._guiRestyle=d._guiRestyle,ee._guiRelayout=d._guiRelayout,ee._guiUpdate=d._guiUpdate,ee._storeDirectGUIEdit=d._storeDirectGUIEdit,ee.react=d.react,ee.extendTraces=d.extendTraces,ee.prependTraces=d.prependTraces,ee.addTraces=d.addTraces,ee.deleteTraces=d.deleteTraces,ee.moveTraces=d.moveTraces,ee.purge=d.purge,ee.addFrames=d.addFrames,ee.deleteFrames=d.deleteFrames,ee.animate=d.animate,ee.setPlotConfig=d.setPlotConfig,ee.toImage=y("./to_image"),ee.validate=y("./validate"),ee.downloadImage=y("../snapshot/download");var g=y("./template_api");ee.makeTemplate=g.makeTemplate,ee.validateTemplate=g.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(y,$,ee){"use strict";var d=y("../lib/is_plain_object"),g=y("../lib/noop"),_=y("../lib/loggers"),t=y("../lib/search").sorterAsc,e=y("../registry");ee.containerArrayMatch=y("./container_array_match");var i=ee.isAddVal=function(o){return"add"===o||d(o)},r=ee.isRemoveVal=function(o){return null===o||"remove"===o};ee.applyContainerArrayChanges=function(o,n,p,s,a){var c=n.astr,u=e.getComponentMethod(c,"supplyLayoutDefaults"),h=e.getComponentMethod(c,"draw"),v=e.getComponentMethod(c,"drawOne"),f=s.replot||s.recalc||u===g||h===g,l=o.layout,x=o._fullLayout;if(p[""]){Object.keys(p).length>1&&_.warn("Full array edits are incompatible with other edits",c);var m=p[""][""];if(r(m))n.set(null);else{if(!Array.isArray(m))return _.warn("Unrecognized full array edit value",c,m),!0;n.set(m)}return!f&&(u(l,x),h(o),!0)}var w,b,k,T,L,A,I,S=Object.keys(p).map(Number).sort(t),C=n.get(),R=C||[],F=a(x,c).get(),H=[],U=-1,X=R.length;for(w=0;w<S.length;w++)if(T=p[k=S[w]],L=Object.keys(T),I=i(A=T[""]),k<0||k>R.length-(I?0:1))_.warn("index out of range",c,k);else if(void 0!==A)L.length>1&&_.warn("Insertion & removal are incompatible with edits to the same index.",c,k),r(A)?H.push(k):I?("add"===A&&(A={}),R.splice(k,0,A),F&&F.splice(k,0,{})):_.warn("Unrecognized full object edit value",c,k,A),-1===U&&(U=k);else for(b=0;b<L.length;b++)a(R[k],L[b],c+"["+k+"].").set(T[L[b]]);for(w=H.length-1;w>=0;w--)R.splice(H[w],1),F&&F.splice(H[w],1);if(R.length?C||n.set(R):n.set(null),f)return!1;if(u(l,x),v!==g){var Z;if(-1===U)Z=S;else{for(X=Math.max(R.length,X),Z=[],w=0;w<S.length&&!((k=S[w])>=U);w++)Z.push(k);for(w=U;w<X;w++)Z.push(w)}for(w=0;w<Z.length;w++)v(o,Z[w])}else h(o);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("has-hover"),t=y("../lib"),e=t.nestedProperty,i=y("../lib/events"),r=y("../lib/queue"),o=y("../registry"),n=y("./plot_schema"),p=y("../plots/plots"),s=y("../plots/cartesian/axes"),a=y("../components/drawing"),c=y("../components/color"),u=y("../plots/cartesian/graph_interact").initInteractions,h=y("../constants/xmlns_namespaces"),v=y("../plots/cartesian/select").clearSelect,f=y("./plot_config").dfltConfig,l=y("./manage_arrays"),x=y("./helpers"),m=y("./subroutines"),w=y("./edit_types"),b=y("../plots/cartesian/constants").AX_NAME_PATTERN,k=0;function T(fe){var ve=fe._fullLayout;ve._redrawFromAutoMarginCount?ve._redrawFromAutoMarginCount--:fe.emit("plotly_afterplot")}function L(fe,ve){try{fe._fullLayout._paper.style("background",ve)}catch(Me){t.error(Me)}}function A(fe,ve){L(fe,c.combine(ve,"white"))}function I(fe,ve){if(!fe._context){fe._context=t.extendDeep({},f);var Me=d.select("base");fe._context._baseUrl=Me.size()&&Me.attr("href")?window.location.href.split("#")[0]:""}var ke,Ce,Pe,Fe=fe._context;if(ve){for(Ce=Object.keys(ve),ke=0;ke<Ce.length;ke++)"editable"!==(Pe=Ce[ke])&&"edits"!==Pe&&Pe in Fe&&(Fe[Pe]="setBackground"===Pe&&"opaque"===ve[Pe]?A:ve[Pe]);ve.plot3dPixelRatio&&!Fe.plotGlPixelRatio&&(Fe.plotGlPixelRatio=Fe.plot3dPixelRatio);var qe=ve.editable;if(void 0!==qe)for(Fe.editable=qe,Ce=Object.keys(Fe.edits),ke=0;ke<Ce.length;ke++)Fe.edits[Ce[ke]]=qe;if(ve.edits)for(Ce=Object.keys(ve.edits),ke=0;ke<Ce.length;ke++)(Pe=Ce[ke])in Fe.edits&&(Fe.edits[Pe]=ve.edits[Pe]);Fe._exportedPlot=ve._exportedPlot}Fe.staticPlot&&(Fe.editable=!1,Fe.edits={},Fe.autosizable=!1,Fe.scrollZoom=!1,Fe.doubleClick=!1,Fe.showTips=!1,Fe.showLink=!1,Fe.displayModeBar=!1),"hover"!==Fe.displayModeBar||_||(Fe.displayModeBar=!0),"transparent"!==Fe.setBackground&&"function"==typeof Fe.setBackground||(Fe.setBackground=L),Fe._hasZeroHeight=Fe._hasZeroHeight||0===fe.clientHeight,Fe._hasZeroWidth=Fe._hasZeroWidth||0===fe.clientWidth;var rt=Fe.scrollZoom,ze=Fe._scrollZoom={};if(!0===rt)ze.cartesian=1,ze.gl3d=1,ze.geo=1,ze.mapbox=1;else if("string"==typeof rt){var He=rt.split("+");for(ke=0;ke<He.length;ke++)ze[He[ke]]=1}else!1!==rt&&(ze.gl3d=1,ze.geo=1,ze.mapbox=1)}function D(fe,ve){var Me,ke,Ce=ve+1,Pe=[];for(Me=0;Me<fe.length;Me++)(ke=fe[Me])<0?Pe.push(Ce+ke):Pe.push(ke);return Pe}function S(fe,ve,Me){var ke,Ce;for(ke=0;ke<ve.length;ke++){if((Ce=ve[ke])!==parseInt(Ce,10))throw new Error("all values in "+Me+" must be integers");if(Ce>=fe.data.length||Ce<-fe.data.length)throw new Error(Me+" must be valid indices for gd.data.");if(ve.indexOf(Ce,ke+1)>-1||Ce>=0&&ve.indexOf(-fe.data.length+Ce)>-1||Ce<0&&ve.indexOf(fe.data.length+Ce)>-1)throw new Error("each index in "+Me+" must be unique.")}}function C(fe,ve,Me){if(!Array.isArray(fe.data))throw new Error("gd.data must be an array.");if(void 0===ve)throw new Error("currentIndices is a required argument.");if(Array.isArray(ve)||(ve=[ve]),S(fe,ve,"currentIndices"),void 0===Me||Array.isArray(Me)||(Me=[Me]),void 0!==Me&&S(fe,Me,"newIndices"),void 0!==Me&&ve.length!==Me.length)throw new Error("current and new indices must be of equal length.")}function R(fe,ve,Me,ke,Ce){!function(Je,at,pt,xt){var Ft=t.isPlainObject(xt);if(!Array.isArray(Je.data))throw new Error("gd.data must be an array");if(!t.isPlainObject(at))throw new Error("update must be a key:value object");if(void 0===pt)throw new Error("indices must be an integer or array of integers");for(var Dt in S(Je,pt,"indices"),at){if(!Array.isArray(at[Dt])||at[Dt].length!==pt.length)throw new Error("attribute "+Dt+" must be an array of length equal to indices array length");if(Ft&&(!(Dt in xt)||!Array.isArray(xt[Dt])||xt[Dt].length!==at[Dt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(fe,ve,Me,ke);for(var Pe=function(Je,at,pt,xt){var Dt,ot,it,Et,Xt=t.isPlainObject(xt),nr=[];for(var Ue in Array.isArray(pt)||(pt=[pt]),pt=D(pt,Je.data.length-1),at)for(var We=0;We<pt.length;We++){if(Dt=(ot=e(Je.data[pt[We]],Ue)).get(),!t.isArrayOrTypedArray(it=at[Ue][We]))throw new Error("attribute: "+Ue+" index: "+We+" must be an array");if(!t.isArrayOrTypedArray(Dt))throw new Error("cannot extend missing or non-array attribute: "+Ue);if(Dt.constructor!==it.constructor)throw new Error("cannot extend array with an array of a different type: "+Ue);g(Et=Xt?xt[Ue][We]:xt)||(Et=-1),nr.push({prop:ot,target:Dt,insert:it,maxp:Math.floor(Et)})}return nr}(fe,ve,Me,ke),Fe={},qe={},rt=0;rt<Pe.length;rt++){var ze=Pe[rt].prop,Xe=Ce(Pe[rt].target,Pe[rt].insert,Pe[rt].maxp);ze.set(Xe[0]),Array.isArray(Fe[ze.astr])||(Fe[ze.astr]=[]),Fe[ze.astr].push(Xe[1]),Array.isArray(qe[ze.astr])||(qe[ze.astr]=[]),qe[ze.astr].push(Pe[rt].target.length)}return{update:Fe,maxPoints:qe}}function F(fe,ve){var Me=new fe.constructor(fe.length+ve.length);return Me.set(fe),Me.set(ve,fe.length),Me}function H(fe,ve,Me,ke){fe=t.getGraphDiv(fe),x.clearPromiseQueue(fe);var Ce={};if("string"==typeof ve)Ce[ve]=Me;else{if(!t.isPlainObject(ve))return t.warn("Restyle fail.",ve,Me,ke),Promise.reject();Ce=t.extendFlat({},ve),void 0===ke&&(ke=Me)}Object.keys(Ce).length&&(fe.changed=!0);var Pe=x.coerceTraceIndices(fe,ke),Fe=Y(fe,Ce,Pe),qe=Fe.flags;qe.calc&&(fe.calcdata=void 0),qe.clearAxisTypes&&x.clearAxisTypes(fe,Pe,{});var rt=[];qe.fullReplot?rt.push(ee._doPlot):(rt.push(p.previousPromises),p.supplyDefaults(fe),qe.markerSize&&(p.doCalcdata(fe),N(rt)),qe.style&&rt.push(m.doTraceStyle),qe.colorbars&&rt.push(m.doColorBars),rt.push(T)),rt.push(p.rehover,p.redrag),r.add(fe,H,[fe,Fe.undoit,Fe.traces],H,[fe,Fe.redoit,Fe.traces]);var ze=t.syncOrAsync(rt,fe);return ze&&ze.then||(ze=Promise.resolve()),ze.then(function(){return fe.emit("plotly_restyle",Fe.eventData),fe})}function U(fe){return void 0===fe?null:fe}function X(fe,ve){return ve?function(Me,ke,Ce){var Pe=e(Me,ke),Fe=Pe.set;return Pe.set=function(qe){Z((Ce||"")+ke,Pe.get(),qe,fe),Fe(qe)},Pe}:e}function Z(fe,ve,Me,ke){if(Array.isArray(ve)||Array.isArray(Me))for(var Ce=Array.isArray(ve)?ve:[],Pe=Array.isArray(Me)?Me:[],Fe=Math.max(Ce.length,Pe.length),qe=0;qe<Fe;qe++)Z(fe+"["+qe+"]",Ce[qe],Pe[qe],ke);else if(t.isPlainObject(ve)||t.isPlainObject(Me)){var rt=t.isPlainObject(ve)?ve:{},ze=t.isPlainObject(Me)?Me:{},He=t.extendFlat({},rt,ze);for(var Xe in He)Z(fe+"."+Xe,rt[Xe],ze[Xe],ke)}else void 0===ke[fe]&&(ke[fe]=U(ve))}function Y(fe,ve,Me){var ke,Ce=fe._fullLayout,Pe=fe._fullData,Fe=fe.data,qe=Ce._guiEditing,rt=X(Ce._preGUI,qe),ze=t.extendDeepAll({},ve);W(ve);var He,Xe=w.traceFlags(),Je={},at={};function pt(){return Me.map(function(){})}function xt(Mt){var Nt=s.id2name(Mt);-1===He.indexOf(Nt)&&He.push(Nt)}function Ft(Mt){return"LAYOUT"+Mt+".autorange"}function Dt(Mt){return"LAYOUT"+Mt+".range"}function ot(Mt){for(var Nt=Mt;Nt<Pe.length;Nt++)if(Pe[Nt]._input===Fe[Mt])return Pe[Nt]}function it(Mt,Nt,Zt){if(Array.isArray(Mt))Mt.forEach(function(er){it(er,Nt,Zt)});else if(!(Mt in ve)&&!x.hasParent(ve,Mt)){var or;if("LAYOUT"===Mt.substr(0,6))or=rt(fe.layout,Mt.replace("LAYOUT",""));else{var Wt=Me[Zt];or=X(Ce._tracePreGUI[ot(Wt)._fullInput.uid],qe)(Fe[Wt],Mt)}Mt in at||(at[Mt]=pt()),void 0===at[Mt][Zt]&&(at[Mt][Zt]=U(or.get())),void 0!==Nt&&or.set(Nt)}}function Et(Mt){return function(Nt){return Pe[Nt][Mt]}}function Xt(Mt){return function(Nt,Zt){return!1===Nt?Pe[Me[Zt]][Mt]:null}}for(var nr in ve){if(x.hasParent(ve,nr))throw new Error("cannot set "+nr+" and a parent attribute simultaneously");var Ue,We,Be,Qe,Ae,De,Oe=ve[nr];if("autobinx"!==nr&&"autobiny"!==nr||(nr=nr.charAt(nr.length-1)+"bins",Oe=Array.isArray(Oe)?Oe.map(Xt(nr)):!1===Oe?Me.map(Et(nr)):null),Je[nr]=Oe,"LAYOUT"!==nr.substr(0,6)){for(at[nr]=pt(),ke=0;ke<Me.length;ke++)if(Ue=Fe[Me[ke]],We=ot(Me[ke]),Qe=(Be=X(Ce._tracePreGUI[We._fullInput.uid],qe)(Ue,nr)).get(),void 0!==(Ae=Array.isArray(Oe)?Oe[ke%Oe.length]:Oe)){var Ie=Be.parts[Be.parts.length-1],et=nr.substr(0,nr.length-Ie.length-1),ct=et?et+".":"",vt=et?e(We,et).get():We;if((De=n.getTraceValObject(We,Be.parts))&&De.impliedEdits&&null!==Ae)for(var ft in De.impliedEdits)it(t.relativeAttr(nr,ft),De.impliedEdits[ft],ke);else if("thicknessmode"!==Ie&&"lenmode"!==Ie||Qe===Ae||"fraction"!==Ae&&"pixels"!==Ae||!vt){if("type"===nr&&("pie"===Ae!=("pie"===Qe)||"funnelarea"===Ae!=("funnelarea"===Qe))){var It="x",ut="y";"bar"!==Ae&&"bar"!==Qe||"h"!==Ue.orientation||(It="y",ut="x"),t.swapAttrs(Ue,["?","?src"],"labels",It),t.swapAttrs(Ue,["d?","?0"],"label",It),t.swapAttrs(Ue,["?","?src"],"values",ut),"pie"===Qe||"funnelarea"===Qe?(e(Ue,"marker.color").set(e(Ue,"marker.colors").get()),Ce._pielayer.selectAll("g.trace").remove()):o.traceIs(Ue,"cartesian")&&e(Ue,"marker.colors").set(e(Ue,"marker.color").get())}}else{var Ot=Ce._size,Rt=vt.orient,$e="top"===Rt||"bottom"===Rt;if("thicknessmode"===Ie){var yt=$e?Ot.h:Ot.w;it(ct+"thickness",vt.thickness*("fraction"===Ae?1/yt:yt),ke)}else{var Bt=$e?Ot.w:Ot.h;it(ct+"len",vt.len*("fraction"===Ae?1/Bt:Bt),ke)}}if(at[nr][ke]=U(Qe),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(nr)){if("orientation"===nr){Be.set(Ae);var Ut=Ue.x&&!Ue.y?"h":"v";if((Be.get()||Ut)===We.orientation)continue}else"orientationaxes"===nr&&(Ue.orientation={v:"h",h:"v"}[We.orientation]);x.swapXYData(Ue),Xe.calc=Xe.clearAxisTypes=!0}else-1!==p.dataArrayContainers.indexOf(Be.parts[0])?(x.manageArrayContainers(Be,Ae,at),Xe.calc=!0):(De?De.arrayOk&&!o.traceIs(We,"regl")&&(t.isArrayOrTypedArray(Ae)||t.isArrayOrTypedArray(Qe))?Xe.calc=!0:w.update(Xe,De):Xe.calc=!0,Be.set(Ae))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(nr)&&s.swap(fe,Me),"orientationaxes"===nr){var Qt=e(fe.layout,"hovermode"),Re=Qt.get();"x"===Re?Qt.set("y"):"y"===Re?Qt.set("x"):"x unified"===Re?Qt.set("y unified"):"y unified"===Re&&Qt.set("x unified")}if(-1!==["orientation","type"].indexOf(nr)){for(He=[],ke=0;ke<Me.length;ke++){var ht=Fe[Me[ke]];o.traceIs(ht,"cartesian")&&(xt(ht.xaxis||"x"),xt(ht.yaxis||"y"))}it(He.map(Ft),!0,0),it(He.map(Dt),[0,1],0)}}else Be=rt(fe.layout,nr.replace("LAYOUT","")),at[nr]=[U(Be.get())],Be.set(Array.isArray(Oe)?Oe[0]:Oe),Xe.calc=!0}return(Xe.calc||Xe.plot)&&(Xe.fullReplot=!0),{flags:Xe,undoit:at,redoit:Je,traces:Me,eventData:t.extendDeepNoArrays([],[ze,Me])}}function W(fe){var ve,Me,ke,Ce=t.counterRegex("axis",".title",!1,!1),Pe=/colorbar\.title$/,Fe=Object.keys(fe);for(ve=0;ve<Fe.length;ve++)ke=fe[Me=Fe[ve]],"title"!==Me&&!Ce.test(Me)&&!Pe.test(Me)||"string"!=typeof ke&&"number"!=typeof ke?Me.indexOf("titlefont")>-1&&-1===Me.indexOf("grouptitlefont")?qe(Me,Me.replace("titlefont","title.font")):Me.indexOf("titleposition")>-1?qe(Me,Me.replace("titleposition","title.position")):Me.indexOf("titleside")>-1?qe(Me,Me.replace("titleside","title.side")):Me.indexOf("titleoffset")>-1&&qe(Me,Me.replace("titleoffset","title.offset")):qe(Me,Me.replace("title","title.text"));function qe(rt,ze){fe[ze]=fe[rt],delete fe[rt]}}function te(fe,ve,Me){fe=t.getGraphDiv(fe),x.clearPromiseQueue(fe);var ke={};if("string"==typeof ve)ke[ve]=Me;else{if(!t.isPlainObject(ve))return t.warn("Relayout fail.",ve,Me),Promise.reject();ke=t.extendFlat({},ve)}Object.keys(ke).length&&(fe.changed=!0);var Ce=J(fe,ke),Pe=Ce.flags;Pe.calc&&(fe.calcdata=void 0);var Fe=[p.previousPromises];Pe.layoutReplot?Fe.push(m.layoutReplot):Object.keys(ke).length&&(z(fe,Pe,Ce)||p.supplyDefaults(fe),Pe.legend&&Fe.push(m.doLegend),Pe.layoutstyle&&Fe.push(m.layoutStyles),Pe.axrange&&N(Fe,Ce.rangesAltered),Pe.ticks&&Fe.push(m.doTicksRelayout),Pe.modebar&&Fe.push(m.doModeBar),Pe.camera&&Fe.push(m.doCamera),Pe.colorbars&&Fe.push(m.doColorBars),Fe.push(T)),Fe.push(p.rehover,p.redrag),r.add(fe,te,[fe,Ce.undoit],te,[fe,Ce.redoit]);var qe=t.syncOrAsync(Fe,fe);return qe&&qe.then||(qe=Promise.resolve(fe)),qe.then(function(){return fe.emit("plotly_relayout",Ce.eventData),fe})}function z(fe,ve,Me){var ke=fe._fullLayout;if(!ve.axrange)return!1;for(var Ce in ve)if("axrange"!==Ce&&ve[Ce])return!1;for(var Pe in Me.rangesAltered){var Fe=s.id2name(Pe),qe=fe.layout[Fe],rt=ke[Fe];if(rt.autorange=qe.autorange,qe.range&&(rt.range=qe.range.slice()),rt.cleanRange(),rt._matchGroup)for(var ze in rt._matchGroup)if(ze!==Pe){var He=ke[s.id2name(ze)];He.autorange=rt.autorange,He.range=rt.range.slice(),He._input.range=rt.range.slice()}}return!0}function N(fe,ve){fe.push(v,m.doAutoRangeAndConstraints,ve?function(ke){var Ce=[],Pe=!0;for(var Fe in ve){var qe=s.getFromId(ke,Fe);if(Ce.push(Fe),-1!==(qe.ticklabelposition||"").indexOf("inside")&&qe._anchorAxis&&Ce.push(qe._anchorAxis._id),qe._matchGroup)for(var rt in qe._matchGroup)ve[rt]||Ce.push(rt);qe.automargin&&(Pe=!1)}return s.draw(ke,Ce,{skipTitle:Pe})}:function(ke){return s.draw(ke,"redraw")},m.drawData,m.finalDraw)}var V=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Q=/^[xyz]axis[0-9]*\.autorange$/,j=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function J(fe,ve){var Me,ke,Ce,Pe=fe.layout,Fe=fe._fullLayout,rt=X(Fe._preGUI,Fe._guiEditing),ze=Object.keys(ve),He=s.list(fe),Xe=t.extendDeepAll({},ve),Je={};for(W(ve),ze=Object.keys(ve),ke=0;ke<ze.length;ke++)if(0===ze[ke].indexOf("allaxes")){for(Ce=0;Ce<He.length;Ce++){var at=He[Ce]._id.substr(1),pt=-1!==at.indexOf("scene")?at+".":"",xt=ze[ke].replace("allaxes",pt+He[Ce]._name);ve[xt]||(ve[xt]=ve[ze[ke]])}delete ve[ze[ke]]}var Ft=w.layoutFlags(),Dt={},ot={};function it(Wt,er){if(Array.isArray(Wt))Wt.forEach(function(_r){it(_r,er)});else if(!(Wt in ve)&&!x.hasParent(ve,Wt)){var cr=rt(Pe,Wt);Wt in ot||(ot[Wt]=U(cr.get())),void 0!==er&&cr.set(er)}}var Et,Xt={};function nr(Wt){var er=s.name2id(Wt.split(".")[0]);return Xt[er]=1,er}for(var Ue in ve){if(x.hasParent(ve,Ue))throw new Error("cannot set "+Ue+" and a parent attribute simultaneously");for(var We=rt(Pe,Ue),Be=ve[Ue],Qe=We.parts.length-1;Qe>0&&"string"!=typeof We.parts[Qe];)Qe--;var Ae=We.parts[Qe],De=We.parts[Qe-1]+"."+Ae,Oe=We.parts.slice(0,Qe).join("."),Ie=e(fe.layout,Oe).get(),et=e(Fe,Oe).get(),ct=We.get();if(void 0!==Be){Dt[Ue]=Be,ot[Ue]="reverse"===Ae?Be:U(ct);var vt=n.getLayoutValObject(Fe,We.parts);if(vt&&vt.impliedEdits&&null!==Be)for(var ft in vt.impliedEdits)it(t.relativeAttr(Ue,ft),vt.impliedEdits[ft]);if(-1!==["width","height"].indexOf(Ue))if(Be){it("autosize",null);var It="height"===Ue?"width":"height";it(It,Fe[It])}else Fe[Ue]=fe._initialAutoSize[Ue];else if("autosize"===Ue)it("width",Be?null:Fe.width),it("height",Be?null:Fe.height);else if(De.match(V))nr(De),e(Fe,Oe+"._inputRange").set(null);else if(De.match(Q)){nr(De),e(Fe,Oe+"._inputRange").set(null);var ut=e(Fe,Oe).get();ut._inputDomain&&(ut._input.domain=ut._inputDomain.slice())}else De.match(j)&&e(Fe,Oe+"._inputDomain").set(null);if("type"===Ae){Et=Ie;var Ot="linear"===et.type&&"log"===Be;if(Ot||"log"===et.type&&"linear"===Be){if(Et&&Et.range)if(et.autorange)Ot&&(Et.range=Et.range[1]>Et.range[0]?[1,2]:[2,1]);else{var $e=Et.range[0],yt=Et.range[1];Ot?($e<=0&&yt<=0&&it(Oe+".autorange",!0),$e<=0?$e=yt/1e6:yt<=0&&(yt=$e/1e6),it(Oe+".range[0]",Math.log($e)/Math.LN10),it(Oe+".range[1]",Math.log(yt)/Math.LN10)):(it(Oe+".range[0]",Math.pow(10,$e)),it(Oe+".range[1]",Math.pow(10,yt)))}else it(Oe+".autorange",!0);Array.isArray(Fe._subplots.polar)&&Fe._subplots.polar.length&&Fe[We.parts[0]]&&"radialaxis"===We.parts[1]&&delete Fe[We.parts[0]]._subplot.viewInitial["radialaxis.range"],o.getComponentMethod("annotations","convertCoords")(fe,et,Be,it),o.getComponentMethod("images","convertCoords")(fe,et,Be,it)}else it(Oe+".autorange",!0),it(Oe+".range",null);e(Fe,Oe+"._inputRange").set(null)}else if(Ae.match(b)){var Bt=e(Fe,Ue).get(),Ut=(Be||{}).type;Ut&&"-"!==Ut||(Ut="linear"),o.getComponentMethod("annotations","convertCoords")(fe,Bt,Ut,it),o.getComponentMethod("images","convertCoords")(fe,Bt,Ut,it)}var Qt=l.containerArrayMatch(Ue);if(Qt){Me=Qt.array;var Re=Qt.property,ht=vt||{editType:"calc"};""!==(ke=Qt.index)&&""===Re&&(l.isAddVal(Be)?ot[Ue]=null:l.isRemoveVal(Be)?ot[Ue]=(e(Pe,Me).get()||[])[ke]:t.warn("unrecognized full object value",ve)),w.update(Ft,ht),Je[Me]||(Je[Me]={});var Mt=Je[Me][ke];Mt||(Mt=Je[Me][ke]={}),Mt[Re]=Be,delete ve[Ue]}else"reverse"===Ae?(Ie.range?Ie.range.reverse():(it(Oe+".autorange",!0),Ie.range=[1,0]),et.autorange?Ft.calc=!0:Ft.plot=!0):(Fe._has("scatter-like")&&Fe._has("regl")&&"dragmode"===Ue&&("lasso"===Be||"select"===Be)&&"lasso"!==ct&&"select"!==ct||Fe._has("gl2d")?Ft.plot=!0:vt?w.update(Ft,vt):Ft.calc=!0,We.set(Be))}}for(Me in Je)l.applyContainerArrayChanges(fe,rt(Pe,Me),Je[Me],Ft,rt)||(Ft.plot=!0);for(var Nt in Xt){var Zt=(Et=s.getFromId(fe,Nt))&&Et._constraintGroup;if(Zt)for(var or in Ft.calc=!0,Zt)Xt[or]||(s.getFromId(fe,or)._constraintShrinkable=!0)}return(K(fe)||ve.height||ve.width)&&(Ft.plot=!0),(Ft.plot||Ft.calc)&&(Ft.layoutReplot=!0),{flags:Ft,rangesAltered:Xt,undoit:ot,redoit:Dt,eventData:Xe}}function K(fe){var ve=fe._fullLayout,Me=ve.width,ke=ve.height;return fe.layout.autosize&&p.plotAutoSize(fe,fe.layout,ve),ve.width!==Me||ve.height!==ke}function re(fe,ve,Me,ke){fe=t.getGraphDiv(fe),x.clearPromiseQueue(fe),t.isPlainObject(ve)||(ve={}),t.isPlainObject(Me)||(Me={}),Object.keys(ve).length&&(fe.changed=!0),Object.keys(Me).length&&(fe.changed=!0);var Ce=x.coerceTraceIndices(fe,ke),Pe=Y(fe,t.extendFlat({},ve),Ce),Fe=Pe.flags,qe=J(fe,t.extendFlat({},Me)),rt=qe.flags;(Fe.calc||rt.calc)&&(fe.calcdata=void 0),Fe.clearAxisTypes&&x.clearAxisTypes(fe,Ce,Me);var ze=[];rt.layoutReplot?ze.push(m.layoutReplot):Fe.fullReplot?ze.push(ee._doPlot):(ze.push(p.previousPromises),z(fe,rt,qe)||p.supplyDefaults(fe),Fe.style&&ze.push(m.doTraceStyle),(Fe.colorbars||rt.colorbars)&&ze.push(m.doColorBars),rt.legend&&ze.push(m.doLegend),rt.layoutstyle&&ze.push(m.layoutStyles),rt.axrange&&N(ze,qe.rangesAltered),rt.ticks&&ze.push(m.doTicksRelayout),rt.modebar&&ze.push(m.doModeBar),rt.camera&&ze.push(m.doCamera),ze.push(T)),ze.push(p.rehover,p.redrag),r.add(fe,re,[fe,Pe.undoit,qe.undoit,Pe.traces],re,[fe,Pe.redoit,qe.redoit,Pe.traces]);var He=t.syncOrAsync(ze,fe);return He&&He.then||(He=Promise.resolve(fe)),He.then(function(){return fe.emit("plotly_update",{data:Pe.eventData,layout:qe.eventData}),fe})}function ie(fe){return function(ve){ve._fullLayout._guiEditing=!0;var Me=fe.apply(null,arguments);return ve._fullLayout._guiEditing=!1,Me}}var ce=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],se=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function de(fe,ve){for(var Me=0;Me<ve.length;Me++){var ke=ve[Me],Ce=fe.match(ke.pattern);if(Ce){var Pe=Ce[1]||"";return{head:Pe,tail:fe.substr(Pe.length+1),attr:ke.attr}}}}function ue(fe,ve){var Me=e(ve,fe).get();if(void 0!==Me)return Me;var ke=fe.split(".");for(ke.pop();ke.length>1;)if(ke.pop(),void 0!==(Me=e(ve,ke.join(".")+".uirevision").get()))return Me;return ve.uirevision}function ge(fe,ve){for(var Me=0;Me<ve.length;Me++)if(ve[Me]._fullInput.uid===fe)return Me;return-1}function be(fe,ve,Me){for(var ke=0;ke<ve.length;ke++)if(ve[ke].uid===fe)return ke;return!ve[Me]||ve[Me].uid?-1:Me}function Te(fe,ve){var Me=t.isPlainObject(fe),ke=Array.isArray(fe);return Me||ke?(Me&&t.isPlainObject(ve)||ke&&Array.isArray(ve))&&JSON.stringify(fe)===JSON.stringify(ve):fe===ve}function we(fe,ve,Me,ke){var Ce,Pe,Fe,qe=ke.getValObject,rt=ke.flags,ze=ke.immutable,He=ke.inArray,Xe=ke.arrayIndex;function Je(){var Ie=Ce.editType;He&&-1!==Ie.indexOf("arraydraw")?t.pushUnique(rt.arrays[He],Xe):(w.update(rt,Ce),"none"!==Ie&&rt.nChanges++,ke.transition&&Ce.anim&&rt.nChangesAnim++,(V.test(Fe)||Q.test(Fe))&&(rt.rangesAltered[Me[0]]=1),j.test(Fe)&&e(ve,"_inputDomain").set(null),"datarevision"===Pe&&(rt.newDataRevision=1))}function at(Ie){return"data_array"===Ie.valType||Ie.arrayOk}for(Pe in fe){if(rt.calc&&!ke.transition)return;var pt=fe[Pe],xt=ve[Pe],Ft=Me.concat(Pe);if(Fe=Ft.join("."),"_"!==Pe.charAt(0)&&"function"!=typeof pt&&pt!==xt){if(("tick0"===Pe||"dtick"===Pe)&&"geo"!==Me[0]){var Dt=ve.tickmode;if("auto"===Dt||"array"===Dt||!Dt)continue}if(("range"!==Pe||!ve.autorange)&&("zmin"!==Pe&&"zmax"!==Pe||"contourcarpet"!==ve.type)&&(Ce=qe(Ft))&&(!Ce._compareAsJSON||JSON.stringify(pt)!==JSON.stringify(xt))){var ot,it=Ce.valType,Et=at(Ce),Xt=Array.isArray(pt),nr=Array.isArray(xt);if(Xt&&nr){var Ue="_input_"+Pe,We=fe[Ue],Be=ve[Ue];if(Array.isArray(We)&&We===Be)continue}if(void 0===xt)Et&&Xt?rt.calc=!0:Je();else if(Ce._isLinkedToArray){var Qe=[],Ae=!1;He||(rt.arrays[Pe]=Qe);var De=Math.min(pt.length,xt.length),Oe=Math.max(pt.length,xt.length);if(De!==Oe){if("arraydraw"!==Ce.editType){Je();continue}Ae=!0}for(ot=0;ot<De;ot++)we(pt[ot],xt[ot],Ft.concat(ot),t.extendFlat({inArray:Pe,arrayIndex:ot},ke));if(Ae)for(ot=De;ot<Oe;ot++)Qe.push(ot)}else!it&&t.isPlainObject(pt)?we(pt,xt,Ft,ke):Et?Xt&&nr?(ze&&(rt.calc=!0),(ze||ke.newDataRevision)&&Je()):Xt!==nr?rt.calc=!0:Je():Xt&&nr&&pt.length===xt.length&&String(pt)===String(xt)||Je()}}}for(Pe in ve)if(!(Pe in fe)&&"_"!==Pe.charAt(0)&&"function"!=typeof ve[Pe]){if(at(Ce=qe(Me.concat(Pe)))&&Array.isArray(ve[Pe]))return void(rt.calc=!0);Je()}}function Le(fe){var ve=fe._fullLayout,Me=fe.getBoundingClientRect();if(!t.equalDomRects(Me,ve._lastBBox)){var ke=ve._invTransform=t.inverseTransformMatrix(t.getFullTransformMatrix(fe));ve._invScaleX=Math.sqrt(ke[0][0]*ke[0][0]+ke[0][1]*ke[0][1]+ke[0][2]*ke[0][2]),ve._invScaleY=Math.sqrt(ke[1][0]*ke[1][0]+ke[1][1]*ke[1][1]+ke[1][2]*ke[1][2]),ve._lastBBox=Me}}ee.animate=function(fe,ve,Me){if(fe=t.getGraphDiv(fe),!t.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ke=fe._transitionData;ke._frameQueue||(ke._frameQueue=[]);var Ce=(Me=p.supplyAnimationDefaults(Me)).transition,Pe=Me.frame;function Fe(ze){return Array.isArray(Ce)?ze>=Ce.length?Ce[0]:Ce[ze]:Ce}function qe(ze){return Array.isArray(Pe)?ze>=Pe.length?Pe[0]:Pe[ze]:Pe}function rt(ze,He){var Xe=0;return function(){if(ze&&++Xe===He)return ze()}}return void 0===ke._frameWaitingCnt&&(ke._frameWaitingCnt=0),new Promise(function(ze,He){function Je(){fe.emit("plotly_animating"),ke._lastFrameAt=-1/0,ke._timeToNext=0,ke._runningTransitions=0,ke._currentFrame=null;var We=function(){ke._animationRaf=window.requestAnimationFrame(We),Date.now()-ke._lastFrameAt>ke._timeToNext&&function(){ke._currentFrame&&ke._currentFrame.onComplete&&ke._currentFrame.onComplete();var We=ke._currentFrame=ke._frameQueue.shift();if(We){var Be=We.name?We.name.toString():null;fe._fullLayout._currentFrame=Be,ke._lastFrameAt=Date.now(),ke._timeToNext=We.frameOpts.duration,p.transition(fe,We.frame.data,We.frame.layout,x.coerceTraceIndices(fe,We.frame.traces),We.frameOpts,We.transitionOpts).then(function(){We.onComplete&&We.onComplete()}),fe.emit("plotly_animatingframe",{name:Be,frame:We.frame,animation:{frame:We.frameOpts,transition:We.transitionOpts}})}else fe.emit("plotly_animated"),window.cancelAnimationFrame(ke._animationRaf),ke._animationRaf=null}()};We()}var at,pt,xt=0;function Ft(We){return We.transitionOpts=Array.isArray(Ce)?xt>=Ce.length?Ce[xt]:Ce[0]:Ce,xt++,We}var Dt=[],ot=null==ve,it=Array.isArray(ve);if(ot||it||!t.isPlainObject(ve)){if(ot||-1!==["string","number"].indexOf(typeof ve))for(at=0;at<ke._frames.length;at++)(pt=ke._frames[at])&&(ot||String(pt.group)===String(ve))&&Dt.push({type:"byname",name:String(pt.name),data:Ft({name:pt.name})});else if(it)for(at=0;at<ve.length;at++){var Et=ve[at];-1!==["number","string"].indexOf(typeof Et)?(Et=String(Et),Dt.push({type:"byname",name:Et,data:Ft({name:Et})})):t.isPlainObject(Et)&&Dt.push({type:"object",data:Ft(t.extendFlat({},Et))})}}else Dt.push({type:"object",data:Ft(t.extendFlat({},ve))});for(at=0;at<Dt.length;at++)if("byname"===(pt=Dt[at]).type&&!ke._frameHash[pt.data.name])return t.warn('animate failure: frame not found: "'+pt.data.name+'"'),void He();-1!==["next","immediate"].indexOf(Me.mode)&&function(){if(0!==ke._frameQueue.length){for(;ke._frameQueue.length;){var We=ke._frameQueue.pop();We.onInterrupt&&We.onInterrupt()}fe.emit("plotly_animationinterrupted",[])}}(),"reverse"===Me.direction&&Dt.reverse();var Xt=fe._fullLayout._currentFrame;if(Xt&&Me.fromcurrent){var nr=-1;for(at=0;at<Dt.length;at++)if("byname"===(pt=Dt[at]).type&&pt.name===Xt){nr=at;break}if(nr>0&&nr<Dt.length-1){var Ue=[];for(at=0;at<Dt.length;at++)pt=Dt[at],("byname"!==Dt[at].type||at>nr)&&Ue.push(pt);Dt=Ue}}Dt.length>0?function(We){if(0!==We.length){for(var Be=0;Be<We.length;Be++){var Qe;Qe="byname"===We[Be].type?p.computeFrame(fe,We[Be].name):We[Be].data;var Ae=qe(Be),De=Fe(Be);De.duration=Math.min(De.duration,Ae.duration);var Oe={frame:Qe,name:We[Be].name,frameOpts:Ae,transitionOpts:De};Be===We.length-1&&(Oe.onComplete=rt(ze,2),Oe.onInterrupt=He),ke._frameQueue.push(Oe)}"immediate"===Me.mode&&(ke._lastFrameAt=-1/0),ke._animationRaf||Je()}}(Dt):(fe.emit("plotly_animated"),ze())})},ee.addFrames=function(fe,ve,Me){if(fe=t.getGraphDiv(fe),null==ve)return Promise.resolve();if(!t.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ke,Ce,Pe,Fe,qe=fe._transitionData._frames,rt=fe._transitionData._frameHash;if(!Array.isArray(ve))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+ve);var ze=qe.length+2*ve.length,He=[],Xe={};for(ke=ve.length-1;ke>=0;ke--)if(t.isPlainObject(ve[ke])){var Je=ve[ke].name,at=(rt[Je]||Xe[Je]||{}).name,pt=ve[ke].name;at&&pt&&"number"==typeof pt&&(rt[at]||Xe[at])&&k<5&&(k++,t.warn('addFrames: overwriting frame "'+(rt[at]||Xe[at]).name+'" with a frame whose name of type "number" also equates to "'+at+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===k&&t.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Xe[Je]={name:Je},He.push({frame:p.supplyFrameDefaults(ve[ke]),index:Me&&null!=Me[ke]?Me[ke]:ze+ke})}He.sort(function(Ue,We){return Ue.index>We.index?-1:Ue.index<We.index?1:0});var Ft=[],Dt=[],ot=qe.length;for(ke=He.length-1;ke>=0;ke--){if("number"==typeof(Ce=He[ke].frame).name&&t.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ce.name)for(;rt[Ce.name="frame "+fe._transitionData._counter++];);if(rt[Ce.name]){for(Pe=0;Pe<qe.length&&(qe[Pe]||{}).name!==Ce.name;Pe++);Ft.push({type:"replace",index:Pe,value:Ce}),Dt.unshift({type:"replace",index:Pe,value:qe[Pe]})}else Fe=Math.max(0,Math.min(He[ke].index,ot)),Ft.push({type:"insert",index:Fe,value:Ce}),Dt.unshift({type:"delete",index:Fe}),ot++}return r&&r.add(fe,p.modifyFrames,[fe,Dt],p.modifyFrames,[fe,Ft]),p.modifyFrames(fe,Ft)},ee.deleteFrames=function(fe,ve){if(fe=t.getGraphDiv(fe),!t.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);var Me,ke,Ce=fe._transitionData._frames,Pe=[],Fe=[];if(!ve)for(ve=[],Me=0;Me<Ce.length;Me++)ve.push(Me);for((ve=ve.slice()).sort(),Me=ve.length-1;Me>=0;Me--)Pe.push({type:"delete",index:ke=ve[Me]}),Fe.unshift({type:"insert",index:ke,value:Ce[ke]});return r&&r.add(fe,p.modifyFrames,[fe,Fe],p.modifyFrames,[fe,Pe]),p.modifyFrames(fe,Pe)},ee.addTraces=function fe(ve,Me,ke){ve=t.getGraphDiv(ve);var Ce,Pe,Fe=[],qe=ee.deleteTraces,rt=fe,ze=[ve,Fe],He=[ve,Me];for(function(Xe,Je,at){var pt,xt;if(!Array.isArray(Xe.data))throw new Error("gd.data must be an array.");if(void 0===Je)throw new Error("traces must be defined.");for(Array.isArray(Je)||(Je=[Je]),pt=0;pt<Je.length;pt++)if("object"!=typeof(xt=Je[pt])||Array.isArray(xt)||null===xt)throw new Error("all values in traces array must be non-array objects");if(void 0===at||Array.isArray(at)||(at=[at]),void 0!==at&&at.length!==Je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(ve,Me,ke),Array.isArray(Me)||(Me=[Me]),Me=Me.map(function(Xe){return t.extendFlat({},Xe)}),x.cleanData(Me),Ce=0;Ce<Me.length;Ce++)ve.data.push(Me[Ce]);for(Ce=0;Ce<Me.length;Ce++)Fe.push(-Me.length+Ce);if(void 0===ke)return Pe=ee.redraw(ve),r.add(ve,qe,ze,rt,He),Pe;Array.isArray(ke)||(ke=[ke]);try{C(ve,Fe,ke)}catch(Xe){throw ve.data.splice(ve.data.length-Me.length,Me.length),Xe}return r.startSequence(ve),r.add(ve,qe,ze,rt,He),Pe=ee.moveTraces(ve,Fe,ke),r.stopSequence(ve),Pe},ee.deleteTraces=function fe(ve,Me){ve=t.getGraphDiv(ve);var ke,Ce,Pe=[],Fe=ee.addTraces,qe=fe,rt=[ve,Pe,Me],ze=[ve,Me];if(void 0===Me)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Me)||(Me=[Me]),S(ve,Me,"indices"),(Me=D(Me,ve.data.length-1)).sort(t.sorterDes),ke=0;ke<Me.length;ke+=1)Ce=ve.data.splice(Me[ke],1)[0],Pe.push(Ce);var He=ee.redraw(ve);return r.add(ve,Fe,rt,qe,ze),He},ee.extendTraces=function fe(ve,Me,ke,Ce){function Pe(ze,He,Xe){var Je,at;if(t.isTypedArray(ze))if(Xe<0){var pt=new ze.constructor(0),xt=F(ze,He);Xe<0?(Je=xt,at=pt):(Je=pt,at=xt)}else if(Je=new ze.constructor(Xe),at=new ze.constructor(ze.length+He.length-Xe),Xe===He.length)Je.set(He),at.set(ze);else if(Xe<He.length){var Ft=He.length-Xe;Je.set(He.subarray(Ft)),at.set(ze),at.set(He.subarray(0,Ft),ze.length)}else{var Dt=Xe-He.length,ot=ze.length-Dt;Je.set(ze.subarray(ot)),Je.set(He,Dt),at.set(ze.subarray(0,ot))}else Je=ze.concat(He),at=Xe>=0&&Xe<Je.length?Je.splice(0,Je.length-Xe):[];return[Je,at]}var Fe=R(ve=t.getGraphDiv(ve),Me,ke,Ce,Pe),qe=ee.redraw(ve);return r.add(ve,ee.prependTraces,[ve,Fe.update,ke,Fe.maxPoints],fe,arguments),qe},ee.moveTraces=function fe(ve,Me,ke){var Ce,Pe=[],Fe=[],qe=fe,rt=fe,ze=[ve=t.getGraphDiv(ve),ke,Me],He=[ve,Me,ke];if(C(ve,Me,ke),Me=Array.isArray(Me)?Me:[Me],void 0===ke)for(ke=[],Ce=0;Ce<Me.length;Ce++)ke.push(-Me.length+Ce);for(ke=Array.isArray(ke)?ke:[ke],Me=D(Me,ve.data.length-1),ke=D(ke,ve.data.length-1),Ce=0;Ce<ve.data.length;Ce++)-1===Me.indexOf(Ce)&&Pe.push(ve.data[Ce]);for(Ce=0;Ce<Me.length;Ce++)Fe.push({newIndex:ke[Ce],trace:ve.data[Me[Ce]]});for(Fe.sort(function(Je,at){return Je.newIndex-at.newIndex}),Ce=0;Ce<Fe.length;Ce+=1)Pe.splice(Fe[Ce].newIndex,0,Fe[Ce].trace);ve.data=Pe;var Xe=ee.redraw(ve);return r.add(ve,qe,ze,rt,He),Xe},ee.prependTraces=function fe(ve,Me,ke,Ce){function Pe(ze,He,Xe){var Je,at;if(t.isTypedArray(ze))if(Xe<=0){var pt=new ze.constructor(0),xt=F(He,ze);Xe<0?(Je=xt,at=pt):(Je=pt,at=xt)}else if(Je=new ze.constructor(Xe),at=new ze.constructor(ze.length+He.length-Xe),Xe===He.length)Je.set(He),at.set(ze);else if(Xe<He.length){var Ft=He.length-Xe;Je.set(He.subarray(0,Ft)),at.set(He.subarray(Ft)),at.set(ze,Ft)}else{var Dt=Xe-He.length;Je.set(He),Je.set(ze.subarray(0,Dt),He.length),at.set(ze.subarray(Dt))}else Je=He.concat(ze),at=Xe>=0&&Xe<Je.length?Je.splice(Xe,Je.length):[];return[Je,at]}var Fe=R(ve=t.getGraphDiv(ve),Me,ke,Ce,Pe),qe=ee.redraw(ve);return r.add(ve,ee.extendTraces,[ve,Fe.update,ke,Fe.maxPoints],fe,arguments),qe},ee.newPlot=function(fe,ve,Me,ke){return fe=t.getGraphDiv(fe),p.cleanPlot([],{},fe._fullData||[],fe._fullLayout||{}),p.purge(fe),ee._doPlot(fe,ve,Me,ke)},ee._doPlot=function(fe,ve,Me,ke){var Ce;if(fe=t.getGraphDiv(fe),i.init(fe),t.isPlainObject(ve)){var Pe=ve;ve=Pe.data,Me=Pe.layout,ke=Pe.config,Ce=Pe.frames}if(!1===i.triggerHandler(fe,"plotly_beforeplot",[ve,Me,ke]))return Promise.reject();ve||Me||t.isPlotDiv(fe)||t.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",fe),I(fe,ke),Me||(Me={}),d.select(fe).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray(fe._promises)||(fe._promises=[]);var Fe=0===(fe.data||[]).length&&Array.isArray(ve);Array.isArray(ve)&&(x.cleanData(ve),Fe?fe.data=ve:fe.data.push.apply(fe.data,ve),fe.empty=!1),fe.layout&&!Fe||(fe.layout=x.cleanLayout(Me)),p.supplyDefaults(fe);var qe=fe._fullLayout,rt=qe._has("cartesian");qe._replotting=!0,(Fe||qe._shouldCreateBgLayer)&&(function(Dt){var ot=d.select(Dt),it=Dt._fullLayout;if(it._calcInverseTransform=Le,it._calcInverseTransform(Dt),it._container=ot.selectAll(".plot-container").data([0]),it._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),it._paperdiv=it._container.selectAll(".svg-container").data([0]),it._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),it._glcontainer=it._paperdiv.selectAll(".gl-container").data([{}]),it._glcontainer.enter().append("div").classed("gl-container",!0),it._paperdiv.selectAll(".main-svg").remove(),it._paperdiv.select(".modebar-container").remove(),it._paper=it._paperdiv.insert("svg",":first-child").classed("main-svg",!0),it._toppaper=it._paperdiv.append("svg").classed("main-svg",!0),it._modebardiv=it._paperdiv.append("div"),delete it._modeBar,it._hoverpaper=it._paperdiv.append("svg").classed("main-svg",!0),!it._uid){var Et={};d.selectAll("defs").each(function(){this.id&&(Et[this.id.split("-")[1]]=1)}),it._uid=t.randstr(Et)}it._paperdiv.selectAll(".main-svg").attr(h.svgAttrs),it._defs=it._paper.append("defs").attr("id","defs-"+it._uid),it._clips=it._defs.append("g").classed("clips",!0),it._topdefs=it._toppaper.append("defs").attr("id","topdefs-"+it._uid),it._topclips=it._topdefs.append("g").classed("clips",!0),it._bgLayer=it._paper.append("g").classed("bglayer",!0),it._draggers=it._paper.append("g").classed("draglayer",!0);var Xt=it._paper.append("g").classed("layer-below",!0);it._imageLowerLayer=Xt.append("g").classed("imagelayer",!0),it._shapeLowerLayer=Xt.append("g").classed("shapelayer",!0),it._cartesianlayer=it._paper.append("g").classed("cartesianlayer",!0),it._polarlayer=it._paper.append("g").classed("polarlayer",!0),it._smithlayer=it._paper.append("g").classed("smithlayer",!0),it._ternarylayer=it._paper.append("g").classed("ternarylayer",!0),it._geolayer=it._paper.append("g").classed("geolayer",!0),it._funnelarealayer=it._paper.append("g").classed("funnelarealayer",!0),it._pielayer=it._paper.append("g").classed("pielayer",!0),it._iciclelayer=it._paper.append("g").classed("iciclelayer",!0),it._treemaplayer=it._paper.append("g").classed("treemaplayer",!0),it._sunburstlayer=it._paper.append("g").classed("sunburstlayer",!0),it._indicatorlayer=it._toppaper.append("g").classed("indicatorlayer",!0),it._glimages=it._paper.append("g").classed("glimages",!0);var nr=it._toppaper.append("g").classed("layer-above",!0);it._imageUpperLayer=nr.append("g").classed("imagelayer",!0),it._shapeUpperLayer=nr.append("g").classed("shapelayer",!0),it._infolayer=it._toppaper.append("g").classed("infolayer",!0),it._menulayer=it._toppaper.append("g").classed("menulayer",!0),it._zoomlayer=it._toppaper.append("g").classed("zoomlayer",!0),it._hoverlayer=it._hoverpaper.append("g").classed("hoverlayer",!0),it._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Dt.emit("plotly_framework")}(fe),qe._shouldCreateBgLayer&&delete qe._shouldCreateBgLayer),a.initGradients(fe),a.initPatterns(fe),Fe&&s.saveShowSpikeInitial(fe);var ze=!fe.calcdata||fe.calcdata.length!==(fe._fullData||[]).length;ze&&p.doCalcdata(fe);for(var He=0;He<fe.calcdata.length;He++)fe.calcdata[He][0].trace=fe._fullData[He];fe._context.responsive?fe._responsiveChartHandler||(fe._responsiveChartHandler=function(){t.isHidden(fe)||p.resize(fe)},window.addEventListener("resize",fe._responsiveChartHandler)):t.clearResponsive(fe);var Xe=t.extendFlat({},qe._size),Je=0;function at(){if(p.clearAutoMarginIds(fe),m.drawMarginPushers(fe),s.allowAutoMargin(fe),qe._has("pie"))for(var Dt=fe._fullData,ot=0;ot<Dt.length;ot++){var it=Dt[ot];"pie"===it.type&&it.automargin&&p.allowAutoMargin(fe,"pie."+it.uid+".automargin")}return p.doAutoMargin(fe),p.previousPromises(fe)}function pt(){fe._transitioning||(m.doAutoRangeAndConstraints(fe),Fe&&s.saveRangeInitial(fe),o.getComponentMethod("rangeslider","calcAutorange")(fe))}var xt=[p.previousPromises,function(){if(Ce)return ee.addFrames(fe,Ce)},function Dt(){for(var ot=qe._basePlotModules,it=0;it<ot.length;it++)ot[it].drawFramework&&ot[it].drawFramework(fe);!qe._glcanvas&&qe._has("gl")&&(qe._glcanvas=qe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ue){return Ue.key}),qe._glcanvas.enter().append("canvas").attr("class",function(Ue){return"gl-canvas gl-canvas-"+Ue.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Et=fe._context.plotGlPixelRatio;if(qe._glcanvas){qe._glcanvas.attr("width",qe.width*Et).attr("height",qe.height*Et).style("width",qe.width+"px").style("height",qe.height+"px");var Xt=qe._glcanvas.data()[0].regl;if(Xt&&(Math.floor(qe.width*Et)!==Xt._gl.drawingBufferWidth||Math.floor(qe.height*Et)!==Xt._gl.drawingBufferHeight)){var nr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Je)return t.log(nr+" Clearing graph and plotting again."),p.cleanPlot([],{},fe._fullData,qe),p.supplyDefaults(fe),qe=fe._fullLayout,p.doCalcdata(fe),Je++,Dt();t.error(nr)}}return"h"===qe.modebar.orientation?qe._modebardiv.style("height",null).style("width","100%"):qe._modebardiv.style("width",null).style("height",qe.height+"px"),p.previousPromises(fe)},at,function(){if(p.didMarginChange(Xe,qe._size))return t.syncOrAsync([at,m.layoutStyles],fe)}];rt&&xt.push(function(){if(ze)return t.syncOrAsync([o.getComponentMethod("shapes","calcAutorange"),o.getComponentMethod("annotations","calcAutorange"),pt],fe);pt()}),xt.push(m.layoutStyles),rt&&xt.push(function(){return s.draw(fe,Fe?"":"redraw")},function(Dt){Dt._fullLayout._insideTickLabelsAutorange&&te(Dt,Dt._fullLayout._insideTickLabelsAutorange).then(function(){Dt._fullLayout._insideTickLabelsAutorange=void 0})}),xt.push(m.drawData,m.finalDraw,u,p.addLinks,p.rehover,p.redrag,p.doAutoMargin,function(Dt){Dt._fullLayout._insideTickLabelsAutorange&&Fe&&s.saveRangeInitial(Dt,!0)},p.previousPromises);var Ft=t.syncOrAsync(xt,fe);return Ft&&Ft.then||(Ft=Promise.resolve()),Ft.then(function(){return T(fe),fe})},ee.purge=function(fe){var ve=(fe=t.getGraphDiv(fe))._fullLayout||{};return p.cleanPlot([],{},fe._fullData||[],ve),p.purge(fe),i.purge(fe),ve._container&&ve._container.remove(),delete fe._context,fe},ee.react=function(fe,ve,Me,ke){var Ce,Pe;fe=t.getGraphDiv(fe),x.clearPromiseQueue(fe);var Oe,Ie,et,ct,vt,ft,Fe=fe._fullData,qe=fe._fullLayout;if(t.isPlotDiv(fe)&&Fe&&qe){if(t.isPlainObject(ve)){var rt=ve;ve=rt.data,Me=rt.layout,ke=rt.config,Ce=rt.frames}var ze=!1;if(ke){var He=t.extendDeep({},fe._context);fe._context=void 0,I(fe,ke),ze=function Oe(Ie,et){var ct;for(ct in Ie)if("_"!==ct.charAt(0)){var vt=Ie[ct],ft=et[ct];if(vt!==ft)if(t.isPlainObject(vt)&&t.isPlainObject(ft)){if(Oe(vt,ft))return!0}else{if(!Array.isArray(vt)||!Array.isArray(ft)||vt.length!==ft.length)return!0;for(var It=0;It<vt.length;It++)if(vt[It]!==ft[It]&&(!t.isPlainObject(vt[It])||!t.isPlainObject(ft[It])||Oe(vt[It],ft[It])))return!0}}}(He,fe._context)}fe.data=ve||[],x.cleanData(fe.data),fe.layout=Me||{},x.cleanLayout(fe.layout),function(Oe,Ie,et,ct){var vt,ft,It,ut,Ot,Rt,$e,yt,Bt,Ut,Qt=ct._preGUI,Re=[],ht={},Mt={};for(vt in Qt){if(Ot=de(vt,ce)){if(Bt=Ot.head,Ut=Ot.tail,(ut=(It=e(ct,ft=Ot.attr||Bt+".uirevision").get())&&ue(ft,Ie))&&ut===It){if(null===(Rt=Qt[vt])&&(Rt=void 0),Te(yt=($e=e(Ie,vt)).get(),Rt)){void 0===yt&&"autorange"===Ut&&Re.push(Bt),$e.set(U(e(ct,vt).get()));continue}if("autorange"===Ut||"range["===Ut.substr(0,6)){var or=Qt[Bt+".autorange"];if(or||null===or&&null===Qt[Bt+".range[0]"]&&null===Qt[Bt+".range[1]"]){if(!(Bt in ht)){var Wt=e(Ie,Bt).get();ht[Bt]=Wt&&(Wt.autorange||!1!==Wt.autorange&&(!Wt.range||2!==Wt.range.length))}if(ht[Bt]){$e.set(U(e(ct,vt).get()));continue}}}}}else t.warn("unrecognized GUI edit: "+vt);delete Qt[vt],Ot&&"range["===Ot.tail.substr(0,6)&&(Mt[Ot.head]=1)}for(var er=0;er<Re.length;er++){var cr=Re[er];if(Mt[cr]){var _r=e(Ie,cr).get();_r&&delete _r.autorange}}var xr=ct._tracePreGUI;for(var dr in xr){var pr,br=xr[dr],Nr=null;for(vt in br){if(!Nr){var kr=ge(dr,et);if(kr<0){delete xr[dr];break}var Hr=be(dr,Oe,(pr=et[kr]._fullInput).index);if(Hr<0){delete xr[dr];break}Nr=Oe[Hr]}if(Ot=de(vt,se)){if(Ot.attr?ut=(It=e(ct,Ot.attr).get())&&ue(Ot.attr,Ie):(It=pr.uirevision,void 0===(ut=Nr.uirevision)&&(ut=Ie.uirevision)),ut&&ut===It&&(null===(Rt=br[vt])&&(Rt=void 0),Te(yt=($e=e(Nr,vt)).get(),Rt))){$e.set(U(e(pr,vt).get()));continue}}else t.warn("unrecognized GUI edit: "+vt+" in trace uid "+dr);delete br[vt]}}}(fe.data,fe.layout,Fe,qe),p.supplyDefaults(fe,{skipUpdateCalc:!0});var Xe=fe._fullData,Je=fe._fullLayout,at=void 0===Je.datarevision,pt=Je.transition,xt=(Oe=fe,Ie=qe,et=Je,ct=at,vt=pt,(ft=w.layoutFlags()).arrays={},ft.rangesAltered={},ft.nChanges=0,ft.nChangesAnim=0,we(Ie,et,[],{getValObject:function(ut){return n.getLayoutValObject(et,ut)},flags:ft,immutable:ct,transition:vt,gd:Oe}),(ft.plot||ft.calc)&&(ft.layoutReplot=!0),vt&&ft.nChanges&&ft.nChangesAnim&&(ft.anim=ft.nChanges===ft.nChangesAnim?"all":"some"),ft),Dt=function(Oe,Ie,et,ct,vt,ft){var It=Ie.length===et.length;if(!vt&&!It)return{fullReplot:!0,calc:!0};var ut,Ot,Rt=w.traceFlags();Rt.arrays={},Rt.nChanges=0,Rt.nChangesAnim=0;var $e={getValObject:function(Bt){var Ut=n.getTraceValObject(Ot,Bt);return!Ot._module.animatable&&Ut.anim&&(Ut.anim=!1),Ut},flags:Rt,immutable:ct,transition:vt,newDataRevision:ft,gd:Oe},yt={};for(ut=0;ut<Ie.length;ut++)if(et[ut]){if(p.hasMakesDataTransform(Ot=et[ut]._fullInput)&&(Ot=et[ut]),yt[Ot.uid])continue;yt[Ot.uid]=1,we(Ie[ut]._fullInput,Ot,[],$e)}return(Rt.calc||Rt.plot)&&(Rt.fullReplot=!0),vt&&Rt.nChanges&&Rt.nChangesAnim&&(Rt.anim=Rt.nChanges===Rt.nChangesAnim&&It?"all":"some"),Rt}(fe,Fe,Xe,at,pt,xt.newDataRevision);if(K(fe)&&(xt.layoutReplot=!0),Dt.calc||xt.calc){fe.calcdata=void 0;for(var ot=Object.getOwnPropertyNames(Je),it=0;it<ot.length;it++){var Et=ot[it],Xt=Et.substring(0,5);if("xaxis"===Xt||"yaxis"===Xt){var nr=Je[Et]._emptyCategories;nr&&nr()}}}else p.supplyDefaultsUpdateCalc(fe.calcdata,Xe);var Ue=[];if(Ce&&(fe._transitionData={},p.createTransitionData(fe),Ue.push(function(){return ee.addFrames(fe,Ce)})),Je.transition&&!ze&&(Dt.anim||xt.anim))xt.ticks&&Ue.push(m.doTicksRelayout),p.doCalcdata(fe),m.doAutoRangeAndConstraints(fe),Ue.push(function(){return p.transitionFromReact(fe,Dt,xt,qe)});else if(Dt.fullReplot||xt.layoutReplot||ze)fe._fullLayout._skipDefaults=!0,Ue.push(ee._doPlot);else{for(var We in xt.arrays){var Be=xt.arrays[We];if(Be.length){var Qe=o.getComponentMethod(We,"drawOne");if(Qe!==t.noop)for(var Ae=0;Ae<Be.length;Ae++)Qe(fe,Be[Ae]);else{var De=o.getComponentMethod(We,"draw");if(De===t.noop)throw new Error("cannot draw components: "+We);De(fe)}}}Ue.push(p.previousPromises),Dt.style&&Ue.push(m.doTraceStyle),(Dt.colorbars||xt.colorbars)&&Ue.push(m.doColorBars),xt.legend&&Ue.push(m.doLegend),xt.layoutstyle&&Ue.push(m.layoutStyles),xt.axrange&&N(Ue),xt.ticks&&Ue.push(m.doTicksRelayout),xt.modebar&&Ue.push(m.doModeBar),xt.camera&&Ue.push(m.doCamera),Ue.push(T)}Ue.push(p.rehover,p.redrag),(Pe=t.syncOrAsync(Ue,fe))&&Pe.then||(Pe=Promise.resolve(fe))}else Pe=ee.newPlot(fe,ve,Me,ke);return Pe.then(function(){return fe.emit("plotly_react",{data:ve,layout:Me}),fe})},ee.redraw=function(fe){if(fe=t.getGraphDiv(fe),!t.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);return x.cleanData(fe.data),x.cleanLayout(fe.layout),fe.calcdata=void 0,ee._doPlot(fe).then(function(){return fe.emit("plotly_redraw"),fe})},ee.relayout=te,ee.restyle=H,ee.setPlotConfig=function(fe){return t.extendFlat(f,fe)},ee.update=re,ee._guiRelayout=ie(te),ee._guiRestyle=ie(H),ee._guiUpdate=ie(re),ee._storeDirectGUIEdit=function(fe,ve,Me){for(var ke in Me)Z(ke,e(fe,ke).get(),Me[ke],ve)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(y,$,ee){"use strict";var d={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},g={};(function _(t,e){for(var i in t){var r=t[i];r.valType?e[i]=r.dflt:(e[i]||(e[i]={}),_(r,e[i]))}})(d,g),$.exports={configAttributes:d,dfltConfig:g}},{}],542:[function(y,$,ee){"use strict";var d=y("../registry"),g=y("../lib"),_=y("../plots/attributes"),t=y("../plots/layout_attributes"),e=y("../plots/frame_attributes"),i=y("../plots/animation_attributes"),r=y("./plot_config").configAttributes,o=y("./edit_types"),n=g.extendDeepAll,p=g.isPlainObject,s=g.isArrayOrTypedArray,a=g.nestedProperty,c=g.valObjectMeta,u=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function h(b,k,T){if(!b)return!1;if(b._isLinkedToArray)if(v(k[T]))T++;else if(T<k.length)return!1;for(;T<k.length;T++){var L=b[k[T]];if(!p(L)||(b=L,T===k.length-1))break;if(b._isLinkedToArray){if(!v(k[++T]))return!1}else if("info_array"===b.valType){var A=k[++T];if(!v(A))return!1;var I=b.items;if(Array.isArray(I)){if(A>=I.length)return!1;if(2===b.dimensions){if(T++,k.length===T)return b;var D=k[T];if(!v(D))return!1;b=I[A][D]}else b=I[A]}else b=I}}return b}function v(b){return b===Math.round(b)&&b>=0}function f(){var b,k,T={};for(b in n(T,t),d.subplotsRegistry)if((k=d.subplotsRegistry[b]).layoutAttributes)if(Array.isArray(k.attr))for(var L=0;L<k.attr.length;L++)m(T,k,k.attr[L]);else m(T,k,"subplot"===k.attr?k.name:k.attr);for(b in d.componentsRegistry){var A=(k=d.componentsRegistry[b]).schema;if(A&&(A.subplots||A.layout)){var I=A.subplots;if(I&&I.xaxis&&!I.yaxis)for(var D in I.xaxis)delete T.yaxis[D]}else"colorscale"===k.name?n(T,k.layoutAttributes):k.layoutAttributes&&w(T,k.layoutAttributes,k.name)}return{layoutAttributes:x(T)}}function l(){var b={frames:n({},e)};return x(b),b.frames}function x(b){return ee.crawl(b,function(T,L,A){ee.isValObject(T)?!0!==T.arrayOk&&"data_array"!==T.valType||(A[L+"src"]={valType:"string",editType:"none"}):p(T)&&(T.role="object")}),ee.crawl(b,function(T,L,A){if(T){var I=T._isLinkedToArray;I&&(delete T._isLinkedToArray,A[L]={items:{}},A[L].items[I]=T,A[L].role="object")}}),function(k){!function T(L){for(var A in L)if(p(L[A]))T(L[A]);else if(Array.isArray(L[A]))for(var I=0;I<L[A].length;I++)T(L[A][I]);else L[A]instanceof RegExp&&(L[A]=L[A].toString())}(k)}(b),b}function m(b,k,T){var L=a(b,T),A=n({},k.layoutAttributes);A._isSubplotObj=!0,L.set(A)}function w(b,k,T){var L=a(b,T);L.set(n(L.get()||{},k))}ee.IS_SUBPLOT_OBJ="_isSubplotObj",ee.IS_LINKED_TO_ARRAY="_isLinkedToArray",ee.DEPRECATED="_deprecated",ee.UNDERSCORE_ATTRS=u,ee.get=function(){var b={};d.allTypes.forEach(function(T){b[T]=function(L){var A,I;I=(A=d.modules[L]._module).basePlotModule;var D={type:null},S=n({},_),C=n({},A.attributes);ee.crawl(C,function(H,U,X,Z,Y){a(S,Y).set(void 0),void 0===H&&a(C,Y).set(void 0)}),n(D,S),d.traceIs(L,"noOpacity")&&delete D.opacity,d.traceIs(L,"showLegend")||(delete D.showlegend,delete D.legendgroup),d.traceIs(L,"noHover")&&(delete D.hoverinfo,delete D.hoverlabel),A.selectPoints||delete D.selectedpoints,n(D,C),I.attributes&&n(D,I.attributes),D.type=L;var R={meta:A.meta||{},categories:A.categories||{},animatable:Boolean(A.animatable),type:L,attributes:x(D)};if(A.layoutAttributes){var F={};n(F,A.layoutAttributes),R.layoutAttributes=x(F)}return A.animatable||ee.crawl(R,function(H){ee.isValObject(H)&&"anim"in H&&delete H.anim}),R}(T)});var k={};return Object.keys(d.transformsRegistry).forEach(function(T){var L,I;k[T]=(I=n({},d.transformsRegistry[L=T].attributes),Object.keys(d.componentsRegistry).forEach(function(D){var S=d.componentsRegistry[D];S.schema&&S.schema.transforms&&S.schema.transforms[L]&&Object.keys(S.schema.transforms[L]).forEach(function(C){w(I,S.schema.transforms[L][C],C)})}),{attributes:x(I)})}),{defs:{valObjects:c,metaKeys:u.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{}},traces:b,layout:f(),transforms:k,frames:l(),animation:x(i),config:x(r)}},ee.crawl=function(b,k,T,L){var A=T||0;L=L||"",Object.keys(b).forEach(function(I){var D=b[I];if(-1===u.indexOf(I)){var S=(L?L+".":"")+I;k(D,I,b,A,S),ee.isValObject(D)||p(D)&&"impliedEdits"!==I&&ee.crawl(D,k,A+1,S)}})},ee.isValObject=function(b){return b&&void 0!==b.valType},ee.findArrayAttributes=function(b){var k,T,L=[],A=[],I=[];function D(H,U,X,Z){A=A.slice(0,Z).concat([U]),I=I.slice(0,Z).concat([H&&H._isLinkedToArray]),H&&("data_array"===H.valType||!0===H.arrayOk)&&("colorbar"!==A[Z-1]||"ticktext"!==U&&"tickvals"!==U)&&function Y(W,te,z){var N=W[A[te]],V=z+A[te];if(te===A.length-1)s(N)&&L.push(T+V);else if(I[te]){if(Array.isArray(N))for(var Q=0;Q<N.length;Q++)p(N[Q])&&Y(N[Q],te+1,V+"["+Q+"].")}else p(N)&&Y(N,te+1,V+".")}(k,0,"")}k=b,T="",ee.crawl(_,D),b._module&&b._module.attributes&&ee.crawl(b._module.attributes,D);var S=b.transforms;if(S)for(var C=0;C<S.length;C++){var R=S[C],F=R._module;F&&(T="transforms["+C+"].",k=R,ee.crawl(F.attributes,D))}return L},ee.getTraceValObject=function(b,k){var T,L,A=k[0],I=1;if("transforms"===A){if(1===k.length)return _.transforms;var D=b.transforms;if(!Array.isArray(D)||!D.length)return!1;var S=k[1];if(!v(S)||S>=D.length)return!1;L=(T=(d.transformsRegistry[D[S].type]||{}).attributes)&&T[k[2]],I=3}else{var C=b._module;if(C||(C=(d.modules[b.type||_.type.dflt]||{})._module),!C)return!1;if(!(L=(T=C.attributes)&&T[A])){var R=C.basePlotModule;R&&R.attributes&&(L=R.attributes[A])}L||(L=_[A])}return h(L,k,I)},ee.getLayoutValObject=function(b,k){return h(function(T,L){var A,I,D,S,C=T._basePlotModules;if(C){var R;for(A=0;A<C.length;A++){if((D=C[A]).attrRegex&&D.attrRegex.test(L)){if(D.layoutAttrOverrides)return D.layoutAttrOverrides;!R&&D.layoutAttributes&&(R=D.layoutAttributes)}var F=D.baseLayoutAttrOverrides;if(F&&L in F)return F[L]}if(R)return R}var H=T._modules;if(H)for(A=0;A<H.length;A++)if((S=H[A].layoutAttributes)&&L in S)return S[L];for(I in d.componentsRegistry){if("colorscale"===(D=d.componentsRegistry[I]).name&&0===L.indexOf("coloraxis"))return D.layoutAttributes[L];if(!D.schema&&L===D.name)return D.layoutAttributes}return L in t&&t[L]}(b,k[0]),k,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plots/attributes"),_={name:{valType:"string",editType:"none"}};function t(i){return i&&"string"==typeof i}function e(i){return"s"!==i.charAt(i.length-1)&&d.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}_.templateitemname={valType:"string",editType:"calc"},ee.templatedArray=function(i,r){return r._isLinkedToArray=i,r.name=_.name,r.templateitemname=_.templateitemname,r},ee.traceTemplater=function(i){var r,o,n={};for(r in i)o=i[r],Array.isArray(o)&&o.length&&(n[r]=0);return{newTrace:function(p){var s={type:r=d.coerce(p,{},g,"type"),_template:null};if(r in n){var a=n[r]%(o=i[r]).length;n[r]++,s._template=o[a]}return s}}},ee.newContainer=function(i,r,o){var n=i._template,p=n&&(n[r]||o&&n[o]);return d.isPlainObject(p)||(p=null),i[r]={_template:p}},ee.arrayTemplater=function(i,r,o){var n=i._template,p=n&&n[e(r)],s=n&&n[r];Array.isArray(s)&&s.length||(s=[]);var a={};return{newItem:function(c){var u={name:c.name,_input:c},h=u.templateitemname=c.templateitemname;if(!t(h))return u._template=p,u;for(var v=0;v<s.length;v++){var f=s[v];if(f.name===h)return a[h]=1,u._template=f,u}return u[o]=c[o]||!1,u._template=!1,u},defaultItems:function(){for(var c=[],u=0;u<s.length;u++){var h=s[u],v=h.name;if(t(v)&&!a[v]){var f={_template:h,name:v,_input:{_templateitemname:v}};f.templateitemname=h.templateitemname,c.push(f),a[v]=1}}return c}}},ee.arrayDefaultKey=e,ee.arrayEditor=function(i,r,o){var n=(d.nestedProperty(i,r).get()||[]).length,p=o._index,s=p>=n&&(o._input||{})._templateitemname;s&&(p=n);var a,c=r+"["+p+"]";function u(){a={},s&&(a[c]={},a[c].templateitemname=s)}function h(f,l){s?d.nestedProperty(a[c],f).set(l):a[c+"."+f]=l}function v(){var f=a;return u(),f}return u(),{modifyBase:function(f,l){a[f]=l},modifyItem:h,getUpdateObj:v,applyUpdate:function(f,l){f&&h(f,l);var x=v();for(var m in x)d.nestedProperty(i,m).set(x[m])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../registry"),_=y("../plots/plots"),t=y("../lib"),e=y("../lib/clear_gl_canvases"),i=y("../components/color"),r=y("../components/drawing"),o=y("../components/titles"),n=y("../components/modebar"),p=y("../plots/cartesian/axes"),s=y("../constants/alignment"),a=y("../plots/cartesian/constraints"),c=a.enforce,u=a.clean,h=y("../plots/cartesian/autorange").doAutoRange;function v(k,T,L){for(var A=0;A<L.length;A++){var I=L[A][0],D=L[A][1];if(!(I[0]>=k[1]||I[1]<=k[0])&&D[0]<T[1]&&D[1]>T[0])return!0}return!1}function f(k){var T,L,A,I,D,S,C=k._fullLayout,R=C._size,F=R.p,H=p.list(k,"",!0);if(C._paperdiv.style({width:k._context.responsive&&C.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":C.width+"px",height:k._context.responsive&&C.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":C.height+"px"}).selectAll(".main-svg").call(r.setSize,C.width,C.height),k._context.setBackground(k,C.paper_bgcolor),ee.drawMainTitle(k),n.manage(k),!C._has("cartesian"))return _.previousPromises(k);function U(Je,at,pt){var xt=Je._lw/2;return"x"===Je._id.charAt(0)?at?"top"===pt?at._offset-F-xt:at._offset+at._length+F+xt:R.t+R.h*(1-(Je.position||0))+xt%1:at?"right"===pt?at._offset+at._length+F+xt:at._offset-F-xt:R.l+R.w*(Je.position||0)+xt%1}for(T=0;T<H.length;T++){var X=(I=H[T])._anchorAxis;I._linepositions={},I._lw=r.crispRound(k,I.linewidth,1),I._mainLinePosition=U(I,X,I.side),I._mainMirrorPosition=I.mirror&&X?U(I,X,s.OPPOSITE_SIDE[I.side]):null}var Z=[],Y=[],W=[],te=1===i.opacity(C.paper_bgcolor)&&1===i.opacity(C.plot_bgcolor)&&C.paper_bgcolor===C.plot_bgcolor;for(L in C._plots)if((A=C._plots[L]).mainplot)A.bg&&A.bg.remove(),A.bg=void 0;else{var z=A.xaxis.domain,N=A.yaxis.domain,V=A.plotgroup;if(v(z,N,W)){var Q=V.node(),j=A.bg=t.ensureSingle(V,"rect","bg");Q.insertBefore(j.node(),Q.childNodes[0]),Y.push(L)}else V.select("rect.bg").remove(),W.push([z,N]),te||(Z.push(L),Y.push(L))}var J,K,re,ie,ce,se,de,ue,ge,be,Te,we,Le,fe=C._bgLayer.selectAll(".bg").data(Z);for(fe.enter().append("rect").classed("bg",!0),fe.exit().remove(),fe.each(function(Je){C._plots[Je].bg=d.select(this)}),T=0;T<Y.length;T++)D=(A=C._plots[Y[T]]).xaxis,S=A.yaxis,A.bg&&void 0!==D._offset&&void 0!==S._offset&&A.bg.call(r.setRect,D._offset-F,S._offset-F,D._length+2*F,S._length+2*F).call(i.fill,C.plot_bgcolor).style("stroke-width",0);if(!C._hasOnlyLargeSploms)for(L in C._plots){D=(A=C._plots[L]).xaxis,S=A.yaxis;var ve,Me,ke=A.clipId="clip"+C._uid+L+"plot",Ce=t.ensureSingleById(C._clips,"clipPath",ke,function(Je){Je.classed("plotclip",!0).append("rect")});A.clipRect=Ce.select("rect").attr({width:D._length,height:S._length}),r.setTranslate(A.plot,D._offset,S._offset),A._hasClipOnAxisFalse?(ve=null,Me=ke):(ve=ke,Me=null),r.setClipUrl(A.plot,ve,k),A.layerClipId=Me}function Pe(Je){return"M"+J+","+Je+"H"+K}function Fe(Je){return"M"+D._offset+","+Je+"h"+D._length}function qe(Je){return"M"+Je+","+ue+"V"+de}function rt(Je){return"M"+Je+","+S._offset+"v"+S._length}function ze(Je,at,pt){if(!Je.showline||L!==Je._mainSubplot)return"";if(!Je._anchorAxis)return pt(Je._mainLinePosition);var xt=at(Je._mainLinePosition);return Je.mirror&&(xt+=at(Je._mainMirrorPosition)),xt}for(L in C._plots){S=(A=C._plots[L]).yaxis;var He="M0,0";l(D=A.xaxis,L)&&(ce=m(D,"left",S,H),J=D._offset-(ce?F+ce:0),se=m(D,"right",S,H),K=D._offset+D._length+(se?F+se:0),re=U(D,S,"bottom"),ie=U(D,S,"top"),!(Le=!D._anchorAxis||L!==D._mainSubplot)||"allticks"!==D.mirror&&"all"!==D.mirror||(D._linepositions[L]=[re,ie]),He=ze(D,Pe,Fe),Le&&D.showline&&("all"===D.mirror||"allticks"===D.mirror)&&(He+=Pe(re)+Pe(ie)),A.xlines.style("stroke-width",D._lw+"px").call(i.stroke,D.showline?D.linecolor:"rgba(0,0,0,0)")),A.xlines.attr("d",He);var Xe="M0,0";l(S,L)&&(Te=m(S,"bottom",D,H),de=S._offset+S._length+(Te?F:0),we=m(S,"top",D,H),ue=S._offset-(we?F:0),ge=U(S,D,"left"),be=U(S,D,"right"),!(Le=!S._anchorAxis||L!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[L]=[ge,be]),Xe=ze(S,qe,rt),Le&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(Xe+=qe(ge)+qe(be)),A.ylines.style("stroke-width",S._lw+"px").call(i.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),A.ylines.attr("d",Xe)}return p.makeClipPaths(k),_.previousPromises(k)}function l(k,T){return(k.ticks||k.showline)&&(T===k._mainSubplot||"all"===k.mirror||"allticks"===k.mirror)}function x(k,T,L){if(!L.showline||!L._lw)return!1;if("all"===L.mirror||"allticks"===L.mirror)return!0;var A=L._anchorAxis;if(!A)return!1;var I=s.FROM_BL[T];return L.side===T?A.domain[I]===k.domain[I]:L.mirror&&A.domain[1-I]===k.domain[1-I]}function m(k,T,L,A){if(x(k,T,L))return L._lw;for(var I=0;I<A.length;I++){var D=A[I];if(D._mainAxis===L._mainAxis&&x(k,T,D))return D._lw}return 0}function w(k,T){var L=k.title,A=k._size,I=0;switch("start"===T?I=L.pad.l:"end"===T&&(I=-L.pad.r),L.xref){case"paper":return A.l+A.w*L.x+I;case"container":default:return k.width*L.x+I}}function b(k,T){var L=k.title,A=k._size,I=0;if("0em"!==T&&T?T===s.CAP_SHIFT+"em"&&(I=L.pad.t):I=-L.pad.b,"auto"===L.y)return A.t/2;switch(L.yref){case"paper":return A.t+A.h-A.h*L.y+I;case"container":default:return k.height-k.height*L.y+I}}ee.layoutStyles=function(k){return t.syncOrAsync([_.doAutoMargin,f],k)},ee.drawMainTitle=function(k){var D,S,T=k._fullLayout,L=(S="middle",t.isRightAnchor(D=T.title)?S="end":t.isLeftAnchor(D)&&(S="start"),S),A=function(I){var D=I.title,S="0em";return t.isTopAnchor(D)?S=s.CAP_SHIFT+"em":t.isMiddleAnchor(D)&&(S=s.MID_SHIFT+"em"),S}(T);o.draw(k,"gtitle",{propContainer:T,propName:"title.text",placeholder:T._dfltTitle.plot,attributes:{x:w(T,L),y:b(T,A),"text-anchor":L,dy:A}})},ee.doTraceStyle=function(k){var T,L=k.calcdata,A=[];for(T=0;T<L.length;T++){var I=L[T],D=I[0]||{},S=D.trace||{},C=S._module||{},R=C.arraysToCalcdata;R&&R(I,S);var F=C.editStyle;F&&A.push({fn:F,cd0:D})}if(A.length){for(T=0;T<A.length;T++){var H=A[T];H.fn(k,H.cd0)}e(k),ee.redrawReglTraces(k)}return _.style(k),g.getComponentMethod("legend","draw")(k),_.previousPromises(k)},ee.doColorBars=function(k){return g.getComponentMethod("colorbar","draw")(k),_.previousPromises(k)},ee.layoutReplot=function(k){var T=k.layout;return k.layout=void 0,g.call("_doPlot",k,"",T)},ee.doLegend=function(k){return g.getComponentMethod("legend","draw")(k),_.previousPromises(k)},ee.doTicksRelayout=function(k){return p.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(g.subplotsRegistry.splom.updateGrid(k),e(k),ee.redrawReglTraces(k)),ee.drawMainTitle(k),_.previousPromises(k)},ee.doModeBar=function(k){var T=k._fullLayout;n.manage(k);for(var L=0;L<T._basePlotModules.length;L++){var A=T._basePlotModules[L].updateFx;A&&A(k)}return _.previousPromises(k)},ee.doCamera=function(k){for(var T=k._fullLayout,L=T._subplots.gl3d,A=0;A<L.length;A++){var I=T[L[A]];I._scene.setViewport(I)}},ee.drawData=function(k){var T=k._fullLayout;e(k);for(var L=T._basePlotModules,A=0;A<L.length;A++)L[A].plot(k);return ee.redrawReglTraces(k),_.style(k),g.getComponentMethod("shapes","draw")(k),g.getComponentMethod("annotations","draw")(k),g.getComponentMethod("images","draw")(k),T._replotting=!1,_.previousPromises(k)},ee.redrawReglTraces=function(k){var T=k._fullLayout;if(T._has("regl")){var L,A,I=k._fullData,D=[],S=[];for(T._hasOnlyLargeSploms&&T._splomGrid.draw(),L=0;L<I.length;L++){var C=I[L];!0===C.visible&&0!==C._length&&("splom"===C.type?T._splomScenes[C.uid].draw():"scattergl"===C.type?t.pushUnique(D,C.xaxis+C.yaxis):"scatterpolargl"===C.type&&t.pushUnique(S,C.subplot))}for(L=0;L<D.length;L++)(A=T._plots[D[L]])._scene&&A._scene.draw();for(L=0;L<S.length;L++)(A=T[S[L]]._subplot)._scene&&A._scene.draw()}},ee.doAutoRangeAndConstraints=function(k){for(var T,L=p.list(k,"",!0),A={},I=0;I<L.length;I++)if(!A[(T=L[I])._id]){A[T._id]=1,u(k,T),h(k,T);var D=T._matchGroup;if(D)for(var S in D){var C=p.getFromId(k,S);h(k,C,T.range),A[S]=1}}c(k)},ee.finalDraw=function(k){g.getComponentMethod("rangeslider","draw")(k),g.getComponentMethod("rangeselector","draw")(k)},ee.drawMarginPushers=function(k){g.getComponentMethod("legend","draw")(k),g.getComponentMethod("rangeselector","draw")(k),g.getComponentMethod("sliders","draw")(k),g.getComponentMethod("updatemenus","draw")(k),g.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(y,$,ee){"use strict";var d=y("../lib"),g=d.isPlainObject,_=y("./plot_schema"),t=y("../plots/plots"),e=y("../plots/attributes"),i=y("./plot_template"),r=y("./plot_config").dfltConfig;function o(v,f){v=d.extendDeep({},v);var l,x,m=Object.keys(v).sort();function w(A,I,D){if(g(I)&&g(A))o(A,I);else if(Array.isArray(I)&&Array.isArray(A)){var S=i.arrayTemplater({_template:v},D);for(x=0;x<I.length;x++){var C=I[x],R=S.newItem(C)._template;R&&o(R,C)}var F=S.defaultItems();for(x=0;x<F.length;x++)I.push(F[x]._template);for(x=0;x<I.length;x++)delete I[x].templateitemname}}for(l=0;l<m.length;l++){var b=m[l],k=v[b];if(b in f?w(k,f[b],b):f[b]=k,n(b)===b)for(var T in f){var L=n(T);T===L||L!==b||T in v||w(k,f[T],b)}}}function n(v){return v.replace(/[0-9]+$/,"")}function p(v,f,l,x,m){var w=m&&l(m);for(var b in v){var k=v[b],T=c(v,b,x),L=c(v,b,m),A=l(L);if(!A){var I=n(b);I!==b&&(A=l(L=c(v,I,m)))}if(!(w&&w===A||!A||A._noTemplating||"data_array"===A.valType||A.arrayOk&&Array.isArray(k)))if(!A.valType&&g(k))p(k,f,l,T,L);else if(A._isLinkedToArray&&Array.isArray(k))for(var D=!1,S=0,C={},R=0;R<k.length;R++){var F=k[R];if(g(F)){var H=F.name;if(H)C[H]||(p(F,f,l,c(k,S,T),c(k,S,L)),S++,C[H]=1);else if(!D){var U=c(v,i.arrayDefaultKey(b),x),X=c(k,S,T);p(F,f,l,X,c(k,S,L));var Z=d.nestedProperty(f,X);d.nestedProperty(f,U).set(Z.get()),Z.set(null),D=!0}}}else d.nestedProperty(f,T).set(k)}}function s(v,f){return _.getLayoutValObject(v,d.nestedProperty({},f).parts)}function a(v,f){return _.getTraceValObject(v,d.nestedProperty({},f).parts)}function c(v,f,l){return l?Array.isArray(v)?l+"["+f+"]":l+"."+f:f}function u(v){for(var f=0;f<v.length;f++)if(g(v[f]))return!0}function h(v){var f;switch(v.code){case"data":f="The template has no key data.";break;case"layout":f="The template has no key layout.";break;case"missing":f=v.path?"There are no templates for item "+v.path+" with name "+v.templateitemname:"There are no templates for trace "+v.index+", of type "+v.traceType+".";break;case"unused":f=v.path?"The template item at "+v.path+" was not used in constructing the plot.":v.dataCount?"Some of the templates of type "+v.traceType+" were not used. The template has "+v.templateCount+" traces, the data only has "+v.dataCount+" of this type.":"The template has "+v.templateCount+" traces of type "+v.traceType+" but there are none in the data.";break;case"reused":f="Some of the templates of type "+v.traceType+" were used more than once. The template has "+v.templateCount+" traces, the data has "+v.dataCount+" of this type."}return v.msg=f,v}ee.makeTemplate=function(v){v=d.isPlainObject(v)?v:d.getGraphDiv(v),v=d.extendDeep({_context:r},{data:v.data,layout:v.layout}),t.supplyDefaults(v);var f=v.data||[],l=v.layout||{};l._basePlotModules=v._fullLayout._basePlotModules,l._modules=v._fullLayout._modules;var x={data:{},layout:{}};f.forEach(function(S){var C={};p(S,C,a.bind(null,S));var R=d.coerce(S,{},e,"type"),F=x.data[R];F||(F=x.data[R]=[]),F.push(C)}),p(l,x.layout,s.bind(null,l)),delete x.layout.template;var m=l.template;if(g(m)){var w,b,k,T,L,A,I=m.layout;g(I)&&o(I,x.layout);var D=m.data;if(g(D)){for(b in x.data)if(k=D[b],Array.isArray(k)){for(A=(L=x.data[b]).length,T=k.length,w=0;w<A;w++)o(k[w%T],L[w]);for(w=A;w<T;w++)L.push(d.extendDeep({},k[w]))}for(b in D)b in x.data||(x.data[b]=d.extendDeep([],D[b]))}}return x},ee.validateTemplate=function(v,f){var l=d.extendDeep({},{_context:r,data:v.data,layout:v.layout}),x=l.layout||{};g(f)||(f=x.template||{});var m=f.layout,w=f.data,b=[];l.layout=x,l.layout.template=f,t.supplyDefaults(l);var k=l._fullLayout,T=l._fullData,L={};if(g(m)?(function F(H,U){for(var X in H)if("_"!==X.charAt(0)&&g(H[X])){var Z,Y=n(X),W=[];for(Z=0;Z<U.length;Z++)W.push(c(H,X,U[Z])),Y!==X&&W.push(c(H,Y,U[Z]));for(Z=0;Z<W.length;Z++)L[W[Z]]=1;F(H[X],W)}}(k,["layout"]),function F(H,U){for(var X in H)if(-1===X.indexOf("defaults")&&g(H[X])){var Z=c(H,X,U);L[Z]?F(H[X],Z):b.push({code:"unused",path:Z})}}(m,"layout")):b.push({code:"layout"}),g(w)){for(var A,I={},D=0;D<T.length;D++){var S=T[D];I[A=S.type]=(I[A]||0)+1,S._fullInput._template||b.push({code:"missing",index:S._fullInput.index,traceType:A})}for(A in w){var C=w[A].length,R=I[A]||0;C>R?b.push({code:"unused",traceType:A,templateCount:C,dataCount:R}):R>C&&b.push({code:"reused",traceType:A,templateCount:C,dataCount:R})}}else b.push({code:"data"});if(function F(H,U){for(var X in H)if("_"!==X.charAt(0)){var Z=H[X],Y=c(H,X,U);g(Z)?(Array.isArray(H)&&!1===Z._template&&Z.templateitemname&&b.push({code:"missing",path:Y,templateitemname:Z.templateitemname}),F(Z,Y)):Array.isArray(Z)&&u(Z)&&F(Z,Y)}}({data:T,layout:k},""),b.length)return b.map(h)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("./plot_api"),_=y("../plots/plots"),t=y("../lib"),e=y("../snapshot/helpers"),i=y("../snapshot/tosvg"),r=y("../snapshot/svgtoimg"),o=y("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};$.exports=function(p,s){var a,c,u,h;function v(R){return!(R in s)||t.validate(s[R],n[R])}if(s=s||{},t.isPlainObject(p)?(a=p.data||[],c=p.layout||{},u=p.config||{},h={}):(p=t.getGraphDiv(p),a=t.extendDeep([],p.data),c=t.extendDeep({},p.layout),u=p._context,h=p._fullLayout||{}),!v("width")&&null!==s.width||!v("height")&&null!==s.height)throw new Error("Height and width should be pixel values.");if(!v("format"))throw new Error("Export format is not "+t.join2(n.format.values,", "," or ")+".");var f={};function l(R,F){return t.coerce(s,f,n,R,F)}var x=l("format"),m=l("width"),w=l("height"),b=l("scale"),k=l("setBackground"),T=l("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var A=t.extendFlat({},c);m?A.width=m:null===s.width&&d(h.width)&&(A.width=h.width),w?A.height=w:null===s.height&&d(h.height)&&(A.height=h.height);var I=t.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),D=e.getRedrawFunc(L);function S(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function C(){return new Promise(function(R,F){var H=i(L,x,b),U=L._fullLayout.width,X=L._fullLayout.height;function Z(){g.purge(L),document.body.removeChild(L)}if("full-json"===x){var Y=_.graphJson(L,!1,"keepdata","object",!0,!0);return Y.version=o,Y=JSON.stringify(Y),Z(),R(T?Y:e.encodeJSON(Y))}if(Z(),"svg"===x)return R(T?H:e.encodeSVG(H));var W=document.createElement("canvas");W.id=t.randstr(),r({format:x,width:U,height:X,scale:b,canvas:W,svg:H,promise:!0}).then(R).catch(F)})}return new Promise(function(R,F){g.newPlot(L,a,A,I).then(D).then(S).then(C).then(function(H){var U;R((U=H,T?U.replace(e.IMAGE_URL_PREFIX,""):U))}).catch(function(H){F(H)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plots/plots"),_=y("./plot_schema"),t=y("./plot_config").dfltConfig,e=d.isPlainObject,i=Array.isArray,r=d.isArrayOrTypedArray;function o(f,l,x,m,w,b){b=b||[];for(var k=Object.keys(f),T=0;T<k.length;T++){var L=k[T];if("transforms"!==L){var A=b.slice();A.push(L);var I=f[L],D=l[L],S=u(x,L),C=(S||{}).valType,R="info_array"===C,F="colorscale"===C,H=(S||{}).items;if(c(x,L))if(e(I)&&e(D)&&"any"!==C)o(I,D,S,m,w,A);else if(R&&i(I)){I.length>D.length&&m.push(a("unused",w,A.concat(D.length)));var U,X,Y,W,te=D.length,z=Array.isArray(H);if(z&&(te=Math.min(te,H.length)),2===S.dimensions)for(X=0;X<te;X++)if(i(I[X])){I[X].length>D[X].length&&m.push(a("unused",w,A.concat(X,D[X].length)));var N=D[X].length;for(U=0;U<(z?Math.min(N,H[X].length):N);U++)W=D[X][U],d.validate(Y=I[X][U],z?H[X][U]:H)?W!==Y&&W!==+Y&&m.push(a("dynamic",w,A.concat(X,U),Y,W)):m.push(a("value",w,A.concat(X,U),Y))}else m.push(a("array",w,A.concat(X),I[X]));else for(X=0;X<te;X++)W=D[X],d.validate(Y=I[X],z?H[X]:H)?W!==Y&&W!==+Y&&m.push(a("dynamic",w,A.concat(X),Y,W)):m.push(a("value",w,A.concat(X),Y))}else if(S.items&&!R&&i(I)){var V,Q,j=H[Object.keys(H)[0]],J=[];for(V=0;V<D.length;V++){var K=D[V]._index||V;if((Q=A.slice()).push(K),e(I[K])&&e(D[V])){J.push(K);var re=I[K],ie=D[V];e(re)&&!1!==re.visible&&!1===ie.visible?m.push(a("invisible",w,Q)):o(re,ie,j,m,w,Q)}}for(V=0;V<I.length;V++)(Q=A.slice()).push(V),e(I[V])?-1===J.indexOf(V)&&m.push(a("unused",w,Q)):m.push(a("object",w,Q,I[V]))}else!e(I)&&e(D)?m.push(a("object",w,A,I)):r(I)||!r(D)||R||F?L in l?d.validate(I,S)?"enumerated"===S.valType&&(S.coerceNumber&&I!==+D||I!==D)&&m.push(a("dynamic",w,A,I,D)):m.push(a("value",w,A,I)):m.push(a("unused",w,A,I)):m.push(a("array",w,A,I));else m.push(a("schema",w,A))}}return m}function n(f,l){for(var x=f.layout.layoutAttributes,m=0;m<l.length;m++){var w=l[m],b=f.traces[w.type],k=b.layoutAttributes;k&&d.extendFlat(w.subplot?x[b.attributes.subplot.dflt]:x,k)}return x}$.exports=function(f,l){void 0===f&&(f=[]),void 0===l&&(l={});var x,m,w=_.get(),b=[],k={_context:d.extendFlat({},t)};i(f)?(k.data=d.extendDeep([],f),x=f):(k.data=[],x=[],b.push(a("array","data"))),e(l)?(k.layout=d.extendDeep({},l),m=l):(k.layout={},m={},arguments.length>1&&b.push(a("object","layout"))),g.supplyDefaults(k);for(var T=k._fullData,L=x.length,A=0;A<L;A++){var I=x[A],D=["data",A];if(e(I)){var S=T[A],C=S.type,R=w.traces[C].attributes;R.type={valType:"enumerated",values:[C]},!1===S.visible&&!1!==I.visible&&b.push(a("invisible",D)),o(I,S,R,b,D);var F=I.transforms,H=S.transforms;if(F){i(F)||b.push(a("array",D,["transforms"])),D.push("transforms");for(var U=0;U<F.length;U++){var X=["transforms",U],Z=F[U].type;if(e(F[U])){var Y=w.transforms[Z]?w.transforms[Z].attributes:{};Y.type={valType:"enumerated",values:Object.keys(w.transforms)},o(F[U],H[U],Y,b,D,X)}else b.push(a("object",D,X))}}}else b.push(a("object",D))}return o(m,k._fullLayout,n(w,T),b,"layout"),0===b.length?void 0:b};var p={object:function(f,l){return("layout"===f&&""===l?"The layout argument":"data"===f[0]&&""===l?"Trace "+f[1]+" in the data argument":s(f)+"key "+l)+" must be linked to an object container"},array:function(f,l){return("data"===f?"The data argument":s(f)+"key "+l)+" must be linked to an array container"},schema:function(f,l){return s(f)+"key "+l+" is not part of the schema"},unused:function(f,l,x){var m=e(x)?"container":"key";return s(f)+m+" "+l+" did not get coerced"},dynamic:function(f,l,x,m){return[s(f)+"key",l,"(set to '"+x+"')","got reset to","'"+m+"'","during defaults."].join(" ")},invisible:function(f,l){return(l?s(f)+"item "+l:"Trace "+f[1])+" got defaulted to be not visible"},value:function(f,l,x){return[s(f)+"key "+l,"is set to an invalid value ("+x+")"].join(" ")}};function s(f){return i(f)?"In data trace "+f[1]+", ":"In "+f+", "}function a(f,l,x,m,w){var b,k;x=x||"",i(l)?(b=l[0],k=l[1]):(b=l,k=null);var T=function(A){if(!i(A))return String(A);for(var I="",D=0;D<A.length;D++){var S=A[D];"number"==typeof S?I=I.substr(0,I.length-1)+"["+S+"]":I+=S,D<A.length-1&&(I+=".")}return I}(x),L=p[f](l,T,m,w);return d.log(L),{code:f,container:b,trace:k,path:x,astr:T,msg:L}}function c(f,l){var x=v(l),m=x.keyMinusId;return!!(m in f&&f[m]._isSubplotObj&&x.id)||l in f}function u(f,l){return l in f?f[l]:f[v(l).keyMinusId]}var h=d.counterRegex("([a-z]+)");function v(f){var l=f.match(h);return{keyMinusId:l&&l[1],id:l&&l[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(y,$,ee){"use strict";$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plot_api/plot_template");$.exports=function(_,t,e){var i,r,o=e.name,n=e.inclusionAttr||"visible",p=t[o],s=d.isArrayOrTypedArray(_[o])?_[o]:[],a=t[o]=[],c=g.arrayTemplater(t,o,n);for(i=0;i<s.length;i++){var u=s[i];d.isPlainObject(u)?r=c.newItem(u):(r=c.newItem({}))[n]=!1,r._index=i,!1!==r[n]&&e.handleItemDefaults(u,r,t,e),a.push(r)}var h=c.defaultItems();for(i=0;i<h.length;i++)(r=h[i])._index=a.length,e.handleItemDefaults({},r,t,e,{}),a.push(r);if(d.isArrayOrTypedArray(p)){var v=Math.min(p.length,a.length);for(i=0;i<v;i++)d.relinkPrivateKeys(a[i],p[i])}return a}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(y,$,ee){"use strict";var d=y("./font_attributes"),g=y("../components/fx/attributes");$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:d({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:g.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=g.dateTime2ms,t=g.incrementMonth,e=y("../../constants/numerical").ONEAVGMONTH;$.exports=function(i,r,o,n){if("date"!==r.type)return{vals:n};var p=i[o+"periodalignment"];if(!p)return{vals:n};var s,a=i[o+"period"];if(d(a)){if((a=+a)<=0)return{vals:n}}else if("string"==typeof a&&"M"===a.charAt(0)){var c=+a.substring(1);if(!(c>0&&Math.round(c)===c))return{vals:n};s=c}for(var u=r.calendar,h="start"===p,v="end"===p,l=_(i[o+"period0"],u)||0,x=[],m=[],w=[],b=n.length,k=0;k<b;k++){var T,L,A,I=n[k];if(s){for(T=Math.round((I-l)/(s*e)),A=t(l,s*T,u);A>I;)A=t(A,-s,u);for(;A<=I;)A=t(A,s,u);L=t(A,-s,u)}else{for(A=l+(T=Math.round((I-l)/a))*a;A>I;)A-=a;for(;A<=I;)A+=a;L=A-a}x[k]=h?L:v?A:(L+A)/2,m[k]=L,w[k]=A}return{vals:x,starts:m,ends:w}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(y,$,ee){"use strict";$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("../../lib"),t=y("../../constants/numerical").FP_SAFE,e=y("../../registry"),i=y("../../components/drawing"),r=y("./axis_ids"),o=r.getFromId,n=r.isLinked;function p(m,w){var b,k,T=[],L=m._fullLayout,A=a(L,w,0),I=a(L,w,1),D=c(m,w),S=D.min,C=D.max;if(0===S.length||0===C.length)return _.simpleMap(w.range,w.r2l);var R=S[0].val,F=C[0].val;for(b=1;b<S.length&&R===F;b++)R=Math.min(R,S[b].val);for(b=1;b<C.length&&R===F;b++)F=Math.max(F,C[b].val);var H=!1;if(w.range){var U=_.simpleMap(w.range,w.r2l);H=U[1]<U[0]}"reversed"===w.autorange&&(H=!0,w.autorange=!0);var X,Z,Y,W,te,z,N=w.rangemode,V="tozero"===N,Q="nonnegative"===N,j=w._length,J=j/10,K=0;for(b=0;b<S.length;b++)for(X=S[b],k=0;k<C.length;k++)(z=(Z=C[k]).val-X.val-s(w,X.val,Z.val))>0&&((te=j-A(X)-I(Z))>J?z/te>K&&(Y=X,W=Z,K=z/te):z/j>K&&(Y={val:X.val,nopad:1},W={val:Z.val,nopad:1},K=z/j));if(R===F){var re=R-1,ie=R+1;if(V)if(0===R)T=[0,1];else{var ce=(R>0?C:S).reduce(function(de,ue){return Math.max(de,I(ue))},0),se=R/(1-Math.min(.5,ce/j));T=R>0?[0,se]:[se,0]}else T=Q?[Math.max(0,re),Math.max(1,ie)]:[re,ie]}else V?(Y.val>=0&&(Y={val:0,nopad:1}),W.val<=0&&(W={val:0,nopad:1})):Q&&(Y.val-K*A(Y)<0&&(Y={val:0,nopad:1}),W.val<=0&&(W={val:1,nopad:1})),K=(W.val-Y.val-s(w,X.val,Z.val))/(j-A(Y)-I(W)),T=[Y.val-K*A(Y),W.val+K*I(W)];return H&&T.reverse(),_.simpleMap(T,w.l2r||Number)}function s(m,w,b){var k=0;if(m.rangebreaks)for(var T=m.locateBreaks(w,b),L=0;L<T.length;L++){var A=T[L];k+=A.max-A.min}return k}function a(m,w,b){var k=.05*w._length,T=w._anchorAxis||{};if(-1!==(w.ticklabelposition||"").indexOf("inside")||-1!==(T.ticklabelposition||"").indexOf("inside")){var L="reversed"===w.autorange;if(!L){var A=_.simpleMap(w.range,w.r2l);L=A[1]<A[0]}L&&(b=!b)}var I=0;return n(m,w._id)||(I=function(D,S,C){var R=0,F="x"===S._id.charAt(0);for(var H in D._plots){var U=D._plots[H];if(S._id===U.xaxis._id||S._id===U.yaxis._id){var X=(F?U.yaxis:U.xaxis)||{};if(-1!==(X.ticklabelposition||"").indexOf("inside")&&(!C&&("left"===X.side||"bottom"===X.side)||C&&("top"===X.side||"right"===X.side))){if(X._vals){var Z=_.deg2rad(X._tickAngles[X._id+"tick"]||0),Y=Math.abs(Math.cos(Z)),W=Math.abs(Math.sin(Z));X._vals[0].bb||X._selections[X._id+"tick"].each(function(j){var J=d.select(this);J.select(".text-math-group").empty()&&(j.bb=i.bBox(J.node()))});for(var z=0;z<X._vals.length;z++){var N=X._vals[z].bb;if(N){var V=6+N.width,Q=6+N.height;R=Math.max(R,F?Math.max(V*Y,Q*W):Math.max(Q*Y,V*W))}}}"inside"===X.ticks&&"inside"===X.ticklabelposition&&(R+=X.ticklen||0)}}}return R}(m,w,b)),k=Math.max(I,k),"domain"===w.constrain&&w._inputDomain&&(k*=(w._inputDomain[1]-w._inputDomain[0])/(w.domain[1]-w.domain[0])),function(D){return D.nopad?0:D.pad+(D.extrapad?k:I)}}function c(m,w,b){var k,T,L,A=w._id,D=m._fullLayout,S=[],C=[];function R(Z,Y){for(k=0;k<Y.length;k++){var W=Z[Y[k]],te=(W._extremes||{})[A];if(!0===W.visible&&te){for(T=0;T<te.min.length;T++)u(S,(L=te.min[T]).val,L.pad,{extrapad:L.extrapad});for(T=0;T<te.max.length;T++)h(C,(L=te.max[T]).val,L.pad,{extrapad:L.extrapad})}}}if(R(m._fullData,w._traceIndices),R(D.annotations||[],w._annIndices||[]),R(D.shapes||[],w._shapeIndices||[]),w._matchGroup&&!b)for(var F in w._matchGroup)if(F!==w._id){var H=o(m,F),U=c(m,H,!0),X=w._length/H._length;for(T=0;T<U.min.length;T++)u(S,(L=U.min[T]).val,L.pad*X,{extrapad:L.extrapad});for(T=0;T<U.max.length;T++)h(C,(L=U.max[T]).val,L.pad*X,{extrapad:L.extrapad})}return{min:S,max:C}}function u(m,w,b,k){v(m,w,b,k,l)}function h(m,w,b,k){v(m,w,b,k,x)}function v(m,w,b,k,T){for(var L=k.tozero,A=k.extrapad,I=!0,D=0;D<m.length&&I;D++){var S=m[D];if(T(S.val,w)&&S.pad>=b&&(S.extrapad||!A)){I=!1;break}T(w,S.val)&&S.pad<=b&&(A||!S.extrapad)&&(m.splice(D,1),D--)}if(I){var C=L&&0===w;m.push({val:w,pad:C?0:b,extrapad:!C&&A})}}function f(m){return g(m)&&Math.abs(m)<t}function l(m,w){return m<=w}function x(m,w){return m>=w}$.exports={getAutoRange:p,makePadFn:a,doAutoRange:function(m,w,b){if(w.setScale(),w.autorange){w.range=b?b.slice():p(m,w),w._r=w.range.slice(),w._rl=_.simpleMap(w._r,w.r2l);var k=w._input,T={};T[w._attr+".range"]=w.range,T[w._attr+".autorange"]=w.autorange,e.call("_storeDirectGUIEdit",m.layout,m._fullLayout._preGUI,T),k.range=w.range.slice(),k.autorange=w.autorange}var L=w._anchorAxis;if(L&&L.rangeslider){var A=L.rangeslider[w._name];A&&"auto"===A.rangemode&&(A.range=p(m,w)),L._input.rangeslider[w._name]=_.extendFlat({},A)}},findExtremes:function(m,w,b){b||(b={}),m._m||m.setScale();var k,T,L,A,I,D,S,C,R,F=[],H=[],U=w.length,X=b.padded||!1,Z=b.tozero&&("linear"===m.type||"-"===m.type),Y="log"===m.type,W=!1,te=b.vpadLinearized||!1;function z(ie){if(Array.isArray(ie))return W=!0,function(se){return Math.max(Number(ie[se]||0),0)};var ce=Math.max(Number(ie||0),0);return function(){return ce}}var N=z((m._m>0?b.ppadplus:b.ppadminus)||b.ppad||0),V=z((m._m>0?b.ppadminus:b.ppadplus)||b.ppad||0),Q=z(b.vpadplus||b.vpad),j=z(b.vpadminus||b.vpad);if(!W){if(C=1/0,R=-1/0,Y)for(k=0;k<U;k++)(T=w[k])<C&&T>0&&(C=T),T>R&&T<t&&(R=T);else for(k=0;k<U;k++)(T=w[k])<C&&T>-t&&(C=T),T>R&&T<t&&(R=T);w=[C,R],U=2}var J={tozero:Z,extrapad:X};function K(ie){g(L=w[ie])&&(D=N(ie),S=V(ie),te?(A=m.c2l(L)-j(ie),I=m.c2l(L)+Q(ie)):(C=L-j(ie),R=L+Q(ie),Y&&C<R/10&&(C=R/10),A=m.c2l(C),I=m.c2l(R)),Z&&(A=Math.min(0,A),I=Math.max(0,I)),f(A)&&u(F,A,S,J),f(I)&&h(H,I,D,J))}var re=Math.min(6,U);for(k=0;k<re;k++)K(k);for(k=U-1;k>=re;k--)K(k);return{min:F,max:H,opts:b}},concatExtremes:c}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("../../plots/plots"),t=y("../../registry"),e=y("../../lib"),i=e.strTranslate,r=y("../../lib/svg_text_utils"),o=y("../../components/titles"),n=y("../../components/color"),p=y("../../components/drawing"),s=y("./layout_attributes"),a=y("./clean_ticks"),c=y("../../constants/numerical"),u=c.ONEMAXYEAR,h=c.ONEAVGYEAR,v=c.ONEMINYEAR,f=c.ONEMAXQUARTER,l=c.ONEAVGQUARTER,x=c.ONEMINQUARTER,m=c.ONEMAXMONTH,w=c.ONEAVGMONTH,b=c.ONEMINMONTH,k=c.ONEWEEK,T=c.ONEDAY,L=T/2,A=c.ONEHOUR,I=c.ONEMIN,D=c.ONESEC,S=c.MINUS_SIGN,C=c.BADNUM,R={K:"zeroline"},F={K:"gridline",L:"path"},H={K:"tick",L:"path"},U={K:"tick",L:"text"},X=y("../../constants/alignment"),Z=X.MID_SHIFT,Y=X.CAP_SHIFT,W=X.LINE_SPACING,te=X.OPPOSITE_SIDE,z=$.exports={};z.setConvert=y("./set_convert");var N=y("./axis_autotype"),V=y("./axis_ids"),Q=V.idSort,j=V.isLinked;z.id2name=V.id2name,z.name2id=V.name2id,z.cleanId=V.cleanId,z.list=V.list,z.listIds=V.listIds,z.getFromId=V.getFromId,z.getFromTrace=V.getFromTrace;var J=y("./autorange");function K(Ue){var We=1e-4*(Ue[1]-Ue[0]);return[Ue[0]-We,Ue[1]+We]}z.getAutoRange=J.getAutoRange,z.findExtremes=J.findExtremes,z.coerceRef=function(Ue,We,Be,Qe,Ae,De){var Oe=Qe.charAt(Qe.length-1),Ie=Be._fullLayout._subplots[Oe+"axis"],et=Qe+"ref",ct={};return Ae||(Ae=Ie[0]||("string"==typeof De?De:De[0])),De||(De=Ae),Ie=Ie.concat(Ie.map(function(vt){return vt+" domain"})),ct[et]={valType:"enumerated",values:Ie.concat(De?"string"==typeof De?[De]:De:[]),dflt:Ae},e.coerce(Ue,We,ct,et)},z.getRefType=function(Ue){return void 0===Ue?Ue:"paper"===Ue?"paper":"pixel"===Ue?"pixel":/( domain)$/.test(Ue)?"domain":"range"},z.coercePosition=function(Ue,We,Be,Qe,Ae,De){var Oe,Ie;if("range"!==z.getRefType(Qe))Oe=e.ensureNumber,Ie=Be(Ae,De);else{var et=z.getFromId(We,Qe);Ie=Be(Ae,De=et.fraction2r(De)),Oe=et.cleanPos}Ue[Ae]=Oe(Ie)},z.cleanPosition=function(Ue,We,Be){return("paper"===Be||"pixel"===Be?e.ensureNumber:z.getFromId(We,Be).cleanPos)(Ue)},z.redrawComponents=function(Ue,We){We=We||z.listIds(Ue);var Be=Ue._fullLayout;function Qe(Ae,De,Oe,Ie){for(var et=t.getComponentMethod(Ae,De),ct={},vt=0;vt<We.length;vt++)for(var ft=Be[z.id2name(We[vt])][Oe],It=0;It<ft.length;It++){var ut=ft[It];if(!ct[ut]&&(et(Ue,ut),ct[ut]=1,Ie))return}}Qe("annotations","drawOne","_annIndices"),Qe("shapes","drawOne","_shapeIndices"),Qe("images","draw","_imgIndices",!0)};var re=z.getDataConversions=function(Ue,We,Be,Qe){var Ae,De="x"===Be||"y"===Be||"z"===Be?Be:Qe;if(Array.isArray(De)){if(Ae={type:N(Qe,void 0,{autotypenumbers:Ue._fullLayout.autotypenumbers}),_categories:[]},z.setConvert(Ae),"category"===Ae.type)for(var Oe=0;Oe<Qe.length;Oe++)Ae.d2c(Qe[Oe])}else Ae=z.getFromTrace(Ue,We,De);return Ae?{d2c:Ae.d2c,c2d:Ae.c2d}:"ids"===De?{d2c:ce,c2d:ce}:{d2c:ie,c2d:ie}};function ie(Ue){return+Ue}function ce(Ue){return String(Ue)}function se(Ue){return+Ue.substring(1)}z.getDataToCoordFunc=function(Ue,We,Be,Qe){return re(Ue,We,Be,Qe).d2c},z.counterLetter=function(Ue){var We=Ue.charAt(0);return"x"===We?"y":"y"===We?"x":void 0},z.minDtick=function(Ue,We,Be,Qe){-1===["log","category","multicategory"].indexOf(Ue.type)&&Qe?void 0===Ue._minDtick?(Ue._minDtick=We,Ue._forceTick0=Be):Ue._minDtick&&((Ue._minDtick/We+1e-6)%1<2e-6&&((Be-Ue._forceTick0)/We%1+1.000001)%1<2e-6?(Ue._minDtick=We,Ue._forceTick0=Be):((We/Ue._minDtick+1e-6)%1>2e-6||((Be-Ue._forceTick0)/Ue._minDtick%1+1.000001)%1>2e-6)&&(Ue._minDtick=0)):Ue._minDtick=0},z.saveRangeInitial=function(Ue,We){for(var Be=z.list(Ue,"",!0),Qe=!1,Ae=0;Ae<Be.length;Ae++){var De=Be[Ae],Oe=void 0===De._rangeInitial;(Oe&&!1===De.autorange||We&&(Oe||De.range[0]!==De._rangeInitial[0]||De.range[1]!==De._rangeInitial[1]))&&(De._rangeInitial=De.range.slice(),Qe=!0)}return Qe},z.saveShowSpikeInitial=function(Ue,We){for(var Be=z.list(Ue,"",!0),Qe=!1,Ae="on",De=0;De<Be.length;De++){var Oe=Be[De],Ie=void 0===Oe._showSpikeInitial;(Ie||We&&(Ie||Oe.showspikes!==Oe._showspikes))&&(Oe._showSpikeInitial=Oe.showspikes,Qe=!0),"on"!==Ae||Oe.showspikes||(Ae="off")}return Ue._fullLayout._cartesianSpikesEnabled=Ae,Qe},z.autoBin=function(Ue,We,Be,Qe,Ae,De){var Oe,Ie=e.aggNums(Math.min,null,Ue),et=e.aggNums(Math.max,null,Ue);if("category"===We.type||"multicategory"===We.type)return{start:Ie-.5,end:et+.5,size:Math.max(1,Math.round(De)||1),_dataSpan:et-Ie};if(Ae||(Ae=We.calendar),Oe="log"===We.type?{type:"linear",range:[Ie,et]}:{type:We.type,range:e.simpleMap([Ie,et],We.c2r,0,Ae),calendar:Ae},z.setConvert(Oe),De=De&&a.dtick(De,Oe.type))Oe.dtick=De,Oe.tick0=a.tick0(void 0,Oe.type,Ae);else{var ct;if(Be)ct=(et-Ie)/Be;else{var vt=e.distinctVals(Ue),ft=Math.pow(10,Math.floor(Math.log(vt.minDiff)/Math.LN10)),It=ft*e.roundUp(vt.minDiff/ft,[.9,1.9,4.9,9.9],!0);ct=Math.max(It,2*e.stdev(Ue)/Math.pow(Ue.length,Qe?.25:.4)),g(ct)||(ct=1)}z.autoTicks(Oe,ct)}var ut,Ot=Oe.dtick,Rt=z.tickIncrement(z.tickFirst(Oe),Ot,"reverse",Ae);if("number"==typeof Ot)ut=(Rt=function($e,yt,Bt,Ut,Qt){var Re=0,ht=0,Mt=0,Nt=0;function Zt(cr){return(1+100*(cr-$e)/Bt.dtick)%100<2}for(var or=0;or<yt.length;or++)yt[or]%1==0?Mt++:g(yt[or])||Nt++,Zt(yt[or])&&Re++,Zt(yt[or]+Bt.dtick/2)&&ht++;var Wt=yt.length-Nt;if(Mt===Wt&&"date"!==Bt.type)Bt.dtick<1?$e=Ut-.5*Bt.dtick:($e-=.5)+Bt.dtick<Ut&&($e+=Bt.dtick);else if(ht<.1*Wt&&(Re>.3*Wt||Zt(Ut)||Zt(Qt))){var er=Bt.dtick/2;$e+=$e+er<Ut?er:-er}return $e}(Rt,Ue,Oe,Ie,et))+(1+Math.floor((et-Rt)/Ot))*Ot;else for("M"===Oe.dtick.charAt(0)&&(Rt=function($e,yt,Bt,Ut,Qt){var Re=e.findExactDates(yt,Qt);if(Re.exactDays>.8){var ht=Number(Bt.substr(1));Re.exactYears>.8&&ht%12==0?$e=z.tickIncrement($e,"M6","reverse")+1.5*T:Re.exactMonths>.8?$e=z.tickIncrement($e,"M1","reverse")+15.5*T:$e-=L;var Mt=z.tickIncrement($e,Bt);if(Mt<=Ut)return Mt}return $e}(Rt,Ue,Ot,Ie,Ae)),ut=Rt;ut<=et;)ut=z.tickIncrement(ut,Ot,!1,Ae);return{start:We.c2r(Rt,0,Ae),end:We.c2r(ut,0,Ae),size:Ot,_dataSpan:et-Ie}},z.prepTicks=function(Ue,We){var Be=e.simpleMap(Ue.range,Ue.r2l,void 0,void 0,We);if(Ue._dtickInit=Ue.dtick,Ue._tick0Init=Ue.tick0,"auto"===Ue.tickmode||!Ue.dtick){var Qe,Ae=Ue.nticks;Ae||("category"===Ue.type||"multicategory"===Ue.type?(Qe=Ue.tickfont?e.bigFont(Ue.tickfont.size||12):15,Ae=Ue._length/Qe):(Qe="y"===Ue._id.charAt(0)?40:80,Ae=e.constrain(Ue._length/Qe,4,9)+1),"radialaxis"===Ue._name&&(Ae*=2)),"array"===Ue.tickmode&&(Ae*=100),Ue._roughDTick=Math.abs(Be[1]-Be[0])/Ae,z.autoTicks(Ue,Ue._roughDTick),Ue._minDtick>0&&Ue.dtick<2*Ue._minDtick&&(Ue.dtick=Ue._minDtick,Ue.tick0=Ue.l2r(Ue._forceTick0))}"period"===Ue.ticklabelmode&&function(De){var Oe;function Ie(){return!(g(De.dtick)||"M"!==De.dtick.charAt(0))}var et=Ie(),ct=z.getTickFormat(De);if(ct){var vt=De._dtickInit!==De.dtick;/%[fLQsSMX]/.test(ct)||(/%[HI]/.test(ct)?(Oe=A,vt&&!et&&De.dtick<A&&(De.dtick=A)):/%p/.test(ct)?(Oe=L,vt&&!et&&De.dtick<L&&(De.dtick=L)):/%[Aadejuwx]/.test(ct)?(Oe=T,vt&&!et&&De.dtick<T&&(De.dtick=T)):/%[UVW]/.test(ct)?(Oe=k,vt&&!et&&De.dtick<k&&(De.dtick=k)):/%[Bbm]/.test(ct)?(Oe=w,vt&&(et?se(De.dtick)<1:De.dtick<b)&&(De.dtick="M1")):/%[q]/.test(ct)?(Oe=l,vt&&(et?se(De.dtick)<3:De.dtick<x)&&(De.dtick="M3")):/%[Yy]/.test(ct)&&(Oe=h,vt&&(et?se(De.dtick)<12:De.dtick<v)&&(De.dtick="M12")))}(et=Ie())&&De.tick0===De._dowTick0&&(De.tick0=De._rawTick0),De._definedDelta=Oe}(Ue),Ue.tick0||(Ue.tick0="date"===Ue.type?"2000-01-01":0),"date"===Ue.type&&Ue.dtick<.1&&(Ue.dtick=.1),ve(Ue)},z.calcTicks=function(Ue,We){z.prepTicks(Ue,We);var Be=e.simpleMap(Ue.range,Ue.r2l,void 0,void 0,We);if("array"===Ue.tickmode)return function(or){var Wt=or.tickvals,er=or.ticktext,cr=new Array(Wt.length),_r=K(e.simpleMap(or.range,or.r2l)),xr=Math.min(_r[0],_r[1]),dr=Math.max(_r[0],_r[1]),pr=0;Array.isArray(er)||(er=[]);var br="category"===or.type?or.d2l_noadd:or.d2l;"log"===or.type&&"L"!==String(or.dtick).charAt(0)&&(or.dtick="L"+Math.pow(10,Math.floor(Math.min(or.range[0],or.range[1]))-1));for(var Nr=0;Nr<Wt.length;Nr++){var kr=br(Wt[Nr]);kr>xr&&kr<dr&&(cr[pr]=void 0===er[Nr]?z.tickText(or,kr):Me(or,kr,String(er[Nr])),pr++)}return pr<Wt.length&&cr.splice(pr,Wt.length-pr),or.rangebreaks&&(cr=cr.filter(function(Hr){return or.maskBreaks(Hr.x)!==C})),cr}(Ue);var Qe=K(Be),Ae=Qe[0],De=Qe[1],Oe=Be[1]<Be[0],Ie=Math.min(Be[0],Be[1]),et=Math.max(Be[0],Be[1]),ct="log"===Ue.type&&!(g(Ue.dtick)||"L"===Ue.dtick.charAt(0)),vt="period"===Ue.ticklabelmode;if(Ue._tmin=z.tickFirst(Ue,We),Ue._tmin<Ae!==Oe)return[];"category"!==Ue.type&&"multicategory"!==Ue.type||(De=Oe?Math.max(-.5,De):Math.min(Ue._categories.length-.5,De));var ft=Ue._tmin;Ue.rangebreaks&&Ue._tick0Init!==Ue.tick0&&(ft=Et(ft,Ue),Oe||(ft=z.tickIncrement(ft,Ue.dtick,!Oe,Ue.calendar))),vt&&(ft=z.tickIncrement(ft,Ue.dtick,!Oe,Ue.calendar));for(var It,ut=Math.max(1e3,Ue._length||0),Ot=[],Rt=null;Oe?ft>=De:ft<=De;ft=z.tickIncrement(ft,Ue.dtick,Oe,Ue.calendar)){if(Ue.rangebreaks&&!Oe){if(ft<Ae)continue;if(Ue.maskBreaks(ft)===C&&Et(ft,Ue)>=et)break}if(Ot.length>ut||ft===Rt)break;Rt=ft;var $e=!1;ct&&ft!==(0|ft)&&($e=!0),Ot.push({minor:$e,value:ft})}if(vt&&function(or,Wt,er){for(var cr=0;cr<or.length;cr++){var _r=or[cr].value,xr=cr,dr=cr+1;cr<or.length-1?(xr=cr,dr=cr+1):cr>0?(xr=cr-1,dr=cr):(xr=cr,dr=cr);var pr,kr=Math.abs(or[dr].value-or[xr].value),Hr=er||kr,an=0;Hr>=v?an=kr>=v&&kr<=u?kr:h:er===l&&Hr>=x?an=kr>=x&&kr<=f?kr:l:Hr>=b?an=kr>=b&&kr<=m?kr:w:er===k&&Hr>=k?an=k:Hr>=T?an=T:er===L&&Hr>=L?an=L:er===A&&Hr>=A&&(an=A),an>=kr&&(an=kr,pr=!0);var fn=_r+an;if(Wt.rangebreaks&&an>0){for(var zn=0,Nn=0;Nn<84;Nn++){var In=(Nn+.5)/84;Wt.maskBreaks(_r*(1-In)+In*fn)!==C&&zn++}(an*=zn/84)||(or[cr].drop=!0),pr&&kr>k&&(an=kr)}(an>0||0===cr)&&(or[cr].periodX=_r+an/2)}}(Ot,Ue,Ue._definedDelta),Ue.rangebreaks){var yt="y"===Ue._id.charAt(0),Bt=1;"auto"===Ue.tickmode&&(Bt=Ue.tickfont?Ue.tickfont.size:12);var Ut=NaN;for(It=Ot.length-1;It>-1;It--)if(Ot[It].drop)Ot.splice(It,1);else{Ot[It].value=Et(Ot[It].value,Ue);var Qt=Ue.c2p(Ot[It].value);(yt?Ut>Qt-Bt:Ut<Qt+Bt)?Ot.splice(Oe?It+1:It,1):Ut=Qt}}it(Ue)&&360===Math.abs(Be[1]-Be[0])&&Ot.pop(),Ue._tmax=(Ot[Ot.length-1]||{}).value,Ue._prevDateHead="",Ue._inCalcTicks=!0;var Re,ht,Mt=[];for(It=0;It<Ot.length;It++)Re=z.tickText(Ue,Ot[It].value,!1,Ot[It].minor),void 0!==(ht=Ot[It].periodX)&&(Re.periodX=ht,(ht>et||ht<Ie)&&(ht>et&&(Re.periodX=et),ht<Ie&&(Re.periodX=Ie),Re.text=" ",Ue._prevDateHead="")),Mt.push(Re);return Ue._inCalcTicks=!1,Mt};var de=[2,5,10],ue=[1,2,3,6,12],ge=[1,2,5,10,15,30],be=[1,2,3,7,14],Te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],we=[-.301,0,.301,.699,1],Le=[15,30,45,90,180];function fe(Ue,We,Be){return We*e.roundUp(Ue/We,Be)}function ve(Ue){var We=Ue.dtick;if(Ue._tickexponent=0,g(We)||"string"==typeof We||(We=1),"category"!==Ue.type&&"multicategory"!==Ue.type||(Ue._tickround=null),"date"===Ue.type){var Be=Ue.r2l(Ue.tick0),Qe=Ue.l2r(Be).replace(/(^-|i)/g,""),Ae=Qe.length;if("M"===String(We).charAt(0))Ue._tickround=Ae>10||"01-01"!==Qe.substr(5)?"d":+We.substr(1)%12==0?"y":"m";else if(We>=T&&Ae<=10||We>=15*T)Ue._tickround="d";else if(We>=I&&Ae<=16||We>=A)Ue._tickround="M";else if(We>=D&&Ae<=19||We>=I)Ue._tickround="S";else{var De=Ue.l2r(Be+We).replace(/^-/,"").length;Ue._tickround=Math.max(Ae,De)-20,Ue._tickround<0&&(Ue._tickround=4)}}else if(g(We)||"L"===We.charAt(0)){var Oe=Ue.range.map(Ue.r2d||Number);g(We)||(We=Number(We.substr(1))),Ue._tickround=2-Math.floor(Math.log(We)/Math.LN10+.01);var Ie=Math.max(Math.abs(Oe[0]),Math.abs(Oe[1])),et=Math.floor(Math.log(Ie)/Math.LN10+.01),ct=void 0===Ue.minexponent?3:Ue.minexponent;Math.abs(et)>ct&&(Ue._tickexponent=Ce(Ue.exponentformat)&&!Pe(et)?3*Math.round((et-1)/3):et)}else Ue._tickround=null}function Me(Ue,We,Be){var Qe=Ue.tickfont||{};return{x:We,dx:0,dy:0,text:Be||"",fontSize:Qe.size,font:Qe.family,fontColor:Qe.color}}z.autoTicks=function(Ue,We){var Be;function Qe(vt){return Math.pow(vt,Math.floor(Math.log(We)/Math.LN10))}if("date"===Ue.type){Ue.tick0=e.dateTick0(Ue.calendar,0);var Ae=2*We;if(Ae>h)We/=h,Be=Qe(10),Ue.dtick="M"+12*fe(We,Be,de);else if(Ae>w)Ue.dtick="M"+fe(We/=w,1,ue);else if(Ae>T){Ue.dtick=fe(We,T,Ue._hasDayOfWeekBreaks?[1,2,7,14]:be);var De=z.getTickFormat(Ue),Oe="period"===Ue.ticklabelmode;Oe&&(Ue._rawTick0=Ue.tick0),Ue.tick0=/%[uVW]/.test(De)?e.dateTick0(Ue.calendar,2):e.dateTick0(Ue.calendar,1),Oe&&(Ue._dowTick0=Ue.tick0)}else Ae>A?Ue.dtick=fe(We,A,ue):Ae>I?Ue.dtick=fe(We,I,ge):Ae>D?Ue.dtick=fe(We,D,ge):(Be=Qe(10),Ue.dtick=fe(We,Be,de))}else if("log"===Ue.type){Ue.tick0=0;var Ie=e.simpleMap(Ue.range,Ue.r2l);if(We>.7)Ue.dtick=Math.ceil(We);else if(Math.abs(Ie[1]-Ie[0])<1){var et=1.5*Math.abs((Ie[1]-Ie[0])/We);We=Math.abs(Math.pow(10,Ie[1])-Math.pow(10,Ie[0]))/et,Be=Qe(10),Ue.dtick="L"+fe(We,Be,de)}else Ue.dtick=We>.3?"D2":"D1"}else"category"===Ue.type||"multicategory"===Ue.type?(Ue.tick0=0,Ue.dtick=Math.ceil(Math.max(We,1))):it(Ue)?(Ue.tick0=0,Ue.dtick=fe(We,Be=1,Le)):(Ue.tick0=0,Be=Qe(10),Ue.dtick=fe(We,Be,de));if(0===Ue.dtick&&(Ue.dtick=1),!g(Ue.dtick)&&"string"!=typeof Ue.dtick){var ct=Ue.dtick;throw Ue.dtick=1,"ax.dtick error: "+String(ct)}},z.tickIncrement=function(Ue,We,Be,Qe){var Ae=Be?-1:1;if(g(We))return e.increment(Ue,Ae*We);var De=We.charAt(0),Oe=Ae*Number(We.substr(1));if("M"===De)return e.incrementMonth(Ue,Oe,Qe);if("L"===De)return Math.log(Math.pow(10,Ue)+Oe)/Math.LN10;if("D"===De){var Ie="D2"===We?we:Te,et=Ue+.01*Ae,ct=e.roundUp(e.mod(et,1),Ie,Be);return Math.floor(et)+Math.log(d.round(Math.pow(10,ct),1))/Math.LN10}throw"unrecognized dtick "+String(We)},z.tickFirst=function(Ue,We){var Be=Ue.r2l||Number,Qe=e.simpleMap(Ue.range,Be,void 0,void 0,We),Ae=Qe[1]<Qe[0],De=Ae?Math.floor:Math.ceil,Oe=K(Qe)[0],Ie=Ue.dtick,et=Be(Ue.tick0);if(g(Ie)){var ct=De((Oe-et)/Ie)*Ie+et;return"category"!==Ue.type&&"multicategory"!==Ue.type||(ct=e.constrain(ct,0,Ue._categories.length-1)),ct}var vt=Ie.charAt(0),ft=Number(Ie.substr(1));if("M"===vt){for(var It,ut,Ot,Rt=0,$e=et;Rt<10;){if(((It=z.tickIncrement($e,Ie,Ae,Ue.calendar))-Oe)*($e-Oe)<=0)return Ae?Math.min($e,It):Math.max($e,It);ut=(Oe-($e+It)/2)/(It-$e),Ot=vt+(Math.abs(Math.round(ut))||1)*ft,$e=z.tickIncrement($e,Ot,ut<0?!Ae:Ae,Ue.calendar),Rt++}return e.error("tickFirst did not converge",Ue),$e}if("L"===vt)return Math.log(De((Math.pow(10,Oe)-et)/ft)*ft+et)/Math.LN10;if("D"===vt){var yt="D2"===Ie?we:Te,Bt=e.roundUp(e.mod(Oe,1),yt,Ae);return Math.floor(Oe)+Math.log(d.round(Math.pow(10,Bt),1))/Math.LN10}throw"unrecognized dtick "+String(Ie)},z.tickText=function(Ue,We,Be,Qe){var Ae,De=Me(Ue,We),Oe="array"===Ue.tickmode,Ie=Be||Oe,et=Ue.type,ct="category"===et?Ue.d2l_noadd:Ue.d2l;if(Oe&&Array.isArray(Ue.ticktext)){var vt=e.simpleMap(Ue.range,Ue.r2l),ft=(Math.abs(vt[1]-vt[0])-(Ue._lBreaks||0))/1e4;for(Ae=0;Ae<Ue.ticktext.length&&!(Math.abs(We-ct(Ue.tickvals[Ae]))<ft);Ae++);if(Ae<Ue.ticktext.length)return De.text=String(Ue.ticktext[Ae]),De}function It(Rt){return void 0===Rt||(Be?"none"===Rt:"all"!==Rt&&We!=={first:Ue._tmin,last:Ue._tmax}[Rt])}var $e,yt,ut=Be?"never":"none"!==Ue.exponentformat&&It(Ue.showexponent)?"hide":"";if("date"===et?function(Rt,$e,yt,Bt){var Ut=Rt._tickround,Qt=yt&&Rt.hoverformat||z.getTickFormat(Rt);Bt&&(Ut=g(Ut)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Ut]);var Re,ht=e.formatDate($e.x,Qt,Ut,Rt._dateFormat,Rt.calendar,Rt._extraFormat),Mt=ht.indexOf("\n");if(-1!==Mt&&(Re=ht.substr(Mt+1),ht=ht.substr(0,Mt)),Bt&&("00:00:00"===ht||"00:00"===ht?(ht=Re,Re=""):8===ht.length&&(ht=ht.replace(/:00$/,""))),Re)if(yt)"d"===Ut?ht+=", "+Re:ht=Re+(ht?", "+ht:"");else if(Rt._inCalcTicks&&Rt._prevDateHead===Re){var Nt=Xt(Rt),Zt=Rt._trueSide||Rt.side;(!Nt&&"top"===Zt||Nt&&"bottom"===Zt)&&(ht+="<br> ")}else Rt._prevDateHead=Re,ht+="<br>"+Re;$e.text=ht}(Ue,De,Be,Ie):"log"===et?function(Rt,$e,yt,Bt,Ut){var Qt=Rt.dtick,Re=$e.x,ht=Rt.tickformat,Mt="string"==typeof Qt&&Qt.charAt(0);if("never"===Ut&&(Ut=""),Bt&&"L"!==Mt&&(Qt="L3",Mt="L"),ht||"L"===Mt)$e.text=Fe(Math.pow(10,Re),Rt,Ut,Bt);else if(g(Qt)||"D"===Mt&&e.mod(Re+.01,1)<.1){var Nt=Math.round(Re),Zt=Math.abs(Nt),or=Rt.exponentformat;"power"===or||Ce(or)&&Pe(Nt)?($e.text=0===Nt?1:1===Nt?"10":"10<sup>"+(Nt>1?"":S)+Zt+"</sup>",$e.fontSize*=1.25):("e"===or||"E"===or)&&Zt>2?$e.text="1"+or+(Nt>0?"+":S)+Zt:($e.text=Fe(Math.pow(10,Re),Rt,"","fakehover"),"D1"===Qt&&"y"===Rt._id.charAt(0)&&($e.dy-=$e.fontSize/6))}else{if("D"!==Mt)throw"unrecognized dtick "+String(Qt);$e.text=String(Math.round(Math.pow(10,e.mod(Re,1)))),$e.fontSize*=.75}if("D1"===Rt.dtick){var Wt=String($e.text).charAt(0);"0"!==Wt&&"1"!==Wt||("y"===Rt._id.charAt(0)?$e.dx-=$e.fontSize/4:($e.dy+=$e.fontSize/2,$e.dx+=(Rt.range[1]>Rt.range[0]?1:-1)*$e.fontSize*(Re<0?.5:.25)))}}(Ue,De,0,Ie,ut):"category"===et?($e=De,void 0===(yt=Ue._categories[Math.round($e.x)])&&(yt=""),$e.text=String(yt)):"multicategory"===et?function(Rt,$e,yt){var Bt=Math.round($e.x),Ut=Rt._categories[Bt]||[],Qt=void 0===Ut[1]?"":String(Ut[1]),Re=void 0===Ut[0]?"":String(Ut[0]);yt?$e.text=Re+" - "+Qt:($e.text=Qt,$e.text2=Re)}(Ue,De,Be):it(Ue)?function(Rt,$e,yt,Bt,Ut){if("radians"!==Rt.thetaunit||yt)$e.text=Fe($e.x,Rt,Ut,Bt);else{var Qt=$e.x/180;if(0===Qt)$e.text="0";else{var Re=function(Mt){function Nt(er,cr){return Math.abs(er-cr)<=1e-6}var Zt=function(er){for(var cr=1;!Nt(Math.round(er*cr)/cr,er);)cr*=10;return cr}(Mt),or=Mt*Zt,Wt=Math.abs(function er(cr,_r){return Nt(_r,0)?cr:er(_r,cr%_r)}(or,Zt));return[Math.round(or/Wt),Math.round(Zt/Wt)]}(Qt);if(Re[1]>=100)$e.text=Fe(e.deg2rad($e.x),Rt,Ut,Bt);else{var ht=$e.x<0;$e.text=1===Re[1]?1===Re[0]?"\u03c0":Re[0]+"\u03c0":["<sup>",Re[0],"</sup>","\u2044","<sub>",Re[1],"</sub>","\u03c0"].join(""),ht&&($e.text=S+$e.text)}}}}(Ue,De,Be,Ie,ut):function(Rt,$e,yt,Bt,Ut){"never"===Ut?Ut="":"all"===Rt.showexponent&&Math.abs($e.x/Rt.dtick)<1e-6&&(Ut="hide"),$e.text=Fe($e.x,Rt,Ut,Bt)}(Ue,De,0,Ie,ut),Qe||(Ue.tickprefix&&!It(Ue.showtickprefix)&&(De.text=Ue.tickprefix+De.text),Ue.ticksuffix&&!It(Ue.showticksuffix)&&(De.text+=Ue.ticksuffix)),"boundaries"===Ue.tickson||Ue.showdividers){var Ot=function(Rt){var $e=Ue.l2p(Rt);return $e>=0&&$e<=Ue._length?Rt:null};De.xbnd=[Ot(De.x-.5),Ot(De.x+Ue.dtick-.5)]}return De},z.hoverLabelText=function(Ue,We,Be){Be&&(Ue=e.extendFlat({},Ue,{hoverformat:Be}));var Qe=Array.isArray(We)?We[0]:We,Ae=Array.isArray(We)?We[1]:void 0;if(void 0!==Ae&&Ae!==Qe)return z.hoverLabelText(Ue,Qe,Be)+" - "+z.hoverLabelText(Ue,Ae,Be);var De="log"===Ue.type&&Qe<=0,Oe=z.tickText(Ue,Ue.c2l(De?-Qe:Qe),"hover").text;return De?0===Qe?"0":S+Oe:Oe};var ke=["f","p","n","\u03bc","m","","k","M","G","T"];function Ce(Ue){return"SI"===Ue||"B"===Ue}function Pe(Ue){return Ue>14||Ue<-15}function Fe(Ue,We,Be,Qe){var Ae=Ue<0,De=We._tickround,Oe=Be||We.exponentformat||"B",Ie=We._tickexponent,et=z.getTickFormat(We),ct=We.separatethousands;if(Qe){var vt={exponentformat:Oe,minexponent:We.minexponent,dtick:"none"===We.showexponent?We.dtick:g(Ue)&&Math.abs(Ue)||1,range:"none"===We.showexponent?We.range.map(We.r2d):[0,Ue||1]};ve(vt),De=(Number(vt._tickround)||0)+4,Ie=vt._tickexponent,We.hoverformat&&(et=We.hoverformat)}if(et)return We._numFormat(et)(Ue).replace(/-/g,S);var ft,It=Math.pow(10,-De)/2;if("none"===Oe&&(Ie=0),(Ue=Math.abs(Ue))<It)Ue="0",Ae=!1;else{if(Ue+=It,Ie&&(Ue*=Math.pow(10,-Ie),De+=Ie),0===De)Ue=String(Math.floor(Ue));else if(De<0){Ue=(Ue=String(Math.round(Ue))).substr(0,Ue.length+De);for(var ut=De;ut<0;ut++)Ue+="0"}else{var Ot=(Ue=String(Ue)).indexOf(".")+1;Ot&&(Ue=Ue.substr(0,Ot+De).replace(/\.?0+$/,""))}Ue=e.numSeparate(Ue,We._separators,ct)}return Ie&&"hide"!==Oe&&(Ce(Oe)&&Pe(Ie)&&(Oe="power"),ft=Ie<0?S+-Ie:"power"!==Oe?"+"+Ie:String(Ie),"e"===Oe||"E"===Oe?Ue+=Oe+ft:"power"===Oe?Ue+="\xd710<sup>"+ft+"</sup>":"B"===Oe&&9===Ie?Ue+="B":Ce(Oe)&&(Ue+=ke[Ie/3+5])),Ae?S+Ue:Ue}function qe(Ue,We){for(var Be=[],Qe={},Ae=0;Ae<We.length;Ae++){var De=We[Ae];Qe[De.text2]?Qe[De.text2].push(De.x):Qe[De.text2]=[De.x]}for(var Oe in Qe)Be.push(Me(Ue,e.interp(Qe[Oe],.5),Oe));return Be}function rt(Ue){return void 0!==Ue.periodX?Ue.periodX:Ue.x}function ze(Ue){return[Ue.text,Ue.x,Ue.axInfo,Ue.font,Ue.fontSize,Ue.fontColor].join("_")}function He(Ue){var We=Ue.title.font.size,Be=(Ue.title.text.match(r.BR_TAG_ALL)||[]).length;return Ue.title.hasOwnProperty("standoff")?Be?We*(Y+Be*W):We*Y:Be?We*(Be+1)*W:We}function Xe(Ue,We){var Be=Ue.l2p(We);return Be>1&&Be<Ue._length-1}function Je(Ue){var We=d.select(Ue),Be=We.select(".text-math-group");return Be.empty()?We.select("text"):Be}function at(Ue){return Ue._id+".automargin"}function pt(Ue){return at(Ue)+".mirror"}function xt(Ue){return Ue._id+".rangeslider"}function Ft(Ue,We){for(var Be=0;Be<We.length;Be++)-1===Ue.indexOf(We[Be])&&Ue.push(We[Be])}function Dt(Ue,We,Be){var Qe,Ae,De=[],Oe=[],Ie=Ue.layout;for(Qe=0;Qe<We.length;Qe++)De.push(z.getFromId(Ue,We[Qe]));for(Qe=0;Qe<Be.length;Qe++)Oe.push(z.getFromId(Ue,Be[Qe]));var et=Object.keys(s),ct=["anchor","domain","overlaying","position","side","tickangle","editType"],vt=["linear","log"];for(Qe=0;Qe<et.length;Qe++){var ft=et[Qe],It=De[0][ft],ut=Oe[0][ft],Ot=!0,Rt=!1,$e=!1;if("_"!==ft.charAt(0)&&"function"!=typeof It&&-1===ct.indexOf(ft)){for(Ae=1;Ae<De.length&&Ot;Ae++){var yt=De[Ae][ft];"type"===ft&&-1!==vt.indexOf(It)&&-1!==vt.indexOf(yt)&&It!==yt?Rt=!0:yt!==It&&(Ot=!1)}for(Ae=1;Ae<Oe.length&&Ot;Ae++){var Bt=Oe[Ae][ft];"type"===ft&&-1!==vt.indexOf(ut)&&-1!==vt.indexOf(Bt)&&ut!==Bt?$e=!0:Oe[Ae][ft]!==ut&&(Ot=!1)}Ot&&(Rt&&(Ie[De[0]._name].type="linear"),$e&&(Ie[Oe[0]._name].type="linear"),ot(Ie,ft,De,Oe,Ue._fullLayout._dfltTitle))}}for(Qe=0;Qe<Ue._fullLayout.annotations.length;Qe++){var Ut=Ue._fullLayout.annotations[Qe];-1!==We.indexOf(Ut.xref)&&-1!==Be.indexOf(Ut.yref)&&e.swapAttrs(Ie.annotations[Qe],["?"])}}function ot(Ue,We,Be,Qe,Ae){var De,Oe=e.nestedProperty,Ie=Oe(Ue[Be[0]._name],We).get(),et=Oe(Ue[Qe[0]._name],We).get();for("title"===We&&(Ie&&Ie.text===Ae.x&&(Ie.text=Ae.y),et&&et.text===Ae.y&&(et.text=Ae.x)),De=0;De<Be.length;De++)Oe(Ue,Be[De]._name+"."+We).set(et);for(De=0;De<Qe.length;De++)Oe(Ue,Qe[De]._name+"."+We).set(Ie)}function it(Ue){return"angularaxis"===Ue._id}function Et(Ue,We){for(var Be=We._rangebreaks.length,Qe=0;Qe<Be;Qe++){var Ae=We._rangebreaks[Qe];if(Ue>=Ae.min&&Ue<Ae.max)return Ae.max}return Ue}function Xt(Ue){return-1!==(Ue.ticklabelposition||"").indexOf("inside")}function nr(Ue,We){Xt(Ue._anchorAxis||{})&&Ue._hideCounterAxisInsideTickLabels&&Ue._hideCounterAxisInsideTickLabels(We)}z.getTickFormat=function(Ue){var We,Be,Qe,Ae,De,Oe,Ie,et,It,ut,Ot,Rt,$e,yt;function ct(It){return"string"!=typeof It?It:Number(It.replace("M",""))*w}function vt(It,ut){var Ot=["L","D"];if(typeof It==typeof ut){if("number"==typeof It)return It-ut;var Rt=Ot.indexOf(It.charAt(0)),$e=Ot.indexOf(ut.charAt(0));return Rt===$e?Number(It.replace(/(L|D)/g,""))-Number(ut.replace(/(L|D)/g,"")):Rt-$e}return"number"==typeof It?1:-1}if(Ue.tickformatstops&&Ue.tickformatstops.length>0)switch(Ue.type){case"date":case"linear":for(We=0;We<Ue.tickformatstops.length;We++)if((Qe=Ue.tickformatstops[We]).enabled&&(Ae=Ue.dtick,Oe=void 0,void 0,void 0,Oe=ct||function(It){return It},et=(De=Qe.dtickrange)[1],(!(Ie=De[0])&&"number"!=typeof Ie||Oe(Ie)<=Oe(Ae))&&(!et&&"number"!=typeof et||Oe(et)>=Oe(Ae)))){Be=Qe;break}break;case"log":for(We=0;We<Ue.tickformatstops.length;We++)if((Qe=Ue.tickformatstops[We]).enabled&&(Ot=void 0,Rt=void 0,$e=void 0,yt=void 0,Ot=null===(ut=Qe.dtickrange)[0],Rt=null===ut[1],$e=vt(It=Ue.dtick,ut[0])>=0,yt=vt(It,ut[1])<=0,(Ot||$e)&&(Rt||yt))){Be=Qe;break}}return Be?Be.value:Ue.tickformat},z.getSubplots=function(Ue,We){var Be=Ue._fullLayout._subplots,Qe=Be.cartesian.concat(Be.gl2d||[]),Ae=We?z.findSubplotsWithAxis(Qe,We):Qe;return Ae.sort(function(De,Oe){var Ie=De.substr(1).split("y"),et=Oe.substr(1).split("y");return Ie[0]===et[0]?+Ie[1]-+et[1]:+Ie[0]-+et[0]}),Ae},z.findSubplotsWithAxis=function(Ue,We){for(var Be=new RegExp("x"===We._id.charAt(0)?"^"+We._id+"y":We._id+"$"),Qe=[],Ae=0;Ae<Ue.length;Ae++){var De=Ue[Ae];Be.test(De)&&Qe.push(De)}return Qe},z.makeClipPaths=function(Ue){var We=Ue._fullLayout;if(!We._hasOnlyLargeSploms){var Be,Qe,Ae={_offset:0,_length:We.width,_id:""},De={_offset:0,_length:We.height,_id:""},Oe=z.list(Ue,"x",!0),Ie=z.list(Ue,"y",!0),et=[];for(Be=0;Be<Oe.length;Be++)for(et.push({x:Oe[Be],y:De}),Qe=0;Qe<Ie.length;Qe++)0===Be&&et.push({x:Ae,y:Ie[Qe]}),et.push({x:Oe[Be],y:Ie[Qe]});var ct=We._clips.selectAll(".axesclip").data(et,function(vt){return vt.x._id+vt.y._id});ct.enter().append("clipPath").classed("axesclip",!0).attr("id",function(vt){return"clip"+We._uid+vt.x._id+vt.y._id}).append("rect"),ct.exit().remove(),ct.each(function(vt){d.select(this).select("rect").attr({x:vt.x._offset||0,y:vt.y._offset||0,width:vt.x._length||1,height:vt.y._length||1})})}},z.draw=function(Ue,We,Be){var Qe=Ue._fullLayout;"redraw"===We&&Qe._paper.selectAll("g.subplot").each(function(De){var Ie=Qe._plots[De[0]];if(Ie){var et=Ie.xaxis,ct=Ie.yaxis;Ie.xaxislayer.selectAll("."+et._id+"tick").remove(),Ie.yaxislayer.selectAll("."+ct._id+"tick").remove(),Ie.xaxislayer.selectAll("."+et._id+"tick2").remove(),Ie.yaxislayer.selectAll("."+ct._id+"tick2").remove(),Ie.xaxislayer.selectAll("."+et._id+"divider").remove(),Ie.yaxislayer.selectAll("."+ct._id+"divider").remove(),Ie.gridlayer&&Ie.gridlayer.selectAll("path").remove(),Ie.zerolinelayer&&Ie.zerolinelayer.selectAll("path").remove(),Qe._infolayer.select(".g-"+et._id+"title").remove(),Qe._infolayer.select(".g-"+ct._id+"title").remove()}});var Ae=We&&"redraw"!==We?We:z.listIds(Ue);return e.syncOrAsync(Ae.map(function(De){return function(){if(De){var Oe=z.getFromId(Ue,De),Ie=z.drawOne(Ue,Oe,Be);return Oe._r=Oe.range.slice(),Oe._rl=e.simpleMap(Oe._r,Oe.r2l),Ie}}}))},z.drawOne=function(Ue,We,Be){var Qe,Ae,De;Be=Be||{},We.setScale();var Oe=Ue._fullLayout,Ie=We._id,et=Ie.charAt(0),ct=z.counterLetter(Ie),vt=Oe._plots[We._mainSubplot];if(vt){var ft=vt[et+"axislayer"],It=We._mainLinePosition,ut=We._mainMirrorPosition,Ot=We._vals=z.calcTicks(We),Rt=[We.mirror,It,ut].join("_");for(Qe=0;Qe<Ot.length;Qe++)Ot[Qe].axInfo=Rt;We._selections={},We._tickAngles&&(We._prevTickAngles=We._tickAngles),We._tickAngles={},We._depth=null;var $e={};if(We.visible){var yt,Bt,Ut=z.makeTransTickFn(We),Qt=z.makeTransTickLabelFn(We),Re="inside"===We.ticks,ht="outside"===We.ticks;if("boundaries"===We.tickson){var Mt=function(jr,Lr){var Xr,Un=[],qr=function(On,Tn){var rn=On.xbnd[Tn];null!==rn&&Un.push(e.extendFlat({},On,{x:rn}))};if(Lr.length){for(Xr=0;Xr<Lr.length;Xr++)qr(Lr[Xr],0);qr(Lr[Xr-1],1)}return Un}(0,Ot);Bt=z.clipEnds(We,Mt),yt=Re?Bt:Mt}else Bt=z.clipEnds(We,Ot),yt=Re&&"period"!==We.ticklabelmode?Bt:Ot;var Nt=We._gridVals=Bt,Zt=function(jr,Lr){var Xr,Un,qr=[],On=Lr.length&&Lr[Lr.length-1].x<Lr[0].x,Tn=function(Vn,ar){var zt=Vn.xbnd[ar];null!==zt&&qr.push(e.extendFlat({},Vn,{x:zt}))};if(jr.showdividers&&Lr.length){for(Xr=0;Xr<Lr.length;Xr++){var rn=Lr[Xr];rn.text2!==Un&&Tn(rn,On?1:0),Un=rn.text2}Tn(Lr[Xr-1],On?0:1)}return qr}(We,Ot);if(!Oe._hasOnlyLargeSploms){var or=We._subplotsWith,Wt={};for(Qe=0;Qe<or.length;Qe++){var er=(De=Oe._plots[Ae=or[Qe]])[ct+"axis"],cr=er._mainAxis._id;if(!Wt[cr]){Wt[cr]=1;var _r="x"===et?"M0,"+er._offset+"v"+er._length:"M"+er._offset+",0h"+er._length;z.drawGrid(Ue,We,{vals:Nt,counterAxis:er,layer:De.gridlayer.select("."+Ie),path:_r,transFn:Ut}),z.drawZeroLine(Ue,We,{counterAxis:er,layer:De.zerolinelayer,path:_r,transFn:Ut})}}}var xr=z.getTickSigns(We),dr=[];if(We.ticks){var pr,br,Nr,kr=z.makeTickPath(We,It,xr[2]);if(We._anchorAxis&&We.mirror&&!0!==We.mirror?(pr=z.makeTickPath(We,ut,xr[3]),br=kr+pr):(pr="",br=kr),We.showdividers&&ht&&"boundaries"===We.tickson){var Hr={};for(Qe=0;Qe<Zt.length;Qe++)Hr[Zt[Qe].x]=1;Nr=function(jr){return Hr[jr.x]?pr:br}}else Nr=br;z.drawTicks(Ue,We,{vals:yt,layer:ft,path:Nr,transFn:Ut}),"allticks"===We.mirror&&(dr=Object.keys(We._linepositions||{}))}for(Qe=0;Qe<dr.length;Qe++){De=Oe._plots[Ae=dr[Qe]];var an=We._linepositions[Ae]||[],fn=z.makeTickPath(We,an[0],xr[0])+z.makeTickPath(We,an[1],xr[1]);z.drawTicks(Ue,We,{vals:yt,layer:De[et+"axislayer"],path:fn,transFn:Ut})}var zn=[];if(zn.push(function(){return z.drawLabels(Ue,We,{vals:Ot,layer:ft,plotinfo:De,transFn:Qt,labelFns:z.makeLabelFns(We,It)})}),"multicategory"===We.type){var Nn={x:2,y:10}[et];zn.push(function(){var jr={x:"height",y:"width"}[et],Lr=cn()[jr]+Nn+(We._tickAngles[Ie+"tick"]?We.tickfont.size*W:0);return z.drawLabels(Ue,We,{vals:qe(We,Ot),layer:ft,cls:Ie+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Ut,labelFns:z.makeLabelFns(We,It+Lr*xr[4])})}),zn.push(function(){return We._depth=xr[4]*(cn("tick2")[We.side]-It),jr=Ue,Lr=We,qr=(Xr={vals:Zt,layer:ft,path:z.makeTickPath(We,It,xr[4],We._depth),transFn:Ut}).vals,(On=Xr.layer.selectAll("path."+(Un=Lr._id+"divider")).data(qr,ze)).exit().remove(),On.enter().insert("path",":first-child").classed(Un,1).classed("crisp",1).call(n.stroke,Lr.dividercolor).style("stroke-width",p.crispRound(jr,Lr.dividerwidth,1)+"px"),void On.attr("transform",Xr.transFn).attr("d",Xr.path);var jr,Lr,Xr,Un,qr,On})}else We.title.hasOwnProperty("standoff")&&zn.push(function(){We._depth=xr[4]*(cn()[We.side]-It)});var In=t.getComponentMethod("rangeslider","isVisible")(We);return zn.push(function(){var jr,Lr,Xr,Un,qr=We.side.charAt(0),On=te[We.side].charAt(0),Tn=z.getPxPosition(Ue,We),rn=ht?We.ticklen:0;if((We.automargin||In)&&("multicategory"===We.type?jr=cn("tick2"):(jr=cn(),"x"===et&&"b"===qr&&(We._depth=Math.max(jr.width>0?jr.bottom-Tn:0,rn)))),We.automargin){Lr={x:0,y:0,r:0,l:0,t:0,b:0};var Vn=[0,1];if("x"===et){if("b"===qr?Lr[qr]=We._depth:(Lr[qr]=We._depth=Math.max(jr.width>0?Tn-jr.top:0,rn),Vn.reverse()),jr.width>0){var ar=jr.right-(We._offset+We._length);ar>0&&(Lr.xr=1,Lr.r=ar);var zt=We._offset-jr.left;zt>0&&(Lr.xl=0,Lr.l=zt)}}else if("l"===qr?Lr[qr]=We._depth=Math.max(jr.height>0?Tn-jr.left:0,rn):(Lr[qr]=We._depth=Math.max(jr.height>0?jr.right-Tn:0,rn),Vn.reverse()),jr.height>0){var Gt=jr.bottom-(We._offset+We._length);Gt>0&&(Lr.yb=0,Lr.b=Gt);var mr=We._offset-jr.top;mr>0&&(Lr.yt=1,Lr.t=mr)}Lr[ct]="free"===We.anchor?We.position:We._anchorAxis.domain[Vn[0]],We.title.text!==Oe._dfltTitle[et]&&(Lr[qr]+=He(We)+(We.title.standoff||0)),We.mirror&&"free"!==We.anchor&&((Xr={x:0,y:0,r:0,l:0,t:0,b:0})[On]=We.linewidth,We.mirror&&!0!==We.mirror&&(Xr[On]+=rn),!0===We.mirror||"ticks"===We.mirror?Xr[ct]=We._anchorAxis.domain[Vn[1]]:"all"!==We.mirror&&"allticks"!==We.mirror||(Xr[ct]=[We._counterDomainMin,We._counterDomainMax][Vn[1]]))}In&&(Un=t.getComponentMethod("rangeslider","autoMarginOpts")(Ue,We)),_.autoMargin(Ue,at(We),Lr),_.autoMargin(Ue,pt(We),Xr),_.autoMargin(Ue,xt(We),Un)}),Be.skipTitle||In&&"bottom"===We.side||zn.push(function(){return function(jr,Lr){var Xr,Un=jr._fullLayout,qr=Lr._id,On=qr.charAt(0),Tn=Lr.title.font.size;if(Lr.title.hasOwnProperty("standoff"))Xr=Lr._depth+Lr.title.standoff+He(Lr);else{var rn=Xt(Lr);if("multicategory"===Lr.type)Xr=Lr._depth;else{var Vn=1.5*Tn;rn&&(Vn=.5*Tn,"outside"===Lr.ticks&&(Vn+=Lr.ticklen)),Xr=10+Vn+(Lr.linewidth?Lr.linewidth-1:0)}rn||(Xr+="x"===On?"top"===Lr.side?Tn*(Lr.showticklabels?1:0):Tn*(Lr.showticklabels?1.5:.5):"right"===Lr.side?Tn*(Lr.showticklabels?1:.5):Tn*(Lr.showticklabels?.5:0))}var ar,zt,Gt,mr,Er=z.getPxPosition(jr,Lr);if("x"===On?(zt=Lr._offset+Lr._length/2,Gt="top"===Lr.side?Er-Xr:Er+Xr):(Gt=Lr._offset+Lr._length/2,zt="right"===Lr.side?Er+Xr:Er-Xr,ar={rotate:"-90",offset:0}),"multicategory"!==Lr.type){var tn=Lr._selections[Lr._id+"tick"];if(mr={selection:tn,side:Lr.side},tn&&tn.node()&&tn.node().parentNode){var Qr=p.getTranslate(tn.node().parentNode);mr.offsetLeft=Qr.x,mr.offsetTop=Qr.y}Lr.title.hasOwnProperty("standoff")&&(mr.pad=0)}return o.draw(jr,qr+"title",{propContainer:Lr,propName:Lr._name+".title.text",placeholder:Un._dfltTitle[On],avoid:mr,transform:ar,attributes:{x:zt,y:Gt,"text-anchor":"middle"}})}(Ue,We)}),e.syncOrAsync(zn)}}function cn(jr){var Xr,Un,qr,On,Tn,rn,Lr=Ie+(jr||"tick");return $e[Lr]||($e[Lr]=((Xr=We)._selections[Un=Lr].size()?(qr=1/0,On=-1/0,Tn=1/0,rn=-1/0,Xr._selections[Un].each(function(){var Vn=Je(this),ar=p.bBox(Vn.node().parentNode);qr=Math.min(qr,ar.top),On=Math.max(On,ar.bottom),Tn=Math.min(Tn,ar.left),rn=Math.max(rn,ar.right)})):(qr=0,On=0,Tn=0,rn=0),{top:qr,bottom:On,left:Tn,right:rn,height:On-qr,width:rn-Tn})),$e[Lr]}},z.getTickSigns=function(Ue){var We=Ue._id.charAt(0),Qe=Ue.side==={x:"top",y:"right"}[We]?1:-1,Ae=[-1,1,Qe,-Qe];return"inside"!==Ue.ticks==("x"===We)&&(Ae=Ae.map(function(De){return-De})),Ue.side&&Ae.push({l:-1,t:-1,r:1,b:1}[Ue.side.charAt(0)]),Ae},z.makeTransTickFn=function(Ue){return"x"===Ue._id.charAt(0)?function(We){return i(Ue._offset+Ue.l2p(We.x),0)}:function(We){return i(0,Ue._offset+Ue.l2p(We.x))}},z.makeTransTickLabelFn=function(Ue){var We=function(Ae){var De=Ae.ticklabelposition||"",Oe=function(yt){return-1!==De.indexOf(yt)},Ie=Oe("top"),et=Oe("left"),ct=Oe("right"),vt=Oe("bottom"),ft=Oe("inside"),It=vt||et||Ie||ct;if(!It&&!ft)return[0,0];var ut=Ae.side,Ot=It?(Ae.tickwidth||0)/2:0,Rt=3,$e=Ae.tickfont?Ae.tickfont.size:12;return(vt||Ie)&&(Ot+=$e*Y,Rt+=(Ae.linewidth||0)/2),(et||ct)&&(Ot+=(Ae.linewidth||0)/2,Rt+=3),ft&&"top"===ut&&(Rt-=$e*(1-Y)),(et||Ie)&&(Ot=-Ot),"bottom"!==ut&&"right"!==ut||(Rt=-Rt),[It?Ot:0,ft?Rt:0]}(Ue),Be=We[0],Qe=We[1];return"x"===Ue._id.charAt(0)?function(Ae){return i(Be+Ue._offset+Ue.l2p(rt(Ae)),Qe)}:function(Ae){return i(Qe,Be+Ue._offset+Ue.l2p(rt(Ae)))}},z.makeTickPath=function(Ue,We,Be,Qe){Qe=void 0!==Qe?Qe:Ue.ticklen;var Ae=Ue._id.charAt(0),De=(Ue.linewidth||1)/2;return"x"===Ae?"M0,"+(We+De*Be)+"v"+Qe*Be:"M"+(We+De*Be)+",0h"+Qe*Be},z.makeLabelFns=function(Ue,We,Be){var Qe=Ue.ticklabelposition||"",Ae=function(Wt){return-1!==Qe.indexOf(Wt)},De=Ae("top"),Oe=Ae("left"),Ie=Ae("right"),et=Ae("bottom")||Oe||De||Ie,ct=Ae("inside"),vt="inside"===Qe&&"inside"===Ue.ticks||!ct&&"outside"===Ue.ticks&&"boundaries"!==Ue.tickson,ft=0,It=0,ut=vt?Ue.ticklen:0;if(ct?ut*=-1:et&&(ut=0),vt&&(ft+=ut,Be)){var Ot=e.deg2rad(Be);ft=ut*Math.cos(Ot)+1,It=ut*Math.sin(Ot)}Ue.showticklabels&&(vt||Ue.showline)&&(ft+=.2*Ue.tickfont.size);var Rt,$e,yt,Bt,Ut,Qt={labelStandoff:ft+=(Ue.linewidth||1)/2*(ct?-1:1),labelShift:It},Re=0,ht=Ue.side,Mt=Ue._id.charAt(0),Nt=Ue.tickangle;if("x"===Mt)Bt=(Ut=!ct&&"bottom"===ht||ct&&"top"===ht)?1:-1,ct&&(Bt*=-1),Rt=It*Bt,$e=We+ft*Bt,yt=Ut?1:-.2,90===Math.abs(Nt)&&(ct?yt+=Z:yt=-90===Nt&&"bottom"===ht?Y:90===Nt&&"top"===ht?Z:.5,Re=Z/2*(Nt/90)),Qt.xFn=function(Wt){return Wt.dx+Rt+Re*Wt.fontSize},Qt.yFn=function(Wt){return Wt.dy+$e+Wt.fontSize*yt},Qt.anchorFn=function(Wt,er){if(et){if(Oe)return"end";if(Ie)return"start"}return g(er)&&0!==er&&180!==er?er*Bt<0!==ct?"end":"start":"middle"},Qt.heightFn=function(Wt,er,cr){return er<-60||er>60?-.5*cr:"top"===Ue.side!==ct?-cr:0};else if("y"===Mt){if(Bt=(Ut=!ct&&"left"===ht||ct&&"right"===ht)?1:-1,ct&&(Bt*=-1),Rt=ft,$e=It*Bt,yt=0,ct||90!==Math.abs(Nt)||(yt=-90===Nt&&"left"===ht||90===Nt&&"right"===ht?Y:.5),ct){var Zt=g(Nt)?+Nt:0;if(0!==Zt){var or=e.deg2rad(Zt);Re=Math.abs(Math.sin(or))*Y*Bt,yt=0}}Qt.xFn=function(Wt){return Wt.dx+We-(Rt+Wt.fontSize*yt)*Bt+Re*Wt.fontSize},Qt.yFn=function(Wt){return Wt.dy+$e+Wt.fontSize*Z},Qt.anchorFn=function(Wt,er){return g(er)&&90===Math.abs(er)?"middle":Ut?"end":"start"},Qt.heightFn=function(Wt,er,cr){return"right"===Ue.side&&(er*=-1),er<-30?-cr:er<30?-.5*cr:0}}return Qt},z.drawTicks=function(Ue,We,Be){var Qe=We._id+"tick",Ae=(Be=Be||{}).vals;"period"===We.ticklabelmode&&(Ae=Ae.slice()).shift();var De=Be.layer.selectAll("path."+Qe).data(We.ticks?Ae:[],ze);De.exit().remove(),De.enter().append("path").classed(Qe,1).classed("ticks",1).classed("crisp",!1!==Be.crisp).call(n.stroke,We.tickcolor).style("stroke-width",p.crispRound(Ue,We.tickwidth,1)+"px").attr("d",Be.path).style("display",null),nr(We,[H]),De.attr("transform",Be.transFn)},z.drawGrid=function(Ue,We,Be){var Qe=We._id+"grid",Ae=(Be=Be||{}).vals,De=Be.counterAxis;if(!1===We.showgrid)Ae=[];else if(De&&z.shouldShowZeroLine(Ue,We,De))for(var Oe="array"===We.tickmode,Ie=0;Ie<Ae.length;Ie++){var et=Ae[Ie].x;if(Oe?!et:Math.abs(et)<We.dtick/100){if(Ae=Ae.slice(0,Ie).concat(Ae.slice(Ie+1)),!Oe)break;Ie--}}var ct=Be.layer.selectAll("path."+Qe).data(Ae,ze);ct.exit().remove(),ct.enter().append("path").classed(Qe,1).classed("crisp",!1!==Be.crisp),We._gw=p.crispRound(Ue,We.gridwidth,1),ct.attr("transform",Be.transFn).attr("d",Be.path).call(n.stroke,We.gridcolor||"#ddd").style("stroke-width",We._gw+"px").style("display",null),nr(We,[F]),"function"==typeof Be.path&&ct.attr("d",Be.path)},z.drawZeroLine=function(Ue,We,Be){var Qe=We._id+"zl",Ae=z.shouldShowZeroLine(Ue,We,(Be=Be||Be).counterAxis),De=Be.layer.selectAll("path."+Qe).data(Ae?[{x:0,id:We._id}]:[]);De.exit().remove(),De.enter().append("path").classed(Qe,1).classed("zl",1).classed("crisp",!1!==Be.crisp).each(function(){Be.layer.selectAll("path").sort(function(Oe,Ie){return Q(Oe.id,Ie.id)})}),De.attr("transform",Be.transFn).attr("d",Be.path).call(n.stroke,We.zerolinecolor||n.defaultLine).style("stroke-width",p.crispRound(Ue,We.zerolinewidth,We._gw||1)+"px").style("display",null),nr(We,[R])},z.drawLabels=function(Ue,We,Be){Be=Be||{};var Qe=Ue._fullLayout,Ae=We._id,De=Ae.charAt(0),Oe=Be.cls||Ae+"tick",Ie=Be.vals,et=Be.labelFns,ct=Be.secondary?0:We.tickangle,vt=(We._prevTickAngles||{})[Oe],ft=Be.layer.selectAll("g."+Oe).data(We.showticklabels?Ie:[],ze),It=[];function ut(Bt,Ut){Bt.each(function(Qt){var Re=d.select(this),ht=Re.select(".text-math-group"),Mt=et.anchorFn(Qt,Ut),Nt=Be.transFn.call(Re.node(),Qt)+(g(Ut)&&0!=+Ut?" rotate("+Ut+","+et.xFn(Qt)+","+(et.yFn(Qt)-Qt.fontSize/2)+")":""),Zt=r.lineCount(Re),or=W*Qt.fontSize,Wt=et.heightFn(Qt,g(Ut)?+Ut:0,(Zt-1)*or);if(Wt&&(Nt+=i(0,Wt)),ht.empty()){var er=Re.select("text");er.attr({transform:Nt,"text-anchor":Mt}),er.style("opacity",1),We._adjustTickLabelsOverflow&&We._adjustTickLabelsOverflow()}else{var cr=p.bBox(ht.node()).width*{end:-.5,start:.5}[Mt];ht.attr("transform",Nt+i(cr,0))}})}ft.enter().append("g").classed(Oe,1).append("text").attr("text-anchor","middle").each(function(Bt){var Ut=d.select(this),Qt=Ue._promises.length;Ut.call(r.positionText,et.xFn(Bt),et.yFn(Bt)).call(p.font,Bt.font,Bt.fontSize,Bt.fontColor).text(Bt.text).call(r.convertToTspans,Ue),Ue._promises[Qt]?It.push(Ue._promises.pop().then(function(){ut(Ut,ct)})):ut(Ut,ct)}),nr(We,[U]),ft.exit().remove(),Be.repositionOnUpdate&&ft.each(function(Bt){d.select(this).select("text").call(r.positionText,et.xFn(Bt),et.yFn(Bt))}),We._adjustTickLabelsOverflow=function(){var Bt=We.ticklabeloverflow;if(Bt&&"allow"!==Bt){var Ut=-1!==Bt.indexOf("hide"),Qt="x"===We._id.charAt(0),Re=0,ht=Qt?Ue._fullLayout.width:Ue._fullLayout.height;if(-1!==Bt.indexOf("domain")){var Mt=e.simpleMap(We.range,We.r2l);Re=We.l2p(Mt[0])+We._offset,ht=We.l2p(Mt[1])+We._offset}var Nt=Math.min(Re,ht),Zt=Math.max(Re,ht),or=We.side,Wt=1/0,er=-1/0;for(var cr in ft.each(function(dr){var pr=d.select(this);if(pr.select(".text-math-group").empty()){var br=p.bBox(pr.node()),Nr=0;Qt?(br.right>Zt||br.left<Nt)&&(Nr=1):(br.bottom>Zt||br.top+(We.tickangle?0:dr.fontSize/4)<Nt)&&(Nr=1);var kr=pr.select("text");Nr?Ut&&kr.style("opacity",0):(kr.style("opacity",1),Wt="bottom"===or||"right"===or?Math.min(Wt,Qt?br.top:br.left):-1/0,er="top"===or||"left"===or?Math.max(er,Qt?br.bottom:br.right):1/0)}}),Qe._plots){var _r=Qe._plots[cr];if(We._id===_r.xaxis._id||We._id===_r.yaxis._id){var xr=Qt?_r.yaxis:_r.xaxis;xr&&(xr["_visibleLabelMin_"+We._id]=Wt,xr["_visibleLabelMax_"+We._id]=er)}}}},We._hideCounterAxisInsideTickLabels=function(Bt){var Ut="x"===We._id.charAt(0),Qt=[];for(var Re in Qe._plots){var ht=Qe._plots[Re];We._id!==ht.xaxis._id&&We._id!==ht.yaxis._id||Qt.push(Ut?ht.yaxis:ht.xaxis)}Qt.forEach(function(Mt,Nt){Mt&&Xt(Mt)&&(Bt||[R,F,H,U]).forEach(function(Zt){var or="tick"===Zt.K&&"text"===Zt.L&&"period"===We.ticklabelmode,Wt=Qe._plots[We._mainSubplot];(Zt.K===R.K?Wt.zerolinelayer.selectAll("."+We._id+"zl"):Zt.K===F.K?Wt.gridlayer.selectAll("."+We._id):Wt[We._id.charAt(0)+"axislayer"]).each(function(){var er=d.select(this);Zt.L&&(er=er.selectAll(Zt.L)),er.each(function(cr){var _r=We.l2p(or?rt(cr):cr.x)+We._offset,xr=d.select(this);_r<We["_visibleLabelMax_"+Mt._id]&&_r>We["_visibleLabelMin_"+Mt._id]?xr.style("display","none"):"tick"!==Zt.K||Nt||xr.style("display",null)})})})})},ut(ft,vt+1?vt:ct);var Ot=null;We._selections&&(We._selections[Oe]=ft);var Rt=[function(){return It.length&&Promise.all(It)}];We.automargin&&Qe._redrawFromAutoMarginCount&&90===vt?(Ot=90,Rt.push(function(){ut(ft,vt)})):Rt.push(function(){if(ut(ft,ct),Ie.length&&"x"===De&&!g(ct)&&("log"!==We.type||"D"!==String(We.dtick).charAt(0))){Ot=0;var Bt,Ut=0,Qt=[];if(ft.each(function(pr){Ut=Math.max(Ut,pr.fontSize);var br=We.l2p(pr.x),Nr=Je(this),kr=p.bBox(Nr.node());Qt.push({top:0,bottom:10,height:10,left:br-kr.width/2,right:br+kr.width/2+2,width:kr.width+2})}),"boundaries"!==We.tickson&&!We.showdividers||Be.secondary){var Re=Ie.length,ht=Math.abs((Ie[Re-1].x-Ie[0].x)*We._m)/(Re-1),Mt=We.ticklabelposition||"",Nt=function(pr){return-1!==Mt.indexOf(pr)},Zt=Nt("top"),or=Nt("left"),Wt=Nt("right"),er=Nt("bottom")||or||Zt||Wt?(We.tickwidth||0)+6:0,cr=ht<2.5*Ut||"multicategory"===We.type||"realaxis"===We._name;for(Bt=0;Bt<Qt.length-1;Bt++)if(e.bBoxIntersect(Qt[Bt],Qt[Bt+1],er)){Ot=cr?90:30;break}}else{var _r=2;for(We.ticks&&(_r+=We.tickwidth/2),Bt=0;Bt<Qt.length;Bt++){var xr=Ie[Bt].xbnd,dr=Qt[Bt];if(null!==xr[0]&&dr.left-We.l2p(xr[0])<_r||null!==xr[1]&&We.l2p(xr[1])-dr.right<_r){Ot=90;break}}}Ot&&ut(ft,Ot)}}),We._tickAngles&&Rt.push(function(){We._tickAngles[Oe]=null===Ot?g(ct)?ct:0:Ot});var $e=We._anchorAxis;$e&&$e.autorange&&Xt(We)&&!j(Qe,We._id)&&(Qe._insideTickLabelsAutorange||(Qe._insideTickLabelsAutorange={}),Qe._insideTickLabelsAutorange[$e._name+".autorange"]=$e.autorange,Rt.push(function(){ft.each(function(Bt,Ut){var Qt=Je(this);Qt.select(".text-math-group").empty()&&(We._vals[Ut].bb=p.bBox(Qt.node()))})}));var yt=e.syncOrAsync(Rt);return yt&&yt.then&&Ue._promises.push(yt),yt},z.getPxPosition=function(Ue,We){var Be,Qe=Ue._fullLayout._size,Ae=We._id.charAt(0),De=We.side;return"free"!==We.anchor?Be=We._anchorAxis:"x"===Ae?Be={_offset:Qe.t+(1-(We.position||0))*Qe.h,_length:0}:"y"===Ae&&(Be={_offset:Qe.l+(We.position||0)*Qe.w,_length:0}),"top"===De||"left"===De?Be._offset:"bottom"===De||"right"===De?Be._offset+Be._length:void 0},z.shouldShowZeroLine=function(Ue,We,Be){var Qe=e.simpleMap(We.range,We.r2l);return Qe[0]*Qe[1]<=0&&We.zeroline&&("linear"===We.type||"-"===We.type)&&!(We.rangebreaks&&We.maskBreaks(0)===C)&&(Xe(We,0)||!function(Ae,De,Oe,Ie){var et=Oe._mainAxis;if(et){var ct=Ae._fullLayout,vt=De._id.charAt(0),ft=z.counterLetter(De._id),It=De._offset+(Math.abs(Ie[0])<Math.abs(Ie[1])==("x"===vt)?0:De._length),Ot=ct._plots[Oe._mainSubplot];if(!(Ot.mainplotinfo||Ot).overlays.length)return ut(Oe);for(var Rt=z.list(Ae,ft),$e=0;$e<Rt.length;$e++){var yt=Rt[$e];if(yt._mainAxis===et&&ut(yt))return!0}}function ut(Bt){if(!Bt.showline||!Bt.linewidth)return!1;var Ut=Math.max((Bt.linewidth+De.zerolinewidth)/2,1);function Qt(Mt){return"number"==typeof Mt&&Math.abs(Mt-It)<Ut}if(Qt(Bt._mainLinePosition)||Qt(Bt._mainMirrorPosition))return!0;var Re=Bt._linepositions||{};for(var ht in Re)if(Qt(Re[ht][0])||Qt(Re[ht][1]))return!0}}(Ue,We,Be,Qe)||function(Ae,De){for(var Oe=Ae._fullData,Ie=De._mainSubplot,et=De._id.charAt(0),ct=0;ct<Oe.length;ct++){var vt=Oe[ct];if(!0===vt.visible&&vt.xaxis+vt.yaxis===Ie&&(t.traceIs(vt,"bar-like")&&vt.orientation==={x:"h",y:"v"}[et]||vt.fill&&vt.fill.charAt(vt.fill.length-1)===et))return!0}return!1}(Ue,We))},z.clipEnds=function(Ue,We){return We.filter(function(Be){return Xe(Ue,Be.x)})},z.allowAutoMargin=function(Ue){for(var We=z.list(Ue,"",!0),Be=0;Be<We.length;Be++){var Qe=We[Be];Qe.automargin&&(_.allowAutoMargin(Ue,at(Qe)),Qe.mirror&&_.allowAutoMargin(Ue,pt(Qe))),t.getComponentMethod("rangeslider","isVisible")(Qe)&&_.allowAutoMargin(Ue,xt(Qe))}},z.swap=function(Ue,We){for(var Be=function(Ae,De){var Oe,Ie,et=[];for(Oe=0;Oe<De.length;Oe++){var ct=[],vt=Ae._fullData[De[Oe]].xaxis,ft=Ae._fullData[De[Oe]].yaxis;if(vt&&ft){for(Ie=0;Ie<et.length;Ie++)-1===et[Ie].x.indexOf(vt)&&-1===et[Ie].y.indexOf(ft)||ct.push(Ie);if(ct.length){var It,ut=et[ct[0]];if(ct.length>1)for(Ie=1;Ie<ct.length;Ie++)Ft(ut.x,(It=et[ct[Ie]]).x),Ft(ut.y,It.y);Ft(ut.x,[vt]),Ft(ut.y,[ft])}else et.push({x:[vt],y:[ft]})}}return et}(Ue,We),Qe=0;Qe<Be.length;Qe++)Dt(Ue,Be[Qe].x,Be[Qe].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../constants/numerical").BADNUM,t=g.isArrayOrTypedArray,e=g.isDateTime,i=g.cleanNumber,r=Math.round;function o(p,s){return s?d(p):"number"==typeof p}function n(p){return Math.max(1,(p-1)/1e3)}$.exports=function(p,s,a){var x,c=p,u=a.noMultiCategory;if(t(c)&&!c.length)return"-";if(!u&&t((x=c)[0])&&t(x[1]))return"multicategory";if(u&&Array.isArray(c[0])){for(var h=[],v=0;v<c.length;v++)if(t(c[v]))for(var f=0;f<c[v].length;f++)h.push(c[v][f]);c=h}if(function(x,m){for(var w=x.length,b=n(w),k=0,T=0,L={},A=0;A<w;A+=b){var D=x[r(A)],S=String(D);L[S]||(L[S]=1,e(D,m)&&k++,d(D)&&T++)}return k>2*T}(c,s))return"date";var l="strict"!==a.autotypenumbers;return function(x,m){for(var w=x.length,b=n(w),k=0,T=0,L={},A=0;A<w;A+=b){var D=x[r(A)],S=String(D);if(!L[S]){L[S]=1;var C=typeof D;"boolean"===C?T++:(m?i(D)!==_:"number"===C)?k++:"string"===C&&T++}}return T>2*k}(c,l)?"category":function(x,m){for(var w=x.length,b=0;b<w;b++)if(o(x[b],m))return!0;return!1}(c,l)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../registry"),_=y("../../lib"),t=y("../array_container_defaults"),e=y("./layout_attributes"),i=y("./tick_value_defaults"),r=y("./tick_mark_defaults"),o=y("./tick_label_defaults"),n=y("./prefix_suffix_defaults"),p=y("./category_order_defaults"),s=y("./line_grid_defaults"),a=y("./set_convert"),c=y("./constants").WEEKDAY_PATTERN,u=y("./constants").HOUR_PATTERN;function h(l,x,m){function w(S,C){return _.coerce(l,x,e.rangebreaks,S,C)}if(w("enabled")){var b=w("bounds");if(b&&b.length>=2){var k,T,L="";if(2===b.length)for(k=0;k<2;k++)if(T=f(b[k])){L=c;break}var A=w("pattern",L);if(A===c)for(k=0;k<2;k++)(T=f(b[k]))&&(x.bounds[k]=b[k]=T-1);if(A)for(k=0;k<2;k++)switch(T=b[k],A){case c:if(!d(T)||(T=+T)!==Math.floor(T)||T<0||T>=7)return void(x.enabled=!1);x.bounds[k]=b[k]=T;break;case u:if(!d(T)||(T=+T)<0||T>24)return void(x.enabled=!1);x.bounds[k]=b[k]=T}if(!1===m.autorange){var I=m.range;if(I[0]<I[1]){if(b[0]<I[0]&&b[1]>I[1])return void(x.enabled=!1)}else if(b[0]>I[0]&&b[1]<I[1])return void(x.enabled=!1)}}else{var D=w("values");if(!D||!D.length)return void(x.enabled=!1);w("dvalue")}}}$.exports=function(l,x,m,w,b){var k,T=w.letter,L=w.font||{},A=w.splomStash||{},I=m("visible",!w.visibleDflt),S=x.type||(x._template||{}).type||"-";"date"===S&&(g.getComponentMethod("calendars","handleDefaults")(l,x,"calendar",w.calendar),w.noTicklabelmode||(k=m("ticklabelmode")));var C="";w.noTicklabelposition&&"multicategory"!==S||(C=_.coerce(l,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===k?["outside","inside"]:"x"===T?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),w.noTicklabeloverflow||m("ticklabeloverflow",-1!==C.indexOf("inside")?"hide past domain":"category"===S||"multicategory"===S?"allow":"hide past div"),a(x,b);var R=!x.isValidRange(l.range);R&&w.reverseDflt&&(R="reversed"),!m("autorange",R)||"linear"!==S&&"-"!==S||m("rangemode"),m("range"),x.cleanRange(),p(l,x,m,w),"category"===S||w.noHover||m("hoverformat");var F=m("color"),H=F!==e.color.dflt?F:L.color,U=A.label||b._dfltTitle[T];if(n(l,x,m,S,w),!I)return x;m("title.text",U),_.coerceFont(m,"title.font",{family:L.family,size:_.bigFont(L.size),color:H}),i(l,x,m,S),o(l,x,m,S,w),r(l,x,m,w),s(l,x,m,{dfltColor:F,bgColor:w.bgColor,showGrid:w.showGrid,attributes:e}),(x.showline||x.ticks)&&m("mirror"),w.automargin&&m("automargin");var X,Z="multicategory"===S;if(w.noTickson||"category"!==S&&!Z||!x.ticks&&!x.showgrid||(Z&&(X="boundaries"),"boundaries"===m("tickson",X)&&delete x.ticklabelposition),Z&&m("showdividers")&&(m("dividercolor"),m("dividerwidth")),"date"===S)if(t(l,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:h}),x.rangebreaks.length){for(var Y=0;Y<x.rangebreaks.length;Y++)if(x.rangebreaks[Y].pattern===c){x._hasDayOfWeekBreaks=!0;break}if(a(x,b),b._has("scattergl")||b._has("splom"))for(var W=0;W<w.data.length;W++){var te=w.data[W];"scattergl"!==te.type&&"splom"!==te.type||(te.visible=!1,_.warn(te.type+" traces do not work on axes with rangebreaks. Setting trace "+te.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function f(l){if("string"==typeof l)return v[l.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(y,$,ee){"use strict";var d=y("../../constants/docs"),g=d.FORMAT_LINK,_=d.DATE_FORMAT_LINK;function t(i,r){return["Sets the "+i+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+g+"."].join(" ")}function e(i,r){return t(i,r)+[" And for dates see: "+_+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function(i,r){return{valType:"string",dflt:"",editType:"none",description:(r?t:e)("hover text",i)+["By default the values are formatted using "+(r?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:t,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("./constants");function _(t,e){if(e&&e.length)for(var i=0;i<e.length;i++)if(e[i][t])return!0;return!1}ee.id2name=function(t){if("string"==typeof t&&t.match(g.AX_ID_PATTERN)){var e=t.split(" ")[0].substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},ee.name2id=function(t){if(t.match(g.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},ee.cleanId=function(t,e,i){var r=/( domain)$/.test(t);if("string"==typeof t&&t.match(g.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)&&(!r||i)){var o=t.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===o&&(o=""),t.charAt(0)+o+(r&&i?" domain":"")}},ee.list=function(t,e,i){var r=t._fullLayout;if(!r)return[];var o,n=ee.listIds(t,e),p=new Array(n.length);for(o=0;o<n.length;o++){var s=n[o];p[o]=r[s.charAt(0)+"axis"+s.substr(1)]}if(!i){var a=r._subplots.gl3d||[];for(o=0;o<a.length;o++){var c=r[a[o]];e?p.push(c[e+"axis"]):p.push(c.xaxis,c.yaxis,c.zaxis)}}return p},ee.listIds=function(t,e){var i=t._fullLayout;if(!i)return[];var r=i._subplots;return e?r[e+"axis"]:r.xaxis.concat(r.yaxis)},ee.getFromId=function(t,e,i){var r=t._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===i?e=e.replace(/y[0-9]*/,""):"y"===i&&(e=e.replace(/x[0-9]*/,"")),r[ee.id2name(e)]},ee.getFromTrace=function(t,e,i){var r=t._fullLayout,o=null;if(d.traceIs(e,"gl3d")){var n=e.scene;"scene"===n.substr(0,5)&&(o=r[n][i+"axis"])}else o=ee.getFromId(t,e[i+"axis"]||i);return o},ee.idSort=function(t,e){var i=t.charAt(0),r=e.charAt(0);return i!==r?i>r?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},ee.ref2id=function(t){return!!/^[xyz]/.test(t)&&t.split(" ")[0]},ee.isLinked=function(t,e){return _(e,t._axisMatchGroups)||_(e,t._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t){if("category"===g.type){var e,i=d.categoryarray,r=Array.isArray(i)&&i.length>0;r&&(e="array");var o,n=_("categoryorder",e);"array"===n&&(o=_("categoryarray")),r||"array"!==n||(n=g.categoryorder="trace"),"trace"===n?g._initialCategories=[]:"array"===n?g._initialCategories=o.slice():(o=function(p,s){var a,c,u,h=s.dataAttr||p._id.charAt(0),v={};if(s.axData)a=s.axData;else for(a=[],c=0;c<s.data.length;c++){var f=s.data[c];f[h+"axis"]===p._id&&a.push(f)}for(c=0;c<a.length;c++){var l=a[c][h];for(u=0;u<l.length;u++){var x=l[u];null!=x&&(v[x]=1)}}return Object.keys(v)}(g,t).sort(),"category ascending"===n?g._initialCategories=o:"category descending"===n&&(g._initialCategories=o.reverse()))}}},{}],560:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../constants/numerical"),t=_.ONEDAY,e=_.ONEWEEK;ee.dtick=function(i,r){var o="log"===r,n="date"===r,p="category"===r,s=n?t:1;if(!i)return s;if(d(i))return(i=Number(i))<=0?s:p?Math.max(1,Math.round(i)):n?Math.max(.1,i):i;if("string"!=typeof i||!n&&!o)return s;var a=i.charAt(0),c=i.substr(1);return(c=d(c)?Number(c):0)<=0||!(n&&"M"===a&&c===Math.round(c)||o&&"L"===a||o&&"D"===a&&(1===c||2===c))?s:i},ee.tick0=function(i,r,o,n){return"date"===r?g.cleanDate(i,g.dateTick0(o,n%e==0?1:0)):"D1"!==n&&"D2"!==n?d(i)?Number(i):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(y,$,ee){"use strict";var d=y("../../lib/regex").counter;$.exports={idRegex:{x:d("x","( domain)?"),y:d("y","( domain)?")},attrRegex:d("[xy]axis"),xAxisMatch:d("xaxis"),yAxisMatch:d("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./autorange"),_=y("./axis_ids").id2name,t=y("./layout_attributes"),e=y("./scale_zoom"),i=y("./set_convert"),r=y("../../constants/numerical").ALMOST_EQUAL,o=y("../../constants/alignment").FROM_BL;function n(v,f,l){var x=l.axIds,m=l.layoutOut,w=l.hasImage,b=m._axisConstraintGroups,k=m._axisMatchGroups,T=f._id,L=T.charAt(0),A=((m._splomAxes||{})[L]||{})[T]||{},I=f._id,D="x"===I.charAt(0);function S(Q,j){return d.coerce(v,f,t,Q,j)}f._matchGroup=null,f._constraintGroup=null,S("constrain",w?"domain":"range"),d.coerce(v,f,{constraintoward:{valType:"enumerated",values:D?["left","center","right"]:["bottom","middle","top"],dflt:D?"center":"middle"}},"constraintoward");var C,R,F=f.type,H=[];for(C=0;C<x.length;C++)(R=x[C])!==I&&m[_(R)].type===F&&H.push(R);var U=s(b,I);if(U){var X=[];for(C=0;C<H.length;C++)U[R=H[C]]||X.push(R);H=X}var Z,Y,W=H.length;W&&(v.matches||A.matches)&&(Z=d.coerce(v,f,{matches:{valType:"enumerated",values:H,dflt:-1!==H.indexOf(A.matches)?A.matches:void 0}},"matches"));var te=w&&!D?f.anchor:void 0;if(W&&!Z&&(v.scaleanchor||te)&&(Y=d.coerce(v,f,{scaleanchor:{valType:"enumerated",values:H}},"scaleanchor",te)),Z){f._matchGroup=a(k,I,Z,1);var z=m[_(Z)],N=p(m,f)/p(m,z);D!==("x"===Z.charAt(0))&&(N=(D?"x":"y")+N),a(b,I,Z,N)}else v.matches&&-1!==x.indexOf(v.matches)&&d.warn("ignored "+f._name+'.matches: "'+v.matches+'" to avoid an infinite loop');if(Y){var V=S("scaleratio");V||(V=f.scaleratio=1),a(b,I,Y,V)}else v.scaleanchor&&-1!==x.indexOf(v.scaleanchor)&&d.warn("ignored "+f._name+'.scaleanchor: "'+v.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function p(v,f){var l=f.domain;return l||(l=v[_(f.overlaying)].domain),l[1]-l[0]}function s(v,f){for(var l=0;l<v.length;l++)if(v[l][f])return v[l];return null}function a(v,f,l,x){var m,w,b,k,T,L=s(v,f);null===L?((L={})[f]=1,T=v.length,v.push(L)):T=v.indexOf(L);var A=Object.keys(L);for(m=0;m<v.length;m++)if(b=v[m],m!==T&&b[l]){var I=b[l];for(w=0;w<A.length;w++)b[k=A[w]]=c(I,c(x,L[k]));return void v.splice(T,1)}if(1!==x)for(w=0;w<A.length;w++){var D=A[w];L[D]=c(x,L[D])}L[l]=1}function c(v,f){var l,x,m="",w="";"string"==typeof v&&(l=(m=v.match(/^[xy]*/)[0]).length,v=+v.substr(l)),"string"==typeof f&&(x=(w=f.match(/^[xy]*/)[0]).length,f=+f.substr(x));var b=v*f;return l||x?l&&x&&m.charAt(0)!==w.charAt(0)?l===x?b:(l>x?m.substr(x):w.substr(l))+b:m+w+v*f:b}function u(v,f){for(var l=f._size,x=l.h/l.w,m={},w=Object.keys(v),b=0;b<w.length;b++){var k=w[b],T=v[k];if("string"==typeof T){var L=T.match(/^[xy]*/)[0],A=L.length;T=+T.substr(A);for(var I="y"===L.charAt(0)?x:1/x,D=0;D<A;D++)T*=I}m[k]=T}return m}function h(v,f){var l=v._inputDomain,m=l[0]+(l[1]-l[0])*o[v.constraintoward];v.domain=v._input.domain=[m+(l[0]-m)/f,m+(l[1]-m)/f],v.setScale()}ee.handleDefaults=function(v,f,l){var x,m,w,b,k,T,L,A,I=l.axIds,D=l.axHasImage,S=f._axisConstraintGroups=[],C=f._axisMatchGroups=[];for(x=0;x<I.length;x++)n(k=v[b=_(I[x])],T=f[b],{axIds:I,layoutOut:f,hasImage:D[b]});function R(z,N){for(x=0;x<z.length;x++)for(w in m=z[x])f[_(w)][N]=m}for(R(C,"_matchGroup"),x=0;x<S.length;x++)for(w in m=S[x])if((T=f[_(w)]).fixedrange){for(var F in m){var H=_(F);!1===(v[H]||{}).fixedrange&&d.warn("fixedrange was specified as false for axis "+H+" but was overridden because another axis in its constraint group has fixedrange true"),f[H].fixedrange=!0}break}for(x=0;x<S.length;){for(w in m=S[x]){(T=f[_(w)])._matchGroup&&Object.keys(T._matchGroup).length===Object.keys(m).length&&(S.splice(x,1),x--);break}x++}R(S,"_constraintGroup");var U=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],X=!1,Z=!1;function Y(){A=T[L],"rangebreaks"===L&&(Z=T._hasDayOfWeekBreaks)}for(x=0;x<C.length;x++){m=C[x];for(var W=0;W<U.length;W++){var te;for(w in L=U[W],A=null,m)if(k=v[b=_(w)],L in(T=f[b])){if(!T.matches&&(te=T,L in k)){Y();break}null===A&&L in k&&Y()}if("range"===L&&A&&(X=!0),"autorange"===L&&null===A&&X&&(A=!1),null===A&&L in te&&(A=te[L]),null!==A)for(w in m)(T=f[_(w)])[L]="range"===L?A.slice():A,"rangebreaks"===L&&(T._hasDayOfWeekBreaks=Z,i(T,f))}}},ee.enforce=function(v){var f,l,x,m,w,b,k,T,L=v._fullLayout,A=L._axisConstraintGroups||[];for(f=0;f<A.length;f++){x=u(A[f],L);var I=Object.keys(x),D=1/0,S=0,C=1/0,R={},F={},H=!1;for(l=0;l<I.length;l++)F[m=I[l]]=w=L[_(m)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),R[m]=b=Math.abs(w._m)/x[m],D=Math.min(D,b),"domain"!==w.constrain&&w._constraintShrinkable||(C=Math.min(C,b)),delete w._constraintShrinkable,S=Math.max(S,b),"domain"===w.constrain&&(H=!0);if(!(D>r*S)||H)for(l=0;l<I.length;l++)if(b=R[m=I[l]],k=(w=F[m]).constrain,b!==C||"domain"===k)if(T=b/C,"range"===k)e(w,T);else{var U=w._inputDomain,X=(w.domain[1]-w.domain[0])/(U[1]-U[0]),Z=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if((T/=X)*Z<1){w.domain=w._input.domain=U.slice(),e(w,T);continue}if(Z<1&&(w.range=w._input.range=w._inputRange.slice(),T*=Z),w.autorange){var Y=w.r2l(w.range[0]),W=w.r2l(w.range[1]),te=(Y+W)/2,z=te,N=te,V=Math.abs(W-te),Q=te-V*T*1.0001,j=te+V*T*1.0001,J=g.makePadFn(L,w,0),K=g.makePadFn(L,w,1);h(w,T);var re,ie,ce=Math.abs(w._m),se=g.concatExtremes(v,w),de=se.min,ue=se.max;for(ie=0;ie<de.length;ie++)(re=de[ie].val-J(de[ie])/ce)>Q&&re<z&&(z=re);for(ie=0;ie<ue.length;ie++)(re=ue[ie].val+K(ue[ie])/ce)<j&&re>N&&(N=re);T/=(N-z)/(2*V),z=w.l2r(z),N=w.l2r(N),w.range=w._input.range=Y<W?[z,N]:[N,z]}h(w,T)}}},ee.getAxisGroup=function(v,f){for(var l=v._axisMatchGroups,x=0;x<l.length;x++)if(l[x][f])return"g"+x;return f},ee.clean=function(v,f){if(f._inputDomain){for(var l=!1,x=f._id,m=v._fullLayout._axisConstraintGroups,w=0;w<m.length;w++)if(m[w][x]){l=!0;break}l&&"domain"===f.constrain||(f._input.domain=f.domain=f._inputDomain,delete f._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=g.numberFormat,t=y("tinycolor2"),e=y("has-passive-events"),i=y("../../registry"),r=g.strTranslate,o=y("../../lib/svg_text_utils"),n=y("../../components/color"),p=y("../../components/drawing"),s=y("../../components/fx"),a=y("./axes"),c=y("../../lib/setcursor"),u=y("../../components/dragelement"),h=y("../../components/dragelement/helpers"),v=h.selectingOrDrawing,f=h.freeMode,l=y("../../constants/alignment").FROM_TL,x=y("../../lib/clear_gl_canvases"),m=y("../../plot_api/subroutines").redrawReglTraces,w=y("../plots"),b=y("./axis_ids").getFromId,k=y("./select").prepSelect,T=y("./select").clearSelect,L=y("./select").selectOnClick,A=y("./scale_zoom"),I=y("./constants"),D=I.MINDRAG,S=I.MINZOOM,C=!0;function R(re,ie,ce,se){var de=g.ensureSingle(re.draglayer,ie,ce,function(ue){ue.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",re.id)});return de.call(c,se),de.node()}function F(re,ie,ce,se,de,ue,ge){var be=R(re,"rect",ie,ce);return d.select(be).call(p.setRect,se,de,ue,ge),be}function H(re,ie){for(var ce=0;ce<re.length;ce++)if(!re[ce].fixedrange)return ie;return""}function U(re,ie,ce,se,de){for(var ue=0;ue<re.length;ue++){var ge=re[ue];if(!ge.fixedrange)if(ge.rangebreaks){var be="y"===ge._id.charAt(0),we=be?1-ce:ce;se[ge._name+".range[0]"]=ge.l2r(ge.p2l((be?1-ie:ie)*ge._length)),se[ge._name+".range[1]"]=ge.l2r(ge.p2l(we*ge._length))}else{var Le=ge._rl[0],fe=ge._rl[1]-Le;se[ge._name+".range[0]"]=ge.l2r(Le+fe*ie),se[ge._name+".range[1]"]=ge.l2r(Le+fe*ce)}}if(de&&de.length){var ve=(ie+(1-ce))/2;U(de,ve,1-ve,se,[])}}function X(re,ie){for(var ce=0;ce<re.length;ce++){var se=re[ce];if(!se.fixedrange)if(se.rangebreaks){var de=se._length,ue=(se.p2l(0+ie)-se.p2l(0)+(se.p2l(de+ie)-se.p2l(de)))/2;se.range=[se.l2r(se._rl[0]-ue),se.l2r(se._rl[1]-ue)]}else se.range=[se.l2r(se._rl[0]-ie/se._m),se.l2r(se._rl[1]-ie/se._m)]}}function Z(re){return 1-(re>=0?Math.min(re,.9):1/(1/Math.max(re,-.3)+3.222))}function Y(re,ie,ce,se,de){return re.append("path").attr("class","zoombox").style({fill:ie>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",r(ce,se)).attr("d",de+"Z")}function W(re,ie,ce){return re.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",r(ie,ce)).attr("d","M0,0Z")}function te(re,ie,ce,se,de,ue){re.attr("d",se+"M"+ce.l+","+ce.t+"v"+ce.h+"h"+ce.w+"v-"+ce.h+"h-"+ce.w+"Z"),z(re,ie,de,ue)}function z(re,ie,ce,se){ce||(re.transition().style("fill",se>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ie.transition().style("opacity",1).duration(200))}function N(re){d.select(re).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function V(re){C&&re.data&&re._context.showTips&&(g.notifier(g._(re,"Double-click to zoom back out"),"long"),C=!1)}function Q(re){var ie=Math.floor(Math.min(re.b-re.t,re.r-re.l,S)/2);return"M"+(re.l-3.5)+","+(re.t-.5+ie)+"h3v"+-ie+"h"+ie+"v-3h-"+(ie+3)+"ZM"+(re.r+3.5)+","+(re.t-.5+ie)+"h-3v"+-ie+"h"+-ie+"v-3h"+(ie+3)+"ZM"+(re.r+3.5)+","+(re.b+.5-ie)+"h-3v"+ie+"h"+-ie+"v3h"+(ie+3)+"ZM"+(re.l-3.5)+","+(re.b+.5-ie)+"h3v"+ie+"h"+ie+"v3h-"+(ie+3)+"Z"}function j(re,ie,ce,se,de){for(var ue,ge,be,Te,we=!1,Le={},fe={},ve=(de||{}).xaHash,Me=(de||{}).yaHash,ke=0;ke<ie.length;ke++){var Ce=ie[ke];for(ue in ce)if(Ce[ue]){for(be in Ce)de&&(ve[be]||Me[be])||("x"===be.charAt(0)?ce:se)[be]||(Le[be]=ue);for(ge in se)de&&(ve[ge]||Me[ge])||!Ce[ge]||(we=!0)}for(ge in se)if(Ce[ge])for(Te in Ce)de&&(ve[Te]||Me[Te])||("x"===Te.charAt(0)?ce:se)[Te]||(fe[Te]=ge)}we&&(g.extendFlat(Le,fe),fe={});var Pe={},Fe=[];for(be in Le){var qe=b(re,be);Fe.push(qe),Pe[qe._id]=qe}var rt={},ze=[];for(Te in fe){var He=b(re,Te);ze.push(He),rt[He._id]=He}return{xaHash:Pe,yaHash:rt,xaxes:Fe,yaxes:ze,xLinks:Le,yLinks:fe,isSubplotConstrained:we}}function J(re,ie){if(e){var ce=void 0!==re.onwheel?"wheel":"mousewheel";re._onwheel&&re.removeEventListener(ce,re._onwheel),re._onwheel=ie,re.addEventListener(ce,ie,{passive:!1})}else void 0!==re.onwheel?re.onwheel=ie:void 0!==re.onmousewheel?re.onmousewheel=ie:re.isAddedWheelEvent||(re.isAddedWheelEvent=!0,re.addEventListener("wheel",ie,{passive:!1}))}function K(re){var ie=[];for(var ce in re)ie.push(re[ce]);return ie}$.exports={makeDragBox:function(re,ie,ce,se,de,ue,ge,be){var Te,we,Le,fe,ve,Me,ke,Ce,Pe,Fe,qe,rt,ze,He,Xe,Je,at,pt,xt,Ft,Dt,ot,it,Et=re._fullLayout._zoomlayer,Xt=ge+be==="nsew",nr=1===(ge+be).length;function Ue(){if(Pe=(Te=ie.xaxis)._length,Fe=(we=ie.yaxis)._length,ke=Te._offset,Ce=we._offset,(Le={})[Te._id]=Te,(fe={})[we._id]=we,ge&&be)for(var dr=ie.overlays,pr=0;pr<dr.length;pr++){var br=dr[pr].xaxis;Le[br._id]=br;var Nr=dr[pr].yaxis;fe[Nr._id]=Nr}ve=K(Le),Me=K(fe),ze=H(ve,be),He=H(Me,ge),Xe=!He&&!ze,rt=j(re,re._fullLayout._axisMatchGroups,Le,fe);var kr=(qe=j(re,re._fullLayout._axisConstraintGroups,Le,fe,rt)).isSubplotConstrained||rt.isSubplotConstrained;Je=be||kr,at=ge||kr;var Hr=re._fullLayout;pt=Hr._has("scattergl"),xt=Hr._has("splom"),Ft=Hr._has("svg")}Ue();var dr,We=(dr=He+ze)?"nsew"===dr?Xt?"":"pan"===re._fullLayout.dragmode?"move":"crosshair":dr.toLowerCase()+"-resize":"pointer",Be=F(ie,ge+be+"drag",We,ce,se,de,ue);if(Xe&&!Xt)return Be.onmousedown=null,Be.style.pointerEvents="none",Be;var Qe,Ae,De,Oe,Ie,et,ct,vt,ft,It,ut={element:Be,gd:re,plotinfo:ie};function Ot(){ut.plotinfo.selection=!1,T(re)}function Rt(dr,pr){var In,cn,jr,Lr,Xr,br=ut.gd;if(br._fullLayout._activeShapeIndex>=0)br._fullLayout._deactivateShape(br);else{var Nr=br._fullLayout.clickmode;if(N(br),2!==dr||nr||function(){if(!re._transitioningWithDuration){var dr=re._context.doubleClick,pr=[];ze&&(pr=pr.concat(ve)),He&&(pr=pr.concat(Me)),rt.xaxes&&(pr=pr.concat(rt.xaxes)),rt.yaxes&&(pr=pr.concat(rt.yaxes));var br,Nr,kr,Hr={};if("reset+autosize"===dr)for(dr="autosize",Nr=0;Nr<pr.length;Nr++)if((br=pr[Nr])._rangeInitial&&(br.range[0]!==br._rangeInitial[0]||br.range[1]!==br._rangeInitial[1])||!br._rangeInitial&&!br.autorange){dr="reset";break}if("autosize"===dr)for(Nr=0;Nr<pr.length;Nr++)(br=pr[Nr]).fixedrange||(Hr[br._name+".autorange"]=!0);else if("reset"===dr)for((ze||qe.isSubplotConstrained)&&(pr=pr.concat(qe.xaxes)),He&&!qe.isSubplotConstrained&&(pr=pr.concat(qe.yaxes)),qe.isSubplotConstrained&&(ze?He||(pr=pr.concat(Me)):pr=pr.concat(ve)),Nr=0;Nr<pr.length;Nr++)(br=pr[Nr]).fixedrange||(br._rangeInitial?(Hr[br._name+".range[0]"]=(kr=br._rangeInitial)[0],Hr[br._name+".range[1]"]=kr[1]):Hr[br._name+".autorange"]=!0);re.emit("plotly_doubleclick",null),i.call("_guiRelayout",re,Hr)}}(),Xt)Nr.indexOf("select")>-1&&L(pr,br,ve,Me,ie.id,ut),Nr.indexOf("event")>-1&&s.click(br,pr,ie.id);else if(1===dr&&nr){var kr=ge?we:Te,Hr="s"===ge||"w"===be?0:1,an=kr._name+".range["+Hr+"]",fn=(Lr=(In=kr).range[cn=Hr],Xr=Math.abs(Lr-In.range[1-cn]),"date"===In.type?Lr:"log"===In.type?(jr=Math.ceil(Math.max(0,-Math.log(Xr)/Math.LN10))+3,_("."+jr+"g")(Math.pow(10,Lr))):(jr=Math.floor(Math.log(Math.abs(Lr))/Math.LN10)-Math.floor(Math.log(Xr)/Math.LN10)+4,_("."+String(jr)+"g")(Lr))),zn="left",Nn="middle";if(kr.fixedrange)return;ge?(Nn="n"===ge?"top":"bottom","right"===kr.side&&(zn="right")):"e"===be&&(zn="right"),br._context.showAxisRangeEntryBoxes&&d.select(Be).call(o.makeEditable,{gd:br,immediate:!0,background:br._fullLayout.paper_bgcolor,text:String(fn),fill:kr.tickfont?kr.tickfont.color:"#444",horizontalAlign:zn,verticalAlign:Nn}).on("edit",function(In){var cn=kr.d2r(In);void 0!==cn&&i.call("_guiRelayout",br,an,cn)})}}}function $e(dr,pr){if(re._transitioningWithDuration)return!1;var Nn,In,br=Math.max(0,Math.min(Pe,ot*dr+Qe)),Nr=Math.max(0,Math.min(Fe,it*pr+Ae)),kr=Math.abs(br-Qe),Hr=Math.abs(Nr-Ae);function an(){ct="",De.r=De.l,De.t=De.b,ft.attr("d","M0,0Z")}if(De.l=Math.min(Qe,br),De.r=Math.max(Qe,br),De.t=Math.min(Ae,Nr),De.b=Math.max(Ae,Nr),qe.isSubplotConstrained)kr>S||Hr>S?(ct="xy",kr/Pe>Hr/Fe?(Hr=kr*Fe/Pe,Ae>Nr?De.t=Ae-Hr:De.b=Ae+Hr):(kr=Hr*Pe/Fe,Qe>br?De.l=Qe-kr:De.r=Qe+kr),ft.attr("d",Q(De))):an();else if(rt.isSubplotConstrained)if(kr>S||Hr>S){ct="xy";var fn=Math.min(De.l/Pe,(Fe-De.b)/Fe),zn=Math.max(De.r/Pe,(Fe-De.t)/Fe);De.l=fn*Pe,De.r=zn*Pe,De.b=(1-fn)*Fe,De.t=(1-zn)*Fe,ft.attr("d",Q(De))}else an();else!He||Hr<Math.min(Math.max(.6*kr,D),S)?kr<D||!ze?an():(De.t=0,De.b=Fe,ct="x",ft.attr("d","M"+((Nn=De).l-.5)+","+((In=Ae)-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(Nn.r+.5)+","+(In-S-.5)+"h3v"+(2*S+1)+"h-3Z")):!ze||kr<Math.min(.6*Hr,S)?(De.l=0,De.r=Pe,ct="y",ft.attr("d",function(Nn,In){return"M"+(In-S-.5)+","+(Nn.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(In-S-.5)+","+(Nn.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(De,Qe))):(ct="xy",ft.attr("d",Q(De)));De.w=De.r-De.l,De.h=De.b-De.t,ct&&(It=!0),re._dragged=It,te(vt,ft,De,Ie,et,Oe),yt(),re.emit("plotly_relayouting",Dt),et=!0}function yt(){Dt={},"xy"!==ct&&"x"!==ct||(U(ve,De.l/Pe,De.r/Pe,Dt,qe.xaxes),Nt("x",Dt)),"xy"!==ct&&"y"!==ct||(U(Me,(Fe-De.b)/Fe,(Fe-De.t)/Fe,Dt,qe.yaxes),Nt("y",Dt))}function Bt(){yt(),N(re),Wt(),V(re)}ut.prepFn=function(dr,pr,br){var Nr=ut.dragmode,kr=re._fullLayout.dragmode;kr!==Nr&&(ut.dragmode=kr),Ue(),ot=re._fullLayout._invScaleX,it=re._fullLayout._invScaleY,Xe||(Xt?dr.shiftKey?"pan"===kr?kr="zoom":v(kr)||(kr="pan"):dr.ctrlKey&&(kr="pan"):kr="pan"),ut.minDrag=f(kr)?1:void 0,v(kr)?(ut.xaxes=ve,ut.yaxes=Me,k(dr,pr,br,ut,kr)):(ut.clickFn=Rt,v(Nr)&&Ot(),Xe||("zoom"===kr?(ut.moveFn=$e,ut.doneFn=Bt,ut.minDrag=1,function(Hr,an,fn){var zn=Be.getBoundingClientRect();Qe=an-zn.left,Ae=fn-zn.top,re._fullLayout._calcInverseTransform(re);var Nn=g.apply3DTransform(re._fullLayout._invTransform)(Qe,Ae);De={l:Qe=Nn[0],r:Qe,w:0,t:Ae=Nn[1],b:Ae,h:0},Oe=re._hmpixcount?re._hmlumcount/re._hmpixcount:t(re._fullLayout.plot_bgcolor).getLuminance(),et=!1,ct="xy",It=!1,vt=Y(Et,Oe,ke,Ce,Ie="M0,0H"+Pe+"V"+Fe+"H0V0"),ft=W(Et,ke,Ce)}(0,pr,br)):"pan"===kr&&(ut.moveFn=Mt,ut.doneFn=Wt))),re._fullLayout._redrag=function(){var Hr=re._dragdata;Hr&&Hr.element===Be&&(v(re._fullLayout.dragmode)||(Ue(),er([0,0,Pe,Fe]),ut.moveFn(Hr.dx,Hr.dy)))}},u.init(ut);var Ut=[0,0,Pe,Fe],Qt=null,Re=I.REDRAWDELAY,ht=ie.mainplot?re._fullLayout._plots[ie.mainplot]:ie;function Mt(dr,pr){if(dr*=ot,pr*=it,!re._transitioningWithDuration){if(re._fullLayout._replotting=!0,"ew"===ze||"ns"===He){var br=ze?-dr:0,Nr=He?-pr:0;if(rt.isSubplotConstrained){if(ze&&He){var kr=(dr/Pe-pr/Fe)/2;br=-(dr=kr*Pe),Nr=-(pr=-kr*Fe)}He?br=-Nr*Pe/Fe:Nr=-br*Fe/Pe}return ze&&(X(ve,dr),Nt("x")),He&&(X(Me,pr),Nt("y")),er([br,Nr,Pe,Fe]),Zt(),void re.emit("plotly_relayouting",Dt)}var Hr,an,fn="w"===ze==("n"===He)?1:-1;if(ze&&He&&(qe.isSubplotConstrained||rt.isSubplotConstrained)){var zn=(dr/Pe+fn*pr/Fe)/2;dr=zn*Pe,pr=fn*zn*Fe}if("w"===ze?dr=jr(ve,0,dr):"e"===ze?dr=jr(ve,1,-dr):ze||(dr=0),"n"===He?pr=jr(Me,1,pr):"s"===He?pr=jr(Me,0,-pr):He||(pr=0),Hr="w"===ze?dr:0,an="n"===He?pr:0,qe.isSubplotConstrained&&!rt.isSubplotConstrained||rt.isSubplotConstrained&&ze&&He&&fn>0){var Nn;if(rt.isSubplotConstrained||!ze&&1===He.length){for(Nn=0;Nn<ve.length;Nn++)ve[Nn].range=ve[Nn]._r.slice(),A(ve[Nn],1-pr/Fe);Hr=(dr=pr*Pe/Fe)/2}if(rt.isSubplotConstrained||!He&&1===ze.length){for(Nn=0;Nn<Me.length;Nn++)Me[Nn].range=Me[Nn]._r.slice(),A(Me[Nn],1-dr/Pe);an=(pr=dr*Fe/Pe)/2}}rt.isSubplotConstrained&&He||Nt("x"),rt.isSubplotConstrained&&ze||Nt("y");var In=Pe-dr,cn=Fe-pr;!rt.isSubplotConstrained||ze&&He||(ze?(an=Hr?0:dr*Fe/Pe,cn=In*Fe/Pe):(Hr=an?0:pr*Pe/Fe,In=cn*Pe/Fe)),er([Hr,an,In,cn]),Zt(),re.emit("plotly_relayouting",Dt)}function jr(Lr,Xr,Un){for(var qr,On,Tn=1-Xr,rn=0;rn<Lr.length;rn++){var Vn=Lr[rn];if(!Vn.fixedrange){qr=Vn,On=Vn._rl[Tn]+(Vn._rl[Xr]-Vn._rl[Tn])/Z(Un/Vn._length);var ar=Vn.l2r(On);!1!==ar&&void 0!==ar&&(Vn.range[Xr]=ar)}}return qr._length*(qr._rl[Xr]-On)/(qr._rl[Xr]-qr._rl[Tn])}}function Nt(dr,pr){for(var br=rt.isSubplotConstrained?{x:Me,y:ve}[dr]:rt[dr+"axes"],Nr=rt.isSubplotConstrained?{x:ve,y:Me}[dr]:[],kr=0;kr<br.length;kr++){var Hr=br[kr],an=Hr._id,fn=rt.xLinks[an]||rt.yLinks[an],zn=Nr[0]||Le[fn]||fe[fn];zn&&(pr?(pr[Hr._name+".range[0]"]=pr[zn._name+".range[0]"],pr[Hr._name+".range[1]"]=pr[zn._name+".range[1]"]):Hr.range=zn.range.slice())}}function Zt(){var dr,pr=[];function br(Hr){for(dr=0;dr<Hr.length;dr++)Hr[dr].fixedrange||pr.push(Hr[dr]._id)}for(Je&&(br(ve),br(qe.xaxes),br(rt.xaxes)),at&&(br(Me),br(qe.yaxes),br(rt.yaxes)),Dt={},dr=0;dr<pr.length;dr++){var kr=b(re,pr[dr]);a.drawOne(re,kr,{skipTitle:!0}),Dt[kr._name+".range[0]"]=kr.range[0],Dt[kr._name+".range[1]"]=kr.range[1]}a.redrawComponents(re,pr)}function Wt(){er([0,0,Pe,Fe]),g.syncOrAsync([w.previousPromises,function(){re._fullLayout._replotting=!1,i.call("_guiRelayout",re,Dt)}],re)}function er(dr){var pr,br,Nr,kr,Hr=re._fullLayout,an=Hr._plots,fn=Hr._subplots.cartesian;if(xt&&i.subplotsRegistry.splom.drag(re),pt)for(pr=0;pr<fn.length;pr++)if(Nr=(br=an[fn[pr]]).xaxis,kr=br.yaxis,br._scene){var zn=g.simpleMap(Nr.range,Nr.r2l),Nn=g.simpleMap(kr.range,kr.r2l);br._scene.update({range:[zn[0],Nn[0],zn[1],Nn[1]]})}if((xt||pt)&&(x(re),m(re)),Ft){var In=dr[2]/Te._length,cn=dr[3]/we._length;for(pr=0;pr<fn.length;pr++){Nr=(br=an[fn[pr]]).xaxis,kr=br.yaxis;var jr,Lr,Xr,Un,On=(at||rt.isSubplotConstrained)&&!kr.fixedrange&&fe[kr._id];if((Je||rt.isSubplotConstrained)&&!Nr.fixedrange&&Le[Nr._id]?(jr=In,Xr=be||rt.isSubplotConstrained?dr[0]:xr(Nr,jr)):rt.xaHash[Nr._id]?(jr=In,Xr=dr[0]*Nr._length/Te._length):rt.yaHash[Nr._id]?(jr=cn,Xr="ns"===He?-dr[1]*Nr._length/we._length:xr(Nr,jr,{n:"top",s:"bottom"}[He])):Xr=_r(Nr,jr=cr(Nr,In,cn)),On?(Lr=cn,Un=ge||rt.isSubplotConstrained?dr[1]:xr(kr,Lr)):rt.yaHash[kr._id]?(Lr=cn,Un=dr[1]*kr._length/we._length):rt.xaHash[kr._id]?(Lr=In,Un="ew"===ze?-dr[0]*kr._length/Te._length:xr(kr,Lr,{e:"right",w:"left"}[ze])):Un=_r(kr,Lr=cr(kr,In,cn)),jr||Lr){jr||(jr=1),Lr||(Lr=1);var Tn=Nr._offset-Xr/jr,rn=kr._offset-Un/Lr;br.clipRect.call(p.setTranslate,Xr,Un).call(p.setScale,jr,Lr),br.plot.call(p.setTranslate,Tn,rn).call(p.setScale,1/jr,1/Lr),jr===br.xScaleFactor&&Lr===br.yScaleFactor||(p.setPointGroupScale(br.zoomScalePts,jr,Lr),p.setTextPointsScale(br.zoomScaleTxt,jr,Lr)),p.hideOutsideRangePoints(br.clipOnAxisFalseTraces,br),br.xScaleFactor=jr,br.yScaleFactor=Lr}}}}function cr(dr,pr,br){return dr.fixedrange?0:Je&&qe.xaHash[dr._id]?pr:at&&(qe.isSubplotConstrained?qe.xaHash:qe.yaHash)[dr._id]?br:0}function _r(dr,pr){return pr?(dr.range=dr._r.slice(),A(dr,pr),xr(dr,pr)):0}function xr(dr,pr,br){return dr._length*(1-pr)*l[br||dr.constraintoward||"middle"]}return ge.length*be.length!=1&&J(Be,function(dr){if(re._context._scrollZoom.cartesian||re._fullLayout._enablescrollzoom){if(Ot(),re._transitioningWithDuration)return dr.preventDefault(),void dr.stopPropagation();Ue(),clearTimeout(Qt);var pr=-dr.deltaY;if(isFinite(pr)||(pr=dr.wheelDelta/10),isFinite(pr)){var br,Nr=Math.exp(-Math.min(Math.max(pr,-20),20)/200),kr=ht.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Hr=(dr.clientX-kr.left)/kr.width,an=(kr.bottom-dr.clientY)/kr.height;if(Je){for(be||(Hr=.5),br=0;br<ve.length;br++)fn(ve[br],Hr,Nr);Nt("x"),Ut[2]*=Nr,Ut[0]+=Ut[2]*Hr*(1/Nr-1)}if(at){for(ge||(an=.5),br=0;br<Me.length;br++)fn(Me[br],an,Nr);Nt("y"),Ut[3]*=Nr,Ut[1]+=Ut[3]*(1-an)*(1/Nr-1)}er(Ut),Zt(),re.emit("plotly_relayouting",Dt),Qt=setTimeout(function(){re._fullLayout&&(Ut=[0,0,Pe,Fe],Wt())},Re),dr.preventDefault()}else g.log("Did not find wheel motion attributes: ",dr)}function fn(zn,Nn,In){if(!zn.fixedrange){var cn=g.simpleMap(zn.range,zn.r2l),jr=cn[0]+(cn[1]-cn[0])*Nn;zn.range=cn.map(function(Lr){return zn.l2r(jr+(Lr-jr)*In)})}}}),Be},makeDragger:R,makeRectDragger:F,makeZoombox:Y,makeCorners:W,updateZoombox:te,xyCorners:Q,transitionZoombox:z,removeZoombox:N,showDoubleClickNotifier:V,attachWheelEventHandler:J}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/fx"),_=y("../../components/dragelement"),t=y("../../lib/setcursor"),e=y("./dragbox").makeDragBox,i=y("./constants").DRAGGERSIZE;ee.initInteractions=function(r){var o=r._fullLayout;if(r._context.staticPlot)d.select(r).selectAll(".drag").remove();else if(o._has("cartesian")||o._has("splom")){Object.keys(o._plots||{}).sort(function(p,s){if((o._plots[p].mainplot&&!0)===(o._plots[s].mainplot&&!0)){var a=p.split("y"),c=s.split("y");return a[0]===c[0]?Number(a[1]||1)-Number(c[1]||1):Number(a[0]||1)-Number(c[0]||1)}return o._plots[p].mainplot?1:-1}).forEach(function(p){var s=o._plots[p],a=s.xaxis,c=s.yaxis;if(!s.mainplot){var u=e(r,s,a._offset,c._offset,a._length,c._length,"ns","ew");u.onmousemove=function(f){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===p&&r._fullLayout._plots[p]&&g.hover(r,f,p)},g.hover(r,f,p),r._fullLayout._lasthover=u,r._fullLayout._hoversubplot=p},u.onmouseout=function(f){r._dragging||(r._fullLayout._hoversubplot=null,_.unhover(r,f))},r._context.showAxisDragHandles&&(e(r,s,a._offset-i,c._offset-i,i,i,"n","w"),e(r,s,a._offset+a._length,c._offset-i,i,i,"n","e"),e(r,s,a._offset-i,c._offset+c._length,i,i,"s","w"),e(r,s,a._offset+a._length,c._offset+c._length,i,i,"s","e"))}if(r._context.showAxisDragHandles){if(p===a._mainSubplot){var h=a._mainLinePosition;"top"===a.side&&(h-=i),e(r,s,a._offset+.1*a._length,h,.8*a._length,i,"","ew"),e(r,s,a._offset,h,.1*a._length,i,"","w"),e(r,s,a._offset+.9*a._length,h,.1*a._length,i,"","e")}if(p===c._mainSubplot){var v=c._mainLinePosition;"right"!==c.side&&(v-=i),e(r,s,v,c._offset+.1*c._length,i,.8*c._length,"ns",""),e(r,s,v,c._offset+.9*c._length,i,.1*c._length,"s",""),e(r,s,v,c._offset,i,.1*c._length,"n","")}}});var n=o._hoverlayer.node();n.onmousemove=function(p){p.target=r._fullLayout._lasthover,g.hover(r,p,o._hoversubplot)},n.onclick=function(p){p.target=r._fullLayout._lasthover,g.click(r,p)},n.onmousedown=function(p){r._fullLayout._lasthover.onmousedown(p)},ee.updateFx(r)}},ee.updateFx=function(r){var o=r._fullLayout;t(o._draggers,"pan"===o.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(y,$,ee){"use strict";$.exports={clearOutlineControllers:function(d){var g=d._fullLayout._zoomlayer;g&&g.selectAll(".outline-controllers").remove()},clearSelect:function(d){var g=d._fullLayout._zoomlayer;g&&g.selectAll(".select-outline").remove(),d._fullLayout._drawing=!1}}},{}],566:[function(y,$,ee){"use strict";var d=y("../../lib").strTranslate;function g(_,t){switch(_.type){case"log":return _.p2d(t);case"date":return _.p2r(t,0,_.calendar);default:return _.p2r(t)}}$.exports={p2r:g,r2p:function(_,t){switch(_.type){case"log":return _.d2p(t);case"date":return _.r2p(t,0,_.calendar);default:return _.r2p(t)}},axValue:function(_){var t="y"===_._id.charAt(0)?1:0;return function(e){return g(_,e[t])}},getTransform:function(_){return d(_.xaxis._offset,_.yaxis._offset)}}},{"../../lib":503}],567:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("./axis_ids");$.exports=function(t){return function(e,i){var r=e[t];if(Array.isArray(r))for(var o=d.subplotsRegistry.cartesian,n=o.idRegex,p=i._subplots,s=p.xaxis,a=p.yaxis,c=p.cartesian,u=i._has("cartesian")||i._has("gl2d"),h=0;h<r.length;h++){var v=r[h];if(g.isPlainObject(v)){var f=_.cleanId(v.xref,"x",!1),l=_.cleanId(v.yref,"y",!1),x=n.x.test(f),m=n.y.test(l);if(x||m){u||g.pushUnique(i._basePlotModules,o);var w=!1;x&&-1===s.indexOf(f)&&(s.push(f),w=!0),m&&-1===a.indexOf(l)&&(a.push(l),w=!0),w&&x&&m&&c.push(f+l)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../lib"),t=y("../plots"),e=y("../../components/drawing"),i=y("../get_data").getModuleCalcData,r=y("./axis_ids"),o=y("./constants"),n=y("../../constants/xmlns_namespaces"),p=_.ensureSingle;function s(v,f,l){return _.ensureSingle(v,f,l,function(x){x.datum(l)})}function a(v,f,l,x,m){for(var w,b,k,T=o.traceLayerClasses,L=v._fullLayout,A=L._modules,I=[],D=[],S=0;S<A.length;S++){var C=(w=A[S]).name,R=g.modules[C].categories;if(R.svg){var F=w.layerName||C+"layer",H=w.plot;k=(b=i(l,H))[0],l=b[1],k.length&&I.push({i:T.indexOf(F),className:F,plotMethod:H,cdModule:k}),R.zoomScale&&D.push("."+F)}}I.sort(function(Z,Y){return Z.i-Y.i});var U=f.plot.selectAll("g.mlayer").data(I,function(Z){return Z.className});if(U.enter().append("g").attr("class",function(Z){return Z.className}).classed("mlayer",!0).classed("rangeplot",f.isRangePlot),U.exit().remove(),U.order(),U.each(function(Z){var Y=d.select(this),W=Z.className;Z.plotMethod(v,f,Z.cdModule,Y,x,m),-1===o.clipOnAxisFalseQuery.indexOf("."+W)&&e.setClipUrl(Y,f.layerClipId,v)}),L._has("scattergl")&&(w=g.getModule("scattergl"),k=i(l,w)[0],w.plot(v,f,k)),!v._context.staticPlot&&(f._hasClipOnAxisFalse&&(f.clipOnAxisFalseTraces=f.plot.selectAll(o.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),D.length)){var X=f.plot.selectAll(D.join(",")).selectAll(".trace");f.zoomScalePts=X.selectAll("path.point"),f.zoomScaleTxt=X.selectAll(".textpoint")}}function c(v,f){var l=f.plotgroup,x=f.id,m=o.layerValue2layerClass[f.xaxis.layer],w=o.layerValue2layerClass[f.yaxis.layer],b=v._fullLayout._hasOnlyLargeSploms;if(f.mainplot){var k=f.mainplotinfo,T=k.plotgroup,L=x+"-x",A=x+"-y";f.gridlayer=k.gridlayer,f.zerolinelayer=k.zerolinelayer,p(k.overlinesBelow,"path",L),p(k.overlinesBelow,"path",A),p(k.overaxesBelow,"g",L),p(k.overaxesBelow,"g",A),f.plot=p(k.overplot,"g",x),p(k.overlinesAbove,"path",L),p(k.overlinesAbove,"path",A),p(k.overaxesAbove,"g",L),p(k.overaxesAbove,"g",A),f.xlines=T.select(".overlines-"+m).select("."+L),f.ylines=T.select(".overlines-"+w).select("."+A),f.xaxislayer=T.select(".overaxes-"+m).select("."+L),f.yaxislayer=T.select(".overaxes-"+w).select("."+A)}else if(b)f.xlines=p(l,"path","xlines-above"),f.ylines=p(l,"path","ylines-above"),f.xaxislayer=p(l,"g","xaxislayer-above"),f.yaxislayer=p(l,"g","yaxislayer-above");else{var I=p(l,"g","layer-subplot");f.shapelayer=p(I,"g","shapelayer"),f.imagelayer=p(I,"g","imagelayer"),f.gridlayer=p(l,"g","gridlayer"),f.zerolinelayer=p(l,"g","zerolinelayer"),p(l,"path","xlines-below"),p(l,"path","ylines-below"),f.overlinesBelow=p(l,"g","overlines-below"),p(l,"g","xaxislayer-below"),p(l,"g","yaxislayer-below"),f.overaxesBelow=p(l,"g","overaxes-below"),f.plot=p(l,"g","plot"),f.overplot=p(l,"g","overplot"),f.xlines=p(l,"path","xlines-above"),f.ylines=p(l,"path","ylines-above"),f.overlinesAbove=p(l,"g","overlines-above"),p(l,"g","xaxislayer-above"),p(l,"g","yaxislayer-above"),f.overaxesAbove=p(l,"g","overaxes-above"),f.xlines=l.select(".xlines-"+m),f.ylines=l.select(".ylines-"+w),f.xaxislayer=l.select(".xaxislayer-"+m),f.yaxislayer=l.select(".yaxislayer-"+w)}b||(s(f.gridlayer,"g",f.xaxis._id),s(f.gridlayer,"g",f.yaxis._id),f.gridlayer.selectAll("g").map(function(D){return D[0]}).sort(r.idSort)),f.xlines.style("fill","none").classed("crisp",!0),f.ylines.style("fill","none").classed("crisp",!0)}function u(v,f){if(v){var l={};for(var x in v.each(function(k){var T=k[0];d.select(this).remove(),h(T,f),l[T]=!0}),f._plots)for(var m=f._plots[x].overlays||[],w=0;w<m.length;w++){var b=m[w];l[b.id]&&b.plot.selectAll(".trace").remove()}}}function h(v,f){f._draggers.selectAll("g."+v).remove(),f._defs.select("#clip"+f._uid+v+"plot").remove()}ee.name="cartesian",ee.attr=["xaxis","yaxis"],ee.idRoot=["x","y"],ee.idRegex=o.idRegex,ee.attrRegex=o.attrRegex,ee.attributes=y("./attributes"),ee.layoutAttributes=y("./layout_attributes"),ee.supplyLayoutDefaults=y("./layout_defaults"),ee.transitionAxes=y("./transition_axes"),ee.finalizeSubplots=function(v,f){var l,x,m,w=f._subplots,b=w.xaxis,k=w.yaxis,T=w.cartesian,L=T.concat(w.gl2d||[]),A={},I={};for(l=0;l<L.length;l++){var D=L[l].split("y");A[D[0]]=1,I["y"+D[1]]=1}for(l=0;l<b.length;l++)A[x=b[l]]||(m=(v[r.id2name(x)]||{}).anchor,o.idRegex.y.test(m)||(m="y"),T.push(x+m),L.push(x+m),I[m]||(I[m]=1,_.pushUnique(k,m)));for(l=0;l<k.length;l++)I[m=k[l]]||(x=(v[r.id2name(m)]||{}).anchor,o.idRegex.x.test(x)||(x="x"),T.push(x+m),L.push(x+m),A[x]||(A[x]=1,_.pushUnique(b,x)));if(!L.length){for(var S in x="",m="",v)o.attrRegex.test(S)&&("x"===S.charAt(0)?(!x||+S.substr(5)<+x.substr(5))&&(x=S):(!m||+S.substr(5)<+m.substr(5))&&(m=S));x=x?r.name2id(x):"x",m=m?r.name2id(m):"y",b.push(x),k.push(m),T.push(x+m)}},ee.plot=function(v,f,l,x){var m,w=v._fullLayout,b=w._subplots.cartesian,k=v.calcdata;if(!Array.isArray(f))for(f=[],m=0;m<k.length;m++)f.push(m);for(m=0;m<b.length;m++){for(var T,L=b[m],A=w._plots[L],I=[],D=0;D<k.length;D++){var S=k[D],C=S[0].trace;C.xaxis+C.yaxis===L&&((-1!==f.indexOf(C.index)||C.carpet)&&(T&&T[0].trace.xaxis+T[0].trace.yaxis===L&&-1!==["tonextx","tonexty","tonext"].indexOf(C.fill)&&-1===I.indexOf(T)&&I.push(T),I.push(S)),T=S)}a(v,A,I,l,x)}},ee.clean=function(v,f,l,x){var m,w,b,k=x._plots||{},T=f._plots||{},L=x._subplots||{};if(x._hasOnlyLargeSploms&&!f._hasOnlyLargeSploms)for(b in k)(m=k[b]).plotgroup&&m.plotgroup.remove();var A=x._has&&x._has("gl"),I=f._has&&f._has("gl");if(A&&!I)for(b in k)(m=k[b])._scene&&m._scene.destroy();if(L.xaxis&&L.yaxis){var D=r.listIds({_fullLayout:x});for(w=0;w<D.length;w++){var S=D[w];f[r.id2name(S)]||x._infolayer.selectAll(".g-"+S+"title").remove()}}var C=x._has&&x._has("cartesian"),R=f._has&&f._has("cartesian");if(C&&!R)u(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups,delete x._axisMatchGroups;else if(L.cartesian)for(w=0;w<L.cartesian.length;w++){var F=L.cartesian[w];T[F]||(x._cartesianlayer.selectAll("."+F+",."+F+"-x,."+F+"-y").remove(),h(F,x))}},ee.drawFramework=function(v){var f=v._fullLayout,l=function(m){var w,b,k,T,L,A,I=m._fullLayout,D=I._subplots.cartesian,S=D.length,C=[],R=[];for(w=0;w<S;w++){var U=(L=(T=I._plots[k=D[w]]).xaxis)._mainAxis._id+(A=T.yaxis)._mainAxis._id,X=I._plots[U];T.overlays=[],U!==k&&X?(T.mainplot=U,T.mainplotinfo=X,R.push(k)):(T.mainplot=void 0,T.mainplotinfo=void 0,C.push(k))}for(w=0;w<R.length;w++)(T=I._plots[k=R[w]]).mainplotinfo.overlays.push(T);var Z=C.concat(R),Y=new Array(S);for(w=0;w<S;w++){var W=[k=Z[w],(L=(T=I._plots[k]).xaxis).layer,(A=T.yaxis).layer,L.overlaying||"",A.overlaying||""];for(b=0;b<T.overlays.length;b++)W.push(T.overlays[b].id);Y[w]=W}return Y}(v),x=f._cartesianlayer.selectAll(".subplot").data(l,String);x.enter().append("g").attr("class",function(m){return"subplot "+m[0]}),x.order(),x.exit().call(u,f),x.each(function(m){var w=m[0],b=f._plots[w];b.plotgroup=d.select(this),c(v,b),b.draglayer=p(f._draggers,"g",w)})},ee.rangePlot=function(v,f,l){c(v,f),a(v,f,l),t.style(v)},ee.toSVG=function(v){var f=v._fullLayout._glimages,l=d.select(v).selectAll(".svg-container");l.filter(function(x,m){return m===l.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var x=this.toDataURL("image/png");f.append("svg:image").attr({xmlns:n.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},ee.updateFx=y("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(y,$,ee){"use strict";var d=y("../font_attributes"),g=y("../../components/color/attributes"),_=y("../../components/drawing/attributes").dash,t=y("../../lib/extend").extendFlat,e=y("../../plot_api/plot_template").templatedArray,i=y("../../plots/cartesian/axis_format_attributes").descriptionWithDates,r=y("../../constants/numerical").ONEDAY,o=y("./constants"),n=o.HOUR_PATTERN,p=o.WEEKDAY_PATTERN;$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:g.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:d({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[p,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:r},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:t({},_,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:i("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:i("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:g.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:d({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color"),_=y("../../components/fx/helpers").isUnifiedHover,t=y("../../components/fx/hovermode_defaults"),e=y("../../plot_api/plot_template"),i=y("../layout_attributes"),r=y("./layout_attributes"),o=y("./type_defaults"),n=y("./axis_defaults"),p=y("./constraints"),s=y("./position_defaults"),a=y("./axis_ids"),c=a.id2name,u=a.name2id,h=y("./constants").AX_ID_PATTERN,v=y("../../registry"),f=v.traceIs,l=v.getComponentMethod;function x(m,w,b){Array.isArray(m[w])?m[w].push(b):m[w]=[b]}$.exports=function(m,w,b){var k,T,L=w.autotypenumbers,A={},I={},D={},S={},C={},R={},F={},H={},U={},X={};for(k=0;k<b.length;k++){var Z=b[k];if(f(Z,"cartesian")||f(Z,"gl2d")){var Y,W;if(Z.xaxis)Y=c(Z.xaxis),x(A,Y,Z);else if(Z.xaxes)for(T=0;T<Z.xaxes.length;T++)x(A,c(Z.xaxes[T]),Z);if(Z.yaxis)W=c(Z.yaxis),x(A,W,Z);else if(Z.yaxes)for(T=0;T<Z.yaxes.length;T++)x(A,c(Z.yaxes[T]),Z);"funnel"===Z.type?"h"===Z.orientation?(Y&&(I[Y]=!0),W&&(F[W]=!0)):W&&(D[W]=!0):"image"===Z.type?(W&&(H[W]=!0),Y&&(H[Y]=!0)):(W&&(C[W]=!0,R[W]=!0),f(Z,"carpet")&&("carpet"!==Z.type||Z._cheater)||Y&&(S[Y]=!0)),"carpet"===Z.type&&Z._cheater&&Y&&(I[Y]=!0),f(Z,"2dMap")&&(U[Y]=!0,U[W]=!0),f(Z,"oriented")&&(X["h"===Z.orientation?W:Y]=!0)}}var te=w._subplots,z=te.xaxis,N=te.yaxis,V=d.simpleMap(z,c),Q=d.simpleMap(N,c),j=V.concat(Q),J=g.background;z.length&&N.length&&(J=d.coerce(m,w,i,"plot_bgcolor"));var K,re,ie,ce,se,de=g.combine(J,w.paper_bgcolor);function ue(){se._traceIndices=(A[K]||[]).map(function(Et){return Et._expandedIndex}),se._annIndices=[],se._shapeIndices=[],se._imgIndices=[],se._subplotsWith=[],se._counterAxes=[],se._name=se._attr=K,se._id=re}function ge(it,Et){return d.coerce(ce,se,r,it,Et)}function be(it,Et){return d.coerce2(ce,se,r,it,Et)}function Te(it){return"x"===it?N:z}function we(it,Et){for(var Xt="x"===it?V:Q,nr=[],Ue=0;Ue<Xt.length;Ue++){var We=Xt[Ue];We===Et||(m[We]||{}).overlaying||nr.push(u(We))}return nr}var Le={x:Te("x"),y:Te("y")},fe=Le.x.concat(Le.y),ve={},Me=[];function ke(){var it=ce.matches;h.test(it)&&-1===fe.indexOf(it)&&(ve[it]=ce.type,Me=Object.keys(ve))}var Ce=t(m,w),Pe=_(Ce);for(k=0;k<j.length;k++){re=u(K=j[k]),ie=K.charAt(0),d.isPlainObject(m[K])||(m[K]={}),ce=m[K],se=e.newContainer(w,K,ie+"axis"),ue();var rt={letter:ie,font:w.font,outerTicks:U[K],showGrid:!X[K],data:A[K]||[],bgColor:de,calendar:w.calendar,automargin:!0,visibleDflt:"x"===ie&&!S[K]&&I[K]||"y"===ie&&!C[K]&&D[K],reverseDflt:"y"===ie&&(!R[K]&&F[K]||H[K]),autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ie]||{})[re]};ge("uirevision",w.uirevision),o(ce,se,ge,rt),n(ce,se,ge,rt,w);var ze=Pe&&ie===Ce.charAt(0),He=be("spikecolor",Pe?se.color:void 0),Xe=be("spikethickness",Pe?1.5:void 0),Je=be("spikedash",Pe?"dot":void 0),at=be("spikemode",Pe?"across":void 0),pt=be("spikesnap");ge("showspikes",!!(ze||He||Xe||Je||at||pt))||(delete se.spikecolor,delete se.spikethickness,delete se.spikedash,delete se.spikemode,delete se.spikesnap),s(ce,se,ge,{letter:ie,counterAxes:Le[ie],overlayableAxes:we(ie,K),grid:w.grid}),ge("title.standoff"),ke(),se._input=ce}for(k=0;k<Me.length;){re=Me[k++],ie=(K=c(re)).charAt(0),d.isPlainObject(m[K])||(m[K]={}),ce=m[K],se=e.newContainer(w,K,ie+"axis"),ue();var xt={letter:ie,font:w.font,outerTicks:U[K],showGrid:!X[K],data:[],bgColor:de,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ie]||{})[re]};ge("uirevision",w.uirevision),se.type=ve[re]||"linear",n(ce,se,ge,xt,w),s(ce,se,ge,{letter:ie,counterAxes:Le[ie],overlayableAxes:we(ie,K),grid:w.grid}),ge("fixedrange"),ke(),se._input=ce}var Ft=l("rangeslider","handleDefaults"),Dt=l("rangeselector","handleDefaults");for(k=0;k<V.length;k++)ce=m[K=V[k]],se=w[K],Ft(m,w,K),"date"===se.type&&Dt(ce,se,w,Q,se.calendar),ge("fixedrange");for(k=0;k<Q.length;k++){ce=m[K=Q[k]];var ot=w[c((se=w[K]).anchor)];ge("fixedrange",l("rangeslider","isVisible")(ot))}p.handleDefaults(m,w,{axIds:fe.concat(Me).sort(a.idSort),axHasImage:H})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(y,$,ee){"use strict";var d=y("tinycolor2").mix,g=y("../../components/color/attributes").lightFraction,_=y("../../lib");$.exports=function(t,e,i,r){var o=(r=r||{}).dfltColor;function n(v,f){return _.coerce2(t,e,r.attributes,v,f)}var p=n("linecolor",o),s=n("linewidth");i("showline",r.showLine||!!p||!!s)||(delete e.linecolor,delete e.linewidth);var a=n("gridcolor",d(o,r.bgColor,r.blend||g).toRgbString()),c=n("gridwidth");if(i("showgrid",r.showGrid||!!a||!!c)||(delete e.gridcolor,delete e.gridwidth),!r.noZeroLine){var u=n("zerolinecolor",o),h=n("zerolinewidth");i("zeroline",r.showGrid||!!u||!!h)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib");$.exports=function(_,t,e,i){var r,o,n,p,s=i.counterAxes||[],a=i.overlayableAxes||[],c=i.letter,u=i.grid;u&&(r=u._anchors[t._id],(o=u._domains[c][u._axisMap[t._id]])&&(n=u[c+"side"].split(" ")[0],p=u.domain[c]["right"===n||"top"===n?1:0])),o=o||[0,1],r=r||(d(_.position)?"free":s[0]||"free"),n=n||("x"===c?"bottom":"left"),p=p||0,"free"===g.coerce(_,t,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:r}},"anchor")&&e("position",p),g.coerce(_,t,{side:{valType:"enumerated",values:"x"===c?["bottom","top"]:["left","right"],dflt:n}},"side");var h=!1;if(a.length&&(h=g.coerce(_,t,{overlaying:{valType:"enumerated",values:[!1].concat(a),dflt:!1}},"overlaying")),!h){var v=e("domain",o);v[0]>v[1]-1/4096&&(t.domain=o),g.noneOrAll(_.domain,t.domain,o)}return e("layer"),t}},{"../../lib":503,"fast-isnumeric":190}],573:[function(y,$,ee){"use strict";var d=y("./show_dflt");$.exports=function(g,_,t,e,i){i||(i={});var r=i.tickSuffixDflt,o=d(g);t("tickprefix")&&t("showtickprefix",o),t("ticksuffix",r)&&t("showticksuffix",o)}},{"./show_dflt":577}],574:[function(y,$,ee){"use strict";var d=y("../../constants/alignment").FROM_BL;$.exports=function(g,_,t){void 0===t&&(t=d[g.constraintoward||"center"]);var e=[g.r2l(g.range[0]),g.r2l(g.range[1])],i=e[0]+(e[1]-e[0])*t;g.range=g._input.range=[g.l2r(i+(e[0]-i)*_),g.l2r(i+(e[1]-i)*_)],g.setScale()}},{"../../constants/alignment":471}],575:[function(y,$,ee){"use strict";var d=y("polybooljs"),g=y("../../registry"),_=y("../../components/drawing").dashStyle,t=y("../../components/color"),e=y("../../components/fx"),i=y("../../components/fx/helpers").makeEventData,r=y("../../components/dragelement/helpers"),o=r.freeMode,n=r.rectMode,p=r.drawMode,s=r.openMode,a=r.selectMode,c=y("../../components/shapes/draw_newshape/display_outlines"),u=y("../../components/shapes/draw_newshape/helpers").handleEllipse,h=y("../../components/shapes/draw_newshape/newshapes"),v=y("../../lib"),f=y("../../lib/polygon"),l=y("../../lib/throttle"),x=y("./axis_ids").getFromId,m=y("../../lib/clear_gl_canvases"),w=y("../../plot_api/subroutines").redrawReglTraces,b=y("./constants"),k=b.MINSELECT,T=f.filter,L=f.tester,A=y("./handle_outline").clearSelect,I=y("./helpers"),D=I.p2r,S=I.axValue,C=I.getTransform;function R(V,Q,j,J,K,re,ie){var ce,se,de,ue,ge,be,Te,we,Le,qe,fe=Q._hoverdata,ve=Q._fullLayout.clickmode.indexOf("event")>-1,Me=[];if((qe=fe)&&Array.isArray(qe)&&!0!==qe[0].hoverOnBox){X(V,Q,re);var ke=function(qe,rt){var ze,He,Xe=qe[0],Je=-1,at=[];for(He=0;He<rt.length;He++)if(Xe.fullData._expandedIndex===(ze=rt[He]).cd[0].trace._expandedIndex){if(!0===Xe.hoverOnBox)break;void 0!==Xe.pointNumber?Je=Xe.pointNumber:void 0!==Xe.binNumber&&(Je=Xe.binNumber,at=Xe.pointNumbers);break}return{pointNumber:Je,pointNumbers:at,searchInfo:ze}}(fe,ce=Y(Q,j,J,K));if(ke.pointNumbers.length>0?function(qe,rt){var ze,He,Xe,Je=[];for(Xe=0;Xe<qe.length;Xe++)(ze=qe[Xe]).cd[0].trace.selectedpoints&&ze.cd[0].trace.selectedpoints.length>0&&Je.push(ze);if(1===Je.length&&Je[0]===rt.searchInfo&&(He=rt.searchInfo.cd[0].trace).selectedpoints.length===rt.pointNumbers.length){for(Xe=0;Xe<rt.pointNumbers.length;Xe++)if(He.selectedpoints.indexOf(rt.pointNumbers[Xe])<0)return!1;return!0}return!1}(ce,ke):function(qe){var ze,He,Xe=0;for(He=0;He<qe.length;He++)if((ze=qe[He].cd[0].trace).selectedpoints&&(ze.selectedpoints.length>1||(Xe+=ze.selectedpoints.length)>1))return!1;return 1===Xe}(ce)&&(be=W(ke))){for(ie&&ie.remove(),Le=0;Le<ce.length;Le++)(se=ce[Le])._module.selectPoints(se,!1);te(Q,ce),Z(re),ve&&Q.emit("plotly_deselect",null)}else{for(Te=V.shiftKey&&(void 0!==be?be:W(ke)),de=function(qe,rt,ze){return{pointNumber:qe,searchInfo:rt,subtract:ze}}(ke.pointNumber,ke.searchInfo,Te),ue=U(re.selectionDefs.concat([de])),Le=0;Le<ce.length;Le++)if(ge=z(ce[Le]._module.selectPoints(ce[Le],ue),ce[Le]),Me.length)for(var Ce=0;Ce<ge.length;Ce++)Me.push(ge[Ce]);else Me=ge;if(te(Q,ce,we={points:Me}),de&&re&&re.selectionDefs.push(de),ie){var Pe=re.mergedPolygons,Fe=s(re.dragmode);c(N(Pe,Fe),ie,re)}ve&&Q.emit("plotly_selected",we)}}}function F(V){return"pointNumber"in V&&"searchInfo"in V}function H(V){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Q,j,J,K){return K.cd[0].trace._expandedIndex===V.searchInfo.cd[0].trace._expandedIndex&&J===V.pointNumber},isRect:!1,degenerate:!1,subtract:V.subtract}}function U(V){for(var Q=[],j=F(V[0])?0:V[0][0][0],J=j,K=F(V[0])?0:V[0][0][1],re=K,ie=0;ie<V.length;ie++)if(F(V[ie]))Q.push(H(V[ie]));else{var ce=f.tester(V[ie]);ce.subtract=V[ie].subtract,Q.push(ce),j=Math.min(j,ce.xmin),J=Math.max(J,ce.xmax),K=Math.min(K,ce.ymin),re=Math.max(re,ce.ymax)}return{xmin:j,xmax:J,ymin:K,ymax:re,pts:[],contains:function(se,de,ue,ge){for(var be=!1,Te=0;Te<Q.length;Te++)Q[Te].contains(se,de,ue,ge)&&(be=!1===Q[Te].subtract);return be},isRect:!1,degenerate:!1}}function X(V,Q,j){Q._fullLayout._drawing=!1;var J=Q._fullLayout,K=j.plotinfo,re=j.dragmode,ie=J._lastSelectedSubplot&&J._lastSelectedSubplot===K.id,ce=(V.shiftKey||V.altKey)&&!(p(re)&&s(re));ie&&ce&&K.selection&&K.selection.selectionDefs&&!j.selectionDefs?(j.selectionDefs=K.selection.selectionDefs,j.mergedPolygons=K.selection.mergedPolygons):ce&&K.selection||Z(j),ie||(A(Q),J._lastSelectedSubplot=K.id)}function Z(V){var Q=V.dragmode,j=V.plotinfo,J=V.gd;if(J._fullLayout._activeShapeIndex>=0&&J._fullLayout._deactivateShape(J),p(Q)){var K=J._fullLayout._zoomlayer.selectAll(".select-outline-"+j.id);if(K&&J._fullLayout._drawing){var re=h(K,V);re&&g.call("_guiRelayout",J,{shapes:re}),J._fullLayout._drawing=!1}}j.selection={},j.selection.selectionDefs=V.selectionDefs=[],j.selection.mergedPolygons=V.mergedPolygons=[]}function Y(V,Q,j,J){var K,re,ie,ce=[],se=Q.map(function(Te){return Te._id}),de=j.map(function(Te){return Te._id});for(ie=0;ie<V.calcdata.length;ie++)if(!0===(re=(K=V.calcdata[ie])[0].trace).visible&&re._module&&re._module.selectPoints)if(!J||re.subplot!==J&&re.geo!==J)if("splom"===re.type&&re._xaxes[se[0]]&&re._yaxes[de[0]]){var ue=be(re._module,K,Q[0],j[0]);ue.scene=V._fullLayout._splomScenes[re.uid],ce.push(ue)}else if("sankey"===re.type){var ge=be(re._module,K,Q[0],j[0]);ce.push(ge)}else{if(-1===se.indexOf(re.xaxis)||-1===de.indexOf(re.yaxis))continue;ce.push(be(re._module,K,x(V,re.xaxis),x(V,re.yaxis)))}else ce.push(be(re._module,K,Q[0],j[0]));return ce;function be(Te,we,Le,fe){return{_module:Te,cd:we,xaxis:Le,yaxis:fe}}}function W(V){var Q=V.searchInfo.cd[0].trace,J=V.pointNumbers;return!!Q.selectedpoints&&Q.selectedpoints.indexOf(J.length>0?J[0]:V.pointNumber)>-1}function te(V,Q,j){var J,K,re,ie;for(J=0;J<Q.length;J++){var ce=Q[J].cd[0].trace._fullInput,se=V._fullLayout._tracePreGUI[ce.uid]||{};void 0===se.selectedpoints&&(se.selectedpoints=ce._input.selectedpoints||null)}if(j){var de=j.points||[];for(J=0;J<Q.length;J++)(ie=Q[J].cd[0].trace)._input.selectedpoints=ie._fullInput.selectedpoints=[],ie._fullInput!==ie&&(ie.selectedpoints=[]);for(J=0;J<de.length;J++){var ue=de[J],ge=ue.data,be=ue.fullData;ue.pointIndices?([].push.apply(ge.selectedpoints,ue.pointIndices),ie._fullInput!==ie&&[].push.apply(be.selectedpoints,ue.pointIndices)):(ge.selectedpoints.push(ue.pointIndex),ie._fullInput!==ie&&be.selectedpoints.push(ue.pointIndex))}}else for(J=0;J<Q.length;J++)delete(ie=Q[J].cd[0].trace).selectedpoints,delete ie._input.selectedpoints,ie._fullInput!==ie&&delete ie._fullInput.selectedpoints;var Te=!1;for(J=0;J<Q.length;J++){ie=(re=(K=Q[J]).cd)[0].trace,g.traceIs(ie,"regl")&&(Te=!0);var we=K._module,Le=we.styleOnSelect||we.style;Le&&(Le(V,re,re[0].node3),re[0].nodeRangePlot3&&Le(V,re,re[0].nodeRangePlot3))}Te&&(m(V),w(V))}function z(V,Q){if(Array.isArray(V))for(var j=Q.cd,J=Q.cd[0].trace,K=0;K<V.length;K++)V[K]=i(V[K],J,j);return V}function N(V,Q){for(var j=[],J=0;J<V.length;J++){j[J]=[];for(var K=0;K<V[J].length;K++){j[J][K]=[],j[J][K][0]=K?"L":"M";for(var re=0;re<V[J][K].length;re++)j[J][K].push(V[J][K][re])}Q||j[J].push(["Z",j[J][0][1],j[J][0][2]])}return j}$.exports={prepSelect:function(V,Q,j,J,K){var re=o(K),ie=n(K),ce=s(K),se=p(K),de=a(K),ue="drawcircle"===K,ge="drawline"===K||ue,be=J.gd,Te=be._fullLayout,we=Te._zoomlayer,Le=J.element.getBoundingClientRect(),fe=J.plotinfo,ve=C(fe),Me=Q-Le.left,ke=j-Le.top;Te._calcInverseTransform(be);var Pe,Fe,qe,rt,ze,He,Xe,Ce=v.apply3DTransform(Te._invTransform)(Me,ke),Je=Te._invScaleX,at=Te._invScaleY,pt=Me=Ce[0],xt=ke=Ce[1],Ft="M"+Me+","+ke,Dt=J.xaxes[0]._length,ot=J.yaxes[0]._length,it=J.xaxes.concat(J.yaxes),Et=V.altKey&&!(p(K)&&ce);X(V,be,J),re&&(Pe=T([[Me,ke]],b.BENDPX));var Xt=we.selectAll("path.select-outline-"+fe.id).data(se?[0]:[1,2]),nr=Te.newshape;Xt.enter().append("path").attr("class",function(Oe){return"select-outline select-outline-"+Oe+" select-outline-"+fe.id}).style(se?{opacity:nr.opacity/2,fill:ce?void 0:nr.fillcolor,stroke:nr.line.color,"stroke-dasharray":_(nr.line.dash,nr.line.width),"stroke-width":nr.line.width+"px"}:{}).attr("fill-rule",nr.fillrule).classed("cursor-move",!!se).attr("transform",ve).attr("d",Ft+"Z");var Ue,We=we.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1}).attr("transform",ve).attr("d","M0,0Z"),Be=Te._uid+b.SELECTID,Qe=[],Ae=Y(be,J.xaxes,J.yaxes,J.subplot);function De(Oe,Ie){return Oe-Ie}Ue=fe.fillRangeItems?fe.fillRangeItems:ie?function(Oe,Ie){var et=Oe.range={};for(ze=0;ze<it.length;ze++){var ct=it[ze],vt=ct._id.charAt(0);et[ct._id]=[D(ct,Ie[vt+"min"]),D(ct,Ie[vt+"max"])].sort(De)}}:function(Oe,Ie,et){var ct=Oe.lassoPoints={};for(ze=0;ze<it.length;ze++){var vt=it[ze];ct[vt._id]=et.filtered.map(S(vt))}},J.moveFn=function(Oe,Ie){pt=Math.max(0,Math.min(Dt,Je*Oe+Me)),xt=Math.max(0,Math.min(ot,at*Ie+ke));var Ot,Rt,et=Math.abs(pt-Me),ct=Math.abs(xt-ke);if(ie){var vt,ft,It;if(de){var ut=Te.selectdirection;switch(vt="any"===ut?ct<Math.min(.6*et,k)?"h":et<Math.min(.6*ct,k)?"v":"d":ut){case"h":ft=ue?ot/2:0,It=ot;break;case"v":ft=ue?Dt/2:0,It=Dt}}if(se)switch(Te.newshape.drawdirection){case"vertical":vt="h",ft=ue?ot/2:0,It=ot;break;case"horizontal":vt="v",ft=ue?Dt/2:0,It=Dt;break;case"ortho":et<ct?(vt="h",ft=ke,It=xt):(vt="v",ft=Me,It=pt);break;default:vt="d"}"h"===vt?((rt=ge?u(ue,[pt,ft],[pt,It]):[[Me,ft],[Me,It],[pt,It],[pt,ft]]).xmin=ge?pt:Math.min(Me,pt),rt.xmax=ge?pt:Math.max(Me,pt),rt.ymin=Math.min(ft,It),rt.ymax=Math.max(ft,It),We.attr("d","M"+rt.xmin+","+(ke-k)+"h-4v"+2*k+"h4ZM"+(rt.xmax-1)+","+(ke-k)+"h4v"+2*k+"h-4Z")):"v"===vt?((rt=ge?u(ue,[ft,xt],[It,xt]):[[ft,ke],[ft,xt],[It,xt],[It,ke]]).xmin=Math.min(ft,It),rt.xmax=Math.max(ft,It),rt.ymin=ge?xt:Math.min(ke,xt),rt.ymax=ge?xt:Math.max(ke,xt),We.attr("d","M"+(Me-k)+","+rt.ymin+"v-4h"+2*k+"v4ZM"+(Me-k)+","+(rt.ymax-1)+"v4h"+2*k+"v-4Z")):"d"===vt&&((rt=ge?u(ue,[Me,ke],[pt,xt]):[[Me,ke],[Me,xt],[pt,xt],[pt,ke]]).xmin=Math.min(Me,pt),rt.xmax=Math.max(Me,pt),rt.ymin=Math.min(ke,xt),rt.ymax=Math.max(ke,xt),We.attr("d","M0,0Z"))}else re&&(Pe.addPt([pt,xt]),rt=Pe.filtered);J.selectionDefs&&J.selectionDefs.length?(Ot=J.mergedPolygons,Rt=rt,qe=Et?d.difference({regions:Ot,inverted:!1},{regions:[Rt],inverted:!1}).regions:d.union({regions:Ot,inverted:!1},{regions:[Rt],inverted:!1}).regions,rt.subtract=Et,Fe=U(J.selectionDefs.concat([rt]))):(qe=[rt],Fe=L(rt)),c(N(qe,ce),Xt,J),de&&l.throttle(Be,b.SELECTDELAY,function(){var Ot;Qe=[];var Rt,$e=[];for(ze=0;ze<Ae.length;ze++)if(Rt=(He=Ae[ze])._module.selectPoints(He,Fe),$e.push(Rt),Ot=z(Rt,He),Qe.length)for(var yt=0;yt<Ot.length;yt++)Qe.push(Ot[yt]);else Qe=Ot;te(be,Ae,Xe={points:Qe}),Ue(Xe,rt,Pe),J.gd.emit("plotly_selecting",Xe)})},J.clickFn=function(Oe,Ie){if(We.remove(),be._fullLayout._activeShapeIndex>=0)be._fullLayout._deactivateShape(be);else if(!se){var et=Te.clickmode;l.done(Be).then(function(){if(l.clear(Be),2===Oe){for(Xt.remove(),ze=0;ze<Ae.length;ze++)(He=Ae[ze])._module.selectPoints(He,!1);te(be,Ae),Z(J),be.emit("plotly_deselect",null)}else et.indexOf("select")>-1&&R(Ie,be,J.xaxes,J.yaxes,J.subplot,J,Xt),"event"===et&&be.emit("plotly_selected",void 0);e.click(be,Ie)}).catch(v.error)}},J.doneFn=function(){We.remove(),l.done(Be).then(function(){l.clear(Be),J.gd.emit("plotly_selected",Xe),rt&&J.selectionDefs&&(rt.subtract=Et,J.selectionDefs.push(rt),J.mergedPolygons.length=0,[].push.apply(J.mergedPolygons,qe)),J.doneFnCompleted&&J.doneFnCompleted(Qe)}).catch(v.error),se&&Z(J)}},clearSelect:A,clearSelectionsCache:Z,selectOnClick:R}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-time-format").utcFormat,_=y("../../lib"),t=_.numberFormat,e=y("fast-isnumeric"),i=_.cleanNumber,r=_.ms2DateTime,o=_.dateTime2ms,n=_.ensureNumber,p=_.isArrayOrTypedArray,s=y("../../constants/numerical"),a=s.FP_SAFE,c=s.BADNUM,u=s.LOG_CLIP,h=s.ONEWEEK,v=s.ONEDAY,f=s.ONEHOUR,l=s.ONEMIN,x=s.ONESEC,m=y("./axis_ids"),w=y("./constants"),b=w.HOUR_PATTERN,k=w.WEEKDAY_PATTERN;function T(A){return Math.pow(10,A)}function L(A){return null!=A}$.exports=function(A,I){I=I||{};var D=A._id||"x",S=D.charAt(0);function C(j,J){if(j>0)return Math.log(j)/Math.LN10;if(j<=0&&J&&A.range&&2===A.range.length){var K=A.range[0],re=A.range[1];return.5*(K+re-2*u*Math.abs(K-re))}return c}function R(j,J,K,re){if((re||{}).msUTC&&e(j))return+j;var ie=o(j,K||A.calendar);if(ie===c){if(!e(j))return c;j=+j;var ce=Math.floor(10*_.mod(j+.05,1)),se=Math.round(j-ce/10);ie=o(new Date(se))+ce/10}return ie}function F(j,J,K){return r(j,J,K||A.calendar)}function H(j){return A._categories[Math.round(j)]}function U(j){if(L(j)){if(void 0===A._categoriesMap&&(A._categoriesMap={}),void 0!==A._categoriesMap[j])return A._categoriesMap[j];A._categories.push("number"==typeof j?String(j):j);var J=A._categories.length-1;return A._categoriesMap[j]=J,J}return c}function X(j){if(A._categoriesMap)return A._categoriesMap[j]}function Z(j){var J=X(j);return void 0!==J?J:e(j)?+j:void 0}function Y(j){return e(j)?+j:X(j)}function W(j,J,K){return d.round(K+J*j,2)}function te(j,J,K){return(j-K)/J}var z=function(j){return e(j)?W(j,A._m,A._b):c},N=function(j){return te(j,A._m,A._b)};if(A.rangebreaks){var V="y"===S;z=function(j){if(!e(j))return c;var J=A._rangebreaks.length;if(!J)return W(j,A._m,A._b);var K=V;A.range[0]>A.range[1]&&(K=!K);for(var re=K?-1:1,ie=re*j,ce=0,se=0;se<J;se++){var de=re*A._rangebreaks[se].min,ue=re*A._rangebreaks[se].max;if(ie<de)break;if(!(ie>ue)){ce=ie<(de+ue)/2?se:se+1;break}ce=se+1}var ge=A._B[ce]||0;return isFinite(ge)?W(j,A._m2,ge):0},N=function(j){var J=A._rangebreaks.length;if(!J)return te(j,A._m,A._b);for(var K=0,re=0;re<J&&!(j<A._rangebreaks[re].pmin);re++)j>A._rangebreaks[re].pmax&&(K=re+1);return te(j,A._m2,A._B[K])}}A.c2l="log"===A.type?C:n,A.l2c="log"===A.type?T:n,A.l2p=z,A.p2l=N,A.c2p="log"===A.type?function(j,J){return z(C(j,J))}:z,A.p2c="log"===A.type?function(j){return T(N(j))}:N,-1!==["linear","-"].indexOf(A.type)?(A.d2r=A.r2d=A.d2c=A.r2c=A.d2l=A.r2l=i,A.c2d=A.c2r=A.l2d=A.l2r=n,A.d2p=A.r2p=function(j){return A.l2p(i(j))},A.p2d=A.p2r=N,A.cleanPos=n):"log"===A.type?(A.d2r=A.d2l=function(j,J){return C(i(j),J)},A.r2d=A.r2c=function(j){return T(i(j))},A.d2c=A.r2l=i,A.c2d=A.l2r=n,A.c2r=C,A.l2d=T,A.d2p=function(j,J){return A.l2p(A.d2r(j,J))},A.p2d=function(j){return T(N(j))},A.r2p=function(j){return A.l2p(i(j))},A.p2r=N,A.cleanPos=n):"date"===A.type?(A.d2r=A.r2d=_.identity,A.d2c=A.r2c=A.d2l=A.r2l=R,A.c2d=A.c2r=A.l2d=A.l2r=F,A.d2p=A.r2p=function(j,J,K){return A.l2p(R(j,0,K))},A.p2d=A.p2r=function(j,J,K){return F(N(j),J,K)},A.cleanPos=function(j){return _.cleanDate(j,c,A.calendar)}):"category"===A.type?(A.d2c=A.d2l=U,A.r2d=A.c2d=A.l2d=H,A.d2r=A.d2l_noadd=Z,A.r2c=function(j){var J=Y(j);return void 0!==J?J:A.fraction2r(.5)},A.l2r=A.c2r=n,A.r2l=Y,A.d2p=function(j){return A.l2p(A.r2c(j))},A.p2d=function(j){return H(N(j))},A.r2p=A.d2p,A.p2r=N,A.cleanPos=function(j){return"string"==typeof j&&""!==j?j:n(j)}):"multicategory"===A.type&&(A.r2d=A.c2d=A.l2d=H,A.d2r=A.d2l_noadd=Z,A.r2c=function(j){var J=Z(j);return void 0!==J?J:A.fraction2r(.5)},A.r2c_just_indices=X,A.l2r=A.c2r=n,A.r2l=Z,A.d2p=function(j){return A.l2p(A.r2c(j))},A.p2d=function(j){return H(N(j))},A.r2p=A.d2p,A.p2r=N,A.cleanPos=function(j){return Array.isArray(j)||"string"==typeof j&&""!==j?j:n(j)},A.setupMultiCategory=function(j){var J,K,re=A._traceIndices,ie=A._matchGroup;if(ie&&0===A._categories.length)for(var ce in ie)if(ce!==D){var se=I[m.id2name(ce)];re=re.concat(se._traceIndices)}var de=[[0,{}],[0,{}]],ue=[];for(J=0;J<re.length;J++){var ge=j[re[J]];if(S in ge){var be=ge[S],Te=ge._length||_.minRowLength(be);if(p(be[0])&&p(be[1]))for(K=0;K<Te;K++){var we=be[0][K],Le=be[1][K];L(we)&&L(Le)&&(ue.push([we,Le]),we in de[0][1]||(de[0][1][we]=de[0][0]++),Le in de[1][1]||(de[1][1][Le]=de[1][0]++))}}}for(ue.sort(function(fe,ve){var Me=de[0][1],ke=Me[fe[0]]-Me[ve[0]];if(ke)return ke;var Ce=de[1][1];return Ce[fe[1]]-Ce[ve[1]]}),J=0;J<ue.length;J++)U(ue[J])}),A.fraction2r=function(j){var J=A.r2l(A.range[0]),K=A.r2l(A.range[1]);return A.l2r(J+j*(K-J))},A.r2fraction=function(j){var J=A.r2l(A.range[0]),K=A.r2l(A.range[1]);return(A.r2l(j)-J)/(K-J)},A.cleanRange=function(j,J){J||(J={}),j||(j="range");var K,re,ie=_.nestedProperty(A,j).get();if(re=(re="date"===A.type?_.dfltRange(A.calendar):"y"===S?w.DFLTRANGEY:"realaxis"===A._name?[0,1]:J.dfltRange||w.DFLTRANGEX).slice(),"tozero"!==A.rangemode&&"nonnegative"!==A.rangemode||(re[0]=0),ie&&2===ie.length)for("date"!==A.type||A.autorange||(ie[0]=_.cleanDate(ie[0],c,A.calendar),ie[1]=_.cleanDate(ie[1],c,A.calendar)),K=0;K<2;K++)if("date"===A.type){if(!_.isDateTime(ie[K],A.calendar)){A[j]=re;break}if(A.r2l(ie[0])===A.r2l(ie[1])){var ce=_.constrain(A.r2l(ie[0]),_.MIN_MS+1e3,_.MAX_MS-1e3);ie[0]=A.l2r(ce-1e3),ie[1]=A.l2r(ce+1e3);break}}else{if(!e(ie[K])){if(!e(ie[1-K])){A[j]=re;break}ie[K]=ie[1-K]*(K?10:.1)}if(ie[K]<-a?ie[K]=-a:ie[K]>a&&(ie[K]=a),ie[0]===ie[1]){var se=Math.max(1,Math.abs(1e-6*ie[0]));ie[0]-=se,ie[1]+=se}}else _.nestedProperty(A,j).set(re)},A.setScale=function(j){var J=I._size;if(A.overlaying){var K=m.getFromId({_fullLayout:I},A.overlaying);A.domain=K.domain}var re=j&&A._r?"_r":"range",ie=A.calendar;A.cleanRange(re);var ce,se,de=A.r2l(A[re][0],ie),ue=A.r2l(A[re][1],ie),ge="y"===S;if(ge?(A._offset=J.t+(1-A.domain[1])*J.h,A._length=J.h*(A.domain[1]-A.domain[0]),A._m=A._length/(de-ue),A._b=-A._m*ue):(A._offset=J.l+A.domain[0]*J.w,A._length=J.w*(A.domain[1]-A.domain[0]),A._m=A._length/(ue-de),A._b=-A._m*de),A._rangebreaks=[],A._lBreaks=0,A._m2=0,A._B=[],A.rangebreaks&&(A._rangebreaks=A.locateBreaks(Math.min(de,ue),Math.max(de,ue)),A._rangebreaks.length)){for(ce=0;ce<A._rangebreaks.length;ce++)se=A._rangebreaks[ce],A._lBreaks+=Math.abs(se.max-se.min);var be=ge;de>ue&&(be=!be),be&&A._rangebreaks.reverse();var Te=be?-1:1;for(A._m2=Te*A._length/(Math.abs(ue-de)-A._lBreaks),A._B.push(-A._m2*(ge?ue:de)),ce=0;ce<A._rangebreaks.length;ce++)A._B.push(A._B[A._B.length-1]-Te*A._m2*((se=A._rangebreaks[ce]).max-se.min));for(ce=0;ce<A._rangebreaks.length;ce++)(se=A._rangebreaks[ce]).pmin=z(se.min),se.pmax=z(se.max)}if(!isFinite(A._m)||!isFinite(A._b)||A._length<0)throw I._replotting=!1,new Error("Something went wrong with axis scaling")},A.maskBreaks=function(j){var J,K,re,ie,ce,se=A.rangebreaks||[];se._cachedPatterns||(se._cachedPatterns=se.map(function(we){return we.enabled&&we.bounds?_.simpleMap(we.bounds,we.pattern?i:A.d2c):null})),se._cachedValues||(se._cachedValues=se.map(function(we){return we.enabled&&we.values?_.simpleMap(we.values,A.d2c).sort(_.sorterAsc):null}));for(var de=0;de<se.length;de++){var ue=se[de];if(ue.enabled)if(ue.bounds){switch(K=(J=se._cachedPatterns[de])[0],re=J[1],ue.pattern){case k:ie=(ce=new Date(j)).getUTCDay(),K>re&&(re+=7,ie<K&&(ie+=7));break;case b:ie=(ce=new Date(j)).getUTCHours()+(ce.getUTCMinutes()/60+ce.getUTCSeconds()/3600+ce.getUTCMilliseconds()/36e5),K>re&&(re+=24,ie<K&&(ie+=24));break;case"":ie=j}if(ie>=K&&ie<re)return c}else for(var be=se._cachedValues[de],Te=0;Te<be.length;Te++)if(re=(K=be[Te])+ue.dvalue,j>=K&&j<re)return c}return j},A.locateBreaks=function(j,J){var K,re,ie,ce,se=[];if(!A.rangebreaks)return se;var de=A.rangebreaks.slice().sort(function(Ce,Pe){return Ce.pattern===k&&Pe.pattern===b?-1:Pe.pattern===k&&Ce.pattern===b?1:0}),ue=function(Ce,Pe){if((Ce=_.constrain(Ce,j,J))!==(Pe=_.constrain(Pe,j,J))){for(var Fe=!0,qe=0;qe<se.length;qe++){var rt=se[qe];Ce<rt.max&&Pe>=rt.min&&(Ce<rt.min&&(rt.min=Ce),Pe>rt.max&&(rt.max=Pe),Fe=!1)}Fe&&se.push({min:Ce,max:Pe})}};for(K=0;K<de.length;K++){var ge=de[K];if(ge.enabled)if(ge.bounds){var be=j,Te=J;ge.pattern&&(be=Math.floor(be)),ie=(re=_.simpleMap(ge.bounds,ge.pattern?i:A.r2l))[0],ce=re[1];var we,Le,fe=new Date(be);switch(ge.pattern){case k:Le=h,we=(ce-ie+(ce<ie?7:0))*v,be+=ie*v-(fe.getUTCDay()*v+fe.getUTCHours()*f+fe.getUTCMinutes()*l+fe.getUTCSeconds()*x+fe.getUTCMilliseconds());break;case b:Le=v,we=(ce-ie+(ce<ie?24:0))*f,be+=ie*f-(fe.getUTCHours()*f+fe.getUTCMinutes()*l+fe.getUTCSeconds()*x+fe.getUTCMilliseconds());break;default:be=Math.min(re[0],re[1]),we=Le=(Te=Math.max(re[0],re[1]))-be}for(var ve=be;ve<Te;ve+=Le)ue(ve,ve+we)}else for(var Me=_.simpleMap(ge.values,A.d2c),ke=0;ke<Me.length;ke++)ue(ie=Me[ke],ce=ie+ge.dvalue)}return se.sort(function(Ce,Pe){return Ce.min-Pe.min}),se},A.makeCalcdata=function(j,J,K){var re,ie,ce,se,de=A.type,ue="date"===de&&j[J+"calendar"];if(J in j){if(re=j[J],se=j._length||_.minRowLength(re),_.isTypedArray(re)&&("linear"===de||"log"===de)){if(se===re.length)return re;if(re.subarray)return re.subarray(0,se)}if("multicategory"===de)return function(Te,we){for(var Le=new Array(we),fe=0;fe<we;fe++)Le[fe]=X([(Te[0]||[])[fe],(Te[1]||[])[fe]]);return Le}(re,se);for(ie=new Array(se),ce=0;ce<se;ce++)ie[ce]=A.d2c(re[ce],0,ue,K)}else{var ge=J+"0"in j?A.d2c(j[J+"0"],0,ue):0,be=j["d"+J]?Number(j["d"+J]):1;for(re=j[{x:"y",y:"x"}[J]],se=j._length||re.length,ie=new Array(se),ce=0;ce<se;ce++)ie[ce]=ge+ce*be}if(A.rangebreaks)for(ce=0;ce<se;ce++)ie[ce]=A.maskBreaks(ie[ce]);return ie},A.isValidRange=function(j){return Array.isArray(j)&&2===j.length&&e(A.r2l(j[0]))&&e(A.r2l(j[1]))},A.isPtWithinRange=function(j,J){var K=A.c2l(j[S],null,J),re=A.r2l(A.range[0]),ie=A.r2l(A.range[1]);return re<ie?re<=K&&K<=ie:ie<=K&&K<=re},A._emptyCategories=function(){A._categories=[],A._categoriesMap={}},A.clearCalc=function(){var j=A._matchGroup;if(j){var J=null,K=null;for(var re in j){var ie=I[m.id2name(re)];if(ie._categories){J=ie._categories,K=ie._categoriesMap;break}}J&&K?(A._categories=J,A._categoriesMap=K):A._emptyCategories()}else A._emptyCategories();if(A._initialCategories)for(var ce=0;ce<A._initialCategories.length;ce++)U(A._initialCategories[ce])},A.sortByInitialCategories=function(){var j=[];if(A._emptyCategories(),A._initialCategories)for(var J=0;J<A._initialCategories.length;J++)U(A._initialCategories[J]);j=j.concat(A._traceIndices);var K=A._matchGroup;for(var re in K)if(D!==re){var ie=I[m.id2name(re)];ie._categories=A._categories,ie._categoriesMap=A._categoriesMap,j=j.concat(ie._traceIndices)}return j};var Q=I._d3locale;"date"===A.type&&(A._dateFormat=Q?Q.timeFormat:g,A._extraFormat=I._extraFormat),A._separators=I.separators,A._numFormat=Q?Q.numberFormat:t,delete A._minDtick,delete A._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(y,$,ee){"use strict";$.exports=function(d){var g=["showexponent","showtickprefix","showticksuffix"].filter(function(_){return void 0!==d[_]});if(g.every(function(_){return d[_]===d[g[0]]})||1===g.length)return d[g[0]]}},{}],578:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color").contrast,_=y("./layout_attributes"),t=y("./show_dflt"),e=y("../array_container_defaults");function i(r,o){function n(p,s){return d.coerce(r,o,_.tickformatstops,p,s)}n("enabled")&&(n("dtickrange"),n("value"))}$.exports=function(r,o,n,p,s){s||(s={});var a=t(r);if(n("showticklabels")){var c=s.font||{},u=o.color,h=-1!==(o.ticklabelposition||"").indexOf("inside")?g(s.bgColor):u&&u!==_.color.dflt?u:c.color;if(d.coerceFont(n,"tickfont",{family:c.family,size:c.size,color:h}),s.noAng||n("tickangle"),"category"!==p){var v=n("tickformat");e(r,o,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:i}),o.tickformatstops.length||delete o.tickformatstops,s.noExp||v||"date"===p||(n("showexponent",a),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t,e,i){var r=d.coerce2(_,t,g,"ticklen"),o=d.coerce2(_,t,g,"tickwidth"),n=d.coerce2(_,t,g,"tickcolor",t.color);e("ticks",i.outerTicks||r||o||n?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(y,$,ee){"use strict";var d=y("./clean_ticks"),g=y("../../lib").isArrayOrTypedArray;$.exports=function(_,t,e,i){function r(c){var u=_[c];return void 0!==u?u:(t._template||{})[c]}var o=r("tick0"),n=r("dtick"),p=r("tickvals"),s=e("tickmode",g(p)?"array":n?"linear":"auto");if("auto"===s)e("nticks");else if("linear"===s){var a=t.dtick=d.dtick(n,i);t.tick0=d.tick0(o,i,t.calendar,a)}else"multicategory"!==i&&(void 0===e("tickvals")?t.tickmode="auto":e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../lib"),t=y("../../components/drawing"),e=y("./axes");$.exports=function(i,r,o,n){var p=i._fullLayout;if(0!==r.length){var s,a,c,u;n&&(s=n());var h=d.ease(o.easing);return i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var l={},x=0;x<r.length;x++){var m=r[x],b=m.plotinfo.yaxis;m.xr0&&(l[m.plotinfo.xaxis._name+".range"]=m.xr0.slice()),m.yr0&&(l[b._name+".range"]=m.yr0.slice())}return g.call("relayout",i,l).then(function(){for(var k=0;k<r.length;k++)v(r[k].plotinfo)})}()}),a=Date.now(),u=window.requestAnimationFrame(function l(){c=Date.now();for(var x=Math.min(1,(c-a)/o.duration),m=h(x),w=0;w<r.length;w++)f(r[w],m);c-a>o.duration?(function(){for(var b={},k=0;k<r.length;k++){var T=r[k],A=T.plotinfo.yaxis;T.xr1&&(b[T.plotinfo.xaxis._name+".range"]=T.xr1.slice()),T.yr1&&(b[A._name+".range"]=T.yr1.slice())}s&&s(),g.call("relayout",i,b).then(function(){for(var I=0;I<r.length;I++)v(r[I].plotinfo)})}(),u=window.cancelAnimationFrame(l)):u=window.requestAnimationFrame(l)}),Promise.resolve()}function v(l){var x=l.xaxis,m=l.yaxis;p._defs.select("#"+l.clipId+"> rect").call(t.setTranslate,0,0).call(t.setScale,1,1),l.plot.call(t.setTranslate,x._offset,m._offset).call(t.setScale,1,1);var w=l.plot.selectAll(".scatterlayer .trace");w.selectAll(".point").call(t.setPointGroupScale,1,1),w.selectAll(".textpoint").call(t.setTextPointsScale,1,1),w.call(t.hideOutsideRangePoints,l)}function f(l,x){var m=l.plotinfo,w=m.xaxis,b=m.yaxis,k=w._length,T=b._length,L=!!l.xr1,A=!!l.yr1,I=[];if(L){var D=_.simpleMap(l.xr0,w.r2l),S=_.simpleMap(l.xr1,w.r2l),C=D[1]-D[0],R=S[1]-S[0];I[0]=(D[0]*(1-x)+x*S[0]-D[0])/(D[1]-D[0])*k,I[2]=k*(1-x+x*R/C),w.range[0]=w.l2r(D[0]*(1-x)+x*S[0]),w.range[1]=w.l2r(D[1]*(1-x)+x*S[1])}else I[0]=0,I[2]=k;if(A){var F=_.simpleMap(l.yr0,b.r2l),H=_.simpleMap(l.yr1,b.r2l),U=F[1]-F[0],X=H[1]-H[0];I[1]=(F[1]*(1-x)+x*H[1]-F[1])/(F[0]-F[1])*T,I[3]=T*(1-x+x*X/U),b.range[0]=w.l2r(F[0]*(1-x)+x*H[0]),b.range[1]=b.l2r(F[1]*(1-x)+x*H[1])}else I[1]=0,I[3]=T;e.drawOne(i,w,{skipTitle:!0}),e.drawOne(i,b,{skipTitle:!0}),e.redrawComponents(i,[w._id,b._id]);var Z=L?k/I[2]:1,Y=A?T/I[3]:1,V=w._offset-(L?I[0]/I[2]*k:0),Q=b._offset-(A?I[1]/I[3]*T:0);m.clipRect.call(t.setTranslate,L?I[0]:0,A?I[1]:0).call(t.setScale,1/Z,1/Y),m.plot.call(t.setTranslate,V,Q).call(t.setScale,Z,Y),t.setPointGroupScale(m.zoomScalePts,1/Z,1/Y),t.setTextPointsScale(m.zoomScaleTxt,1/Z,1/Y)}e.redrawComponents(i)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(y,$,ee){"use strict";var d=y("../../registry").traceIs,g=y("./axis_autotype");function _(e){return{v:"x",h:"y"}[e.orientation||"v"]}function t(e,i){var r=_(e),o=d(e,"box-violin"),n=d(e._fullInput||{},"candlestick");return o&&!n&&i===r&&void 0===e[r]&&void 0===e[r+"0"]}$.exports=function(e,i,r,o){r("autotypenumbers",o.autotypenumbersDflt),"-"===r("type",(o.splomStash||{}).type)&&(function(n,p){if("-"===n.type){var s,a=n._id,c=a.charAt(0);-1!==a.indexOf("scene")&&(a=c);var u=function(b,k,T){for(var L=0;L<b.length;L++){var A=b[L];if("splom"===A.type&&A._length>0&&(A["_"+T+"axes"]||{})[k]||(A[T+"axis"]||T)===k&&(t(A,T)||(A[T]||[]).length||A[T+"0"]))return A}}(p,a,c);if(u){if("histogram"===u.type&&c==={v:"y",h:"x"}[u.orientation||"v"])return void(n.type="linear");var h=c+"calendar",v=u[h],f={noMultiCategory:!d(u,"cartesian")||d(u,"noMultiCategory")};if("box"===u.type&&u._hasPreCompStats&&c==={h:"x",v:"y"}[u.orientation||"v"]&&(f.noMultiCategory=!0),f.autotypenumbers=n.autotypenumbers,t(u,c)){var l=_(u),x=[];for(s=0;s<p.length;s++){var m=p[s];d(m,"box-violin")&&(m[c+"axis"]||c)===a&&(x.push(void 0!==m[l]?m[l][0]:void 0!==m.name?m.name:"text"),m[h]!==v&&(v=void 0))}n.type=g(x,v,f)}else if("splom"===u.type){var w=u.dimensions[u._axesDim[a]];w.visible&&(n.type=g(w.values,v,f))}else n.type=g(u[c]||[u[c+"0"]],v,f)}}}(i,o.data),"-"===i.type?i.type="linear":e.type=i.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(y,$,ee){"use strict";var d=y("../registry"),g=y("../lib");function _(r,o,n){var p,s,a,c=!1;if("data"===o.type)p=r._fullData[null!==o.traces?o.traces[0]:0];else{if("layout"!==o.type)return!1;p=r._fullLayout}return s=g.nestedProperty(p,o.prop).get(),(a=n[o.type]=n[o.type]||{}).hasOwnProperty(o.prop)&&a[o.prop]!==s&&(c=!0),a[o.prop]=s,{changed:c,value:s}}function t(r,o){var n=[],p=o[0],s={};if("string"==typeof p)s[p]=o[1];else{if(!g.isPlainObject(p))return n;s=p}return i(s,function(a,c,u){n.push({type:"layout",prop:a,value:u})},"",0),n}function e(r,o){var n,p,s,a,c=[];if(s=o[1],n=o[2],a={},"string"==typeof(p=o[0]))a[p]=s;else{if(!g.isPlainObject(p))return c;a=p,void 0===n&&(n=s)}return void 0===n&&(n=null),i(a,function(u,h,v){var f,l;if(Array.isArray(v)){l=v.slice();var x=Math.min(l.length,r.data.length);n&&(x=Math.min(x,n.length)),f=[];for(var m=0;m<x;m++)f[m]=n?n[m]:m}else l=v,f=n?n.slice():null;if(null===f)Array.isArray(l)&&(l=l[0]);else if(Array.isArray(f)){if(!Array.isArray(l)){var w=l;l=[];for(var b=0;b<f.length;b++)l[b]=w}l.length=Math.min(f.length,l.length)}c.push({type:"data",prop:u,traces:f,value:l})},"",0),c}function i(r,o,n,p){Object.keys(r).forEach(function(s){var a=r[s];if("_"!==s[0]){var c=n+(p>0?".":"")+s;g.isPlainObject(a)?i(a,o,c,p+1):o(c,s,a)}})}ee.manageCommandObserver=function(r,o,n,p){var s={},a=!0;o&&o._commandObserver&&(s=o._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=ee.hasSimpleAPICommandBindings(r,n,s.lookupTable);if(o&&o._commandObserver){if(c)return s;if(o._commandObserver.remove)return o._commandObserver.remove(),o._commandObserver=null,s}if(c){_(r,c,s.cache),s.check=function(){if(a){var v=_(r,c,s.cache);return v.changed&&p&&void 0!==s.lookupTable[v.value]&&(s.disable(),Promise.resolve(p({value:v.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[v.value]})).then(s.enable,s.enable)),v.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<u.length;h++)r._internalOn(u[h],s.check);s.remove=function(){for(var v=0;v<u.length;v++)r._removeInternalListener(u[v],s.check)}}else g.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){a=!1},s.enable=function(){a=!0},o&&(o._commandObserver=s),s},ee.hasSimpleAPICommandBindings=function(r,o,n){var p,s,a=o.length;for(p=0;p<a;p++){var c,u=o[p],h=u.method,v=u.args;if(Array.isArray(v)||(v=[]),!h)return!1;var f=ee.computeAPICommandBindings(r,h,v);if(1!==f.length)return!1;if(s){if((c=f[0]).type!==s.type||c.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var l=0;l<s.traces.length;l++)if(s.traces[l]!==c.traces[l])return!1}else if(c.prop!==s.prop)return!1}else s=f[0],Array.isArray(s.traces)&&s.traces.sort();var x=(c=f[0]).value;if(Array.isArray(x)){if(1!==x.length)return!1;x=x[0]}n&&(n[x]=p)}return s},ee.executeAPICommand=function(r,o,n){if("skip"===o)return Promise.resolve();var p=d.apiMethodRegistry[o],s=[r];Array.isArray(n)||(n=[]);for(var a=0;a<n.length;a++)s.push(n[a]);return p.apply(null,s).catch(function(c){return g.warn("API call to Plotly."+o+" rejected.",c),Promise.reject(c)})},ee.computeAPICommandBindings=function(r,o,n){var p,a;switch(Array.isArray(n)||(n=[]),o){case"restyle":p=e(r,n);break;case"relayout":p=t(0,n);break;case"update":p=e(r,[n[0],n[2]]).concat(t(0,[n[1]]));break;case"animate":a=n,p=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:p=[]}return p}},{"../lib":503,"../registry":638}],584:[function(y,$,ee){"use strict";var d=y("../lib/extend").extendFlat;ee.attributes=function(g,_){_=_||{};var t={valType:"info_array",editType:(g=g||{}).editType,items:[{valType:"number",min:0,max:1,editType:g.editType},{valType:"number",min:0,max:1,editType:g.editType}],dflt:[0,1]},e={x:d({},t,{}),y:d({},t,{}),editType:g.editType};return g.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:g.editType},e.column={valType:"integer",min:0,dflt:0,editType:g.editType}),e},ee.defaults=function(g,_,t,e){var i=e&&e.x||[0,1],r=e&&e.y||[0,1],o=_.grid;if(o){var n=t("domain.column");void 0!==n&&(n<o.columns?i=o._domains.x[n]:delete g.domain.column);var p=t("domain.row");void 0!==p&&(p<o.rows?r=o._domains.y[p]:delete g.domain.row)}var s=t("domain.x",i),a=t("domain.y",r);s[0]<s[1]||(g.domain.x=i.slice()),a[0]<a[1]||(g.domain.y=r.slice())}},{"../lib/extend":493}],585:[function(y,$,ee){"use strict";$.exports=function(d){var g=d.editType,_=d.colorEditType;void 0===_&&(_=g);var t={family:{valType:"string",noBlank:!0,strict:!0,editType:g},size:{valType:"number",min:1,editType:g},color:{valType:"color",editType:_},editType:g};return d.autoSize&&(t.size.dflt="auto"),d.autoColor&&(t.color.dflt="auto"),d.arrayOk&&(t.family.arrayOk=!0,t.size.arrayOk=!0,t.color.arrayOk=!0),t}},{}],586:[function(y,$,ee){"use strict";$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(y,$,ee){"use strict";ee.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ee.axesNames=["lonaxis","lataxis"],ee.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ee.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ee.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ee.clipPad=.001,ee.precision=.1,ee.landColor="#F0DC82",ee.waterColor="#3399FF",ee.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ee.sphereSVG={type:"Sphere"},ee.fillLayers={ocean:1,land:1,lakes:1},ee.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ee.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ee.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ee.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-geo"),_=g.geoPath,t=g.geoDistance,e=y("d3-geo-projection"),i=y("../../registry"),r=y("../../lib"),o=r.strTranslate,n=y("../../components/color"),p=y("../../components/drawing"),s=y("../../components/fx"),a=y("../plots"),c=y("../cartesian/axes"),u=y("../cartesian/autorange").getAutoRange,h=y("../../components/dragelement"),v=y("../cartesian/select").prepSelect,f=y("../cartesian/select").clearSelect,l=y("../cartesian/select").selectOnClick,x=y("./zoom"),m=y("./constants"),w=y("../../lib/geo_location_utils"),b=y("../../lib/topojson_utils"),k=y("topojson-client").feature;function T(I){this.id=I.id,this.graphDiv=I.graphDiv,this.container=I.container,this.topojsonURL=I.topojsonURL,this.isStatic=I.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var L=T.prototype;function A(I,D){var S=m.clipPad,C=I[0]+S,R=I[1]-S,F=D[0]+S,H=D[1]-S;C>0&&R<0&&(R+=360);var U=(R-C)/4;return{type:"Polygon",coordinates:[[[C,F],[C,H],[C+U,H],[C+2*U,H],[C+3*U,H],[R,H],[R,F],[R-U,F],[R-2*U,F],[R-3*U,F],[C,F]]]}}$.exports=function(I){return new T(I)},L.plot=function(I,D,S){var C=this,R=D[this.id],F=[],H=!1;for(var U in m.layerNameToAdjective)if("frame"!==U&&R["show"+U]){H=!0;break}for(var X=0;X<I.length;X++)if(I[0][0].trace.locationmode){H=!0;break}if(H){var Z=b.getTopojsonName(R);null!==C.topojson&&Z===C.topojsonName||(C.topojsonName=Z,void 0===PlotlyGeoAssets.topojson[C.topojsonName]&&F.push(C.fetchTopojson()))}F=F.concat(w.fetchTraceGeoData(I)),S.push(new Promise(function(Y,W){Promise.all(F).then(function(){C.topojson=PlotlyGeoAssets.topojson[C.topojsonName],C.update(I,D),Y()}).catch(W)}))},L.fetchTopojson=function(){var I=this,D=b.getTopojsonPath(I.topojsonURL,I.topojsonName);return new Promise(function(S,C){d.json(D,function(R,F){if(R)return C(404===R.status?new Error(["plotly.js could not find topojson file at",D,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",D].join(" ")));PlotlyGeoAssets.topojson[I.topojsonName]=F,S()})})},L.update=function(I,D){var S=D[this.id];this.hasChoropleth=!1;for(var C=0;C<I.length;C++){var R=I[C],F=R[0].trace;"choropleth"===F.type&&(this.hasChoropleth=!0),!0===F.visible&&F._length>0&&F._module.calcGeoJSON(R,D)}if(!this.updateProjection(I,D)){this.viewInitial&&this.scope===S.scope||this.saveViewInitial(S),this.scope=S.scope,this.updateBaseLayers(D,S),this.updateDims(D,S),this.updateFx(D,S),a.generalUpdatePerTraceModule(this.graphDiv,this,I,S);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var U=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=U.selectAll("path"),this.render()}},L.updateProjection=function(I,D){var S=this.graphDiv,C=D[this.id],R=D._size,F=C.domain,H=C.projection,U=C.lonaxis,X=C.lataxis,Z=U._ax,Y=X._ax,W=this.projection=function(fe){var ve=fe.projection,Me=ve.type,ke=m.projNames[Me];ke="geo"+r.titleCase(ke);for(var Ce=(g[ke]||e[ke])(),Pe=fe._isSatellite?180*Math.acos(1/ve.distance)/Math.PI:fe._isClipped?m.lonaxisSpan[Me]/2:null,Fe=["center","rotate","parallels","clipExtent"],qe=function(He){return He?Ce:[]},rt=0;rt<Fe.length;rt++){var ze=Fe[rt];"function"!=typeof Ce[ze]&&(Ce[ze]=qe)}return Ce.isLonLatOverEdges=function(He){if(null===Ce(He))return!0;if(Pe){var Xe=Ce.rotate();return t(He,[-Xe[0],-Xe[1]])>Pe*Math.PI/180}return!1},Ce.getPath=function(){return _().projection(Ce)},Ce.getBounds=function(He){return Ce.getPath().bounds(He)},Ce.precision(m.precision),fe._isSatellite&&Ce.tilt(ve.tilt).distance(ve.distance),Pe&&Ce.clipAngle(Pe-m.clipPad),Ce}(C),te=[[R.l+R.w*F.x[0],R.t+R.h*(1-F.y[1])],[R.l+R.w*F.x[1],R.t+R.h*(1-F.y[0])]],z=C.center||{},N=H.rotation||{},V=U.range||[],Q=X.range||[];if(C.fitbounds){Z._length=te[1][0]-te[0][0],Y._length=te[1][1]-te[0][1],Z.range=u(S,Z),Y.range=u(S,Y);var j=(Z.range[0]+Z.range[1])/2,J=(Y.range[0]+Y.range[1])/2;if(C._isScoped)z={lon:j,lat:J};else if(C._isClipped){z={lon:j,lat:J},N={lon:j,lat:J,roll:N.roll};var K=H.type,re=m.lonaxisSpan[K]/2||180,ie=m.lataxisSpan[K]/2||90;V=[j-re,j+re],Q=[J-ie,J+ie]}else z={lon:j,lat:J},N={lon:j,lat:N.lat,roll:N.roll}}W.center([z.lon-N.lon,z.lat-N.lat]).rotate([-N.lon,-N.lat,N.roll]).parallels(H.parallels);var ce=A(V,Q);W.fitExtent(te,ce);var se=this.bounds=W.getBounds(ce),de=this.fitScale=W.scale(),ue=W.translate();if(C.fitbounds){var ge=W.getBounds(A(Z.range,Y.range)),be=Math.min((se[1][0]-se[0][0])/(ge[1][0]-ge[0][0]),(se[1][1]-se[0][1])/(ge[1][1]-ge[0][1]));isFinite(be)?W.scale(be*de):r.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(H.scale*de);var Te=this.midPt=[(se[0][0]+se[1][0])/2,(se[0][1]+se[1][1])/2];if(W.translate([ue[0]+(Te[0]-ue[0]),ue[1]+(Te[1]-ue[1])]).clipExtent(se),C._isAlbersUsa){var we=W([z.lon,z.lat]),Le=W.translate();W.translate([Le[0]-(we[0]-Le[0]),Le[1]-(we[1]-Le[1])])}},L.updateBaseLayers=function(I,D){var S=this,C=S.topojson,R=S.layers,F=S.basePaths;function H(W){return"lonaxis"===W||"lataxis"===W}function U(W){return Boolean(m.lineLayers[W])}function X(W){return Boolean(m.fillLayers[W])}var Z=(this.hasChoropleth?m.layersForChoropleth:m.layers).filter(function(W){return U(W)||X(W)?D["show"+W]:!H(W)||D[W].showgrid}),Y=S.framework.selectAll(".layer").data(Z,String);Y.exit().each(function(W){delete R[W],delete F[W],d.select(this).remove()}),Y.enter().append("g").attr("class",function(W){return"layer "+W}).each(function(W){var te=R[W]=d.select(this);"bg"===W?S.bgRect=te.append("rect").style("pointer-events","all"):H(W)?F[W]=te.append("path").style("fill","none"):"backplot"===W?te.append("g").classed("choroplethlayer",!0):"frontplot"===W?te.append("g").classed("scatterlayer",!0):U(W)?F[W]=te.append("path").style("fill","none").style("stroke-miterlimit",2):X(W)&&(F[W]=te.append("path").style("stroke","none"))}),Y.order(),Y.each(function(W){var te=F[W],z=m.layerNameToAdjective[W];"frame"===W?te.datum(m.sphereSVG):U(W)||X(W)?te.datum(k(C,C.objects[W])):H(W)&&te.datum(function(N,V,Q){var j,J,K,re=V[N],ie=m.scopeDefaults[V.scope];"lonaxis"===N?(j=ie.lonaxisRange,J=ie.lataxisRange,K=function(Le,fe){return[Le,fe]}):"lataxis"===N&&(j=ie.lataxisRange,J=ie.lonaxisRange,K=function(Le,fe){return[fe,Le]});var ce={type:"linear",range:[j[0],j[1]-1e-6],tick0:re.tick0,dtick:re.dtick};c.setConvert(ce,Q);var se=c.calcTicks(ce);V.isScoped||"lonaxis"!==N||se.pop();for(var de=se.length,ue=new Array(de),ge=0;ge<de;ge++)for(var be=se[ge].x,Te=ue[ge]=[],we=J[0];we<J[1]+2.5;we+=2.5)Te.push(K(be,we));return{type:"MultiLineString",coordinates:ue}}(W,D,I)).call(n.stroke,D[W].gridcolor).call(p.dashLine,"",D[W].gridwidth),U(W)?te.call(n.stroke,D[z+"color"]).call(p.dashLine,"",D[z+"width"]):X(W)&&te.call(n.fill,D[z+"color"])})},L.updateDims=function(I,D){var S=this.bounds,C=(D.framewidth||0)/2,R=S[0][0]-C,F=S[0][1]-C,H=S[1][0]-R+C,U=S[1][1]-F+C;p.setRect(this.clipRect,R,F,H,U),this.bgRect.call(p.setRect,R,F,H,U).call(n.fill,D.bgcolor),this.xaxis._offset=R,this.xaxis._length=H,this.yaxis._offset=F,this.yaxis._length=U},L.updateFx=function(I,D){var S=this,C=S.graphDiv,R=S.bgRect,F=I.dragmode,H=I.clickmode;if(!S.isStatic){var U;"select"===F?U=function(Y,W){(Y.range={})[S.id]=[Z([W.xmin,W.ymin]),Z([W.xmax,W.ymax])]}:"lasso"===F&&(U=function(Y,W,te){(Y.lassoPoints={})[S.id]=te.filtered.map(Z)});var X={element:S.bgRect.node(),gd:C,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:U},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(Y){2===Y&&f(C)}};"pan"===F?(R.node().onmousedown=null,R.call(x(S,D)),R.on("dblclick.zoom",function(){var Y=S.viewInitial,W={};for(var te in Y)W[S.id+"."+te]=Y[te];i.call("_guiRelayout",C,W),C.emit("plotly_doubleclick",null)}),C._context._scrollZoom.geo||R.on("wheel.zoom",null)):"select"!==F&&"lasso"!==F||(R.on(".zoom",null),X.prepFn=function(Y,W,te){v(Y,W,te,X,F)},h.init(X)),R.on("mousemove",function(){var Y=S.projection.invert(r.getPositionFromD3Event());if(!Y)return h.unhover(C,d.event);S.xaxis.p2c=function(){return Y[0]},S.yaxis.p2c=function(){return Y[1]},s.hover(C,d.event,S.id)}),R.on("mouseout",function(){C._dragging||h.unhover(C,d.event)}),R.on("click",function(){"select"!==F&&"lasso"!==F&&(H.indexOf("select")>-1&&l(d.event,C,[S.xaxis],[S.yaxis],S.id,X),H.indexOf("event")>-1&&s.click(C,d.event))})}function Z(Y){return S.projection.invert([Y[0]+S.xaxis._offset,Y[1]+S.yaxis._offset])}},L.makeFramework=function(){var I=this,D=I.graphDiv,S=D._fullLayout,C="clip"+S._uid+I.id;I.clipDef=S._clips.append("clipPath").attr("id",C),I.clipRect=I.clipDef.append("rect"),I.framework=d.select(I.container).append("g").attr("class","geo "+I.id).call(p.setClipUrl,C,D),I.project=function(R){var F=I.projection(R);return F?[F[0]-I.xaxis._offset,F[1]-I.yaxis._offset]:[null,null]},I.xaxis={_id:"x",c2p:function(R){return I.project(R)[0]}},I.yaxis={_id:"y",c2p:function(R){return I.project(R)[1]}},I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(I.mockAxis,S)},L.saveViewInitial=function(I){var S=I.center||{},C=I.projection,R=C.rotation||{};this.viewInitial={fitbounds:I.fitbounds,"projection.scale":C.scale},r.extendFlat(this.viewInitial,I._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:I._isClipped?{"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":R.lon})},L.render=function(){var I,D=this.projection,S=D.getPath();function C(F){var H=D(F.lonlat);return H?o(H[0],H[1]):null}function R(F){return D.isLonLatOverEdges(F.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",S);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(F){return S(F.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",C)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(y,$,ee){"use strict";var d=y("../../plots/get_data").getSubplotCalcData,g=y("../../lib").counterRegex,_=y("./geo"),t="geo",e=g(t),i={};i.geo={valType:"subplotid",dflt:t,editType:"calc"},$.exports={attr:t,name:t,idRoot:t,idRegex:e,attrRegex:e,attributes:i,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(r){for(var o=r._fullLayout,n=r.calcdata,p=o._subplots.geo,s=0;s<p.length;s++){var a=p[s],c=d(n,t,a),u=o[a]._subplot;u||(u=_({id:a,graphDiv:r,container:o._geolayer.node(),topojsonURL:r._context.topojsonURL,staticPlot:r._context.staticPlot}),o[a]._subplot=u),u.plot(c,o,r._promises)}},updateFx:function(r){for(var o=r._fullLayout,n=o._subplots.geo,p=0;p<n.length;p++){var s=o[n[p]];s._subplot.updateFx(o,s)}},clean:function(r,o,n,p){for(var s=p._subplots.geo||[],a=0;a<s.length;a++){var c=s[a],u=p[c]._subplot;!o[c]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(y,$,ee){"use strict";var d=y("../../components/color/attributes"),g=y("../domain").attributes,_=y("./constants"),t=y("../../plot_api/edit_types").overrideAll,e=y("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};($.exports=t({domain:g({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(_.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(_.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:_.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:_.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:_.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:_.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:i,lataxis:i},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../subplot_defaults"),_=y("../get_data").getSubplotData,t=y("./constants"),e=y("./layout_attributes"),i=t.axesNames;function r(o,n,p,s){var a=_(s.fullData,"geo",s.id).map(function(N){return N._expandedIndex}),c=p("resolution"),u=p("scope"),h=t.scopeDefaults[u],v=p("projection.type",h.projType),f=n._isAlbersUsa="albers usa"===v;f&&(u=n.scope="usa");var l=n._isScoped="world"!==u,x=n._isSatellite="satellite"===v,m=n._isConic=-1!==v.indexOf("conic")||"albers"===v,w=n._isClipped=!!t.lonaxisSpan[v];if(!1===o.visible){var b=d.extendDeep({},n._template);b.showcoastlines=!1,b.showcountries=!1,b.showframe=!1,b.showlakes=!1,b.showland=!1,b.showocean=!1,b.showrivers=!1,b.showsubunits=!1,b.lonaxis&&(b.lonaxis.showgrid=!1),b.lataxis&&(b.lataxis.showgrid=!1),n._template=b}for(var k=p("visible"),T=0;T<i.length;T++){var L,A=i[T],I=[30,10][T];if(l)L=h[A+"Range"];else{var D=t[A+"Span"],S=(D[v]||D["*"])/2,C=p("projection.rotation."+A.substr(0,3),h.projRotate[T]);L=[C-S,C+S]}var R=p(A+".range",L);p(A+".tick0"),p(A+".dtick",I),p(A+".showgrid",!!k&&void 0)&&(p(A+".gridcolor"),p(A+".gridwidth")),n[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:a,setScale:d.identity,c2l:d.identity,r2l:d.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var F=n.lonaxis.range,H=n.lataxis.range,U=F[0],X=F[1];U>0&&X<0&&(X+=360);var Z,Y,W,te=(U+X)/2;if(!f){var z=l?h.projRotate:[te,0,0];Z=p("projection.rotation.lon",z[0]),p("projection.rotation.lat",z[1]),p("projection.rotation.roll",z[2]),p("showcoastlines",!l&&k)&&(p("coastlinecolor"),p("coastlinewidth")),p("showocean",!!k&&void 0)&&p("oceancolor")}f?(Y=-96.6,W=38.7):(Y=l?te:Z,W=(H[0]+H[1])/2),p("center.lon",Y),p("center.lat",W),x&&(p("projection.tilt"),p("projection.distance")),m&&p("projection.parallels",h.projParallels||[0,60]),p("projection.scale"),p("showland",!!k&&void 0)&&p("landcolor"),p("showlakes",!!k&&void 0)&&p("lakecolor"),p("showrivers",!!k&&void 0)&&(p("rivercolor"),p("riverwidth")),p("showcountries",l&&"usa"!==u&&k)&&(p("countrycolor"),p("countrywidth")),("usa"===u||"north america"===u&&50===c)&&(p("showsubunits",k),p("subunitcolor"),p("subunitwidth")),l||p("showframe",k)&&(p("framecolor"),p("framewidth")),p("bgcolor"),p("fitbounds")&&(delete n.projection.scale,l?(delete n.center.lon,delete n.center.lat):w?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}$.exports=function(o,n,p){g(o,n,p,{type:"geo",attributes:e,handleDefaults:r,fullData:p,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../registry"),t=Math.PI/180,e=180/Math.PI,i={cursor:"pointer"},r={cursor:"auto"};function o(k,T){return d.behavior.zoom().translate(T.translate()).scale(T.scale())}function n(k,T,L){var A=k.id,I=k.graphDiv,D=I.layout,S=D[A],C=I._fullLayout,R=C[A],F={},H={};function U(X,Z){F[A+"."+X]=g.nestedProperty(S,X).get(),_.call("_storeDirectGUIEdit",D,C._preGUI,F);var Y=g.nestedProperty(R,X);Y.get()!==Z&&(Y.set(Z),g.nestedProperty(S,X).set(Z),H[A+"."+X]=Z)}L(U),U("projection.scale",T.scale()/k.fitScale),U("fitbounds",!1),I.emit("plotly_relayout",H)}function p(k,T){var L=o(0,T);function A(I){var D=T.invert(k.midPt);I("center.lon",D[0]),I("center.lat",D[1])}return L.on("zoomstart",function(){d.select(this).style(i)}).on("zoom",function(){T.scale(d.event.scale).translate(d.event.translate),k.render();var I=T.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/k.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1]})}).on("zoomend",function(){d.select(this).style(r),n(k,T,A)}),L}function s(k,T){var L,A,I,D,S,C,R,F,H,U=o(0,T);function X(Y){return T.invert(Y)}function Z(Y){var W=T.rotate(),te=T.invert(k.midPt);Y("projection.rotation.lon",-W[0]),Y("center.lon",te[0]),Y("center.lat",te[1])}return U.on("zoomstart",function(){d.select(this).style(i),L=d.mouse(this),A=T.rotate(),I=T.translate(),D=A,S=X(L)}).on("zoom",function(){if(C=d.mouse(this),function(te){var z=X(te);if(!z)return!0;var N=T(z);return Math.abs(N[0]-te[0])>2||Math.abs(N[1]-te[1])>2}(L))return U.scale(T.scale()),void U.translate(T.translate());T.scale(d.event.scale),T.translate([I[0],d.event.translate[1]]),S?X(C)&&(F=X(C),T.rotate(R=[D[0]+(F[0]-S[0]),A[1],A[2]]),D=R):S=X(L=C),H=!0,k.render();var Y=T.rotate(),W=T.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/k.fitScale,"geo.center.lon":W[0],"geo.center.lat":W[1],"geo.projection.rotation.lon":-Y[0]})}).on("zoomend",function(){d.select(this).style(r),H&&n(k,T,Z)}),U}function a(k,T){var L,A={r:T.rotate(),k:T.scale()},I=o(0,T),D=function(X){for(var Z=0,Y=arguments.length,W=[];++Z<Y;)W.push(arguments[Z]);var te=d.dispatch.apply(null,W);return te.of=function(z,N){return function(V){var Q;try{Q=V.sourceEvent=d.event,V.target=X,d.event=V,te[V.type].apply(z,N)}finally{d.event=Q}}},te}(I,"zoomstart","zoom","zoomend"),S=0,C=I.on;function R(X){S++||X({type:"zoomstart"})}function F(X){X({type:"zoom"})}function H(X){--S||X({type:"zoomend"})}function U(X){var Z=T.rotate();X("projection.rotation.lon",-Z[0]),X("projection.rotation.lat",-Z[1])}return I.on("zoomstart",function(){d.select(this).style(i);var X=d.mouse(this),Z=T.rotate(),Y=Z,W=T.translate(),te=u(Z);L=c(T,X),C.call(I,"zoom",function(){var z=d.mouse(this);if(T.scale(A.k=d.event.scale),L){if(c(T,z)){T.rotate(Z).translate(W);var N=c(T,z),V=v(L,N),Q=w(h(te,V)),j=A.r=f(Q,L,Y);isFinite(j[0])&&isFinite(j[1])&&isFinite(j[2])||(j=Y),T.rotate(j),Y=j}}else L=c(T,X=z);F(D.of(this,arguments))}),R(D.of(this,arguments))}).on("zoomend",function(){d.select(this).style(r),C.call(I,"zoom",null),H(D.of(this,arguments)),n(k,T,U)}).on("zoom.redraw",function(){k.render();var X=T.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/k.fitScale,"geo.projection.rotation.lon":-X[0],"geo.projection.rotation.lat":-X[1]})}),d.rebind(I,D,"on")}function c(k,T){var A,I,D,S,L=k.invert(T);return L&&isFinite(L[0])&&isFinite(L[1])&&(I=(A=L)[0]*t,D=A[1]*t,[(S=Math.cos(D))*Math.cos(I),S*Math.sin(I),Math.sin(D)])}function u(k){var T=.5*k[0]*t,L=.5*k[1]*t,A=.5*k[2]*t,I=Math.sin(T),D=Math.cos(T),S=Math.sin(L),C=Math.cos(L),R=Math.sin(A),F=Math.cos(A);return[D*C*F+I*S*R,I*C*F-D*S*R,D*S*F+I*C*R,D*C*R-I*S*F]}function h(k,T){var L=k[0],A=k[1],I=k[2],D=k[3],S=T[0],C=T[1],R=T[2],F=T[3];return[L*S-A*C-I*R-D*F,L*C+A*S+I*F-D*R,L*R-A*F+I*S+D*C,L*F+A*R-I*C+D*S]}function v(k,T){if(k&&T){var L=[(S=k)[1]*(C=T)[2]-S[2]*C[1],S[2]*C[0]-S[0]*C[2],S[0]*C[1]-S[1]*C[0]],A=Math.sqrt(b(L,L)),I=.5*Math.acos(Math.max(-1,Math.min(1,b(k,T)))),D=Math.sin(I)/A;return A&&[Math.cos(I),L[2]*D,-L[1]*D,L[0]*D]}var S,C}function f(k,T,L){var A=m(T,2,k[0]);A=m(A,1,k[1]),A=m(A,0,k[2]-L[2]);var I,D,S=T[0],C=T[1],R=T[2],F=A[0],H=A[1],U=A[2],X=Math.atan2(C,S)*e,Z=Math.sqrt(S*S+C*C);Math.abs(H)>Z?(D=(H>0?90:-90)-X,I=0):(D=Math.asin(H/Z)*e-X,I=Math.sqrt(Z*Z-H*H));var Y=180-D-2*X,W=(Math.atan2(U,F)-Math.atan2(R,I))*e,te=(Math.atan2(U,F)-Math.atan2(R,-I))*e;return l(L[0],L[1],D,W)<=l(L[0],L[1],Y,te)?[D,W,L[2]]:[Y,te,L[2]]}function l(k,T,L,A){var I=x(L-k),D=x(A-T);return Math.sqrt(I*I+D*D)}function x(k){return(k%360+540)%360-180}function m(k,T,L){var A=L*t,I=k.slice(),D=0===T?1:0,S=2===T?1:2,C=Math.cos(A),R=Math.sin(A);return I[D]=k[D]*C-k[S]*R,I[S]=k[S]*C+k[D]*R,I}function w(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*e,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*e]}function b(k,T){for(var L=0,A=0,I=k.length;A<I;++A)L+=k[A]*T[A];return L}$.exports=function(k,T){return(T._isScoped?p:T._isClipped?a:s)(k,k.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(y,$,ee){"use strict";var d=y("../registry"),g=y("./cartesian/constants").SUBPLOT_PATTERN;ee.getSubplotCalcData=function(_,t,e){var i=d.subplotsRegistry[t];if(!i)return[];for(var r=i.attr,o=[],n=0;n<_.length;n++){var p=_[n];p[0].trace[r]===e&&o.push(p)}return o},ee.getModuleCalcData=function(_,t){var e,i=[],r=[];if(!(e="string"==typeof t?d.getModule(t).plot:"function"==typeof t?t:t.plot))return[i,_];for(var o=0;o<_.length;o++){var n=_[o],p=n[0].trace;!0===p.visible&&0!==p._length&&(p._module.plot===e?i.push(n):r.push(n))}return[i,r]},ee.getSubplotData=function(_,t,e){if(!d.subplotsRegistry[t])return[];var i,r,o,n=d.subplotsRegistry[t].attr,p=[];if("gl2d"===t){var s=e.match(g);r="x"+s[1],o="y"+s[2]}for(var a=0;a<_.length;a++)i=_[a],"gl2d"===t&&d.traceIs(i,"gl2d")?i[n[0]]===r&&i[n[1]]===o&&p.push(i):i[n]===e&&p.push(i);return p}},{"../registry":638,"./cartesian/constants":561}],594:[function(y,$,ee){"use strict";var d=y("mouse-change"),g=y("mouse-wheel"),_=y("mouse-event-offset"),t=y("../cartesian/constants"),e=y("has-passive-events");function i(r,o){this.element=r,this.plot=o,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function(r){var o=r.mouseContainer,n=r.glplot,p=new i(o,n);function s(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function a(c,u,h){var v,f,l=r.calcDataBox(),x=n.viewBox,m=p.lastPos[0],w=p.lastPos[1],b=t.MINDRAG*n.pixelRatio,k=t.MINZOOM*n.pixelRatio;function T(C,R,F){var H=Math.min(R,F),U=Math.max(R,F);H!==U?(l[C]=H,l[C+2]=U,p.dataBox=l,r.setRanges(l)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(u*=n.pixelRatio,h=x[3]-x[1]-(h*=n.pixelRatio),r.fullLayout.dragmode){case"zoom":if(c){var L=u/(x[2]-x[0])*(l[2]-l[0])+l[0],A=h/(x[3]-x[1])*(l[3]-l[1])+l[1];p.boxInited||(p.boxStart[0]=L,p.boxStart[1]=A,p.dragStart[0]=u,p.dragStart[1]=h),p.boxEnd[0]=L,p.boxEnd[1]=A,p.boxInited=!0,p.boxEnabled||p.boxStart[0]===p.boxEnd[0]&&p.boxStart[1]===p.boxEnd[1]||(p.boxEnabled=!0);var I=Math.abs(p.dragStart[0]-u)<k,D=Math.abs(p.dragStart[1]-h)<k;if(!function(){for(var C=r.graphDiv._fullLayout._axisConstraintGroups,R=r.xaxis._id,F=r.yaxis._id,H=0;H<C.length;H++)if(-1!==C[H][R]){if(-1!==C[H][F])return!0;break}return!1}()||I&&D)I&&(p.boxEnd[0]=p.boxStart[0]),D&&(p.boxEnd[1]=p.boxStart[1]);else{v=p.boxEnd[0]-p.boxStart[0],f=p.boxEnd[1]-p.boxStart[1];var S=(l[3]-l[1])/(l[2]-l[0]);Math.abs(v*S)>Math.abs(f)?(p.boxEnd[1]=p.boxStart[1]+Math.abs(v)*S*(f>=0?1:-1),p.boxEnd[1]<l[1]?(p.boxEnd[1]=l[1],p.boxEnd[0]=p.boxStart[0]+(l[1]-p.boxStart[1])/Math.abs(S)):p.boxEnd[1]>l[3]&&(p.boxEnd[1]=l[3],p.boxEnd[0]=p.boxStart[0]+(l[3]-p.boxStart[1])/Math.abs(S))):(p.boxEnd[0]=p.boxStart[0]+Math.abs(f)/S*(v>=0?1:-1),p.boxEnd[0]<l[0]?(p.boxEnd[0]=l[0],p.boxEnd[1]=p.boxStart[1]+(l[0]-p.boxStart[0])*Math.abs(S)):p.boxEnd[0]>l[2]&&(p.boxEnd[0]=l[2],p.boxEnd[1]=p.boxStart[1]+(l[2]-p.boxStart[0])*Math.abs(S)))}}else p.boxEnabled?(f=p.boxStart[1]!==p.boxEnd[1],(v=p.boxStart[0]!==p.boxEnd[0])||f?(v&&(T(0,p.boxStart[0],p.boxEnd[0]),r.xaxis.autorange=!1),f&&(T(1,p.boxStart[1],p.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),p.boxEnabled=!1,p.boxInited=!1):p.boxInited&&(p.boxInited=!1);break;case"pan":p.boxEnabled=!1,p.boxInited=!1,c?(p.panning||(p.dragStart[0]=u,p.dragStart[1]=h),Math.abs(p.dragStart[0]-u)<b&&(u=p.dragStart[0]),Math.abs(p.dragStart[1]-h)<b&&(h=p.dragStart[1]),f=(w-h)*(l[3]-l[1])/(n.viewBox[3]-n.viewBox[1]),l[0]+=v=(m-u)*(l[2]-l[0])/(n.viewBox[2]-n.viewBox[0]),l[2]+=v,l[1]+=f,l[3]+=f,r.setRanges(l),p.panning=!0,p.lastInputTime=Date.now(),s(),r.cameraChanged(),r.handleAnnotations()):p.panning&&(p.panning=!1,r.relayoutCallback())}p.lastPos[0]=u,p.lastPos[1]=h}return p.mouseListener=d(o,a),o.addEventListener("touchstart",function(c){var u=_(c.changedTouches[0],o);a(0,u[0],u[1]),a(1,u[0],u[1]),c.preventDefault()},!!e&&{passive:!1}),o.addEventListener("touchmove",function(c){c.preventDefault();var u=_(c.changedTouches[0],o);a(1,u[0],u[1]),c.preventDefault()},!!e&&{passive:!1}),o.addEventListener("touchend",function(c){a(0,p.lastPos[0],p.lastPos[1]),c.preventDefault()},!!e&&{passive:!1}),p.wheelListener=g(o,function(c,u){if(!r.scrollZoom)return!1;var h=r.calcDataBox(),v=n.viewBox,f=p.lastPos[0],l=p.lastPos[1],x=Math.exp(5*u/(v[3]-v[1])),m=f/(v[2]-v[0])*(h[2]-h[0])+h[0],w=l/(v[3]-v[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-m)*x+m,h[2]=(h[2]-m)*x+m,h[1]=(h[1]-w)*x+w,h[3]=(h[3]-w)*x+w,r.setRanges(h),p.lastInputTime=Date.now(),s(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),p}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(y,$,ee){"use strict";var d=y("../cartesian/axes"),g=y("../../lib/str2rgbarray");function _(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var t=_.prototype,e=["xaxis","yaxis"];t.merge=function(i){var r,o,n,p,s,a,c,u,h,v,f;for(this.titleEnable=!1,this.backgroundColor=g(i.plot_bgcolor),v=0;v<2;++v){var l=(r=e[v]).charAt(0);for(n=(o=i[this.scene[r]._name]).title.text===this.scene.fullLayout._dfltTitle[l]?"":o.title.text,f=0;f<=2;f+=2)this.labelEnable[v+f]=!1,this.labels[v+f]=n,this.labelColor[v+f]=g(o.title.font.color),this.labelFont[v+f]=o.title.font.family,this.labelSize[v+f]=o.title.font.size,this.labelPad[v+f]=this.getLabelPad(r,o),this.tickEnable[v+f]=!1,this.tickColor[v+f]=g((o.tickfont||{}).color),this.tickAngle[v+f]="auto"===o.tickangle?0:Math.PI*-o.tickangle/180,this.tickPad[v+f]=this.getTickPad(o),this.tickMarkLength[v+f]=0,this.tickMarkWidth[v+f]=o.tickwidth||0,this.tickMarkColor[v+f]=g(o.tickcolor),this.borderLineEnable[v+f]=!1,this.borderLineColor[v+f]=g(o.linecolor),this.borderLineWidth[v+f]=o.linewidth||0;c=this.hasSharedAxis(o),s=this.hasAxisInDfltPos(r,o)&&!c,a=this.hasAxisInAltrPos(r,o)&&!c,p=o.mirror||!1,u=c?-1!==String(p).indexOf("all"):!!p,h=c?"allticks"===p:-1!==String(p).indexOf("ticks"),s?this.labelEnable[v]=!0:a&&(this.labelEnable[v+2]=!0),s?this.tickEnable[v]=o.showticklabels:a&&(this.tickEnable[v+2]=o.showticklabels),(s||u)&&(this.borderLineEnable[v]=o.showline),(a||u)&&(this.borderLineEnable[v+2]=o.showline),(s||h)&&(this.tickMarkLength[v]=this.getTickMarkLength(o)),(a||h)&&(this.tickMarkLength[v+2]=this.getTickMarkLength(o)),this.gridLineEnable[v]=o.showgrid,this.gridLineColor[v]=g(o.gridcolor),this.gridLineWidth[v]=o.gridwidth,this.zeroLineEnable[v]=o.zeroline,this.zeroLineColor[v]=g(o.zerolinecolor),this.zeroLineWidth[v]=o.zerolinewidth}},t.hasSharedAxis=function(i){var r=this.scene;return 0!==d.findSubplotsWithAxis(r.fullLayout._subplots.gl2d,i).indexOf(r.id)},t.hasAxisInDfltPos=function(i,r){var o=r.side;return"xaxis"===i?"bottom"===o:"yaxis"===i?"left"===o:void 0},t.hasAxisInAltrPos=function(i,r){var o=r.side;return"xaxis"===i?"top"===o:"yaxis"===i?"right"===o:void 0},t.getLabelPad=function(i,r){var o=r.title.font.size,n=r.showticklabels;return"xaxis"===i?"top"===r.side?o*(1.5+(n?1:0))-10:o*(1.5+(n?.5:0))-10:"yaxis"===i?"right"===r.side?10+o*(1.5+(n?1:.5)):10+o*(1.5+(n?.5:0)):void 0},t.getTickPad=function(i){return"outside"===i.ticks?10+i.ticklen:15},t.getTickMarkLength=function(i){if(!i.ticks)return 0;var r=i.ticklen;return"inside"===i.ticks?-r:r},$.exports=function(i){return new _(i)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(y,$,ee){"use strict";var d=y("../../plot_api/edit_types").overrideAll,g=y("./scene2d"),_=y("../layout_attributes"),t=y("../../constants/xmlns_namespaces"),e=y("../cartesian/constants"),i=y("../cartesian"),r=y("../../components/fx/layout_attributes"),o=y("../get_data").getSubplotData;ee.name="gl2d",ee.attr=["xaxis","yaxis"],ee.idRoot=["x","y"],ee.idRegex=e.idRegex,ee.attrRegex=e.attrRegex,ee.attributes=y("../cartesian/attributes"),ee.supplyLayoutDefaults=function(n,p,s){p._has("cartesian")||i.supplyLayoutDefaults(n,p,s)},ee.layoutAttrOverrides=d(i.layoutAttributes,"plot","from-root"),ee.baseLayoutAttrOverrides=d({plot_bgcolor:_.plot_bgcolor,hoverlabel:r.hoverlabel},"plot","nested"),ee.plot=function(n){for(var p=n._fullLayout,s=n._fullData,a=p._subplots.gl2d,c=0;c<a.length;c++){var u=a[c],h=p._plots[u],v=o(s,"gl2d",u),f=h._scene2d;void 0===f&&(f=new g({id:u,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},p),h._scene2d=f),f.plot(v,n.calcdata,p,n.layout)}},ee.clean=function(n,p,s,a){for(var c=a._subplots.gl2d||[],u=0;u<c.length;u++){var h=c[u],v=a._plots[h];v._scene2d&&0===o(n,"gl2d",h).length&&(v._scene2d.destroy(),delete a._plots[h])}i.clean.apply(this,arguments)},ee.drawFramework=function(n){n._context.staticPlot||i.drawFramework(n)},ee.toSVG=function(n){for(var p=n._fullLayout,s=p._subplots.gl2d,a=0;a<s.length;a++){var c=p._plots[s[a]]._scene2d,u=c.toImage("png");p._glimages.append("svg:image").attr({xmlns:t.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),c.destroy()}},ee.updateFx=function(n){for(var p=n._fullLayout,s=p._subplots.gl2d,a=0;a<s.length;a++)p._plots[s[a]]._scene2d.updateFx(p.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(y,$,ee){"use strict";var d,g,_=y("../../registry"),t=y("../../plots/cartesian/axes"),e=y("../../components/fx"),i=y("../../../stackgl_modules").gl_plot2d,r=y("../../../stackgl_modules").gl_spikes2d,o=y("../../../stackgl_modules").gl_select_box,n=y("webgl-context"),p=y("./convert"),s=y("./camera"),a=y("../../lib/show_no_webgl_msg"),c=y("../cartesian/constraints"),u=c.enforce,h=c.clean,v=y("../cartesian/autorange").doAutoRange,f=y("../../components/dragelement/helpers"),l=f.drawMode,x=f.selectMode,m=["xaxis","yaxis"],w=y("../cartesian/constants").SUBPLOT_PATTERN;function b(T,L){this.container=T.container,this.graphDiv=T.graphDiv,this.pixelRatio=T.plotGlPixelRatio||window.devicePixelRatio,this.id=T.id,this.staticPlot=!!T.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),this.stopped||(this.glplotOptions=p(this),this.glplotOptions.merge(L),this.glplot=i(this.glplotOptions),this.camera=s(this),this.traces={},this.spikes=r(this.glplot),this.selectBox=o(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=b;var k=b.prototype;k.makeFramework=function(){if(this.staticPlot){if(!(g||(d=document.createElement("canvas"),g=n({canvas:d,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=d,this.gl=g}else{var T=this.container.querySelector(".gl-canvas-focus"),L=n({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L)return a(this),void(this.stopped=!0);this.canvas=T,this.gl=L}var A=this.canvas;A.style.width="100%",A.style.height="100%",A.style.position="absolute",A.style.top="0px",A.style.left="0px",A.style["pointer-events"]="none",this.updateSize(A);var I=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",I.style["z-index"]=20,I.style["pointer-events"]="none";var D=this.mouseContainer=document.createElement("div");D.style.position="absolute",D.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(I),S.appendChild(D);var C=this;D.addEventListener("mouseout",function(){C.isMouseOver=!1,C.unhover()}),D.addEventListener("mouseover",function(){C.isMouseOver=!0})},k.toImage=function(T){T||(T="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(d),this.updateSize(this.canvas);var L=this.glplot.gl,A=L.drawingBufferWidth,I=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var D=new Uint8Array(A*I*4);L.readPixels(0,0,A,I,L.RGBA,L.UNSIGNED_BYTE,D);for(var S=0,C=I-1;S<C;++S,--C)for(var R=0;R<A;++R)for(var F=0;F<4;++F){var H=D[4*(A*S+R)+F];D[4*(A*S+R)+F]=D[4*(A*C+R)+F],D[4*(A*C+R)+F]=H}var U=document.createElement("canvas");U.width=A,U.height=I;var X,Z=U.getContext("2d"),Y=Z.createImageData(A,I);switch(Y.data.set(D),Z.putImageData(Y,0,0),T){case"jpeg":X=U.toDataURL("image/jpeg");break;case"webp":X=U.toDataURL("image/webp");break;default:X=U.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(d),X},k.updateSize=function(T){T||(T=this.canvas);var L=this.pixelRatio,A=this.fullLayout,D=A.height,S=0|Math.ceil(L*A.width),C=0|Math.ceil(L*D);return T.width===S&&T.height===C||(T.width=S,T.height=C),T},k.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var T=[t.calcTicks(this.xaxis),t.calcTicks(this.yaxis)],L=0;L<2;++L)for(var A=0;A<T[L].length;++A)T[L][A].text=T[L][A].text+"";return T},k.updateRefs=function(T){this.fullLayout=T;var L=this.id.match(w),I="yaxis"+L[2];this.xaxis=this.fullLayout["xaxis"+L[1]],this.yaxis=this.fullLayout[I]},k.relayoutCallback=function(){var T=this.graphDiv,L=this.xaxis,A=this.yaxis,I=T.layout,D={},S=D[L._name+".range"]=L.range.slice(),C=D[A._name+".range"]=A.range.slice();D[L._name+".autorange"]=L.autorange,D[A._name+".autorange"]=A.autorange,_.call("_storeDirectGUIEdit",T.layout,T._fullLayout._preGUI,D);var R=I[L._name];R.range=S,R.autorange=L.autorange;var F=I[A._name];F.range=C,F.autorange=A.autorange,D.lastInputTime=this.camera.lastInputTime,T.emit("plotly_relayout",D)},k.cameraChanged=function(){var T=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks();(function(A,I){for(var D=0;D<2;++D){var S=A[D],C=I[D];if(S.length!==C.length)return!0;for(var R=0;R<S.length;++R)if(S[R].x!==C[R].x)return!0}return!1})(L,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=T.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},k.handleAnnotations=function(){for(var T=this.graphDiv,L=this.fullLayout.annotations,A=0;A<L.length;A++){var I=L[A];I.xref===this.xaxis._id&&I.yref===this.yaxis._id&&_.getComponentMethod("annotations","drawOne")(T,A)}},k.destroy=function(){if(this.glplot){var T=this.traces;T&&Object.keys(T).map(function(L){T[L].dispose(),delete T[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},k.plot=function(T,L,A){var I=this.glplot;this.updateRefs(A),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(T,L),this.updateFx(A.dragmode);var D=A.width,S=A.height;this.updateSize(this.canvas);var C=this.glplotOptions;C.merge(A),C.screenBox=[0,0,D,S];var R={_fullLayout:{_axisConstraintGroups:A._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:A._size}};h(R,this.xaxis),h(R,this.yaxis);var F,H,U=A._size,X=this.xaxis.domain,Z=this.yaxis.domain;for(C.viewBox=[U.l+X[0]*U.w,U.b+Z[0]*U.h,D-U.r-(1-X[1])*U.w,S-U.t-(1-Z[1])*U.h],this.mouseContainer.style.width=U.w*(X[1]-X[0])+"px",this.mouseContainer.style.height=U.h*(Z[1]-Z[0])+"px",this.mouseContainer.height=U.h*(Z[1]-Z[0]),this.mouseContainer.style.left=U.l+X[0]*U.w+"px",this.mouseContainer.style.top=U.t+(1-Z[1])*U.h+"px",H=0;H<2;++H)(F=this[m[H]])._length=C.viewBox[H+2]-C.viewBox[H],v(this.graphDiv,F),F.setScale();u(R),C.ticks=this.computeTickMarks(),C.dataBox=this.calcDataBox(),C.merge(A),I.update(C),this.glplot.draw()},k.calcDataBox=function(){var T=this.xaxis,L=this.yaxis,A=T.range,I=L.range,D=T.r2l,S=L.r2l;return[D(A[0]),S(I[0]),D(A[1]),S(I[1])]},k.setRanges=function(T){var L=this.xaxis,A=this.yaxis,I=L.l2r,D=A.l2r;L.range=[I(T[0]),I(T[2])],A.range=[D(T[1]),D(T[3])]},k.updateTraces=function(T,L){var A,I,D,S=Object.keys(this.traces);this.fullData=T;e:for(A=0;A<S.length;A++){var C=S[A],R=this.traces[C];for(I=0;I<T.length;I++)if((D=T[I]).uid===C&&D.type===R.type)continue e;R.dispose(),delete this.traces[C]}for(A=0;A<T.length;A++){var F=L[A],H=this.traces[(D=T[A]).uid];H?H.update(D,F):(H=D._module.plot(this,D,F),this.traces[D.uid]=H)}this.glplot.objects.sort(function(U,X){return U._trace.index-X._trace.index})},k.updateFx=function(T){x(T)||l(T)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===T?"move":"zoom"===T?"crosshair":null},k.emitPointAction=function(T,L){for(var A,I=T.trace.uid,D=T.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===I&&(A=this.fullData[S]);var C={x:T.traceCoord[0],y:T.traceCoord[1],curveNumber:A.index,pointNumber:D,data:A._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(C,A,D),this.graphDiv.emit(L,{points:[C]})},k.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var T=this.glplot,L=this.camera,A=L.mouseListener,I=1===this.lastButtonState&&0===A.buttons,D=this.fullLayout;this.lastButtonState=A.buttons,this.cameraChanged();var S,C=A.x*T.pixelRatio,R=this.canvas.height-T.pixelRatio*A.y;if(L.boxEnabled&&"zoom"===D.dragmode){this.selectBox.enabled=!0;for(var F=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],H=0;H<2;H++)L.boxStart[H]===L.boxEnd[H]&&(F[H]=T.dataBox[H],F[H+2]=T.dataBox[H+2]);T.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var U=D._size,Y=(S=T.pick(C/T.pixelRatio+U.l+this.xaxis.domain[0]*U.w,R/T.pixelRatio-(U.t+(1-this.yaxis.domain[1])*U.h)))&&S.object._trace.handlePick(S);if(Y&&I&&this.emitPointAction(Y,"plotly_click"),S&&"skip"!==S.object._trace.hoverinfo&&D.hovermode&&Y&&(!this.lastPickResult||this.lastPickResult.traceUid!==Y.trace.uid||this.lastPickResult.dataCoord[0]!==Y.dataCoord[0]||this.lastPickResult.dataCoord[1]!==Y.dataCoord[1])){var W=Y;this.lastPickResult={traceUid:Y.trace?Y.trace.uid:null,dataCoord:Y.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),W.screenCoord=[((T.viewBox[2]-T.viewBox[0])*(S.dataCoord[0]-T.dataBox[0])/(T.dataBox[2]-T.dataBox[0])+T.viewBox[0])/T.pixelRatio,(this.canvas.height-(T.viewBox[3]-T.viewBox[1])*(S.dataCoord[1]-T.dataBox[1])/(T.dataBox[3]-T.dataBox[1])-T.viewBox[1])/T.pixelRatio],this.emitPointAction(Y,"plotly_hover");var te=this.fullData[W.trace.index]||{},z=W.pointIndex,N=e.castHoverinfo(te,D,z);if(N&&"all"!==N){var V=N.split("+");-1===V.indexOf("x")&&(W.traceCoord[0]=void 0),-1===V.indexOf("y")&&(W.traceCoord[1]=void 0),-1===V.indexOf("z")&&(W.traceCoord[2]=void 0),-1===V.indexOf("text")&&(W.textLabel=void 0),-1===V.indexOf("name")&&(W.name=void 0)}e.loneHover({x:W.screenCoord[0],y:W.screenCoord[1],xLabel:this.hoverFormatter("xaxis",W.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",W.traceCoord[1]),zLabel:W.traceCoord[2],text:W.textLabel,name:W.name,color:e.castHoverOption(te,z,"bgcolor")||W.color,borderColor:e.castHoverOption(te,z,"bordercolor"),fontFamily:e.castHoverOption(te,z,"font.family"),fontSize:e.castHoverOption(te,z,"font.size"),fontColor:e.castHoverOption(te,z,"font.color"),nameLength:e.castHoverOption(te,z,"namelength"),textAlign:e.castHoverOption(te,z,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),T.draw()}},k.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},k.hoverFormatter=function(T,L){if(void 0!==L){var A=this[T];return t.tickText(A,A.c2l(L),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(y,$,ee){"use strict";var d=y("../../plot_api/edit_types").overrideAll,g=y("../../components/fx/layout_attributes"),_=y("./scene"),t=y("../get_data").getSubplotData,e=y("../../lib"),i=y("../../constants/xmlns_namespaces");ee.name="gl3d",ee.attr="scene",ee.idRoot="scene",ee.idRegex=ee.attrRegex=e.counterRegex("scene"),ee.attributes=y("./layout/attributes"),ee.layoutAttributes=y("./layout/layout_attributes"),ee.baseLayoutAttrOverrides=d({hoverlabel:g.hoverlabel},"plot","nested"),ee.supplyLayoutDefaults=y("./layout/defaults"),ee.plot=function(r){for(var o=r._fullLayout,n=r._fullData,p=o._subplots.gl3d,s=0;s<p.length;s++){var a=p[s],c=t(n,"gl3d",a),u=o[a],h=u.camera,v=u._scene;v||(v=new _({id:a,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio,camera:h},o),u._scene=v),v.viewInitial||(v.viewInitial={up:{x:h.up.x,y:h.up.y,z:h.up.z},eye:{x:h.eye.x,y:h.eye.y,z:h.eye.z},center:{x:h.center.x,y:h.center.y,z:h.center.z}}),v.plot(c,o,r.layout)}},ee.clean=function(r,o,n,p){for(var s=p._subplots.gl3d||[],a=0;a<s.length;a++){var c=s[a];!o[c]&&p[c]._scene&&(p[c]._scene.destroy(),p._infolayer&&p._infolayer.selectAll(".annotation-"+c).remove())}},ee.toSVG=function(r){for(var o=r._fullLayout,n=o._subplots.gl3d,p=o._size,s=0;s<n.length;s++){var a=o[n[s]],c=a.domain,u=a._scene,h=u.toImage("png");o._glimages.append("svg:image").attr({xmlns:i.svg,"xlink:href":h,x:p.l+p.w*c.x[0],y:p.t+p.h*(1-c.y[1]),width:p.w*(c.x[1]-c.x[0]),height:p.h*(c.y[1]-c.y[0]),preserveAspectRatio:"none"}),u.destroy()}},ee.cleanId=function(r){if(r.match(/^scene[0-9]*$/)){var o=r.substr(5);return"1"===o&&(o=""),"scene"+o}},ee.updateFx=function(r){for(var o=r._fullLayout,n=o._subplots.gl3d,p=0;p<n.length;p++)o[n[p]]._scene.updateFx(o.dragmode,o.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(y,$,ee){"use strict";$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(y,$,ee){"use strict";var d=y("../../../components/color"),g=y("../../cartesian/layout_attributes"),_=y("../../../lib/extend").extendFlat,t=y("../../../plot_api/edit_types").overrideAll;$.exports=t({visible:g.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:d.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:g.color,categoryorder:g.categoryorder,categoryarray:g.categoryarray,title:{text:g.title.text,font:g.title.font},type:_({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorange:g.autorange,rangemode:g.rangemode,range:_({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,mirror:g.mirror,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickformat:g.tickformat,tickformatstops:g.tickformatstops,hoverformat:g.hoverformat,showline:g.showline,linecolor:g.linecolor,linewidth:g.linewidth,showgrid:g.showgrid,gridcolor:_({},g.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:g.gridwidth,zeroline:g.zeroline,zerolinecolor:g.zerolinecolor,zerolinewidth:g.zerolinewidth,_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(y,$,ee){"use strict";var d=y("tinycolor2").mix,g=y("../../../lib"),_=y("../../../plot_api/plot_template"),t=y("./axis_attributes"),e=y("../../cartesian/type_defaults"),i=y("../../cartesian/axis_defaults"),r=["xaxis","yaxis","zaxis"];$.exports=function(o,n,p){var s,a;function c(v,f){return g.coerce(s,a,t,v,f)}for(var u=0;u<r.length;u++){var h=r[u];s=o[h]||{},(a=_.newContainer(n,h))._id=h[0]+p.scene,a._name=h,e(s,a,c,p),i(s,a,c,{font:p.font,letter:h[0],data:p.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:p.bgColor,calendar:p.calendar},p.fullLayout),c("gridcolor",d(a.color,p.bgColor,13600/187).toRgbString()),c("title.text",h[0]),a.setScale=g.noop,c("showspikes")&&(c("spikesides"),c("spikethickness"),c("spikecolor",a.color)),c("showaxeslabels"),c("showbackground")&&c("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(y,$,ee){"use strict";var d=y("../../../lib/str2rgbarray"),g=y("../../../lib"),_=["xaxis","yaxis","zaxis"];function t(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}t.prototype.merge=function(e,i){for(var r=0;r<3;++r){var o=i[_[r]];o.visible?(this.labels[r]=e._meta?g.templateString(o.title.text,e._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(this.labelColor[r]=d(o.title.font.color)),o.title.font.family&&(this.labelFont[r]=o.title.font.family),o.title.font.size&&(this.labelSize[r]=o.title.font.size)),"showline"in o&&(this.lineEnable[r]=o.showline),"linecolor"in o&&(this.lineColor[r]=d(o.linecolor)),"linewidth"in o&&(this.lineWidth[r]=o.linewidth),"showgrid"in o&&(this.gridEnable[r]=o.showgrid),"gridcolor"in o&&(this.gridColor[r]=d(o.gridcolor)),"gridwidth"in o&&(this.gridWidth[r]=o.gridwidth),"log"===o.type?this.zeroEnable[r]=!1:"zeroline"in o&&(this.zeroEnable[r]=o.zeroline),"zerolinecolor"in o&&(this.zeroLineColor[r]=d(o.zerolinecolor)),"zerolinewidth"in o&&(this.zeroLineWidth[r]=o.zerolinewidth),this.lineTickEnable[r]=!(!("ticks"in o)||!o.ticks),"ticklen"in o&&(this.lineTickLength[r]=this._defaultLineTickLength[r]=o.ticklen),"tickcolor"in o&&(this.lineTickColor[r]=d(o.tickcolor)),"tickwidth"in o&&(this.lineTickWidth[r]=o.tickwidth),"tickangle"in o&&(this.tickAngle[r]="auto"===o.tickangle?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(this.tickEnable[r]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(this.tickColor[r]=d(o.tickfont.color)),o.tickfont.family&&(this.tickFont[r]=o.tickfont.family),o.tickfont.size&&(this.tickSize[r]=o.tickfont.size)),"mirror"in o?-1!==["ticks","all","allticks"].indexOf(o.mirror)?(this.lineTickMirror[r]=!0,this.lineMirror[r]=!0):!0===o.mirror?(this.lineTickMirror[r]=!1,this.lineMirror[r]=!0):(this.lineTickMirror[r]=!1,this.lineMirror[r]=!1):this.lineMirror[r]=!1,"showbackground"in o&&!1!==o.showbackground?(this.backgroundEnable[r]=!0,this.backgroundColor[r]=d(o.backgroundcolor)):this.backgroundEnable[r]=!1):(this.tickEnable[r]=!1,this.labelEnable[r]=!1,this.lineEnable[r]=!1,this.lineTickEnable[r]=!1,this.gridEnable[r]=!1,this.zeroEnable[r]=!1,this.backgroundEnable[r]=!1)}},$.exports=function(e,i){var r=new t;return r.merge(e,i),r}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(y,$,ee){"use strict";var d=y("../../../lib"),g=y("../../../components/color"),_=y("../../../registry"),t=y("../../subplot_defaults"),e=y("./axis_defaults"),i=y("./layout_attributes"),r=y("../../get_data").getSubplotData;function o(n,p,s,a){for(var c=s("bgcolor"),u=g.combine(c,a.paper_bgcolor),h=["up","center","eye"],v=0;v<h.length;v++)s("camera."+h[v]+".x"),s("camera."+h[v]+".y"),s("camera."+h[v]+".z");s("camera.projection.type");var f=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),l=s("aspectmode",f?"manual":"auto");f||(n.aspectratio=p.aspectratio={x:1,y:1,z:1},"manual"===l&&(p.aspectmode="auto"),n.aspectmode=p.aspectmode);var x=r(a.fullData,"gl3d",a.id);e(n,p,{font:a.font,scene:a.id,data:x,bgColor:u,calendar:a.calendar,autotypenumbersDflt:a.autotypenumbersDflt,fullLayout:a.fullLayout}),_.getComponentMethod("annotations3d","handleDefaults")(n,p,a);var m=a.getDfltFromLayout("dragmode");if(!1!==m&&!m)if(m="orbit",n.camera&&n.camera.up){var w=n.camera.up.x,b=n.camera.up.y,k=n.camera.up.z;0!==k&&(w&&b&&k?k/Math.sqrt(w*w+b*b+k*k)>.999&&(m="turntable"):m="turntable")}else m="turntable";s("dragmode",m),s("hovermode",a.getDfltFromLayout("hovermode"))}$.exports=function(n,p,s){var a=p._basePlotModules.length>1;t(n,p,s,{type:"gl3d",attributes:i,handleDefaults:o,fullLayout:p,font:p.font,fullData:s,getDfltFromLayout:function(c){if(!a)return d.validate(n[c],i[c])?n[c]:void 0},autotypenumbersDflt:p.autotypenumbers,paper_bgcolor:p.paper_bgcolor,calendar:p.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(y,$,ee){"use strict";var d=y("./axis_attributes"),g=y("../../domain").attributes,_=y("../../../lib/extend").extendFlat,t=y("../../../lib").counterRegex;function e(i,r,o){return{x:{valType:"number",dflt:i,editType:"camera"},y:{valType:"number",dflt:r,editType:"camera"},z:{valType:"number",dflt:o,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[t("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:_(e(0,0,1),{}),center:_(e(0,0,0),{}),eye:_(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:g({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:d,yaxis:d,zaxis:d,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(y,$,ee){"use strict";var d=y("../../../lib/str2rgbarray"),g=["xaxis","yaxis","zaxis"];function _(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}_.prototype.merge=function(t){for(var e=0;e<3;++e){var i=t[g[e]];i.visible?(this.enabled[e]=i.showspikes,this.colors[e]=d(i.spikecolor),this.drawSides[e]=i.spikesides,this.lineWidth[e]=i.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},$.exports=function(t){var e=new _;return e.merge(t),e}},{"../../../lib/str2rgbarray":528}],606:[function(y,$,ee){"use strict";$.exports=function(e){for(var i=e.axesOptions,r=e.glplot.axesPixels,o=e.fullSceneLayout,n=[[],[],[]],p=0;p<3;++p){var s=o[_[p]];if(s._length=(r[p].hi-r[p].lo)*r[p].pixelsPerDataUnit/e.dataScale[p],Math.abs(s._length)===1/0||isNaN(s._length))n[p]=[];else{s._input_range=s.range.slice(),s.range[0]=r[p].lo/e.dataScale[p],s.range[1]=r[p].hi/e.dataScale[p],s._m=1/(e.dataScale[p]*r[p].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var a=s.tickmode;if("auto"===s.tickmode){s.tickmode="linear";var c=s.nticks||g.constrain(s._length/40,4,9);d.autoTicks(s,Math.abs(s.range[1]-s.range[0])/c)}for(var u=d.calcTicks(s,{msUTC:!0}),h=0;h<u.length;++h)u[h].x=u[h].x*e.dataScale[p],"date"===s.type&&(u[h].text=u[h].text.replace(/\<br\>/g," "));n[p]=u,s.tickmode=a}}for(i.ticks=n,p=0;p<3;++p)for(t[p]=.5*(e.glplot.bounds[0][p]+e.glplot.bounds[1][p]),h=0;h<2;++h)i.bounds[h][p]=e.glplot.bounds[h][p];e.contourLevels=function(v){for(var f=new Array(3),l=0;l<3;++l){for(var x=v[l],m=new Array(x.length),w=0;w<x.length;++w)m[w]=x[w].x;f[l]=m}return f}(n)};var d=y("../../cartesian/axes"),g=y("../../../lib"),_=["xaxis","yaxis","zaxis"],t=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(y,$,ee){"use strict";function d(g,_){var t,e,i=[0,0,0,0];for(t=0;t<4;++t)for(e=0;e<4;++e)i[e]+=g[4*t+e]*_[t];return i}$.exports=function(g,_){return d(g.projection,d(g.view,d(g.model,[_[0],_[1],_[2],1])))}},{}],608:[function(y,$,ee){"use strict";var d,g,_=y("../../../stackgl_modules").gl_plot3d,t=_.createCamera,e=_.createScene,i=y("webgl-context"),r=y("has-passive-events"),o=y("../../registry"),n=y("../../lib"),p=n.preserveDrawingBuffer(),s=y("../../plots/cartesian/axes"),a=y("../../components/fx"),c=y("../../lib/str2rgbarray"),u=y("../../lib/show_no_webgl_msg"),h=y("./project"),v=y("./layout/convert"),f=y("./layout/spikes"),l=y("./layout/tick_marks");function x(T,L){var A=document.createElement("div"),I=T.container;this.graphDiv=T.graphDiv;var D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none",A.appendChild(D),this.svgContainer=D,A.id=T.id,A.style.position="absolute",A.style.top=A.style.left="0px",A.style.width=A.style.height="100%",I.appendChild(A),this.fullLayout=L,this.id=T.id||"scene",this.fullSceneLayout=L[this.id],this.plotArgs=[[],{},{}],this.axesOptions=v(L,L[this.id]),this.spikeOptions=f(L[this.id]),this.container=A,this.staticMode=!!T.staticPlot,this.pixelRatio=this.pixelRatio||T.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var m=x.prototype;m.prepareOptions=function(){var T={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:p,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(g||(d=document.createElement("canvas"),g=i({canvas:d,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");T.gl=g,T.canvas=d}return T};var w=!0;m.tryCreatePlot=function(){var T=this.prepareOptions(),L=!0;try{this.glplot=e(T)}catch(A){if(this.staticMode||!w||p)L=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{p=T.glOptions.preserveDrawingBuffer=!0,this.glplot=e(T)}catch(I){p=T.glOptions.preserveDrawingBuffer=!1,L=!1}}}return w=!1,L},m.initializeGLCamera=function(){var T=this.fullSceneLayout.camera;this.camera=t(this.container,{center:[T.center.x,T.center.y,T.center.z],eye:[T.eye.x,T.eye.y,T.eye.z],up:[T.up.x,T.up.y,T.up.z],_ortho:"orthographic"===T.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},m.initializeGLPlot=function(){var T=this;if(T.initializeGLCamera(),!T.tryCreatePlot())return u(T);T.traces={},T.make4thDimension();var L=T.graphDiv,A=L.layout,I=function(){var S={};return T.isCameraChanged(A)&&(S[T.id+".camera"]=T.getCamera()),T.isAspectChanged(A)&&(S[T.id+".aspectratio"]=T.glplot.getAspectratio(),"manual"!==A[T.id].aspectmode&&(T.fullSceneLayout.aspectmode=A[T.id].aspectmode=S[T.id+".aspectmode"]="manual")),S},D=function(S){if(!1!==S.fullSceneLayout.dragmode){var C=I();S.saveLayout(A),S.graphDiv.emit("plotly_relayout",C)}};return T.glplot.canvas&&(T.glplot.canvas.addEventListener("mouseup",function(){D(T)}),T.glplot.canvas.addEventListener("wheel",function(S){if(L._context._scrollZoom.gl3d){if(T.camera._ortho){var C=S.deltaX>S.deltaY?1.1:1/1.1,R=T.glplot.getAspectratio();T.glplot.setAspectratio({x:C*R.x,y:C*R.y,z:C*R.z})}D(T)}},!!r&&{passive:!1}),T.glplot.canvas.addEventListener("mousemove",function(){if(!1!==T.fullSceneLayout.dragmode&&0!==T.camera.mouseListener.buttons){var S=I();T.graphDiv.emit("plotly_relayouting",S)}}),T.staticMode||T.glplot.canvas.addEventListener("webglcontextlost",function(S){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:S,layer:T.id})},!1)),T.glplot.oncontextloss=function(){T.recoverContext()},T.glplot.onrender=function(){T.render()},!0},m.render=function(){var T,L=this,A=L.graphDiv,I=L.svgContainer,D=L.container.getBoundingClientRect();A._fullLayout._calcInverseTransform(A);var R=D.width*A._fullLayout._invScaleX,F=D.height*A._fullLayout._invScaleY;I.setAttributeNS(null,"viewBox","0 0 "+R+" "+F),I.setAttributeNS(null,"width",R),I.setAttributeNS(null,"height",F),l(L),L.glplot.axes.update(L.axesOptions);for(var H=Object.keys(L.traces),U=null,X=L.glplot.selection,Z=0;Z<H.length;++Z)"skip"!==(T=L.traces[H[Z]]).data.hoverinfo&&T.handlePick(X)&&(U=T),T.setContourLevels&&T.setContourLevels();function Y(se,de,ue){var ge=L.fullSceneLayout[se+"axis"];return"log"!==ge.type&&(de=ge.d2l(de)),s.hoverLabelText(ge,de,ue)}if(null!==U){var te,W=h(L.glplot.cameraParams,X.dataCoordinate),z=A._fullData[(T=U.data).index],N=X.index,V={xLabel:Y("x",X.traceCoordinate[0],T.xhoverformat),yLabel:Y("y",X.traceCoordinate[1],T.yhoverformat),zLabel:Y("z",X.traceCoordinate[2],T.zhoverformat)},Q=a.castHoverinfo(z,L.fullLayout,N),j=(Q||"").split("+"),J=Q&&"all"===Q;z.hovertemplate||J||(-1===j.indexOf("x")&&(V.xLabel=void 0),-1===j.indexOf("y")&&(V.yLabel=void 0),-1===j.indexOf("z")&&(V.zLabel=void 0),-1===j.indexOf("text")&&(X.textLabel=void 0),-1===j.indexOf("name")&&(U.name=void 0));var K=[];"cone"===T.type||"streamtube"===T.type?(V.uLabel=Y("x",X.traceCoordinate[3],T.uhoverformat),(J||-1!==j.indexOf("u"))&&K.push("u: "+V.uLabel),V.vLabel=Y("y",X.traceCoordinate[4],T.vhoverformat),(J||-1!==j.indexOf("v"))&&K.push("v: "+V.vLabel),V.wLabel=Y("z",X.traceCoordinate[5],T.whoverformat),(J||-1!==j.indexOf("w"))&&K.push("w: "+V.wLabel),V.normLabel=X.traceCoordinate[6].toPrecision(3),(J||-1!==j.indexOf("norm"))&&K.push("norm: "+V.normLabel),"streamtube"===T.type&&(V.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(J||-1!==j.indexOf("divergence"))&&K.push("divergence: "+V.divergenceLabel)),X.textLabel&&K.push(X.textLabel),te=K.join("<br>")):"isosurface"===T.type||"volume"===T.type?(V.valueLabel=s.hoverLabelText(L._mockAxis,L._mockAxis.d2l(X.traceCoordinate[3]),T.valuehoverformat),K.push("value: "+V.valueLabel),X.textLabel&&K.push(X.textLabel),te=K.join("<br>")):te=X.textLabel;var re={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:z._input,fullData:z,curveNumber:z.index,pointNumber:N};a.appendArrayPointValue(re,z,N),T._module.eventData&&(re=z._module.eventData(re,X,z,{},N));var ie={points:[re]};if(L.fullSceneLayout.hovermode){var ce=[];a.loneHover({trace:z,x:(.5+.5*W[0]/W[3])*R,y:(.5-.5*W[1]/W[3])*F,xLabel:V.xLabel,yLabel:V.yLabel,zLabel:V.zLabel,text:te,name:U.name,color:a.castHoverOption(z,N,"bgcolor")||U.color,borderColor:a.castHoverOption(z,N,"bordercolor"),fontFamily:a.castHoverOption(z,N,"font.family"),fontSize:a.castHoverOption(z,N,"font.size"),fontColor:a.castHoverOption(z,N,"font.color"),nameLength:a.castHoverOption(z,N,"namelength"),textAlign:a.castHoverOption(z,N,"align"),hovertemplate:n.castOption(z,N,"hovertemplate"),hovertemplateLabels:n.extendFlat({},re,V),eventData:[re]},{container:I,gd:A,inOut_bbox:ce}),re.bbox=ce[0]}A.emit(X.buttons&&X.distance<5?"plotly_click":"plotly_hover",ie),this.oldEventData=ie}else a.loneUnhover(I),this.oldEventData&&A.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},m.recoverContext=function(){var T=this;T.glplot.dispose();var L=function(){T.glplot.gl.isContextLost()?requestAnimationFrame(L):T.initializeGLPlot()?T.plot.apply(T,T.plotArgs):n.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(L)};var b=["xaxis","yaxis","zaxis"];function k(T,L,A){for(var I=T.fullSceneLayout,D=0;D<3;D++){var S=b[D],C=S.charAt(0),R=I[S],F=L[C],H=L[C+"calendar"],U=L["_"+C+"length"];if(n.isArrayOrTypedArray(F))for(var X,Z=0;Z<(U||F.length);Z++)if(n.isArrayOrTypedArray(F[Z]))for(var Y=0;Y<F[Z].length;++Y)X=R.d2l(F[Z][Y],0,H),!isNaN(X)&&isFinite(X)&&(A[0][D]=Math.min(A[0][D],X),A[1][D]=Math.max(A[1][D],X));else X=R.d2l(F[Z],0,H),!isNaN(X)&&isFinite(X)&&(A[0][D]=Math.min(A[0][D],X),A[1][D]=Math.max(A[1][D],X));else A[0][D]=Math.min(A[0][D],0),A[1][D]=Math.max(A[1][D],U-1)}}m.plot=function(T,L,A){if(this.plotArgs=[T,L,A],!this.glplot.contextLost){var I,D,S,C,R,F,H=L[this.id],U=A[this.id];this.fullLayout=L,this.fullSceneLayout=H,this.axesOptions.merge(L,H),this.spikeOptions.merge(H),this.setViewport(H),this.updateFx(H.dragmode,H.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(c(H.bgcolor)),this.setConvert(R),T?Array.isArray(T)||(T=[T]):T=[];var X=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<T.length;++S)!0===(I=T[S]).visible&&0!==I._length&&k(this,I,X);!function(Me,ke){for(var Ce=Me.fullSceneLayout,Pe=Ce.annotations||[],Fe=0;Fe<3;Fe++)for(var qe=b[Fe],rt=qe.charAt(0),ze=Ce[qe],He=0;He<Pe.length;He++){var Xe=Pe[He];if(Xe.visible){var Je=ze.r2l(Xe[rt]);!isNaN(Je)&&isFinite(Je)&&(ke[0][Fe]=Math.min(ke[0][Fe],Je),ke[1][Fe]=Math.max(ke[1][Fe],Je))}}}(this,X);var Z=[1,1,1];for(C=0;C<3;++C)Z[C]=X[1][C]===X[0][C]?1:1/(X[1][C]-X[0][C]);for(this.dataScale=Z,this.convertAnnotations(this),S=0;S<T.length;++S)!0===(I=T[S]).visible&&0!==I._length&&((D=this.traces[I.uid])?D.data.type===I.type?D.update(I):(D.dispose(),D=I._module.plot(this,I),this.traces[I.uid]=D):(D=I._module.plot(this,I),this.traces[I.uid]=D),D.name=I.name);var Y=Object.keys(this.traces);e:for(S=0;S<Y.length;++S){for(C=0;C<T.length;++C)if(T[C].uid===Y[S]&&!0===T[C].visible&&0!==T[C]._length)continue e;(D=this.traces[Y[S]]).dispose(),delete this.traces[Y[S]]}this.glplot.objects.sort(function(Me,ke){return Me._trace.data.index-ke._trace.data.index});var W,te=[[0,0,0],[0,0,0]],z=[],N={};for(S=0;S<3;++S){if((F=(R=H[b[S]]).type)in N?(N[F].acc*=Z[S],N[F].count+=1):N[F]={acc:Z[S],count:1},R.autorange){te[0][S]=1/0,te[1][S]=-1/0;var V=this.glplot.objects,Q=this.fullSceneLayout.annotations||[],j=R._name.charAt(0);for(C=0;C<V.length;C++){var J=V[C],K=J.bounds,re=J._trace.data._pad||0;te[0][S]="ErrorBars"===J.constructor.name&&R._lowerLogErrorBound?Math.min(te[0][S],R._lowerLogErrorBound):Math.min(te[0][S],K[0][S]/Z[S]-re),te[1][S]=Math.max(te[1][S],K[1][S]/Z[S]+re)}for(C=0;C<Q.length;C++){var ie=Q[C];if(ie.visible){var ce=R.r2l(ie[j]);te[0][S]=Math.min(te[0][S],ce),te[1][S]=Math.max(te[1][S],ce)}}if("rangemode"in R&&"tozero"===R.rangemode&&(te[0][S]=Math.min(te[0][S],0),te[1][S]=Math.max(te[1][S],0)),te[0][S]>te[1][S])te[0][S]=-1,te[1][S]=1;else{var se=te[1][S]-te[0][S];te[0][S]-=se/32,te[1][S]+=se/32}if("reversed"===R.autorange){var de=te[0][S];te[0][S]=te[1][S],te[1][S]=de}}else{var ue=R.range;te[0][S]=R.r2l(ue[0]),te[1][S]=R.r2l(ue[1])}te[0][S]===te[1][S]&&(te[0][S]-=1,te[1][S]+=1),z[S]=te[1][S]-te[0][S],this.glplot.setBounds(S,{min:te[0][S]*Z[S],max:te[1][S]*Z[S]})}var ge=H.aspectmode;if("cube"===ge)W=[1,1,1];else if("manual"===ge){var be=H.aspectratio;W=[be.x,be.y,be.z]}else{if("auto"!==ge&&"data"!==ge)throw new Error("scene.js aspectRatio was not one of the enumerated types");var Te=[1,1,1];for(S=0;S<3;++S){var we=N[F=(R=H[b[S]]).type];Te[S]=Math.pow(we.acc,1/we.count)/Z[S]}W="data"===ge||Math.max.apply(null,Te)/Math.min.apply(null,Te)<=4?Te:[1,1,1]}H.aspectratio.x=U.aspectratio.x=W[0],H.aspectratio.y=U.aspectratio.y=W[1],H.aspectratio.z=U.aspectratio.z=W[2],this.glplot.setAspectratio(H.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:H.aspectratio.x,y:H.aspectratio.y,z:H.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=H.aspectmode);var Le=H.domain||null,fe=L._size||null;if(Le&&fe){var ve=this.container.style;ve.position="absolute",ve.left=fe.l+Le.x[0]*fe.w+"px",ve.top=fe.t+(1-Le.y[1])*fe.h+"px",ve.width=fe.w*(Le.x[1]-Le.x[0])+"px",ve.height=fe.h*(Le.y[1]-Le.y[0])+"px"}this.glplot.redraw()}},m.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},m.getCamera=function(){var T;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(T=this.camera).up[0],y:T.up[1],z:T.up[2]},center:{x:T.center[0],y:T.center[1],z:T.center[2]},eye:{x:T.eye[0],y:T.eye[1],z:T.eye[2]},projection:{type:!0===T._ortho?"orthographic":"perspective"}}},m.setViewport=function(T){var L,A=T.camera;this.camera.lookAt.apply(this,[[(L=A).eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]),this.glplot.setAspectratio(T.aspectratio),"orthographic"===A.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},m.isCameraChanged=function(T){var L=this.getCamera(),A=n.nestedProperty(T,this.id+".camera").get();var R,F,H,U,X,Z,D=!1;if(void 0===A)D=!0;else{for(var S=0;S<3;S++)for(var C=0;C<3;C++)if(R=L,U=C,X=void 0,Z=void 0,Z=["x","y","z"],!(F=A)[(X=["up","center","eye"])[H=S]]||R[X[H]][Z[U]]!==F[X[H]][Z[U]]){D=!0;break}(!A.projection||L.projection&&L.projection.type!==A.projection.type)&&(D=!0)}return D},m.isAspectChanged=function(T){var L=this.glplot.getAspectratio(),A=n.nestedProperty(T,this.id+".aspectratio").get();return void 0===A||A.x!==L.x||A.y!==L.y||A.z!==L.z},m.saveLayout=function(T){var L,A,I,D,S,C,R=this.fullLayout,F=this.isCameraChanged(T),H=this.isAspectChanged(T),U=F||H;if(U){var X={};F&&(L=this.getCamera(),I=(A=n.nestedProperty(T,this.id+".camera")).get(),X[this.id+".camera"]=I),H&&(D=this.glplot.getAspectratio(),C=(S=n.nestedProperty(T,this.id+".aspectratio")).get(),X[this.id+".aspectratio"]=C),o.call("_storeDirectGUIEdit",T,R._preGUI,X),F&&(A.set(L),n.nestedProperty(R,this.id+".camera").set(L)),H&&(S.set(D),n.nestedProperty(R,this.id+".aspectratio").set(D),this.glplot.redraw())}return U},m.updateFx=function(T,L){var A=this.camera;if(A)if("orbit"===T)A.mode="orbit",A.keyBindingMode="rotate";else if("turntable"===T){A.up=[0,0,1],A.mode="turntable",A.keyBindingMode="rotate";var I=this.graphDiv,D=I._fullLayout,S=this.fullSceneLayout.camera,C=S.up.x,R=S.up.y,F=S.up.z;if(F/Math.sqrt(C*C+R*R+F*F)<.999){var H=this.id+".camera.up",U={x:0,y:0,z:1},X={};X[H]=U;var Z=I.layout;o.call("_storeDirectGUIEdit",Z,D._preGUI,X),S.up=U,n.nestedProperty(Z,H).set(U)}}else A.keyBindingMode=T;this.fullSceneLayout.hovermode=L},m.toImage=function(T){T||(T="png"),this.staticMode&&this.container.appendChild(d),this.glplot.redraw();var L=this.glplot.gl,A=L.drawingBufferWidth,I=L.drawingBufferHeight;L.bindFramebuffer(L.FRAMEBUFFER,null);var D=new Uint8Array(A*I*4);L.readPixels(0,0,A,I,L.RGBA,L.UNSIGNED_BYTE,D),function(H,U,X){for(var Z=0,Y=X-1;Z<Y;++Z,--Y)for(var W=0;W<U;++W)for(var te=0;te<4;++te){var z=4*(U*Z+W)+te,N=4*(U*Y+W)+te,V=H[z];H[z]=H[N],H[N]=V}}(D,A,I),function(H,U,X){for(var Z=0;Z<X;++Z)for(var Y=0;Y<U;++Y){var W=4*(U*Z+Y),te=H[W+3];if(te>0)for(var z=255/te,N=0;N<3;++N)H[W+N]=Math.min(z*H[W+N],255)}}(D,A,I);var S=document.createElement("canvas");S.width=A,S.height=I;var C,R=S.getContext("2d"),F=R.createImageData(A,I);switch(F.data.set(D),R.putImageData(F,0,0),T){case"jpeg":C=S.toDataURL("image/jpeg");break;case"webp":C=S.toDataURL("image/webp");break;default:C=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(d),C},m.setConvert=function(){for(var T=0;T<3;T++){var L=this.fullSceneLayout[b[T]];s.setConvert(L,this.fullLayout),L.setScale=n.noop}},m.make4thDimension=function(){var T=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(this._mockAxis,T)},$.exports=x},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t){t=t||d.length;for(var e=new Array(t),i=0;i<t;i++)e[i]=[d[i],g[i],_[i]];return e}},{}],610:[function(y,$,ee){"use strict";var d=y("./font_attributes"),g=y("./animation_attributes"),_=y("../components/color/attributes"),t=y("../components/shapes/draw_newshape/attributes"),e=y("./pad_attributes"),i=y("../lib/extend").extendFlat,r=d({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif',r.size.dflt=12,r.color.dflt=_.defaultLine,$.exports={font:r,title:{text:{valType:"string",editType:"layoutstyle"},font:d({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:_.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:_.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:_.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:t.newshape,activeshape:t.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},g.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:d({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(y,$,ee){"use strict";var d=y("../../lib/sort_object_keys"),g='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',_=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',g].join(" "),t=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:g,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},i=d(e);$.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:i,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",i.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){var t=g.split(" "),e=t[0],i=t[1],r=d.isArrayOrTypedArray(_)?d.mean(_):_,o=.5+r/100,n=1.5+r/100,p=["",""],s=[0,0];switch(e){case"top":p[0]="top",s[1]=-n;break;case"bottom":p[0]="bottom",s[1]=n}switch(i){case"left":p[1]="right",s[0]=-o;break;case"right":p[1]="left",s[0]=o}return{anchor:p[0]&&p[1]?p.join("-"):p[0]?p[0]:p[1]?p[1]:"center",offset:s}}},{"../../lib":503}],613:[function(y,$,ee){"use strict";var d=y("mapbox-gl/dist/mapbox-gl-unminified"),g=y("../../lib"),_=g.strTranslate,t=g.strScale,e=y("../../plots/get_data").getSubplotCalcData,i=y("../../constants/xmlns_namespaces"),r=y("@plotly/d3"),o=y("../../components/drawing"),n=y("../../lib/svg_text_utils"),p=y("./mapbox"),s=ee.constants=y("./constants");function a(c){return"string"==typeof c&&(-1!==s.styleValuesMapbox.indexOf(c)||0===c.indexOf("mapbox://"))}ee.name="mapbox",ee.attr="subplot",ee.idRoot="mapbox",ee.idRegex=ee.attrRegex=g.counterRegex("mapbox"),ee.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ee.layoutAttributes=y("./layout_attributes"),ee.supplyLayoutDefaults=y("./layout_defaults"),ee.plot=function(c){var u=c._fullLayout,h=c.calcdata,v=u._subplots.mapbox;if(d.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var f=function(k,T){var L=k._fullLayout;if(""===k._context.mapboxAccessToken)return"";for(var A=[],I=[],D=!1,S=!1,C=0;C<T.length;C++){var R=L[T[C]],F=R.accesstoken;a(R.style)&&(F?g.pushUnique(A,F):(a(R._input.style)&&(g.error("Uses Mapbox map style, but did not set an access token."),D=!0),S=!0)),F&&g.pushUnique(I,F)}if(S){var H=D?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw g.error(H),new Error(H)}return A.length?(A.length>1&&g.warn(s.multipleTokensErrorMsg),A[0]):(I.length&&g.log(["Listed mapbox access token(s)",I.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,v);d.accessToken=f;for(var l=0;l<v.length;l++){var x=v[l],m=e(h,"mapbox",x),w=u[x],b=w._subplot;b||(b=new p(c,x),u[x]._subplot=b),b.viewInitial||(b.viewInitial={center:g.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),b.plot(m,u,c._promises)}},ee.clean=function(c,u,h,v){for(var f=v._subplots.mapbox||[],l=0;l<f.length;l++){var x=f[l];!u[x]&&v[x]._subplot&&v[x]._subplot.destroy()}},ee.toSVG=function(c){for(var u=c._fullLayout,h=u._subplots.mapbox,v=u._size,f=0;f<h.length;f++){var l=u[h[f]],x=l.domain,m=l._subplot.toImage("png");u._glimages.append("svg:image").attr({xmlns:i.svg,"xlink:href":m,x:v.l+v.w*x.x[0],y:v.t+v.h*(1-x.y[1]),width:v.w*(x.x[1]-x.x[0]),height:v.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var w=r.select(l._subplot.div);if(null!==w.select(".mapboxgl-ctrl-logo").node().offsetParent){var b=u._glimages.append("g");b.attr("transform",_(v.l+v.w*x.x[0]+10,v.t+v.h*(1-x.y[0])-31)),b.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),b.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),b.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),b.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=w.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),T=u._glimages.append("g"),L=T.append("text");L.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var A=o.bBox(L.node()),I=v.w*(x.x[1]-x.x[0]);if(A.width>I/2){var D=k.split("|").join("<br>");L.text(D).attr("data-unformatted",D).call(n.convertToTspans,c),A=o.bBox(L.node())}L.attr("transform",_(-3,8-A.height)),T.insert("rect",".static-attribution").attr({x:-A.width-6,y:-A.height-3,width:A.width+6,height:A.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;A.width+6>I&&(S=I/(A.width+6));var C=[v.l+v.w*x.x[1],v.t+v.h*(1-x.y[0])];T.attr("transform",_(C[0],C[1])+t(S))}},ee.updateFx=function(c){for(var u=c._fullLayout,h=u._subplots.mapbox,v=0;v<h.length;v++)u[h[v]]._subplot.updateFx(u)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../lib/svg_text_utils").sanitizeHTML,_=y("./convert_text_opts"),t=y("./constants");function e(n,p){this.subplot=n,this.uid=n.uid+"-"+p,this.index=p,this.idSource="source-"+this.uid,this.idLayer=t.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var i=e.prototype;function r(n){if(!n.visible)return!1;var p=n.source;if(Array.isArray(p)&&p.length>0){for(var s=0;s<p.length;s++)if("string"!=typeof p[s]||0===p[s].length)return!1;return!0}return d.isPlainObject(p)||"string"==typeof p&&p.length>0}function o(n){var p={},s={};switch(n.type){case"circle":d.extendFlat(s,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case"line":d.extendFlat(s,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case"fill":d.extendFlat(s,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,"fill-opacity":n.opacity});break;case"symbol":var a=n.symbol,c=_(a.textposition,a.iconsize);d.extendFlat(p,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":c.anchor,"text-offset":c.offset,"symbol-placement":a.placement}),d.extendFlat(s,{"icon-color":n.color,"text-color":a.textfont.color,"text-opacity":n.opacity});break;case"raster":d.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:p,paint:s}}i.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n)),this.visible=r(n)},i.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===n.sourcetype&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))},i.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type},i.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},i.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},i.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,coordinates:n.coordinates});var p=this.findFollowingMapboxLayerId(this.lookupBelow());null!==p&&this.subplot.map.moveLayer(this.idLayer,p)},i.updateSource=function(n){var a,c,u,h,v,p=this.subplot.map;if(p.getSource(this.idSource)&&p.removeSource(this.idSource),this.sourceType=n.sourcetype,this.source=n.source,r(n)){var s=(h=(a=n).source,v={type:u=a.sourcetype},"geojson"===u?c="data":"vector"===u?c="string"==typeof h?"url":"tiles":"raster"===u?(c="tiles",v.tileSize=256):"image"===u&&(c="url",v.coordinates=a.coordinates),v[c]=h,a.sourceattribution&&(v.attribution=g(a.sourceattribution)),v);p.addSource(this.idSource,s)}},i.findFollowingMapboxLayerId=function(n){if("traces"===n)for(var p=this.subplot.getMapLayers(),s=0;s<p.length;s++){var a=p[s].id;if("string"==typeof a&&0===a.indexOf(t.traceLayerPrefix)){n=a;break}}return n},i.updateLayer=function(n){var p=this.subplot,s=o(n),a=this.lookupBelow(),c=this.findFollowingMapboxLayerId(a);this.removeLayer(),r(n)&&p.addLayer({id:this.idLayer,source:this.idSource,"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:s.layout,paint:s.paint},c),this.layerType=n.type,this.below=a},i.updateStyle=function(n){if(r(n)){var p=o(n);this.subplot.setOptions(this.idLayer,"setLayoutProperty",p.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",p.paint)}},i.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)},i.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer),n.getSource(this.idSource)&&n.removeSource(this.idSource)},$.exports=function(n,p,s){var a=new e(n,p);return a.update(s),a}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color").defaultLine,_=y("../domain").attributes,t=y("../font_attributes"),e=y("../../traces/scatter/attributes").textposition,i=y("../../plot_api/edit_types").overrideAll,r=y("../../plot_api/plot_template").templatedArray,o=y("./constants"),n=t({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=i({_arrayAttrRegexps:[d.counterRegex("mapbox",".layers",!0)],domain:_({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:o.styleValuesMapbox.concat(o.styleValuesNonMapbox),dflt:o.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:r("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:g},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:g}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:d.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../subplot_defaults"),_=y("../array_container_defaults"),t=y("./layout_attributes");function e(r,o,n,p){n("accesstoken",p.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),_(r,o,{name:"layers",handleItemDefaults:i}),o._input=r}function i(r,o){function n(u,h){return d.coerce(r,o,t.layers,u,h)}if(n("visible")){var p,s=n("sourcetype"),a="raster"===s||"image"===s;n("source"),n("sourceattribution"),"vector"===s&&n("sourcelayer"),"image"===s&&n("coordinates"),a&&(p="raster");var c=n("type",p);a&&"raster"!==c&&(c=o.type="raster",d.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),"circle"===c&&n("circle.radius"),"line"===c&&(n("line.width"),n("line.dash")),"fill"===c&&n("fill.outlinecolor"),"symbol"===c&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),d.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}$.exports=function(r,o,n){g(r,o,n,{type:"mapbox",attributes:t,handleDefaults:e,partition:"y",accessToken:o._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(y,$,ee){"use strict";var d=y("mapbox-gl/dist/mapbox-gl-unminified"),g=y("../../lib"),_=y("../../lib/geo_location_utils"),t=y("../../registry"),e=y("../cartesian/axes"),i=y("../../components/dragelement"),r=y("../../components/fx"),o=y("../../components/dragelement/helpers"),n=o.rectMode,p=o.drawMode,s=o.selectMode,a=y("../cartesian/select").prepSelect,c=y("../cartesian/select").clearSelect,u=y("../cartesian/select").clearSelectionsCache,h=y("../cartesian/select").selectOnClick,v=y("./constants"),f=y("./layers");function l(T,L){this.id=L,this.gd=T;var A=T._fullLayout,I=T._context;this.container=A._glcontainer.node(),this.isStatic=I.staticPlot,this.uid=A._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(A),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var x=l.prototype;x.plot=function(T,L,A){var I,D=this;D.map&&L[D.id].accesstoken!==D.accessToken&&(D.map.remove(),D.map=null,D.styleObj=null,D.traceHash={},D.layerList=[]),I=new Promise(D.map?function(C,R){D.updateMap(T,L,C,R)}:function(C,R){D.createMap(T,L,C,R)}),A.push(I)},x.createMap=function(T,L,A,I){var D=this,S=L[D.id],C=D.styleObj=w(S.style);D.accessToken=S.accesstoken;var R=D.map=new d.Map({container:D.div,style:C.style,center:k(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,interactive:!D.isStatic,preserveDrawingBuffer:D.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new d.AttributionControl({compact:!0}));R._canvas.style.left="0px",R._canvas.style.top="0px",D.rejectOnError(I),D.isStatic||D.initFx(T,L);var F=[];F.push(new Promise(function(H){R.once("load",H)})),F=F.concat(_.fetchTraceGeoData(T)),Promise.all(F).then(function(){D.fillBelowLookup(T,L),D.updateData(T),D.updateLayout(L),D.resolveOnRender(A)}).catch(I)},x.updateMap=function(T,L,A,I){var D=this,S=D.map,C=L[this.id];D.rejectOnError(I);var R=[],F=w(C.style);JSON.stringify(D.styleObj)!==JSON.stringify(F)&&(D.styleObj=F,S.setStyle(F.style),D.traceHash={},R.push(new Promise(function(H){S.once("styledata",H)}))),R=R.concat(_.fetchTraceGeoData(T)),Promise.all(R).then(function(){D.fillBelowLookup(T,L),D.updateData(T),D.updateLayout(L),D.resolveOnRender(A)}).catch(I)},x.fillBelowLookup=function(T,L){var A,I,D=L[this.id].layers,S=this.belowLookup={},C=!1;for(A=0;A<T.length;A++){var R=T[A][0].trace,F=R._module;"string"==typeof R.below?I=R.below:F.getBelow&&(I=F.getBelow(R,this)),""===I&&(C=!0),S["trace-"+R.uid]=I||""}for(A=0;A<D.length;A++){var H=D[A];S["layout-"+A]=I="string"==typeof H.below?H.below:C?"traces":""}var U,X,Z={};for(U in S)Z[I=S[U]]?Z[I].push(U):Z[I]=[U];for(I in Z){var Y=Z[I];if(Y.length>1)for(A=0;A<Y.length;A++)0===(U=Y[A]).indexOf("trace-")?(X=U.split("trace-")[1],this.traceHash[X]&&(this.traceHash[X].below=null)):0===U.indexOf("layout-")&&(X=U.split("layout-")[1],this.layerList[X]&&(this.layerList[X].below=null))}};var m={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function w(T){var L={};return g.isPlainObject(T)?(L.id=T.id,L.style=T):"string"==typeof T?(L.id=T,L.style=-1!==v.styleValuesMapbox.indexOf(T)?b(T):v.stylesNonMapbox[T]?v.stylesNonMapbox[T]:T):(L.id=v.styleValueDflt,L.style=b(v.styleValueDflt)),L.transition={duration:0,delay:0},L}function b(T){return v.styleUrlPrefix+T+"-"+v.styleUrlSuffix}function k(T){return[T.lon,T.lat]}x.updateData=function(T){var L,A,I,D,S=this.traceHash,C=T.slice().sort(function(X,Z){return m[X[0].trace.type]-m[Z[0].trace.type]});for(I=0;I<C.length;I++){var R=C[I],F=!1;(L=S[(A=R[0].trace).uid])&&(L.type===A.type?(L.update(R),F=!0):L.dispose()),!F&&A._module&&(S[A.uid]=A._module.plot(this,R))}var H=Object.keys(S);e:for(I=0;I<H.length;I++){var U=H[I];for(D=0;D<T.length;D++)if(U===(A=T[D][0].trace).uid)continue e;(L=S[U]).dispose(),delete S[U]}},x.updateLayout=function(T){var L=this.map,A=T[this.id];this.dragging||this.wheeling||(L.setCenter(k(A.center)),L.setZoom(A.zoom),L.setBearing(A.bearing),L.setPitch(A.pitch)),this.updateLayers(T),this.updateFramework(T),this.updateFx(T),this.map.resize(),this.gd._context._scrollZoom.mapbox?L.scrollZoom.enable():L.scrollZoom.disable()},x.resolveOnRender=function(T){var L=this.map;L.on("render",function A(){L.loaded()&&(L.off("render",A),setTimeout(T,10))})},x.rejectOnError=function(T){var L=this.map;function A(){T(new Error(v.mapOnErrorMsg))}L.once("error",A),L.once("style.error",A),L.once("source.error",A),L.once("tile.error",A),L.once("layer.error",A)},x.createFramework=function(T){var L=this,A=L.div=document.createElement("div");A.id=L.uid,A.style.position="absolute",L.container.appendChild(A),L.xaxis={_id:"x",c2p:function(I){return L.project(I).x}},L.yaxis={_id:"y",c2p:function(I){return L.project(I).y}},L.updateFramework(T),L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(L.mockAxis,T)},x.initFx=function(T,L){var A=this,I=A.gd,D=A.map;function S(){r.loneUnhover(L._hoverlayer)}function C(){var R=A.getView();I.emit("plotly_relayouting",A.getViewEditsWithDerived(R))}D.on("moveend",function(R){if(A.map){var F=I._fullLayout;if(R.originalEvent||A.wheeling){var H=F[A.id];t.call("_storeDirectGUIEdit",I.layout,F._preGUI,A.getViewEdits(H));var U=A.getView();H._input.center=H.center=U.center,H._input.zoom=H.zoom=U.zoom,H._input.bearing=H.bearing=U.bearing,H._input.pitch=H.pitch=U.pitch,I.emit("plotly_relayout",A.getViewEditsWithDerived(U))}R.originalEvent&&"mouseup"===R.originalEvent.type?A.dragging=!1:A.wheeling&&(A.wheeling=!1),F._rehover&&F._rehover()}}),D.on("wheel",function(){A.wheeling=!0}),D.on("mousemove",function(R){var F=A.div.getBoundingClientRect(),H=[R.originalEvent.offsetX,R.originalEvent.offsetY];R.target.getBoundingClientRect=function(){return F},A.xaxis.p2c=function(){return D.unproject(H).lng},A.yaxis.p2c=function(){return D.unproject(H).lat},I._fullLayout._rehover=function(){I._fullLayout._hoversubplot===A.id&&I._fullLayout[A.id]&&r.hover(I,R,A.id)},r.hover(I,R,A.id),I._fullLayout._hoversubplot=A.id}),D.on("dragstart",function(){A.dragging=!0,S()}),D.on("zoomstart",S),D.on("mouseout",function(){I._fullLayout._hoversubplot=null}),D.on("drag",C),D.on("zoom",C),D.on("dblclick",function(){var R=I._fullLayout[A.id];t.call("_storeDirectGUIEdit",I.layout,I._fullLayout._preGUI,A.getViewEdits(R));var F=A.viewInitial;D.setCenter(k(F.center)),D.setZoom(F.zoom),D.setBearing(F.bearing),D.setPitch(F.pitch);var H=A.getView();R._input.center=R.center=H.center,R._input.zoom=R.zoom=H.zoom,R._input.bearing=R.bearing=H.bearing,R._input.pitch=R.pitch=H.pitch,I.emit("plotly_doubleclick",null),I.emit("plotly_relayout",A.getViewEditsWithDerived(H))}),A.clearSelect=function(){u(A.dragOptions),c(A.dragOptions.gd)},A.onClickInPanFn=function(R){return function(F){var H=I._fullLayout.clickmode;H.indexOf("select")>-1&&h(F.originalEvent,I,[A.xaxis],[A.yaxis],A.id,R),H.indexOf("event")>-1&&r.click(I,F.originalEvent)}}},x.updateFx=function(T){var L=this,A=L.map,I=L.gd;if(!L.isStatic){var D,S=T.dragmode;D=n(S)?function(F,H){(F.range={})[L.id]=[R([H.xmin,H.ymin]),R([H.xmax,H.ymax])]}:function(F,H,U){(F.lassoPoints={})[L.id]=U.filtered.map(R)},L.dragOptions=g.extendDeep(L.dragOptions||{},{dragmode:T.dragmode,element:L.div,gd:I,plotinfo:{id:L.id,domain:T[L.id].domain,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:D},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id}),A.off("click",L.onClickInPanHandler),s(S)||p(S)?(A.dragPan.disable(),A.on("zoomstart",L.clearSelect),L.dragOptions.prepFn=function(F,H,U){a(F,H,U,L.dragOptions,S)},i.init(L.dragOptions)):(A.dragPan.enable(),A.off("zoomstart",L.clearSelect),L.div.onmousedown=null,L.onClickInPanHandler=L.onClickInPanFn(L.dragOptions),A.on("click",L.onClickInPanHandler))}function R(F){var H=L.map.unproject(F);return[H.lng,H.lat]}},x.updateFramework=function(T){var L=T[this.id].domain,A=T._size,I=this.div.style;I.width=A.w*(L.x[1]-L.x[0])+"px",I.height=A.h*(L.y[1]-L.y[0])+"px",I.left=A.l+L.x[0]*A.w+"px",I.top=A.t+(1-L.y[1])*A.h+"px",this.xaxis._offset=A.l+L.x[0]*A.w,this.xaxis._length=A.w*(L.x[1]-L.x[0]),this.yaxis._offset=A.t+(1-L.y[1])*A.h,this.yaxis._length=A.h*(L.y[1]-L.y[0])},x.updateLayers=function(T){var L,A=T[this.id].layers,I=this.layerList;if(A.length!==I.length){for(L=0;L<I.length;L++)I[L].dispose();for(I=this.layerList=[],L=0;L<A.length;L++)I.push(f(this,L,A[L]))}else for(L=0;L<A.length;L++)I[L].update(A[L])},x.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},x.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},x.setOptions=function(T,L,A){for(var I in A)this.map[L](T,I,A[I])},x.getMapLayers=function(){return this.map.getStyle().layers},x.addLayer=function(T,L){var A=this.map;if("string"==typeof L){if(""===L)return void A.addLayer(T,L);for(var I=this.getMapLayers(),D=0;D<I.length;D++)if(L===I[D].id)return void A.addLayer(T,L);g.warn(["Trying to add layer with *below* value",L,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}A.addLayer(T)},x.project=function(T){return this.map.project(new d.LngLat(T[0],T[1]))},x.getView=function(){var T=this.map,L=T.getCenter(),A={lon:L.lng,lat:L.lat},I=T.getCanvas(),D=parseInt(I.style.width),S=parseInt(I.style.height);return{center:A,zoom:T.getZoom(),bearing:T.getBearing(),pitch:T.getPitch(),_derived:{coordinates:[T.unproject([0,0]).toArray(),T.unproject([D,0]).toArray(),T.unproject([D,S]).toArray(),T.unproject([0,S]).toArray()]}}},x.getViewEdits=function(T){for(var L=this.id,A=["center","zoom","bearing","pitch"],I={},D=0;D<A.length;D++){var S=A[D];I[L+"."+S]=T[S]}return I},x.getViewEditsWithDerived=function(T){var L=this.id,A=this.getViewEdits(T);return A[L+"._derived"]=T._derived,A},$.exports=l},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(y,$,ee){"use strict";$.exports=function(d){var g=d.editType;return{t:{valType:"number",dflt:0,editType:g},r:{valType:"number",dflt:0,editType:g},b:{valType:"number",dflt:0,editType:g},l:{valType:"number",dflt:0,editType:g},editType:g}}},{}],619:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-time-format").timeFormatLocale,_=y("d3-format").formatLocale,t=y("fast-isnumeric"),e=y("../registry"),i=y("../plot_api/plot_schema"),r=y("../plot_api/plot_template"),o=y("../lib"),n=y("../components/color"),p=y("../constants/numerical").BADNUM,s=y("./cartesian/axis_ids"),a=y("./cartesian/handle_outline").clearSelect,c=y("./animation_attributes"),u=y("./frame_attributes"),h=y("../plots/get_data").getModuleCalcData,v=o.relinkPrivateKeys,f=o._,l=$.exports={};o.extendFlat(l,e),l.attributes=y("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=y("./font_attributes"),l.layoutAttributes=y("./layout_attributes"),l.fontWeight="normal";var x=l.transformsRegistry,m=y("./command");l.executeAPICommand=m.executeAPICommand,l.computeAPICommandBindings=m.computeAPICommandBindings,l.manageCommandObserver=m.manageCommandObserver,l.hasSimpleAPICommandBindings=m.hasSimpleAPICommandBindings,l.redrawText=function(U){return U=o.getGraphDiv(U),new Promise(function(X){setTimeout(function(){U._fullLayout&&(e.getComponentMethod("annotations","draw")(U),e.getComponentMethod("legend","draw")(U),e.getComponentMethod("colorbar","draw")(U),X(l.previousPromises(U)))},300)})},l.resize=function(U){var X;U=o.getGraphDiv(U);var Z=new Promise(function(Y,W){U&&!o.isHidden(U)||W(new Error("Resize must be passed a displayed plot div element.")),U._redrawTimer&&clearTimeout(U._redrawTimer),U._resolveResize&&(X=U._resolveResize),U._resolveResize=Y,U._redrawTimer=setTimeout(function(){if(!U.layout||U.layout.width&&U.layout.height||o.isHidden(U))Y(U);else{delete U.layout.width,delete U.layout.height;var te=U.changed;U.autoplay=!0,e.call("relayout",U,{autosize:!0}).then(function(){U.changed=te,U._resolveResize===Y&&(delete U._resolveResize,Y(U))})}},100)});return X&&X(Z),Z},l.previousPromises=function(U){if((U._promises||[]).length)return Promise.all(U._promises).then(function(){U._promises=[]})},l.addLinks=function(U){if(U._context.showLink||U._context.showSources){var X=U._fullLayout,Z=o.ensureSingle(X._paper,"text","js-plot-link-container",function(V){V.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var Q=d.select(this);Q.append("tspan").classed("js-link-to-tool",!0),Q.append("tspan").classed("js-link-spacer",!0),Q.append("tspan").classed("js-sourcelinks",!0)})}),Y=Z.node(),W={y:X._paper.attr("height")-9};document.body.contains(Y)&&Y.getComputedTextLength()>=X.width-20?(W["text-anchor"]="start",W.x=5):(W["text-anchor"]="end",W.x=X._paper.attr("width")-7),Z.attr(W);var te=Z.select(".js-link-to-tool"),z=Z.select(".js-link-spacer"),N=Z.select(".js-sourcelinks");U._context.showSources&&U._context.showSources(U),U._context.showLink&&function(V,Q){Q.text("");var j=Q.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" "+String.fromCharCode(187));if(V._context.sendData)j.on("click",function(){l.sendDataToCloud(V)});else{var J=window.location.pathname.split("/"),K=window.location.search;j.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+J[2].split(".")[0]+"/"+J[1]+K})}}(U,te),z.text(te.text()&&N.text()?" - ":"")}},l.sendDataToCloud=function(U){var X=(window.PLOTLYENV||{}).BASE_URL||U._context.plotlyServerURL;if(X){U.emit("plotly_beforeexport");var Z=d.select(U).append("div").attr("id","hiddenform").style("display","none"),Y=Z.append("form").attr({action:X+"/external",method:"post",target:"_blank"});return Y.append("input").attr({type:"text",name:"data"}).node().value=l.graphJson(U,!1,"keepdata"),Y.node().submit(),Z.remove(),U.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],b=["year","month","dayMonth","dayMonthYear"];function k(U,X){var Z=U._context.locale;Z||(Z="en-US");var Y=!1,W={};function te(J){for(var K=!0,re=0;re<X.length;re++){var ie=X[re];W[ie]||(J[ie]?W[ie]=J[ie]:K=!1)}K&&(Y=!0)}for(var z=0;z<2;z++){for(var N=U._context.locales,V=0;V<2;V++){var Q=(N[Z]||{}).format;if(Q&&(te(Q),Y))break;N=e.localeRegistry}var j=Z.split("-")[0];if(Y||j===Z)break;Z=j}return Y||te(e.localeRegistry.en.format),W}function T(U,X){var Z={_fullLayout:X},Y="x"===U._id.charAt(0),W=U._mainAxis._anchorAxis,te="",z="",N="";if(W&&(N=W._mainAxis._id,te=Y?U._id+N:N+U._id),!te||!X._plots[te]){te="";for(var V=U._counterAxes,Q=0;Q<V.length;Q++){var j=V[Q],J=Y?U._id+j:j+U._id;z||(z=J);var K=s.getFromId(Z,j);if(N&&K.overlaying===N){te=J;break}}}return te||z}function L(U){var X=U.transforms;if(Array.isArray(X)&&X.length)for(var Z=0;Z<X.length;Z++){var Y=X[Z],W=Y._module||x[Y.type];if(W&&W.makesData)return!0}return!1}function A(U,X,Z,Y){for(var W=U.transforms,te=[U],z=0;z<W.length;z++){var N=W[z],V=x[N.type];V&&V.transform&&(te=V.transform(te,{transform:N,fullTrace:U,fullData:X,layout:Z,fullLayout:Y,transformIndex:z}))}return te}function I(U){return"string"==typeof U&&"px"===U.substr(U.length-2)&&parseFloat(U)}function D(U){var X=U.margin;if(!U._size){var Z=U._size={l:Math.round(X.l),r:Math.round(X.r),t:Math.round(X.t),b:Math.round(X.b),p:Math.round(X.pad)};Z.w=Math.round(U.width)-Z.l-Z.r,Z.h=Math.round(U.height)-Z.t-Z.b}U._pushmargin||(U._pushmargin={}),U._pushmarginIds||(U._pushmarginIds={})}l.supplyDefaults=function(U,X){var He,Xe,Z=X&&X.skipUpdateCalc,Y=U._fullLayout||{};if(Y._skipDefaults)delete Y._skipDefaults;else{var W,te=U._fullLayout={},z=U.layout||{},N=U._fullData||[],V=U._fullData=[],Q=U.data||[],j=U.calcdata||[],J=U._context||{};U._transitionData||l.createTransitionData(U),te._dfltTitle={plot:f(U,"Click to enter Plot title"),x:f(U,"Click to enter X axis title"),y:f(U,"Click to enter Y axis title"),colorbar:f(U,"Click to enter Colorscale title"),annotation:f(U,"new text")},te._traceWord=f(U,"trace");var K=k(U,w);if(te._mapboxAccessToken=J.mapboxAccessToken,Y._initialAutoSizeIsDone){var re=Y.width,ie=Y.height;l.supplyLayoutGlobalDefaults(z,te,K),z.width||(te.width=re),z.height||(te.height=ie),l.sanitizeMargins(te)}else{l.supplyLayoutGlobalDefaults(z,te,K);var ce=!z.width||!z.height,se=te.autosize;ce&&(se||J.autosizable)?l.plotAutoSize(U,z,te):ce&&l.sanitizeMargins(te),!se&&ce&&(z.width=te.width,z.height=te.height)}te._d3locale=((He=K).decimal=(Xe=te.separators).charAt(0),He.thousands=Xe.charAt(1),{numberFormat:function(Je){try{Je=_(He).format(o.adjustFormat(Je))}catch(at){return o.warnBadFormat(Je),o.noFormat}return Je},timeFormat:g(He).utcFormat}),te._extraFormat=k(U,b),te._initialAutoSizeIsDone=!0,te._dataLength=Q.length,te._modules=[],te._visibleModules=[],te._basePlotModules=[];var ue=te._subplots=function(){var He,Xe,Je=e.collectableSubplotTypes,at={};if(!Je){Je=[];var pt=e.subplotsRegistry;for(var xt in pt){var Ft=pt[xt].attr;if(Ft&&(Je.push(xt),Array.isArray(Ft)))for(Xe=0;Xe<Ft.length;Xe++)o.pushUnique(Je,Ft[Xe])}}for(He=0;He<Je.length;He++)at[Je[He]]=[];return at}(),ge=te._splomAxes={x:{},y:{}},be=te._splomSubplots={};te._splomGridDflt={},te._scatterStackOpts={},te._firstScatter={},te._alignmentOpts={},te._colorAxes={},te._requestRangeslider={},te._traceUids=function(He,Xe){var Je,at,pt=Xe.length,xt=[];for(Je=0;Je<He.length;Je++){var Ft=He[Je]._fullInput;Ft!==at&&xt.push(Ft),at=Ft}var Dt=xt.length,ot=new Array(pt),it={};function Et(Ue,We){ot[We]=Ue,it[Ue]=1}function Xt(Ue,We){if(Ue&&"string"==typeof Ue&&!it[Ue])return Et(Ue,We),!0}for(Je=0;Je<pt;Je++){var nr=Xe[Je].uid;"number"==typeof nr&&(nr=String(nr)),Xt(nr,Je)||Je<Dt&&Xt(xt[Je].uid,Je)||Et(o.randstr(it),Je)}return ot}(N,Q),te._globalTransforms=(U._context||{}).globalTransforms,l.supplyDataDefaults(Q,V,z,te);var Te=Object.keys(ge.x),we=Object.keys(ge.y);if(Te.length>1&&we.length>1){for(e.getComponentMethod("grid","sizeDefaults")(z,te),W=0;W<Te.length;W++)o.pushUnique(ue.xaxis,Te[W]);for(W=0;W<we.length;W++)o.pushUnique(ue.yaxis,we[W]);for(var Le in be)o.pushUnique(ue.cartesian,Le)}if(te._has=l._hasPlotType.bind(te),N.length===V.length)for(W=0;W<V.length;W++)v(V[W],N[W]);l.supplyLayoutModuleDefaults(z,te,V,U._transitionData);var fe=te._visibleModules,ve=[];for(W=0;W<fe.length;W++){var Me=fe[W].crossTraceDefaults;Me&&o.pushUnique(ve,Me)}for(W=0;W<ve.length;W++)ve[W](V,te);te._hasOnlyLargeSploms=1===te._basePlotModules.length&&"splom"===te._basePlotModules[0].name&&Te.length>15&&we.length>15&&0===te.shapes.length&&0===te.images.length,l.linkSubplots(V,te,N,Y),l.cleanPlot(V,te,N,Y);var ke=!(!Y._has||!Y._has("gl2d")),Ce=!(!te._has||!te._has("gl2d")),Pe=!(!Y._has||!Y._has("cartesian"))||ke,Fe=!(!te._has||!te._has("cartesian"))||Ce;Pe&&!Fe?Y._bgLayer.remove():Fe&&!Pe&&(te._shouldCreateBgLayer=!0),Y._zoomlayer&&!U._dragging&&a({_fullLayout:Y}),function(He,Xe){var Je,at=[];Xe.meta&&(Je=Xe._meta={meta:Xe.meta,layout:{meta:Xe.meta}});for(var pt=0;pt<He.length;pt++){var xt=He[pt];xt.meta?at[xt.index]=xt._meta={meta:xt.meta}:Xe.meta&&(xt._meta={meta:Xe.meta}),Xe.meta&&(xt._meta.layout={meta:Xe.meta})}at.length&&(Je||(Je=Xe._meta={}),Je.data=at)}(V,te),v(te,Y),e.getComponentMethod("colorscale","crossTraceDefaults")(V,te),te._preGUI||(te._preGUI={}),te._tracePreGUI||(te._tracePreGUI={});var qe,rt=te._tracePreGUI,ze={};for(qe in rt)ze[qe]="old";for(W=0;W<V.length;W++)ze[qe=V[W]._fullInput.uid]||(rt[qe]={}),ze[qe]="new";for(qe in ze)"old"===ze[qe]&&delete rt[qe];D(te),e.getComponentMethod("rangeslider","makeData")(te),Z||j.length!==V.length||l.supplyDefaultsUpdateCalc(j,V)}},l.supplyDefaultsUpdateCalc=function(U,X){for(var Z=0;Z<X.length;Z++){var Y=X[Z],W=(U[Z]||[])[0];if(W&&W.trace){var te=W.trace;if(te._hasCalcTransform){var z,N,V,Q=te._arrayAttrs;for(z=0;z<Q.length;z++)V=o.nestedProperty(te,N=Q[z]).get().slice(),o.nestedProperty(Y,N).set(V)}W.trace=Y}}},l.createTransitionData=function(U){U._transitionData||(U._transitionData={}),U._transitionData._frames||(U._transitionData._frames=[]),U._transitionData._frameHash||(U._transitionData._frameHash={}),U._transitionData._counter||(U._transitionData._counter=0),U._transitionData._interruptCallbacks||(U._transitionData._interruptCallbacks=[])},l._hasPlotType=function(U){var X,Z=this._basePlotModules||[];for(X=0;X<Z.length;X++)if(Z[X].name===U)return!0;var Y=this._modules||[];for(X=0;X<Y.length;X++){var W=Y[X].name;if(W===U)return!0;var te=e.modules[W];if(te&&te.categories[U])return!0}return!1},l.cleanPlot=function(U,X,Z,Y){var W,te,z=Y._basePlotModules||[];for(W=0;W<z.length;W++){var N=z[W];N.clean&&N.clean(U,X,Z,Y)}var V=Y._has&&Y._has("gl"),Q=X._has&&X._has("gl");V&&!Q&&void 0!==Y._glcontainer&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.selectAll(".no-webgl").remove(),Y._glcanvas=null);var j=!!Y._infolayer;e:for(W=0;W<Z.length;W++){var J=Z[W].uid;for(te=0;te<U.length;te++)if(J===U[te].uid)continue e;j&&Y._infolayer.select(".cb"+J).remove()}},l.linkSubplots=function(U,X,Z,Y){var W,te,z=Y._plots||{},N=X._plots={},V=X._subplots,Q={_fullData:U,_fullLayout:X},j=V.cartesian.concat(V.gl2d||[]);for(W=0;W<j.length;W++){var J,K=j[W],re=z[K],ie=s.getFromId(Q,K,"x"),ce=s.getFromId(Q,K,"y");for(re?J=N[K]=re:(J=N[K]={}).id=K,ie._counterAxes.push(ce._id),ce._counterAxes.push(ie._id),ie._subplotsWith.push(K),ce._subplotsWith.push(K),J.xaxis=ie,J.yaxis=ce,J._hasClipOnAxisFalse=!1,te=0;te<U.length;te++){var se=U[te];if(se.xaxis===J.xaxis._id&&se.yaxis===J.yaxis._id&&!1===se.cliponaxis){J._hasClipOnAxisFalse=!0;break}}}var de,ue=s.list(Q,null,!0);for(W=0;W<ue.length;W++){var ge=null;(de=ue[W]).overlaying&&(ge=s.getFromId(Q,de.overlaying))&&ge.overlaying&&(de.overlaying=!1,ge=null),de._mainAxis=ge||de,ge&&(de.domain=ge.domain.slice()),de._anchorAxis="free"===de.anchor?null:s.getFromId(Q,de.anchor)}for(W=0;W<ue.length;W++)if((de=ue[W])._counterAxes.sort(s.idSort),de._subplotsWith.sort(o.subplotSort),de._mainSubplot=T(de,X),de._counterAxes.length&&(de.spikemode&&-1!==de.spikemode.indexOf("across")||de.automargin&&de.mirror&&"free"!==de.anchor||e.getComponentMethod("rangeslider","isVisible")(de))){var be=1,Te=0;for(te=0;te<de._counterAxes.length;te++){var we=s.getFromId(Q,de._counterAxes[te]);be=Math.min(be,we.domain[0]),Te=Math.max(Te,we.domain[1])}be<Te&&(de._counterDomainMin=be,de._counterDomainMax=Te)}},l.clearExpandedTraceDefaultColors=function(U){var X,Z,Y;for(Z=[],(X=U._module._colorAttrs)||(U._module._colorAttrs=X=[],i.crawl(U._module.attributes,function(W,te,z,N){Z[N]=te,Z.length=N+1,"color"===W.valType&&void 0===W.dflt&&X.push(Z.join("."))})),Y=0;Y<X.length;Y++)o.nestedProperty(U,"_input."+X[Y]).get()||o.nestedProperty(U,X[Y]).set(null)},l.supplyDataDefaults=function(U,X,Z,Y){var W,te,z,N=Y._modules,V=Y._visibleModules,Q=Y._basePlotModules,j=0,J=0;function K(Le){X.push(Le);var fe=Le._module;fe&&(o.pushUnique(N,fe),!0===Le.visible&&o.pushUnique(V,fe),o.pushUnique(Q,Le._module.basePlotModule),j++,!1!==Le._input.visible&&J++)}Y._transformModules=[];var re={},ie=[],se=r.traceTemplater((Z.template||{}).data||{});for(W=0;W<U.length;W++){if((te=se.newTrace(z=U[W])).uid=Y._traceUids[W],l.supplyTraceDefaults(z,te,J,Y,W),te.index=W,te._input=z,te._expandedIndex=j,te.transforms&&te.transforms.length)for(var de=!1!==z.visible&&!1===te.visible,ue=A(te,X,Z,Y),ge=0;ge<ue.length;ge++){var be=ue[ge],Te={_template:te._template,type:te.type,uid:te.uid+ge};de&&!1===be.visible&&delete be.visible,l.supplyTraceDefaults(be,Te,j,Y,W),v(Te,be),Te.index=W,Te._input=z,Te._fullInput=te,Te._expandedIndex=j,Te._expandedInput=be,K(Te)}else te._fullInput=te,te._expandedInput=te,K(te);e.traceIs(te,"carpetAxis")&&(re[te.carpet]=te),e.traceIs(te,"carpetDependent")&&ie.push(W)}for(W=0;W<ie.length;W++)if((te=X[ie[W]]).visible){var we=re[te.carpet];te._carpet=we,we&&we.visible?(te.xaxis=we.xaxis,te.yaxis=we.yaxis):te.visible=!1}},l.supplyAnimationDefaults=function(U){var X;U=U||{};var Z={};function Y(W,te){return o.coerce(U||{},Z,c,W,te)}if(Y("mode"),Y("direction"),Y("fromcurrent"),Array.isArray(U.frame))for(Z.frame=[],X=0;X<U.frame.length;X++)Z.frame[X]=l.supplyAnimationFrameDefaults(U.frame[X]||{});else Z.frame=l.supplyAnimationFrameDefaults(U.frame||{});if(Array.isArray(U.transition))for(Z.transition=[],X=0;X<U.transition.length;X++)Z.transition[X]=l.supplyAnimationTransitionDefaults(U.transition[X]||{});else Z.transition=l.supplyAnimationTransitionDefaults(U.transition||{});return Z},l.supplyAnimationFrameDefaults=function(U){var X={};function Z(Y,W){return o.coerce(U||{},X,c.frame,Y,W)}return Z("duration"),Z("redraw"),X},l.supplyAnimationTransitionDefaults=function(U){var X={};function Z(Y,W){return o.coerce(U||{},X,c.transition,Y,W)}return Z("duration"),Z("easing"),X},l.supplyFrameDefaults=function(U){var X={};function Z(Y,W){return o.coerce(U,X,u,Y,W)}return Z("group"),Z("name"),Z("traces"),Z("baseframe"),Z("data"),Z("layout"),X},l.supplyTraceDefaults=function(U,X,Z,Y,W){var te,z=Y.colorway||n.defaults,N=z[Z%z.length];function V(ue,ge){return o.coerce(U,X,l.attributes,ue,ge)}var Q=V("visible");V("type"),V("name",Y._traceWord+" "+W),V("uirevision",Y.uirevision);var j=l.getModule(X);if(X._module=j,j){var J=j.basePlotModule,K=J.attr,re=J.attributes;if(K&&re){var ie=Y._subplots,ce="";if(Q||"gl2d"!==J.name){if(Array.isArray(K))for(te=0;te<K.length;te++){var se=K[te],de=o.coerce(U,X,re,se);ie[se]&&o.pushUnique(ie[se],de),ce+=de}else ce=o.coerce(U,X,re,K);ie[J.name]&&o.pushUnique(ie[J.name],ce)}}}return Q&&(V("customdata"),V("ids"),V("meta"),e.traceIs(X,"showLegend")?(o.coerce(U,X,j.attributes.showlegend?j.attributes:l.attributes,"showlegend"),V("legendgroup"),V("legendgrouptitle.text"),V("legendrank"),X._dfltShowLegend=!0):X._dfltShowLegend=!1,j&&j.supplyDefaults(U,X,N,Y),e.traceIs(X,"noOpacity")||V("opacity"),e.traceIs(X,"notLegendIsolatable")&&(X.visible=!!X.visible),e.traceIs(X,"noHover")||(X.hovertemplate||o.coerceHoverinfo(U,X,Y),"parcats"!==X.type&&e.getComponentMethod("fx","supplyDefaults")(U,X,N,Y)),j&&j.selectPoints&&V("selectedpoints"),l.supplyTransformDefaults(U,X,Y)),X},l.hasMakesDataTransform=L,l.supplyTransformDefaults=function(U,X,Z){if(X._length||L(U)){var Y=Z._globalTransforms||[],W=Z._transformModules||[];if(Array.isArray(U.transforms)||0!==Y.length)for(var z=Y.concat(U.transforms||[]),N=X.transforms=[],V=0;V<z.length;V++){var Q,j=z[V],J=j.type,K=x[J],re=!(j._module&&j._module===K),ie=K&&"function"==typeof K.transform;K||o.warn("Unrecognized transform type "+J+"."),K&&K.supplyDefaults&&(re||ie)?((Q=K.supplyDefaults(j,X,Z,U)).type=J,Q._module=K,o.pushUnique(W,K)):Q=o.extendFlat({},j),N.push(Q)}}},l.supplyLayoutGlobalDefaults=function(U,X,Z){function Y(V,Q){return o.coerce(U,X,l.layoutAttributes,V,Q)}var W=U.template;o.isPlainObject(W)&&(X.template=W,X._template=W.layout,X._dataTemplate=W.data),Y("autotypenumbers");var te=o.coerceFont(Y,"font");o.coerceFont(Y,"title.font",o.extendFlat({},te,{size:Math.round(1.4*te.size)})),Y("title.text",X._dfltTitle.plot),Y("title.xref"),Y("title.yref"),Y("title.x"),Y("title.y"),Y("title.xanchor"),Y("title.yanchor"),Y("title.pad.t"),Y("title.pad.r"),Y("title.pad.b"),Y("title.pad.l"),Y("uniformtext.mode")&&Y("uniformtext.minsize"),Y("autosize",!(U.width&&U.height)),Y("width"),Y("height"),Y("margin.l"),Y("margin.r"),Y("margin.t"),Y("margin.b"),Y("margin.pad"),Y("margin.autoexpand"),U.width&&U.height&&l.sanitizeMargins(X),e.getComponentMethod("grid","sizeDefaults")(U,X),Y("paper_bgcolor"),Y("separators",Z.decimal+Z.thousands),Y("hidesources"),Y("colorway"),Y("datarevision");var N=Y("uirevision");Y("editrevision",N),Y("selectionrevision",N),e.getComponentMethod("modebar","supplyLayoutDefaults")(U,X),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(U,X,Y),Y("meta"),o.isPlainObject(U.transition)&&(Y("transition.duration"),Y("transition.easing"),Y("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(U,X,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(U,X,Y)},l.plotAutoSize=function(U,X,Z){var Y,W,te=U._context||{},z=te.frameMargins,N=o.isPlotDiv(U);if(N&&U.emit("plotly_autosize"),te.fillFrame)Y=window.innerWidth,W=window.innerHeight,document.body.style.overflow="hidden";else{var V=N?window.getComputedStyle(U):{};if(Y=I(V.width)||I(V.maxWidth)||Z.width,W=I(V.height)||I(V.maxHeight)||Z.height,t(z)&&z>0){var Q=1-2*z;Y=Math.round(Q*Y),W=Math.round(Q*W)}}var j=l.layoutAttributes.width.min,J=l.layoutAttributes.height.min;Y<j&&(Y=j),W<J&&(W=J);var K=!X.width&&Math.abs(Z.width-Y)>1,re=!X.height&&Math.abs(Z.height-W)>1;(re||K)&&(K&&(Z.width=Y),re&&(Z.height=W)),U._initialAutoSize||(U._initialAutoSize={width:Y,height:W}),l.sanitizeMargins(Z)},l.supplyLayoutModuleDefaults=function(U,X,Z,Y){var W,te,z,N=e.componentsRegistry,V=X._basePlotModules,Q=e.subplotsRegistry.cartesian;for(W in N)(z=N[W]).includeBasePlot&&z.includeBasePlot(U,X);for(var j in V.length||V.push(Q),X._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(U,X),Q.finalizeSubplots(U,X)),X._subplots)X._subplots[j].sort(o.subplotSort);for(te=0;te<V.length;te++)(z=V[te]).supplyLayoutDefaults&&z.supplyLayoutDefaults(U,X,Z);var J=X._modules;for(te=0;te<J.length;te++)(z=J[te]).supplyLayoutDefaults&&z.supplyLayoutDefaults(U,X,Z);var K=X._transformModules;for(te=0;te<K.length;te++)(z=K[te]).supplyLayoutDefaults&&z.supplyLayoutDefaults(U,X,Z,Y);for(W in N)(z=N[W]).supplyLayoutDefaults&&z.supplyLayoutDefaults(U,X,Z)},l.purge=function(U){var X=U._fullLayout||{};void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.remove(),X._glcanvas=null),X._modeBar&&X._modeBar.destroy(),U._transitionData&&(U._transitionData._interruptCallbacks&&(U._transitionData._interruptCallbacks.length=0),U._transitionData._animationRaf&&window.cancelAnimationFrame(U._transitionData._animationRaf)),o.clearThrottle(),o.clearResponsive(U),delete U.data,delete U.layout,delete U._fullData,delete U._fullLayout,delete U.calcdata,delete U.empty,delete U.fid,delete U.undoqueue,delete U.undonum,delete U.autoplay,delete U.changed,delete U._promises,delete U._redrawTimer,delete U._hmlumcount,delete U._hmpixcount,delete U._transitionData,delete U._transitioning,delete U._initialAutoSize,delete U._transitioningWithDuration,delete U._dragging,delete U._dragged,delete U._dragdata,delete U._hoverdata,delete U._snapshotInProgress,delete U._editing,delete U._mouseDownTime,delete U._legendMouseDownTime,U.removeAllListeners&&U.removeAllListeners()},l.style=function(U){var X,Z=U._fullLayout._visibleModules,Y=[];for(X=0;X<Z.length;X++){var W=Z[X];W.style&&o.pushUnique(Y,W.style)}for(X=0;X<Y.length;X++)Y[X](U)},l.sanitizeMargins=function(U){if(U&&U.margin){var X,Z=U.width,Y=U.height,W=U.margin,z=Y-(W.t+W.b);Z-(W.l+W.r)<0&&(X=(Z-1)/(W.l+W.r),W.l=Math.floor(X*W.l),W.r=Math.floor(X*W.r)),z<0&&(X=(Y-1)/(W.t+W.b),W.t=Math.floor(X*W.t),W.b=Math.floor(X*W.b))}},l.clearAutoMarginIds=function(U){U._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(U,X){U._fullLayout._pushmarginIds[X]=1},l.autoMargin=function(U,X,Z){var Y=U._fullLayout,W=Y.width,te=Y.height,z=Y.margin,N=o.constrain(W-z.l-z.r,2,64),V=o.constrain(te-z.t-z.b,2,64),Q=Math.max(0,W-N),j=Math.max(0,te-V),J=Y._pushmargin,K=Y._pushmarginIds;if(!1!==z.autoexpand){if(Z){var re=Z.pad;if(void 0===re&&(re=Math.min(12,z.l,z.r,z.t,z.b)),Q){var ie=(Z.l+Z.r)/Q;ie>1&&(Z.l/=ie,Z.r/=ie)}if(j){var ce=(Z.t+Z.b)/j;ce>1&&(Z.t/=ce,Z.b/=ce)}J[X]={l:{val:void 0!==Z.xl?Z.xl:Z.x,size:Z.l+re},r:{val:void 0!==Z.xr?Z.xr:Z.x,size:Z.r+re},b:{val:void 0!==Z.yb?Z.yb:Z.y,size:Z.b+re},t:{val:void 0!==Z.yt?Z.yt:Z.y,size:Z.t+re}},K[X]=1}else delete J[X],delete K[X];if(!Y._replotting)return l.doAutoMargin(U)}},l.doAutoMargin=function(U){var X=U._fullLayout,Z=X.width,Y=X.height;X._size||(X._size={}),D(X);var W=X._size,te=X.margin,z=o.extendFlat({},W),N=te.l,V=te.r,Q=te.t,j=te.b,J=X._pushmargin,K=X._pushmarginIds;if(!1!==X.margin.autoexpand){for(var re in J)K[re]||delete J[re];for(var ie in J.base={l:{val:0,size:N},r:{val:1,size:V},t:{val:1,size:Q},b:{val:0,size:j}},J){var ce=J[ie].l||{},se=J[ie].b||{},de=ce.val,ue=ce.size,ge=se.val,be=se.size;for(var Te in J){if(t(ue)&&J[Te].r){var we=J[Te].r.val,Le=J[Te].r.size;if(we>de){var fe=(ue*we+(Le-Z)*de)/(we-de),ve=(Le*(1-de)+(ue-Z)*(1-we))/(we-de);fe+ve>N+V&&(N=fe,V=ve)}}if(t(be)&&J[Te].t){var Me=J[Te].t.val,ke=J[Te].t.size;if(Me>ge){var Ce=(be*Me+(ke-Y)*ge)/(Me-ge),Pe=(ke*(1-ge)+(be-Y)*(1-Me))/(Me-ge);Ce+Pe>j+Q&&(j=Ce,Q=Pe)}}}}}var pt,Fe=o.constrain(Z-te.l-te.r,2,64),qe=o.constrain(Y-te.t-te.b,2,64),rt=Math.max(0,Z-Fe),ze=Math.max(0,Y-qe);if(rt){var He=(N+V)/rt;He>1&&(N/=He,V/=He)}if(ze){var Xe=(j+Q)/ze;Xe>1&&(j/=Xe,Q/=Xe)}if(W.l=Math.round(N),W.r=Math.round(V),W.t=Math.round(Q),W.b=Math.round(j),W.p=Math.round(te.pad),W.w=Math.round(Z)-W.l-W.r,W.h=Math.round(Y)-W.t-W.b,!X._replotting&&l.didMarginChange(z,W)){"_redrawFromAutoMarginCount"in X?X._redrawFromAutoMarginCount++:X._redrawFromAutoMarginCount=1;var Je=3*(1+Object.keys(K).length);if(X._redrawFromAutoMarginCount<Je)return e.call("_doPlot",U);X._size=z,o.warn("Too many auto-margin redraws.")}pt=s.list(U,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(xt){for(var Ft=0;Ft<pt.length;Ft++){var Dt=pt[Ft][xt];Dt&&Dt()}})};var S=["l","r","t","b","p","w","h"];function C(U,X,Z){var Y=!1,te=o.syncOrAsync([l.previousPromises,function(){if(U._transitionData)return U._transitioning=!1,function(z){var N=Promise.resolve();if(!z)return N;for(;z.length;)N=N.then(z.shift());return N}(U._transitionData._interruptCallbacks)},Z.prepareFn,l.rehover,function(){return U.emit("plotly_transitioning",[]),new Promise(function(z){U._transitioning=!0,X.duration>0&&(U._transitioningWithDuration=!0),U._transitionData._interruptCallbacks.push(function(){Y=!0}),Z.redraw&&U._transitionData._interruptCallbacks.push(function(){return e.call("redraw",U)}),U._transitionData._interruptCallbacks.push(function(){U.emit("plotly_transitioninterrupted",[])});var N=0,V=0;function Q(){return N++,function(){var j;V++,Y||V!==N||(j=z,!U._transitionData||(function(J){if(J)for(;J.length;)J.shift()}(U._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(Z.redraw)return e.call("redraw",U)}).then(function(){U._transitioning=!1,U._transitioningWithDuration=!1,U.emit("plotly_transitioned",[])}).then(j)))}}Z.runFn(Q),setTimeout(Q())})}],U);return te&&te.then||(te=Promise.resolve()),te.then(function(){return U})}l.didMarginChange=function(U,X){for(var Z=0;Z<S.length;Z++){var Y=S[Z],W=U[Y],te=X[Y];if(!t(W)||Math.abs(te-W)>1)return!0}return!1},l.graphJson=function(U,X,Z,Y,W,te){(W&&X&&!U._fullData||W&&!X&&!U._fullLayout)&&l.supplyDefaults(U);var N=W?U._fullLayout:U.layout,V=(U._transitionData||{})._frames;function Q(K,re){if("function"==typeof K)return re?"_function_":null;if(o.isPlainObject(K)){var ie,ce={};return Object.keys(K).sort().forEach(function(se){if(-1===["_","["].indexOf(se.charAt(0)))if("function"!=typeof K[se]){if("keepdata"===Z){if("src"===se.substr(se.length-3))return}else if("keepstream"===Z){if("string"==typeof(ie=K[se+"src"])&&ie.indexOf(":")>0&&!o.isPlainObject(K.stream))return}else if("keepall"!==Z&&"string"==typeof(ie=K[se+"src"])&&ie.indexOf(":")>0)return;ce[se]=Q(K[se],re)}else re&&(ce[se]="_function")}),ce}return Array.isArray(K)?K.map(function(se){return Q(se,re)}):o.isTypedArray(K)?o.simpleMap(K,o.identity):o.isJSDate(K)?o.ms2DateTimeLocal(+K):K}var j={data:((W?U._fullData:U.data)||[]).map(function(K){var re=Q(K);return X&&delete re.fit,re})};if(!X&&(j.layout=Q(N),W)){var J=N._size;j.layout.computed={margin:{b:J.b,l:J.l,r:J.r,t:J.t}}}return V&&(j.frames=Q(V)),te&&(j.config=Q(U._context,!0)),"object"===Y?j:JSON.stringify(j)},l.modifyFrames=function(U,X){var Z,Y,W,te=U._transitionData._frames,z=U._transitionData._frameHash;for(Z=0;Z<X.length;Z++)switch((Y=X[Z]).type){case"replace":var N=(te[Y.index]||{}).name,V=(W=Y.value).name;te[Y.index]=z[V]=W,V!==N&&(delete z[N],z[V]=W);break;case"insert":z[(W=Y.value).name]=W,te.splice(Y.index,0,W);break;case"delete":delete z[(W=te[Y.index]).name],te.splice(Y.index,1)}return Promise.resolve()},l.computeFrame=function(U,X){var Z,Y,W,te,z=U._transitionData._frameHash;if(!X)throw new Error("computeFrame must be given a string frame name");var N=z[X.toString()];if(!N)return!1;for(var V=[N],Q=[N.name];N.baseframe&&(N=z[N.baseframe.toString()])&&-1===Q.indexOf(N.name);)V.push(N),Q.push(N.name);for(var j={};N=V.pop();)if(N.layout&&(j.layout=l.extendLayout(j.layout,N.layout)),N.data){if(j.data||(j.data=[]),!(Y=N.traces))for(Y=[],Z=0;Z<N.data.length;Z++)Y[Z]=Z;for(j.traces||(j.traces=[]),Z=0;Z<N.data.length;Z++)null!=(W=Y[Z])&&(-1===(te=j.traces.indexOf(W))&&(j.traces[te=j.data.length]=W),j.data[te]=l.extendTrace(j.data[te],N.data[Z]))}return j},l.recomputeFrameHash=function(U){for(var X=U._transitionData._frameHash={},Z=U._transitionData._frames,Y=0;Y<Z.length;Y++){var W=Z[Y];W&&W.name&&(X[W.name]=W)}},l.extendObjectWithContainers=function(U,X,Z){var Y,W,te,z,N,V,Q,j=o.extendDeepNoArrays({},X||{}),J=o.expandObjectPaths(j),K={};if(Z&&Z.length)for(te=0;te<Z.length;te++)void 0===(W=(Y=o.nestedProperty(J,Z[te])).get())?o.nestedProperty(K,Z[te]).set(null):(Y.set(null),o.nestedProperty(K,Z[te]).set(W));if(U=o.extendDeepNoArrays(U||{},J),Z&&Z.length)for(te=0;te<Z.length;te++)if(V=o.nestedProperty(K,Z[te]).get()){for(Q=(N=o.nestedProperty(U,Z[te])).get(),Array.isArray(Q)||N.set(Q=[]),z=0;z<V.length;z++){var re=V[z];Q[z]=null===re?null:l.extendObjectWithContainers(Q[z],re)}N.set(Q)}return U},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(U,X){return l.extendObjectWithContainers(U,X,l.dataArrayContainers)},l.extendLayout=function(U,X){return l.extendObjectWithContainers(U,X,l.layoutArrayContainers)},l.transition=function(U,X,Z,Y,W,te){var z={redraw:W.redraw},N={},V=[];return z.prepareFn=function(){for(var Q=Array.isArray(X)?X.length:0,j=Y.slice(0,Q),J=0;J<j.length;J++){var K=j[J],re=U._fullData[K]._module;if(re){if(re.animatable){var ie=re.basePlotModule.name;N[ie]||(N[ie]=[]),N[ie].push(K)}U.data[j[J]]=l.extendTrace(U.data[j[J]],X[J])}}var ce=o.expandObjectPaths(o.extendDeepNoArrays({},Z)),se=/^[xy]axis[0-9]*$/;for(var de in ce)se.test(de)&&delete ce[de].range;l.extendLayout(U.layout,ce),delete U.calcdata,l.supplyDefaults(U),l.doCalcdata(U);var ue=o.expandObjectPaths(Z);if(ue){var ge=U._fullLayout._plots;for(var be in ge){var Te=ge[be],we=Te.xaxis,Le=Te.yaxis,fe=we.range.slice(),ve=Le.range.slice(),Me=null,ke=null,Ce=null,Pe=null;Array.isArray(ue[we._name+".range"])?Me=ue[we._name+".range"].slice():Array.isArray((ue[we._name]||{}).range)&&(Me=ue[we._name].range.slice()),Array.isArray(ue[Le._name+".range"])?ke=ue[Le._name+".range"].slice():Array.isArray((ue[Le._name]||{}).range)&&(ke=ue[Le._name].range.slice()),fe&&Me&&(we.r2l(fe[0])!==we.r2l(Me[0])||we.r2l(fe[1])!==we.r2l(Me[1]))&&(Ce={xr0:fe,xr1:Me}),ve&&ke&&(Le.r2l(ve[0])!==Le.r2l(ke[0])||Le.r2l(ve[1])!==Le.r2l(ke[1]))&&(Pe={yr0:ve,yr1:ke}),(Ce||Pe)&&V.push(o.extendFlat({plotinfo:Te},Ce,Pe))}}return Promise.resolve()},z.runFn=function(Q){var j,J,K=U._fullLayout._basePlotModules,re=V.length;if(Z)for(J=0;J<K.length;J++)K[J].transitionAxes&&K[J].transitionAxes(U,V,te,Q);for(var ie in re?((j=o.extendFlat({},te)).duration=0,delete N.cartesian):j=te,N){var ce=N[ie];U._fullData[ce[0]]._module.basePlotModule.plot(U,ce,j,Q)}},C(U,te,z)},l.transitionFromReact=function(U,X,Z,Y){var W=U._fullLayout,te=W.transition,z={},N=[];return z.prepareFn=function(){var V=W._plots;for(var Q in z.redraw=!1,"some"===X.anim&&(z.redraw=!0),"some"===Z.anim&&(z.redraw=!0),V){var j=V[Q],J=j.xaxis,K=j.yaxis,re=Y[J._name].range.slice(),ie=Y[K._name].range.slice(),ce=J.range.slice(),se=K.range.slice();J.setScale(),K.setScale();var de=null,ue=null;J.r2l(re[0])===J.r2l(ce[0])&&J.r2l(re[1])===J.r2l(ce[1])||(de={xr0:re,xr1:ce}),K.r2l(ie[0])===K.r2l(se[0])&&K.r2l(ie[1])===K.r2l(se[1])||(ue={yr0:ie,yr1:se}),(de||ue)&&N.push(o.extendFlat({plotinfo:j},de,ue))}return Promise.resolve()},z.runFn=function(V){for(var Q,j,J,K=U._fullData,re=U._fullLayout._basePlotModules,ie=[],ce=0;ce<K.length;ce++)ie.push(ce);function se(){if(U._fullLayout)for(var ue=0;ue<re.length;ue++)re[ue].transitionAxes&&re[ue].transitionAxes(U,N,Q,V)}function de(){if(U._fullLayout)for(var ue=0;ue<re.length;ue++)re[ue].plot(U,J,j,V)}N.length&&X.anim?"traces first"===te.ordering?(Q=o.extendFlat({},te,{duration:0}),J=ie,j=te,setTimeout(se,te.duration),de()):(Q=te,J=null,j=o.extendFlat({},te,{duration:0}),setTimeout(de,Q.duration),se()):N.length?(Q=te,se()):X.anim&&(J=ie,j=te,de())},C(U,te,z)},l.doCalcdata=function(U,X){var Z,Y,W,te,z=s.list(U),N=U._fullData,V=U._fullLayout,Q=new Array(N.length),j=(U.calcdata||[]).slice();for(U.calcdata=Q,V._numBoxes=0,V._numViolins=0,V._violinScaleGroupStats={},U._hmpixcount=0,U._hmlumcount=0,V._piecolormap={},V._sunburstcolormap={},V._treemapcolormap={},V._iciclecolormap={},V._funnelareacolormap={},W=0;W<N.length;W++)Array.isArray(X)&&-1===X.indexOf(W)&&(Q[W]=j[W]);for(W=0;W<N.length;W++)(Z=N[W])._arrayAttrs=i.findArrayAttributes(Z),Z._extremes={};var J=V._subplots.polar||[];for(W=0;W<J.length;W++)z.push(V[J[W]].radialaxis,V[J[W]].angularaxis);for(var K in V._colorAxes){var re=V[K];!1!==re.cauto&&(delete re.cmin,delete re.cmax)}var ie=!1;function ce(ue){if(Y=(Z=N[ue])._module,!0===Z.visible&&Z.transforms){if(Y&&Y.calc){var ge=Y.calc(U,Z);ge[0]&&ge[0].t&&ge[0].t._scene&&delete ge[0].t._scene.dirty}for(te=0;te<Z.transforms.length;te++){var be=Z.transforms[te];(Y=x[be.type])&&Y.calcTransform&&(Z._hasCalcTransform=!0,ie=!0,Y.calcTransform(U,Z,be))}}}function se(ue,ge){if(!!(Y=(Z=N[ue])._module).isContainer===ge){var be=[];if(!0===Z.visible&&0!==Z._length){delete Z._indexToPoints;var Te=Z.transforms||[];for(te=Te.length-1;te>=0;te--)if(Te[te].enabled){Z._indexToPoints=Te[te]._indexToPoints;break}Y&&Y.calc&&(be=Y.calc(U,Z))}Array.isArray(be)&&be[0]||(be=[{x:p,y:p}]),be[0].t||(be[0].t={}),be[0].trace=Z,Q[ue]=be}}for(F(z,N,V),W=0;W<N.length;W++)se(W,!0);for(W=0;W<N.length;W++)ce(W);for(ie&&F(z,N,V),W=0;W<N.length;W++)se(W,!0);for(W=0;W<N.length;W++)se(W,!1);H(U);var de=function(ue,ge){var be,Te,we,Le,fe,ve=[];function Me(Qe,Ae,De){var Oe=Ae._id.charAt(0);if("histogram2dcontour"===Qe){var Ie=Ae._counterAxes[0],et=s.getFromId(ge,Ie),ct="x"===Oe||"x"===Ie&&"category"===et.type,vt="y"===Oe||"y"===Ie&&"category"===et.type;return function(ft,It){return 0===ft||0===It||ct&&ft===De[It].length-1||vt&&It===De.length-1?-1:("y"===Oe?It:ft)-1}}return function(ft,It){return"y"===Oe?It:ft}}var ke={min:function(Qe){return o.aggNums(Math.min,null,Qe)},max:function(Qe){return o.aggNums(Math.max,null,Qe)},sum:function(Qe){return o.aggNums(function(Ae,De){return Ae+De},null,Qe)},total:function(Qe){return o.aggNums(function(Ae,De){return Ae+De},null,Qe)},mean:function(Qe){return o.mean(Qe)},median:function(Qe){return o.median(Qe)}};for(be=0;be<ue.length;be++){var Ce=ue[be];if("category"===Ce.type){var Pe=Ce.categoryorder.match(R);if(Pe){var Fe=Pe[1],qe=Pe[2],rt=Ce._id.charAt(0),ze="x"===rt,He=[];for(Te=0;Te<Ce._categories.length;Te++)He.push([Ce._categories[Te],[]]);for(Te=0;Te<Ce._traceIndices.length;Te++){var Xe=Ce._traceIndices[Te],Je=ge._fullData[Xe];if(!0===Je.visible){var at=Je.type;e.traceIs(Je,"histogram")&&(delete Je._xautoBinFinished,delete Je._yautoBinFinished);var pt="splom"===at,xt="scattergl"===at,Ft=ge.calcdata[Xe];for(we=0;we<Ft.length;we++){var Dt,ot,it=Ft[we];if(pt){var Et=Je._axesDim[Ce._id];if(!ze){var Xt=Je._diag[Et][0];Xt&&(Ce=ge._fullLayout[s.id2name(Xt)])}var nr=it.trace.dimensions[Et].values;for(Le=0;Le<nr.length;Le++)for(Dt=Ce._categoriesMap[nr[Le]],fe=0;fe<it.trace.dimensions.length;fe++)fe!==Et&&He[Dt][1].push(it.trace.dimensions[fe].values[Le])}else if(xt){for(Le=0;Le<it.t.x.length;Le++)ze?(Dt=it.t.x[Le],ot=it.t.y[Le]):(Dt=it.t.y[Le],ot=it.t.x[Le]),He[Dt][1].push(ot);it.t&&it.t._scene&&delete it.t._scene.dirty}else if(it.hasOwnProperty("z")){var We=Me(Je.type,Ce,ot=it.z);for(Le=0;Le<ot.length;Le++)for(fe=0;fe<ot[Le].length;fe++)(Dt=We(fe,Le))+1&&He[Dt][1].push(ot[Le][fe])}else for(void 0===(Dt=it.p)&&(Dt=it[rt]),void 0===(ot=it.s)&&(ot=it.v),void 0===ot&&(ot=ze?it.y:it.x),Array.isArray(ot)||(ot=void 0===ot?[]:[ot]),Le=0;Le<ot.length;Le++)He[Dt][1].push(ot[Le])}}}Ce._categoriesValue=He;var Be=[];for(Te=0;Te<He.length;Te++)Be.push([He[Te][0],ke[Fe](He[Te][1])]);Be.sort(function(Qe,Ae){return Qe[1]-Ae[1]}),Ce._categoriesAggregatedValue=Be,Ce._initialCategories=Be.map(function(Qe){return Qe[0]}),"descending"===qe&&Ce._initialCategories.reverse(),ve=ve.concat(Ce.sortByInitialCategories())}}}return ve}(z,U);if(de.length){for(V._numBoxes=0,V._numViolins=0,W=0;W<de.length;W++)se(de[W],!0);for(W=0;W<de.length;W++)se(de[W],!1);H(U)}e.getComponentMethod("fx","calc")(U),e.getComponentMethod("errorbars","calc")(U)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;function F(U,X,Z){var Y={};function W(V){V.clearCalc(),"multicategory"===V.type&&V.setupMultiCategory(X),Y[V._id]=1}o.simpleMap(U,W);for(var te=Z._axisMatchGroups||[],z=0;z<te.length;z++)for(var N in te[z])Y[N]||W(Z[s.id2name(N)])}function H(U){var X,Z,Y,W=U._fullLayout,te=W._visibleModules,z={};for(Z=0;Z<te.length;Z++){var N=te[Z],V=N.crossTraceCalc;if(V){var Q=N.basePlotModule.name;z[Q]?o.pushUnique(z[Q],V):z[Q]=[V]}}for(Y in z){var j=z[Y],J=W._subplots[Y];if(Array.isArray(J))for(X=0;X<J.length;X++){var K=J[X],re="cartesian"===Y?W._plots[K]:W[K];for(Z=0;Z<j.length;Z++)j[Z](U,re,K)}else for(Z=0;Z<j.length;Z++)j[Z](U)}}l.rehover=function(U){U._fullLayout._rehover&&U._fullLayout._rehover()},l.redrag=function(U){U._fullLayout._redrag&&U._fullLayout._redrag()},l.generalUpdatePerTraceModule=function(U,X,Z,Y){var W,te=X.traceHash,z={};for(W=0;W<Z.length;W++){var N=Z[W],V=N[0].trace;V.visible&&(z[V.type]=z[V.type]||[],z[V.type].push(N))}for(var Q in te)if(!z[Q]){var j=te[Q][0];j[0].trace.visible=!1,z[Q]=[j]}for(var J in z){var K=z[J];K[0][0].trace._module.plot(U,X,o.filterVisible(K),Y)}X.traceHash=z},l.plotBasePlot=function(U,X,Z,Y,W){var te=e.getModule(U),z=h(X.calcdata,te)[0];te.plot(X,z,Y,W)},l.cleanBasePlot=function(U,X,Z,Y,W){var te=W._has&&W._has(U),z=Z._has&&Z._has(U);te&&!z&&W["_"+U+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(y,$,ee){"use strict";$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../lib/polygon").tester,_=d.findIndexOfMin,t=d.isAngleInsideSector,e=d.angleDelta,i=d.angleDist;function r(s,a,c,u){var h,v,f=u[0],l=u[1],x=n(Math.sin(a)-Math.sin(s)),m=n(Math.cos(a)-Math.cos(s)),w=Math.tan(c),b=n(1/w),k=x/m,T=l-k*f;return b?x&&m?v=w*(h=T/(w-k)):m?(h=l*b,v=l):(h=f,v=f*w):x&&m?(h=0,v=T):m?(h=0,v=l):h=v=NaN,[h,v]}function o(s,a,c,u){return d.isFullCircle([a,c])?function(h,v){var f,l=v.length,x=new Array(l+1);for(f=0;f<l;f++){var m=v[f];x[f]=[h*Math.cos(m),h*Math.sin(m)]}return x[f]=x[0].slice(),x}(s,u):function(h,v,f,l){var x,m,w=l.length,b=[];function k(F){return[h*Math.cos(F),h*Math.sin(F)]}function T(F,H,U){return r(F,H,U,k(F))}function L(F){return d.mod(F,w)}function A(F){return t(F,[v,f])}var I=_(l,function(F){return A(F)?i(F,v):1/0}),D=T(l[I],l[L(I-1)],v);for(b.push(D),x=I,m=0;m<w;x++,m++){var S=l[L(x)];if(!A(S))break;b.push(k(S))}var C=_(l,function(F){return A(F)?i(F,f):1/0}),R=T(l[C],l[L(C+1)],f);return b.push(R),b.push([0,0]),b.push(b[0].slice()),b}(s,a,c,u)}function n(s){return Math.abs(s)>1e-10?s:0}function p(s,a,c){a=a||0,c=c||0;for(var u=s.length,h=new Array(u),v=0;v<u;v++){var f=s[v];h[v]=[a+f[0],c-f[1]]}return h}$.exports={isPtInsidePolygon:function(s,a,c,u,h){if(!t(a,u))return!1;var v,f;c[0]<c[1]?(v=c[0],f=c[1]):(v=c[1],f=c[0]);var l=g(o(v,u[0],u[1],h)),x=g(o(f,u[0],u[1],h)),m=[s*Math.cos(a),s*Math.sin(a)];return x.contains(m)&&!l.contains(m)},findPolygonOffset:function(s,a,c,u){for(var h=1/0,v=1/0,f=o(s,a,c,u),l=0;l<f.length;l++){var x=f[l];h=Math.min(h,x[0]),v=Math.min(v,-x[1])}return[h,v]},findEnclosingVertexAngles:function(s,a){var c=_(a,function(h){var v=e(h,s);return v>0?v:1/0}),u=d.mod(c+1,a.length);return[a[c],a[u]]},findIntersectionXY:r,findXYatLength:function(s,a,c,u){var h=-a*c,v=a*a+1,f=2*(a*h-c),x=Math.sqrt(f*f-4*v*(h*h+c*c-s*s)),m=(-f+x)/(2*v),w=(-f-x)/(2*v);return[[m,a*m+h+u],[w,a*w+h+u]]},clampTiny:n,pathPolygon:function(s,a,c,u,h,v){return"M"+p(o(s,a,c,u),h,v).join("L")},pathPolygonAnnulus:function(s,a,c,u,h,v,f){var l,x;s<a?(l=s,x=a):(l=a,x=s);var m=p(o(l,c,u,h),v,f);return"M"+p(o(x,c,u,h),v,f).reverse().join("L")+"M"+m.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(y,$,ee){"use strict";var d=y("../get_data").getSubplotCalcData,g=y("../../lib").counterRegex,_=y("./polar"),t=y("./constants"),e=t.attr,i=t.name,r=g(i),o={};o[e]={valType:"subplotid",dflt:i,editType:"calc"},$.exports={attr:e,name:i,idRoot:i,idRegex:r,attrRegex:r,attributes:o,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(n){for(var p=n._fullLayout,s=n.calcdata,a=p._subplots[i],c=0;c<a.length;c++){var u=a[c],h=d(s,i,u),v=p[u]._subplot;v||(v=_(n,u),p[u]._subplot=v),v.plot(h,p,n._promises)}},clean:function(n,p,s,a){for(var c=a._subplots[i]||[],u=a._has&&a._has("gl"),h=p._has&&p._has("gl"),v=u&&!h,f=0;f<c.length;f++){var l=c[f],x=a[l]._subplot;if(!p[l]&&x)for(var m in x.framework.remove(),x.layers["radial-axis-title"].remove(),x.clipPaths)x.clipPaths[m].remove();v&&x._scene&&(x._scene.destroy(),x._scene=null)}},toSVG:y("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(y,$,ee){"use strict";var d=y("../../components/color/attributes"),g=y("../cartesian/layout_attributes"),_=y("../domain").attributes,t=y("../../lib").extendFlat,e=y("../../plot_api/edit_types").overrideAll,i=e({color:g.color,showline:t({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:t({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth},"plot","from-root"),r=e({tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,layer:g.layer},"plot","from-root"),o={visible:t({},g.visible,{dflt:!0}),type:t({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorange:t({},g.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:t({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:g.categoryorder,categoryarray:g.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:t({},g.title.text,{editType:"plot",dflt:""}),font:t({},g.title.font,{editType:"plot"}),editType:"plot"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}};t(o,i,r);var n={visible:t({},g.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:g.autotypenumbers,categoryorder:g.categoryorder,categoryarray:g.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};t(n,i,r),$.exports={domain:_({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:d.background},radialaxis:o,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color"),_=y("../../plot_api/plot_template"),t=y("../subplot_defaults"),e=y("../get_data").getSubplotData,i=y("../cartesian/tick_value_defaults"),r=y("../cartesian/tick_mark_defaults"),o=y("../cartesian/tick_label_defaults"),n=y("../cartesian/prefix_suffix_defaults"),p=y("../cartesian/category_order_defaults"),s=y("../cartesian/line_grid_defaults"),a=y("../cartesian/axis_autotype"),c=y("./layout_attributes"),u=y("./set_convert"),h=y("./constants"),v=h.axisNames;function f(x,m,w,b){var k=w("bgcolor");b.bgColor=g.combine(k,b.paper_bgcolor);var T=w("sector");w("hole");var L,A=e(b.fullData,h.name,b.id),I=b.layoutOut;function D(Q,j){return w(L+"."+Q,j)}for(var S=0;S<v.length;S++){d.isPlainObject(x[L=v[S]])||(x[L]={});var C=x[L],R=_.newContainer(m,L);R._id=R._name=L,R._attr=b.id+"."+L,R._traceIndices=A.map(function(Q){return Q._expandedIndex});var F=h.axisName2dataArray[L],H=l(C,R,D,A,F,b);p(C,R,D,{axData:A,dataAttr:F});var U=D("visible");switch(u(R,m,I),D("uirevision",m.uirevision),R._m=1,L){case"radialaxis":var X=D("autorange",!R.isValidRange(C.range));C.autorange=X,!X||"linear"!==H&&"-"!==H||D("rangemode"),"reversed"===X&&(R._m=-1),D("range"),R.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===H){d.log("Polar plots do not support date angular axes yet.");for(var Z=0;Z<A.length;Z++)A[Z].visible=!1;H=C.type=R.type="linear"}D("linear"===H?"thetaunit":"period");var Y=D("direction");D("rotation",{counterclockwise:0,clockwise:90}[Y])}if(n(C,R,D,R.type,{tickSuffixDflt:"degrees"===R.thetaunit?"\xb0":void 0}),U){var W,te,z,N,V=b.font||{};te=(W=D("color"))===C.color?W:V.color,z=V.size,N=V.family,i(C,R,D,R.type),o(C,R,D,R.type,{font:{color:te,size:z,family:N}}),r(C,R,D,{outerTicks:!0}),s(C,R,D,{dfltColor:W,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[L]}),D("layer"),"radialaxis"===L&&(D("side"),D("angle",T[0]),D("title.text"),d.coerceFont(D,"title.font",{color:te,size:d.bigFont(z),family:N}))}"category"!==H&&D("hoverformat"),R._input=C}"category"===m.angularaxis.type&&w("gridshape")}function l(x,m,w,b,k,T){var L=w("autotypenumbers",T.autotypenumbersDflt);if("-"===w("type")){for(var A,I=0;I<b.length;I++)if(b[I].visible){A=b[I];break}A&&A[k]&&(m.type=a(A[k],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),"-"===m.type?m.type="linear":x.type=m.type}return m.type}$.exports=function(x,m,w){t(x,m,w,{type:h.name,attributes:c,handleDefaults:f,font:m.font,autotypenumbersDflt:m.autotypenumbers,paper_bgcolor:m.paper_bgcolor,fullData:w,layoutOut:m})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("tinycolor2"),_=y("../../registry"),t=y("../../lib"),e=t.strRotate,i=t.strTranslate,r=y("../../components/color"),o=y("../../components/drawing"),n=y("../plots"),p=y("../../plots/cartesian/axes"),s=y("../cartesian/set_convert"),a=y("./set_convert"),c=y("../cartesian/autorange").doAutoRange,u=y("../cartesian/dragbox"),h=y("../../components/dragelement"),v=y("../../components/fx"),f=y("../../components/titles"),l=y("../cartesian/select").prepSelect,x=y("../cartesian/select").selectOnClick,m=y("../cartesian/select").clearSelect,w=y("../../lib/setcursor"),b=y("../../lib/clear_gl_canvases"),k=y("../../plot_api/subroutines").redrawReglTraces,T=y("../../constants/alignment").MID_SHIFT,L=y("./constants"),A=y("./helpers"),I=y("../smith/helpers"),D=I.smith,S=I.reactanceArc,C=I.resistanceArc,R=I.smithTransform,F=t._,H=t.mod,U=t.deg2rad,X=t.rad2deg;function Z(N,V,Q){this.isSmith=Q||!1,this.id=V,this.gd=N,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var j=N._fullLayout;this.clipIds.forTraces="clip"+j._uid+V+"-for-traces",this.clipPaths.forTraces=j._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=j["_"+(Q?"smith":"polar")+"layer"].append("g").attr("class",V),this.getHole=function(K){return this.isSmith?0:K.hole},this.getSector=function(K){return this.isSmith?[0,360]:K.sector},this.getRadial=function(K){return this.isSmith?K.realaxis:K.radialaxis},this.getAngular=function(K){return this.isSmith?K.imaginaryaxis:K.angularaxis},Q||(this.radialTickLayout=null,this.angularTickLayout=null)}var Y=Z.prototype;function W(N){var V=N.ticks+String(N.ticklen)+String(N.showticklabels);return"side"in N&&(V+=N.side),V}function te(N,V){return V[t.findIndexOfMin(V,function(Q){return t.angleDist(N,Q)})]}function z(N,V,Q){return V?(N.attr("display",null),N.attr(Q)):N&&N.attr("display","none"),N}$.exports=function(N,V,Q){return new Z(N,V,Q)},Y.plot=function(N,V){for(var Q=V[this.id],j=!1,J=0;J<N.length;J++)if(!1===N[J][0].trace.cliponaxis){j=!0;break}this._hasClipOnAxisFalse=j,this.updateLayers(V,Q),this.updateLayout(V,Q),n.generalUpdatePerTraceModule(this.gd,this,N,Q),this.updateFx(V,Q),this.isSmith&&(delete Q.realaxis.range,delete Q.imaginaryaxis.range)},Y.updateLayers=function(N,V){var Q=this.isSmith,j=this.layers,J=this.getRadial(V),K=this.getAngular(V),re=L.layerNames,ie=re.indexOf("frontplot"),ce=re.slice(0,ie),se="below traces"===K.layer,de="below traces"===J.layer;se&&ce.push("angular-line"),de&&ce.push("radial-line"),se&&ce.push("angular-axis"),de&&ce.push("radial-axis"),ce.push("frontplot"),se||ce.push("angular-line"),de||ce.push("radial-line"),se||ce.push("angular-axis"),de||ce.push("radial-axis");var ue=(Q?"smith":"polar")+"sublayer",ge=this.framework.selectAll("."+ue).data(ce,String);ge.enter().append("g").attr("class",function(be){return ue+" "+be}).each(function(be){var Te=j[be]=d.select(this);switch(be){case"frontplot":Q||Te.append("g").classed("barlayer",!0),Te.append("g").classed("scatterlayer",!0);break;case"backplot":Te.append("g").classed("maplayer",!0);break;case"plotbg":j.bg=Te.append("path");break;case"radial-grid":case"angular-grid":Te.style("fill","none");break;case"radial-line":Te.append("line").style("fill","none");break;case"angular-line":Te.append("path").style("fill","none")}}),ge.order()},Y.updateLayout=function(N,V){var Q=this.layers,j=N._size,J=this.getRadial(V),K=this.getAngular(V),re=V.domain.x,ie=V.domain.y;this.xOffset=j.l+j.w*re[0],this.yOffset=j.t+j.h*(1-ie[1]);var ce=this.xLength=j.w*(re[1]-re[0]),se=this.yLength=j.h*(ie[1]-ie[0]),de=this.getSector(V);this.sectorInRad=de.map(U);var ue,ge,be,Te,we,xt,it,Et,Xt,nr,Ue,We,Be,Qe,Ae,Le=this.sectorBBox=(Xt=(xt=de)[1]-(Et=xt[0]),Ue=(nr=H(Et,360))+Xt,We=Math.cos(U(nr)),Be=Math.sin(U(nr)),Qe=Math.cos(U(Ue)),Ae=Math.sin(U(Ue)),it=nr<=90&&Ue>=90||nr>90&&Ue>=450?1:Be<=0&&Ae<=0?0:Math.max(Be,Ae),[nr<=180&&Ue>=180||nr>180&&Ue>=540?-1:We>=0&&Qe>=0?0:Math.min(We,Qe),nr<=270&&Ue>=270||nr>270&&Ue>=630?-1:Be>=0&&Ae>=0?0:Math.min(Be,Ae),Ue>=360?1:We<=0&&Qe<=0?0:Math.max(We,Qe),it]),fe=Le[2]-Le[0],Me=se/ce,ke=Math.abs((Le[3]-Le[1])/fe);Me>ke?(ue=ce,we=(se-(ge=ce*ke))/j.h/2,be=[re[0],re[1]],Te=[ie[0]+we,ie[1]-we]):(ge=se,we=(ce-(ue=se/ke))/j.w/2,be=[re[0]+we,re[1]-we],Te=[ie[0],ie[1]]),this.xLength2=ue,this.yLength2=ge,this.xDomain2=be,this.yDomain2=Te;var Ce,Pe=this.xOffset2=j.l+j.w*be[0],Fe=this.yOffset2=j.t+j.h*(1-Te[1]),qe=this.radius=ue/fe,rt=this.innerRadius=this.getHole(V)*qe,ze=this.cx=Pe-qe*Le[0],He=this.cy=Fe+qe*Le[3],Xe=this.cxx=ze-Pe,Je=this.cyy=He-Fe,at=J.side;"counterclockwise"===at?(Ce=at,at="top"):"clockwise"===at&&(Ce=at,at="bottom"),this.radialAxis=this.mockAxis(N,V,J,{_id:"x",side:at,_trueSide:Ce,domain:[rt/j.w,qe/j.w]}),this.angularAxis=this.mockAxis(N,V,K,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(N,V),this.updateAngularAxis(N,V),this.updateRadialAxis(N,V),this.updateRadialAxisTitle(N,V),this.xaxis=this.mockCartesianAxis(N,V,{_id:"x",domain:be}),this.yaxis=this.mockCartesianAxis(N,V,{_id:"y",domain:Te});var pt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",pt).attr("transform",i(Xe,Je)),Q.frontplot.attr("transform",i(Pe,Fe)).call(o.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),Q.bg.attr("d",pt).attr("transform",i(ze,He)).call(r.fill,V.bgcolor)},Y.mockAxis=function(N,V,Q,j){var J=t.extendFlat({},Q,j);return a(J,V,N),J},Y.mockCartesianAxis=function(N,V,Q){var j=this,J=j.isSmith,K=Q._id,re=t.extendFlat({type:"linear"},Q);s(re,N);var ie={x:[0,2],y:[1,3]};return re.setRange=function(){var ce=j.sectorBBox,se=ie[K],de=j.radialAxis._rl,ue=(de[1]-de[0])/(1-j.getHole(V));re.range=[ce[se[0]]*ue,ce[se[1]]*ue]},re.isPtWithinRange="x"!==K||J?function(){return!0}:function(ce){return j.isPtInside(ce)},re.setRange(),re.setScale(),re},Y.doAutoRange=function(N,V){var Q=this.gd,j=this.radialAxis,J=this.getRadial(V);c(Q,j);var K=j.range;J.range=K.slice(),J._input.range=K.slice(),j._rl=[j.r2l(K[0],null,"gregorian"),j.r2l(K[1],null,"gregorian")]},Y.updateRadialAxis=function(N,V){var Q=this,j=Q.gd,J=Q.layers,K=Q.radius,re=Q.innerRadius,ie=Q.cx,ce=Q.cy,se=Q.getRadial(V),de=H(Q.getSector(V)[0],360),ue=Q.radialAxis,ge=re<K,be=Q.isSmith;be||(Q.fillViewInitialKey("radialaxis.angle",se.angle),Q.fillViewInitialKey("radialaxis.range",ue.range.slice()),ue.setGeometry()),"auto"===ue.tickangle&&de>90&&de<=270&&(ue.tickangle=180);var Te=be?function(qe){var rt=R(Q,D([qe.x,0]));return i(rt[0]-ie,rt[1]-ce)}:function(qe){return i(ue.l2p(qe.x)+re,0)},we=be?function(qe){return C(Q,qe.x,-1/0,1/0)}:function(qe){return Q.pathArc(ue.r2p(qe.x)+re)},Le=W(se);if(Q.radialTickLayout!==Le&&(J["radial-axis"].selectAll(".xtick").remove(),Q.radialTickLayout=Le),ge){ue.setScale();var fe=0,ve=be?(ue.tickvals||[]).filter(function(qe){return qe>=0}).map(function(qe){return p.tickText(ue,qe,!0,!1)}):p.calcTicks(ue),Me=be?ve:p.clipEnds(ue,ve),ke=p.getTickSigns(ue)[2];be&&(("top"===ue.ticks&&"bottom"===ue.side||"bottom"===ue.ticks&&"top"===ue.side)&&(ke=-ke),"top"===ue.ticks&&"top"===ue.side&&(fe=-ue.ticklen),"bottom"===ue.ticks&&"bottom"===ue.side&&(fe=ue.ticklen)),p.drawTicks(j,ue,{vals:ve,layer:J["radial-axis"],path:p.makeTickPath(ue,0,ke),transFn:Te,crisp:!1}),p.drawGrid(j,ue,{vals:Me,layer:J["radial-grid"],path:we,transFn:t.noop,crisp:!1}),p.drawLabels(j,ue,{vals:ve,layer:J["radial-axis"],transFn:Te,labelFns:p.makeLabelFns(ue,fe)})}var Ce=Q.radialAxisAngle=Q.vangles?X(te(U(se.angle),Q.vangles)):se.angle,Pe=i(ie,ce),Fe=Pe+e(-Ce);z(J["radial-axis"],ge&&(se.showticklabels||se.ticks),{transform:Fe}),z(J["radial-grid"],ge&&se.showgrid,{transform:be?"":Pe}),z(J["radial-line"].select("line"),ge&&se.showline,{x1:be?-K:re,y1:0,x2:K,y2:0,transform:Fe}).attr("stroke-width",se.linewidth).call(r.stroke,se.linecolor)},Y.updateRadialAxisTitle=function(N,V,Q){if(!this.isSmith){var j=this.gd,J=this.radius,K=this.cx,re=this.cy,ie=this.getRadial(V),ce=this.id+"title",se=0;if(ie.title){var de=o.bBox(this.layers["radial-axis"].node()).height,ue=ie.title.font.size,ge=ie.side;se="top"===ge?ue:"counterclockwise"===ge?-(de+.4*ue):de+.8*ue}var be=void 0!==Q?Q:this.radialAxisAngle,Te=U(be),we=Math.cos(Te),Le=Math.sin(Te),fe=K+J/2*we+se*Le,ve=re-J/2*Le+se*we;this.layers["radial-axis-title"]=f.draw(j,ce,{propContainer:ie,propName:this.id+".radialaxis.title",placeholder:F(j,"Click to enter radial axis title"),attributes:{x:fe,y:ve,"text-anchor":"middle"},transform:{rotate:-be}})}},Y.updateAngularAxis=function(N,V){var Q=this,j=Q.gd,J=Q.layers,K=Q.radius,re=Q.innerRadius,ie=Q.cx,ce=Q.cy,se=Q.getAngular(V),de=Q.angularAxis,ue=Q.isSmith;ue||(Q.fillViewInitialKey("angularaxis.rotation",se.rotation),de.setGeometry(),de.setScale());var ge=ue?function(qe){var rt=R(Q,D([0,qe.x]));return Math.atan2(rt[0]-ie,rt[1]-ce)-Math.PI/2}:function(qe){return de.t2g(qe.x)};"linear"===de.type&&"radians"===de.thetaunit&&(de.tick0=X(de.tick0),de.dtick=X(de.dtick));var be=function(qe){return i(ie+K*Math.cos(qe),ce-K*Math.sin(qe))},Te=ue?function(qe){var rt=R(Q,D([0,qe.x]));return i(rt[0],rt[1])}:function(qe){return be(ge(qe))},we=ue?function(qe){var rt=R(Q,D([0,qe.x])),ze=Math.atan2(rt[0]-ie,rt[1]-ce)-Math.PI/2;return i(rt[0],rt[1])+e(-X(ze))}:function(qe){var rt=ge(qe);return be(rt)+e(-X(rt))},Le=ue?function(qe){return S(Q,qe.x,0,1/0)}:function(qe){var rt=ge(qe),ze=Math.cos(rt),He=Math.sin(rt);return"M"+[ie+re*ze,ce-re*He]+"L"+[ie+K*ze,ce-K*He]},fe=p.makeLabelFns(de,0).labelStandoff,ve={xFn:function(qe){var rt=ge(qe);return Math.cos(rt)*fe},yFn:function(qe){var rt=ge(qe),ze=Math.sin(rt)>0?.2:1;return-Math.sin(rt)*(fe+qe.fontSize*ze)+Math.abs(Math.cos(rt))*(qe.fontSize*T)},anchorFn:function(qe){var rt=ge(qe),ze=Math.cos(rt);return Math.abs(ze)<.1?"middle":ze>0?"start":"end"},heightFn:function(qe,rt,ze){var He=ge(qe);return-.5*(1+Math.sin(He))*ze}},Me=W(se);Q.angularTickLayout!==Me&&(J["angular-axis"].selectAll("."+de._id+"tick").remove(),Q.angularTickLayout=Me);var ke,Ce=ue?[1/0].concat(de.tickvals||[]).map(function(qe){return p.tickText(de,qe,!0,!1)}):p.calcTicks(de);if(ue&&(Ce[0].text="\u221e",Ce[0].fontSize*=1.75),"linear"===V.gridshape?(ke=Ce.map(ge),t.angleDelta(ke[0],ke[1])<0&&(ke=ke.slice().reverse())):ke=null,Q.vangles=ke,"category"===de.type&&(Ce=Ce.filter(function(qe){return t.isAngleInsideSector(ge(qe),Q.sectorInRad)})),de.visible){var Pe="inside"===de.ticks?-1:1;p.drawTicks(j,de,{vals:Ce,layer:J["angular-axis"],path:"M"+Pe*((de.linewidth||1)/2)+",0h"+Pe*de.ticklen,transFn:we,crisp:!1}),p.drawGrid(j,de,{vals:Ce,layer:J["angular-grid"],path:Le,transFn:t.noop,crisp:!1}),p.drawLabels(j,de,{vals:Ce,layer:J["angular-axis"],repositionOnUpdate:!0,transFn:Te,labelFns:ve})}z(J["angular-line"].select("path"),se.showline,{d:Q.pathSubplot(),transform:i(ie,ce)}).attr("stroke-width",se.linewidth).call(r.stroke,se.linecolor)},Y.updateFx=function(N,V){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(N),this.updateRadialDrag(N,V,0),this.updateRadialDrag(N,V,1)),this.updateHoverAndMainDrag(N))},Y.updateHoverAndMainDrag=function(N){var V,Q,j=this,J=j.isSmith,K=j.gd,ie=N._zoomlayer,ce=L.MINZOOM,se=L.OFFEDGE,de=j.radius,ue=j.innerRadius,ge=j.cx,be=j.cy,Te=j.cxx,we=j.cyy,Le=j.sectorInRad,fe=j.vangles,ve=j.radialAxis,Me=A.clampTiny,ke=A.findXYatLength,Ce=A.findEnclosingVertexAngles,Pe=L.cornerHalfWidth,Fe=L.cornerLen/2,qe=u.makeDragger(j.layers,"path","maindrag","crosshair");d.select(qe).attr("d",j.pathSubplot()).attr("transform",i(ge,be)),qe.onmousemove=function(ct){v.hover(K,ct,j.id),K._fullLayout._lasthover=qe,K._fullLayout._hoversubplot=j.id},qe.onmouseout=function(ct){K._dragging||h.unhover(K,ct)};var rt,ze,He,Xe,Je,at,pt,xt,Ft,Dt={element:qe,gd:K,subplot:j.id,plotinfo:{id:j.id,xaxis:j.xaxis,yaxis:j.yaxis},xaxes:[j.xaxis],yaxes:[j.yaxis]};function ot(ct,vt){return Math.sqrt(ct*ct+vt*vt)}function it(ct,vt){return ot(ct-Te,vt-we)}function Et(ct,vt){return Math.atan2(we-vt,ct-Te)}function Xt(ct,vt){return[ct*Math.cos(vt),ct*Math.sin(-vt)]}function nr(ct,vt){if(0===ct)return j.pathSector(2*Pe);var ft=Fe/ct,It=vt-ft,ut=vt+ft,Ot=Math.max(0,Math.min(ct,de)),Rt=Ot-Pe,$e=Ot+Pe;return"M"+Xt(Rt,It)+"A"+[Rt,Rt]+" 0,0,0 "+Xt(Rt,ut)+"L"+Xt($e,ut)+"A"+[$e,$e]+" 0,0,1 "+Xt($e,It)+"Z"}function Ue(ct,vt,ft){if(0===ct)return j.pathSector(2*Pe);var It,ut,Ot=Xt(ct,vt),Rt=Xt(ct,ft),$e=Me((Ot[0]+Rt[0])/2),yt=Me((Ot[1]+Rt[1])/2);if($e&&yt){var Bt=yt/$e,Ut=-1/Bt,Qt=ke(Pe,Bt,$e,yt);It=ke(Fe,Ut,Qt[0][0],Qt[0][1]),ut=ke(Fe,Ut,Qt[1][0],Qt[1][1])}else{var Re,ht;yt?(Re=Fe,ht=Pe):(Re=Pe,ht=Fe),It=[[$e-Re,yt-ht],[$e+Re,yt-ht]],ut=[[$e-Re,yt+ht],[$e+Re,yt+ht]]}return"M"+It.join("L")+"L"+ut.reverse().join("L")+"Z"}function We(ct,vt){return vt=Math.max(Math.min(vt,de),ue),ct<se?ct=0:de-ct<se?ct=de:vt<se?vt=0:de-vt<se&&(vt=de),Math.abs(vt-ct)>ce?(ct<vt?(He=ct,Xe=vt):(He=vt,Xe=ct),!0):(He=null,Xe=null,!1)}function Be(ct,vt){vt=vt||"M0,0Z",xt.attr("d",ct=ct||Je),Ft.attr("d",vt),u.transitionZoombox(xt,Ft,at,pt),at=!0;var ft={};Ie(ft),K.emit("plotly_relayouting",ft)}function Qe(ct,vt){var ft,It,ut=rt+(ct*=V),Ot=ze+(vt*=Q),Rt=it(rt,ze),$e=Math.min(it(ut,Ot),de),yt=Et(rt,ze);We(Rt,$e)&&(ft=Je+j.pathSector(Xe),He&&(ft+=j.pathSector(He)),It=nr(He,yt)+nr(Xe,yt)),Be(ft,It)}function Ae(ct,vt,ft,It){var ut=A.findIntersectionXY(ft,It,ft,[ct-Te,we-vt]);return ot(ut[0],ut[1])}function De(ct,vt){var ft,It,ut=rt+ct,Ot=ze+vt,Rt=Et(rt,ze),$e=Et(ut,Ot),yt=Ce(Rt,fe),Bt=Ce($e,fe);We(Ae(rt,ze,yt[0],yt[1]),Math.min(Ae(ut,Ot,Bt[0],Bt[1]),de))&&(ft=Je+j.pathSector(Xe),He&&(ft+=j.pathSector(He)),It=[Ue(He,yt[0],yt[1]),Ue(Xe,yt[0],yt[1])].join(" ")),Be(ft,It)}function Oe(){if(u.removeZoombox(K),null!==He&&null!==Xe){var ct={};Ie(ct),u.showDoubleClickNotifier(K),_.call("_guiRelayout",K,ct)}}function Ie(ct){var vt=ve._rl,ft=(vt[1]-vt[0])/(1-ue/de)/de;ct[j.id+".radialaxis.range"]=[vt[0]+(He-ue)*ft,vt[0]+(Xe-ue)*ft]}function et(ct,vt){var ft=K._fullLayout.clickmode;if(u.removeZoombox(K),2===ct){var It={};for(var ut in j.viewInitial)It[j.id+"."+ut]=j.viewInitial[ut];K.emit("plotly_doubleclick",null),_.call("_guiRelayout",K,It)}ft.indexOf("select")>-1&&1===ct&&x(vt,K,[j.xaxis],[j.yaxis],j.id,Dt),ft.indexOf("event")>-1&&v.click(K,vt,j.id)}Dt.prepFn=function(ct,vt,ft){var It=K._fullLayout.dragmode,ut=qe.getBoundingClientRect();K._fullLayout._calcInverseTransform(K),V=K._fullLayout._invScaleX,Q=K._fullLayout._invScaleY;var Rt=t.apply3DTransform(K._fullLayout._invTransform)(vt-ut.left,ft-ut.top);if(rt=Rt[0],ze=Rt[1],fe){var $e=A.findPolygonOffset(de,Le[0],Le[1],fe);rt+=Te+$e[0],ze+=we+$e[1]}switch(It){case"zoom":Dt.clickFn=et,J||(Dt.moveFn=fe?De:Qe,Dt.doneFn=Oe,He=null,Xe=null,Je=j.pathSubplot(),at=!1,pt=g(K._fullLayout[j.id].bgcolor).getLuminance(),(xt=u.makeZoombox(ie,pt,ge,be,Je)).attr("fill-rule","evenodd"),Ft=u.makeCorners(ie,ge,be),m(K));break;case"select":case"lasso":l(ct,vt,ft,Dt,It)}},h.init(Dt)},Y.updateRadialDrag=function(N,V,Q){var j=this,J=j.gd,K=j.layers,re=j.radius,ie=j.innerRadius,ce=j.cx,se=j.cy,de=j.radialAxis,ue=L.radialDragBoxSize,ge=ue/2;if(de.visible){var be,Te,we,Le=U(j.radialAxisAngle),fe=de._rl,ve=fe[0],Me=fe[1],ke=fe[Q],Ce=.75*(fe[1]-fe[0])/(1-j.getHole(V))/re;Q?(be=ce+(re+ge)*Math.cos(Le),Te=se-(re+ge)*Math.sin(Le),we="radialdrag"):(be=ce+(ie-ge)*Math.cos(Le),Te=se-(ie-ge)*Math.sin(Le),we="radialdrag-inner");var Pe,Fe,qe,rt=u.makeRectDragger(K,we,"crosshair",-ge,-ge,ue,ue),ze={element:rt,gd:J};z(d.select(rt),de.visible&&ie<re,{transform:i(be,Te)}),ze.prepFn=function(){Pe=null,Fe=null,qe=null,ze.moveFn=He,ze.doneFn=Xe,m(J)},ze.clampFn=function(pt,xt){return Math.sqrt(pt*pt+xt*xt)<L.MINDRAG&&(pt=0,xt=0),[pt,xt]},h.init(ze)}function He(pt,xt){if(Pe)Pe(pt,xt);else{var Ft=[pt,-xt],Dt=[Math.cos(Le),Math.sin(Le)],ot=Math.abs(t.dot(Ft,Dt)/Math.sqrt(t.dot(Ft,Ft)));isNaN(ot)||(Pe=ot<.5?Je:at)}var Et,it={};Et=it,null!==Fe?Et[j.id+".radialaxis.angle"]=Fe:null!==qe&&(Et[j.id+".radialaxis.range["+Q+"]"]=qe),J.emit("plotly_relayouting",it)}function Xe(){null!==Fe?_.call("_guiRelayout",J,j.id+".radialaxis.angle",Fe):null!==qe&&_.call("_guiRelayout",J,j.id+".radialaxis.range["+Q+"]",qe)}function Je(pt,xt){if(0!==Q){Fe=Math.atan2(se-(Te+xt),be+pt-ce),j.vangles&&(Fe=te(Fe,j.vangles)),Fe=X(Fe);var ot=i(ce,se)+e(-Fe);K["radial-axis"].attr("transform",ot),K["radial-line"].select("line").attr("transform",ot);var it=j.gd._fullLayout;j.updateRadialAxisTitle(it,it[j.id],Fe)}}function at(pt,xt){var Ft=t.dot([pt,-xt],[Math.cos(Le),Math.sin(Le)]);if(qe=ke-Ce*Ft,Ce>0==(Q?qe>ve:qe<Me)){var Dt=J._fullLayout,ot=Dt[j.id];de.range[Q]=qe,de._rl[Q]=qe,j.updateRadialAxis(Dt,ot),j.xaxis.setRange(),j.xaxis.setScale(),j.yaxis.setRange(),j.yaxis.setScale();var it=!1;for(var Et in j.traceHash){var Xt=j.traceHash[Et],nr=t.filterVisible(Xt);Xt[0][0].trace._module.plot(J,j,nr,ot),_.traceIs(Et,"gl")&&nr.length&&(it=!0)}it&&(b(J),k(J))}else qe=null}},Y.updateAngularDrag=function(N){var V=this,Q=V.gd,j=V.layers,J=V.radius,K=V.angularAxis,re=V.cx,ie=V.cy,ce=V.cxx,se=V.cyy,de=L.angularDragBoxSize,ue=u.makeDragger(j,"path","angulardrag","move"),ge={element:ue,gd:Q};function be(ze,He){return Math.atan2(se+de-He,ze-ce-de)}d.select(ue).attr("d",V.pathAnnulus(J,J+de)).attr("transform",i(re,ie)).call(w,"move");var Te,we,Le,fe,ve,Me,ke=j.frontplot.select(".scatterlayer").selectAll(".trace"),Ce=ke.selectAll(".point"),Pe=ke.selectAll(".textpoint");function Fe(ze,He){var Xe=V.gd._fullLayout,Je=Xe[V.id],at=be(Te+ze*N._invScaleX,we+He*N._invScaleY),pt=X(at-Me);if(fe=Le+pt,j.frontplot.attr("transform",i(V.xOffset2,V.yOffset2)+e([-pt,ce,se])),V.vangles){ve=V.radialAxisAngle+pt;var xt=i(re,ie)+e(-pt),Ft=i(re,ie)+e(-ve);j.bg.attr("transform",xt),j["radial-grid"].attr("transform",xt),j["radial-axis"].attr("transform",Ft),j["radial-line"].select("line").attr("transform",Ft),V.updateRadialAxisTitle(Xe,Je,ve)}else V.clipPaths.forTraces.select("path").attr("transform",i(ce,se)+e(pt));Ce.each(function(){var nr=d.select(this),Ue=o.getTranslate(nr);nr.attr("transform",i(Ue.x,Ue.y)+e([pt]))}),Pe.each(function(){var nr=d.select(this),Ue=nr.select("text"),We=o.getTranslate(nr);nr.attr("transform",e([pt,Ue.attr("x"),Ue.attr("y")])+i(We.x,We.y))}),K.rotation=t.modHalf(fe,360),V.updateAngularAxis(Xe,Je),V._hasClipOnAxisFalse&&!t.isFullCircle(V.sectorInRad)&&ke.call(o.hideOutsideRangePoints,V);var Dt=!1;for(var ot in V.traceHash)if(_.traceIs(ot,"gl")){var it=V.traceHash[ot],Et=t.filterVisible(it);it[0][0].trace._module.plot(Q,V,Et,Je),Et.length&&(Dt=!0)}Dt&&(b(Q),k(Q));var Xt={};qe(Xt),Q.emit("plotly_relayouting",Xt)}function qe(ze){ze[V.id+".angularaxis.rotation"]=fe,V.vangles&&(ze[V.id+".radialaxis.angle"]=ve)}function rt(){Pe.select("text").attr("transform",null);var ze={};qe(ze),_.call("_guiRelayout",Q,ze)}ge.prepFn=function(ze,He,Xe){Le=N[V.id].angularaxis.rotation;var at=ue.getBoundingClientRect();Te=He-at.left,we=Xe-at.top,Q._fullLayout._calcInverseTransform(Q);var pt=t.apply3DTransform(N._invTransform)(Te,we);Me=be(Te=pt[0],we=pt[1]),ge.moveFn=Fe,ge.doneFn=rt,m(Q)},V.vangles&&!t.isFullCircle(V.sectorInRad)&&(ge.prepFn=t.noop,w(d.select(ue),null)),h.init(ge)},Y.isPtInside=function(N){if(this.isSmith)return!0;var V=this.sectorInRad,Q=this.vangles,j=this.angularAxis.c2g(N.theta),J=this.radialAxis,K=J.c2l(N.r);return(Q?A.isPtInsidePolygon:t.isPtInsideSector)(K,j,J._rl,V,Q)},Y.pathArc=function(N){var V=this.sectorInRad,Q=this.vangles;return(Q?A.pathPolygon:t.pathArc)(N,V[0],V[1],Q)},Y.pathSector=function(N){var V=this.sectorInRad,Q=this.vangles;return(Q?A.pathPolygon:t.pathSector)(N,V[0],V[1],Q)},Y.pathAnnulus=function(N,V){var Q=this.sectorInRad,j=this.vangles;return(j?A.pathPolygonAnnulus:t.pathAnnulus)(N,V,Q[0],Q[1],j)},Y.pathSubplot=function(){var N=this.innerRadius,V=this.radius;return N?this.pathAnnulus(N,V):this.pathSector(V)},Y.fillViewInitialKey=function(N,V){N in this.viewInitial||(this.viewInitial[N]=V)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../cartesian/set_convert"),_=d.deg2rad,t=d.rad2deg;$.exports=function(e,i,r){switch(g(e,r),e._id){case"x":case"radialaxis":p=i._subplot,(o=e).setGeometry=function(){var s=o._rl[0],a=o._rl[1],c=p.innerRadius,u=(p.radius-c)/(a-s),h=c/u,v=s>a?function(f){return f<=0}:function(f){return f>=0};o.c2g=function(f){var l=o.c2l(f)-s;return(v(l)?l:0)+h},o.g2c=function(f){return o.l2c(f+s-h)},o.g2p=function(f){return f*u},o.c2p=function(f){return o.g2p(o.c2g(f))}};break;case"angularaxis":!function(o,n){var p=o.type;if("linear"===p){var s=o.d2c,a=o.c2d;o.d2c=function(c,u){return h=s(c),"degrees"===u?_(h):h;var h},o.c2d=function(c,u){return a((h=c,"degrees"===u?t(h):h));var h}}o.makeCalcdata=function(c,u){var h,v,f=c[u],l=c._length,x=function(T){return o.d2c(T,c.thetaunit)};if(f){if(d.isTypedArray(f)&&"linear"===p){if(l===f.length)return f;if(f.subarray)return f.subarray(0,l)}for(h=new Array(l),v=0;v<l;v++)h[v]=x(f[v])}else{var m=u+"0",w="d"+u,b=m in c?x(c[m]):0,k=c[w]?x(c[w]):(o.period||2*Math.PI)/l;for(h=new Array(l),v=0;v<l;v++)h[v]=b+v*k}return h},o.setGeometry=function(){var c,u,h,v,f=n.sector,l=f.map(_),x={clockwise:-1,counterclockwise:1}[o.direction],m=_(o.rotation),w=function(L){return x*L+m},b=function(L){return(L-m)/x};switch(p){case"linear":u=c=d.identity,v=_,h=t,o.range=d.isFullCircle(l)?[f[0],f[0]+360]:l.map(b).map(t);break;case"category":var k=o._categories.length,T=o.period?Math.max(o.period,k):k;0===T&&(T=1),u=v=function(L){return 2*L*Math.PI/T},c=h=function(L){return L*T/Math.PI/2},o.range=[0,T]}o.c2g=function(L){return w(u(L))},o.g2c=function(L){return c(b(L))},o.t2g=function(L){return w(v(L))},o.g2t=function(L){return h(b(L))}}}(e,i)}var o,p}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(y,$,ee){"use strict";$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(y,$,ee){"use strict";function d(e){return e<0?-1:e>0?1:0}function g(e){var i=e[0],r=e[1];if(!isFinite(i)||!isFinite(r))return[1,0];var o=(i+1)*(i+1)+r*r;return[(i*i+r*r-1)/o,2*r/o]}function _(e,i){return[i[0]*e.radius+e.cx,-i[1]*e.radius+e.cy]}function t(e,i){return i*e.radius}$.exports={smith:g,reactanceArc:function(e,i,r,o){var n=_(e,g([r,i])),p=n[0],s=n[1],a=_(e,g([o,i])),c=a[0],u=a[1];if(0===i)return["M"+p+","+s,"L"+c+","+u].join(" ");var h=t(e,1/Math.abs(i));return["M"+p+","+s,"A"+h+","+h+" 0 0,"+(i<0?1:0)+" "+c+","+u].join(" ")},resistanceArc:function(e,i,r,o){var n=t(e,1/(i+1)),p=_(e,g([i,r])),s=p[0],a=p[1],c=_(e,g([i,o])),u=c[0],h=c[1];if(d(r)!==d(o)){var v=_(e,g([i,0]));return["M"+s+","+a,"A"+n+","+n+" 0 0,"+(0<r?0:1)+" "+v[0]+","+v[1],"A"+n+","+n+" 0 0,"+(o<0?0:1)+u+","+h].join(" ")}return["M"+s+","+a,"A"+n+","+n+" 0 0,"+(o<r?0:1)+" "+u+","+h].join(" ")},smithTransform:_}},{}],629:[function(y,$,ee){"use strict";var d=y("../get_data").getSubplotCalcData,g=y("../../lib").counterRegex,_=y("../polar/polar"),t=y("./constants"),e=t.attr,i=t.name,r=g(i),o={};o[e]={valType:"subplotid",dflt:i,editType:"calc"},$.exports={attr:e,name:i,idRoot:i,idRegex:r,attrRegex:r,attributes:o,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(n){for(var p=n._fullLayout,s=n.calcdata,a=p._subplots[i],c=0;c<a.length;c++){var u=a[c],h=d(s,i,u),v=p[u]._subplot;v||(v=_(n,u,!0),p[u]._subplot=v),v.plot(h,p,n._promises)}},clean:function(n,p,s,a){for(var c=a._subplots[i]||[],u=0;u<c.length;u++){var h=c[u],v=a[h]._subplot;if(!p[h]&&v)for(var f in v.framework.remove(),v.clipPaths)v.clipPaths[f].remove()}},toSVG:y("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(y,$,ee){"use strict";var d=y("../../components/color/attributes"),g=y("../cartesian/layout_attributes"),_=y("../domain").attributes,t=y("../../lib").extendFlat,e=y("../../plot_api/edit_types").overrideAll,i=e({color:g.color,showline:t({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:t({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth},"plot","from-root"),r=e({ticklen:g.ticklen,tickwidth:t({},g.tickwidth,{dflt:2}),tickcolor:g.tickcolor,showticklabels:g.showticklabels,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,tickfont:g.tickfont,tickformat:g.tickformat,hoverformat:g.hoverformat,layer:g.layer},"plot","from-root"),o=t({visible:t({},g.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:t({},g.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},i,r),n=t({visible:t({},g.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:g.ticks,editType:"calc"},i,r);$.exports={domain:_({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:d.background},realaxis:o,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(y,$,ee){"use strict";var d,g,_,t=y("../../lib"),e=y("../../components/color"),i=y("../../plot_api/plot_template"),r=y("../subplot_defaults"),o=y("../get_data").getSubplotData,n=y("../cartesian/prefix_suffix_defaults"),p=y("../cartesian/tick_label_defaults"),s=y("../cartesian/line_grid_defaults"),a=y("../cartesian/set_convert"),c=y("./layout_attributes"),u=y("./constants"),h=u.axisNames,v=(d=function(l){return l.slice().reverse().map(function(x){return-x}).concat([0]).concat(l)},g=String,_={},function(l){var x=g?g(l):l;if(x in _)return _[x];var m=d(l);return _[x]=m,m});function f(l,x,m,w){var b=m("bgcolor");w.bgColor=e.combine(b,w.paper_bgcolor);var k,T=o(w.fullData,u.name,w.id),L=w.layoutOut;function A(Y,W){return m(k+"."+Y,W)}for(var I=0;I<h.length;I++){t.isPlainObject(l[k=h[I]])||(l[k]={});var D=l[k],S=i.newContainer(x,k);S._id=S._name=k,S._attr=w.id+"."+k,S._traceIndices=T.map(function(Y){return Y._expandedIndex});var C=A("visible");if(S.type="linear",a(S,L),n(D,S,A,S.type),C){var R,F,H,U,X="realaxis"===k;X&&A("side"),X?A("tickvals"):A("tickvals",v(x.realaxis.tickvals||c.realaxis.tickvals.dflt));var Z=w.font||{};C&&(F=(R=A("color"))===D.color?R:Z.color,H=Z.size,U=Z.family),p(D,S,A,S.type,{noAng:!X,noExp:!0,font:{color:F,size:H,family:U}}),t.coerce2(l,x,c,k+".ticklen"),t.coerce2(l,x,c,k+".tickwidth"),t.coerce2(l,x,c,k+".tickcolor",x.color),A("ticks")||(delete x[k].ticklen,delete x[k].tickwidth,delete x[k].tickcolor),s(D,S,A,{dfltColor:R,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[k]}),A("layer")}A("hoverformat"),delete S.type,S._input=D}}$.exports=function(l,x,m){r(l,x,m,{noUirevision:!0,type:u.name,attributes:c,handleDefaults:f,font:x.font,paper_bgcolor:x.paper_bgcolor,fullData:m,layoutOut:x})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plot_api/plot_template"),_=y("./domain").defaults;$.exports=function(t,e,i,r){var o,n,s=r.attributes,a=r.handleDefaults,c=r.partition||"x",u=e._subplots[r.type],h=u.length,v=h&&u[0].replace(/\d+$/,"");function f(w,b){return d.coerce(o,n,s,w,b)}for(var l=0;l<h;l++){var x=u[l];o=t[x]?t[x]:t[x]={},n=g.newContainer(e,x,v),r.noUirevision||f("uirevision",e.uirevision);var m={};m[c]=[l/h,(l+1)/h],_(n,e,f,m),r.id=x,a(o,n,f,r)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(y,$,ee){"use strict";function g(_){var t=_.description?" "+_.description:"",e=_.keys||[];if(e.length>0){for(var i=[],r=0;r<e.length;r++)i[r]="`"+e[r]+"`";t+="Finally, the template string has access to ",t=1===e.length?"variable "+i[0]:"variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return t}y("../constants/docs"),ee.hovertemplateAttrs=function(_,t){_=_||{},g(t=t||{});var e={valType:"string",dflt:"",editType:_.editType||"none"};return!1!==_.arrayOk&&(e.arrayOk=!0),e},ee.texttemplateAttrs=function(_,t){_=_||{},g(t=t||{});var e={valType:"string",dflt:"",editType:_.editType||"calc"};return!1!==_.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(y,$,ee){"use strict";var d=y("./ternary"),g=y("../../plots/get_data").getSubplotCalcData,_=y("../../lib").counterRegex;ee.name="ternary";var t=ee.attr="subplot";ee.idRoot="ternary",ee.idRegex=ee.attrRegex=_("ternary"),(ee.attributes={})[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},ee.layoutAttributes=y("./layout_attributes"),ee.supplyLayoutDefaults=y("./layout_defaults"),ee.plot=function(e){for(var i=e._fullLayout,r=e.calcdata,o=i._subplots.ternary,n=0;n<o.length;n++){var p=o[n],s=g(r,"ternary",p),a=i[p]._subplot;a||(a=new d({id:p,graphDiv:e,container:i._ternarylayer.node()},i),i[p]._subplot=a),a.plot(s,i,e._promises)}},ee.clean=function(e,i,r,o){for(var n=o._subplots.ternary||[],p=0;p<n.length;p++){var s=n[p],a=o[s]._subplot;!i[s]&&a&&(a.plotContainer.remove(),a.clipDef.remove(),a.clipDefRelative.remove(),a.layers["a-title"].remove(),a.layers["b-title"].remove(),a.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(y,$,ee){"use strict";var d=y("../../components/color/attributes"),g=y("../domain").attributes,_=y("../cartesian/layout_attributes"),t=y("../../plot_api/edit_types").overrideAll,e=y("../../lib/extend").extendFlat,i={title:{text:_.title.text,font:_.title.font},color:_.color,tickmode:_.tickmode,nticks:e({},_.nticks,{dflt:6,min:1}),tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:_.ticks,ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,showticklabels:_.showticklabels,showtickprefix:_.showtickprefix,tickprefix:_.tickprefix,showticksuffix:_.showticksuffix,ticksuffix:_.ticksuffix,showexponent:_.showexponent,exponentformat:_.exponentformat,minexponent:_.minexponent,separatethousands:_.separatethousands,tickfont:_.tickfont,tickangle:_.tickangle,tickformat:_.tickformat,tickformatstops:_.tickformatstops,hoverformat:_.hoverformat,showline:e({},_.showline,{dflt:!0}),linecolor:_.linecolor,linewidth:_.linewidth,showgrid:e({},_.showgrid,{dflt:!0}),gridcolor:_.gridcolor,gridwidth:_.gridwidth,layer:_.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:_._deprecated.title,titlefont:_._deprecated.titlefont}},r=$.exports=t({domain:g({name:"ternary"}),bgcolor:{valType:"color",dflt:d.background},sum:{valType:"number",dflt:1,min:0},aaxis:i,baxis:i,caxis:i},"plot","from-root");r.uirevision={valType:"any",editType:"none"},r.aaxis.uirevision=r.baxis.uirevision=r.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("../../plot_api/plot_template"),_=y("../../lib"),t=y("../subplot_defaults"),e=y("../cartesian/tick_label_defaults"),i=y("../cartesian/prefix_suffix_defaults"),r=y("../cartesian/tick_mark_defaults"),o=y("../cartesian/tick_value_defaults"),n=y("../cartesian/line_grid_defaults"),p=y("./layout_attributes"),s=["aaxis","baxis","caxis"];function a(u,h,v,f){var l,x,m,w=v("bgcolor"),b=v("sum");f.bgColor=d.combine(w,f.paper_bgcolor);for(var k=0;k<s.length;k++)x=u[l=s[k]]||{},(m=g.newContainer(h,l))._name=l,c(x,m,f,h);var T=h.aaxis,L=h.baxis,A=h.caxis;T.min+L.min+A.min>=b&&(T.min=0,L.min=0,A.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function c(u,h,v,f){var l=p[h._name];function x(L,A){return _.coerce(u,h,l,L,A)}x("uirevision",f.uirevision),h.type="linear";var m=x("color"),w=m!==l.color.dflt?m:v.font.color,b=h._name.charAt(0).toUpperCase(),k="Component "+b,T=x("title.text",k);h._hovertitle=T===k?T:b,_.coerceFont(x,"title.font",{family:v.font.family,size:_.bigFont(v.font.size),color:w}),x("min"),o(u,h,x,"linear"),i(u,h,x,"linear"),e(u,h,x,"linear"),r(u,h,x,{outerTicks:!0}),x("showticklabels")&&(_.coerceFont(x,"tickfont",{family:v.font.family,size:v.font.size,color:w}),x("tickangle"),x("tickformat")),n(u,h,x,{dfltColor:m,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),x("hoverformat"),x("layer")}$.exports=function(u,h,v){t(u,h,v,{type:"ternary",attributes:p,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("tinycolor2"),_=y("../../registry"),t=y("../../lib"),e=t.strTranslate,i=t._,r=y("../../components/color"),o=y("../../components/drawing"),n=y("../cartesian/set_convert"),p=y("../../lib/extend").extendFlat,s=y("../plots"),a=y("../cartesian/axes"),c=y("../../components/dragelement"),u=y("../../components/fx"),h=y("../../components/dragelement/helpers"),v=h.freeMode,f=h.rectMode,l=y("../../components/titles"),x=y("../cartesian/select").prepSelect,m=y("../cartesian/select").selectOnClick,w=y("../cartesian/select").clearSelect,b=y("../cartesian/select").clearSelectionsCache,k=y("../cartesian/constants");function T(H,U){this.id=H.id,this.graphDiv=H.graphDiv,this.init(U),this.makeFramework(U),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=T;var L=T.prototype;L.init=function(H){this.container=H._ternarylayer,this.defs=H._defs,this.layoutId=H._uid,this.traceHash={},this.layers={}},L.plot=function(H,U){var X=U[this.id],Z=U._size;this._hasClipOnAxisFalse=!1;for(var Y=0;Y<H.length;Y++)if(!1===H[Y][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(X),this.adjustLayout(X,Z),s.generalUpdatePerTraceModule(this.graphDiv,this,H,X),this.layers.plotbg.select("path").call(r.fill,X.bgcolor)},L.makeFramework=function(H){var U=this.graphDiv,X=H[this.id],Z=this.clipId="clip"+this.layoutId+this.id,Y=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=t.ensureSingleById(H._clips,"clipPath",Z,function(W){W.append("path").attr("d","M0,0Z")}),this.clipDefRelative=t.ensureSingleById(H._clips,"clipPath",Y,function(W){W.append("path").attr("d","M0,0Z")}),this.plotContainer=t.ensureSingle(this.container,"g",this.id),this.updateLayers(X),o.setClipUrl(this.layers.backplot,Z,U),o.setClipUrl(this.layers.grids,Z,U)},L.updateLayers=function(H){var U=this.layers,X=["draglayer","plotbg","backplot","grids"];"below traces"===H.aaxis.layer&&X.push("aaxis","aline"),"below traces"===H.baxis.layer&&X.push("baxis","bline"),"below traces"===H.caxis.layer&&X.push("caxis","cline"),X.push("frontplot"),"above traces"===H.aaxis.layer&&X.push("aaxis","aline"),"above traces"===H.baxis.layer&&X.push("baxis","bline"),"above traces"===H.caxis.layer&&X.push("caxis","cline");var Z=this.plotContainer.selectAll("g.toplevel").data(X,String),Y=["agrid","bgrid","cgrid"];Z.enter().append("g").attr("class",function(W){return"toplevel "+W}).each(function(W){var te=d.select(this);U[W]=te,"frontplot"===W?te.append("g").classed("scatterlayer",!0):"backplot"===W?te.append("g").classed("maplayer",!0):"plotbg"===W?te.append("path").attr("d","M0,0Z"):"aline"===W||"bline"===W||"cline"===W?te.append("path"):"grids"===W&&Y.forEach(function(z){U[z]=te.append("g").classed("grid "+z,!0)})}),Z.order()};var A=Math.sqrt(4/3);L.adjustLayout=function(H,U){var X,Z,Y,W,te,z,N=this,V=H.domain,Q=(V.x[0]+V.x[1])/2,j=(V.y[0]+V.y[1])/2,J=V.x[1]-V.x[0],K=V.y[1]-V.y[0],re=J*U.w,ie=K*U.h,ce=H.sum,se=H.aaxis.min,de=H.baxis.min,ue=H.caxis.min;re>A*ie?Y=(W=ie)*A:W=(Y=re)/A,te=J*Y/re,z=K*W/ie,Z=U.t+U.h*(1-j)-W/2,N.x0=X=U.l+U.w*Q-Y/2,N.y0=Z,N.w=Y,N.h=W,N.sum=ce,N.xaxis={type:"linear",range:[se+2*ue-ce,ce-se-2*de],domain:[Q-te/2,Q+te/2],_id:"x"},n(N.xaxis,N.graphDiv._fullLayout),N.xaxis.setScale(),N.xaxis.isPtWithinRange=function(Pe){return Pe.a>=N.aaxis.range[0]&&Pe.a<=N.aaxis.range[1]&&Pe.b>=N.baxis.range[1]&&Pe.b<=N.baxis.range[0]&&Pe.c>=N.caxis.range[1]&&Pe.c<=N.caxis.range[0]},N.yaxis={type:"linear",range:[se,ce-de-ue],domain:[j-z/2,j+z/2],_id:"y"},n(N.yaxis,N.graphDiv._fullLayout),N.yaxis.setScale(),N.yaxis.isPtWithinRange=function(){return!0};var ge=N.yaxis.domain[0],be=N.aaxis=p({},H.aaxis,{range:[se,ce-de-ue],side:"left",tickangle:(+H.aaxis.tickangle||0)-30,domain:[ge,ge+z*A],anchor:"free",position:0,_id:"y",_length:Y});n(be,N.graphDiv._fullLayout),be.setScale();var Te=N.baxis=p({},H.baxis,{range:[ce-se-ue,de],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:Y});n(Te,N.graphDiv._fullLayout),Te.setScale();var we=N.caxis=p({},H.caxis,{range:[ce-se-de,ue],side:"right",tickangle:(+H.caxis.tickangle||0)+30,domain:[ge,ge+z*A],anchor:"free",position:0,_id:"y",_length:Y});n(we,N.graphDiv._fullLayout),we.setScale();var Le="M"+X+","+(Z+W)+"h"+Y+"l-"+Y/2+",-"+W+"Z";N.clipDef.select("path").attr("d",Le),N.layers.plotbg.select("path").attr("d",Le);var fe="M0,"+W+"h"+Y+"l-"+Y/2+",-"+W+"Z";N.clipDefRelative.select("path").attr("d",fe);var ve=e(X,Z);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ve),N.clipDefRelative.select("path").attr("transform",null);var Me=e(X-Te._offset,Z+W);N.layers.baxis.attr("transform",Me),N.layers.bgrid.attr("transform",Me);var ke=e(X+Y/2,Z)+"rotate(30)"+e(0,-be._offset);N.layers.aaxis.attr("transform",ke),N.layers.agrid.attr("transform",ke);var Ce=e(X+Y/2,Z)+"rotate(-30)"+e(0,-we._offset);N.layers.caxis.attr("transform",Ce),N.layers.cgrid.attr("transform",Ce),N.drawAxes(!0),N.layers.aline.select("path").attr("d",be.showline?"M"+X+","+(Z+W)+"l"+Y/2+",-"+W:"M0,0").call(r.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),N.layers.bline.select("path").attr("d",Te.showline?"M"+X+","+(Z+W)+"h"+Y:"M0,0").call(r.stroke,Te.linecolor||"#000").style("stroke-width",(Te.linewidth||0)+"px"),N.layers.cline.select("path").attr("d",we.showline?"M"+(X+Y/2)+","+Z+"l"+Y/2+","+W:"M0,0").call(r.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),N.graphDiv._context.staticPlot||N.initInteractions(),o.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)},L.drawAxes=function(H){var U=this.graphDiv,X=this.id.substr(7)+"title",Z=this.layers,Y=this.aaxis,W=this.baxis,te=this.caxis;if(this.drawAx(Y),this.drawAx(W),this.drawAx(te),H){var z=Math.max(Y.showticklabels?Y.tickfont.size/2:0,(te.showticklabels?.75*te.tickfont.size:0)+("outside"===te.ticks?.87*te.ticklen:0)),N=(W.showticklabels?W.tickfont.size:0)+("outside"===W.ticks?W.ticklen:0)+3;Z["a-title"]=l.draw(U,"a"+X,{propContainer:Y,propName:this.id+".aaxis.title",placeholder:i(U,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-Y.title.font.size/3-z,"text-anchor":"middle"}}),Z["b-title"]=l.draw(U,"b"+X,{propContainer:W,propName:this.id+".baxis.title",placeholder:i(U,"Click to enter Component B title"),attributes:{x:this.x0-N,y:this.y0+this.h+.83*W.title.font.size+N,"text-anchor":"middle"}}),Z["c-title"]=l.draw(U,"c"+X,{propContainer:te,propName:this.id+".caxis.title",placeholder:i(U,"Click to enter Component C title"),attributes:{x:this.x0+this.w+N,y:this.y0+this.h+.83*te.title.font.size+N,"text-anchor":"middle"}})}},L.drawAx=function(H){var U,X=this.graphDiv,Z=H._name,Y=Z.charAt(0),W=H._id,te=this.layers[Z],z=Y+"tickLayout",N=(U=H).ticks+String(U.ticklen)+String(U.showticklabels);this[z]!==N&&(te.selectAll("."+W+"tick").remove(),this[z]=N),H.setScale();var V=a.calcTicks(H),Q=a.clipEnds(H,V),j=a.makeTransTickFn(H),J=a.getTickSigns(H)[2],K=t.deg2rad(30),re=J*(H.linewidth||1)/2,ie=J*H.ticklen,ce=this.w,se=this.h,de="b"===Y?"M0,"+re+"l"+Math.sin(K)*ie+","+Math.cos(K)*ie:"M"+re+",0l"+Math.cos(K)*ie+","+-Math.sin(K)*ie,ue={a:"M0,0l"+se+",-"+ce/2,b:"M0,0l-"+ce/2+",-"+se,c:"M0,0l-"+se+","+ce/2}[Y];a.drawTicks(X,H,{vals:"inside"===H.ticks?Q:V,layer:te,path:de,transFn:j,crisp:!1}),a.drawGrid(X,H,{vals:Q,layer:this.layers[Y+"grid"],path:ue,transFn:j,crisp:!1}),a.drawLabels(X,H,{vals:V,layer:te,transFn:j,labelFns:a.makeLabelFns(H,0,30)})};var I=k.MINZOOM/2+.87,D="m-0.87,.5h"+I+"v3h-"+(I+5.2)+"l"+(I/2+2.6)+",-"+(.87*I+4.5)+"l2.6,1.5l-"+I/2+","+.87*I+"Z",S="m0.87,.5h-"+I+"v3h"+(I+5.2)+"l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-2.6,1.5l"+I/2+","+.87*I+"Z",C="m0,1l"+I/2+","+.87*I+"l2.6,-1.5l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-"+(I/2+2.6)+","+(.87*I+4.5)+"l2.6,1.5l"+I/2+",-"+.87*I+"Z",R=!0;function F(H){d.select(H).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}L.clearSelect=function(){b(this.dragOptions),w(this.dragOptions.gd)},L.initInteractions=function(){var H,U,X,Z,Y,W,te,z,N,V,Q,j,J=this,K=J.layers.plotbg.select("path").node(),re=J.graphDiv,ie=re._fullLayout._zoomlayer;function ce(fe){var ve={};return ve[J.id+".aaxis.min"]=fe.a,ve[J.id+".baxis.min"]=fe.b,ve[J.id+".caxis.min"]=fe.c,ve}function se(fe,ve){var Me=re._fullLayout.clickmode;F(re),2===fe&&(re.emit("plotly_doubleclick",null),_.call("_guiRelayout",re,ce({a:0,b:0,c:0}))),Me.indexOf("select")>-1&&1===fe&&m(ve,re,[J.xaxis],[J.yaxis],J.id,J.dragOptions),Me.indexOf("event")>-1&&u.click(re,ve,J.id)}function de(fe,ve){return 1-ve/J.h}function ue(fe,ve){return 1-(fe+(J.h-ve)/Math.sqrt(3))/J.w}function ge(fe,ve){return(fe-(J.h-ve)/Math.sqrt(3))/J.w}function be(fe,ve){var Me=X+fe*H,ke=Z+ve*U,Ce=Math.max(0,Math.min(1,de(0,Z),de(0,ke))),Pe=Math.max(0,Math.min(1,ue(X,Z),ue(Me,ke))),Fe=Math.max(0,Math.min(1,ge(X,Z),ge(Me,ke))),qe=(Ce/2+Fe)*J.w,rt=(1-Ce/2-Pe)*J.w,ze=(qe+rt)/2,He=rt-qe,Xe=(1-Ce)*J.h,Je=Xe-He/A;He<k.MINZOOM?(te=Y,Q.attr("d",N),j.attr("d","M0,0Z")):(te={a:Y.a+Ce*W,b:Y.b+Pe*W,c:Y.c+Fe*W},Q.attr("d",N+"M"+qe+","+Xe+"H"+rt+"L"+ze+","+Je+"L"+qe+","+Xe+"Z"),j.attr("d","M"+X+","+Z+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+qe+","+Xe+D+"M"+rt+","+Xe+S+"M"+ze+","+Je+C)),V||(Q.transition().style("fill",z>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),j.transition().style("opacity",1).duration(200),V=!0),re.emit("plotly_relayouting",ce(te))}function Te(){F(re),te!==Y&&(_.call("_guiRelayout",re,ce(te)),R&&re.data&&re._context.showTips&&(t.notifier(i(re,"Double-click to zoom back out"),"long"),R=!1))}function we(fe,ve){var Me=fe/J.xaxis._m,ke=ve/J.yaxis._m,Ce=[(te={a:Y.a-ke,b:Y.b+(Me+ke)/2,c:Y.c-(Me-ke)/2}).a,te.b,te.c].sort(t.sorterAsc),Pe=Ce.indexOf(te.a),Fe=Ce.indexOf(te.b),qe=Ce.indexOf(te.c);Ce[0]<0&&(Ce[1]+Ce[0]/2<0?(Ce[2]+=Ce[0]+Ce[1],Ce[0]=Ce[1]=0):(Ce[2]+=Ce[0]/2,Ce[1]+=Ce[0]/2,Ce[0]=0),ve=(Y.a-(te={a:Ce[Pe],b:Ce[Fe],c:Ce[qe]}).a)*J.yaxis._m,fe=(Y.c-te.c-Y.b+te.b)*J.xaxis._m);var rt=e(J.x0+fe,J.y0+ve);J.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",rt);var ze=e(-fe,-ve);J.clipDefRelative.select("path").attr("transform",ze),J.aaxis.range=[te.a,J.sum-te.b-te.c],J.baxis.range=[J.sum-te.a-te.c,te.b],J.caxis.range=[J.sum-te.a-te.b,te.c],J.drawAxes(!1),J._hasClipOnAxisFalse&&J.plotContainer.select(".scatterlayer").selectAll(".trace").call(o.hideOutsideRangePoints,J),re.emit("plotly_relayouting",ce(te))}function Le(){_.call("_guiRelayout",re,ce(te))}this.dragOptions={element:K,gd:re,plotinfo:{id:J.id,domain:re._fullLayout[J.id].domain,xaxis:J.xaxis,yaxis:J.yaxis},subplot:J.id,prepFn:function(fe,ve,Me){J.dragOptions.xaxes=[J.xaxis],J.dragOptions.yaxes=[J.yaxis],H=re._fullLayout._invScaleX,U=re._fullLayout._invScaleY;var ke=J.dragOptions.dragmode=re._fullLayout.dragmode;J.dragOptions.minDrag=v(ke)?1:void 0,"zoom"===ke?(J.dragOptions.moveFn=be,J.dragOptions.clickFn=se,J.dragOptions.doneFn=Te,function(Ce,Pe,Fe){var qe=K.getBoundingClientRect();X=Pe-qe.left,Z=Fe-qe.top,re._fullLayout._calcInverseTransform(re);var ze=t.apply3DTransform(re._fullLayout._invTransform)(X,Z);X=ze[0],Z=ze[1],te=Y={a:J.aaxis.range[0],b:J.baxis.range[1],c:J.caxis.range[1]},W=J.aaxis.range[1]-Y.a,z=g(J.graphDiv._fullLayout[J.id].bgcolor).getLuminance(),N="M0,"+J.h+"L"+J.w/2+", 0L"+J.w+","+J.h+"Z",V=!1,Q=ie.append("path").attr("class","zoombox").attr("transform",e(J.x0,J.y0)).style({fill:z>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",N),j=ie.append("path").attr("class","zoombox-corners").attr("transform",e(J.x0,J.y0)).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),J.clearSelect(re)}(0,ve,Me)):"pan"===ke?(J.dragOptions.moveFn=we,J.dragOptions.clickFn=se,J.dragOptions.doneFn=Le,te=Y={a:J.aaxis.range[0],b:J.baxis.range[1],c:J.caxis.range[1]},J.clearSelect(re)):(f(ke)||v(ke))&&x(fe,ve,Me,J.dragOptions,ke)}},K.onmousemove=function(fe){u.hover(re,fe,J.id),re._fullLayout._lasthover=K,re._fullLayout._hoversubplot=J.id},K.onmouseout=function(fe){re._dragging||c.unhover(re,fe)},c.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(y,$,ee){"use strict";var d=y("./lib/loggers"),g=y("./lib/noop"),_=y("./lib/push_unique"),t=y("./lib/is_plain_object"),e=y("./lib/dom").addStyleRule,i=y("./lib/extend"),r=y("./plots/attributes"),o=y("./plots/layout_attributes"),n=i.extendFlat,p=i.extendDeepAll;function s(m){var w=m.name,b=m.categories,k=m.meta;if(ee.modules[w])d.log("Type "+w+" already registered");else{ee.subplotsRegistry[m.basePlotModule.name]||function(R){var F=R.name;if(ee.subplotsRegistry[F])d.log("Plot type "+F+" already registered.");else for(var H in h(R),ee.subplotsRegistry[F]=R,ee.componentsRegistry)l(H,R.name)}(m.basePlotModule);for(var T={},L=0;L<b.length;L++)T[b[L]]=!0,ee.allCategories[b[L]]=!0;for(var A in ee.modules[w]={_module:m,categories:T},k&&Object.keys(k).length&&(ee.modules[w].meta=k),ee.allTypes.push(w),ee.componentsRegistry)v(A,w);m.layoutAttributes&&n(ee.traceLayoutAttributes,m.layoutAttributes);var I=m.basePlotModule,D=I.name;if("mapbox"===D){var S=I.constants.styleRules;for(var C in S)e(".js-plotly-plot .plotly .mapboxgl-"+C,S[C])}"geo"!==D&&"mapbox"!==D||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function a(m){if("string"!=typeof m.name)throw new Error("Component module *name* must be a string.");var w=m.name;for(var b in ee.componentsRegistry[w]=m,m.layoutAttributes&&(m.layoutAttributes._isLinkedToArray&&_(ee.layoutArrayContainers,w),h(m)),ee.modules)v(w,b);for(var k in ee.subplotsRegistry)l(w,k);for(var T in ee.transformsRegistry)f(w,T);m.schema&&m.schema.layout&&p(o,m.schema.layout)}function c(m){if("string"!=typeof m.name)throw new Error("Transform module *name* must be a string.");var w="Transform module "+m.name,b="function"==typeof m.transform,k="function"==typeof m.calcTransform;if(!b&&!k)throw new Error(w+" is missing a *transform* or *calcTransform* method.");for(var T in b&&k&&d.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),t(m.attributes)||d.log(w+" registered without an *attributes* object."),"function"!=typeof m.supplyDefaults&&d.log(w+" registered without a *supplyDefaults* method."),ee.transformsRegistry[m.name]=m,ee.componentsRegistry)f(T,m.name)}function u(m){var w=m.name,b=w.split("-")[0],k=m.dictionary,T=m.format,L=k&&Object.keys(k).length,A=T&&Object.keys(T).length,I=ee.localeRegistry,D=I[w];if(D||(I[w]=D={}),b!==w){var S=I[b];S||(I[b]=S={}),L&&S.dictionary===D.dictionary&&(S.dictionary=k),A&&S.format===D.format&&(S.format=T)}L&&(D.dictionary=k),A&&(D.format=T)}function h(m){if(m.layoutAttributes){var w=m.layoutAttributes._arrayAttrRegexps;if(w)for(var b=0;b<w.length;b++)_(ee.layoutArrayRegexes,w[b])}}function v(m,w){var b=ee.componentsRegistry[m].schema;if(b&&b.traces){var k=b.traces[w];k&&p(ee.modules[w]._module.attributes,k)}}function f(m,w){var b=ee.componentsRegistry[m].schema;if(b&&b.transforms){var k=b.transforms[w];k&&p(ee.transformsRegistry[w].attributes,k)}}function l(m,w){var b=ee.componentsRegistry[m].schema;if(b&&b.subplots){var k=ee.subplotsRegistry[w],T=k.layoutAttributes,L="subplot"===k.attr?k.name:k.attr;Array.isArray(L)&&(L=L[0]);var A=b.subplots[L];T&&A&&p(T,A)}}function x(m){return"object"==typeof m&&(m=m.type),m}ee.modules={},ee.allCategories={},ee.allTypes=[],ee.subplotsRegistry={},ee.transformsRegistry={},ee.componentsRegistry={},ee.layoutArrayContainers=[],ee.layoutArrayRegexes=[],ee.traceLayoutAttributes={},ee.localeRegistry={},ee.apiMethodRegistry={},ee.collectableSubplotTypes=null,ee.register=function(m){if(ee.collectableSubplotTypes=null,!m)throw new Error("No argument passed to Plotly.register.");m&&!Array.isArray(m)&&(m=[m]);for(var w=0;w<m.length;w++){var b=m[w];if(!b)throw new Error("Invalid module was attempted to be registered!");switch(b.moduleType){case"trace":s(b);break;case"transform":c(b);break;case"component":a(b);break;case"locale":u(b);break;case"apiMethod":ee.apiMethodRegistry[b.name]=b.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ee.getModule=function(m){var w=ee.modules[x(m)];return!!w&&w._module},ee.traceIs=function(m,w){if("various"===(m=x(m)))return!1;var b=ee.modules[m];return b||(m&&d.log("Unrecognized trace type "+m+"."),b=ee.modules[r.type.dflt]),!!b.categories[w]},ee.getTransformIndices=function(m,w){for(var b=[],k=m.transforms||[],T=0;T<k.length;T++)k[T].type===w&&b.push(T);return b},ee.hasTransform=function(m,w){for(var b=m.transforms||[],k=0;k<b.length;k++)if(b[k].type===w)return!0;return!1},ee.getComponentMethod=function(m,w){var b=ee.componentsRegistry[m];return b&&b[w]||g},ee.call=function(){var m=arguments[0],w=[].slice.call(arguments,1);return ee.apiMethodRegistry[m].apply(null,w)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(y,$,ee){"use strict";var d=y("../registry"),g=y("../lib"),_=g.extendFlat,t=g.extendDeep;function e(i){var r;switch(i){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}$.exports=function(i,r){var o,s=i.layout,a=t([],i.data),c=t({},s,e(r.tileClass)),u=i._context||{};if(r.width&&(c.width=r.width),r.height&&(c.height=r.height),"thumbnail"===r.tileClass||"themes__thumb"===r.tileClass){c.annotations=[];var h=Object.keys(c);for(o=0;o<h.length;o++)["xaxis","yaxis","zaxis"].indexOf(h[o].slice(0,5))>-1&&(c[h[o]].title={text:""});for(o=0;o<a.length;o++){var v=a[o];v.showscale=!1,v.marker&&(v.marker.showscale=!1),d.traceIs(v,"pie-like")&&(v.textposition="none")}}if(Array.isArray(r.annotations))for(o=0;o<r.annotations.length;o++)c.annotations.push(r.annotations[o]);var f=Object.keys(c).filter(function(b){return b.match(/^scene\d*$/)});if(f.length){var l={};for("thumbnail"===r.tileClass&&(l={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),o=0;o<f.length;o++){var x=c[f[o]];x.xaxis||(x.xaxis={}),x.yaxis||(x.yaxis={}),x.zaxis||(x.zaxis={}),_(x.xaxis,l),_(x.yaxis,l),_(x.zaxis,l),x._scene=null}}var m=document.createElement("div");r.tileClass&&(m.className=r.tileClass);var w={gd:m,td:m,layout:c,data:a,config:{staticPlot:void 0===r.staticPlot||r.staticPlot,plotGlPixelRatio:void 0===r.plotGlPixelRatio?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return"transparent"!==r.setBackground&&(w.config.setBackground=r.setBackground||"opaque"),w.gd.defaultLayout=e(r.tileClass),w}},{"../lib":503,"../registry":638}],640:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plot_api/to_image"),_=y("./filesaver"),t=y("./helpers");$.exports=function(e,i){var r;return d.isPlainObject(e)||(r=d.getGraphDiv(e)),(i=i||{}).format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(o,n){r&&r._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),d.isIE()&&"svg"!==i.format&&n(new Error(t.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var p=g(e,i),s=i.filename||e.fn||"newplot";s+="."+i.format.replace("-","."),p.then(function(a){return r&&(r._snapshotInProgress=!1),_(a,s,i.format)}).then(function(a){o(a)}).catch(function(a){r&&(r._snapshotInProgress=!1),n(a)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("./helpers");$.exports=function(_,t,e){var i=document.createElement("a"),r="download"in i;return new Promise(function(o,n){var p,s;return d.isIE()?(p=g.createBlob(_,"svg"),window.navigator.msSaveBlob(p,t),p=null,o(t)):r?(p=g.createBlob(_,e),s=g.createObjectURL(p),i.href=s,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),g.revokeObjectURL(s),p=null,o(t)):d.isSafari()?(g.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(_)),o(t)):void n(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(y,$,ee){"use strict";var d=y("../registry");ee.getDelay=function(_){return _._has&&(_._has("gl3d")||_._has("gl2d")||_._has("mapbox"))?500:0},ee.getRedrawFunc=function(_){return function(){d.getComponentMethod("colorbar","draw")(_)}},ee.encodeSVG=function(_){return"data:image/svg+xml,"+encodeURIComponent(_)},ee.encodeJSON=function(_){return"data:application/json,"+encodeURIComponent(_)};var g=window.URL||window.webkitURL;ee.createObjectURL=function(_){return g.createObjectURL(_)},ee.revokeObjectURL=function(_){return g.revokeObjectURL(_)},ee.createBlob=function(_,t){if("svg"===t)return new window.Blob([_],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([_],{type:"application/json;charset=utf-8"});var e=function(i){for(var r=i.length,o=new ArrayBuffer(r),n=new Uint8Array(o),p=0;p<r;p++)n[p]=i.charCodeAt(p);return o}(window.atob(_));return new window.Blob([e],{type:"image/"+t})},ee.octetStream=function(_){document.location.href="data:application/octet-stream"+_},ee.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ee.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(y,$,ee){"use strict";var d=y("./helpers"),g={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:y("./cloneplot"),toSVG:y("./tosvg"),svgToImg:y("./svgtoimg"),toImage:y("./toimage"),downloadImage:y("./download")};$.exports=g},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("events").EventEmitter,_=y("./helpers");$.exports=function(t){var e=t.emitter||new g,i=new Promise(function(r,o){var n=window.Image,p=t.svg,s=t.format||"png";if(d.isIE()&&"svg"!==s){var a=new Error(_.MSG_IE_BAD_FORMAT);return o(a),t.promise?i:e.emit("error",a)}var c,u,h=t.canvas,v=t.scale||1,x=v*(t.width||300),m=v*(t.height||150),w=h.getContext("2d"),b=new n;"svg"===s||d.isSafari()?u=_.encodeSVG(p):(c=_.createBlob(p,"svg"),u=_.createObjectURL(c)),h.width=x,h.height=m,b.onload=function(){var k;switch(c=null,_.revokeObjectURL(u),"svg"!==s&&w.drawImage(b,0,0,x,m),s){case"jpeg":k=h.toDataURL("image/jpeg");break;case"png":k=h.toDataURL("image/png");break;case"webp":k=h.toDataURL("image/webp");break;case"svg":k=u;break;default:var T="Image format is not jpeg, png, svg or webp.";if(o(new Error(T)),!t.promise)return e.emit("error",T)}r(k),t.promise||e.emit("success",k)},b.onerror=function(k){if(c=null,_.revokeObjectURL(u),o(k),!t.promise)return e.emit("error",k)},b.src=u});return t.promise?i:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(y,$,ee){"use strict";var d=y("events").EventEmitter,g=y("../registry"),_=y("../lib"),t=y("./helpers"),e=y("./cloneplot"),i=y("./tosvg"),r=y("./svgtoimg");$.exports=function(o,n){var p=new d,s=e(o,{format:"png"}),a=s.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var c=t.getRedrawFunc(a);return g.call("_doPlot",a,s.data,s.layout,s.config).then(c).then(function(){var u=t.getDelay(a._fullLayout);setTimeout(function(){var h=i(a),v=document.createElement("canvas");v.id=_.randstr(),(p=r({format:n.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:v,emitter:p,svg:h})).clean=function(){a&&document.body.removeChild(a)}},u)}).catch(function(u){p.emit("error",u)}),p}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../lib"),_=y("../components/drawing"),t=y("../components/color"),e=y("../constants/xmlns_namespaces"),i=/"/g,r=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");$.exports=function(o,n,p){var s,a,c=o._fullLayout,u=c._paper,h=c._toppaper,v=c.width,f=c.height;u.insert("rect",":first-child").call(_.setRect,0,0,v,f).call(t.fill,c.paper_bgcolor);var l=c._basePlotModules||[];for(s=0;s<l.length;s++){var x=l[s];x.toSVG&&x.toSVG(o)}if(h){var m=h.node().childNodes,w=Array.prototype.slice.call(m);for(s=0;s<w.length;s++){var b=w[s];b.childNodes.length&&u.node().appendChild(b)}}c._draggers&&c._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var L=d.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){L.style({visibility:null,display:null});var A=this.style.fontFamily;A&&-1!==A.indexOf('"')&&L.style("font-family",A.replace(i,"TOBESTRIPPED"))}else L.remove()});var k=[];if(c._gradientUrlQueryParts)for(a in c._gradientUrlQueryParts)k.push(a);if(c._patternUrlQueryParts)for(a in c._patternUrlQueryParts)k.push(a);k.length&&u.selectAll(k.join(",")).each(function(){var L=d.select(this),A=this.style.fill;A&&-1!==A.indexOf("url(")&&L.style("fill",A.replace(i,"TOBESTRIPPED"));var I=this.style.stroke;I&&-1!==I.indexOf("url(")&&L.style("stroke",I.replace(i,"TOBESTRIPPED"))}),"pdf"!==n&&"eps"!==n||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(e.xmlns,"xmlns",e.svg),u.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===n&&p&&(u.attr("width",p*v),u.attr("height",p*f),u.attr("viewBox","0 0 "+v+" "+f));var L,A,I,T=(new window.XMLSerializer).serializeToString(u.node());return L=T,A=d.select("body").append("div").style({display:"none"}).html(""),I=L.replace(/(&[^;]*;)/gi,function(D){return"&lt;"===D?"&#60;":"&rt;"===D?"&#62;":-1!==D.indexOf("<")||-1!==D.indexOf(">")?"":A.html(D).text()}),A.remove(),T=(T=(T=I).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(r,"'"),g.isIE()&&(T=(T=(T=T.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),T}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){for(var t=0;t<g.length;t++)g[t].i=t;d.mergeArray(_.text,g,"tx"),d.mergeArray(_.hovertext,g,"htx");var e=_.marker;if(e){d.mergeArray(e.opacity,g,"mo",!0),d.mergeArray(e.color,g,"mc");var i=e.line;i&&(d.mergeArray(i.color,g,"mlc"),d.mergeArrayCastPositive(i.width,g,"mlw"))}}},{"../../lib":503}],648:[function(y,$,ee){"use strict";var d=y("../scatter/attributes"),g=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../components/colorscale/attributes"),i=y("../../plots/font_attributes"),r=y("./constants"),o=y("../../components/drawing/attributes").pattern,n=y("../../lib/extend").extendFlat,p=i({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=n({},d.marker.line.width,{dflt:0}),a=n({width:s,editType:"calc"},e("marker.line")),c=n({line:a,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:o});$.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),text:d.text,texttemplate:t({editType:"plot"},{keys:r.eventDataKeys}),hovertext:d.hovertext,hovertemplate:_({},{keys:r.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},p,{}),insidetextfont:n({},p,{}),outsidetextfont:n({},p,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},d.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:c,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:d.selected.marker.opacity,color:d.selected.marker.color,editType:"style"},textfont:d.selected.textfont,editType:"style"},unselected:{marker:{opacity:d.unselected.marker.opacity,color:d.unselected.marker.color,editType:"style"},textfont:d.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../plots/cartesian/align_period"),_=y("../../components/colorscale/helpers").hasColorscale,t=y("../../components/colorscale/calc"),e=y("./arrays_to_calcdata"),i=y("../scatter/calc_selection");$.exports=function(r,o){var n,p,s,a,c,u,h=d.getFromId(r,o.xaxis||"x"),v=d.getFromId(r,o.yaxis||"y"),f={msUTC:!(!o.base&&0!==o.base)};"h"===o.orientation?(n=h.makeCalcdata(o,"x",f),s=v.makeCalcdata(o,"y"),a=g(o,v,"y",s),c=!!o.yperiodalignment,u="y"):(n=v.makeCalcdata(o,"y",f),s=h.makeCalcdata(o,"x"),a=g(o,h,"x",s),c=!!o.xperiodalignment,u="x"),p=a.vals;for(var l=Math.min(p.length,n.length),x=new Array(l),m=0;m<l;m++)x[m]={p:p[m],s:n[m]},c&&(x[m].orig_p=s[m],x[m][u+"End"]=a.ends[m],x[m][u+"Start"]=a.starts[m]),o.ids&&(x[m].id=String(o.ids[m]));return _(o,"marker")&&t(r,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),_(o,"marker.line")&&t(r,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(x,o),i(x,o),x}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(y,$,ee){"use strict";$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib").isArrayOrTypedArray,_=y("../../constants/numerical").BADNUM,t=y("../../registry"),e=y("../../plots/cartesian/axes"),i=y("../../plots/cartesian/constraints").getAxisGroup,r=y("./sieve.js");function o(l,x,m,w,b){if(w.length){var k,T,L,A;switch(function(I,D){var S,C;for(S=0;S<D.length;S++){var R,F=D[S],H=F[0].trace,U="funnel"===H.type?H._base:H.base,X="h"===H.orientation?H.xcalendar:H.ycalendar,Z="category"===I.type||"multicategory"===I.type?function(){return null}:I.d2c;if(g(U)){for(C=0;C<Math.min(U.length,F.length);C++)R=Z(U[C],0,X),d(R)?(F[C].b=+R,F[C].hasB=1):F[C].b=0;for(;C<F.length;C++)F[C].b=0}else{R=Z(U,0,X);var Y=d(R);for(R=Y?R:0,C=0;C<F.length;C++)F[C].b=R,Y&&(F[C].hasB=1)}}}(m,w),b.mode){case"overlay":n(x,m,w,b);break;case"group":for(k=[],T=[],L=0;L<w.length;L++)void 0===(A=w[L])[0].trace.offset?T.push(A):k.push(A);T.length&&(I=l,S=m,F=new r(T,{posAxis:D=x,sepNegVal:!1,overlapNoMerge:!(R=b).norm}),function(H,U,X,Z){for(var Y=H._fullLayout,z=X.minDiff,N=X.traces,V=N.length,Q=X.positions.length!==X.distinctPositions.length,j=z*(1-Z.gap),J=i(Y,U._id)+N[0][0].trace.orientation,K=Y._alignmentOpts[J]||{},re=0;re<V;re++){var ie,ce,se=N[re],de=se[0].trace,ge=Object.keys((K[de.alignmentgroup]||{}).offsetGroups||{}).length,be=(ie=ge?j/ge:Q?j/V:j)*(1-(Z.groupgap||0));ce=ge?((2*de._offsetIndex+1-ge)*ie-be)/2:Q?((2*re+1-V)*ie-be)/2:-be/2;var Te=se[0].t;Te.barwidth=be,Te.poffset=ce,Te.bargroupwidth=j,Te.bardelta=z}X.binWidth=N[0][0].t.barwidth/100,s(X),a(U,X),c(U,X,Q)}(I,D,F,R),function(H,U){for(var X=H.traces,Z=0;Z<X.length;Z++){var Y=X[Z];if(void 0===Y[0].trace.base)for(var W=new r([Y],{posAxis:U,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<Y.length;te++){var z=Y[te];if(z.p!==_){var N=W.put(z.p,z.b+z.s);N&&(z.b=N)}}}}(F,D),R.norm?(h(F),v(S,F,R)):u(S,F)),k.length&&n(x,m,k,b);break;case"stack":case"relative":for(k=[],T=[],L=0;L<w.length;L++)void 0===(A=w[L])[0].trace.base?T.push(A):k.push(A);T.length&&function(I,D,S,C,R){var F=new r(C,{posAxis:D,sepNegVal:"relative"===R.mode,overlapNoMerge:!(R.norm||"stack"===R.mode||"relative"===R.mode)});p(D,F,R),function(Y,W,te){var z,N,V,Q,j,J,K=f(Y),re=W.traces;for(Q=0;Q<re.length;Q++)if("funnel"===(N=(z=re[Q])[0].trace).type)for(j=0;j<z.length;j++)(J=z[j]).s!==_&&W.put(J.p,-.5*J.s);for(Q=0;Q<re.length;Q++){V="funnel"===(N=(z=re[Q])[0].trace).type;var ie=[];for(j=0;j<z.length;j++)if((J=z[j]).s!==_){var ce,se=W.put(J.p,ce=V?J.s:J.s+J.b),de=se+ce;J.b=se,J[K]=de,te.norm||(ie.push(de),J.hasB&&ie.push(se))}te.norm||(N._extremes[Y._id]=e.findExtremes(Y,ie,{tozero:!0,padded:!0}))}}(S,F,R);for(var H=0;H<C.length;H++)for(var U=C[H],X=0;X<U.length;X++){var Z=U[X];Z.s!==_&&Z.b+Z.s===F.get(Z.p,Z.s)&&(Z._outmost=!0)}R.norm&&v(S,F,R)}(0,x,m,T,b),k.length&&n(x,m,k,b)}!function(I,D){var S,C,R,F=f(D),H={},U=1/0,X=-1/0;for(S=0;S<I.length;S++)for(R=I[S],C=0;C<R.length;C++){var Z=R[C].p;d(Z)&&(U=Math.min(U,Z),X=Math.max(X,Z))}var Y=1e4/(X-U),W=H.round=function(J){return String(Math.round(Y*(J-U)))};for(S=0;S<I.length;S++){(R=I[S])[0].t.extents=H;var te=R[0].t.poffset,z=Array.isArray(te);for(C=0;C<R.length;C++){var N=R[C],V=N[F]-N.w/2;if(d(V)){var Q=N[F]+N.w/2,j=W(N.p);H[j]=H[j]?[Math.min(V,H[j][0]),Math.max(Q,H[j][1])]:[V,Q]}N.p0=N.p+(z?te[C]:te),N.p1=N.p0+N.w,N.s0=N.b,N.s1=N.s0+N.s}}}(w,x)}var I,D,S,R,F}function n(l,x,m,w){for(var b=0;b<m.length;b++){var T=new r([m[b]],{posAxis:l,sepNegVal:!1,overlapNoMerge:!w.norm});p(l,T,w),w.norm?(h(T),v(x,T,w)):u(x,T)}}function p(l,x,m){for(var w=x.minDiff,b=x.traces,k=w*(1-m.gap),T=k*(1-(m.groupgap||0)),L=-T/2,A=0;A<b.length;A++){var I=b[A][0].t;I.barwidth=T,I.poffset=L,I.bargroupwidth=k,I.bardelta=w}x.binWidth=b[0][0].t.barwidth/100,s(x),a(l,x),c(l,x)}function s(l){var x,m,w=l.traces;for(x=0;x<w.length;x++){var b,k=w[x],T=k[0],L=T.trace,A=T.t,I=L._offset||L.offset,D=A.poffset;if(g(I)){for(b=Array.prototype.slice.call(I,0,k.length),m=0;m<b.length;m++)d(b[m])||(b[m]=D);for(m=b.length;m<k.length;m++)b.push(D);A.poffset=b}else void 0!==I&&(A.poffset=I);var S=L._width||L.width,C=A.barwidth;if(g(S)){var R=Array.prototype.slice.call(S,0,k.length);for(m=0;m<R.length;m++)d(R[m])||(R[m]=C);for(m=R.length;m<k.length;m++)R.push(C);if(A.barwidth=R,void 0===I){for(b=[],m=0;m<k.length;m++)b.push(D+(C-R[m])/2);A.poffset=b}}else void 0!==S&&(A.barwidth=S,void 0===I&&(A.poffset=D+(C-S)/2))}}function a(l,x){for(var m=x.traces,w=f(l),b=0;b<m.length;b++)for(var k=m[b],T=k[0].t,L=T.poffset,A=Array.isArray(L),I=T.barwidth,D=Array.isArray(I),S=0;S<k.length;S++){var C=k[S],R=C.w=D?I[S]:I;C[w]=C.p+(A?L[S]:L)+R/2}}function c(l,x,m){var w=x.traces,b=x.minDiff/2;e.minDtick(l,x.minDiff,x.distinctPositions[0],m);for(var k=0;k<w.length;k++){var T,L,A,I,D=w[k],S=D[0],C=S.trace,R=[];for(I=0;I<D.length;I++)L=(T=D[I]).p-b,R.push(L,A=T.p+b);if(C.width||C.offset){var F=S.t,H=F.poffset,U=F.barwidth,X=Array.isArray(H),Z=Array.isArray(U);for(I=0;I<D.length;I++)A=(L=(T=D[I]).p+(X?H[I]:H))+(Z?U[I]:U),R.push(L,A)}C._extremes[l._id]=e.findExtremes(l,R,{padded:!1})}}function u(l,x){for(var m=x.traces,w=f(l),b=0;b<m.length;b++){for(var k=m[b],T=k[0].trace,L=[],A=!1,I=0;I<k.length;I++){var D=k[I],S=D.b,C=S+D.s;D[w]=C,L.push(C),D.hasB&&L.push(S),D.hasB&&D.b||(A=!0)}T._extremes[l._id]=e.findExtremes(l,L,{tozero:A,padded:!0})}}function h(l){for(var x=l.traces,m=0;m<x.length;m++)for(var w=x[m],b=0;b<w.length;b++){var k=w[b];k.s!==_&&l.put(k.p,k.b+k.s)}}function v(l,x,m){var w=x.traces,b=f(l),k="fraction"===m.norm?1:100,T=k/1e9,L=l.l2c(l.c2l(0)),A="stack"===m.mode?k:L;function I(te){return d(l.c2l(te))&&(te<L-T||te>A+T||!d(L))}for(var D=0;D<w.length;D++){for(var S=w[D],C=S[0].trace,R=[],F=!1,H=!1,U=0;U<S.length;U++){var X=S[U];if(X.s!==_){var Z=Math.abs(k/x.get(X.p,X.s));X.b*=Z,X.s*=Z;var Y=X.b,W=Y+X.s;X[b]=W,R.push(W),H=H||I(W),X.hasB&&(R.push(Y),H=H||I(Y)),X.hasB&&X.b||(F=!0)}}C._extremes[l._id]=e.findExtremes(l,R,{tozero:F,padded:H})}}function f(l){return l._id.charAt(0)}$.exports={crossTraceCalc:function(l,x){for(var m=x.xaxis,w=x.yaxis,b=l._fullLayout,k=l._fullData,T=l.calcdata,L=[],A=[],I=0;I<k.length;I++){var D=k[I];if(!0===D.visible&&t.traceIs(D,"bar")&&D.xaxis===m._id&&D.yaxis===w._id&&("h"===D.orientation?L.push(T[I]):A.push(T[I]),D._computePh))for(var S=l.calcdata[I],C=0;C<S.length;C++)"function"==typeof S[C].ph0&&(S[C].ph0=S[C].ph0()),"function"==typeof S[C].ph1&&(S[C].ph1=S[C].ph1())}var R={xCat:"category"===m.type||"multicategory"===m.type,yCat:"category"===w.type||"multicategory"===w.type,mode:b.barmode,norm:b.barnorm,gap:b.bargap,groupgap:b.bargroupgap};o(l,m,w,A,R),o(l,w,m,L,R)},setGroupPositions:o}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color"),_=y("../../registry"),t=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),i=y("./style_defaults"),r=y("../../plots/cartesian/constraints").getAxisGroup,o=y("./attributes"),n=d.coerceFont;function p(a,c,u,h){var v=c.orientation,l=r(u,c[{v:"x",h:"y"}[v]+"axis"])+v,x=u._alignmentOpts||{},m=h("alignmentgroup"),w=x[l];w||(w=x[l]={});var b=w[m];b?b.traces.push(c):b=w[m]={traces:[c],alignmentIndex:Object.keys(w).length,offsetGroups:{}};var k=h("offsetgroup"),T=b.offsetGroups,L=T[k];k&&(L||(L=T[k]={offsetIndex:Object.keys(T).length}),c._offsetIndex=L.offsetIndex)}function s(a,c,u,h,v,f){var l=!1!==(f=f||{}).moduleHasSelected,x=!1!==f.moduleHasUnselected,m=!1!==f.moduleHasConstrain,w=!1!==f.moduleHasCliponaxis,b=!1!==f.moduleHasTextangle,k=!1!==f.moduleHasInsideanchor,T=!!f.hasPathbar,L=Array.isArray(v)||"auto"===v,A=L||"inside"===v,I=L||"outside"===v;if(A||I){var D=n(h,"textfont",u.font),S=d.extendFlat({},D),C=!(a.textfont&&a.textfont.color);if(C&&delete S.color,n(h,"insidetextfont",S),T){var R=d.extendFlat({},D);C&&delete R.color,n(h,"pathbar.textfont",R)}I&&n(h,"outsidetextfont",D),l&&h("selected.textfont.color"),x&&h("unselected.textfont.color"),m&&h("constraintext"),w&&h("cliponaxis"),b&&h("textangle"),h("texttemplate")}A&&k&&h("insidetextanchor")}$.exports={supplyDefaults:function(a,c,u,h){function v(m,w){return d.coerce(a,c,o,m,w)}if(t(a,c,h,v)){e(a,c,h,v),v("xhoverformat"),v("yhoverformat"),v("orientation",c.x&&!c.y?"h":"v"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate");var f=v("textposition");s(a,0,h,v,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i(a,c,v,u,h);var l=(c.marker.line||{}).color,x=_.getComponentMethod("errorbars","supplyDefaults");x(a,c,l||g.defaultLine,{axis:"y"}),x(a,c,l||g.defaultLine,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(c,v)}else c.visible=!1},crossTraceDefaults:function(a,c){var u;function h(f){return d.coerce(u._input,u,o,f)}if("group"===c.barmode)for(var v=0;v<a.length;v++)"bar"===(u=a[v]).type&&p(0,u,c,h)},handleGroupingDefaults:p,handleText:s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(y,$,ee){"use strict";$.exports=function(d,g,_){return d.x="xVal"in g?g.xVal:g.x,d.y="yVal"in g?g.yVal:g.y,g.xa&&(d.xaxis=g.xa),g.ya&&(d.yaxis=g.ya),"h"===_.orientation?(d.label=d.y,d.value=d.x):(d.label=d.x,d.value=d.y),d}},{}],654:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("tinycolor2"),_=y("../../lib").isArrayOrTypedArray;ee.coerceString=function(t,e,i){if("string"==typeof e){if(e||!t.noBlank)return e}else if(("number"==typeof e||!0===e)&&!t.strict)return String(e);return void 0!==i?i:t.dflt},ee.coerceNumber=function(t,e,i){if(d(e)){e=+e;var r=t.min,o=t.max;if(!(void 0!==r&&e<r||void 0!==o&&e>o))return e}return void 0!==i?i:t.dflt},ee.coerceColor=function(t,e,i){return g(e).isValid()?e:void 0!==i?i:t.dflt},ee.coerceEnumerated=function(t,e,i){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==i?i:t.dflt},ee.getValue=function(t,e){var i;return Array.isArray(t)?e<t.length&&(i=t[e]):i=t,i},ee.getLineWidth=function(t,e){return 0<e.mlw?e.mlw:_(t.marker.line.width)?0:t.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(y,$,ee){"use strict";var d=y("../../components/fx"),g=y("../../registry"),_=y("../../components/color"),t=y("../../lib").fillText,e=y("./helpers").getLineWidth,i=y("../../plots/cartesian/axes").hoverLabelText,r=y("../../constants/numerical").BADNUM;function o(p,s,a,c,u){var h,v,f,l,x,m,w,b=p.cd,k=b[0].trace,T=b[0].t,L="closest"===c,A="waterfall"===k.type,I=p.maxHoverDistance,D=p.maxSpikeDistance;"h"===k.orientation?(h=a,v=s,f="y",l="x",x=z,m=W):(h=s,v=a,f="x",l="y",m=z,x=W);var S=k[f+"period"],C=L||S;function R(ie){return H(ie,-1)}function F(ie){return H(ie,1)}function H(ie,ce){return ie[f]+ce*ie.w/2}function U(ie){return ie[f+"End"]-ie[f+"Start"]}var X=L?R:S?function(ie){return ie.p-U(ie)/2}:function(ie){return Math.min(R(ie),ie.p-T.bardelta/2)},Z=L?F:S?function(ie){return ie.p+U(ie)/2}:function(ie){return Math.max(F(ie),ie.p+T.bardelta/2)};function Y(ie,ce,se){return u.finiteRange&&(se=0),d.inbox(ie-h,ce-h,se+Math.min(1,Math.abs(ce-ie)/w)-1)}function W(ie){return Y(X(ie),Z(ie),I)}function te(ie){var ce=ie[l];if(A){var se=Math.abs(ie.rawS)||0;v>0?ce+=se:v<0&&(ce-=se)}return ce}function z(ie){var ce=v,se=ie.b,de=te(ie);return d.inbox(se-ce,de-ce,I+(de-ce)/(de-se)-1)}var N=p[f+"a"],V=p[l+"a"];w=Math.abs(N.r2c(N.range[1])-N.r2c(N.range[0]));var ie,ce,se,de,Q=d.getDistanceFunction(c,x,m,function(ie){return(x(ie)+m(ie))/2});if(d.getClosest(b,Q,p),!1!==p.index&&b[p.index].p!==r){C||(X=function(ie){return Math.min(R(ie),ie.p-T.bargroupwidth/2)},Z=function(ie){return Math.max(F(ie),ie.p+T.bargroupwidth/2)});var j=b[p.index],J=k.base?j.b+j.s:j.s;p[l+"0"]=p[l+"1"]=V.c2p(j[l],!0),p[l+"LabelVal"]=J;var K=T.extents[T.extents.round(j.p)];return p[f+"0"]=N.c2p(L?X(j):K[0],!0),p[f+"1"]=N.c2p(L?Z(j):K[1],!0),p[f+"LabelVal"]=void 0!==j.orig_p?j.orig_p:j.p,p.labelLabel=i(N,p[f+"LabelVal"],k[f+"hoverformat"]),p.valueLabel=i(V,p[l+"LabelVal"],k[l+"hoverformat"]),p.baseLabel=i(V,j.b,k[l+"hoverformat"]),p.spikeDistance=(ce=v,se=(ie=j).b,de=te(ie),(d.inbox(se-ce,de-ce,D+(de-ce)/(de-se)-1)+function(ie){return Y(R(ie),F(ie),D)}(j))/2),p[f+"Spike"]=N.c2p(j.p,!0),t(j,k,p),p.hovertemplate=k.hovertemplate,p}}function n(p,s){var a=s.mcc||p.marker.color,c=s.mlcc||p.marker.line.color,u=e(p,s);return _.opacity(a)?a:_.opacity(c)&&u?c:void 0}$.exports={hoverPoints:function(p,s,a,c,u){var h=o(p,s,a,c,u);if(h){var v=h.cd,f=v[0].trace,l=v[h.index];return h.color=n(f,l),g.getComponentMethod("errorbars","hoverInfo")(l,f,h),[h]}},hoverOnBars:o,getTraceColor:n}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc").crossTraceCalc,colorbar:y("../scatter/marker_colorbar"),arraysToCalcdata:y("./arrays_to_calcdata"),plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"bar",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(y,$,ee){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../plots/cartesian/axes"),_=y("../../lib"),t=y("./layout_attributes");$.exports=function(e,i,r){function o(f,l){return _.coerce(e,i,t,f,l)}for(var n=!1,p=!1,s=!1,a={},c=o("barmode"),u=0;u<r.length;u++){var h=r[u];if(d.traceIs(h,"bar")&&h.visible){if(n=!0,"group"===c){var v=h.xaxis+h.yaxis;a[v]&&(s=!0),a[v]=!0}h.visible&&"histogram"===h.type&&"category"!==g.getFromId({_fullLayout:i},h["v"===h.orientation?"xaxis":"yaxis"]).type&&(p=!0)}}n?("overlay"!==c&&o("barnorm"),o("bargap",p&&!s?0:.2),o("bargroupgap")):delete i.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("../../lib"),t=y("../../lib/svg_text_utils"),e=y("../../components/color"),i=y("../../components/drawing"),r=y("../../registry"),o=y("../../plots/cartesian/axes").tickText,n=y("./uniform_text"),p=n.recordMinTextSize,s=n.clearMinTextSize,a=y("./style"),c=y("./helpers"),u=y("./constants"),h=y("./attributes"),v=h.text,f=h.textposition,l=y("../../components/fx/helpers").appendArrayPointValue,x=u.TEXTPAD;function m(D){return D.id}function b(D,S){return D<S?1:-1}function k(D,S,C,R){var F;return!S.uniformtext.mode&&T(C)?(R&&(F=R()),D.transition().duration(C.duration).ease(C.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()})):D}function T(D){return D&&D.duration>0}function L(D){return"auto"===D?0:D}function A(D,S){var C=Math.PI/180*S,R=Math.abs(Math.sin(C)),F=Math.abs(Math.cos(C));return{x:D.width*F+D.height*R,y:D.width*R+D.height*F}}function I(D,S,C,R,F,H){var U=!!H.isHorizontal,X=!!H.constrained,Z=H.angle||0,Y=H.anchor||"end",W="end"===Y,te="start"===Y,z=((H.leftToRight||0)+1)/2,N=1-z,V=F.width,Q=F.height,j=Math.abs(S-D),J=Math.abs(R-C),K=j>2*x&&J>2*x?x:0;j-=2*K,J-=2*K;var re=L(Z);"auto"!==Z||V<=j&&Q<=J||!(V>j||Q>J)||(V>J||Q>j)&&V<Q==j<J||(re+=90);var ie=A(F,re),ce=1;X&&(ce=Math.min(1,j/ie.x,J/ie.y));var se=F.left*N+F.right*z,de=(F.top+F.bottom)/2,ue=(D+x)*N+(S-x)*z,ge=(C+R)/2,be=0,Te=0;if(te||W){var we=(U?ie.x:ie.y)/2,Le=U?b(D,S):b(C,R);U?te?(ue=D+Le*K,be=-Le*we):(ue=S-Le*K,be=Le*we):te?(ge=C+Le*K,Te=-Le*we):(ge=R-Le*K,Te=Le*we)}return{textX:se,textY:de,targetX:ue,targetY:ge,anchorX:be,anchorY:Te,scale:ce,rotate:re}}$.exports={plot:function(D,S,C,R,F,H){var U=S.xaxis,X=S.yaxis,Z=D._fullLayout;F||(F={mode:Z.barmode,norm:Z.barmode,gap:Z.bargap,groupgap:Z.bargroupgap},s("bar",Z));var Y=_.makeTraceGroups(R,C,"trace bars").each(function(W){var te=d.select(this),z=W[0].trace,Q="bar"===z.type||"funnel"===z.type,j=0;"waterfall"===z.type&&z.connector.visible&&"between"===z.connector.mode&&(j=z.connector.line.width/2);var J="h"===z.orientation,K=T(F),re=_.ensureSingle(te,"g","points"),ie=function(D){if(D.ids)return m}(z),ce=re.selectAll("g.point").data(_.identity,ie);ce.enter().append("g").classed("point",!0),ce.exit().remove(),ce.each(function(de,ue){var ge,be,ze,He,Xe,Je,at,pt,xt,Ft,Te=d.select(this),we=(He=U,Xe=X,pt=[],Ft=(Je=J)?Xe:He,(at=[])[0]=(xt=Je?He:Xe).c2p((ze=de).s0,!0),pt[0]=Ft.c2p(ze.p0,!0),at[1]=xt.c2p(ze.s1,!0),pt[1]=Ft.c2p(ze.p1,!0),Je?[at,pt]:[pt,at]),Le=we[0][0],fe=we[0][1],ve=we[1][0],Me=we[1][1],ke=0==(J?fe-Le:Me-ve);if(ke&&Q&&c.getLineWidth(z,de)&&(ke=!1),ke||(ke=!(g(Le)&&g(fe)&&g(ve)&&g(Me))),de.isBlank=ke,ke&&(J?fe=Le:Me=ve),j&&!ke&&(J?(Le-=b(Le,fe)*j,fe+=b(Le,fe)*j):(ve-=b(ve,Me)*j,Me+=b(ve,Me)*j)),"waterfall"===z.type){if(!ke){var Ce=z[de.dir].marker;ge=Ce.line.width,be=Ce.color}}else ge=c.getLineWidth(z,de),be=de.mc||z.marker.color;function Pe(ze){var He=d.round(ge/2%1,2);return 0===F.gap&&0===F.groupgap?d.round(Math.round(ze)-He,2):ze}if(!D._context.staticPlot){var Fe=e.opacity(be)<1||ge>.01?Pe:function(ze,He,Xe){return Xe&&ze===He?ze:Math.abs(ze-He)>=2?Pe(ze):ze>He?Math.ceil(ze):Math.floor(ze)};Le=Fe(Le,fe,J),fe=Fe(fe,Le,J),ve=Fe(ve,Me,!J),Me=Fe(Me,ve,!J)}var qe=k(_.ensureSingle(Te,"path"),Z,F,H);if(qe.style("vector-effect","non-scaling-stroke").attr("d",isNaN((fe-Le)*(Me-ve))||ke&&D._context.staticPlot?"M0,0Z":"M"+Le+","+ve+"V"+Me+"H"+fe+"V"+ve+"Z").call(i.setClipUrl,S.layerClipId,D),!Z.uniformtext.mode&&K){var rt=i.makePointStyleFns(z);i.singlePointStyle(de,qe,z,rt,D)}(function(ze,He,Xe,Je,at,pt,xt,Ft,Dt,ot,it){var Et,Xt=He.xaxis,nr=He.yaxis,Ue=ze._fullLayout;function We(Wt,er,cr){return _.ensureSingle(Wt,"text").text(er).attr({class:"bartext bartext-"+Et,"text-anchor":"middle","data-notex":1}).call(i.font,cr).call(t.convertToTspans,ze)}var er,cr,_r,xr,dr,pr,Be=Je[0].trace,Qe="h"===Be.orientation,Ae=(cr=at,_r=Xt,xr=nr,dr=(pr=(er=Je)[0].trace).texttemplate?function(br,Nr,kr,Hr,an){var fn=Nr[0].trace,zn=_.castOption(fn,kr,"texttemplate");if(!zn)return"";var Nn,In,cn,jr,Lr="histogram"===fn.type,Xr="waterfall"===fn.type,Un="funnel"===fn.type,qr="h"===fn.orientation;function On(mr){return o(jr,jr.c2l(mr),!0).text}qr?(Nn="y",In=an,cn="x",jr=Hr):(Nn="x",In=Hr,cn="y",jr=an);var Tn=Nr[kr],rn={};rn.label=Tn.p,rn.labelLabel=rn[Nn+"Label"]=o(In,In.c2l(Tn.p),!0).text;var ar=_.castOption(fn,Tn.i,"text");(0===ar||ar)&&(rn.text=ar),rn.value=Tn.s,rn.valueLabel=rn[cn+"Label"]=On(Tn.s);var zt={};l(zt,fn,Tn.i),(Lr||void 0===zt.x)&&(zt.x=qr?rn.value:rn.label),(Lr||void 0===zt.y)&&(zt.y=qr?rn.label:rn.value),(Lr||void 0===zt.xLabel)&&(zt.xLabel=qr?rn.valueLabel:rn.labelLabel),(Lr||void 0===zt.yLabel)&&(zt.yLabel=qr?rn.labelLabel:rn.valueLabel),Xr&&(rn.delta=+Tn.rawS||Tn.s,rn.deltaLabel=On(rn.delta),rn.final=Tn.v,rn.finalLabel=On(rn.final),rn.initial=rn.final-rn.delta,rn.initialLabel=On(rn.initial)),Un&&(rn.value=Tn.s,rn.valueLabel=On(rn.value),rn.percentInitial=Tn.begR,rn.percentInitialLabel=_.formatPercent(Tn.begR),rn.percentPrevious=Tn.difR,rn.percentPreviousLabel=_.formatPercent(Tn.difR),rn.percentTotal=Tn.sumR,rn.percenTotalLabel=_.formatPercent(Tn.sumR));var Gt=_.castOption(fn,Tn.i,"customdata");return Gt&&(rn.customdata=Gt),_.texttemplateString(zn,rn,br._d3locale,zt,rn,fn._meta||{})}(Ue,er,cr,_r,xr):pr.textinfo?function(br,Nr,kr,Hr){var an=br[0].trace,fn="h"===an.orientation,zn="waterfall"===an.type,Nn="funnel"===an.type;function In(Gt){return o(fn?kr:Hr,+Gt,!0).text}var cn,Lr=br[Nr],Xr=an.textinfo.split("+"),Un=[],qr=function(Gt){return-1!==Xr.indexOf(Gt)};if(qr("label")&&Un.push(o(fn?Hr:kr,br[Nr].p,!0).text),qr("text")&&(0===(cn=_.castOption(an,Lr.i,"text"))||cn)&&Un.push(cn),zn){var Tn=+Lr.rawS||Lr.s,rn=Lr.v,Vn=rn-Tn;qr("initial")&&Un.push(In(Vn)),qr("delta")&&Un.push(In(Tn)),qr("final")&&Un.push(In(rn))}if(Nn){qr("value")&&Un.push(In(Lr.s));var ar=0;qr("percent initial")&&ar++,qr("percent previous")&&ar++,qr("percent total")&&ar++;var zt=ar>1;qr("percent initial")&&(cn=_.formatPercent(Lr.begR),zt&&(cn+=" of initial"),Un.push(cn)),qr("percent previous")&&(cn=_.formatPercent(Lr.difR),zt&&(cn+=" of previous"),Un.push(cn)),qr("percent total")&&(cn=_.formatPercent(Lr.sumR),zt&&(cn+=" of total"),Un.push(cn))}return Un.join("<br>")}(er,cr,_r,xr):c.getValue(pr.text,cr),c.coerceString(v,dr));Et=function(Wt,er){var cr=c.getValue(Wt.textposition,er);return c.coerceEnumerated(f,cr)}(Be,at);var Oe=Je[at],Ie=!("stack"===ot.mode||"relative"===ot.mode)||Oe._outmost;if(Ae&&"none"!==Et&&(!Oe.isBlank&&pt!==xt&&Ft!==Dt||"auto"!==Et&&"inside"!==Et)){var et=Ue.font,ct=a.getBarColor(Je[at],Be),vt=a.getInsideTextFont(Be,at,et,ct),ft=a.getOutsideTextFont(Be,at,et),It=Xe.datum();Qe?"log"===Xt.type&&It.s0<=0&&(pt=Xt.range[0]<Xt.range[1]?0:Xt._length):"log"===nr.type&&It.s0<=0&&(Ft=nr.range[0]<nr.range[1]?nr._length:0);var ut,Ot,Rt,$e,yt,Bt=Math.abs(xt-pt)-2*x,Ut=Math.abs(Dt-Ft)-2*x;if("outside"===Et&&(Ie||Oe.hasB||(Et="inside")),"auto"===Et&&(Ie?(Et="inside",ut=We(Xe,Ae,yt=_.ensureUniformFontSize(ze,vt)),$e=(Ot=i.bBox(ut.node())).height,(Rt=Ot.width)>0&&$e>0&&(Rt<=Bt&&$e<=Ut||Rt<=Ut&&$e<=Bt||(Qe?Bt>=Rt*(Ut/$e):Ut>=$e*(Bt/Rt)))?Et="inside":(Et="outside",ut.remove(),ut=null)):Et="inside"),!ut){var Mt=(ut=We(Xe,Ae,yt=_.ensureUniformFontSize(ze,"outside"===Et?ft:vt))).attr("transform");if(ut.attr("transform",""),Rt=(Ot=i.bBox(ut.node())).width,$e=Ot.height,ut.attr("transform",Mt),Rt<=0||$e<=0)return void ut.remove()}var Nt,or=Be.textangle;(Nt="outside"===Et?function(Wt,er,cr,_r,xr,dr){var pr,br=!!dr.isHorizontal,Nr=!!dr.constrained,kr=dr.angle||0,Hr=xr.width,an=xr.height,fn=Math.abs(er-Wt),zn=Math.abs(_r-cr);pr=br?zn>2*x?x:0:fn>2*x?x:0;var Nn=1;Nr&&(Nn=br?Math.min(1,zn/an):Math.min(1,fn/Hr));var In=L(kr),cn=A(xr,In),jr=(br?cn.x:cn.y)/2,Lr=(xr.left+xr.right)/2,Xr=(xr.top+xr.bottom)/2,Un=(Wt+er)/2,qr=(cr+_r)/2,On=0,Tn=0,rn=br?b(er,Wt):b(cr,_r);return br?(Un=er-rn*pr,On=rn*jr):(qr=_r+rn*pr,Tn=-rn*jr),{textX:Lr,textY:Xr,targetX:Un,targetY:qr,anchorX:On,anchorY:Tn,scale:Nn,rotate:In}}(pt,xt,Ft,Dt,Ot,{isHorizontal:Qe,constrained:"both"===Be.constraintext||"outside"===Be.constraintext,angle:or}):I(pt,xt,Ft,Dt,Ot,{isHorizontal:Qe,constrained:"both"===Be.constraintext||"inside"===Be.constraintext,angle:or,anchor:Be.insidetextanchor})).fontSize=yt.size,p("histogram"===Be.type?"bar":Be.type,Nt,Ue),Oe.transform=Nt,k(ut,Ue,ot,it).attr("transform",_.getTextTransform(Nt))}else Xe.select("text").remove()})(D,S,Te,W,ue,Le,fe,ve,Me,F,H),S.layerClipId&&i.hideOutsideRangePoint(de,Te.select("text"),U,X,z.xcalendar,z.ycalendar)}),i.setClipUrl(te,!1===z.cliponaxis?null:S.layerClipId,D)});r.getComponentMethod("errorbars","plot")(D,Y,S,F)},toMoveInsideBar:I}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(y,$,ee){"use strict";function d(g,_,t,e,i){var r=_.c2p(e?g.s0:g.p0,!0),o=_.c2p(e?g.s1:g.p1,!0),n=t.c2p(e?g.p0:g.s0,!0),p=t.c2p(e?g.p1:g.s1,!0);return i?[(r+o)/2,(n+p)/2]:e?[o,(n+p)/2]:[(r+o)/2,p]}$.exports=function(g,_){var t,e=g.cd,i=g.xaxis,r=g.yaxis,o=e[0].trace,n="funnel"===o.type,p="h"===o.orientation,s=[];if(!1===_)for(t=0;t<e.length;t++)e[t].selected=0;else for(t=0;t<e.length;t++){var a=e[t],c="ct"in a?a.ct:d(a,i,r,p,n);_.contains(c,!1,t,g)?(s.push({pointNumber:t,x:i.c2d(a.x),y:r.c2d(a.y)}),a.selected=1):a.selected=0}return s}},{}],661:[function(y,$,ee){"use strict";$.exports=_;var d=y("../../lib").distinctVals,g=y("../../constants/numerical").BADNUM;function _(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var i=1/0,r=[],o=0;o<t.length;o++){for(var n=t[o],p=0;p<n.length;p++){var s=n[p];s.p!==g&&r.push(s.p)}n[0]&&n[0].width1&&(i=Math.min(n[0].width1,i))}this.positions=r;var a=d(r);this.distinctPositions=a.vals,this.minDiff=1===a.vals.length&&i!==1/0?i:Math.min(a.minDiff,i);var c=(e.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}_.prototype.put=function(t,e){var i=this.getLabel(t,e),r=this.bins[i]||0;return this.bins[i]=r+e,r},_.prototype.get=function(t,e){var i=this.getLabel(t,e);return this.bins[i]||0},_.prototype.getLabel=function(t,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?t:Math.round(t/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/color"),_=y("../../components/drawing"),t=y("../../lib"),e=y("../../registry"),i=y("./uniform_text").resizeText,r=y("./attributes"),o=r.textfont,n=r.insidetextfont,p=r.outsidetextfont,s=y("./helpers");function a(m,w,b){_.pointStyle(m.selectAll("path"),w,b),c(m,w,b)}function c(m,w,b){m.selectAll("text").each(function(k){var T=d.select(this),L=t.ensureUniformFontSize(b,u(T,k,w,b));_.font(T,L)})}function u(m,w,b,k){var T=k._fullLayout.font,L=b.textfont;if(m.classed("bartext-inside")){var A=x(w,b);L=v(b,w.i,T,A)}else m.classed("bartext-outside")&&(L=f(b,w.i,T));return L}function h(m,w,b){return l(o,m.textfont,w,b)}function v(m,w,b,k){var T=h(m,w,b);return(void 0===m._input.textfont||void 0===m._input.textfont.color||Array.isArray(m.textfont.color)&&void 0===m.textfont.color[w])&&(T={color:g.contrast(k),family:T.family,size:T.size}),l(n,m.insidetextfont,w,T)}function f(m,w,b){var k=h(m,w,b);return l(p,m.outsidetextfont,w,k)}function l(m,w,b,k){var T=s.getValue((w=w||{}).family,b),L=s.getValue(w.size,b),A=s.getValue(w.color,b);return{family:s.coerceString(m.family,T,k.family),size:s.coerceNumber(m.size,L,k.size),color:s.coerceColor(m.color,A,k.color)}}function x(m,w){return"waterfall"===w.type?w[m.dir].marker.color:m.mcc||m.mc||w.marker.color}$.exports={style:function(m){var w=d.select(m).selectAll("g.barlayer").selectAll("g.trace");i(m,w,"bar");var b=w.size(),k=m._fullLayout;w.style("opacity",function(T){return T[0].trace.opacity}).each(function(T){("stack"===k.barmode&&b>1||0===k.bargap&&0===k.bargroupgap&&!T[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),w.selectAll("g.points").each(function(T){a(d.select(this),T[0].trace,m)}),e.getComponentMethod("errorbars","style")(w)},styleTextPoints:c,styleOnSelect:function(m,w,b){var T,L,A,I,D,S,k=w[0].trace;k.selectedpoints?(L=k,A=m,_.selectedPointStyle((T=b).selectAll("path"),L),I=T.selectAll("text"),D=L,S=A,I.each(function(C){var R,F=d.select(this);if(C.selected){R=t.ensureUniformFontSize(S,u(F,C,D,S));var H=D.selected.textfont&&D.selected.textfont.color;H&&(R.color=H),_.font(F,R)}else _.selectedTextStyle(F,D)})):(a(b,k,m),e.getComponentMethod("errorbars","style")(b))},getInsideTextFont:v,getOutsideTextFont:f,getBarColor:x,resizeText:i}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("../../components/colorscale/helpers").hasColorscale,_=y("../../components/colorscale/defaults"),t=y("../../lib").coercePattern;$.exports=function(e,i,r,o,n){var p=r("marker.color",o),s=g(e,"marker");s&&_(e,i,n,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",d.defaultLine),g(e,"marker.line")&&_(e,i,n,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),t(r,"marker.pattern",p,s),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib");function _(t){return"_"+t+"Text_minsize"}$.exports={recordMinTextSize:function(t,e,i){if(i.uniformtext.mode){var r=_(t),o=i.uniformtext.minsize,n=e.scale*e.fontSize;e.hide=n<o,i[r]=i[r]||1/0,e.hide||(i[r]=Math.min(i[r],Math.max(n,o)))}},clearMinTextSize:function(t,e){e[_(t)]=void 0},resizeText:function(t,e,i){var r=t._fullLayout,o=r["_"+i+"Text_minsize"];if(o){var n,p="hide"===r.uniformtext.mode;switch(i){case"funnelarea":case"pie":case"sunburst":n="g.slice";break;case"treemap":case"icicle":n="g.slice, g.pathbar";break;default:n="g.points > g.point"}e.selectAll(n).each(function(s){var a=s.transform;a&&(a.scale=p&&a.hide?0:o/a.fontSize,d.select(this).select("text").attr("transform",g.getTextTransform(a)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../lib/extend").extendFlat,_=y("../scatterpolar/attributes"),t=y("../bar/attributes");$.exports={r:_.r,theta:_.theta,r0:_.r0,dr:_.dr,theta0:_.theta0,dtheta:_.dtheta,thetaunit:_.thetaunit,base:g({},t.base,{}),offset:g({},t.offset,{}),width:g({},t.width,{}),text:g({},t.text,{}),hovertext:g({},t.hovertext,{}),marker:t.marker,hoverinfo:_.hoverinfo,hovertemplate:d(),selected:t.selected,unselected:t.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/helpers").hasColorscale,g=y("../../components/colorscale/calc"),_=y("../bar/arrays_to_calcdata"),t=y("../bar/cross_trace_calc").setGroupPositions,e=y("../scatter/calc_selection"),i=y("../../registry").traceIs,r=y("../../lib").extendFlat;$.exports={calc:function(o,n){for(var p=o._fullLayout,s=n.subplot,c=p[s].angularaxis,u=p[s].radialaxis.makeCalcdata(n,"r"),h=c.makeCalcdata(n,"theta"),v=n._length,f=new Array(v),l=u,x=h,m=0;m<v;m++)f[m]={p:x[m],s:l[m]};function w(b){var k=n[b];void 0!==k&&(n["_"+b]=Array.isArray(k)?c.makeCalcdata(n,b):c.d2c(k,n.thetaunit))}return"linear"===c.type&&(w("width"),w("offset")),d(n,"marker")&&g(o,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),d(n,"marker.line")&&g(o,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),_(f,n),e(f,n),f},crossTraceCalc:function(o,n,p){for(var s=o.calcdata,a=[],c=0;c<s.length;c++){var u=s[c],h=u[0].trace;!0===h.visible&&i(h,"bar")&&h.subplot===p&&a.push(u)}var v=r({},n.radialaxis,{_id:"x"});t(o,n.angularaxis,v,a,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatterpolar/defaults").handleRThetaDefaults,_=y("../bar/style_defaults"),t=y("./attributes");$.exports=function(e,i,r,o){function n(p,s){return d.coerce(e,i,t,p,s)}g(e,i,o,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),_(e,i,n,r,o),d.coerceSelectionMarkerOpacity(i,n)):i.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(y,$,ee){"use strict";var d=y("../../components/fx"),g=y("../../lib"),_=y("../bar/hover").getTraceColor,t=g.fillText,e=y("../scatterpolar/hover").makeHoverPointText,i=y("../../plots/polar/helpers").isPtInsidePolygon;$.exports=function(r,o,n){var p=r.cd,s=p[0].trace,a=r.subplot,c=a.radialAxis,h=a.vangles,v=h?i:g.isPtInsideSector,f=r.maxHoverDistance,l=a.angularAxis._period||2*Math.PI,x=Math.abs(c.g2p(Math.sqrt(o*o+n*n))),m=Math.atan2(n,o);if(c.range[0]>c.range[1]&&(m+=Math.PI),d.getClosest(p,function(k){return v(x,m,[k.rp0,k.rp1],[k.thetag0,k.thetag1],h)?f+Math.min(1,Math.abs(k.thetag1-k.thetag0)/l)-1+(k.rp1-x)/(k.rp1-k.rp0)-1:1/0},r),!1!==r.index){var w=p[r.index];r.x0=r.x1=w.ct[0],r.y0=r.y1=w.ct[1];var b=g.extendFlat({},w,{r:w.s,theta:w.p});return t(w,s,r),e(b,s,a,r),r.hovertemplate=s.hovertemplate,r.color=_(s,w),r.xLabelVal=r.yLabelVal=void 0,w.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"barpolar",basePlotModule:y("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("../scatterpolar/format_labels"),style:y("../bar/style").style,styleOnSelect:y("../bar/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(y,$,ee){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t,e){var i,r={};function o(s,a){return d.coerce(_[i]||{},t[i],g,s,a)}for(var n=0;n<e.length;n++){var p=e[n];"barpolar"===p.type&&!0===p.visible&&(r[i=p.subplot]||(o("barmode"),o("bargap"),r[i]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("fast-isnumeric"),_=y("../../lib"),t=y("../../components/drawing"),e=y("../../plots/polar/helpers");$.exports=function(i,r,o){var h,v,f,n=r.xaxis,p=r.yaxis,s=r.radialAxis,a=r.angularAxis,c=(v=(h=r).cxx,f=h.cyy,h.vangles?function(l,x,m,w){var b,k;_.angleDelta(m,w)>0?(b=m,k=w):(b=w,k=m);var T=[e.findEnclosingVertexAngles(b,h.vangles)[0],(b+k)/2,e.findEnclosingVertexAngles(k,h.vangles)[1]];return e.pathPolygonAnnulus(l,x,b,k,T,v,f)}:function(l,x,m,w){return _.pathAnnulus(l,x,m,w,v,f)}),u=r.layers.frontplot.select("g.barlayer");_.makeTraceGroups(u,o,"trace bars").each(function(){var h=d.select(this),v=_.ensureSingle(h,"g","points").selectAll("g.point").data(_.identity);v.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),v.exit().remove(),v.each(function(f){var l,x=d.select(this),m=f.rp0=s.c2p(f.s0),w=f.rp1=s.c2p(f.s1),b=f.thetag0=a.c2g(f.p0),k=f.thetag1=a.c2g(f.p1);if(g(m)&&g(w)&&g(b)&&g(k)&&m!==w&&b!==k){var T=s.c2g(f.s1),L=(b+k)/2;f.ct=[n.c2p(T*Math.cos(L)),p.c2p(T*Math.sin(L))],l=c(m,w,b,k)}else l="M0,0Z";_.ensureSingle(x,"path").attr("d",l)}),t.setClipUrl(h,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,i)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(y,$,ee){"use strict";var d=y("../scatter/attributes"),g=y("../bar/attributes"),_=y("../../components/color/attributes"),t=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,i=y("../../lib/extend").extendFlat,r=d.marker,o=r.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:t("x"),yhoverformat:t("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:i({},r.symbol,{arrayOk:!1,editType:"plot"}),opacity:i({},r.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:i({},r.size,{arrayOk:!1,editType:"calc"}),color:i({},r.color,{arrayOk:!1,editType:"style"}),line:{color:i({},o.color,{arrayOk:!1,dflt:_.defaultLine,editType:"style"}),width:i({},o.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:{marker:d.selected.marker,editType:"style"},unselected:{marker:d.unselected.marker,editType:"style"},text:i({},d.text,{}),hovertext:i({},d.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../plots/cartesian/axes"),_=y("../../plots/cartesian/align_period"),t=y("../../lib"),e=y("../../constants/numerical").BADNUM,i=t._;$.exports=function(v,f){var l,x,m,w,b,k,T,L=v._fullLayout,A=g.getFromId(v,f.xaxis||"x"),I=g.getFromId(v,f.yaxis||"y"),D=[],S="violin"===f.type?"_numViolins":"_numBoxes";"h"===f.orientation?(m=A,w="x",b=I,k="y",T=!!f.yperiodalignment):(m=I,w="y",b=A,k="x",T=!!f.xperiodalignment);var C,R,F,H,U,X,Z=function(Xe,Je,at,pt){var xt,Ft=Je+"0"in Xe;if(Je in Xe||Ft&&"d"+Je in Xe){var ot=at.makeCalcdata(Xe,Je);return[_(Xe,at,Je,ot).vals,ot]}xt=Ft?Xe[Je+"0"]:"name"in Xe&&("category"===at.type||d(Xe.name)&&-1!==["linear","log"].indexOf(at.type)||t.isDateTime(Xe.name)&&"date"===at.type)?Xe.name:pt;for(var it="multicategory"===at.type?at.r2c_just_indices(xt):at.d2c(xt,0,Xe[Je+"calendar"]),Et=Xe._length,Xt=new Array(Et),nr=0;nr<Et;nr++)Xt[nr]=it;return[Xt]}(f,k,b,L[S]),Y=Z[0],W=Z[1],te=t.distinctVals(Y,b),z=te.vals,N=te.minDiff/2,V="all"===(f.boxpoints||f.points)?t.identity:function(Xe){return Xe.v<C.lf||Xe.v>C.uf};if(f._hasPreCompStats){var Q=f[w],j=function(Xe){return m.d2c((f[Xe]||[])[l])},J=1/0,K=-1/0;for(l=0;l<f._length;l++){var re=Y[l];if(d(re)){if((C={}).pos=C[k]=re,T&&W&&(C.orig_p=W[l]),C.q1=j("q1"),C.med=j("median"),C.q3=j("q3"),R=[],Q&&t.isArrayOrTypedArray(Q[l]))for(x=0;x<Q[l].length;x++)(X=m.d2c(Q[l][x]))!==e&&(o(U={v:X,i:[l,x]},f,[l,x]),R.push(U));if(C.pts=R.sort(n),H=(F=C[w]=R.map(p)).length,C.med!==e&&C.q1!==e&&C.q3!==e&&C.med>=C.q1&&C.q3>=C.med){var ie=j("lowerfence");C.lf=ie!==e&&ie<=C.q1?ie:s(C,F,H);var ce=j("upperfence");C.uf=ce!==e&&ce>=C.q3?ce:a(C,F,H);var se=j("mean");C.mean=se!==e?se:H?t.mean(F,H):(C.q1+C.q3)/2;var de=j("sd");C.sd=se!==e&&de>=0?de:H?t.stdev(F,H,C.mean):C.q3-C.q1,C.lo=c(C),C.uo=u(C);var ue=j("notchspan");ue=ue!==e&&ue>0?ue:h(C,H),C.ln=C.med-ue,C.un=C.med+ue;var ge=C.lf,be=C.uf;f.boxpoints&&F.length&&(ge=Math.min(ge,F[0]),be=Math.max(be,F[H-1])),f.notched&&(ge=Math.min(ge,C.ln),be=Math.max(be,C.un)),C.min=ge,C.max=be}else{var Te;t.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+C.q1,"median = "+C.med,"q3 = "+C.q3].join("\n")),C.med=Te=C.med!==e?C.med:C.q1!==e?C.q3!==e?(C.q1+C.q3)/2:C.q1:C.q3!==e?C.q3:0,C.q1=C.q3=Te,C.lf=C.uf=Te,C.mean=C.sd=Te,C.ln=C.un=Te,C.min=C.max=Te}J=Math.min(J,C.min),K=Math.max(K,C.max),C.pts2=R.filter(V),D.push(C)}}f._extremes[m._id]=g.findExtremes(m,[J,K],{padded:!0})}else{var we=m.makeCalcdata(f,w),Le=function(Xe,Je){for(var at=Xe.length,pt=new Array(at+1),xt=0;xt<at;xt++)pt[xt]=Xe[xt]-Je;return pt[at]=Xe[at-1]+Je,pt}(z,N),fe=z.length,ve=function(Xe){for(var Je=new Array(Xe),at=0;at<Xe;at++)Je[at]=[];return Je}(fe);for(l=0;l<f._length;l++)if(d(X=we[l])){var Me=t.findBin(Y[l],Le);Me>=0&&Me<fe&&(o(U={v:X,i:l},f,l),ve[Me].push(U))}var ke=1/0,Ce=-1/0,Pe=f.quartilemethod,Fe="exclusive"===Pe,qe="inclusive"===Pe;for(l=0;l<fe;l++)if(ve[l].length>0){var rt,ze;(C={}).pos=C[k]=z[l],R=C.pts=ve[l].sort(n),H=(F=C[w]=R.map(p)).length,C.min=F[0],C.max=F[H-1],C.mean=t.mean(F,H),C.sd=t.stdev(F,H,C.mean),C.med=t.interp(F,.5),H%2&&(Fe||qe)?(Fe?(rt=F.slice(0,H/2),ze=F.slice(H/2+1)):qe&&(rt=F.slice(0,H/2+1),ze=F.slice(H/2)),C.q1=t.interp(rt,.5),C.q3=t.interp(ze,.5)):(C.q1=t.interp(F,.25),C.q3=t.interp(F,.75)),C.lf=s(C,F,H),C.uf=a(C,F,H),C.lo=c(C),C.uo=u(C);var He=h(C,H);C.ln=C.med-He,C.un=C.med+He,ke=Math.min(ke,C.ln),Ce=Math.max(Ce,C.un),C.pts2=R.filter(V),D.push(C)}f._extremes[m._id]=g.findExtremes(m,f.notched?we.concat([ke,Ce]):we,{padded:!0})}return function(Xe,Je){if(t.isArrayOrTypedArray(Je.selectedpoints))for(var at=0;at<Xe.length;at++){for(var pt=Xe[at].pts||[],xt={},Ft=0;Ft<pt.length;Ft++)xt[pt[Ft].i]=Ft;t.tagSelected(pt,Je,xt)}}(D,f),D.length>0?(D[0].t={num:L[S],dPos:N,posLetter:k,valLetter:w,labels:{med:i(v,"median:"),min:i(v,"min:"),q1:i(v,"q1:"),q3:i(v,"q3:"),max:i(v,"max:"),mean:i(v,"sd"===f.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:i(v,"lower fence:"),uf:i(v,"upper fence:")}},L[S]++,D):[{t:{empty:!0}}]};var r={text:"tx",hovertext:"htx"};function o(v,f,l){for(var x in r)t.isArrayOrTypedArray(f[x])&&(Array.isArray(l)?t.isArrayOrTypedArray(f[x][l[0]])&&(v[r[x]]=f[x][l[0]][l[1]]):v[r[x]]=f[x][l])}function n(v,f){return v.v-f.v}function p(v){return v.v}function s(v,f,l){return 0===l?v.q1:Math.min(v.q1,f[Math.min(t.findBin(2.5*v.q1-1.5*v.q3,f,!0)+1,l-1)])}function a(v,f,l){return 0===l?v.q3:Math.max(v.q3,f[Math.max(t.findBin(2.5*v.q3-1.5*v.q1,f),0)])}function c(v){return 4*v.q1-3*v.q3}function u(v){return 4*v.q3-3*v.q1}function h(v,f){return 0===f?0:1.57*(v.q3-v.q1)/Math.sqrt(f)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../lib"),_=y("../../plots/cartesian/constraints").getAxisGroup,t=["v","h"];function e(i,r,o,n){var p,s,a,c=r.calcdata,u=r._fullLayout,h=n._id,v=h.charAt(0),f=[],l=0;for(p=0;p<o.length;p++)for(a=c[o[p]],s=0;s<a.length;s++)f.push(n.c2l(a[s].pos,!0)),l+=(a[s].pts2||[]).length;if(f.length){var x=g.distinctVals(f);"category"!==n.type&&"multicategory"!==n.type||(x.minDiff=1);var m=x.minDiff/2;d.minDtick(n,x.minDiff,x.vals[0],!0);var w=u["violin"===i?"_numViolins":"_numBoxes"],b="group"===u[i+"mode"]&&w>1,k=1-u[i+"gap"],T=1-u[i+"groupgap"];for(p=0;p<o.length;p++){var L,A,I,D,S,C,R=(a=c[o[p]])[0].trace,F=a[0].t,H=R.width,U=R.side;if(H)L=A=D=H/2,I=0;else if(L=m,b){var X=_(u,n._id)+R.orientation,Y=Object.keys(((u._alignmentOpts[X]||{})[R.alignmentgroup]||{}).offsetGroups||{}).length,W=Y||w;A=L*k*T/W,I=2*L*(((Y?R._offsetIndex:F.num)+.5)/W-.5)*k,D=L*k/W}else A=L*k*T,I=0,D=L;F.dPos=L,F.bPos=I,F.bdPos=A,F.wHover=D;var te,z,N,V,Q,j,J=I+A,K=Boolean(H);if("positive"===U?(S=L*(H?1:.5),te=J,C=te=I):"negative"===U?(S=te=I,C=L*(H?1:.5),z=J):(S=C=L,te=z=J),(R.boxpoints||R.points)&&l>0){var re=R.pointpos,ie=R.jitter,ce=R.marker.size/2,se=0;re+ie>=0&&((se=J*(re+ie))>S?(K=!0,Q=ce,N=se):se>te&&(Q=ce,N=S)),se<=S&&(N=S);var de=0;re-ie<=0&&((de=-J*(re-ie))>C?(K=!0,j=ce,V=de):de>z&&(j=ce,V=C)),de<=C&&(V=C)}else N=S,V=C;var ue=new Array(a.length);for(s=0;s<a.length;s++)ue[s]=a[s].pos;R._extremes[h]=d.findExtremes(n,ue,{padded:K,vpadminus:V,vpadplus:N,vpadLinearized:!0,ppadminus:{x:j,y:Q}[v],ppadplus:{x:Q,y:j}[v]})}}}$.exports={crossTraceCalc:function(i,r){for(var o=i.calcdata,n=r.xaxis,p=r.yaxis,s=0;s<t.length;s++){for(var a=t[s],c="h"===a?p:n,u=[],h=0;h<o.length;h++){var v=o[h],l=v[0].trace;!0!==l.visible||"box"!==l.type&&"candlestick"!==l.type||v[0].t.empty||(l.orientation||"v")!==a||l.xaxis!==n._id||l.yaxis!==p._id||u.push(h)}e("box",i,u,c)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry"),_=y("../../components/color"),t=y("../scatter/period_defaults"),e=y("../bar/defaults").handleGroupingDefaults,i=y("../../plots/cartesian/axis_autotype"),r=y("./attributes");function o(p,s,a,c){function u(U){var X=0;return U&&U.length&&(X+=1,d.isArrayOrTypedArray(U[0])&&U[0].length&&(X+=1)),X}function h(U){return d.validate(p[U],r[U])}var v,f=a("y"),l=a("x");if("box"===s.type){var x=a("q1"),m=a("median"),w=a("q3");s._hasPreCompStats=x&&x.length&&m&&m.length&&w&&w.length,v=Math.min(d.minRowLength(x),d.minRowLength(m),d.minRowLength(w))}var b,k,T=u(f),L=u(l),A=T&&d.minRowLength(f),I=L&&d.minRowLength(l),D=c.calendar,S={autotypenumbers:c.autotypenumbers};if(s._hasPreCompStats)switch(String(L)+String(T)){case"00":var C=h("x0")||h("dx");b=!h("y0")&&!h("dy")||C?"v":"h",k=v;break;case"10":b="v",k=Math.min(v,I);break;case"20":b="h",k=Math.min(v,l.length);break;case"01":b="h",k=Math.min(v,A);break;case"02":b="v",k=Math.min(v,f.length);break;case"12":b="v",k=Math.min(v,I,f.length);break;case"21":b="h",k=Math.min(v,l.length,A);break;case"11":k=0;break;case"22":var R,F=!1;for(R=0;R<l.length;R++)if("category"===i(l[R],D,S)){F=!0;break}if(F)b="v",k=Math.min(v,I,f.length);else{for(R=0;R<f.length;R++)if("category"===i(f[R],D,S)){F=!0;break}F?(b="h",k=Math.min(v,l.length,A)):(b="v",k=Math.min(v,I,f.length))}}else T>0?(b="v",k=L>0?Math.min(I,A):Math.min(A)):L>0?(b="h",k=Math.min(I)):k=0;if(k){s._length=k;var H=a("orientation",b);s._hasPreCompStats?"v"===H&&0===L?(a("x0",0),a("dx",1)):"h"===H&&0===T&&(a("y0",0),a("dy",1)):"v"===H&&0===L?a("x0"):"h"===H&&0===T&&a("y0"),g.getComponentMethod("calendars","handleTraceDefaults")(p,s,["x","y"],c)}else s.visible=!1}function n(p,s,a,c){var u=c.prefix,h=d.coerce2(p,s,r,"marker.outliercolor"),v=a("marker.line.outliercolor"),f="outliers";s._hasPreCompStats?f="all":(h||v)&&(f="suspectedoutliers");var l=a(u+"points",f);l?(a("jitter","all"===l?.3:0),a("pointpos","all"===l?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.color",s.line.color),a("marker.line.color"),a("marker.line.width"),"suspectedoutliers"===l&&(a("marker.line.outliercolor",s.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete s.marker;var x=a("hoveron");"all"!==x&&-1===x.indexOf("points")||a("hovertemplate"),d.coerceSelectionMarkerOpacity(s,a)}$.exports={supplyDefaults:function(p,s,a,c){function u(w,b){return d.coerce(p,s,r,w,b)}if(o(p,s,u,c),!1!==s.visible){t(p,s,c,u),u("xhoverformat"),u("yhoverformat");var h=s._hasPreCompStats;h&&(u("lowerfence"),u("upperfence")),u("line.color",(p.marker||{}).color||a),u("line.width"),u("fillcolor",_.addOpacity(s.line.color,.5));var v=!1;if(h){var f=u("mean"),l=u("sd");f&&f.length&&(v=!0,l&&l.length&&(v="sd"))}u("boxmean",v),u("whiskerwidth"),u("width"),u("quartilemethod");var x=!1;if(h){var m=u("notchspan");m&&m.length&&(x=!0)}else d.validate(p.notchwidth,r.notchwidth)&&(x=!0);u("notched",x)&&u("notchwidth"),n(p,s,u,{prefix:"box"})}},crossTraceDefaults:function(p,s){var c;function u(f){return d.coerce(c._input,c,r,f)}for(var h=0;h<p.length;h++){var v=(c=p[h]).type;"box"!==v&&"violin"!==v||"group"===s[v+"mode"]&&e(c._input,c,s,u)}},handleSampleDefaults:o,handlePointsDefaults:n}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(y,$,ee){"use strict";$.exports=function(d,g){return g.hoverOnBox&&(d.hoverOnBox=g.hoverOnBox),"xVal"in g&&(d.x=g.xVal),"yVal"in g&&(d.y=g.yVal),g.xa&&(d.xaxis=g.xa),g.ya&&(d.yaxis=g.ya),d}},{}],678:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../lib"),_=y("../../components/fx"),t=y("../../components/color"),e=g.fillText;function i(o,n,p,s){var a,c,u,h,v,f,l,x,m,w,b,k,T,L,A=o.cd,I=o.xa,D=o.ya,S=A[0].trace,C=A[0].t,R="violin"===S.type,F=[],H=C.bdPos,U=C.wHover,X=function(se){return u.c2l(se.pos)+C.bPos-u.c2l(f)};R&&"both"!==S.side?("positive"===S.side&&(m=function(se){var de=X(se);return _.inbox(de,de+U,w)},k=H,T=0),"negative"===S.side&&(m=function(se){var de=X(se);return _.inbox(de-U,de,w)},k=0,T=H)):(m=function(se){var de=X(se);return _.inbox(de-U,de+U,w)},k=T=H),L=R?function(se){return _.inbox(se.span[0]-v,se.span[1]-v,w)}:function(se){return _.inbox(se.min-v,se.max-v,w)},"h"===S.orientation?(v=n,f=p,l=L,x=m,a="y",u=D,c="x",h=I):(v=p,f=n,l=m,x=L,a="x",u=I,c="y",h=D);var Z=Math.min(1,H/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function Y(se){return(l(se)+x(se))/2}w=o.maxHoverDistance-Z,b=o.maxSpikeDistance-Z;var W=_.getDistanceFunction(s,l,x,Y);if(_.getClosest(A,W,o),!1===o.index)return[];var te=A[o.index],z=S.line.color,N=(S.marker||{}).color;o.color=t.opacity(z)&&S.line.width?z:t.opacity(N)&&S.boxpoints?N:S.fillcolor,o[a+"0"]=u.c2p(te.pos+C.bPos-T,!0),o[a+"1"]=u.c2p(te.pos+C.bPos+k,!0),o[a+"LabelVal"]=void 0!==te.orig_p?te.orig_p:te.pos;var V=a+"Spike";o.spikeDistance=Y(te)*b/w,o[V]=u.c2p(te.pos,!0);var Q={},j=["med","q1","q3","min","max"];(S.boxmean||(S.meanline||{}).visible)&&j.push("mean"),(S.boxpoints||S.points)&&j.push("lf","uf");for(var J=0;J<j.length;J++){var K=j[J];if(K in te&&!(te[K]in Q)){Q[te[K]]=!0;var re=te[K],ie=h.c2p(re,!0),ce=g.extendFlat({},o);ce.attr=K,ce[c+"0"]=ce[c+"1"]=ie,ce[c+"LabelVal"]=re,ce[c+"Label"]=(C.labels?C.labels[K]+" ":"")+d.hoverLabelText(h,re,S[c+"hoverformat"]),ce.hoverOnBox=!0,"mean"===K&&"sd"in te&&"sd"===S.boxmean&&(ce[c+"err"]=te.sd),o.name="",o.spikeDistance=void 0,o[V]=void 0,ce.hovertemplate=!1,F.push(ce)}}return F}function r(o,n,p){for(var s,a,c,u=o.cd,h=o.xa,v=o.ya,f=u[0].trace,l=h.c2p(n),x=v.c2p(p),m=_.quadrature(function(R){var F=Math.max(3,R.mrc||0);return Math.max(Math.abs(h.c2p(R.x)-l)-F,1-3/F)},function(R){var F=Math.max(3,R.mrc||0);return Math.max(Math.abs(v.c2p(R.y)-x)-F,1-3/F)}),w=!1,b=0;b<u.length;b++){a=u[b];for(var k=0;k<(a.pts||[]).length;k++){var T=m(c=a.pts[k]);T<=o.distance&&(o.distance=T,w=[b,k])}}if(!w)return!1;c=(a=u[w[0]]).pts[w[1]];var L=h.c2p(c.x,!0),A=v.c2p(c.y,!0),I=c.mrc||1;s=g.extendFlat({},o,{index:c.i,color:(f.marker||{}).color,name:f.name,x0:L-I,x1:L+I,y0:A-I,y1:A+I,spikeDistance:o.distance,hovertemplate:f.hovertemplate});var D,S=a.orig_p,C=void 0!==S?S:a.pos;return"h"===f.orientation?(D=v,s.xLabelVal=c.x,s.yLabelVal=C):(D=h,s.xLabelVal=C,s.yLabelVal=c.y),s[D._id.charAt(0)+"Spike"]=D.c2p(a.pos,!0),e(c,f,s),s}$.exports={hoverPoints:function(o,n,p,s){var a,c=o.cd[0].trace.hoveron,u=[];return-1!==c.indexOf("boxes")&&(u=u.concat(i(o,n,p,s))),-1!==c.indexOf("points")&&(a=r(o,n,p)),"closest"===s?a?[a]:u:(a&&u.push(a),u)},hoverOnBoxes:i,hoverOnPoints:r}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults").supplyLayoutDefaults,calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"box",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(y,$,ee){"use strict";$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("./layout_attributes");function t(e,i,r,o,n){for(var p=n+"Layout",s=!1,a=0;a<r.length;a++)if(d.traceIs(r[a],p)){s=!0;break}s&&(o(n+"mode"),o(n+"gap"),o(n+"groupgap"))}$.exports={supplyLayoutDefaults:function(e,i,r){t(0,0,r,function(o,n){return g.coerce(e,i,_,o,n)},"box")},_supply:t}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing");function t(r,o,n,p){var s,a,c="h"===n.orientation,u=o.val,h=o.pos,v=!!h.rangebreaks,f=p.bPos,l=p.wdPos||0,x=p.bPosPxOffset||0,m=n.whiskerwidth||0,w=n.notched||!1,b=w?1-2*n.notchwidth:1;Array.isArray(p.bdPos)?(s=p.bdPos[0],a=p.bdPos[1]):(s=p.bdPos,a=p.bdPos);var k=r.selectAll("path.box").data("violin"!==n.type||n.box.visible?g.identity:[]);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),k.exit().remove(),k.each(function(T){if(T.empty)return"M0,0Z";var L=h.c2l(T.pos+f,!0),A=h.l2p(L-s)+x,I=h.l2p(L+a)+x,D=v?(A+I)/2:h.l2p(L)+x,S=n.whiskerwidth,C=v?A*S+(1-S)*D:h.l2p(L-l)+x,R=v?I*S+(1-S)*D:h.l2p(L+l)+x,F=h.l2p(L-s*b)+x,H=h.l2p(L+a*b)+x,U=u.c2p(T.q1,!0),X=u.c2p(T.q3,!0),Z=g.constrain(u.c2p(T.med,!0),Math.min(U,X)+1,Math.max(U,X)-1),Y=void 0===T.lf||!1===n.boxpoints,W=u.c2p(Y?T.min:T.lf,!0),te=u.c2p(Y?T.max:T.uf,!0),z=u.c2p(T.ln,!0),N=u.c2p(T.un,!0);c?d.select(this).attr("d","M"+Z+","+F+"V"+H+"M"+U+","+A+"V"+I+(w?"H"+z+"L"+Z+","+H+"L"+N+","+I:"")+"H"+X+"V"+A+(w?"H"+N+"L"+Z+","+F+"L"+z+","+A:"")+"ZM"+U+","+D+"H"+W+"M"+X+","+D+"H"+te+(0===m?"":"M"+W+","+C+"V"+R+"M"+te+","+C+"V"+R)):d.select(this).attr("d","M"+F+","+Z+"H"+H+"M"+A+","+U+"H"+I+(w?"V"+z+"L"+H+","+Z+"L"+I+","+N:"")+"V"+X+"H"+A+(w?"V"+N+"L"+F+","+Z+"L"+A+","+z:"")+"ZM"+D+","+U+"V"+W+"M"+D+","+X+"V"+te+(0===m?"":"M"+C+","+W+"H"+R+"M"+C+","+te+"H"+R))})}function e(r,o,n,p){var s=o.x,a=o.y,c=p.bdPos,u=p.bPos,h=n.boxpoints||n.points;g.seedPseudoRandom();var v=r.selectAll("g.points").data(h?function(l){return l.forEach(function(x){x.t=p,x.trace=n}),l}:[]);v.enter().append("g").attr("class","points"),v.exit().remove();var f=v.selectAll("path").data(function(l){var x,m,w=l.pts2,b=Math.max((l.max-l.min)/10,l.q3-l.q1),k=1e-9*b,T=.01*b,L=[],A=0;if(n.jitter){if(0===b)for(A=1,L=new Array(w.length),x=0;x<w.length;x++)L[x]=1;else for(x=0;x<w.length;x++){var I=Math.max(0,x-5),D=w[I].v,S=Math.min(w.length-1,x+5),C=w[S].v;"all"!==h&&(w[x].v<l.lf?C=Math.min(C,l.lf):D=Math.max(D,l.uf));var R=Math.sqrt(T*(S-I)/(C-D+k))||0;R=g.constrain(Math.abs(R),0,1),L.push(R),A=Math.max(R,A)}m=2*n.jitter/(A||1)}for(x=0;x<w.length;x++){var F=w[x],H=F.v,U=n.jitter?m*L[x]*(g.pseudoRandom()-.5):0,X=l.pos+u+c*(n.pointpos+U);"h"===n.orientation?(F.y=X,F.x=H):(F.x=X,F.y=H),"suspectedoutliers"===h&&H<l.uo&&H>l.lo&&(F.so=!0)}return w});f.enter().append("path").classed("point",!0),f.exit().remove(),f.call(_.translatePoints,s,a)}function i(r,o,n,p){var s,a,c=o.val,u=o.pos,h=!!u.rangebreaks,v=p.bPos,f=p.bPosPxOffset||0,l=n.boxmean||(n.meanline||{}).visible;Array.isArray(p.bdPos)?(s=p.bdPos[0],a=p.bdPos[1]):(s=p.bdPos,a=p.bdPos);var x=r.selectAll("path.mean").data("box"===n.type&&n.boxmean||"violin"===n.type&&n.box.visible&&n.meanline.visible?g.identity:[]);x.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),x.exit().remove(),x.each(function(m){var w=u.c2l(m.pos+v,!0),b=u.l2p(w-s)+f,k=u.l2p(w+a)+f,T=h?(b+k)/2:u.l2p(w)+f,L=c.c2p(m.mean,!0),A=c.c2p(m.mean-m.sd,!0),I=c.c2p(m.mean+m.sd,!0);"h"===n.orientation?d.select(this).attr("d","M"+L+","+b+"V"+k+("sd"===l?"m0,0L"+A+","+T+"L"+L+","+b+"L"+I+","+T+"Z":"")):d.select(this).attr("d","M"+b+","+L+"H"+k+("sd"===l?"m0,0L"+T+","+A+"L"+b+","+L+"L"+T+","+I+"Z":""))})}$.exports={plot:function(r,o,n,p){var s=o.xaxis,a=o.yaxis;g.makeTraceGroups(p,n,"trace boxes").each(function(c){var u,h,v=d.select(this),f=c[0],l=f.t,x=f.trace;l.wdPos=l.bdPos*x.whiskerwidth,!0!==x.visible||l.empty?v.remove():("h"===x.orientation?(u=a,h=s):(u=s,h=a),t(v,{pos:u,val:h},x,l),e(v,{x:s,y:a},x,l),i(v,{pos:u,val:h},x,l))})},plotBoxAndWhiskers:t,plotPoints:e,plotBoxMean:i}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(y,$,ee){"use strict";$.exports=function(d,g){var _,t,e=d.cd,i=d.xaxis,r=d.yaxis,o=[];if(!1===g)for(_=0;_<e.length;_++)for(t=0;t<(e[_].pts||[]).length;t++)e[_].pts[t].selected=0;else for(_=0;_<e.length;_++)for(t=0;t<(e[_].pts||[]).length;t++){var n=e[_].pts[t],p=i.c2p(n.x),s=r.c2p(n.y);g.contains([p,s],null,n.i,d)?(o.push({pointNumber:n.i,x:i.c2d(n.x),y:r.c2d(n.y)}),n.selected=1):n.selected=0}return o}},{}],684:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/color"),_=y("../../components/drawing");$.exports={style:function(t,e,i){var r=i||d.select(t).selectAll("g.trace.boxes");r.style("opacity",function(o){return o[0].trace.opacity}),r.each(function(o){var n=d.select(this),p=o[0].trace,s=p.line.width;function a(h,v,f,l){h.style("stroke-width",v+"px").call(g.stroke,f).call(g.fill,l)}var c=n.selectAll("path.box");if("candlestick"===p.type)c.each(function(h){if(!h.empty){var v=d.select(this),f=p[h.dir];a(v,f.line.width,f.line.color,f.fillcolor),v.style("opacity",p.selectedpoints&&!h.selected?.3:1)}});else{a(c,s,p.line.color,p.fillcolor),n.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(g.stroke,p.line.color);var u=n.selectAll("path.point");_.pointStyle(u,p,t)}})},styleOnSelect:function(t,e,i){var r=e[0].trace,o=i.selectAll("path.point");r.selectedpoints?_.selectedPointStyle(o,r):_.pointStyle(o,r,t)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(y,$,ee){"use strict";var d=y("../../lib").extendFlat,g=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=y("../ohlc/attributes"),t=y("../box/attributes");function e(i){return{line:{color:d({},t.line.color,{dflt:i}),width:t.line.width,editType:"style"},fillcolor:t.fillcolor,editType:"style"}}$.exports={xperiod:_.xperiod,xperiod0:_.xperiod0,xperiodalignment:_.xperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),x:_.x,open:_.open,high:_.high,low:_.low,close:_.close,line:{width:d({},t.line.width,{}),editType:"style"},increasing:e(_.increasing.line.color.dflt),decreasing:e(_.decreasing.line.color.dflt),text:_.text,hovertext:_.hovertext,whiskerwidth:d({},t.whiskerwidth,{dflt:0}),hoverlabel:_.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../../plots/cartesian/align_period"),t=y("../ohlc/calc").calcCommon;function e(i,r,o,n){return{min:o,q1:Math.min(i,n),med:n,q3:Math.max(i,n),max:r}}$.exports=function(i,r){var o=i._fullLayout,n=g.getFromId(i,r.xaxis),p=g.getFromId(i,r.yaxis),s=n.makeCalcdata(r,"x"),a=_(r,n,"x",s).vals,c=t(i,r,s,a,p,e);return c.length?(d.extendFlat(c[0].t,{num:o._numBoxes,dPos:d.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),o._numBoxes++,c):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color"),_=y("../ohlc/ohlc_defaults"),t=y("../scatter/period_defaults"),e=y("./attributes");function i(r,o,n,p){var s=n(p+".line.color");n(p+".line.width",o.line.width),n(p+".fillcolor",g.addOpacity(s,.5))}$.exports=function(r,o,n,p){function s(a,c){return d.coerce(r,o,e,a,c)}_(r,o,s,p)?(t(r,o,p,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),i(0,o,s,"increasing"),i(0,o,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),p._requestRangeslider[o.xaxis]=!0):o.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"candlestick",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:y("./attributes"),layoutAttributes:y("../box/layout_attributes"),supplyLayoutDefaults:y("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:y("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("../box/plot").plot,layerName:"boxlayer",style:y("../box/style").style,hoverPoints:y("../ohlc/hover").hoverPoints,selectPoints:y("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(y,$,ee){"use strict";var d=y("./axis_defaults"),g=y("../../plot_api/plot_template");$.exports=function(_,t,e,i,r){var o,n,p,s;i("a")||(i("da"),i("a0")),i("b")||(i("db"),i("b0")),o=_,n=t,p=e,s=r,["aaxis","baxis"].forEach(function(a){var c=a.charAt(0),u=o[a]||{},h=g.newContainer(n,a);d(u,h,{tickfont:"x",id:c+"axis",letter:c,font:n.font,name:a,data:o[c],calendar:n.calendar,dfltColor:s,bgColor:p.paper_bgcolor,autotypenumbersDflt:p.autotypenumbers,fullLayout:p}),h._categories=h._categories||[],o[a]||"-"===u.type||(o[a]={type:u.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(y,$,ee){"use strict";var d=y("../../lib").isArrayOrTypedArray;$.exports=function(g){return function _(t,e){if(!d(t)||e>=10)return null;for(var i=1/0,r=-1/0,o=t.length,n=0;n<o;n++){var p=t[n];if(d(p)){var s=_(p,e+1);s&&(i=Math.min(s[0],i),r=Math.max(s[1],r))}else i=Math.min(p,i),r=Math.max(p,r)}return[i,r]}(g,0)}},{"../../lib":503}],691:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("./axis_attributes"),_=y("../../components/color/attributes"),t=d({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=_.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:g,baxis:g,font:t,color:{valType:"color",dflt:_.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(y,$,ee){"use strict";var d=y("../../lib").isArrayOrTypedArray;$.exports=function(g,_,t,e){var i,r,o,n,p,s,a,c,u,h,v,f,l,x=d(t)?"a":"b",m=("a"===x?g.aaxis:g.baxis).smoothing,w="a"===x?g.a2i:g.b2j,b="a"===x?t:e,k="a"===x?e:t,T="a"===x?_.a.length:_.b.length,L="a"===x?_.b.length:_.a.length,A=Math.floor("a"===x?g.b2j(k):g.a2i(k)),I="a"===x?function(te){return g.evalxy([],te,A)}:function(te){return g.evalxy([],A,te)};m&&(o=Math.max(0,Math.min(L-2,A)),n=A-o,r="a"===x?function(te,z){return g.dxydi([],te,o,z,n)}:function(te,z){return g.dxydj([],o,te,n,z)});var D=w(b[0]),S=w(b[1]),C=D<S?1:-1,R=1e-8*(S-D),F=C>0?Math.floor:Math.ceil,H=C>0?Math.ceil:Math.floor,U=C>0?Math.min:Math.max,X=C>0?Math.max:Math.min,Z=F(D+R),Y=H(S-R),W=[[a=I(D)]];for(i=Z;i*C<Y*C;i+=C)p=[],v=X(D,i),l=(f=U(S,i+C))-v,s=Math.max(0,Math.min(T-2,Math.floor(.5*(v+f)))),c=I(f),m&&(u=r(s,v-s),h=r(s,f-s),p.push([a[0]+u[0]/3*l,a[1]+u[1]/3*l]),p.push([c[0]-h[0]/3*l,c[1]-h[1]/3*l])),p.push(c),W.push(p),a=c;return W}},{"../../lib":503}],693:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("../../components/color/attributes"),_=y("../../plots/cartesian/layout_attributes"),t=y("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=y("../../plot_api/edit_types").overrideAll;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:d({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:_.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:d({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:t("tick label")},tickformatstops:e(_.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:g.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:d({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(y,$,ee){"use strict";var d=y("./attributes"),g=y("../../components/color").addOpacity,_=y("../../registry"),t=y("../../lib"),e=y("../../plots/cartesian/tick_value_defaults"),i=y("../../plots/cartesian/tick_label_defaults"),r=y("../../plots/cartesian/prefix_suffix_defaults"),o=y("../../plots/cartesian/category_order_defaults"),n=y("../../plots/cartesian/set_convert"),p=y("../../plots/cartesian/axis_autotype");$.exports=function(s,a,c){var u=c.letter,h=c.font||{},v=d[u+"axis"];function f(S,C){return t.coerce(s,a,v,S,C)}function l(S,C){return t.coerce2(s,a,v,S,C)}c.name&&(a._name=c.name,a._id=c.name),f("autotypenumbers",c.autotypenumbersDflt);var x=f("type");"-"===x&&(c.data&&function(S,C){if("-"===S.type){var R=S._id.charAt(0);S.type=p(C,S[R+"calendar"],{autotypenumbers:S.autotypenumbers})}}(a,c.data),"-"===a.type?a.type="linear":x=s.type=a.type),f("smoothing"),f("cheatertype"),f("showticklabels"),f("labelprefix",u+" = "),f("labelsuffix"),f("showtickprefix"),f("showticksuffix"),f("separatethousands"),f("tickformat"),f("exponentformat"),f("minexponent"),f("showexponent"),f("categoryorder"),f("tickmode"),f("tickvals"),f("ticktext"),f("tick0"),f("dtick"),"array"===a.tickmode&&(f("arraytick0"),f("arraydtick")),f("labelpadding"),a._hovertitle=u,"date"===x&&_.getComponentMethod("calendars","handleDefaults")(s,a,"calendar",c.calendar),n(a,c.fullLayout),a.c2p=t.identity;var m=f("color",c.dfltColor),w=m===s.color?m:h.color;f("title.text")&&(t.coerceFont(f,"title.font",{family:h.family,size:t.bigFont(h.size),color:w}),f("title.offset")),f("tickangle"),f("autorange",!a.isValidRange(s.range))&&f("rangemode"),f("range"),a.cleanRange(),f("fixedrange"),e(s,a,f,x),r(s,a,f,x,c),i(s,a,f,x,c),o(s,a,f,{data:c.data,dataAttr:u});var b=l("gridcolor",g(m,.3)),k=l("gridwidth"),T=f("showgrid");T||(delete a.gridcolor,delete a.gridwidth);var L=l("startlinecolor",m),A=l("startlinewidth",k);f("startline",a.showgrid||!!L||!!A)||(delete a.startlinecolor,delete a.startlinewidth);var I=l("endlinecolor",m),D=l("endlinewidth",k);return f("endline",a.showgrid||!!I||!!D)||(delete a.endlinecolor,delete a.endlinewidth),T?(f("minorgridcount"),f("minorgridwidth",k),f("minorgridcolor",g(b,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridWidth),"none"===a.showticklabels&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,f("tickmode"),a}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../lib").isArray1D,_=y("./cheater_basis"),t=y("./array_minmax"),e=y("./calc_gridlines"),i=y("./calc_labels"),r=y("./calc_clippath"),o=y("../heatmap/clean_2d_array"),n=y("./smooth_fill_2d_array"),p=y("../heatmap/convert_column_xyz"),s=y("./set_convert");$.exports=function(a,c){var u=d.getFromId(a,c.xaxis),h=d.getFromId(a,c.yaxis),v=c.aaxis,f=c.baxis,l=c.x,x=c.y,m=[];l&&g(l)&&m.push("x"),x&&g(x)&&m.push("y"),m.length&&p(c,v,f,"a","b",m);var w=c._a=c._a||c.a,b=c._b=c._b||c.b;l=c._x||c.x,x=c._y||c.y;var k={};c._cheater&&(l=_("index"===v.cheatertype?w.length:w,"index"===f.cheatertype?b.length:b,c.cheaterslope)),c._x=l=o(l),c._y=x=o(x),n(l,w,b),n(x,w,b),s(c),c.setScale();var A=t(l),I=t(x),D=.5*(A[1]-A[0]),S=.5*(A[1]+A[0]),C=.5*(I[1]-I[0]),R=.5*(I[1]+I[0]);return I=[R-1.3*C,R+1.3*C],c._extremes[u._id]=d.findExtremes(u,A=[S-1.3*D,S+1.3*D],{padded:!0}),c._extremes[h._id]=d.findExtremes(h,I,{padded:!0}),e(c,"a","b"),e(c,"b","a"),i(c,v),i(c,f),k.clipsegments=r(c._xctrl,c._yctrl,v,f),k.x=l,k.y=x,k.a=w,k.b=b,[k]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t){var e,i,r,o=[],n=!!_.smoothing,p=!!t.smoothing,s=d[0].length-1,a=d.length-1;for(e=0,i=[],r=[];e<=s;e++)i[e]=d[0][e],r[e]=g[0][e];for(o.push({x:i,y:r,bicubic:n}),e=0,i=[],r=[];e<=a;e++)i[e]=d[e][s],r[e]=g[e][s];for(o.push({x:i,y:r,bicubic:p}),e=s,i=[],r=[];e>=0;e--)i[s-e]=d[a][e],r[s-e]=g[a][e];for(o.push({x:i,y:r,bicubic:n}),e=a,i=[],r=[];e>=0;e--)i[a-e]=d[e][0],r[a-e]=g[e][0];return o.push({x:i,y:r,bicubic:p}),o}},{}],697:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../lib/extend").extendFlat;$.exports=function(_,t,e){var i,r,o,n,p,s,a,c,u,h,v,f,l,x,m=_["_"+t],w=_[t+"axis"],b=w._gridlines=[],k=w._minorgridlines=[],T=w._boundarylines=[],L=_["_"+e],A=_[e+"axis"];"array"===w.tickmode&&(w.tickvals=m.slice());var I=_._xctrl,D=_._yctrl,S=I[0].length,C=I.length,R=_._a.length,F=_._b.length;d.prepTicks(w),"array"===w.tickmode&&delete w.tickvals;var H=w.smoothing?3:1;function U(Z){var Y,W,te,z,N,V,Q,j,J,K,re,ie,ce=[],se=[],de={};if("b"===t)for(W=_.b2j(Z),te=Math.floor(Math.max(0,Math.min(F-2,W))),z=W-te,de.length=F,de.crossLength=R,de.xy=function(ue){return _.evalxy([],ue,W)},de.dxy=function(ue,ge){return _.dxydi([],ue,te,ge,z)},Y=0;Y<R;Y++)V=Math.min(R-2,Y),Q=Y-V,j=_.evalxy([],Y,W),A.smoothing&&Y>0&&(J=_.dxydi([],Y-1,te,0,z),ce.push(N[0]+J[0]/3),se.push(N[1]+J[1]/3),K=_.dxydi([],Y-1,te,1,z),ce.push(j[0]-K[0]/3),se.push(j[1]-K[1]/3)),ce.push(j[0]),se.push(j[1]),N=j;else for(Y=_.a2i(Z),V=Math.floor(Math.max(0,Math.min(R-2,Y))),Q=Y-V,de.length=R,de.crossLength=F,de.xy=function(ue){return _.evalxy([],Y,ue)},de.dxy=function(ue,ge){return _.dxydj([],V,ue,Q,ge)},W=0;W<F;W++)te=Math.min(F-2,W),z=W-te,j=_.evalxy([],Y,W),A.smoothing&&W>0&&(re=_.dxydj([],V,W-1,Q,0),ce.push(N[0]+re[0]/3),se.push(N[1]+re[1]/3),ie=_.dxydj([],V,W-1,Q,1),ce.push(j[0]-ie[0]/3),se.push(j[1]-ie[1]/3)),ce.push(j[0]),se.push(j[1]),N=j;return de.axisLetter=t,de.axis=w,de.crossAxis=A,de.value=Z,de.constvar=e,de.index=c,de.x=ce,de.y=se,de.smoothing=A.smoothing,de}function X(Z){var Y,W,te,z,N,V=[],Q=[],j={};if(j.length=m.length,j.crossLength=L.length,"b"===t)for(te=Math.max(0,Math.min(F-2,Z)),N=Math.min(1,Math.max(0,Z-te)),j.xy=function(J){return _.evalxy([],J,Z)},j.dxy=function(J,K){return _.dxydi([],J,te,K,N)},Y=0;Y<S;Y++)V[Y]=I[Z*H][Y],Q[Y]=D[Z*H][Y];else for(W=Math.max(0,Math.min(R-2,Z)),z=Math.min(1,Math.max(0,Z-W)),j.xy=function(J){return _.evalxy([],Z,J)},j.dxy=function(J,K){return _.dxydj([],W,J,z,K)},Y=0;Y<C;Y++)V[Y]=I[Y][Z*H],Q[Y]=D[Y][Z*H];return j.axisLetter=t,j.axis=w,j.crossAxis=A,j.value=m[Z],j.constvar=e,j.index=Z,j.x=V,j.y=Q,j.smoothing=A.smoothing,j}if("array"===w.tickmode){for(n=5e-15,s=(p=[Math.floor((m.length-1-w.arraytick0)/w.arraydtick*(1+n)),Math.ceil(-w.arraytick0/w.arraydtick/(1+n))].sort(function(Z,Y){return Z-Y}))[0]-1,a=p[1]+1,c=s;c<a;c++)(r=w.arraytick0+w.arraydtick*c)<0||r>m.length-1||b.push(g(X(r),{color:w.gridcolor,width:w.gridwidth}));for(c=s;c<a;c++)if(o=w.arraytick0+w.arraydtick*c,v=Math.min(o+w.arraydtick,m.length-1),!(o<0||o>m.length-1||v<0||v>m.length-1))for(f=m[o],l=m[v],i=0;i<w.minorgridcount;i++)(x=v-o)<=0||(h=f+(l-f)*(i+1)/(w.minorgridcount+1)*(w.arraydtick/x))<m[0]||h>m[m.length-1]||k.push(g(U(h),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&T.push(g(X(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&T.push(g(X(m.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(n=5e-15,s=(p=[Math.floor((m[m.length-1]-w.tick0)/w.dtick*(1+n)),Math.ceil((m[0]-w.tick0)/w.dtick/(1+n))].sort(function(Z,Y){return Z-Y}))[0],a=p[1],c=s;c<=a;c++)b.push(g(U(u=w.tick0+w.dtick*c),{color:w.gridcolor,width:w.gridwidth}));for(c=s-1;c<a+1;c++)for(u=w.tick0+w.dtick*c,i=0;i<w.minorgridcount;i++)(h=u+w.dtick*(i+1)/(w.minorgridcount+1))<m[0]||h>m[m.length-1]||k.push(g(U(h),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&T.push(g(U(m[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&T.push(g(U(m[m.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../lib/extend").extendFlat;$.exports=function(_,t){var e,i,r,o=t._labels=[],n=t._gridlines;for(e=0;e<n.length;e++)r=n[e],-1!==["start","both"].indexOf(t.showticklabels)&&(i=d.tickText(t,r.value),g(i,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:r.xy(0),dxy:r.dxy(0,0),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:0===e,isLast:e===n.length-1}),o.push(i)),-1!==["end","both"].indexOf(t.showticklabels)&&(i=d.tickText(t,r.value),g(i,{endAnchor:!1,xy:r.xy(r.crossLength-1),dxy:r.dxy(r.crossLength-2,1),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:0===e,isLast:e===n.length-1}),o.push(i))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t){var e=d[0]-g[0],i=d[1]-g[1],r=_[0]-g[0],o=_[1]-g[1],n=Math.pow(e*e+i*i,.25),p=Math.pow(r*r+o*o,.25),s=(p*p*e-n*n*r)*t,a=(p*p*i-n*n*o)*t,c=p*(n+p)*3,u=n*(n+p)*3;return[[g[0]+(c&&s/c),g[1]+(c&&a/c)],[g[0]-(u&&s/u),g[1]-(u&&a/u)]]}},{}],700:[function(y,$,ee){"use strict";var d=y("../../lib").isArrayOrTypedArray;$.exports=function(g,_,t){var e,i,r,o,n,p,s=[],a=d(g)?g.length:g,c=d(_)?_.length:_,u=d(g)?g:null,h=d(_)?_:null;u&&(r=(u.length-1)/(u[u.length-1]-u[0])/(a-1)),h&&(o=(h.length-1)/(h[h.length-1]-h[0])/(c-1));var v=1/0,f=-1/0;for(i=0;i<c;i++)for(s[i]=[],n=h?(h[i]-h[0])*o:i/(c-1),e=0;e<a;e++)p=(u?(u[e]-u[0])*r:e/(a-1))-n*t,v=Math.min(p,v),f=Math.max(p,f),s[i][e]=p;var l=1/(f-v),x=-v*l;for(i=0;i<c;i++)for(e=0;e<a;e++)s[i][e]=l*s[i][e]+x;return s}},{"../../lib":503}],701:[function(y,$,ee){"use strict";var d=y("./catmull_rom"),g=y("../../lib").ensureArray;function _(t,e,i){return[(2*(-.5*i[0]+1.5*e[0])+t[0])/3,(2*(-.5*i[1]+1.5*e[1])+t[1])/3]}$.exports=function(t,e,i,r,o,n){var p,s,a,c,u,h,v,f,l,x,m=i[0].length,w=i.length,b=o?3*m-2:m,k=n?3*w-2:w;for(t=g(t,k),e=g(e,k),a=0;a<k;a++)t[a]=g(t[a],b),e[a]=g(e[a],b);for(s=0,c=0;s<w;s++,c+=n?3:1)for(u=t[c],h=e[c],v=i[s],f=r[s],p=0,a=0;p<m;p++,a+=o?3:1)u[a]=v[p],h[a]=f[p];if(o)for(s=0,c=0;s<w;s++,c+=n?3:1){for(p=1,a=3;p<m-1;p++,a+=3)l=d([i[s][p-1],r[s][p-1]],[i[s][p],r[s][p]],[i[s][p+1],r[s][p+1]],o),t[c][a-1]=l[0][0],e[c][a-1]=l[0][1],t[c][a+1]=l[1][0],e[c][a+1]=l[1][1];x=_([t[c][0],e[c][0]],[t[c][2],e[c][2]],[t[c][3],e[c][3]]),t[c][1]=x[0],e[c][1]=x[1],x=_([t[c][b-1],e[c][b-1]],[t[c][b-3],e[c][b-3]],[t[c][b-4],e[c][b-4]]),t[c][b-2]=x[0],e[c][b-2]=x[1]}if(n)for(a=0;a<b;a++){for(c=3;c<k-3;c+=3)l=d([t[c-3][a],e[c-3][a]],[t[c][a],e[c][a]],[t[c+3][a],e[c+3][a]],n),t[c-1][a]=l[0][0],e[c-1][a]=l[0][1],t[c+1][a]=l[1][0],e[c+1][a]=l[1][1];x=_([t[0][a],e[0][a]],[t[2][a],e[2][a]],[t[3][a],e[3][a]]),t[1][a]=x[0],e[1][a]=x[1],x=_([t[k-1][a],e[k-1][a]],[t[k-3][a],e[k-3][a]],[t[k-4][a],e[k-4][a]]),t[k-2][a]=x[0],e[k-2][a]=x[1]}if(o&&n)for(c=1;c<k;c+=(c+1)%3==0?2:1){for(a=3;a<b-3;a+=3)l=d([t[c][a-3],e[c][a-3]],[t[c][a],e[c][a]],[t[c][a+3],e[c][a+3]],o),t[c][a-1]=.5*(t[c][a-1]+l[0][0]),e[c][a-1]=.5*(e[c][a-1]+l[0][1]),t[c][a+1]=.5*(t[c][a+1]+l[1][0]),e[c][a+1]=.5*(e[c][a+1]+l[1][1]);x=_([t[c][0],e[c][0]],[t[c][2],e[c][2]],[t[c][3],e[c][3]]),t[c][1]=.5*(t[c][1]+x[0]),e[c][1]=.5*(e[c][1]+x[1]),x=_([t[c][b-1],e[c][b-1]],[t[c][b-3],e[c][b-3]],[t[c][b-4],e[c][b-4]]),t[c][b-2]=.5*(t[c][b-2]+x[0]),e[c][b-2]=.5*(e[c][b-2]+x[1])}return[t,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(y,$,ee){"use strict";$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(y,$,ee){"use strict";$.exports=function(d,g,_){return g&&_?function(t,e,i,r,o){var n,c,u;t||(t=[]),e*=3,i*=3;var h=r*r,v=1-r,f=v*v,l=v*r*2,x=-3*f,m=3*(f-l),w=3*(l-h),b=3*h,k=o*o,T=k*o,L=1-o,A=L*L,I=A*L;for(u=0;u<d.length;u++)n=x*(c=d[u])[i][e]+m*c[i][e+1]+w*c[i][e+2]+b*c[i][e+3],t[u]=I*n+3*(A*o*(x*c[i+1][e]+m*c[i+1][e+1]+w*c[i+1][e+2]+b*c[i+1][e+3])+L*k*(x*c[i+2][e]+m*c[i+2][e+1]+w*c[i+2][e+2]+b*c[i+2][e+3]))+T*(x*c[i+3][e]+m*c[i+3][e+1]+w*c[i+3][e+2]+b*c[i+3][e+3]);return t}:g?function(t,e,i,r,o){var n,s,a;t||(t=[]),e*=3;var c=r*r,u=1-r,h=u*u,v=u*r*2,f=-3*h,l=3*(h-v),x=3*(v-c),m=3*c,w=1-o;for(s=0;s<d.length;s++)n=f*(a=d[s])[i][e]+l*a[i][e+1]+x*a[i][e+2]+m*a[i][e+3],t[s]=w*n+o*(f*a[i+1][e]+l*a[i+1][e+1]+x*a[i+1][e+2]+m*a[i+1][e+3]);return t}:_?function(t,e,i,r,o){var n,c,u;t||(t=[]),i*=3;var h=o*o,v=h*o,f=1-o,l=f*f,x=l*f;for(c=0;c<d.length;c++)n=(u=d[c])[i][e+1]-u[i][e],t[c]=x*n+3*(l*o*(u[i+1][e+1]-u[i+1][e])+f*h*(u[i+2][e+1]-u[i+2][e]))+v*(u[i+3][e+1]-u[i+3][e]);return t}:function(t,e,i,r,o){var n,s,a;t||(t=[]);var c=1-o;for(s=0;s<d.length;s++)n=(a=d[s])[i][e+1]-a[i][e],t[s]=c*n+o*(a[i+1][e+1]-a[i+1][e]);return t}}},{}],704:[function(y,$,ee){"use strict";$.exports=function(d,g,_){return g&&_?function(t,e,i,r,o){var n,c,u;t||(t=[]),e*=3,i*=3;var h=r*r,v=h*r,f=1-r,l=f*f,x=l*f,m=o*o,w=1-o,b=w*w,k=w*o*2,T=-3*b,L=3*(b-k),A=3*(k-m),I=3*m;for(u=0;u<d.length;u++)n=T*(c=d[u])[i][e]+L*c[i+1][e]+A*c[i+2][e]+I*c[i+3][e],t[u]=x*n+3*(l*r*(T*c[i][e+1]+L*c[i+1][e+1]+A*c[i+2][e+1]+I*c[i+3][e+1])+f*h*(T*c[i][e+2]+L*c[i+1][e+2]+A*c[i+2][e+2]+I*c[i+3][e+2]))+v*(T*c[i][e+3]+L*c[i+1][e+3]+A*c[i+2][e+3]+I*c[i+3][e+3]);return t}:g?function(t,e,i,r,o){var n,c,u;t||(t=[]),e*=3;var h=o*o,v=h*o,f=1-o,l=f*f,x=l*f;for(c=0;c<d.length;c++)n=(u=d[c])[i+1][e]-u[i][e],t[c]=x*n+3*(l*o*(u[i+1][e+1]-u[i][e+1])+f*h*(u[i+1][e+2]-u[i][e+2]))+v*(u[i+1][e+3]-u[i][e+3]);return t}:_?function(t,e,i,r,o){var n,s,a;t||(t=[]),i*=3;var c=1-r,u=o*o,h=1-o,v=h*h,f=h*o*2,l=-3*v,x=3*(v-f),m=3*(f-u),w=3*u;for(s=0;s<d.length;s++)n=l*(a=d[s])[i][e]+x*a[i+1][e]+m*a[i+2][e]+w*a[i+3][e],t[s]=c*n+r*(l*a[i][e+1]+x*a[i+1][e+1]+m*a[i+2][e+1]+w*a[i+3][e+1]);return t}:function(t,e,i,r,o){var n,s,a;t||(t=[]);var c=1-r;for(s=0;s<d.length;s++)n=(a=d[s])[i+1][e]-a[i][e],t[s]=c*n+r*(a[i+1][e+1]-a[i][e+1]);return t}}},{}],705:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e){var i=g-2,r=_-2;return t&&e?function(o,n,p){var s,h,v;o||(o=[]);var f=Math.max(0,Math.min(Math.floor(n),i)),l=Math.max(0,Math.min(Math.floor(p),r)),x=Math.max(0,Math.min(1,n-f)),m=Math.max(0,Math.min(1,p-l));f*=3,l*=3;var w=x*x,b=w*x,k=1-x,T=k*k,L=T*k,A=m*m,I=A*m,D=1-m,S=D*D,C=S*D;for(v=0;v<d.length;v++)s=L*(h=d[v])[l][f]+3*(T*x*h[l][f+1]+k*w*h[l][f+2])+b*h[l][f+3],o[v]=C*s+3*(S*m*(L*h[l+1][f]+3*(T*x*h[l+1][f+1]+k*w*h[l+1][f+2])+b*h[l+1][f+3])+D*A*(L*h[l+2][f]+3*(T*x*h[l+2][f+1]+k*w*h[l+2][f+2])+b*h[l+2][f+3]))+I*(L*h[l+3][f]+3*(T*x*h[l+3][f+1]+k*w*h[l+3][f+2])+b*h[l+3][f+3]);return o}:t?function(o,n,p){o||(o=[]);var s,h,v,f=Math.max(0,Math.min(Math.floor(n),i)),l=Math.max(0,Math.min(Math.floor(p),r)),x=Math.max(0,Math.min(1,n-f)),m=Math.max(0,Math.min(1,p-l));f*=3;var w=x*x,b=w*x,k=1-x,T=k*k,L=T*k,A=1-m;for(h=0;h<d.length;h++)s=A*(v=d[h])[l][f]+m*v[l+1][f],o[h]=L*s+3*(T*x*(A*v[l][f+1]+m*v[l+1][f+1])+k*w*(A*v[l][f+2]+m*v[l+1][f+1]))+b*(A*v[l][f+3]+m*v[l+1][f+1]);return o}:e?function(o,n,p){o||(o=[]);var s,h,v,f=Math.max(0,Math.min(Math.floor(n),i)),l=Math.max(0,Math.min(Math.floor(p),r)),x=Math.max(0,Math.min(1,n-f)),m=Math.max(0,Math.min(1,p-l));l*=3;var w=m*m,b=w*m,k=1-m,T=k*k,L=T*k,A=1-x;for(h=0;h<d.length;h++)s=A*(v=d[h])[l][f]+x*v[l][f+1],o[h]=L*s+3*(T*m*(A*v[l+1][f]+x*v[l+1][f+1])+k*w*(A*v[l+2][f]+x*v[l+2][f+1]))+b*(A*v[l+3][f]+x*v[l+3][f+1]);return o}:function(o,n,p){o||(o=[]);var s,c,u,h=Math.max(0,Math.min(Math.floor(n),i)),v=Math.max(0,Math.min(Math.floor(p),r)),f=Math.max(0,Math.min(1,n-h)),l=Math.max(0,Math.min(1,p-v)),x=1-l,m=1-f;for(c=0;c<d.length;c++)s=m*(u=d[c])[v][h]+f*u[v][h+1],o[c]=x*s+l*(m*u[v+1][h]+f*u[v+1][h+1]);return o}}},{}],706:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./xy_defaults"),_=y("./ab_defaults"),t=y("./attributes"),e=y("../../components/color/attributes");$.exports=function(i,r,o,n){function p(a,c){return d.coerce(i,r,t,a,c)}r._clipPathId="clip"+r.uid+"carpet";var s=p("color",e.defaultLine);d.coerceFont(p,"font"),p("carpet"),_(i,r,n,p,s),r.a&&r.b?(r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0),g(i,r,p)||(r.visible=!1),r._cheater&&p("cheaterslope")):r.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),plot:y("./plot"),calc:y("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(y,$,ee){"use strict";$.exports=function(d,g){for(var _,t=d._fullData.length,e=0;e<t;e++){var i=d._fullData[e];if(i.index!==g.index&&"carpet"===i.type&&(_||(_=i),i.carpet===g.carpet))return i}return _}},{}],709:[function(y,$,ee){"use strict";$.exports=function(d,g,_){if(0===d.length)return"";var t,e=[],i=_?3:1;for(t=0;t<d.length;t+=i)e.push(d[t]+","+g[t]),_&&t<d.length-i&&(e.push("C"),e.push([d[t+1]+","+g[t+1],d[t+2]+","+g[t+2]+" "].join(" ")));return e.join(_?"":"L")}},{}],710:[function(y,$,ee){"use strict";var d=y("../../lib").isArrayOrTypedArray;$.exports=function(g,_,t){var e;for(d(g)?g.length>_.length&&(g=g.slice(0,_.length)):g=[],e=0;e<_.length;e++)g[e]=t(_[e]);return g}},{"../../lib":503}],711:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e,i){var r=e[0]*d.dpdx(g),o=e[1]*d.dpdy(_),n=1,p=1;if(i){var s=Math.sqrt(e[0]*e[0]+e[1]*e[1]),a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);p=Math.max(0,(e[0]*i[0]+e[1]*i[1])/s/a)}var u=180*Math.atan2(o,r)/Math.PI;return u<-90?(u+=180,n=-n):u>90&&(u-=180,n=-n),{angle:u,flip:n,p:d.c2p(t,g,_),offsetMultplier:p}}},{}],712:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("./map_1d_array"),t=y("./makepath"),e=y("./orient_text"),i=y("../../lib/svg_text_utils"),r=y("../../lib"),o=r.strRotate,n=r.strTranslate,p=y("../../constants/alignment");function s(v,f,l,x,m,w){var b="const-"+m+"-lines",k=l.selectAll("."+b).data(w);k.enter().append("path").classed(b,!0).style("vector-effect","non-scaling-stroke"),k.each(function(T){var L=T,I=L.y,D=_([],L.x,v.c2p),S=_([],I,f.c2p),C="M"+t(D,S,L.smoothing);d.select(this).attr("d",C).style("stroke-width",L.width).style("stroke",L.color).style("fill","none")}),k.exit().remove()}function a(v,f,l,x,m,w,b,k){var T=w.selectAll("text."+k).data(b);T.enter().append("text").classed(k,!0);var L=0,A={};return T.each(function(I,D){var S;if("auto"===I.axis.tickangle)S=e(x,f,l,I.xy,I.dxy);else{var C=(I.axis.tickangle+180)*Math.PI/180;S=e(x,f,l,I.xy,[Math.cos(C),Math.sin(C)])}D||(A={angle:S.angle,flip:S.flip});var R=(I.endAnchor?-1:1)*S.flip,F=d.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(g.font,I.font).text(I.text).call(i.convertToTspans,v),H=g.bBox(this);F.attr("transform",n(S.p[0],S.p[1])+o(S.angle)+n(I.axis.labelpadding*R,.3*H.height)),L=Math.max(L,H.width+I.axis.labelpadding)}),T.exit().remove(),A.maxExtent=L,A}$.exports=function(v,f,l,x){var m=f.xaxis,w=f.yaxis,b=v._fullLayout._clips;r.makeTraceGroups(x,l,"trace").each(function(k){var T=d.select(this),L=k[0],A=L.trace,I=A.aaxis,D=A.baxis,S=r.ensureSingle(T,"g","minorlayer"),C=r.ensureSingle(T,"g","majorlayer"),R=r.ensureSingle(T,"g","boundarylayer"),F=r.ensureSingle(T,"g","labellayer");T.style("opacity",A.opacity),s(m,w,C,0,"a",I._gridlines),s(m,w,C,0,"b",D._gridlines),s(m,w,S,0,"a",I._minorgridlines),s(m,w,S,0,"b",D._minorgridlines),s(m,w,R,0,"a-boundary",I._boundarylines),s(m,w,R,0,"b-boundary",D._boundarylines);var X,Z,Y,te,z,N,V,Q,j,J,K,re,ie,ce,se,H=a(v,m,w,A,0,F,I._labels,"a-label"),U=a(v,m,w,A,0,F,D._labels,"b-label");X=v,Z=F,Y=A,te=m,z=w,N=H,V=U,re=r.aggNums(Math.min,null,Y.a),ie=r.aggNums(Math.max,null,Y.a),ce=r.aggNums(Math.min,null,Y.b),se=r.aggNums(Math.max,null,Y.b),J=Y.ab2xy(Q=.5*(re+ie),j=ce,!0),K=Y.dxyda_rough(Q,j),void 0===N.angle&&r.extendFlat(N,e(Y,te,z,J,Y.dxydb_rough(Q,j))),h(X,Z,Y,0,J,K,Y.aaxis,te,z,N,"a-title"),J=Y.ab2xy(Q=re,j=.5*(ce+se),!0),K=Y.dxydb_rough(Q,j),void 0===V.angle&&r.extendFlat(V,e(Y,te,z,J,Y.dxyda_rough(Q,j))),h(X,Z,Y,0,J,K,Y.baxis,te,z,V,"b-title"),function(X,Z,Y,W,te){var z,N,V,Q,j=Y.select("#"+X._clipPathId);j.size()||(j=Y.append("clipPath").classed("carpetclip",!0));var J=r.ensureSingle(j,"path","carpetboundary"),K=Z.clipsegments,re=[];for(Q=0;Q<K.length;Q++)N=_([],(z=K[Q]).x,W.c2p),V=_([],z.y,te.c2p),re.push(t(N,V,z.bicubic));var ie="M"+re.join("L")+"Z";j.attr("id",X._clipPathId),J.attr("d",ie)}(A,L,b,m,w)})};var c=p.LINE_SPACING,u=(1-p.MID_SHIFT)/c+1;function h(v,f,l,x,m,w,b,k,T,L,A){var I=[];b.title.text&&I.push(b.title.text);var D=f.selectAll("text."+A).data(I),S=L.maxExtent;D.enter().append("text").classed(A,!0),D.each(function(){var C=e(l,k,T,m,w);-1===["start","both"].indexOf(b.showticklabels)&&(S=0);var R=b.title.font.size;S+=R+b.title.offset;var F=(L.angle+(L.flip<0?180:0)-C.angle+450)%360,H=F>90&&F<270,U=d.select(this);U.text(b.title.text).call(i.convertToTspans,v),H&&(S=(-i.lineCount(U)+u)*c*R-S),U.attr("transform",n(C.p[0],C.p[1])+o(C.angle)+n(0,S)).attr("text-anchor","middle").call(g.font,b.title.font)}),D.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(y,$,ee){"use strict";var d=y("./constants"),g=y("../../lib/search").findBin,_=y("./compute_control_points"),t=y("./create_spline_evaluator"),e=y("./create_i_derivative_evaluator"),i=y("./create_j_derivative_evaluator");$.exports=function(r){var o=r._a,n=r._b,p=o.length,s=n.length,a=r.aaxis,c=r.baxis,u=o[0],h=o[p-1],v=n[0],f=n[s-1],l=o[o.length-1]-o[0],x=n[n.length-1]-n[0],m=l*d.RELATIVE_CULL_TOLERANCE,w=x*d.RELATIVE_CULL_TOLERANCE;u-=m,h+=m,v-=w,f+=w,r.isVisible=function(b,k){return b>u&&b<h&&k>v&&k<f},r.isOccluded=function(b,k){return b<u||b>h||k<v||k>f},r.setScale=function(){var T=_(r._xctrl,r._yctrl,r._x,r._y,a.smoothing,c.smoothing);r._xctrl=T[0],r._yctrl=T[1],r.evalxy=t([r._xctrl,r._yctrl],p,s,a.smoothing,c.smoothing),r.dxydi=e([r._xctrl,r._yctrl],a.smoothing,c.smoothing),r.dxydj=i([r._xctrl,r._yctrl],a.smoothing,c.smoothing)},r.i2a=function(b){var k=Math.max(0,Math.floor(b[0]),p-2),T=b[0]-k;return(1-T)*o[k]+T*o[k+1]},r.j2b=function(b){var k=Math.max(0,Math.floor(b[1]),p-2),T=b[1]-k;return(1-T)*n[k]+T*n[k+1]},r.ij2ab=function(b){return[r.i2a(b[0]),r.j2b(b[1])]},r.a2i=function(b){var k=Math.max(0,Math.min(g(b,o),p-2)),T=o[k];return Math.max(0,Math.min(p-1,k+(b-T)/(o[k+1]-T)))},r.b2j=function(b){var k=Math.max(0,Math.min(g(b,n),s-2)),T=n[k];return Math.max(0,Math.min(s-1,k+(b-T)/(n[k+1]-T)))},r.ab2ij=function(b){return[r.a2i(b[0]),r.b2j(b[1])]},r.i2c=function(b,k){return r.evalxy([],b,k)},r.ab2xy=function(b,k,T){if(!T&&(b<o[0]||b>o[p-1]|k<n[0]||k>n[s-1]))return[!1,!1];var L=r.a2i(b),A=r.b2j(k),I=r.evalxy([],L,A);if(T){var D,S,C,R,F=0,H=0,U=[];b<o[0]?(D=0,S=0,F=(b-o[0])/(o[1]-o[0])):b>o[p-1]?(D=p-2,S=1,F=(b-o[p-1])/(o[p-1]-o[p-2])):S=L-(D=Math.max(0,Math.min(p-2,Math.floor(L)))),k<n[0]?(C=0,R=0,H=(k-n[0])/(n[1]-n[0])):k>n[s-1]?(C=s-2,R=1,H=(k-n[s-1])/(n[s-1]-n[s-2])):R=A-(C=Math.max(0,Math.min(s-2,Math.floor(A)))),F&&(r.dxydi(U,D,C,S,R),I[0]+=U[0]*F,I[1]+=U[1]*F),H&&(r.dxydj(U,D,C,S,R),I[0]+=U[0]*H,I[1]+=U[1]*H)}return I},r.c2p=function(b,k,T){return[k.c2p(b[0]),T.c2p(b[1])]},r.p2x=function(b,k,T){return[k.p2c(b[0]),T.p2c(b[1])]},r.dadi=function(b){var k=Math.max(0,Math.min(o.length-2,b));return o[k+1]-o[k]},r.dbdj=function(b){var k=Math.max(0,Math.min(n.length-2,b));return n[k+1]-n[k]},r.dxyda=function(b,k,T,L){var A=r.dxydi(null,b,k,T,L),I=r.dadi(b,T);return[A[0]/I,A[1]/I]},r.dxydb=function(b,k,T,L){var A=r.dxydj(null,b,k,T,L),I=r.dbdj(k,L);return[A[0]/I,A[1]/I]},r.dxyda_rough=function(b,k,T){var L=l*(T||.1),A=r.ab2xy(b+L,k,!0),I=r.ab2xy(b-L,k,!0);return[.5*(A[0]-I[0])/L,.5*(A[1]-I[1])/L]},r.dxydb_rough=function(b,k,T){var L=x*(T||.1),A=r.ab2xy(b,k+L,!0),I=r.ab2xy(b,k-L,!0);return[.5*(A[0]-I[0])/L,.5*(A[1]-I[1])/L]},r.dpdx=function(b){return b._m},r.dpdy=function(b){return b._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_,t){var e,i,r,o=[],n=[],p=g[0].length,s=g.length;var c,u,h,v,f,l,x,m,w,b,Z,Y,W,te,z,T=0;for(e=0;e<p;e++)for(i=0;i<s;i++)void 0===g[i][e]&&(o.push(e),n.push(i),g[i][e]=(Y=i,W=void 0,te=void 0,z=void 0,te=0,z=0,(Z=e)>0&&void 0!==(W=g[Y][Z-1])&&(z++,te+=W),Z<p-1&&void 0!==(W=g[Y][Z+1])&&(z++,te+=W),Y>0&&void 0!==(W=g[Y-1][Z])&&(z++,te+=W),Y<s-1&&void 0!==(W=g[Y+1][Z])&&(z++,te+=W),te/Math.max(1,z))),T=Math.max(T,Math.abs(g[i][e]));if(!o.length)return g;var L=0,A=0,I=o.length;do{for(L=0,r=0;r<I;r++){i=n[r];var S,C,R,F,H,U=0,X=0;0===(e=o[r])?(C=_[F=Math.min(p-1,2)],X+=(S=g[i][1])+(S-g[i][F])*(_[0]-(R=_[1]))/(R-C),U++):e===p-1&&(C=_[F=Math.max(0,p-3)],X+=(S=g[i][p-2])+(S-g[i][F])*(_[p-1]-(R=_[p-2]))/(R-C),U++),(0===e||e===p-1)&&i>0&&i<s-1&&(X+=((u=t[i]-t[i-1])*g[i+1][e]+(c=t[i+1]-t[i])*g[i-1][e])/(u+c),U++),0===i?(C=t[H=Math.min(s-1,2)],X+=(S=g[1][e])+(S-g[H][e])*(t[0]-(R=t[1]))/(R-C),U++):i===s-1&&(C=t[H=Math.max(0,s-3)],X+=(S=g[s-2][e])+(S-g[H][e])*(t[s-1]-(R=t[s-2]))/(R-C),U++),(0===i||i===s-1)&&e>0&&e<p-1&&(X+=((u=_[e]-_[e-1])*g[i][e+1]+(c=_[e+1]-_[e])*g[i][e-1])/(u+c),U++),U?X/=U:(m=(f=t[i+1]-t[i])*(l=t[i]-t[i-1])*(f+l),X=((x=(h=_[e+1]-_[e])*(v=_[e]-_[e-1])*(h+v))*(l*g[i+1][e]+f*g[i-1][e])+m*(v*g[i][e+1]+h*g[i][e-1]))/(m*(v+h)+x*(l+f))),L+=(b=(w=X-g[i][e])/T)*b,g[i][e]+=w*(1+(U?0:.85))}L=Math.sqrt(L)}while(A++<100&&L>1e-5);return d.log("Smoother converged to",L,"after",A,"iterations"),g}},{"../../lib":503}],715:[function(y,$,ee){"use strict";var d=y("../../lib").isArray1D;$.exports=function(g,_,t){var e=t("x"),i=e&&e.length,r=t("y"),o=r&&r.length;if(!i&&!o)return!1;if(_._cheater=!e,i&&!d(e)||o&&!d(r))_._length=null;else{var n=i?e.length:1/0;o&&(n=Math.min(n,r.length)),_.a&&_.a.length&&(n=Math.min(n,_.a.length)),_.b&&_.b.length&&(n=Math.min(n,_.b.length)),_._length=n}return!0}},{"../../lib":503}],716:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../scattergeo/attributes"),_=y("../../components/colorscale/attributes"),t=y("../../plots/attributes"),e=y("../../components/color/attributes").defaultLine,i=y("../../lib/extend").extendFlat,r=g.marker.line;$.exports=i({locations:{valType:"data_array",editType:"calc"},locationmode:g.locationmode,z:{valType:"data_array",editType:"calc"},geojson:i({},g.geojson,{}),featureidkey:g.featureidkey,text:i({},g.text,{}),hovertext:i({},g.hovertext,{}),marker:{line:{color:i({},r.color,{dflt:e}),width:i({},r.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:g.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:g.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:i({},t.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:d(),showlegend:i({},t.showlegend,{dflt:!1})},_("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../constants/numerical").BADNUM,_=y("../../components/colorscale/calc"),t=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection");function i(r){return r&&"string"==typeof r}$.exports=function(r,o){var n,p=o._length,s=new Array(p);n=o.geojson?function(v){return i(v)||d(v)}:i;for(var a=0;a<p;a++){var c=s[a]={},u=o.locations[a],h=o.z[a];n(u)&&d(h)?(c.loc=u,c.z=h):(c.loc=null,c.z=g),c.index=a}return t(s,o),_(r,o,{vals:o.z,containerStr:"",cLetter:"z"}),e(s,o),s}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/defaults"),_=y("./attributes");$.exports=function(t,e,i,r){function o(c,u){return d.coerce(t,e,_,c,u)}var n=o("locations"),p=o("z");if(n&&n.length&&d.isArrayOrTypedArray(p)&&p.length){e._length=Math.min(n.length,p.length);var s,a=o("geojson");("string"==typeof a&&""!==a||d.isPlainObject(a))&&(s="geojson-id"),"geojson-id"===o("locationmode",s)&&o("featureidkey"),o("text"),o("hovertext"),o("hovertemplate"),o("marker.line.width")&&o("marker.line.color"),o("marker.opacity"),g(t,e,r,o,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(e,o)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e){d.location=g.location,d.z=g.z;var i=t[e];return i.fIn&&i.fIn.properties&&(d.properties=i.fIn.properties),d.ct=i.ct,d}},{}],720:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("./attributes"),_=y("../../lib").fillText;$.exports=function(t,e,i){var r,o,n,p,s=t.cd,a=s[0].trace,c=t.subplot,u=[e,i],h=[e+360,i];for(o=0;o<s.length;o++)if(p=!1,(r=s[o])._polygons){for(n=0;n<r._polygons.length;n++)r._polygons[n].contains(u)&&(p=!p),r._polygons[n].contains(h)&&(p=!p);if(p)break}if(p&&r)return t.x0=t.x1=t.xa.c2p(r.ct),t.y0=t.y1=t.ya.c2p(r.ct),t.index=r.index,t.location=r.loc,t.z=r.z,t.zLabel=d.tickText(c.mockAxis,c.mockAxis.c2l(r.z),"hover").text,t.hovertemplate=r.hovertemplate,function(v,f,l){if(!f.hovertemplate){var x=l.hi||f.hoverinfo,m=String(l.loc),w="all"===x?g.hoverinfo.flags:x.split("+"),b=-1!==w.indexOf("name"),k=-1!==w.indexOf("location"),T=-1!==w.indexOf("z"),L=-1!==w.indexOf("text"),A=[];!b&&k?v.nameOverride=m:(b&&(v.nameOverride=f.name),k&&A.push(m)),T&&A.push(v.zLabel),L&&_(l,f,A),v.extraText=A.join("<br>")}}(t,a,r),[t]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("./calc"),calcGeoJSON:y("./plot").calcGeoJSON,plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"choropleth",basePlotModule:y("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../lib/geo_location_utils"),t=y("../../lib/topojson_utils").getTopojsonFeatures,e=y("../../plots/cartesian/autorange").findExtremes,i=y("./style").style;$.exports={calcGeoJSON:function(r,o){for(var n=r[0].trace,p=o[n.geo],s=p._subplot,a=n.locationmode,c=n._length,u="geojson-id"===a?_.extractTraceFeature(r):t(n,s.topojson),h=[],v=[],f=0;f<c;f++){var l=r[f],x="geojson-id"===a?l.fOut:_.locationToFeature(a,l.loc,u);if(x){l.geojson=x,l.ct=x.properties.ct,l._polygons=_.feature2polygons(x);var m=_.computeBbox(x);h.push(m[0],m[2]),v.push(m[1],m[3])}else l.geojson=null}if("geojson"===p.fitbounds&&"geojson-id"===a){var w=_.computeBbox(_.getTraceGeojson(n));h=[w[0],w[2]],v=[w[1],w[3]]}var b={padded:!0};n._extremes.lon=e(p.lonaxis._ax,h,b),n._extremes.lat=e(p.lataxis._ax,v,b)},plot:function(r,o,n){var p=o.layers.backplot.select(".choroplethlayer");g.makeTraceGroups(p,n,"trace choropleth").each(function(s){var a=d.select(this).selectAll("path.choroplethlocation").data(g.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),i(r,s)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(y,$,ee){"use strict";$.exports=function(d,g){var _,t,e,i,r,o=d.cd,n=d.xaxis,p=d.yaxis,s=[];if(!1===g)for(_=0;_<o.length;_++)o[_].selected=0;else for(_=0;_<o.length;_++)(e=(t=o[_]).ct)&&(i=n.c2p(e),r=p.c2p(e),g.contains([i,r],null,_,d)?(s.push({pointNumber:_,lon:e[0],lat:e[1]}),t.selected=1):t.selected=0);return s}},{}],724:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/color"),_=y("../../components/drawing"),t=y("../../components/colorscale");function e(i,r){var o=r[0].trace,n=r[0].node3.selectAll(".choroplethlocation"),p=o.marker||{},s=p.line||{},a=t.makeColorScaleFuncFromTrace(o);n.each(function(c){d.select(this).attr("fill",a(c.z)).call(g.stroke,c.mlc||s.color).call(_.dashLine,"",c.mlw||s.width||0).style("opacity",p.opacity)}),_.selectedPointStyle(n,o,i)}$.exports={style:function(i,r){r&&e(i,r)},styleOnSelect:function(i,r){var n=r[0].trace;n.selectedpoints?_.selectedPointStyle(r[0].node3.selectAll(".choroplethlocation"),n,i):e(i,r)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(y,$,ee){"use strict";var d=y("../choropleth/attributes"),g=y("../../components/colorscale/attributes"),_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../plots/attributes"),e=y("../../lib/extend").extendFlat;$.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},d.featureidkey,{}),below:{valType:"string",editType:"plot"},text:d.text,hovertext:d.hovertext,marker:{line:{color:e({},d.marker.line.color,{editType:"plot"}),width:e({},d.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},d.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},d.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},d.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:d.hoverinfo,hovertemplate:_({},{keys:["properties"]}),showlegend:e({},t.showlegend,{dflt:!1})},g("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../components/colorscale"),t=y("../../components/drawing"),e=y("../../lib/geojson_utils").makeBlank,i=y("../../lib/geo_location_utils");function r(o){var n,p=o[0].trace,s=p._opts;if(p.selectedpoints){for(var a=t.makeSelectedPointStyleFns(p),c=0;c<o.length;c++){var u=o[c];u.fOut&&(u.fOut.properties.mo2=a.selectedOpacityFn(u))}n={type:"identity",property:"mo2"}}else n=g.isArrayOrTypedArray(p.marker.opacity)?{type:"identity",property:"mo"}:p.marker.opacity;return g.extendFlat(s.fill.paint,{"fill-opacity":n}),g.extendFlat(s.line.paint,{"line-opacity":n}),s}$.exports={convert:function(o){var n=o[0].trace,p=!0===n.visible&&0!==n._length,s={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},c=n._opts={fill:s,line:a,geojson:e()};if(!p)return c;var u=i.extractTraceFeature(o);if(!u)return c;var h,v,f,l=_.makeColorScaleFuncFromTrace(n),x=n.marker,m=x.line||{};g.isArrayOrTypedArray(x.opacity)&&(h=function(A){var I=A.mo;return d(I)?+g.constrain(I,0,1):0}),g.isArrayOrTypedArray(m.color)&&(v=function(A){return A.mlc}),g.isArrayOrTypedArray(m.width)&&(f=function(A){return A.mlw});for(var w=0;w<o.length;w++){var b=o[w],k=b.fOut;if(k){var T=k.properties;T.fc=l(b.z),h&&(T.mo=h(b)),v&&(T.mlc=v(b)),f&&(T.mlw=f(b)),b.ct=T.ct,b._polygons=i.feature2polygons(k)}}var L=h?{type:"identity",property:"mo"}:x.opacity;return g.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),g.extendFlat(a.paint,{"line-color":v?{type:"identity",property:"mlc"}:m.color,"line-width":f?{type:"identity",property:"mlw"}:m.width,"line-opacity":L}),s.layout.visibility="visible",a.layout.visibility="visible",c.geojson={type:"FeatureCollection",features:u},r(o),c},convertOnSelect:r}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/defaults"),_=y("./attributes");$.exports=function(t,e,i,r){function o(a,c){return d.coerce(t,e,_,a,c)}var n=o("locations"),p=o("z"),s=o("geojson");d.isArrayOrTypedArray(n)&&n.length&&d.isArrayOrTypedArray(p)&&p.length&&("string"==typeof s&&""!==s||d.isPlainObject(s))?(o("featureidkey"),e._length=Math.min(n.length,p.length),o("below"),o("text"),o("hovertext"),o("hovertemplate"),o("marker.line.width")&&o("marker.line.color"),o("marker.opacity"),g(t,e,r,o,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(e,o)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("../choropleth/calc"),plot:y("./plot"),hoverPoints:y("../choropleth/hover"),eventData:y("../choropleth/event_data"),selectPoints:y("../choropleth/select"),styleOnSelect:function(d,g){g&&g[0].trace._glTrace.updateOnSelect(g)},getBelow:function(d,g){for(var _=g.getMapLayers(),t=_.length-2;t>=0;t--){var e=_[t].id;if("string"==typeof e&&0===e.indexOf("water"))for(var i=t+1;i<_.length;i++)if("string"==typeof(e=_[i].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(y,$,ee){"use strict";var d=y("./convert").convert,g=y("./convert").convertOnSelect,_=y("../../plots/mapbox/constants").traceLayerPrefix;function t(i,r){this.type="choroplethmapbox",this.subplot=i,this.uid=r,this.sourceId="source-"+r,this.layerList=[["fill",_+r+"-fill"],["line",_+r+"-line"]],this.below=null}var e=t.prototype;e.update=function(i){this._update(d(i))},e.updateOnSelect=function(i){this._update(g(i))},e._update=function(i){var r=this.subplot,o=this.layerList,n=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(i.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(i,n),this.below=n);for(var p=0;p<o.length;p++){var s=o[p],c=s[1],u=i[s[0]];r.setOptions(c,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&r.setOptions(c,"setPaintProperty",u.paint)}},e._addLayers=function(i,r){for(var o=this.subplot,n=this.layerList,p=this.sourceId,s=0;s<n.length;s++){var a=n[s],c=a[0],u=i[c];o.addLayer({type:c,id:a[1],source:p,layout:u.layout,paint:u.paint},r)}},e._removeLayers=function(){for(var i=this.subplot.map,r=this.layerList,o=r.length-1;o>=0;o--)i.removeLayer(r[o][1])},e.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},$.exports=function(i,r){var o=r[0].trace,n=new t(i,o.uid),p=n.sourceId,s=d(r),a=n.below=i.belowLookup["trace-"+o.uid];return i.map.addSource(p,{type:"geojson",data:s.geojson}),n._addLayers(s,a),r[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/attributes"),g=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../mesh3d/attributes"),e=y("../../plots/attributes"),i=y("../../lib/extend").extendFlat,r={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:_({editType:"calc"},{keys:["norm"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:i({},e.showlegend,{dflt:!1})};i(r,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(o){r[o]=t[o]}),r.hoverinfo=i({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),r.transforms=void 0,$.exports=r},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/calc");$.exports=function(g,_){for(var t=_.u,e=_.v,i=_.w,r=Math.min(_.x.length,_.y.length,_.z.length,t.length,e.length,i.length),o=-1/0,n=1/0,p=0;p<r;p++){var s=t[p],a=e[p],c=i[p],u=Math.sqrt(s*s+a*a+c*c);o=Math.max(o,u),n=Math.min(n,u)}_._len=r,_._normMax=o,d(g,_,{vals:[n,o],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_cone3d,g=y("../../../stackgl_modules").gl_cone3d.createConeMesh,_=y("../../lib").simpleMap,t=y("../../lib/gl_format_color").parseColorScale,e=y("../../components/colorscale").extractOpts,i=y("../../plots/gl3d/zip3");function r(c,u){this.scene=c,this.uid=u,this.mesh=null,this.data=null}var o=r.prototype;o.handlePick=function(c){if(c.object===this.mesh){var u=c.index=c.data.index,l=this.data.u[u],x=this.data.v[u],m=this.data.w[u];c.traceCoordinate=[this.data.x[u],this.data.y[u],this.data.z[u],l,x,m,Math.sqrt(l*l+x*x+m*m)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[u]?c.textLabel=w[u]:w&&(c.textLabel=w),!0}};var n={xaxis:0,yaxis:1,zaxis:2},p={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function a(c,u){var h=c.fullSceneLayout,v=c.dataScale,f={};function l(b,k){var T=h[k],L=v[n[k]];return _(b,function(A){return T.d2l(A)*L})}f.vectors=i(l(u.u,"xaxis"),l(u.v,"yaxis"),l(u.w,"zaxis"),u._len),f.positions=i(l(u.x,"xaxis"),l(u.y,"yaxis"),l(u.z,"zaxis"),u._len);var x=e(u);f.colormap=t(u),f.vertexIntensityBounds=[x.min/u._normMax,x.max/u._normMax],f.coneOffset=p[u.anchor],f.coneSize="scaled"===u.sizemode?u.sizeref||.5:u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var m=d(f),w=u.lightposition;return m.lightPosition=[w.x,w.y,w.z],m.ambient=u.lighting.ambient,m.diffuse=u.lighting.diffuse,m.specular=u.lighting.specular,m.roughness=u.lighting.roughness,m.fresnel=u.lighting.fresnel,m.opacity=u.opacity,u._pad=s[u.anchor]*m.vectorScale*m.coneScale*u._normMax,m}o.update=function(c){this.data=c;var u=a(this.scene,c);this.mesh.update(u)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(c,u){var h=c.glplot.gl,v=a(c,u),f=g(h,v),l=new r(c,u.uid);return l.mesh=f,l.data=u,f._trace=l,c.glplot.add(f),l}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/defaults"),_=y("./attributes");$.exports=function(t,e,i,r){function o(h,v){return d.coerce(t,e,_,h,v)}var n=o("u"),p=o("v"),s=o("w"),a=o("x"),c=o("y"),u=o("z");n&&n.length&&p&&p.length&&s&&s.length&&a&&a.length&&c&&c.length&&u&&u.length?(o("sizeref"),o("sizemode"),o("anchor"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),g(t,e,r,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"cone",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:y("./calc"),plot:y("./convert"),eventData:function(d,g){return d.norm=g.traceCoordinate[6],d},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(y,$,ee){"use strict";var d=y("../heatmap/attributes"),g=y("../scatter/attributes"),_=y("../../plots/cartesian/axis_format_attributes"),t=_.axisHoverFormat,e=_.descriptionOnlyNumbers,i=y("../../components/colorscale/attributes"),r=y("../../components/drawing/attributes").dash,o=y("../../plots/font_attributes"),n=y("../../lib/extend").extendFlat,p=y("../../constants/filter_ops"),s=p.COMPARISON_OPS2,a=p.INTERVAL_OPS,c=g.line;$.exports=n({z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,text:d.text,hovertext:d.hovertext,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:d.hovertemplate,texttemplate:n({},d.texttemplate,{}),textfont:n({},d.textfont,{}),hoverongaps:d.hoverongaps,connectgaps:n({},d.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:o({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},c.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:r,smoothing:n({},c.smoothing,{}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(y,$,ee){"use strict";var d=y("../../components/colorscale"),g=y("../heatmap/calc"),_=y("./set_contours"),t=y("./end_plus");$.exports=function(e,i){var r=g(e,i),o=r[0].z;_(i,o);var n,p=i.contours,s=d.extractOpts(i);if("heatmap"===p.coloring&&s.auto&&!1===i.autocontour){var a=p.start,c=t(p),u=p.size||1,h=Math.floor((c-a)/u)+1;isFinite(u)||(u=1,h=1);var v=a-u/2;n=[v,v+h*u]}else n=o;return d.calc(e,i,{vals:n,cLetter:"z"}),r}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(y,$,ee){"use strict";$.exports=function(d,g){var _,t=d[0],e=t.z;switch(g.type){case"levels":var i=Math.min(e[0][0],e[0][1]);for(_=0;_<d.length;_++){var r=d[_];r.prefixBoundary=!r.edgepaths.length&&(i>r.level||r.starts.length&&i===r.level)}break;case"constraint":if(t.prefixBoundary=!1,t.edgepaths.length)return;var o=t.x.length,n=t.y.length,p=-1/0,s=1/0;for(_=0;_<n;_++)s=Math.min(s,e[_][0]),s=Math.min(s,e[_][o-1]),p=Math.max(p,e[_][0]),p=Math.max(p,e[_][o-1]);for(_=1;_<o-1;_++)s=Math.min(s,e[0][_]),s=Math.min(s,e[n-1][_]),p=Math.max(p,e[0][_]),p=Math.max(p,e[n-1][_]);var a,c,u=g.value;switch(g._operation){case">":u>p&&(t.prefixBoundary=!0);break;case"<":(u<s||t.starts.length&&u===s)&&(t.prefixBoundary=!0);break;case"[]":a=Math.min(u[0],u[1]),((c=Math.max(u[0],u[1]))<s||a>p||t.starts.length&&c===s)&&(t.prefixBoundary=!0);break;case"][":a=Math.min(u[0],u[1]),c=Math.max(u[0],u[1]),a<s&&c>p&&(t.prefixBoundary=!0)}}}},{}],738:[function(y,$,ee){"use strict";var d=y("../../components/colorscale"),g=y("./make_color_map"),_=y("./end_plus");$.exports={min:"zmin",max:"zmax",calc:function(t,e,i){var r=e.contours,o=e.line,n=r.size||1,p=r.coloring,s=g(e,{isColorbar:!0});if("heatmap"===p){var a=d.extractOpts(e);i._fillgradient=a.reversescale?d.flipScale(a.colorscale):a.colorscale,i._zrange=[a.min,a.max]}else"fill"===p&&(i._fillcolor=s);i._line={color:"lines"===p?s:o.color,width:!1!==r.showlines?o.width:0,dash:o.dash},i._levels={start:r.start,end:_(r),size:n}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(y,$,ee){"use strict";$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("./label_defaults"),_=y("../../components/color"),t=_.addOpacity,e=_.opacity,i=y("../../constants/filter_ops"),r=i.CONSTRAINT_REDUCTION,o=i.COMPARISON_OPS2;$.exports=function(n,p,s,a,c,u){var h,v,f,m,w,b,l=p.contours,x=s("contours.operation");l._operation=r[x],m=s,-1===o.indexOf((w=l).operation)?(m("contours.value",[0,1]),Array.isArray(w.value)?w.value.length>2?w.value=w.value.slice(2):0===w.length?w.value=[0,1]:w.length<2?(b=parseFloat(w.value[0]),w.value=[b,b+1]):w.value=[parseFloat(w.value[0]),parseFloat(w.value[1])]:d(w.value)&&(b=parseFloat(w.value),w.value=[b,b+1])):(m("contours.value",0),d(w.value)||(w.value=Array.isArray(w.value)?parseFloat(w.value[0]):0)),"="===x?h=l.showlines=!0:(h=s("contours.showlines"),f=s("fillcolor",t((n.line||{}).color||c,.5))),h&&(v=s("line.color",f&&e(f)?t(p.fillcolor,1):c),s("line.width",2),s("line.dash")),s("line.smoothing"),g(s,a,v,u)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(y,$,ee){"use strict";var d=y("../../constants/filter_ops"),g=y("fast-isnumeric");function _(i,r){var o,n=Array.isArray(r);function p(s){return g(s)?+s:null}return-1!==d.COMPARISON_OPS2.indexOf(i)?o=p(n?r[0]:r):-1!==d.INTERVAL_OPS.indexOf(i)?o=n?[p(r[0]),p(r[1])]:[p(r),p(r)]:-1!==d.SET_OPS.indexOf(i)&&(o=n?r.map(p):[p(r)]),o}function t(i){return function(r){r=_(i,r);var o=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return{start:o,end:n,size:n-o}}}function e(i){return function(r){return{start:r=_(i,r),end:1/0,size:1/0}}}$.exports={"[]":t("[]"),"][":t("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t){var e=t("contours.start"),i=t("contours.end"),r=!1===e||!1===i,o=_("contours.size");!(r?g.autocontour=!0:_("autocontour",!1))&&o||_("ncontours")}},{}],743:[function(y,$,ee){"use strict";var d=y("../../lib");function g(_){return d.extendFlat({},_,{edgepaths:d.extendDeep([],_.edgepaths),paths:d.extendDeep([],_.paths),starts:d.extendDeep([],_.starts)})}$.exports=function(_,t){var e,i,r,o=function(s){return s.reverse()},n=function(s){return s};switch(t){case"=":case"<":return _;case">":for(1!==_.length&&d.warn("Contour data invalid for the specified inequality operation."),i=_[0],e=0;e<i.edgepaths.length;e++)i.edgepaths[e]=o(i.edgepaths[e]);for(e=0;e<i.paths.length;e++)i.paths[e]=o(i.paths[e]);for(e=0;e<i.starts.length;e++)i.starts[e]=o(i.starts[e]);return _;case"][":var p=o;o=n,n=p;case"[]":for(2!==_.length&&d.warn("Contour data invalid for the specified inequality range operation."),i=g(_[0]),r=g(_[1]),e=0;e<i.edgepaths.length;e++)i.edgepaths[e]=o(i.edgepaths[e]);for(e=0;e<i.paths.length;e++)i.paths[e]=o(i.paths[e]);for(e=0;e<i.starts.length;e++)i.starts[e]=o(i.starts[e]);for(;r.edgepaths.length;)i.edgepaths.push(n(r.edgepaths.shift()));for(;r.paths.length;)i.paths.push(n(r.paths.shift()));for(;r.starts.length;)i.starts.push(n(r.starts.shift()));return[i]}}},{"../../lib":503}],744:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../heatmap/xyz_defaults"),_=y("../scatter/period_defaults"),t=y("./constraint_defaults"),e=y("./contours_defaults"),i=y("./style_defaults"),r=y("../heatmap/label_defaults"),o=y("./attributes");$.exports=function(n,p,s,a){function c(h,v){return d.coerce(n,p,o,h,v)}if(g(n,p,c,a)){_(n,p,a,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hoverongaps"),c("hovertemplate");var u="constraint"===c("contours.type");c("connectgaps",d.isArray1D(p.z)),u?t(n,p,c,a,s):(e(n,p,c,function(h){return d.coerce2(n,p,o,h)}),i(n,p,c,a)),p.contours&&"heatmap"===p.contours.coloring&&r(c,a)}else p.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./constraint_mapping"),_=y("./end_plus");$.exports=function(t,e,i){for(var r="constraint"===t.type?g[t._operation](t.value):t,o=r.size,n=[],p=_(r),s=i.trace._carpetTrace,a=s?{xaxis:s.aaxis,yaxis:s.baxis,x:i.a,y:i.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:i.x,y:i.y},c=r.start;c<p;c+=o)if(n.push(d.extendFlat({level:c,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},a)),n.length>1e3){d.warn("Too many contours, clipping at 1000",t);break}return n}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(y,$,ee){"use strict";$.exports=function(d){return d.end+d.size/1e6}},{}],747:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./constants");function _(i,r,o,n){return Math.abs(i[0]-r[0])<o&&Math.abs(i[1]-r[1])<n}function t(i,r,o,n,p){var s,J,re,ie,ce,a=r.join(","),c=i.crossings[a],u=(re=r,ie=0,ce=0,(J=c)>20&&o?208===J||1114===J?ie=0===re[0]?1:-1:ce=0===re[1]?1:-1:-1!==g.BOTTOMSTART.indexOf(J)?ce=1:-1!==g.LEFTSTART.indexOf(J)?ie=1:-1!==g.TOPSTART.indexOf(J)?ce=-1:ie=-1,[ie,ce]),h=[e(i,r,[-u[0],-u[1]])],v=i.z.length,f=i.z[0].length,l=r.slice(),x=u.slice();for(s=0;s<1e4;s++){if(c>20?i.crossings[a]=g.SADDLEREMAINDER[c=g.CHOOSESADDLE[c][(u[0]||u[1])<0?0:1]]:delete i.crossings[a],!(u=g.NEWDELTA[c])){d.log("Found bad marching index:",c,r,i.level);break}if(h.push(e(i,r,u)),r[0]+=u[0],r[1]+=u[1],a=r.join(","),_(h[h.length-1],h[h.length-2],n,p)&&h.pop(),r[0]===l[0]&&r[1]===l[1]&&u[0]===x[0]&&u[1]===x[1]||o&&(u[0]&&(r[0]<0||r[0]>f-2)||u[1]&&(r[1]<0||r[1]>v-2)))break;c=i.crossings[a]}1e4===s&&d.log("Infinite loop in contour?");var w,b,k,T,L,A,I,D,S,C,R,F,H,U,X,Z=_(h[0],h[h.length-1],n,p),Y=0,W=.2*i.smoothing,te=[],z=0;for(s=1;s<h.length;s++)void 0,void 0,U=(F=h[s])[2]-(H=h[s-1])[2],X=F[3]-H[3],Y+=I=Math.sqrt(U*U+X*X),te.push(I);var N=Y/te.length*W;function V(J){return h[J%h.length]}for(s=h.length-2;s>=z;s--)if((w=te[s])<N){for(k=0,b=s-1;b>=z&&w+te[b]<N;b--)w+=te[b];if(Z&&s===h.length-2)for(k=0;k<b&&w+te[k]<N;k++)w+=te[k];L=s-b+k+1,A=Math.floor((s+b+k+2)/2),T=Z||s!==h.length-2?Z||-1!==b?L%2?V(A):[(V(A)[0]+V(A+1)[0])/2,(V(A)[1]+V(A+1)[1])/2]:h[0]:h[h.length-1],h.splice(b+1,s-b+1,T),s=b+1,k&&(z=k),Z&&(s===h.length-2?h[k]=h[h.length-1]:0===s&&(h[h.length-1]=h[0]))}for(h.splice(0,z),s=0;s<h.length;s++)h[s].length=2;if(!(h.length<2))if(Z)h.pop(),i.paths.push(h);else{o||d.log("Unclosed interior contour?",i.level,l.join(","),h.join("L"));var Q=!1;for(D=0;D<i.edgepaths.length;D++)if(C=i.edgepaths[D],!Q&&_(C[0],h[h.length-1],n,p)){h.pop(),Q=!0;var j=!1;for(S=0;S<i.edgepaths.length;S++)if(_((R=i.edgepaths[S])[R.length-1],h[0],n,p)){j=!0,h.shift(),i.edgepaths.splice(D,1),S===D?i.paths.push(h.concat(R)):(S>D&&S--,i.edgepaths[S]=R.concat(h,C));break}j||(i.edgepaths[D]=h.concat(C))}for(D=0;D<i.edgepaths.length&&!Q;D++)_((C=i.edgepaths[D])[C.length-1],h[0],n,p)&&(h.shift(),i.edgepaths[D]=C.concat(h),Q=!0);Q||i.edgepaths.push(h)}}function e(i,r,o){var n=r[0]+Math.max(o[0],0),p=r[1]+Math.max(o[1],0),s=i.z[p][n],a=i.xaxis,c=i.yaxis;if(o[1]){var u=(i.level-s)/(i.z[p][n+1]-s),h=(1!==u?(1-u)*a.c2l(i.x[n]):0)+(0!==u?u*a.c2l(i.x[n+1]):0);return[a.c2p(a.l2c(h),!0),c.c2p(i.y[p],!0),n+u,p]}var v=(i.level-s)/(i.z[p+1][n]-s),f=(1!==v?(1-v)*c.c2l(i.y[p]):0)+(0!==v?v*c.c2l(i.y[p+1]):0);return[a.c2p(i.x[n],!0),c.c2p(c.l2c(f),!0),n,p+v]}$.exports=function(i,r,o){var n,p,s,a;for(r=r||.01,o=o||.01,p=0;p<i.length;p++){for(s=i[p],a=0;a<s.starts.length;a++)t(s,s.starts[a],"edge",r,o);for(n=0;Object.keys(s.crossings).length&&n<1e4;)n++,t(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,r,o);1e4===n&&d.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("../heatmap/hover");$.exports=function(_,t,e,i,r){r||(r={}),r.isContour=!0;var o=g(_,t,e,i,r);return o&&o.forEach(function(n){var p=n.trace;"constraint"===p.contours.type&&(p.fillcolor&&d.opacity(p.fillcolor)?n.color=d.addOpacity(p.fillcolor,1):p.contours.showlines&&d.opacity(p.line.color)&&(n.color=d.addOpacity(p.line.color,1)))}),o}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot").plot,style:y("./style"),colorbar:y("./colorbar"),hoverPoints:y("./hover"),moduleType:"trace",name:"contour",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_,t,e){if(e||(e={}),g("contours.showlabels")){var i=_.font;d.coerceFont(g,"contours.labelfont",{family:i.family,size:i.size,color:t}),g("contours.labelformat")}!1!==e.hasHover&&g("zhoverformat")}},{"../../lib":503}],751:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/colorscale"),_=y("./end_plus");$.exports=function(t){var e=t.contours,i=e.start,r=_(e),o=e.size||1,n=Math.floor((r-i)/o)+1,p="lines"===e.coloring?0:1,s=g.extractOpts(t);isFinite(o)||(o=1,n=1);var a,c,u=s.reversescale?g.flipScale(s.colorscale):s.colorscale,h=u.length,v=new Array(h),f=new Array(h);if("heatmap"===e.coloring){var l=s.min,x=s.max;for(c=0;c<h;c++)v[c]=(a=u[c])[0]*(x-l)+l,f[c]=a[1];var m=d.extent([l,x,e.start,e.start+o*(n-1)]),w=m[l<x?0:1],b=m[l<x?1:0];w!==l&&(v.splice(0,0,w),f.splice(0,0,f[0])),b!==x&&(v.push(b),f.push(f[f.length-1]))}else for(c=0;c<h;c++)v[c]=((a=u[c])[0]*(n+p-1)-p/2)*o+i,f[c]=a[1];return g.makeColorScaleFunc({domain:v,range:f},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(y,$,ee){"use strict";var d=y("./constants");function g(_,t){var e=(t[0][0]>_?0:1)+(t[0][1]>_?0:2)+(t[1][1]>_?0:4)+(t[1][0]>_?0:8);return 5===e||10===e?_>(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}$.exports=function(_){var t,e,i,r,o,n,p,s,a,c=_[0].z,u=c.length,h=c[0].length,v=2===u||2===h;for(e=0;e<u-1;e++)for(r=[],0===e&&(r=r.concat(d.BOTTOMSTART)),e===u-2&&(r=r.concat(d.TOPSTART)),t=0;t<h-1;t++)for(i=r.slice(),0===t&&(i=i.concat(d.LEFTSTART)),t===h-2&&(i=i.concat(d.RIGHTSTART)),o=t+","+e,n=[[c[e][t],c[e][t+1]],[c[e+1][t],c[e+1][t+1]]],a=0;a<_.length;a++)(p=g((s=_[a]).level,n))&&(s.crossings[o]=p,-1!==i.indexOf(p)&&(s.starts.push([t,e]),v&&-1!==i.indexOf(p,i.indexOf(p)+1)&&s.starts.push([t,e])))}},{"./constants":739}],753:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing"),t=y("../../components/colorscale"),e=y("../../lib/svg_text_utils"),i=y("../../plots/cartesian/axes"),r=y("../../plots/cartesian/set_convert"),o=y("../heatmap/plot"),n=y("./make_crossings"),p=y("./find_all_paths"),s=y("./empty_pathinfo"),a=y("./convert_to_constraints"),c=y("./close_boundaries"),u=y("./constants"),h=u.LABELOPTIMIZER;function v(x,m){var w,b,k,T,L,A,D="",S=0,C=x.edgepaths.map(function(Z,Y){return Y}),R=!0;function F(Z){return Math.abs(Z[1]-m[2][1])<.01}function U(Z){return Math.abs(Z[0]-m[2][0])<.01}for(;C.length;){for(A=_.smoothopen(x.edgepaths[S],x.smoothing),D+=R?A:A.replace(/^M/,"L"),C.splice(C.indexOf(S),1),w=x.edgepaths[S][x.edgepaths[S].length-1],T=-1,k=0;k<4;k++){if(!w){g.log("Missing end?",S,x);break}for(Math.abs(w[1]-m[0][1])<.01&&!U(w)?b=m[1]:Math.abs(w[0]-m[0][0])<.01?b=m[0]:F(w)?b=m[3]:U(w)&&(b=m[2]),L=0;L<x.edgepaths.length;L++){var X=x.edgepaths[L][0];Math.abs(w[0]-b[0])<.01?Math.abs(w[0]-X[0])<.01&&(X[1]-w[1])*(b[1]-X[1])>=0&&(b=X,T=L):Math.abs(w[1]-b[1])<.01?Math.abs(w[1]-X[1])<.01&&(X[0]-w[0])*(b[0]-X[0])>=0&&(b=X,T=L):g.log("endpt to newendpt is not vert. or horz.",w,b,X)}if(w=b,T>=0)break;D+="L"+b}if(T===x.edgepaths.length){g.log("unclosed perimeter path");break}(R=-1===C.indexOf(S=T))&&(S=C[0],D+="Z")}for(S=0;S<x.paths.length;S++)D+=_.smoothclosed(x.paths[S],x.smoothing);return D}function f(x,m,w,b){var k=m.width/2,T=m.height/2,L=x.x,A=x.y,I=x.theta,D=Math.cos(I)*k,S=Math.sin(I)*k,C=(L>b.center?b.right-L:L-b.left)/(D+Math.abs(Math.sin(I)*T)),R=(A>b.middle?b.bottom-A:A-b.top)/(Math.abs(S)+Math.cos(I)*T);if(C<1||R<1)return 1/0;var F=h.EDGECOST*(1/(C-1)+1/(R-1));F+=h.ANGLECOST*I*I;for(var H=L-D,U=A-S,X=L+D,Z=A+S,Y=0;Y<w.length;Y++){var W=w[Y],te=Math.cos(W.theta)*W.width/2,z=Math.sin(W.theta)*W.width/2,N=2*g.segmentDistance(H,U,X,Z,W.x-te,W.y-z,W.x+te,W.y+z)/(m.height+W.height),V=W.level===m.level,Q=V?h.SAMELEVELDISTANCE:1;if(N<=Q)return 1/0;F+=h.NEIGHBORCOST*(V?h.SAMELEVELFACTOR:1)/(N-Q)}return F}function l(x){var m,w,b=x.trace._emptypoints,k=[],T=x.z.length,L=x.z[0].length,A=[];for(m=0;m<L;m++)A.push(1);for(m=0;m<T;m++)k.push(A.slice());for(m=0;m<b.length;m++)k[(w=b[m])[0]][w[1]]=0;return x.zmask=k,k}ee.plot=function(x,m,w,b){var k=m.xaxis,T=m.yaxis;g.makeTraceGroups(b,w,"contour").each(function(L){var A=d.select(this),I=L[0],S=I.x,C=I.y,R=I.trace.contours,F=s(R,m,I),H=g.ensureSingle(A,"g","heatmapcoloring"),U=[];"heatmap"===R.coloring&&(U=[L]),o(x,m,U,H),n(F),p(F);var V,Q,j,X=k.c2p(S[0],!0),Z=k.c2p(S[S.length-1],!0),Y=T.c2p(C[0],!0),W=T.c2p(C[C.length-1],!0),te=[[X,W],[Z,W],[Z,Y],[X,Y]],z=F;"constraint"===R.type&&(z=a(F,R._operation)),V=te,Q=R,(j=g.ensureSingle(A,"g","contourbg").selectAll("path").data("fill"===Q.coloring?[0]:[])).enter().append("path"),j.exit().remove(),j.attr("d","M"+V.join("L")+"Z").style("stroke","none"),function(N,V,Q,j){var J="fill"===j.coloring||"constraint"===j.type&&"="!==j._operation,K="M"+Q.join("L")+"Z";J&&c(V,j);var re=g.ensureSingle(N,"g","contourfill").selectAll("path").data(J?V:[]);re.enter().append("path"),re.exit().remove(),re.each(function(ie){var ce=(ie.prefixBoundary?K:"")+v(ie,Q);ce?d.select(this).attr("d",ce).style("stroke","none"):d.select(this).remove()})}(A,z,te,R),function(N,V,Q,j,J){var K=g.ensureSingle(N,"g","contourlines"),re=!1!==J.showlines,ie=J.showlabels,ce=re&&ie,se=ee.createLines(K,re||ie,V),de=ee.createLineClip(K,ce,Q,j.trace.uid),ue=N.selectAll("g.contourlabels").data(ie?[0]:[]);if(ue.exit().remove(),ue.enter().append("g").classed("contourlabels",!0),ie){var ge=[],be=[];g.clearLocationCache();var Te=ee.labelFormatter(Q,j),we=_.tester.append("text").attr("data-notex",1).call(_.font,J.labelfont),Le=V[0].xaxis,fe=V[0].yaxis,ve=Le._length,Me=fe._length,ke=Le.range,Ce=fe.range,Pe=g.aggNums(Math.min,null,j.x),Fe=g.aggNums(Math.max,null,j.x),qe=g.aggNums(Math.min,null,j.y),rt=g.aggNums(Math.max,null,j.y),ze=Math.max(Le.c2p(Pe,!0),0),He=Math.min(Le.c2p(Fe,!0),ve),Xe=Math.max(fe.c2p(rt,!0),0),Je=Math.min(fe.c2p(qe,!0),Me),at={};ke[0]<ke[1]?(at.left=ze,at.right=He):(at.left=He,at.right=ze),Ce[0]<Ce[1]?(at.top=Xe,at.bottom=Je):(at.top=Je,at.bottom=Xe),at.middle=(at.top+at.bottom)/2,at.center=(at.left+at.right)/2,ge.push([[at.left,at.top],[at.right,at.top],[at.right,at.bottom],[at.left,at.bottom]]);var pt=Math.sqrt(ve*ve+Me*Me),xt=u.LABELDISTANCE*pt/Math.max(1,V.length/u.LABELINCREASE);se.each(function(Ft){var Dt=ee.calcTextOpts(Ft.level,Te,we,Q);d.select(this).selectAll("path").each(function(){var ot=g.getVisibleSegment(this,at,Dt.height/2);if(ot&&!(ot.len<(Dt.width+Dt.height)*u.LABELMIN))for(var it=Math.min(Math.ceil(ot.len/xt),u.LABELMAX),Et=0;Et<it;Et++){var Xt=ee.findBestTextLocation(this,ot,Dt,be,at);if(!Xt)break;ee.addLabelData(Xt,Dt,be,ge)}})}),we.remove(),ee.drawLabels(ue,be,Q,de,ce?ge:null)}ie&&!re&&se.remove()}(A,F,x,I,R),function(N,V,Q,j,J){var K=j.trace,ie="clip"+K.uid,ce=Q._fullLayout._clips.selectAll("#"+ie).data(K.connectgaps?[]:[0]);if(ce.enter().append("clipPath").classed("contourclip",!0).attr("id",ie),ce.exit().remove(),!1===K.connectgaps){var se={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:V.xaxis,yaxis:V.yaxis,x:j.x,y:j.y,z:l(j),smoothing:0};n([se]),p([se]),c([se],{type:"levels"}),g.ensureSingle(ce,"path","").attr("d",(se.prefixBoundary?"M"+J.join("L")+"Z":"")+v(se,J))}else ie=null;_.setClipUrl(N,ie,Q)}(A,m,x,I,te)})},ee.createLines=function(x,m,w){var b=w[0].smoothing,k=x.selectAll("g.contourlevel").data(m?w:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlevel",!0),m){var T=k.selectAll("path.openline").data(function(A){return A.pedgepaths||A.edgepaths});T.exit().remove(),T.enter().append("path").classed("openline",!0),T.attr("d",function(A){return _.smoothopen(A,b)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var L=k.selectAll("path.closedline").data(function(A){return A.ppaths||A.paths});L.exit().remove(),L.enter().append("path").classed("closedline",!0),L.attr("d",function(A){return _.smoothclosed(A,b)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return k},ee.createLineClip=function(x,m,w,b){var k=m?"clipline"+b:null,T=w._fullLayout._clips.selectAll("#"+k).data(m?[0]:[]);return T.exit().remove(),T.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),_.setClipUrl(x,k,w),T},ee.labelFormatter=function(x,m){var w=x._fullLayout,b=m.trace,k=b.contours,T={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)T.tickformat=k.labelformat,r(T,w);else{var L=t.extractOpts(b);if(L&&L.colorbar&&L.colorbar._axis)T=L.colorbar._axis;else{if("constraint"===k.type){var A=k.value;T.range=Array.isArray(A)?[A[0],A[A.length-1]]:[A,A]}else T.range=[k.start,k.end],T.nticks=(k.end-k.start)/k.size;T.range[0]===T.range[1]&&(T.range[1]+=T.range[0]||1),T.nticks||(T.nticks=1e3),r(T,w),i.prepTicks(T),T._tmin=null,T._tmax=null}}return function(I){return i.tickText(T,I).text}},ee.calcTextOpts=function(x,m,w,b){var k=m(x);w.text(k).call(e.convertToTspans,b);var T=w.node(),L=_.bBox(T,!0);return{text:k,width:L.width,height:L.height,fontSize:+T.style["font-size"].replace("px",""),level:x,dy:(L.top+L.bottom)/2}},ee.findBestTextLocation=function(x,m,w,b,k){var T,L,A,I,D,S=w.width;m.isClosed?(T=m.min+(L=m.len/h.INITIALSEARCHPOINTS)/2,A=m.max):(T=m.min+(L=(m.len-S)/(h.INITIALSEARCHPOINTS+1))+S/2,A=m.max-(L+S)/2);for(var C=1/0,R=0;R<h.ITERATIONS;R++){for(var F=T;F<A;F+=L){var H=g.getTextLocation(x,m.total,F,S),U=f(H,w,b,k);U<C&&(C=U,D=H,I=F)}if(C>2*h.MAXCOST)break;R&&(L/=2),A=(T=I-L/2)+1.5*L}if(C<=h.MAXCOST)return D},ee.addLabelData=function(x,m,w,b){var k=m.fontSize,T=m.width+k/3,L=Math.max(0,m.height-k/3),A=x.x,I=x.y,D=x.theta,S=Math.sin(D),C=Math.cos(D),R=function(H,U){return[A+H*C-U*S,I+H*S+U*C]},F=[R(-T/2,-L/2),R(-T/2,L/2),R(T/2,L/2),R(T/2,-L/2)];w.push({text:m.text,x:A,y:I,dy:m.dy,theta:D,level:m.level,width:T,height:L}),b.push(F)},ee.drawLabels=function(x,m,w,b,k){var T=x.selectAll("text").data(m,function(I){return I.text+","+I.x+","+I.y+","+I.theta});if(T.exit().remove(),T.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(I){var D=I.x+Math.sin(I.theta)*I.dy,S=I.y-Math.cos(I.theta)*I.dy;d.select(this).text(I.text).attr({x:D,y:S,transform:"rotate("+180*I.theta/Math.PI+" "+D+" "+S+")"}).call(e.convertToTspans,w)}),k){for(var L="",A=0;A<k.length;A++)L+="M"+k[A].join("L")+"Z";g.ensureSingle(b,"path","").attr("d",L)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../lib");function _(t,e,i){var r={type:"linear",range:[t,e]};return d.autoTicks(r,(e-t)/(i||15)),r}$.exports=function(t,e){var i=t.contours;if(t.autocontour){var r=t.zmin,o=t.zmax;(t.zauto||void 0===r)&&(r=g.aggNums(Math.min,null,e)),(t.zauto||void 0===o)&&(o=g.aggNums(Math.max,null,e));var n=_(r,o,t.ncontours);i.size=n.dtick,i.start=d.tickFirst(n),n.range.reverse(),i.end=d.tickFirst(n),i.start===r&&(i.start+=i.size),i.end===o&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),t._input.contours||(t._input.contours={}),g.extendFlat(t._input.contours,{start:i.start,end:i.end,size:i.size}),t._input.autocontour=!0}else if("constraint"!==i.type){var p,s=i.start,a=i.end,c=t._input.contours;s>a&&(i.start=c.start=a,a=i.end=c.end=s,s=i.start),!(i.size>0)&&(p=s===a?1:_(s,a,t.ncontours).dtick,c.size=i.size=p)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("../heatmap/style"),t=y("./make_color_map");$.exports=function(e){var i=d.select(e).selectAll("g.contour");i.style("opacity",function(r){return r[0].trace.opacity}),i.each(function(r){var o=d.select(this),n=r[0].trace,p=n.contours,s=n.line,a=p.size||1,c=p.start,u="constraint"===p.type,h=!u&&"lines"===p.coloring,v=!u&&"fill"===p.coloring,f=h||v?t(n):null;o.selectAll("g.contourlevel").each(function(m){d.select(this).selectAll("path").call(g.lineGroupStyle,s.width,h?f(m.level):s.color,s.dash)});var l=p.labelfont;if(o.selectAll("g.contourlabels text").each(function(m){g.font(d.select(this),{family:l.family,size:l.size,color:l.color||(h?f(m.level):s.color)})}),u)o.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(v){var x;o.selectAll("g.contourfill path").style("fill",function(m){return void 0===x&&(x=m.level),f(m.level+.5*a)}),void 0===x&&(x=c),o.selectAll("g.contourbg path").style("fill",f(x-.5*a))}}),_(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/defaults"),g=y("./label_defaults");$.exports=function(_,t,e,i,r){var o,n=e("contours.coloring"),p="";"fill"===n&&(o=e("contours.showlines")),!1!==o&&("lines"!==n&&(p=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==n&&(!0!==_.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,d(_,t,i,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),g(e,i,p,r)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(y,$,ee){"use strict";var d=y("../heatmap/attributes"),g=y("../contour/attributes"),_=y("../../components/colorscale/attributes"),t=y("../../lib/extend").extendFlat,e=g.contours;$.exports=t({carpet:{valType:"string",editType:"calc"},z:d.z,a:d.x,a0:d.x0,da:d.dx,b:d.y,b0:d.y0,db:d.dy,text:d.text,hovertext:d.hovertext,transpose:d.transpose,atype:d.xtype,btype:d.ytype,fillcolor:g.fillcolor,autocontour:g.autocontour,ncontours:g.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:g.line.color,width:g.line.width,dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},transforms:void 0},_("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/calc"),g=y("../../lib"),_=y("../heatmap/convert_column_xyz"),t=y("../heatmap/clean_2d_array"),e=y("../heatmap/interp2d"),i=y("../heatmap/find_empties"),r=y("../heatmap/make_bound_array"),o=y("./defaults"),n=y("../carpet/lookup_carpetid"),p=y("../contour/set_contours");$.exports=function(s,a){var c=a._carpetTrace=n(s,a);if(c&&c.visible&&"legendonly"!==c.visible){if(!a.a||!a.b){var u=s.data[c.index],h=s.data[a.index];h.a||(h.a=u.a),h.b||(h.b=u.b),o(h,a,a._defaultColor,s._fullLayout)}var v=function(f,l){var x,m,w,b,k,T,L,A=l._carpetTrace,I=A.aaxis,D=A.baxis;I._minDtick=0,D._minDtick=0,g.isArray1D(l.z)&&_(l,I,D,"a","b",["z"]),x=l._a=l._a||l.a,b=l._b=l._b||l.b,x=x?I.makeCalcdata(l,"_a"):[],b=b?D.makeCalcdata(l,"_b"):[],m=l.a0||0,w=l.da||1,k=l.b0||0,T=l.db||1,L=l._z=t(l._z||l.z,l.transpose),l._emptypoints=i(L),e(L,l._emptypoints);var S=g.maxRowLength(L),U={a:r(l,"scaled"===l.xtype?"":x,m,w,S,I),b:r(l,"scaled"===l.ytype?"":b,k,T,L.length,D),z:L};return"levels"===l.contours.type&&"none"!==l.contours.coloring&&d(f,l,{vals:L,containerStr:"",cLetter:"z"}),[U]}(s,a);return p(a,a._z),v}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../heatmap/xyz_defaults"),_=y("./attributes"),t=y("../contour/constraint_defaults"),e=y("../contour/contours_defaults"),i=y("../contour/style_defaults");$.exports=function(r,o,n,p){function s(a,c){return d.coerce(r,o,_,a,c)}if(s("carpet"),r.a&&r.b){if(!g(r,o,s,p,"a","b"))return void(o.visible=!1);s("text"),"constraint"===s("contours.type")?t(r,o,s,p,n,{hasHover:!1}):(e(r,o,s,function(a){return d.coerce2(r,o,_,a)}),i(r,o,s,p,{hasHover:!1}))}else o._defaultColor=n,o._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../contour/colorbar"),calc:y("./calc"),plot:y("./plot"),style:y("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../carpet/map_1d_array"),_=y("../carpet/makepath"),t=y("../../components/drawing"),e=y("../../lib"),i=y("../contour/make_crossings"),r=y("../contour/find_all_paths"),o=y("../contour/plot"),n=y("../contour/constants"),p=y("../contour/convert_to_constraints"),s=y("../contour/empty_pathinfo"),a=y("../contour/close_boundaries"),c=y("../carpet/lookup_carpetid"),u=y("../carpet/axis_aligned_line");function h(l,x,m){var w=l.getPointAtLength(x),b=l.getPointAtLength(m),k=b.x-w.x,T=b.y-w.y,L=Math.sqrt(k*k+T*T);return[k/L,T/L]}function v(l){var x=Math.sqrt(l[0]*l[0]+l[1]*l[1]);return[l[0]/x,l[1]/x]}function f(l,x){var m=Math.abs(l[0]*x[0]+l[1]*x[1]);return Math.sqrt(1-m*m)/m}$.exports=function(l,x,m,w){var b=x.xaxis,k=x.yaxis;e.makeTraceGroups(w,m,"contour").each(function(T){var L=d.select(this),A=T[0],I=A.trace,D=I._carpetTrace=c(l,I),S=l.calcdata[D.index][0];if(D.visible&&"legendonly"!==D.visible){var C=A.a,R=A.b,F=I.contours,H=s(F,x,A),U="constraint"===F.type,X=F._operation,Z=U?"="===X?"lines":"fill":F.coloring,Y=[[C[0],R[R.length-1]],[C[C.length-1],R[R.length-1]],[C[C.length-1],R[0]],[C[0],R[0]]];i(H),r(H,1e-8*(C[C.length-1]-C[0]),1e-8*(R[R.length-1]-R[0]));var z,N,V,Q,j=H;"constraint"===F.type&&(j=p(H,X)),function(ie,ce){var se,de,ue,ge,be,Te,we,Le,fe;for(se=0;se<ie.length;se++){for(be=(ge=ie[se]).pedgepaths=[],Te=ge.ppaths=[],de=0;de<ge.edgepaths.length;de++){for(fe=ge.edgepaths[de],we=[],ue=0;ue<fe.length;ue++)we[ue]=ce(fe[ue]);be.push(we)}for(de=0;de<ge.paths.length;de++){for(fe=ge.paths[de],Le=[],ue=0;ue<fe.length;ue++)Le[ue]=ce(fe[ue]);Te.push(Le)}}}(H,re);var J=[];for(Q=S.clipsegments.length-1;Q>=0;Q--)N=g([],(z=S.clipsegments[Q]).x,b.c2p),V=g([],z.y,k.c2p),N.reverse(),V.reverse(),J.push(_(N,V,z.bicubic));var K="M"+J.join("L")+"Z";(function(ie,ce,se,de,ue,ge){var be,Te,we,Le,fe=e.ensureSingle(ie,"g","contourbg").selectAll("path").data("fill"!==ge||ue?[]:[0]);fe.enter().append("path"),fe.exit().remove();var ve=[];for(Le=0;Le<ce.length;Le++)Te=g([],(be=ce[Le]).x,se.c2p),we=g([],be.y,de.c2p),ve.push(_(Te,we,be.bicubic));fe.attr("d","M"+ve.join("L")+"Z").style("stroke","none")})(L,S.clipsegments,b,k,U,Z),function(ie,ce,se,de,ue,ge,be,Te,we,Le,fe){var ve="fill"===Le;ve&&a(ue,ie.contours);var Me=e.ensureSingle(ce,"g","contourfill").selectAll("path").data(ve?ue:[]);Me.enter().append("path"),Me.exit().remove(),Me.each(function(ke){var Ce=(ke.prefixBoundary?fe:"")+function(Pe,Fe,qe,rt,ze,He,Xe,Je){var at,pt,xt,Ft,Dt,ot,it,Et="",Xt=Fe.edgepaths.map(function(ct,vt){return vt}),nr=!0,Ue=1e-4*Math.abs(qe[0][0]-qe[2][0]),We=1e-4*Math.abs(qe[0][1]-qe[2][1]);function Be(ct){return Math.abs(ct[1]-qe[0][1])<We}function Qe(ct){return Math.abs(ct[1]-qe[2][1])<We}function Ae(ct){return Math.abs(ct[0]-qe[0][0])<Ue}function De(ct){return Math.abs(ct[0]-qe[2][0])<Ue}function Oe(ct,vt){var ft,It,ut,Ot,Rt="";for(Be(ct)&&!De(ct)||Qe(ct)&&!Ae(ct)?(Ot=ze.aaxis,ut=u(ze,He,[ct[0],vt[0]],.5*(ct[1]+vt[1]))):(Ot=ze.baxis,ut=u(ze,He,.5*(ct[0]+vt[0]),[ct[1],vt[1]])),ft=1;ft<ut.length;ft++)for(Rt+=Ot.smoothing?"C":"L",It=0;It<ut[ft].length;It++){var $e=ut[ft][It];Rt+=[Xe.c2p($e[0]),Je.c2p($e[1])]+" "}return Rt}for(at=0,pt=null;Xt.length;){for(pt&&(Et+=Oe(pt,Fe.edgepaths[at][0])),it=t.smoothopen(Fe.edgepaths[at].map(rt),Fe.smoothing),Et+=nr?it:it.replace(/^M/,"L"),Xt.splice(Xt.indexOf(at),1),pt=Fe.edgepaths[at][Fe.edgepaths[at].length-1],Dt=-1,Ft=0;Ft<4;Ft++){if(!pt){e.log("Missing end?",at,Fe);break}for(Be(pt)&&!De(pt)?xt=qe[1]:Ae(pt)?xt=qe[0]:Qe(pt)?xt=qe[3]:De(pt)&&(xt=qe[2]),ot=0;ot<Fe.edgepaths.length;ot++){var et=Fe.edgepaths[ot][0];Math.abs(pt[0]-xt[0])<Ue?Math.abs(pt[0]-et[0])<Ue&&(et[1]-pt[1])*(xt[1]-et[1])>=0&&(xt=et,Dt=ot):Math.abs(pt[1]-xt[1])<We?Math.abs(pt[1]-et[1])<We&&(et[0]-pt[0])*(xt[0]-et[0])>=0&&(xt=et,Dt=ot):e.log("endpt to newendpt is not vert. or horz.",pt,xt,et)}if(Dt>=0)break;Et+=Oe(pt,xt),pt=xt}if(Dt===Fe.edgepaths.length){e.log("unclosed perimeter path");break}(nr=-1===Xt.indexOf(at=Dt))&&(at=Xt[0],Et+=Oe(pt,xt)+"Z",pt=null)}for(at=0;at<Fe.paths.length;at++)Et+=t.smoothclosed(Fe.paths[at].map(rt),Fe.smoothing);return Et}(0,ke,ge,be,Te,we,se,de);Ce?d.select(this).attr("d",Ce).style("stroke","none"):d.select(this).remove()})}(I,L,b,k,j,Y,re,D,S,Z,K),function(ie,ce,se,de,ue,ge,be){var Te=e.ensureSingle(ie,"g","contourlines"),we=!1!==ue.showlines,Le=ue.showlabels,fe=we&&Le,ve=o.createLines(Te,we||Le,ce),Me=o.createLineClip(Te,fe,se,de.trace.uid),ke=ie.selectAll("g.contourlabels").data(Le?[0]:[]);if(ke.exit().remove(),ke.enter().append("g").classed("contourlabels",!0),Le){var Fe=ge.xaxis._length,qe=ge.yaxis._length,rt=[[[0,0],[Fe,0],[Fe,qe],[0,qe]]],ze=[];e.clearLocationCache();var He=o.labelFormatter(se,de),Xe=t.tester.append("text").attr("data-notex",1).call(t.font,ue.labelfont),Je={left:0,right:Fe,center:Fe/2,top:0,bottom:qe,middle:qe/2},at=Math.sqrt(Fe*Fe+qe*qe),pt=n.LABELDISTANCE*at/Math.max(1,ce.length/n.LABELINCREASE);ve.each(function(xt){var Ft=o.calcTextOpts(xt.level,He,Xe,se);d.select(this).selectAll("path").each(function(Dt){var ot=e.getVisibleSegment(this,Je,Ft.height/2);if(ot&&(function(nr,Ue,We,Be,Qe,Ae){for(var De,Oe=0;Oe<We.pedgepaths.length;Oe++)Ue===We.pedgepaths[Oe]&&(De=We.edgepaths[Oe]);if(De){var Ie=Qe.a[0],et=Qe.a[Qe.a.length-1],ct=Qe.b[0],vt=Qe.b[Qe.b.length-1],It=h(nr,0,1),ut=h(nr,Be.total,Be.total-1),Ot=ft(De[0],It),Rt=Be.total-ft(De[De.length-1],ut);Be.min<Ot&&(Be.min=Ot),Be.max>Rt&&(Be.max=Rt),Be.len=Be.max-Be.min}function ft($e,yt){var Bt,Ut=0;return(Math.abs($e[0]-Ie)<.1||Math.abs($e[0]-et)<.1)&&(Bt=v(Qe.dxydb_rough($e[0],$e[1],.1)),Ut=Math.max(Ut,Ae*f(yt,Bt)/2)),(Math.abs($e[1]-ct)<.1||Math.abs($e[1]-vt)<.1)&&(Bt=v(Qe.dxyda_rough($e[0],$e[1],.1)),Ut=Math.max(Ut,Ae*f(yt,Bt)/2)),Ut}}(this,Dt,xt,ot,be,Ft.height),!(ot.len<(Ft.width+Ft.height)*n.LABELMIN)))for(var it=Math.min(Math.ceil(ot.len/pt),n.LABELMAX),Et=0;Et<it;Et++){var Xt=o.findBestTextLocation(this,ot,Ft,ze,Je);if(!Xt)break;o.addLabelData(Xt,Ft,ze,rt)}})}),Xe.remove(),o.drawLabels(ke,ze,se,Me,fe?rt:null)}Le&&!we&&ve.remove()}(L,H,l,A,F,x,D),t.setClipUrl(L,D._clipPathId,l)}function re(ie){var ce=D.ab2xy(ie[0],ie[1],!0);return[b.c2p(ce[0]),k.c2p(ce[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/attributes"),g=y("../../plots/template_attributes").hovertemplateAttrs,_=y("../../plots/attributes"),t=y("../scattermapbox/attributes"),e=y("../../lib/extend").extendFlat;$.exports=e({lon:t.lon,lat:t.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:t.text,hovertext:t.hovertext,hoverinfo:e({},_.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:g(),showlegend:e({},_.showlegend,{dflt:!1})},d("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib").isArrayOrTypedArray,_=y("../../constants/numerical").BADNUM,t=y("../../components/colorscale/calc"),e=y("../../lib")._;$.exports=function(i,r){for(var o=r._length,n=new Array(o),p=r.z,s=g(p)&&p.length,a=0;a<o;a++){var c=n[a]={},u=r.lon[a],h=r.lat[a];if(c.lonlat=d(u)&&d(h)?[+u,+h]:[_,_],s){var v=p[a];c.z=d(v)?v:_}}return t(i,r,{vals:s?p:[0,1],containerStr:"",cLetter:"z"}),o&&(n[0].t={labels:{lat:e(i,"lat:")+" ",lon:e(i,"lon:")+" "}}),n}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../components/color"),t=y("../../components/colorscale"),e=y("../../constants/numerical").BADNUM,i=y("../../lib/geojson_utils").makeBlank;$.exports=function(r){var o=r[0].trace,n=!0===o.visible&&0!==o._length,p=o._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:i()};if(!n)return p;var s,a=[],c=o.z,u=o.radius,h=g.isArrayOrTypedArray(c)&&c.length,v=g.isArrayOrTypedArray(u);for(s=0;s<r.length;s++){var f=r[s],l=f.lonlat;if(l[0]!==e){var x={};if(h){var m=f.z;x.z=m!==e?m:0}v&&(x.r=d(u[s])&&u[s]>0?+u[s]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:l},properties:x})}}var w=t.extractOpts(o),b=w.reversescale?t.flipScale(w.colorscale):w.colorscale,k=b[0][1],T=["interpolate",["linear"],["heatmap-density"],0,_.opacity(k)<1?k:_.addOpacity(k,0)];for(s=1;s<b.length;s++)T.push(b[s][0],b[s][1]);return g.extendFlat(p.heatmap.paint,{"heatmap-weight":h?["interpolate",["linear"],["get","z"],w.min,0,w.max,1]:1/(w.max-w.min),"heatmap-color":T,"heatmap-radius":v?{type:"identity",property:"r"}:o.radius,"heatmap-opacity":o.opacity}),p.geojson={type:"FeatureCollection",features:a},p.heatmap.layout.visibility="visible",p}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/defaults"),_=y("./attributes");$.exports=function(t,e,i,r){function o(a,c){return d.coerce(t,e,_,a,c)}var n=o("lon")||[],p=o("lat")||[],s=Math.min(n.length,p.length);s?(e._length=s,o("z"),o("radius"),o("below"),o("text"),o("hovertext"),o("hovertemplate"),g(t,e,r,o,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(y,$,ee){"use strict";$.exports=function(d,g){return d.lon=g.lon,d.lat=g.lat,d.z=g.z,d}},{}],767:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../scattermapbox/hover").hoverPoints,_=y("../scattermapbox/hover").getExtraText;$.exports=function(t,e,i){var r=g(t,e,i);if(r){var o=r[0],n=o.cd,p=n[0].trace,s=n[o.index];if(delete o.color,"z"in s){var a=o.subplot.mockAxis;o.z=s.z,o.zLabel=d.tickText(a,a.c2l(s.z),"hover").text}return o.extraText=_(p,s,n[0].t.labels),[o]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),formatLabels:y("../scattermapbox/format_labels"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover"),eventData:y("./event_data"),getBelow:function(d,g){for(var _=g.getMapLayers(),t=0;t<_.length;t++){var e=_[t],i=e.id;if("symbol"===e.type&&"string"==typeof i&&-1===i.indexOf("plotly-"))return i}},moduleType:"trace",name:"densitymapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(y,$,ee){"use strict";var d=y("./convert"),g=y("../../plots/mapbox/constants").traceLayerPrefix;function _(e,i){this.type="densitymapbox",this.subplot=e,this.uid=i,this.sourceId="source-"+i,this.layerList=[["heatmap",g+i+"-heatmap"]],this.below=null}var t=_.prototype;t.update=function(e){var i=this.subplot,r=this.layerList,o=d(e),n=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(o.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(o,n),this.below=n);for(var p=0;p<r.length;p++){var s=r[p],c=s[1],u=o[s[0]];i.setOptions(c,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&i.setOptions(c,"setPaintProperty",u.paint)}},t._addLayers=function(e,i){for(var r=this.subplot,o=this.layerList,n=this.sourceId,p=0;p<o.length;p++){var s=o[p],a=s[0],c=e[a];r.addLayer({type:a,id:s[1],source:n,layout:c.layout,paint:c.paint},i)}},t._removeLayers=function(){for(var e=this.subplot.map,i=this.layerList,r=i.length-1;r>=0;r--)e.removeLayer(i[r][1])},t.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},$.exports=function(e,i){var r=i[0].trace,o=new _(e,r.uid),n=o.sourceId,p=d(i),s=o.below=e.belowLookup["trace-"+r.uid];return e.map.addSource(n,{type:"geojson",data:p.geojson}),o._addLayers(p,s),o}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){for(var t=0;t<g.length;t++)g[t].i=t;d.mergeArray(_.text,g,"tx"),d.mergeArray(_.hovertext,g,"htx");var e=_.marker;if(e){d.mergeArray(e.opacity,g,"mo"),d.mergeArray(e.color,g,"mc");var i=e.line;i&&(d.mergeArray(i.color,g,"mlc"),d.mergeArrayCastPositive(i.width,g,"mlw"))}}},{"../../lib":503}],771:[function(y,$,ee){"use strict";var d,g=y("../bar/attributes"),_=y("../scatter/attributes").line,t=y("../../plots/attributes"),e=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=y("../../plots/template_attributes").hovertemplateAttrs,r=y("../../plots/template_attributes").texttemplateAttrs,o=y("./constants"),n=y("../../lib/extend").extendFlat,p=y("../../components/color");$.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:g.hovertext,hovertemplate:i({},{keys:o.eventDataKeys}),hoverinfo:n({},t.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),text:g.text,textposition:g.textposition,insidetextanchor:n({},g.insidetextanchor,{dflt:"middle"}),textangle:n({},g.textangle,{dflt:0}),textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:g.outsidetextfont,constraintext:g.constraintext,cliponaxis:g.cliponaxis,orientation:n({},g.orientation,{}),offset:n({},g.offset,{arrayOk:!1}),width:n({},g.width,{arrayOk:!1}),marker:(d=n({},g.marker),delete d.pattern,d),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},_.color,{dflt:p.defaultLine}),width:n({},_.width,{dflt:0,editType:"plot"}),dash:_.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../plots/cartesian/align_period"),_=y("./arrays_to_calcdata"),t=y("../scatter/calc_selection"),e=y("../../constants/numerical").BADNUM;function i(r){return r===e?0:r}$.exports=function(r,o){var n,p,s,a,c,u,h,v,f=d.getFromId(r,o.xaxis||"x"),l=d.getFromId(r,o.yaxis||"y");"h"===o.orientation?(n=f.makeCalcdata(o,"x"),s=l.makeCalcdata(o,"y"),a=g(o,l,"y",s),c=!!o.yperiodalignment,u="y"):(n=l.makeCalcdata(o,"y"),s=f.makeCalcdata(o,"x"),a=g(o,f,"x",s),c=!!o.xperiodalignment,u="x"),p=a.vals;var x,m=Math.min(p.length,n.length),w=new Array(m);for(o._base=[],h=0;h<m;h++){n[h]<0&&(n[h]=e);var b=!1;n[h]!==e&&h+1<m&&n[h+1]!==e&&(b=!0),v=w[h]={p:p[h],s:n[h],cNext:b},o._base[h]=-.5*v.s,c&&(w[h].orig_p=s[h],w[h][u+"End"]=a.ends[h],w[h][u+"Start"]=a.starts[h]),o.ids&&(v.id=String(o.ids[h])),0===h&&(w[0].vTotal=0),w[0].vTotal+=i(v.s),v.begR=i(v.s)/i(w[0].s)}for(h=0;h<m;h++)(v=w[h]).s!==e&&(v.sumR=v.s/w[0].vTotal,v.difR=void 0!==x?v.s/x:1,x=v.s);return _(w,o),t(w,o),w}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(y,$,ee){"use strict";$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(y,$,ee){"use strict";var d=y("../bar/cross_trace_calc").setGroupPositions;$.exports=function(g,_){var t,e,i=g._fullLayout,r=g._fullData,o=g.calcdata,n=_.xaxis,p=_.yaxis,s=[],a=[],c=[];for(e=0;e<r.length;e++){var u=r[e];!0===u.visible&&u.xaxis===n._id&&u.yaxis===p._id&&"funnel"===u.type&&(t=o[e],"h"===u.orientation?c.push(t):a.push(t),s.push(t))}var v={mode:i.funnelmode,norm:i.funnelnorm,gap:i.funnelgap,groupgap:i.funnelgroupgap};for(d(g,n,p,a,v),d(g,p,n,c,v),e=0;e<s.length;e++){t=s[e];for(var f=0;f<t.length;f++)f+1<t.length&&(t[f].nextP0=t[f+1].p0,t[f].nextS0=t[f+1].s0,t[f].nextP1=t[f+1].p1,t[f].nextS1=t[f+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../bar/defaults").handleGroupingDefaults,_=y("../bar/defaults").handleText,t=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),i=y("./attributes"),r=y("../../components/color");$.exports={supplyDefaults:function(o,n,p,s){function a(v,f){return d.coerce(o,n,i,v,f)}if(t(o,n,s,a)){e(o,n,s,a),a("xhoverformat"),a("yhoverformat"),a("orientation",n.y&&!n.x?"v":"h"),a("offset"),a("width");var c=a("text");a("hovertext"),a("hovertemplate");var u=a("textposition");_(o,n,s,a,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===n.textposition||n.texttemplate||a("textinfo",Array.isArray(c)?"text+value":"value");var h=a("marker.color",p);a("marker.line.color",r.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",(f=d.isArrayOrTypedArray(v=h)?"#000":v,r.addOpacity(f,.5*r.opacity(f)))),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else n.visible=!1;var v,f},crossTraceDefaults:function(o,n){var p,s;function a(u){return d.coerce(s._input,s,i,u)}if("group"===n.funnelmode)for(var c=0;c<o.length;c++)p=(s=o[c])._input,g(p,s,n,a)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(y,$,ee){"use strict";$.exports=function(d,g){return d.x="xVal"in g?g.xVal:g.x,d.y="yVal"in g?g.yVal:g.y,"percentInitial"in g&&(d.percentInitial=g.percentInitial),"percentPrevious"in g&&(d.percentPrevious=g.percentPrevious),"percentTotal"in g&&(d.percentTotal=g.percentTotal),g.xa&&(d.xaxis=g.xa),g.ya&&(d.yaxis=g.ya),d}},{}],777:[function(y,$,ee){"use strict";var d=y("../../components/color").opacity,g=y("../bar/hover").hoverOnBars,_=y("../../lib").formatPercent;$.exports=function(t,e,i,r,o){var m,w,b,k,T,n=g(t,e,i,r,o);if(n){var p=n.cd,s=p[0].trace,c=p[n.index];n[("h"===s.orientation?"x":"y")+"LabelVal"]=c.s,n.percentInitial=c.begR,n.percentInitialLabel=_(c.begR,1),n.percentPrevious=c.difR,n.percentPreviousLabel=_(c.difR,1),n.percentTotal=c.sumR,n.percentTotalLabel=_(c.sumR,1);var u=c.hi||s.hoverinfo,h=[];if(u&&"none"!==u&&"skip"!==u){var v="all"===u,f=u.split("+"),l=function(x){return v||-1!==f.indexOf(x)};l("percent initial")&&h.push(n.percentInitialLabel+" of initial"),l("percent previous")&&h.push(n.percentPreviousLabel+" of previous"),l("percent total")&&h.push(n.percentTotalLabel+" of total")}return n.extraText=h.join("<br>"),n.color=(w=s.marker,k=(m=c).mlc||w.line.color,T=m.mlw||w.line.width,d(b=m.mc||w.color)?b:d(k)&&T?k:void 0),[n]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style").style,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(y,$,ee){"use strict";$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t,e){var i=!1;function r(p,s){return d.coerce(_,t,g,p,s)}for(var o=0;o<e.length;o++){var n=e[o];if(n.visible&&"funnel"===n.type){i=!0;break}}i&&(r("funnelmode"),r("funnelgap",.2),r("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing"),t=y("../../constants/numerical").BADNUM,e=y("../bar/plot"),i=y("../bar/uniform_text").clearMinTextSize;function r(o,n,p,s){var a=[],c=[],u=s?n:p,h=s?p:n;return a[0]=u.c2p(o.s0,!0),c[0]=h.c2p(o.p0,!0),a[1]=u.c2p(o.s1,!0),c[1]=h.c2p(o.p1,!0),a[2]=u.c2p(o.nextS0,!0),c[2]=h.c2p(o.nextP0,!0),a[3]=u.c2p(o.nextS1,!0),c[3]=h.c2p(o.nextP1,!0),s?[a,c]:[c,a]}$.exports=function(o,n,p,s){var c,u,f,l,a=o._fullLayout;i("funnel",a),c=o,f=(u=n).xaxis,l=u.yaxis,g.makeTraceGroups(s,p,"trace bars").each(function(x){var m=d.select(this),w=x[0].trace,b=g.ensureSingle(m,"g","regions");if(w.connector&&w.connector.visible){var k="h"===w.orientation,T=b.selectAll("g.region").data(g.identity);T.enter().append("g").classed("region",!0),T.exit().remove();var L=T.size();T.each(function(A,I){if(I===L-1||A.cNext){var D=r(A,f,l,k),S=D[0],C=D[1],R="";S[0]!==t&&C[0]!==t&&S[1]!==t&&C[1]!==t&&S[2]!==t&&C[2]!==t&&S[3]!==t&&C[3]!==t&&(R+=k?"M"+S[0]+","+C[1]+"L"+S[2]+","+C[2]+"H"+S[3]+"L"+S[1]+","+C[1]+"Z":"M"+S[1]+","+C[1]+"L"+S[2]+","+C[3]+"V"+C[2]+"L"+S[1]+","+C[0]+"Z"),""===R&&(R="M0,0Z"),g.ensureSingle(d.select(this),"path").attr("d",R).call(_.setClipUrl,u.layerClipId,c)}})}else b.remove()}),function(c,u,h,v){var f=u.xaxis,l=u.yaxis;g.makeTraceGroups(v,h,"trace bars").each(function(x){var m=d.select(this),w=x[0].trace,b=g.ensureSingle(m,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var k="h"===w.orientation,T=b.selectAll("g.line").data(g.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var L=T.size();T.each(function(A,I){if(I===L-1||A.cNext){var D=r(A,f,l,k),S=D[0],C=D[1],R="";void 0!==S[3]&&void 0!==C[3]&&(k?(R+="M"+S[0]+","+C[1]+"L"+S[2]+","+C[2],R+="M"+S[1]+","+C[1]+"L"+S[3]+","+C[2]):(R+="M"+S[1]+","+C[1]+"L"+S[2]+","+C[3],R+="M"+S[1]+","+C[0]+"L"+S[2]+","+C[2])),""===R&&(R="M0,0Z"),g.ensureSingle(d.select(this),"path").attr("d",R).call(_.setClipUrl,u.layerClipId,c)}})}else b.remove()})}(o,n,p,s),e.plot(o,n,p,s,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("../../components/color"),t=y("../../constants/interactions").DESELECTDIM,e=y("../bar/style"),i=y("../bar/uniform_text").resizeText,r=e.styleTextPoints;$.exports={style:function(o,n,p){var s=p||d.select(o).selectAll("g.funnellayer").selectAll("g.trace");i(o,s,"funnel"),s.style("opacity",function(a){return a[0].trace.opacity}),s.each(function(a){var c=d.select(this),u=a[0].trace;c.selectAll(".point > path").each(function(h){if(!h.isBlank){var v=u.marker;d.select(this).call(_.fill,h.mc||v.color).call(_.stroke,h.mlc||v.line.color).call(g.dashLine,v.line.dash,h.mlw||v.line.width).style("opacity",u.selectedpoints&&!h.selected?t:1)}}),r(c,u,o),c.selectAll(".regions").each(function(){d.select(this).selectAll("path").style("stroke-width",0).call(_.fill,u.connector.fillcolor)}),c.selectAll(".lines").each(function(){var h=u.connector.line;g.lineGroupStyle(d.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(y,$,ee){"use strict";var d=y("../pie/attributes"),g=y("../../plots/attributes"),_=y("../../plots/domain").attributes,t=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/template_attributes").texttemplateAttrs,i=y("../../lib/extend").extendFlat;$.exports={labels:d.labels,label0:d.label0,dlabel:d.dlabel,values:d.values,marker:{colors:d.marker.colors,line:{color:i({},d.marker.line.color,{dflt:null}),width:i({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:d.text,hovertext:d.hovertext,scalegroup:i({},d.scalegroup,{}),textinfo:i({},d.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:i({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","text","percent"]}),textposition:i({},d.textposition,{values:["inside","none"],dflt:"inside"}),textfont:d.textfont,insidetextfont:d.insidetextfont,title:{text:d.title.text,font:d.title.font,position:i({},d.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:_({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(y,$,ee){"use strict";var d=y("../../plots/plots");ee.name="funnelarea",ee.plot=function(g,_,t,e){d.plotBasePlot(ee.name,g,_,t,e)},ee.clean=function(g,_,t,e){d.cleanBasePlot(ee.name,g,_,t,e)}},{"../../plots/plots":619}],785:[function(y,$,ee){"use strict";var d=y("../pie/calc");$.exports={calc:function(g,_){return d.calc(g,_)},crossTraceCalc:function(g){d.crossTraceCalc(g,{type:"funnelarea"})}}},{"../pie/calc":902}],786:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../../plots/domain").defaults,t=y("../bar/defaults").handleText,e=y("../pie/defaults").handleLabelsAndValues;$.exports=function(i,r,o,n){function p(x,m){return d.coerce(i,r,g,x,m)}var s=p("labels"),a=p("values"),c=e(s,a),u=c.len;if(r._hasLabels=c.hasLabels,r._hasValues=c.hasValues,!r._hasLabels&&r._hasValues&&(p("label0"),p("dlabel")),u){r._length=u,p("marker.line.width")&&p("marker.line.color",n.paper_bgcolor),p("marker.colors"),p("scalegroup");var h,v=p("text"),f=p("texttemplate");if(f||(h=p("textinfo",Array.isArray(v)?"text+percent":"percent")),p("hovertext"),p("hovertemplate"),f||h&&"none"!==h){var l=p("textposition");t(i,r,n,p,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}_(r,n,p),p("title.text")&&(p("title.position"),d.coerceFont(p,"title.font",n.font)),p("aspectratio"),p("baseratio")}else r.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:y("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style"),styleOne:y("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(y,$,ee){"use strict";var d=y("../pie/layout_attributes").hiddenlabels;$.exports={hiddenlabels:d,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t){function e(i,r){return d.coerce(_,t,g,i,r)}e("hiddenlabels"),e("funnelareacolorway",t.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("../../lib"),t=_.strScale,e=_.strTranslate,i=y("../../lib/svg_text_utils"),r=y("../bar/plot").toMoveInsideBar,o=y("../bar/uniform_text"),n=o.recordMinTextSize,p=o.clearMinTextSize,s=y("../pie/helpers"),a=y("../pie/plot"),c=a.attachFxHandlers,u=a.determineInsideTextFont,h=a.layoutAreas,v=a.prerenderTitles,f=a.positionTitleOutside,l=a.formatSliceLabel;function x(m,w){return"l"+(w[0]-m[0])+","+(w[1]-m[1])}$.exports=function(m,w){var b=m._fullLayout;p("funnelarea",b),v(w,m),h(w,b._size),_.makeTraceGroups(b._funnelarealayer,w,"trace").each(function(k){var T=d.select(this),L=k[0],A=L.trace;(function(I){if(I.length){var D=I[0],S=D.trace,C=S.aspectratio,R=S.baseratio;R>.999&&(R=.999);var F,W,te,H=Math.pow(R,2),U=D.vTotal,X=U,Z=U*H/(1-H)/U,z=[];for(z.push(Y()),W=I.length-1;W>-1;W--)(te=I[W]).hidden||(Z+=te.v/X,z.push(Y()));var V=1/0,Q=-1/0;for(W=0;W<z.length;W++)F=z[W],V=Math.min(V,F[1]),Q=Math.max(Q,F[1]);for(W=0;W<z.length;W++)z[W][1]-=(Q+V)/2;var J=D.r,K=(Q-V)/2,re=J/z[z.length-1][0],ie=J/K*C;for(D.r=ie*K,W=0;W<z.length;W++)z[W][0]*=re,z[W][1]*=ie;var be,Te,ce=[-(F=z[0])[0],F[1]],se=[F[0],F[1]],de=0;for(W=I.length-1;W>-1;W--)if(!(te=I[W]).hidden){var ue=z[de+=1][0],ge=z[de][1];te.TL=[-ue,ge],te.TR=[ue,ge],te.BL=ce,te.BR=se,te.pxmid=[.5*((be=te.TR)[0]+(Te=te.BR)[0]),.5*(be[1]+Te[1])],ce=te.TL,se=te.TR}}function Y(){var we,Le={x:we=Math.sqrt(Z),y:-we};return[Le.x,Le.y]}})(k),T.each(function(){var I=d.select(this).selectAll("g.slice").data(k);I.enter().append("g").classed("slice",!0),I.exit().remove(),I.each(function(S,C){if(S.hidden)d.select(this).selectAll("path,g").remove();else{S.pointNumber=S.i,S.curveNumber=A.index;var R=L.cx,F=L.cy,H=d.select(this),U=H.selectAll("path.surface").data([S]);U.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),H.call(c,m,k);var X="M"+(R+S.TR[0])+","+(F+S.TR[1])+x(S.TR,S.BR)+x(S.BR,S.BL)+x(S.BL,S.TL)+"Z";U.attr("d",X),l(m,S,L);var Z=s.castOption(A.textposition,S.pts),Y=H.selectAll("g.slicetext").data(S.text&&"none"!==Z?[0]:[]);Y.enter().append("g").classed("slicetext",!0),Y.exit().remove(),Y.each(function(){var W=_.ensureSingle(d.select(this),"text","",function(K){K.attr("data-notex",1)}),te=_.ensureUniformFontSize(m,u(A,S,b.font));W.text(S.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(g.font,te).call(i.convertToTspans,m);var z,N,V,Q=g.bBox(W.node()),j=Math.min(S.BL[1],S.BR[1])+F,J=Math.max(S.TL[1],S.TR[1])+F;N=Math.max(S.TL[0],S.BL[0])+R,V=Math.min(S.TR[0],S.BR[0])+R,(z=r(N,V,j,J,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=te.size,n(A.type,z,b),k[C].transform=z,W.attr("transform",_.getTextTransform(z))})}});var D=d.select(this).selectAll("g.titletext").data(A.title.text?[0]:[]);D.enter().append("g").classed("titletext",!0),D.exit().remove(),D.each(function(){var S=_.ensureSingle(d.select(this),"text","",function(F){F.attr("data-notex",1)}),C=A.title.text;A._meta&&(C=_.templateString(C,A._meta)),S.text(C).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(g.font,A.title.font).call(i.convertToTspans,m);var R=f(L,b._size);S.attr("transform",e(R.x,R.y)+t(Math.min(1,R.scale))+e(R.tx,R.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../pie/style_one"),_=y("../bar/uniform_text").resizeText;$.exports=function(t){var e=t._fullLayout._funnelarealayer.selectAll(".trace");_(t,e,"funnelarea"),e.each(function(i){var r=i[0].trace,o=d.select(this);o.style({opacity:r.opacity}),o.selectAll("path.surface").each(function(n){d.select(this).call(g,n,r)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(y,$,ee){"use strict";var d=y("../scatter/attributes"),g=y("../../plots/attributes"),_=y("../../plots/font_attributes"),t=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,i=y("../../plots/template_attributes").texttemplateAttrs,r=y("../../components/colorscale/attributes"),o=y("../../lib/extend").extendFlat;$.exports=o({z:{valType:"data_array",editType:"calc"},x:o({},d.x,{impliedEdits:{xtype:"array"}}),x0:o({},d.x0,{impliedEdits:{xtype:"scaled"}}),dx:o({},d.dx,{impliedEdits:{xtype:"scaled"}}),y:o({},d.y,{impliedEdits:{ytype:"array"}}),y0:o({},d.y0,{impliedEdits:{ytype:"scaled"}}),dy:o({},d.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:o({},d.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:o({},d.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:o({},d.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:o({},d.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:o({},d.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:o({},d.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:e(),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:_({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:o({},g.showlegend,{dflt:!1})},{transforms:void 0},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../../plots/cartesian/axes"),t=y("../../plots/cartesian/align_period"),e=y("../histogram2d/calc"),i=y("../../components/colorscale/calc"),r=y("./convert_column_xyz"),o=y("./clean_2d_array"),n=y("./interp2d"),p=y("./find_empties"),s=y("./make_bound_array"),a=y("../../constants/numerical").BADNUM;function c(u){for(var h=[],v=u.length,f=0;f<v;f++){var l=u[f];l!==a&&h.push(l)}return h}$.exports=function(u,h){var v,f,l,x,m,w,b,k,T,L,A,I=_.getFromId(u,h.xaxis||"x"),D=_.getFromId(u,h.yaxis||"y"),S=d.traceIs(h,"contour"),C=d.traceIs(h,"histogram"),R=d.traceIs(h,"gl2d"),F=S?"best":h.zsmooth;if(I._minDtick=0,D._minDtick=0,C)x=(A=e(u,h)).orig_x,v=A.x,f=A.x0,l=A.dx,k=A.orig_y,m=A.y,w=A.y0,b=A.dy,T=A.z;else{var H=h.z;g.isArray1D(H)?(r(h,I,D,"x","y",["z"]),v=h._x,m=h._y,H=h._z):(x=h.x?I.makeCalcdata(h,"x"):[],k=h.y?D.makeCalcdata(h,"y"):[],v=t(h,I,"x",x).vals,m=t(h,D,"y",k).vals,h._x=v,h._y=m),f=h.x0,l=h.dx,w=h.y0,b=h.dy,T=o(H,h,I,D)}function U(K){F=h._input.zsmooth=h.zsmooth=!1,g.warn('cannot use zsmooth: "fast": '+K)}if((I.rangebreaks||D.rangebreaks)&&(T=function(K,re,ie){for(var ce=[],se=-1,de=0;de<ie.length;de++)if(re[de]!==a){ce[++se]=[];for(var ue=0;ue<ie[de].length;ue++)K[ue]!==a&&ce[se].push(ie[de][ue])}return ce}(v,m,T),C||(v=c(v),m=c(m),h._x=v,h._y=m)),C||!S&&!h.connectgaps||(h._emptypoints=p(T),n(T,h._emptypoints)),"fast"===F)if("log"===I.type||"log"===D.type)U("log axis found");else if(!C){if(v.length){var X=(v[v.length-1]-v[0])/(v.length-1),Z=Math.abs(X/100);for(L=0;L<v.length-1;L++)if(Math.abs(v[L+1]-v[L]-X)>Z){U("x scale is not linear");break}}if(m.length&&"fast"===F){var Y=(m[m.length-1]-m[0])/(m.length-1),W=Math.abs(Y/100);for(L=0;L<m.length-1;L++)if(Math.abs(m[L+1]-m[L]-Y)>W){U("y scale is not linear");break}}}var te=g.maxRowLength(T),z="scaled"===h.xtype?"":v,N=s(h,z,f,l,te,I),V="scaled"===h.ytype?"":m,Q=s(h,V,w,b,T.length,D);R||(h._extremes[I._id]=_.findExtremes(I,N),h._extremes[D._id]=_.findExtremes(D,Q));var j={x:N,y:Q,z:T,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&x&&(j.orig_x=x),h.yperiodalignment&&k&&(j.orig_y=k),z&&z.length===N.length-1&&(j.xCenter=z),V&&V.length===Q.length-1&&(j.yCenter=V),C&&(j.xRanges=A.xRanges,j.yRanges=A.yRanges,j.pts=A.pts),S||i(u,h,{vals:T,cLetter:"z"}),S&&h.contours&&"heatmap"===h.contours.coloring){var J={type:"contour"===h.type?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};j.xfill=s(J,z,f,l,te,I),j.yfill=s(J,V,w,b,T.length,D)}return[j]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../constants/numerical").BADNUM;$.exports=function(t,e,i,r){var o,n,p,s,a,c;function u(m){if(d(m))return+m}if(e&&e.transpose){for(o=0,a=0;a<t.length;a++)o=Math.max(o,t[a].length);if(0===o)return!1;p=function(m){return m.length},s=function(m,w,b){return(m[b]||[])[w]}}else o=t.length,p=function(m,w){return m[w].length},s=function(m,w,b){return(m[w]||[])[b]};function v(m){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&m&&"category"===m.type&&e["_"+m._id.charAt(0)].length){var w=m._id.charAt(0),b={},k=e["_"+w+"CategoryMap"]||e[w];for(a=0;a<k.length;a++)b[k[a]]=a;return function(T){var L=b[m._categories[T]];return L+1?L:_}}return g.identity}var f=v(i),l=v(r);r&&"category"===r.type&&(o=r._categories.length);var m,w,b,x=new Array(o);for(a=0;a<o;a++)for(n=i&&"category"===i.type?i._categories.length:p(t,a),x[a]=new Array(n),c=0;c<n;c++)x[a][c]=u((m=t,w=l(a),b=f(c),w===_||b===_?_:s(m,w,b)));return x}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(y,$,ee){"use strict";$.exports={min:"zmin",max:"zmax"}},{}],796:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../constants/numerical").BADNUM,_=y("../../plots/cartesian/align_period");$.exports=function(t,e,i,r,o,n){var p=t._length,s=e.makeCalcdata(t,r),a=i.makeCalcdata(t,o);s=_(t,e,r,s).vals,a=_(t,i,o,a).vals;var c,u,h,v,f=t.text,l=void 0!==f&&d.isArray1D(f),x=t.hovertext,m=void 0!==x&&d.isArray1D(x),w=d.distinctVals(s),b=w.vals,k=d.distinctVals(a),T=k.vals,L=[],A=T.length,I=b.length;for(c=0;c<n.length;c++)L[c]=d.init2dArray(A,I);l&&(h=d.init2dArray(A,I)),m&&(v=d.init2dArray(A,I));var D=d.init2dArray(A,I);for(c=0;c<p;c++)if(s[c]!==g&&a[c]!==g){var S=d.findBin(s[c]+w.minDiff/2,b),C=d.findBin(a[c]+k.minDiff/2,T);for(u=0;u<n.length;u++)L[u][C][S]=t[n[u]][c],D[C][S]=c;l&&(h[C][S]=f[c]),m&&(v[C][S]=x[c])}for(t["_"+r]=b,t["_"+o]=T,u=0;u<n.length;u++)t["_"+n[u]]=L[u];l&&(t._text=h),m&&(t._hovertext=v),e&&"category"===e.type&&(t["_"+r+"CategoryMap"]=b.map(function(F){return e._categories[F]})),i&&"category"===i.type&&(t["_"+o+"CategoryMap"]=T.map(function(F){return i._categories[F]})),t._after2before=D}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./xyz_defaults"),_=y("./label_defaults"),t=y("../scatter/period_defaults"),e=y("./style_defaults"),i=y("../../components/colorscale/defaults"),r=y("./attributes");$.exports=function(o,n,p,s){function a(c,u){return d.coerce(o,n,r,c,u)}g(o,n,a,s)?(t(o,n,s,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),_(a,s),e(o,n,a,s),a("hoverongaps"),a("connectgaps",d.isArray1D(n.z)&&!1!==n.zsmooth),i(o,n,s,a,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(y,$,ee){"use strict";var d=y("../../lib").maxRowLength;$.exports=function(g){var _,t,e,i,r,o,n,p,s=[],a={},c=[],u=g[0],h=[],v=[0,0,0],f=d(g);for(t=0;t<g.length;t++)for(_=h,h=u,u=g[t+1]||[],e=0;e<f;e++)void 0===h[e]&&((o=(void 0!==h[e-1]?1:0)+(void 0!==h[e+1]?1:0)+(void 0!==_[e]?1:0)+(void 0!==u[e]?1:0))?(0===t&&o++,0===e&&o++,t===g.length-1&&o++,e===h.length-1&&o++,o<4&&(a[[t,e]]=[t,e,o]),s.push([t,e,o])):c.push([t,e]));for(;c.length;){for(n={},p=!1,r=c.length-1;r>=0;r--)(o=((a[[(t=(i=c[r])[0])-1,e=i[1]]]||v)[2]+(a[[t+1,e]]||v)[2]+(a[[t,e-1]]||v)[2]+(a[[t,e+1]]||v)[2])/20)&&(n[i]=[t,e,o],c.splice(r,1),p=!0);if(!p)throw"findEmpties iterated with no new neighbors";for(i in n)a[i]=n[i],s.push(n[i])}return s.sort(function(l,x){return x[2]-l[2]})}},{"../../lib":503}],799:[function(y,$,ee){"use strict";var d=y("../../components/fx"),g=y("../../lib"),_=y("../../plots/cartesian/axes"),t=y("../../components/colorscale").extractOpts;$.exports=function(e,i,r,o,n){n||(n={});var p,s,a,c,u=n.isContour,h=e.cd[0],v=h.trace,f=e.xa,l=e.ya,x=h.x,m=h.y,w=h.z,b=h.xCenter,k=h.yCenter,T=h.zmask,L=v.zhoverformat,A=x,I=m;if(!1!==e.index){try{a=Math.round(e.index[1]),c=Math.round(e.index[0])}catch(z){return void g.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(a<0||a>=w[0].length||c<0||c>w.length)return}else{if(d.inbox(i-x[0],i-x[x.length-1],0)>0||d.inbox(r-m[0],r-m[m.length-1],0)>0)return;if(u){var D;for(A=[2*x[0]-x[1]],D=1;D<x.length;D++)A.push((x[D]+x[D-1])/2);for(A.push([2*x[x.length-1]-x[x.length-2]]),I=[2*m[0]-m[1]],D=1;D<m.length;D++)I.push((m[D]+m[D-1])/2);I.push([2*m[m.length-1]-m[m.length-2]])}a=Math.max(0,Math.min(A.length-2,g.findBin(i,A))),c=Math.max(0,Math.min(I.length-2,g.findBin(r,I)))}var S,C,R=f.c2p(x[a]),F=f.c2p(x[a+1]),H=l.c2p(m[c]),U=l.c2p(m[c+1]);u?(F=R,p=(S=h.orig_x||x)[a],U=H,s=(C=h.orig_y||m)[c]):(S=h.orig_x||b||x,C=h.orig_y||k||m,p=b?S[a]:(S[a]+S[a+1])/2,s=k?C[c]:(C[c]+C[c+1])/2,f&&"category"===f.type&&(p=x[a]),l&&"category"===l.type&&(s=m[c]),v.zsmooth&&(R=F=f.c2p(p),H=U=l.c2p(s)));var X=w[c][a];if(T&&!T[c][a]&&(X=void 0),void 0!==X||v.hoverongaps){var Z;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[c])?Z=h.hovertext[c][a]:Array.isArray(h.text)&&Array.isArray(h.text[c])&&(Z=h.text[c][a]);var Y=t(v),te=_.tickText({type:"linear",range:[Y.min,Y.max],hoverformat:L,_separators:f._separators,_numFormat:f._numFormat},X,"hover").text;return[g.extendFlat(e,{index:v._after2before?v._after2before[c][a]:[c,a],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:R,x1:F,y0:H,y1:U,xLabelVal:p,yLabelVal:s,zLabelVal:X,zLabel:te,text:Z})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:y("./colorbar"),style:y("./style"),hoverPoints:y("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(y,$,ee){"use strict";var d=y("../../lib"),g=[[-1,0],[1,0],[0,-1],[0,1]];function _(e){return.5-.25*Math.min(1,.5*e)}function t(e,i,r){var o,n,p,s,a,c,u,h,v,f,l,x,m,w=0;for(s=0;s<i.length;s++){for(l=e[n=(o=i[s])[0]][p=o[1]],f=0,v=0,a=0;a<4;a++)(u=e[n+(c=g[a])[0]])&&void 0!==(h=u[p+c[1]])&&(0===f?x=m=h:(x=Math.min(x,h),m=Math.max(m,h)),v++,f+=h);if(0===v)throw"iterateInterp2d order is wrong: no defined neighbors";e[n][p]=f/v,void 0===l?v<4&&(w=1):(e[n][p]=(1+r)*e[n][p]-r*l,m>x&&(w=Math.max(w,Math.abs(e[n][p]-l)/(m-x))))}return w}$.exports=function(e,i){var r,o=1;for(t(e,i),r=0;r<i.length&&!(i[r][2]<4);r++);for(i=i.slice(r),r=0;r<100&&o>.01;r++)o=t(e,i,_(o));return o>.01&&d.log("interp2d didn't converge quickly",o),e}},{"../../lib":503}],802:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){g("texttemplate");var t=d.extendFlat({},_.font,{color:"auto",size:"auto"});d.coerceFont(g,"textfont",t)}},{"../../lib":503}],803:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib").isArrayOrTypedArray;$.exports=function(_,t,e,i,r,o){var n,p,s,a=[],c=d.traceIs(_,"contour"),u=d.traceIs(_,"histogram"),h=d.traceIs(_,"gl2d");if(g(t)&&t.length>1&&!u&&"category"!==o.type){var v=t.length;if(!(v<=r))return t.slice(0,c?r:r+1);if(c||h)a=t.slice(0,r);else if(1===r)a=[t[0]-.5,t[0]+.5];else{for(a=[1.5*t[0]-.5*t[1]],s=1;s<v;s++)a.push(.5*(t[s-1]+t[s]));a.push(1.5*t[v-1]-.5*t[v-2])}if(v<r){var f=a[a.length-1],l=f-a[a.length-2];for(s=v;s<r;s++)a.push(f+=l)}}else{var x=_[o._id.charAt(0)+"calendar"];for(n=u?o.r2c(e,0,x):g(t)&&1===t.length?t[0]:void 0===e?0:("log"===o.type?o.d2c:o.r2c)(e,0,x),p=i||1,s=c||h?0:-.5;s<r;s++)a.push(n+p*s)}return a}},{"../../lib":503,"../../registry":638}],804:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("tinycolor2"),_=y("../../registry"),t=y("../../components/drawing"),e=y("../../plots/cartesian/axes"),i=y("../../lib"),r=y("../../lib/svg_text_utils"),o=y("../scatter/format_labels"),n=y("../../components/color"),p=y("../../components/colorscale").extractOpts,s=y("../../components/colorscale").makeColorScaleFuncFromTrace,a=y("../../constants/xmlns_namespaces"),c=y("../../constants/alignment").LINE_SPACING;function u(x){return x.selectAll("g.heatmap-label")}function h(x){u(x).remove()}function v(x,m){var w=m.length-2,b=i.constrain(i.findBin(x,m),0,w),k=m[b],L=i.constrain(b+(x-k)/(m[b+1]-k)-.5,0,w),A=Math.round(L),I=Math.abs(L-A);return L&&L!==w&&I?{bin0:A,frac:I,bin1:Math.round(A+I/(L-A))}:{bin0:A,bin1:A,frac:0}}function f(x,m){var w=m.length-1,b=i.constrain(i.findBin(x,m),0,w),k=m[b],T=(x-k)/(m[b+1]-k)||0;return T<=0?{bin0:b,bin1:b,frac:0}:T<.5?{bin0:b,bin1:b+1,frac:T}:{bin0:b+1,bin1:b,frac:1-T}}function l(x,m,w){x[m]=w[0],x[m+1]=w[1],x[m+2]=w[2],x[m+3]=Math.round(255*w[3])}$.exports=function(x,m,w,b){var k=m.xaxis,T=m.yaxis;i.makeTraceGroups(b,w,"hm").each(function(L){var A,I,D,S,C,R,F,H,U=d.select(this),X=L[0],Z=X.trace,Y=Z.xgap||0,W=Z.ygap||0,te=X.z,z=X.x,N=X.y,V=X.xCenter,Q=X.yCenter,j=_.traceIs(Z,"contour"),J=j?"best":Z.zsmooth,K=te.length,re=i.maxRowLength(te),ie=!1,ce=!1;for(R=0;void 0===A&&R<z.length-1;)A=k.c2p(z[R]),R++;for(R=z.length-1;void 0===I&&R>0;)I=k.c2p(z[R]),R--;for(I<A&&(D=I,I=A,A=D,ie=!0),R=0;void 0===S&&R<N.length-1;)S=T.c2p(N[R]),R++;for(R=N.length-1;void 0===C&&R>0;)C=T.c2p(N[R]),R--;if(C<S&&(D=S,S=C,C=D,ce=!0),j&&(V=z,Q=N,z=X.xfill,N=X.yfill),"fast"!==J){var se="best"===J?0:.5;A=Math.max(-se*k._length,A),I=Math.min((1+se)*k._length,I),S=Math.max(-se*T._length,S),C=Math.min((1+se)*T._length,C)}var de,ue,ge=Math.round(I-A),be=Math.round(C-S);if(ge<=0||be<=0)return U.selectAll("image").data([]).exit().remove(),void h(U);"fast"===J?(de=re,ue=K):(de=ge,ue=be);var Te=document.createElement("canvas");Te.width=de,Te.height=ue;var we,Le,fe=Te.getContext("2d"),ve=s(Z,{noNumericCheck:!0,returnArray:!0});"fast"===J?(we=ie?function(jr){return re-1-jr}:i.identity,Le=ce?function(jr){return K-1-jr}:i.identity):(we=function(jr){return i.constrain(Math.round(k.c2p(z[jr])-A),0,ge)},Le=function(jr){return i.constrain(Math.round(T.c2p(N[jr])-S),0,be)});var Me,ke,Ce,Pe,Fe=Le(0),qe=[Fe,Fe],rt=ie?0:1,ze=ce?0:1,He=0,Xe=0,Je=0,at=0;function pt(jr,Lr){if(void 0!==jr){var Xr=ve(jr);return Xr[0]=Math.round(Xr[0]),Xr[1]=Math.round(Xr[1]),Xr[2]=Math.round(Xr[2]),He+=Lr,Xe+=Xr[0]*Lr,Je+=Xr[1]*Lr,at+=Xr[2]*Lr,Xr}return[0,0,0,0]}function xt(jr,Lr,Xr,Un){var qr=jr[Xr.bin0];if(void 0===qr)return pt(void 0,1);var Tn=jr[Xr.bin1],rn=Lr[Xr.bin0],Vn=Lr[Xr.bin1];return pt(qr+Xr.frac*(Tn-qr||0)+Un.frac*((rn-qr||0)+Xr.frac*(void 0===Tn?void 0===Vn?0:void 0===rn?2*(Vn-qr):2*(2*Vn-rn-qr)/3:void 0===Vn?void 0===rn?0:2*(2*qr-Tn-rn)/3:void 0===rn?2*(2*Vn-Tn-qr)/3:Vn+qr-Tn-rn)))}if(J){var Ft,Dt=0;try{Ft=new Uint8Array(ge*be*4)}catch(jr){Ft=new Array(ge*be*4)}if("best"===J){var ot,it,Et,Xt=V||z,nr=Q||N,Ue=new Array(Xt.length),We=new Array(nr.length),Be=new Array(ge),Qe=V?f:v,Ae=Q?f:v;for(R=0;R<Xt.length;R++)Ue[R]=Math.round(k.c2p(Xt[R])-A);for(R=0;R<nr.length;R++)We[R]=Math.round(T.c2p(nr[R])-S);for(R=0;R<ge;R++)Be[R]=Qe(R,Ue);for(F=0;F<be;F++)for(it=te[(ot=Ae(F,We)).bin0],Et=te[ot.bin1],R=0;R<ge;R++,Dt+=4)l(Ft,Dt,Pe=xt(it,Et,Be[R],ot))}else for(F=0;F<K;F++)for(Ce=te[F],qe=Le(F),R=0;R<ge;R++)Pe=pt(Ce[R],1),l(Ft,Dt=4*(qe*ge+we(R)),Pe);var De=fe.createImageData(ge,be);try{De.data.set(Ft)}catch(jr){var Oe=De.data,Ie=Oe.length;for(F=0;F<Ie;F++)Oe[F]=Ft[F]}fe.putImageData(De,0,0)}else{var et=Math.floor(Y/2),ct=Math.floor(W/2);for(F=0;F<K;F++)if(Ce=te[F],qe.reverse(),qe[ze]=Le(F+1),qe[0]!==qe[1]&&void 0!==qe[0]&&void 0!==qe[1])for(Me=[ke=we(0),ke],R=0;R<re;R++)Me.reverse(),Me[rt]=we(R+1),Me[0]!==Me[1]&&void 0!==Me[0]&&void 0!==Me[1]&&(Pe=pt(Ce[R],(Me[1]-Me[0])*(qe[1]-qe[0])),fe.fillStyle="rgba("+Pe.join(",")+")",fe.fillRect(Me[0]+et,qe[0]+ct,Me[1]-Me[0]-Y,qe[1]-qe[0]-W))}Xe=Math.round(Xe/He),Je=Math.round(Je/He),at=Math.round(at/He);var vt=g("rgb("+Xe+","+Je+","+at+")");x._hmpixcount=(x._hmpixcount||0)+He,x._hmlumcount=(x._hmlumcount||0)+He*vt.getLuminance();var ft=U.selectAll("image").data(L);ft.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),ft.attr({height:be,width:ge,x:A,y:S,"xlink:href":Te.toDataURL("image/png")}),h(U);var It=Z.texttemplate;if(It){var ut=p(Z),Ot={type:"linear",range:[ut.min,ut.max],_separators:k._separators,_numFormat:k._numFormat},Rt="histogram2dcontour"===Z.type,$e="contour"===Z.type,yt=$e?K-1:K,Bt=$e?1:0,Ut=$e?re-1:re,Qt=[];for(R=$e?1:0;R<yt;R++){var Re;if($e)Re=X.y[R];else if(Rt){if(0===R||R===K-1)continue;Re=X.y[R]}else if(X.yCenter)Re=X.yCenter[R];else{if(R+1===K&&void 0===X.y[R+1])continue;Re=(X.y[R]+X.y[R+1])/2}var ht=Math.round(T.c2p(Re));if(!(0>ht||ht>T._length))for(F=Bt;F<Ut;F++){var Mt;if($e)Mt=X.x[F];else if(Rt){if(0===F||F===re-1)continue;Mt=X.x[F]}else if(X.xCenter)Mt=X.xCenter[F];else{if(F+1===re&&void 0===X.x[F+1])continue;Mt=(X.x[F]+X.x[F+1])/2}var Nt=Math.round(k.c2p(Mt));if(!(0>Nt||Nt>k._length)){var Zt=o({x:Mt,y:Re},Z,x._fullLayout);Zt.x=Mt,Zt.y=Re;var or=X.z[R][F];void 0===or?(Zt.z="",Zt.zLabel=""):(Zt.z=or,Zt.zLabel=e.tickText(Ot,or,"hover").text);var Wt=X.text&&X.text[R]&&X.text[R][F];void 0!==Wt&&!1!==Wt||(Wt=""),Zt.text=Wt;var er=i.texttemplateString(It,Zt,x._fullLayout._d3locale,Zt,Z._meta||{});if(er){var cr=er.split("<br>"),_r=cr.length,xr=0;for(H=0;H<_r;H++)xr=Math.max(xr,cr[H].length);Qt.push({l:_r,c:xr,t:er,x:Nt,y:ht,z:or})}}}}var dr=Z.textfont,pr=dr.family,br=dr.size,Nr=x._fullLayout.font.size;if(!br||"auto"===br){var kr=1/0,Hr=1/0,an=0,fn=0;for(H=0;H<Qt.length;H++){var zn=Qt[H];if(an=Math.max(an,zn.l),fn=Math.max(fn,zn.c),H<Qt.length-1){var Nn=Qt[H+1],In=Math.abs(Nn.x-zn.x),cn=Math.abs(Nn.y-zn.y);In&&(kr=Math.min(kr,In)),cn&&(Hr=Math.min(Hr,cn))}}isFinite(kr)&&isFinite(Hr)?(kr-=Y,Hr-=W,kr/=fn,Hr/=an,kr/=c/2,Hr/=c,br=Math.min(Math.floor(kr),Math.floor(Hr),Nr)):br=Nr}if(br<=0||!isFinite(br))return;u(U).data(Qt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(jr){var Un,Lr=d.select(this),Xr=dr.color;Xr&&"auto"!==Xr||(Xr=n.contrast("rgba("+ve(jr.z).join()+")")),Lr.attr("data-notex",1).call(r.positionText,(Un=jr,Un.x),function(Un){return Un.y-br*(Un.l*c/2-1)}(jr)).call(t.font,pr,br,Xr).text(jr.t).call(r.convertToTspans,x)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(y,$,ee){"use strict";var d=y("@plotly/d3");$.exports=function(g){d.select(g).selectAll(".hm image").style("opacity",function(_){return _.trace.opacity})}},{"@plotly/d3":58}],806:[function(y,$,ee){"use strict";$.exports=function(d,g,_){!1===_("zsmooth")&&(_("xgap"),_("ygap")),_("zhoverformat")}},{}],807:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../registry");function t(e,i){var r=i(e);return"scaled"===(r?i(e+"type","array"):"scaled")&&(i(e+"0"),i("d"+e)),r}$.exports=function(e,i,r,o,n,p){var s,a,c=r("z");if(n=n||"x",p=p||"y",void 0===c||!c.length)return 0;if(g.isArray1D(e.z)){s=r(n),a=r(p);var u=g.minRowLength(s),h=g.minRowLength(a);if(0===u||0===h)return 0;i._length=Math.min(u,h,c.length)}else{if(s=t(n,r),a=t(p,r),!function(v){for(var f,l=!0,x=!1,m=!1,w=0;w<v.length;w++){if(!g.isArrayOrTypedArray(f=v[w])){l=!1;break}f.length>0&&(x=!0);for(var b=0;b<f.length;b++)if(d(f[b])){m=!0;break}}return l&&x&&m}(c))return 0;r("transpose"),i._length=null}return"heatmapgl"===e.type||_.getComponentMethod("calendars","handleTraceDefaults")(e,i,[n,p],o),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(y,$,ee){"use strict";for(var d=y("../heatmap/attributes"),g=y("../../components/colorscale/attributes"),_=y("../../lib/extend").extendFlat,t=y("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],i={},r=0;r<e.length;r++){var o=e[r];i[o]=d[o]}i.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},_(i,g("",{cLetter:"z",autoColorDflt:!1})),$.exports=t(i,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_heatmap2d,g=y("../../plots/cartesian/axes"),_=y("../../lib/str2rgbarray");function t(i,r){this.scene=i,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=d(i.glplot,this.options),this.heatmap._trace=this}var e=t.prototype;e.handlePick=function(i){var r=this.options,o=r.shape,n=i.pointId,p=n%o[0],s=Math.floor(n/o[0]);return{trace:this,dataCoord:i.dataCoord,traceCoord:[r.x[p],r.y[s],r.z[n]],textLabel:this.textLabels[n],name:this.name,pointIndex:[s,p],hoverinfo:this.hoverinfo}},e.update=function(i,r){var o=r[0];this.index=i.index,this.name=i.name,this.hoverinfo=i.hoverinfo;var n=o.z;this.options.z=[].concat.apply([],n),this.options.shape=[n[0].length,n.length],this.options.x=o.x,this.options.y=o.y,this.options.zsmooth=i.zsmooth;var a=function(f){for(var l=f.colorscale,x=f.zmin,m=f.zmax,w=l.length,b=new Array(w),k=new Array(4*w),T=0;T<w;T++){var L=l[T],A=_(L[1]);b[T]=x+L[0]*(m-x);for(var I=0;I<4;I++)k[4*T+I]=A[I]}return{colorLevels:b,colorValues:k}}(i);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],i.text),this.heatmap.update(this.options);var c,u,h=this.scene.xaxis,v=this.scene.yaxis;!1===i.zsmooth&&(c={ppad:o.x[1]-o.x[0]},u={ppad:o.y[1]-o.y[0]}),i._extremes[h._id]=g.findExtremes(h,o.x,c),i._extremes[v._id]=g.findExtremes(v,o.y,u)},e.dispose=function(){this.heatmap.dispose()},$.exports=function(i,r,o){var n=new t(i,r.uid);return n.update(r,o),n}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../heatmap/xyz_defaults"),_=y("../../components/colorscale/defaults"),t=y("./attributes");$.exports=function(e,i,r,o){function n(p,s){return d.coerce(e,i,t,p,s)}g(e,i,n,o)?(n("text"),n("zsmooth"),_(e,i,o,n,{prefix:"",cLetter:"z"})):i.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(y,$,ee){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("../heatmap/calc"),plot:y("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:y("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(y,$,ee){"use strict";var d=y("../bar/attributes"),g=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../plots/font_attributes"),i=y("./bin_attributes"),r=y("./constants"),o=y("../../lib/extend").extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:g("x"),yhoverformat:g("y"),text:o({},d.text,{}),hovertext:o({},d.hovertext,{}),orientation:d.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:i("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:i("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:_({},{keys:r.eventDataKeys}),texttemplate:t({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:o({},d.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:d.insidetextanchor,textangle:d.textangle,cliponaxis:d.cliponaxis,constraintext:d.constraintext,marker:d.marker,offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,_deprecated:{bardir:d._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(y,$,ee){"use strict";$.exports=function(d,g){for(var _=d.length,t=0,e=0;e<_;e++)g[e]?(d[e]/=g[e],t+=d[e]):d[e]=null;return t}},{}],814:[function(y,$,ee){"use strict";$.exports=function(d,g){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(y,$,ee){"use strict";var d=y("fast-isnumeric");$.exports={count:function(g,_,t){return t[g]++,1},sum:function(g,_,t,e){var i=e[_];return d(i)?(i=Number(i),t[g]+=i,i):0},avg:function(g,_,t,e,i){var r=e[_];return d(r)&&(r=Number(r),t[g]+=r,i[g]++),0},min:function(g,_,t,e){var i=e[_];if(d(i)){if(i=Number(i),!d(t[g]))return t[g]=i,i;if(t[g]>i){var r=i-t[g];return t[g]=i,r}}return 0},max:function(g,_,t,e){var i=e[_];if(d(i)){if(i=Number(i),!d(t[g]))return t[g]=i,i;if(t[g]<i){var r=i-t[g];return t[g]=i,r}}return 0}}},{"fast-isnumeric":190}],816:[function(y,$,ee){"use strict";var d=y("../../constants/numerical"),g=d.ONEAVGYEAR,_=d.ONEAVGMONTH,t=d.ONEDAY,e=d.ONEHOUR,i=d.ONEMIN,r=d.ONESEC,o=y("../../plots/cartesian/axes").tickIncrement;function n(c,u,h,v){if(c*u<=0)return 1/0;for(var f=Math.abs(u-c),l="date"===h.type,x=p(f,l),m=0;m<10;m++){var w=p(80*x,l);if(x===w||!s(w,c,u,l,h,v))break;x=w}return x}function p(c,u){return u&&c>r?c>t?c>1.1*g?g:c>1.1*_?_:t:c>e?e:c>i?i:r:Math.pow(10,Math.floor(Math.log(c)/Math.LN10))}function s(c,u,h,v,f,l){if(v&&c>t){var x=a(u,f,l),m=a(h,f,l),w=c===g?0:1;return x[w]!==m[w]}return Math.floor(h/c)-Math.floor(u/c)>.1}function a(c,u,h){var v=u.c2d(c,g,h).split("-");return""===v[0]&&(v.unshift(),v[0]="-"+v[0]),v}$.exports=function(c,u,h,v,f){var l,x,m=-1.1*u,w=-.1*u,b=c-w,k=h[0],T=h[1],L=Math.min(n(k+w,k+b,v,f),n(T+w,T+b,v,f)),A=Math.min(n(k+m,k+w,v,f),n(T+m,T+w,v,f));if(L>A&&A<Math.abs(T-k)/4e3?(l=L,x=!1):(l=Math.min(L,A),x=!0),"date"===v.type&&l>t){var I=l===g?1:6,D=l===g?"M12":"M1";return function(S,C){var R=v.c2d(S,g,f),F=R.indexOf("-",I);F>0&&(R=R.substr(0,F));var H=v.d2c(R,0,f);if(H<S){var U=o(H,D,!1,f);(H+U)/2<S+c&&(H=U)}return C&&x?o(H,D,!0,f):H}}return function(S,C){var R=l*Math.round(S/l);return R+l/10<S&&R+.9*l<S+c&&(R+=l),C&&x&&(R-=l),R}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../registry"),t=y("../../plots/cartesian/axes"),e=y("../bar/arrays_to_calcdata"),i=y("./bin_functions"),r=y("./norm_functions"),o=y("./average"),n=y("./bin_label_vals");function p(s,a,c,u,h){var v,f,l,x,m,w,b,k=u+"bins",T=s._fullLayout,A=T._histogramBinOpts[a["_"+u+"bingroup"]],I="overlay"===T.barmode,D=function(ue){return c.r2c(ue,0,x)},S=function(ue){return c.c2r(ue,0,x)},C="date"===c.type?function(ue){return ue||0===ue?g.cleanDate(ue,null,x):null}:function(ue){return d(ue)?Number(ue):null};function R(ue,ge,be){ge[ue+"Found"]?(ge[ue]=C(ge[ue]),null===ge[ue]&&(ge[ue]=be[ue])):(w[ue]=ge[ue]=be[ue],g.nestedProperty(f[0],k+"."+ue).set(be[ue]))}if(a["_"+u+"autoBinFinished"])delete a["_"+u+"autoBinFinished"];else{f=A.traces;var F=[],H=!0,U=!1,X=!1;for(v=0;v<f.length;v++)if((l=f[v]).visible){var Z=A.dirs[v];m=l["_"+Z+"pos0"]=c.makeCalcdata(l,Z),F=g.concat(F,m),delete l["_"+u+"autoBinFinished"],!0===a.visible&&(H?H=!1:(delete l._autoBin,l["_"+u+"autoBinFinished"]=1),_.traceIs(l,"2dMap")&&(U=!0),"histogram2dcontour"===l.type&&(X=!0))}var Y=t.autoBin(F,c,A.nbins,U,x=f[0][u+"calendar"],A.sizeFound&&A.size),W=f[0]._autoBin={};if(w=W[A.dirs[0]]={},X&&(A.size||(Y.start=S(t.tickIncrement(D(Y.start),Y.size,!0,x))),void 0===A.end&&(Y.end=S(t.tickIncrement(D(Y.end),Y.size,!1,x)))),I&&!_.traceIs(a,"2dMap")&&0===Y._dataSpan&&"category"!==c.type&&"multicategory"!==c.type){if(h)return[Y,m,!0];Y=function(ue,ge,be,Te,we){var Le,fe,ve,Me=ue._fullLayout,ke=function(xt,Ft){for(var Dt=Ft.xaxis,ot=Ft.yaxis,it=Ft.orientation,Et=[],Xt=xt._fullData,nr=0;nr<Xt.length;nr++){var Ue=Xt[nr];"histogram"===Ue.type&&!0===Ue.visible&&Ue.orientation===it&&Ue.xaxis===Dt&&Ue.yaxis===ot&&Et.push(Ue)}return Et}(ue,ge),Ce=!1,Pe=1/0,Fe=[ge];for(Le=0;Le<ke.length;Le++)if((fe=ke[Le])===ge)Ce=!0;else if(Ce){var qe=p(ue,fe,be,Te,!0),rt=qe[0],ze=qe[2];fe["_"+Te+"autoBinFinished"]=1,fe["_"+Te+"pos0"]=qe[1],ze?Fe.push(fe):Pe=Math.min(Pe,rt.size)}else ve=Me._histogramBinOpts[fe["_"+Te+"bingroup"]],Pe=Math.min(Pe,ve.size||fe[we].size);var He=new Array(Fe.length);for(Le=0;Le<Fe.length;Le++)for(var Xe=Fe[Le]["_"+Te+"pos0"],Je=0;Je<Xe.length;Je++)if(void 0!==Xe[Je]){He[Le]=Xe[Je];break}for(isFinite(Pe)||(Pe=g.distinctVals(He).minDiff),Le=0;Le<Fe.length;Le++){var at=(fe=Fe[Le])[Te+"calendar"],pt={start:be.c2r(He[Le]-Pe/2,0,at),end:be.c2r(He[Le]+Pe/2,0,at),size:Pe};fe._input[we]=fe[we]=pt,(ve=Me._histogramBinOpts[fe["_"+Te+"bingroup"]])&&g.extendFlat(ve,pt)}return ge[we]}(s,a,c,u,k)}(b=l.cumulative||{}).enabled&&"include"!==b.currentbin&&("decreasing"===b.direction?Y.start=S(t.tickIncrement(D(Y.start),Y.size,!0,x)):Y.end=S(t.tickIncrement(D(Y.end),Y.size,!1,x))),A.size=Y.size,A.sizeFound||(w.size=Y.size,g.nestedProperty(f[0],k+".size").set(Y.size)),R("start",A,Y),R("end",A,Y)}m=a["_"+u+"pos0"],delete a["_"+u+"pos0"];var te=a._input[k]||{},z=g.extendFlat({},A),N=A.start,V=c.r2l(te.start),Q=void 0!==V;if((A.startFound||Q)&&V!==c.r2l(N)){var j=Q?V:g.aggNums(Math.min,null,m),J={type:"category"===c.type||"multicategory"===c.type?"linear":c.type,r2l:c.r2l,dtick:A.size,tick0:N,calendar:x,range:[j,t.tickIncrement(j,A.size,!1,x)].map(c.l2r)},K=t.tickFirst(J);K>c.r2l(j)&&(K=t.tickIncrement(K,A.size,!0,x)),z.start=c.l2r(K),Q||g.nestedProperty(a,k+".start").set(z.start)}var re=A.end,ie=c.r2l(te.end),ce=void 0!==ie;if((A.endFound||ce)&&ie!==c.r2l(re)){var se=ce?ie:g.aggNums(Math.max,null,m);z.end=c.l2r(se),ce||g.nestedProperty(a,k+".start").set(z.end)}var de="autobin"+u;return!1===a._input[de]&&(a._input[k]=g.extendFlat({},a[k]||{}),delete a._input[de],delete a[de]),[z,m]}$.exports={calc:function(s,a){var c,u,h,v,f=[],l=[],x="h"===a.orientation,m=t.getFromId(s,x?a.yaxis:a.xaxis),w=x?"y":"x",b={x:"y",y:"x"}[w],k=a[w+"calendar"],T=a.cumulative,L=p(s,a,m,w),A=L[0],I=L[1],D="string"==typeof A.size,S=[],C=D?S:A,R=[],F=[],H=[],U=0,X=a.histnorm,Z=a.histfunc,Y=-1!==X.indexOf("density");T.enabled&&Y&&(X=X.replace(/ ?density$/,""),Y=!1);var W,te="max"===Z||"min"===Z?null:0,z=i.count,N=r[X],V=!1,Q=function(fe){return m.r2c(fe,0,k)};for(g.isArrayOrTypedArray(a[b])&&"count"!==Z&&(W=a[b],V="avg"===Z,z=i[Z]),c=Q(A.start),h=Q(A.end)+(c-t.tickIncrement(c,A.size,!1,k))/1e6;c<h&&f.length<1e6&&(u=t.tickIncrement(c,A.size,!1,k),f.push((c+u)/2),l.push(te),H.push([]),S.push(c),Y&&R.push(1/(u-c)),V&&F.push(0),!(u<=c));)c=u;S.push(c),D||"date"!==m.type||(C={start:Q(C.start),end:Q(C.end),size:C.size}),s._fullLayout._roundFnOpts||(s._fullLayout._roundFnOpts={});var j=a["_"+w+"bingroup"],J={leftGap:1/0,rightGap:1/0};j&&(s._fullLayout._roundFnOpts[j]||(s._fullLayout._roundFnOpts[j]=J),J=s._fullLayout._roundFnOpts[j]);var K,re=l.length,ie=!0,ce=J.leftGap,se=J.rightGap,de={};for(c=0;c<I.length;c++){var ue=I[c];(v=g.findBin(ue,C))>=0&&v<re&&(U+=z(v,c,l,W,F),ie&&H[v].length&&ue!==I[H[v][0]]&&(ie=!1),H[v].push(c),de[c]=v,ce=Math.min(ce,ue-S[v]),se=Math.min(se,S[v+1]-ue))}J.leftGap=ce,J.rightGap=se,ie||(K=function(fe,ve){return function(){var Me=s._fullLayout._roundFnOpts[j];return n(Me.leftGap,Me.rightGap,S,m,k)(fe,ve)}}),V&&(U=o(l,F)),N&&N(l,U,R),T.enabled&&function(fe,ve,Me){var ke,Ce,Pe;function Fe(rt){Pe=fe[rt],fe[rt]/=2}function qe(rt){fe[rt]=Pe+(Ce=fe[rt])/2,Pe+=Ce}if("half"===Me)if("increasing"===ve)for(Fe(0),ke=1;ke<fe.length;ke++)qe(ke);else for(Fe(fe.length-1),ke=fe.length-2;ke>=0;ke--)qe(ke);else if("increasing"===ve){for(ke=1;ke<fe.length;ke++)fe[ke]+=fe[ke-1];"exclude"===Me&&(fe.unshift(0),fe.pop())}else{for(ke=fe.length-2;ke>=0;ke--)fe[ke]+=fe[ke+1];"exclude"===Me&&(fe.push(0),fe.shift())}}(l,T.direction,T.currentbin);var ge=Math.min(f.length,l.length),be=[],Te=0,we=ge-1;for(c=0;c<ge;c++)if(l[c]){Te=c;break}for(c=ge-1;c>=Te;c--)if(l[c]){we=c;break}for(c=Te;c<=we;c++)if(d(f[c])&&d(l[c])){var Le={p:f[c],s:l[c],b:0};T.enabled||(Le.pts=H[c],ie?Le.ph0=Le.ph1=H[c].length?I[H[c][0]]:f[c]:(a._computePh=!0,Le.ph0=K(S[c]),Le.ph1=K(S[c+1],!0))),be.push(Le)}return 1===be.length&&(be[0].width1=t.tickIncrement(be[0].p,A.size,!1,k)-be[0].p),e(be,a),g.isArrayOrTypedArray(a.selectedpoints)&&g.tagSelected(be,a,de),be},calcAllAutoBins:p}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(y,$,ee){"use strict";$.exports={eventDataKeys:["binNumber"]}},{}],819:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axis_ids"),_=y("../../registry").traceIs,t=y("../bar/defaults").handleGroupingDefaults,e=d.nestedProperty,i=y("../../plots/cartesian/constraints").getAxisGroup,r=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],o=["x","y"];$.exports=function(n,p){var s,a,c,u,h,v,f,l=p._histogramBinOpts={},x=[],m={},w=[];function b(Y,W){return d.coerce(s._input,s,s._module.attributes,Y,W)}function k(Y){return"v"===Y.orientation?"x":"y"}function T(Y,W,te){var z=Y.uid+"__"+te;W||(W=z);var N=g.getFromTrace({_fullLayout:p},Y,te).type,V=Y[te+"calendar"]||"",Q=l[W],j=!0;Q&&(N===Q.axType&&V===Q.calendar?(j=!1,Q.traces.push(Y),Q.dirs.push(te)):(W=z,N!==Q.axType&&d.warn(["Attempted to group the bins of trace",Y.index,"set on a","type:"+N,"axis","with bins on","type:"+Q.axType,"axis."].join(" ")),V!==Q.calendar&&d.warn(["Attempted to group the bins of trace",Y.index,"set with a",V,"calendar","with bins",Q.calendar?"on a "+Q.calendar+" calendar":"w/o a set calendar"].join(" ")))),j&&(l[W]={traces:[Y],dirs:[te],axType:N,calendar:Y[te+"calendar"]||""}),Y["_"+te+"bingroup"]=W}for(h=0;h<n.length;h++)_(s=n[h],"histogram")&&(x.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,_(s,"2dMap")||t(s._input,s,p,b));var L=p._alignmentOpts||{};for(h=0;h<x.length;h++){if(c="",!_(s=x[h],"2dMap")){if(u=k(s),"group"===p.barmode&&s.alignmentgroup){var I=i(p,s[u+"axis"])+s.orientation;(L[I]||{})[s.alignmentgroup]&&(c=I)}c||"overlay"===p.barmode||(c=i(p,s.xaxis)+i(p,s.yaxis)+k(s))}c?(m[c]||(m[c]=[]),m[c].push(s)):w.push(s)}for(c in m)if(1!==(a=m[c]).length){var D=!1;for(a.length&&(s=a[0],D=b("bingroup")),c=D||c,h=0;h<a.length;h++){var S=(s=a[h])._input.bingroup;S&&S!==c&&d.warn(["Trace",s.index,"must match","within bingroup",c+".","Ignoring its bingroup:",S,"setting."].join(" ")),s.bingroup=c,T(s,c,k(s))}}else w.push(a[0]);for(h=0;h<w.length;h++){s=w[h];var C=b("bingroup");if(_(s,"2dMap"))for(f=0;f<2;f++){var R=b((u=o[f])+"bingroup",C?C+"__"+u:null);T(s,R,u)}else T(s,C,k(s))}for(c in l){var F=l[c];for(a=F.traces,v=0;v<r.length;v++){var H,U,X=r[v],Z=X.name;if("nbins"!==Z||!F.sizeFound){for(h=0;h<a.length;h++){if(void 0!==e((s=a[h])._input,H=X.aStr[u=F.dirs[h]]).get()){F[Z]=b(H),F[Z+"Found"]=!0;break}(U=(s._autoBin||{})[u]||{})[Z]&&e(s,H).set(U[Z])}if("start"===Z||"end"===Z)for(;h<a.length;h++)(s=a[h])["_"+u+"bingroup"]&&b(H,(U=(s._autoBin||{})[u]||{})[Z]);"nbins"!==Z||F.sizeFound||F.nbinsFound||(s=a[0],F[Z]=b(H))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../../components/color"),t=y("../bar/defaults").handleText,e=y("../bar/style_defaults"),i=y("./attributes");$.exports=function(r,o,n,p){function s(w,b){return g.coerce(r,o,i,w,b)}var a=s("x"),c=s("y");s("cumulative.enabled")&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var u=s("textposition");t(r,o,p,s,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var h=s("orientation",c&&!a?"h":"v"),v="v"===h?"x":"y",f="v"===h?"y":"x",l=a&&c?Math.min(g.minRowLength(a)&&g.minRowLength(c)):g.minRowLength(o[v]||[]);if(l){o._length=l,d.getComponentMethod("calendars","handleTraceDefaults")(r,o,["x","y"],p),o[f]&&s("histfunc"),s("histnorm"),s("autobin"+v),e(r,o,s,n,p),g.coerceSelectionMarkerOpacity(o,s);var x=(o.marker.line||{}).color,m=d.getComponentMethod("errorbars","supplyDefaults");m(r,o,x||_.defaultLine,{axis:"y"}),m(r,o,x||_.defaultLine,{axis:"x",inherit:"y"})}else o.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e){if(d.x="xVal"in g?g.xVal:g.x,d.y="yVal"in g?g.yVal:g.y,"zLabelVal"in g&&(d.z=g.zLabelVal),g.xa&&(d.xaxis=g.xa),g.ya&&(d.yaxis=g.ya),!(_.cumulative||{}).enabled){var i,r=Array.isArray(e)?t[0].pts[e[0]][e[1]]:t[e].pts;if(d.pointNumbers=r,d.binNumber=d.pointNumber,delete d.pointNumber,delete d.pointIndex,_._indexToPoints){i=[];for(var o=0;o<r.length;o++)i=i.concat(_._indexToPoints[r[o]])}else i=r;d.pointIndices=i}return d}},{}],822:[function(y,$,ee){"use strict";var d=y("../bar/hover").hoverPoints,g=y("../../plots/cartesian/axes").hoverLabelText;$.exports=function(_,t,e,i,r){var o=d(_,t,e,i,r);if(o){var n=(_=o[0]).cd[_.index],p=_.cd[0].trace;if(!p.cumulative.enabled){var s="h"===p.orientation?"y":"x";_[s+"Label"]=g(_[s+"a"],[n.ph0,n.ph1],p[s+"hoverformat"])}return o}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("../bar/layout_attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),supplyLayoutDefaults:y("../bar/layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("../bar/cross_trace_calc").crossTraceCalc,plot:y("../bar/plot").plot,layerName:"barlayer",style:y("../bar/style").style,styleOnSelect:y("../bar/style").styleOnSelect,colorbar:y("../scatter/marker_colorbar"),hoverPoints:y("./hover"),selectPoints:y("../bar/select"),eventData:y("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(y,$,ee){"use strict";$.exports={percent:function(d,g){for(var _=d.length,t=100/g,e=0;e<_;e++)d[e]*=t},probability:function(d,g){for(var _=d.length,t=0;t<_;t++)d[t]/=g},density:function(d,g,_,t){var e=d.length;t=t||1;for(var i=0;i<e;i++)d[i]*=_[i]*t},"probability density":function(d,g,_,t){var e=d.length;t&&(g/=t);for(var i=0;i<e;i++)d[i]*=_[i]/g}}},{}],825:[function(y,$,ee){"use strict";var d=y("../histogram/attributes"),g=y("../histogram/bin_attributes"),_=y("../heatmap/attributes"),t=y("../../plots/attributes"),e=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=y("../../plots/template_attributes").hovertemplateAttrs,r=y("../../plots/template_attributes").texttemplateAttrs,o=y("../../components/colorscale/attributes"),n=y("../../lib/extend").extendFlat;$.exports=n({x:d.x,y:d.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:g("x"),nbinsy:d.nbinsy,ybins:g("y"),autobinx:d.autobinx,autobiny:d.autobiny,bingroup:n({},d.bingroup,{}),xbingroup:n({},d.bingroup,{}),ybingroup:n({},d.bingroup,{}),xgap:_.xgap,ygap:_.ygap,zsmooth:_.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:i({},{keys:"z"}),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:_.textfont,showlegend:n({},t.showlegend,{dflt:!1})},o("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../histogram/bin_functions"),t=y("../histogram/norm_functions"),e=y("../histogram/average"),i=y("../histogram/bin_label_vals"),r=y("../histogram/calc").calcAllAutoBins;function o(s,a,c,u){var h,v=new Array(s);if(u)for(h=0;h<s;h++)v[h]=1/(a[h+1]-a[h]);else{var f=1/c;for(h=0;h<s;h++)v[h]=f}return v}function n(s,a){return{start:s(a.start),end:s(a.end),size:a.size}}function p(s,a,c,u,h,v){var f,l=s.length-1,x=new Array(l),m=i(c,u,s,h,v);for(f=0;f<l;f++){var w=(a||[])[f];x[f]=void 0===w?[m(s[f]),m(s[f+1],!0)]:[w,w]}return x}$.exports=function(s,a){var c,u,h,v,f=g.getFromId(s,a.xaxis),l=g.getFromId(s,a.yaxis),x=a.xcalendar,m=a.ycalendar,w=function(ot){return f.r2c(ot,0,x)},b=function(ot){return l.r2c(ot,0,m)},k=r(s,a,f,"x"),T=k[0],L=k[1],A=r(s,a,l,"y"),I=A[0],D=A[1],S=a._length;L.length>S&&L.splice(S,L.length-S),D.length>S&&D.splice(S,D.length-S);var C=[],R=[],F=[],H="string"==typeof T.size,U="string"==typeof I.size,X=[],Z=[],Y=H?X:T,W=U?Z:I,te=0,z=[],N=[],V=a.histnorm,Q=a.histfunc,j=-1!==V.indexOf("density"),J="max"===Q||"min"===Q?null:0,K=_.count,re=t[V],ie=!1,ce=[],se=[],de="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";de&&"count"!==Q&&(ie="avg"===Q,K=_[Q]);var ue=T.size,ge=w(T.start),be=w(T.end)+(ge-g.tickIncrement(ge,ue,!1,x))/1e6;for(c=ge;c<be;c=g.tickIncrement(c,ue,!1,x))R.push(J),X.push(c),ie&&F.push(0);X.push(c);var we=R.length,Le=(c-ge)/we,fe=f.c2r(ge+Le/2,0,x),ve=I.size,Me=b(I.start),ke=b(I.end)+(Me-g.tickIncrement(Me,ve,!1,m))/1e6;for(c=Me;c<ke;c=g.tickIncrement(c,ve,!1,m)){C.push(R.slice()),Z.push(c);var Ce=new Array(we);for(u=0;u<we;u++)Ce[u]=[];N.push(Ce),ie&&z.push(F.slice())}Z.push(c);var Pe=C.length,Fe=(c-Me)/Pe,qe=l.c2r(Me+Fe/2,0,m);j&&(ce=o(R.length,Y,Le,H),se=o(C.length,W,Fe,U)),H||"date"!==f.type||(Y=n(w,Y)),U||"date"!==l.type||(W=n(b,W));var rt=!0,ze=!0,He=new Array(we),Xe=new Array(Pe),Je=1/0,at=1/0,pt=1/0,xt=1/0;for(c=0;c<S;c++){var Ft=L[c],Dt=D[c];h=d.findBin(Ft,Y),v=d.findBin(Dt,W),h>=0&&h<we&&v>=0&&v<Pe&&(te+=K(h,c,C[v],de,z[v]),N[v][h].push(c),rt&&(void 0===He[h]?He[h]=Ft:He[h]!==Ft&&(rt=!1)),ze&&(void 0===Xe[v]?Xe[v]=Dt:Xe[v]!==Dt&&(ze=!1)),Je=Math.min(Je,Ft-X[h]),at=Math.min(at,X[h+1]-Ft),pt=Math.min(pt,Dt-Z[v]),xt=Math.min(xt,Z[v+1]-Dt))}if(ie)for(v=0;v<Pe;v++)te+=e(C[v],z[v]);if(re)for(v=0;v<Pe;v++)re(C[v],te,ce,se[v]);return{x:L,xRanges:p(X,rt&&He,Je,at,f,x),x0:fe,dx:Le,y:D,yRanges:p(Z,ze&&Xe,pt,xt,l,m),y0:qe,dy:Fe,z:C,pts:N}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./sample_defaults"),_=y("../heatmap/style_defaults"),t=y("../../components/colorscale/defaults"),e=y("../heatmap/label_defaults"),i=y("./attributes");$.exports=function(r,o,n,p){function s(a,c){return d.coerce(r,o,i,a,c)}g(r,o,s,p),!1!==o.visible&&(_(r,o,s,p),t(r,o,p,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),e(s,p),s("xhoverformat"),s("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(y,$,ee){"use strict";var d=y("../heatmap/hover"),g=y("../../plots/cartesian/axes").hoverLabelText;$.exports=function(_,t,e,i,r){var o=d(_,t,e,i,r);if(o){var n=(_=o[0]).index,a=_.cd[0],c=a.trace,u=a.xRanges[n[1]],h=a.yRanges[n[0]];return _.xLabel=g(_.xa,[u[0],u[1]],c.xhoverformat),_.yLabel=g(_.ya,[h[0],h[1]],c.yhoverformat),o}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../histogram/cross_trace_defaults"),calc:y("../heatmap/calc"),plot:y("../heatmap/plot"),layerName:"heatmaplayer",colorbar:y("../heatmap/colorbar"),style:y("../heatmap/style"),hoverPoints:y("./hover"),eventData:y("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib");$.exports=function(_,t,e,i){var r=e("x"),o=e("y"),n=g.minRowLength(r),p=g.minRowLength(o);n&&p?(t._length=Math.min(n,p),d.getComponentMethod("calendars","handleTraceDefaults")(_,t,["x","y"],i),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):t.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(y,$,ee){"use strict";var d=y("../histogram2d/attributes"),g=y("../contour/attributes"),_=y("../../components/colorscale/attributes"),t=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../lib/extend").extendFlat;$.exports=e({x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:d.xbins,nbinsy:d.nbinsy,ybins:d.ybins,autobinx:d.autobinx,autobiny:d.autobiny,bingroup:d.bingroup,xbingroup:d.xbingroup,ybingroup:d.ybingroup,autocontour:g.autocontour,ncontours:g.ncontours,contours:g.contours,line:{color:g.line.color,width:e({},g.line.width,{dflt:.5}),dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:d.hovertemplate,texttemplate:g.texttemplate,textfont:g.textfont},_("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../histogram2d/sample_defaults"),_=y("../contour/contours_defaults"),t=y("../contour/style_defaults"),e=y("../heatmap/label_defaults"),i=y("./attributes");$.exports=function(r,o,n,p){function s(a,c){return d.coerce(r,o,i,a,c)}g(r,o,s,p),!1!==o.visible&&(_(r,o,s,function(a){return d.coerce2(r,o,i,a)}),t(r,o,s,p),s("xhoverformat"),s("yhoverformat"),s("hovertemplate"),o.contours&&"heatmap"===o.contours.coloring&&e(s,p))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../histogram/cross_trace_defaults"),calc:y("../contour/calc"),plot:y("../contour/plot").plot,layerName:"contourlayer",style:y("../contour/style"),colorbar:y("../contour/colorbar"),hoverPoints:y("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../../components/colorscale/attributes"),t=y("../../plots/domain").attributes,e=y("../pie/attributes"),i=y("../sunburst/attributes"),r=y("../treemap/attributes"),o=y("../treemap/constants"),n=y("../../lib/extend").extendFlat;$.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:r.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:i.marker.colors,line:i.marker.line,editType:"calc"},_("marker",{colorAttr:"colors",anim:!1})),leaf:i.leaf,pathbar:r.pathbar,text:e.text,textinfo:i.textinfo,texttemplate:g({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:i.hoverinfo,hovertemplate:d({},{keys:o.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:r.outsidetextfont,textposition:r.textposition,sort:e.sort,root:i.root,domain:t({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(y,$,ee){"use strict";var d=y("../../plots/plots");ee.name="icicle",ee.plot=function(g,_,t,e){d.plotBasePlot(ee.name,g,_,t,e)},ee.clean=function(g,_,t,e){d.cleanBasePlot(ee.name,g,_,t,e)}},{"../../plots/plots":619}],836:[function(y,$,ee){"use strict";var d=y("../sunburst/calc");ee.calc=function(g,_){return d.calc(g,_)},ee.crossTraceCalc=function(g){return d._runCrossTraceCalc("icicle",g)}},{"../sunburst/calc":1047}],837:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../../components/color"),t=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText,i=y("../bar/constants").TEXTPAD,r=y("../../components/colorscale"),o=r.hasColorscale,n=r.handleDefaults;$.exports=function(p,s,a,c){function u(w,b){return d.coerce(p,s,g,w,b)}var h=u("labels"),v=u("parents");if(h&&h.length&&v&&v.length){var f=u("values");u(f&&f.length?"branchvalues":"count"),u("level"),u("maxdepth"),u("tiling.orientation"),u("tiling.flip"),u("tiling.pad");var l=u("text");u("texttemplate"),s.texttemplate||u("textinfo",Array.isArray(l)?"text+label":"label"),u("hovertext"),u("hovertemplate");var x=u("pathbar.visible");e(p,s,c,u,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition"),u("marker.line.width")&&u("marker.line.color",c.paper_bgcolor),u("marker.colors");var m=s._hasColorscale=o(p,"marker","colors")||(p.marker||{}).coloraxis;m&&n(p,s,c,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",m?1:.7),s._hovered={marker:{line:{width:2,color:_.contrast(c.paper_bgcolor)}}},x&&(u("pathbar.thickness",s.pathbar.textfont.size+2*i),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),t(s,c,u),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing"),t=y("../../lib/svg_text_utils"),e=y("./partition"),i=y("./style").styleOne,r=y("../treemap/constants"),o=y("../sunburst/helpers"),n=y("../sunburst/fx"),p=y("../sunburst/plot").formatSliceLabel;$.exports=function(s,a,c,u,h){var v=h.width,f=h.height,l=h.viewX,x=h.viewY,m=h.pathSlice,w=h.toMoveInsideSlice,b=h.strTransform,k=h.hasTransition,T=h.handleSlicesExit,L=h.makeUpdateSliceInterpolator,A=h.makeUpdateTextInterpolator,I=h.prevEntry,D=s._fullLayout,S=a[0].trace,C=-1!==S.textposition.indexOf("left"),R=-1!==S.textposition.indexOf("right"),F=-1!==S.textposition.indexOf("bottom"),H=e(c,[v,f],{flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,orientation:S.tiling.orientation,pad:{inner:S.tiling.pad},maxDepth:S._maxDepth}).descendants(),U=1/0,X=-1/0;H.forEach(function(z){var N=z.depth;N>=S._maxDepth?(z.x0=z.x1=(z.x0+z.x1)/2,z.y0=z.y1=(z.y0+z.y1)/2):(U=Math.min(U,N),X=Math.max(X,N))}),u=u.data(H,o.getPtId),S._maxVisibleLayers=isFinite(X)?X-U+1:0,u.enter().append("g").classed("slice",!0),T(u,!1,{},[v,f],m),u.order();var Z=null;if(k&&I){var Y=o.getPtId(I);u.each(function(z){null===Z&&o.getPtId(z)===Y&&(Z={x0:z.x0,x1:z.x1,y0:z.y0,y1:z.y1})})}var W=function(){return Z||{x0:0,x1:v,y0:0,y1:f}},te=u;return k&&(te=te.transition().each("end",function(){var z=d.select(this);o.setSliceCursor(z,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),te.each(function(z){z._x0=l(z.x0),z._x1=l(z.x1),z._y0=x(z.y0),z._y1=x(z.y1),z._hoverX=l(z.x1-S.tiling.pad),z._hoverY=x(F?z.y1-S.tiling.pad/2:z.y0+S.tiling.pad/2);var N=d.select(this),V=g.ensureSingle(N,"path","surface",function(K){K.style("pointer-events","all")});k?V.transition().attrTween("d",function(K){var re=L(K,!1,W(),[v,f],{orientation:S.tiling.orientation,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1});return function(ie){return m(re(ie))}}):V.attr("d",m),N.call(n,c,s,a,{styleOne:i,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,s,{isTransitioning:s._transitioning}),V.call(i,z,S,{hovered:!1}),z._text=z.x0===z.x1||z.y0===z.y1?"":p(z,c,S,a,D)||"";var Q=g.ensureSingle(N,"g","slicetext"),j=g.ensureSingle(Q,"text","",function(K){K.attr("data-notex",1)}),J=g.ensureUniformFontSize(s,o.determineTextFont(S,z,D.font));j.text(z._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":C?"start":"middle").call(_.font,J).call(t.convertToTspans,s),z.textBB=_.bBox(j.node()),z.transform=w(z,{fontSize:J.size}),z.transform.fontSize=J.size,k?j.transition().attrTween("transform",function(K){var re=A(K,!1,W(),[v,f]);return function(ie){return b(re(ie))}}):j.attr("transform",b(z))}),Z}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"icicle",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(y,$,ee){"use strict";$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t){function e(i,r){return d.coerce(_,t,g,i,r)}e("iciclecolorway",t.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(y,$,ee){"use strict";var d=y("d3-hierarchy"),g=y("../treemap/flip_tree");$.exports=function(_,t,e){var i=e.flipX,r=e.flipY,o="h"===e.orientation,n=e.maxDepth,p=t[0],s=t[1];n&&(p=(_.height+1)*t[0]/Math.min(_.height+1,n),s=(_.height+1)*t[1]/Math.min(_.height+1,n));var a=d.partition().padding(e.pad.inner).size(o?[t[1],p]:[t[0],s])(_);return(o||i||r)&&g(a,t,{swapXY:o,flipX:i,flipY:r}),a}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(y,$,ee){"use strict";var d=y("../treemap/draw"),g=y("./draw_descendants");$.exports=function(_,t,e,i){return d(_,t,e,i,{type:"icicle",drawDescendants:g})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/color"),_=y("../../lib"),t=y("../bar/uniform_text").resizeText;function e(i,r,o){var n=r.data.data,p=!r.children,s=n.i,a=_.castOption(o,s,"marker.line.color")||g.defaultLine,c=_.castOption(o,s,"marker.line.width")||0;i.style("stroke-width",c).call(g.fill,n.color).call(g.stroke,a).style("opacity",p?o.leaf.opacity:null)}$.exports={style:function(i){var r=i._fullLayout._iciclelayer.selectAll(".trace");t(i,r,"icicle"),r.each(function(o){var n=d.select(this),p=o[0].trace;n.style("opacity",p.opacity),n.selectAll("path.surface").each(function(s){d.select(this).call(e,s,p)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(y,$,ee){"use strict";for(var d=y("../../plots/attributes"),g=y("../../plots/template_attributes").hovertemplateAttrs,_=y("../../lib/extend").extendFlat,t=y("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],i=[],r=[],o=0;o<e.length;o++){var n=t[e[o]];i.push("For the `"+e[o]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),r.push("For the `"+e[o]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}$.exports=_({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:_({},d.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:g({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./constants"),_=y("fast-isnumeric"),t=y("../../plots/cartesian/axes"),e=y("../../lib").maxRowLength,i=y("./helpers").getImageSize;function r(n,p,s,a){return function(c){return d.constrain((c-n)*p,s,a)}}function o(n,p){return function(s){return d.constrain(s,n,p)}}$.exports=function(n,p){var s,a;if(p._hasZ)s=p.z.length,a=e(p.z);else if(p._hasSource){var c=i(p.source);s=c.height,a=c.width}var u,h=t.getFromId(n,p.xaxis||"x"),v=t.getFromId(n,p.yaxis||"y"),f=h.d2c(p.x0)-p.dx/2,l=v.d2c(p.y0)-p.dy/2,x=[f,f+a*p.dx],m=[l,l+s*p.dy];if(h&&"log"===h.type)for(u=0;u<a;u++)x.push(f+u*p.dx);if(v&&"log"===v.type)for(u=0;u<s;u++)m.push(l+u*p.dy);return p._extremes[h._id]=t.findExtremes(h,x),p._extremes[v._id]=t.findExtremes(v,m),p._scaler=function(w){var b=g.colormodel[w.colormodel],k=(b.colormodel||w.colormodel).length;w._sArray=[];for(var T=0;T<k;T++)w._sArray.push(b.min[T]!==w.zmin[T]||b.max[T]!==w.zmax[T]?r(w.zmin[T],(b.max[T]-b.min[T])/(w.zmax[T]-w.zmin[T]),b.min[T],b.max[T]):o(b.min[T],b.max[T]));return function(L){for(var A=L.slice(0,k),I=0;I<k;I++){var D=A[I];if(!_(D))return!1;A[I]=w._sArray[I](D)}return A}}(p),[{x0:f,y0:l,z:p.z,w:a,h:s}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(y,$,ee){"use strict";$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(d){return d.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(d){return d.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(d){return d.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(d){var g=d.slice(0,3);return g[1]=g[1]+"%",g[2]=g[2]+"%",g},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(d){var g=d.slice(0,4);return g[1]=g[1]+"%",g[2]=g[2]+"%",g},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("./constants"),t=y("../../snapshot/helpers").IMAGE_URL_PREFIX;$.exports=function(e,i){function r(p,s){return d.coerce(e,i,g,p,s)}r("source"),i.source&&!i.source.match(t)&&delete i.source,i._hasSource=!!i.source;var o,n=r("z");i._hasZ=!(void 0===n||!n.length||!n[0]||!n[0].length),i._hasZ||i._hasSource?(r("x0"),r("y0"),r("dx"),r("dy"),i._hasZ?(r("colormodel","rgb"),r("zmin",(o=_.colormodel[i.colormodel]).zminDflt||o.min),r("zmax",o.zmaxDflt||o.max)):i._hasSource&&(i.colormodel="rgba256",i.zmin=(o=_.colormodel[i.colormodel]).zminDflt,i.zmax=o.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),i._length=null):i.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(y,$,ee){"use strict";$.exports=function(d,g){return"xVal"in g&&(d.x=g.xVal),"yVal"in g&&(d.y=g.yVal),g.xa&&(d.xaxis=g.xa),g.ya&&(d.yaxis=g.ya),d.color=g.color,d.colormodel=g.trace.colormodel,d.z||(d.z=g.color),d}},{}],850:[function(y,$,ee){"use strict";var d=y("probe-image-size/sync"),g=y("../../snapshot/helpers").IMAGE_URL_PREFIX,_=y("buffer/").Buffer;ee.getImageSize=function(t){var e=t.replace(g,""),i=new _(e,"base64");return d(i)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(y,$,ee){"use strict";var d=y("../../components/fx"),g=y("../../lib"),_=y("./constants");$.exports=function(t,e,i){var r=t.cd[0],o=r.trace,n=t.xa,p=t.ya;if(!(d.inbox(e-r.x0,e-(r.x0+r.w*o.dx),0)>0||d.inbox(i-r.y0,i-(r.y0+r.h*o.dy),0)>0)){var s,a=Math.floor((e-r.x0)/o.dx),c=Math.floor(Math.abs(i-r.y0)/o.dy);if(o._hasZ?s=r.z[c][a]:o._hasSource&&(s=o._canvas.el.getContext("2d").getImageData(a,c,1,1).data),s){var u,h=r.hi||o.hoverinfo;if(h){var v=h.split("+");-1!==v.indexOf("all")&&(v=["color"]),-1!==v.indexOf("color")&&(u=!0)}var f,l=_.colormodel[o.colormodel],x=l.colormodel||o.colormodel,m=x.length,w=o._scaler(s),b=l.suffix,k=[];(o.hovertemplate||u)&&(k.push("["+[w[0]+b[0],w[1]+b[1],w[2]+b[2]].join(", ")),4===m&&k.push(", "+w[3]+b[3]),k.push("]"),k=k.join(""),t.extraText=x.toUpperCase()+": "+k),Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[c])?f=o.hovertext[c][a]:Array.isArray(o.text)&&Array.isArray(o.text[c])&&(f=o.text[c][a]);var T=p.c2p(r.y0+(c+.5)*o.dy),L=r.x0+(a+.5)*o.dx,A=r.y0+(c+.5)*o.dy,I="["+s.slice(0,o.colormodel.length).join(", ")+"]";return[g.extendFlat(t,{index:[c,a],x0:n.c2p(r.x0+a*o.dx),x1:n.c2p(r.x0+(a+1)*o.dx),y0:T,y1:T,color:w,xVal:L,xLabelVal:L,yVal:A,yLabelVal:A,zLabelVal:I,text:f,hovertemplateLabels:{zLabel:I,colorLabel:k,"color[0]Label":w[0]+b[0],"color[1]Label":w[1]+b[1],"color[2]Label":w[2]+b[2],"color[3]Label":w[3]+b[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),style:y("./style"),hoverPoints:y("./hover"),eventData:y("./event_data"),moduleType:"trace",name:"image",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=g.strTranslate,t=y("../../constants/xmlns_namespaces"),e=y("./constants"),i=g.isIOS()||g.isSafari()||g.isIE();$.exports=function(r,o,n,p){var s=o.xaxis,a=o.yaxis,c=!(i||r._context._exportedPlot);g.makeTraceGroups(p,n,"im").each(function(u){var h=d.select(this),v=u[0],f=v.trace,l=("fast"===f.zsmooth||!1===f.zsmooth&&c)&&!f._hasZ&&f._hasSource&&"linear"===s.type&&"linear"===a.type;f._realImage=l;var x,m,w,b,k,T,L=v.z,A=v.x0,I=v.y0,D=v.w,S=v.h,C=f.dx,R=f.dy;for(T=0;void 0===x&&T<D;)x=s.c2p(A+T*C),T++;for(T=D;void 0===m&&T>0;)m=s.c2p(A+T*C),T--;for(T=0;void 0===b&&T<S;)b=a.c2p(I+T*R),T++;for(T=S;void 0===k&&T>0;)k=a.c2p(I+T*R),T--;m<x&&(w=m,m=x,x=w),k<b&&(w=b,b=k,k=w),!l&&(x=Math.max(-.5*s._length,x),m=Math.min(1.5*s._length,m),b=Math.max(-.5*a._length,b),k=Math.min(1.5*a._length,k));var F=Math.round(m-x),H=Math.round(k-b);if(F<=0||H<=0)h.selectAll("image").data([]).exit().remove();else{var U=h.selectAll("image").data([u]);U.enter().append("svg:image").attr({xmlns:t.svg,preserveAspectRatio:"none"}),U.exit().remove();var X=!1===f.zsmooth?e.pixelatedStyle:"";if(l){var Z=g.simpleMap(s.range,s.r2l),Y=g.simpleMap(a.range,a.r2l),W=Z[1]<Z[0],te=Y[1]>Y[0];if(W||te){var z=x+F/2,N=b+H/2;X+="transform:"+_(z+"px",N+"px")+"scale("+(W?-1:1)+","+(te?-1:1)+")"+_(-z+"px",-N+"px")+";"}}U.attr("style",X);var V=new Promise(function(j){if(f._hasZ)j();else if(f._hasSource)if(f._canvas&&f._canvas.el.width===D&&f._canvas.el.height===S&&f._canvas.source===f.source)j();else{var J=document.createElement("canvas");J.width=D,J.height=S;var K=J.getContext("2d");f._image=f._image||new Image;var re=f._image;re.onload=function(){K.drawImage(re,0,0),f._canvas={el:J,source:f.source},j()},re.setAttribute("src",f.source)}}).then(function(){var j;if(f._hasZ)j=Q(function(K,re){return L[re][K]}).toDataURL("image/png");else if(f._hasSource)if(l)j=f.source;else{var J=f._canvas.el.getContext("2d").getImageData(0,0,D,S).data;j=Q(function(K,re){var ie=4*(re*D+K);return[J[ie],J[ie+1],J[ie+2],J[ie+3]]}).toDataURL("image/png")}U.attr({"xlink:href":j,height:H,width:F,x,y:b})});r._promises.push(V)}function Q(j){var J=document.createElement("canvas");J.width=F,J.height=H;var K,re=J.getContext("2d"),ie=function(fe){return g.constrain(Math.round(s.c2p(A+fe*C)-x),0,F)},ce=function(fe){return g.constrain(Math.round(a.c2p(I+fe*R)-b),0,H)},se=e.colormodel[f.colormodel],de=se.colormodel||f.colormodel,ue=se.fmt;for(T=0;T<v.w;T++){var ge=ie(T),be=ie(T+1);if(be!==ge&&!isNaN(be)&&!isNaN(ge))for(var Te=0;Te<v.h;Te++){var we=ce(Te),Le=ce(Te+1);Le===we||isNaN(Le)||isNaN(we)||!j(T,Te)||(K=f._scaler(j(T,Te)),re.fillStyle=K?de+"("+ue(K).join(",")+")":"rgba(0,0,0,0)",re.fillRect(ge,we,be-ge,Le-we))}}return J}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(y,$,ee){"use strict";var d=y("@plotly/d3");$.exports=function(g){d.select(g).selectAll(".im image").style("opacity",function(_){return _[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(y,$,ee){"use strict";var d=y("../../lib/extend").extendFlat,g=y("../../lib/extend").extendDeep,_=y("../../plot_api/edit_types").overrideAll,t=y("../../plots/font_attributes"),e=y("../../components/color/attributes"),i=y("../../plots/domain").attributes,r=y("../../plots/cartesian/layout_attributes"),o=y("../../plot_api/plot_template").templatedArray,n=y("../../constants/delta.js"),p=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=t({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=o("step",g({},a,{range:c}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:i({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:d({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:p("value")},font:d({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:p("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:d({},s,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:g({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:_({range:c,visible:d({},r.visible,{dflt:!0}),tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:d({},r.ticks,{dflt:"outside"}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:t({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:d({},a.line.color,{}),width:d({},a.line.width,{dflt:1}),editType:"plot"},thickness:d({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(y,$,ee){"use strict";var d=y("../../plots/plots");ee.name="indicator",ee.plot=function(g,_,t,e){d.plotBasePlot(ee.name,g,_,t,e)},ee.clean=function(g,_,t,e){d.cleanBasePlot(ee.name,g,_,t,e)}},{"../../plots/plots":619}],857:[function(y,$,ee){"use strict";$.exports={calc:function(d,g){var _=[],t=g.value;"number"!=typeof g._lastValue&&(g._lastValue=g.value);var e=g._lastValue,i=e;return g._hasDelta&&"number"==typeof g.delta.reference&&(i=g.delta.reference),_[0]={y:t,lastY:e,delta:t-i,relativeDelta:(t-i)/i},_}}},{}],858:[function(y,$,ee){"use strict";$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../../plots/domain").defaults,t=y("../../plot_api/plot_template"),e=y("../../plots/array_container_defaults"),i=y("./constants.js"),r=y("../../plots/cartesian/tick_value_defaults"),o=y("../../plots/cartesian/tick_mark_defaults"),n=y("../../plots/cartesian/tick_label_defaults"),p=y("../../plots/cartesian/prefix_suffix_defaults");function s(a,c){function u(h,v){return d.coerce(a,c,g.gauge.steps,h,v)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}$.exports={supplyDefaults:function(a,c,u,h){function v(D,S){return d.coerce(a,c,g,D,S)}_(c,h,v),v("mode"),c._hasNumber=-1!==c.mode.indexOf("number"),c._hasDelta=-1!==c.mode.indexOf("delta"),c._hasGauge=-1!==c.mode.indexOf("gauge");var f=v("value");c._range=[0,"number"==typeof f?1.5*f:1];var l,x,m,w,b,k,T=new Array(2);function L(D,S){return d.coerce(m,w,g.gauge,D,S)}function A(D,S){return d.coerce(b,k,g.gauge.axis,D,S)}if(c._hasNumber&&(v("number.valueformat"),v("number.font.color",h.font.color),v("number.font.family",h.font.family),v("number.font.size"),void 0===c.number.font.size&&(c.number.font.size=i.defaultNumberFontSize,T[0]=!0),v("number.prefix"),v("number.suffix"),l=c.number.font.size),c._hasDelta&&(v("delta.font.color",h.font.color),v("delta.font.family",h.font.family),v("delta.font.size"),void 0===c.delta.font.size&&(c.delta.font.size=(c._hasNumber?.5:1)*(l||i.defaultNumberFontSize),T[1]=!0),v("delta.reference",c.value),v("delta.relative"),v("delta.valueformat",c.delta.relative?"2%":""),v("delta.increasing.symbol"),v("delta.increasing.color"),v("delta.decreasing.symbol"),v("delta.decreasing.color"),v("delta.position"),x=c.delta.font.size),c._scaleNumbers=(!c._hasNumber||T[0])&&(!c._hasDelta||T[1])||!1,v("title.font.color",h.font.color),v("title.font.family",h.font.family),v("title.font.size",.25*(l||x||i.defaultNumberFontSize)),v("title.text"),c._hasGauge){(m=a.gauge)||(m={}),w=t.newContainer(c,"gauge"),L("shape"),(c._isBullet="bullet"===c.gauge.shape)||v("title.align","center"),(c._isAngular="angular"===c.gauge.shape)||v("align","center"),L("bgcolor",h.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width"),L("bar.thickness",i.valueThickness*("bullet"===c.gauge.shape?.5:1)),e(m,w,{name:"steps",handleItemDefaults:s}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),b={},m&&(b=m.axis||{}),k=t.newContainer(w,"axis"),A("visible"),c._range=A("range",c._range);var I={outerTicks:!0};r(b,k,A,"linear"),p(b,k,A,"linear",I),n(b,k,A,"linear",I),o(b,k,A,I)}else v("title.align","center"),v("align","center"),c._isAngular=c._isBullet=!1;c._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"indicator",basePlotModule:y("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,calc:y("./calc").calc,plot:y("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-interpolate").interpolate,_=y("d3-interpolate").interpolateNumber,t=y("../../lib"),e=t.strScale,i=t.strTranslate,r=t.rad2deg,o=y("../../constants/alignment").MID_SHIFT,n=y("../../components/drawing"),p=y("./constants"),s=y("../../lib/svg_text_utils"),a=y("../../plots/cartesian/axes"),c=y("../../plots/cartesian/axis_defaults"),u=y("../../plots/cartesian/position_defaults"),h=y("../../plots/cartesian/layout_attributes"),v=y("../../components/color"),f={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},x=/[yzafpn\xb5mkMGTPEZY]/;function m(A){return A&&A.duration>0}function w(A){A.each(function(I){v.stroke(d.select(this),I.line.color)}).each(function(I){v.fill(d.select(this),I.color)}).style("stroke-width",function(I){return I.line.width})}function b(A,I,D){var S=A._fullLayout,C=t.extendFlat({type:"linear",ticks:"outside",range:D,showline:!0},I),R={type:"linear",_id:"x"+I._id},F={letter:"x",font:S.font,noHover:!0,noTickson:!0};function H(U,X){return t.coerce(C,R,h,U,X)}return c(C,R,H,F,S),u(C,R,H,F),R}function k(A,I,D){return[Math.min(I/A.width,D/A.height),A,I+"x"+D]}function T(A,I,D,S){var C=document.createElementNS("http://www.w3.org/2000/svg","text"),R=d.select(C);return R.text(A).attr("x",0).attr("y",0).attr("text-anchor",D).attr("data-unformatted",A).call(s.convertToTspans,S).call(n.font,I),n.bBox(R.node())}function L(A,I,D,S,C,R){var F="_cache"+I;A[F]&&A[F].key===C||(A[F]={key:C,value:D});var H=t.aggNums(R,null,[A[F].value,S],2);return A[F].value=H,H}$.exports=function(A,I,D,S){var C,R=A._fullLayout;m(D)&&S&&(C=S()),t.makeTraceGroups(R._indicatorlayer,I,"trace").each(function(F){var H,U,X,Z,Y,W=F[0].trace,te=d.select(this),z=W._hasGauge,N=W._isAngular,V=W._isBullet,Q=W.domain,j={w:R._size.w*(Q.x[1]-Q.x[0]),h:R._size.h*(Q.y[1]-Q.y[0]),l:R._size.l+R._size.w*Q.x[0],r:R._size.r+R._size.w*(1-Q.x[1]),t:R._size.t+R._size.h*(1-Q.y[1]),b:R._size.b+R._size.h*Q.y[0]},J=j.l+j.w/2,K=j.t+j.h/2,re=Math.min(j.w/2,j.h),ie=p.innerRadius*re,ce=W.align||"center";if(U=K,z){if(N&&(H=J,U=K+re/2,X=function(Le){return fe=Le,[(ve=.9*ie)/Math.sqrt(fe.width/2*(fe.width/2)+fe.height*fe.height),fe,ve];var fe,ve}),V){var se=p.bulletPadding,de=1-p.bulletNumberDomainSize+se;H=j.l+(de+(1-de)*l[ce])*j.w,X=function(Le){return k(Le,(p.bulletNumberDomainSize-se)*j.w,j.h)}}}else H=j.l+l[ce]*j.w,X=function(Le){return k(Le,j.w,j.h)};(function(Le,fe,ve,Me){var ke,Ce,Pe,Fe=ve[0].trace,qe=Me.numbersX,rt=Me.numbersY,ze=Fe.align||"center",He=f[ze],Xe=Me.transitionOpts,Je=Me.onComplete,at=t.ensureSingle(fe,"g","numbers"),pt=[];Fe._hasNumber&&pt.push("number"),Fe._hasDelta&&(pt.push("delta"),"left"===Fe.delta.position&&pt.reverse());var xt=at.selectAll("text").data(pt);function Ft(We,Be,Qe,Ae){if(!We.match("s")||Qe>=0==Ae>=0||Be(Qe).slice(-1).match(x)||Be(Ae).slice(-1).match(x))return Be;var De=We.slice().replace("s","f").replace(/\d+/,function(Ie){return parseInt(Ie)-1}),Oe=b(Le,{tickformat:De});return function(Ie){return Math.abs(Ie)<1?a.tickText(Oe,Ie).text:Be(Ie)}}xt.enter().append("text"),xt.attr("text-anchor",function(){return He}).attr("class",function(We){return We}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),xt.exit().remove();var Dt,ot=Fe.mode+Fe.align;if(Fe._hasDelta&&(Dt=function(){var We=b(Le,{tickformat:Fe.delta.valueformat},Fe._range);We.setScale(),a.prepTicks(We);var Be=function(et){return a.tickText(We,et).text},Qe=function(et){return Fe.delta.relative?et.relativeDelta:et.delta},Ae=function(et,ct){return 0===et||"number"!=typeof et||isNaN(et)?"-":(et>0?Fe.delta.increasing.symbol:Fe.delta.decreasing.symbol)+ct(et)},De=function(et){return et.delta>=0?Fe.delta.increasing.color:Fe.delta.decreasing.color};void 0===Fe._deltaLastValue&&(Fe._deltaLastValue=Qe(ve[0]));var Oe=at.select("text.delta");function Ie(){Oe.text(Ae(Qe(ve[0]),Be)).call(v.fill,De(ve[0])).call(s.convertToTspans,Le)}return Oe.call(n.font,Fe.delta.font).call(v.fill,De({delta:Fe._deltaLastValue})),m(Xe)?Oe.transition().duration(Xe.duration).ease(Xe.easing).tween("text",function(){var et=d.select(this),ct=Qe(ve[0]),vt=Fe._deltaLastValue,ft=Ft(Fe.delta.valueformat,Be,vt,ct),It=_(vt,ct);return Fe._deltaLastValue=ct,function(ut){et.text(Ae(It(ut),ft)),et.call(v.fill,De({delta:It(ut)}))}}).each("end",function(){Ie(),Je&&Je()}).each("interrupt",function(){Ie(),Je&&Je()}):Ie(),Ce=T(Ae(Qe(ve[0]),Be),Fe.delta.font,He,Le),Oe}(),ot+=Fe.delta.position+Fe.delta.font.size+Fe.delta.font.family+Fe.delta.valueformat,ot+=Fe.delta.increasing.symbol+Fe.delta.decreasing.symbol,Pe=Ce),Fe._hasNumber&&(function(){var We=b(Le,{tickformat:Fe.number.valueformat},Fe._range);We.setScale(),a.prepTicks(We);var Be=function(Ie){return a.tickText(We,Ie).text},Qe=Fe.number.suffix,Ae=Fe.number.prefix,De=at.select("text.number");function Oe(){var Ie="number"==typeof ve[0].y?Ae+Be(ve[0].y)+Qe:"-";De.text(Ie).call(n.font,Fe.number.font).call(s.convertToTspans,Le)}m(Xe)?De.transition().duration(Xe.duration).ease(Xe.easing).each("end",function(){Oe(),Je&&Je()}).each("interrupt",function(){Oe(),Je&&Je()}).attrTween("text",function(){var Ie=d.select(this),et=_(ve[0].lastY,ve[0].y);Fe._lastValue=ve[0].y;var ct=Ft(Fe.number.valueformat,Be,ve[0].lastY,ve[0].y);return function(vt){Ie.text(Ae+ct(et(vt))+Qe)}}):Oe(),ke=T(Ae+Be(ve[0].y)+Qe,Fe.number.font,He,Le)}(),ot+=Fe.number.font.size+Fe.number.font.family+Fe.number.valueformat+Fe.number.suffix+Fe.number.prefix,Pe=ke),Fe._hasDelta&&Fe._hasNumber){var it,Et,Xt=[(ke.left+ke.right)/2,(ke.top+ke.bottom)/2],nr=[(Ce.left+Ce.right)/2,(Ce.top+Ce.bottom)/2],Ue=.75*Fe.delta.font.size;"left"===Fe.delta.position&&(it=L(Fe,"deltaPos",0,-1*(ke.width*l[Fe.align]+Ce.width*(1-l[Fe.align])+Ue),ot,Math.min),Et=Xt[1]-nr[1],Pe={width:ke.width+Ce.width+Ue,height:Math.max(ke.height,Ce.height),left:Ce.left+it,right:ke.right,top:Math.min(ke.top,Ce.top+Et),bottom:Math.max(ke.bottom,Ce.bottom+Et)}),"right"===Fe.delta.position&&(it=L(Fe,"deltaPos",0,ke.width*(1-l[Fe.align])+Ce.width*l[Fe.align]+Ue,ot,Math.max),Et=Xt[1]-nr[1],Pe={width:ke.width+Ce.width+Ue,height:Math.max(ke.height,Ce.height),left:ke.left,right:Ce.right+it,top:Math.min(ke.top,Ce.top+Et),bottom:Math.max(ke.bottom,Ce.bottom+Et)}),"bottom"===Fe.delta.position&&(it=null,Et=Ce.height,Pe={width:Math.max(ke.width,Ce.width),height:ke.height+Ce.height,left:Math.min(ke.left,Ce.left),right:Math.max(ke.right,Ce.right),top:ke.bottom-ke.height,bottom:ke.bottom+Ce.height}),"top"===Fe.delta.position&&(it=null,Et=ke.top,Pe={width:Math.max(ke.width,Ce.width),height:ke.height+Ce.height,left:Math.min(ke.left,Ce.left),right:Math.max(ke.right,Ce.right),top:ke.bottom-ke.height-Ce.height,bottom:ke.bottom}),Dt.attr({dx:it,dy:Et})}(Fe._hasNumber||Fe._hasDelta)&&at.attr("transform",function(){var Be,We=Me.numbersScaler(Pe),Qe=L(Fe,"numbersScale",1,We[0],ot+=We[2],Math.min);Fe._scaleNumbers||(Qe=1),Fe._numbersTop=Qe*Pe.top+(Be=Fe._isAngular?rt-Qe*Pe.bottom:rt-Qe*(Pe.top+Pe.bottom)/2);var Ae=Pe[ze];"center"===ze&&(Ae=(Pe.left+Pe.right)/2);var De=qe-Qe*Ae;return De=L(Fe,"numbersTranslate",0,De,ot,Math.max),i(De,Be)+e(Qe)})})(A,te,F,{numbersX:H,numbersY:U,numbersScaler:X,transitionOpts:D,onComplete:C}),z&&(Z={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},Y={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var ue=te.selectAll("g.angular").data(N?F:[]);ue.exit().remove();var ge=te.selectAll("g.angularaxis").data(N?F:[]);ge.exit().remove(),N&&function(Le,fe,ve,Me){var ke,Ce,Pe,Fe,qe=ve[0].trace,rt=Me.size,ze=Me.radius,He=Me.innerRadius,Xe=Me.gaugeBg,Je=Me.gaugeOutline,at=[rt.l+rt.w/2,rt.t+rt.h/2+ze/2],pt=Me.gauge,xt=Me.layer,Ft=Me.transitionOpts,Dt=Me.onComplete,ot=Math.PI/2;function it(Rt){var $e=qe.gauge.axis.range[0],yt=(Rt-$e)/(qe.gauge.axis.range[1]-$e)*Math.PI-ot;return yt<-ot?-ot:yt>ot?ot:yt}function Et(Rt){return d.svg.arc().innerRadius((He+ze)/2-Rt/2*(ze-He)).outerRadius((He+ze)/2+Rt/2*(ze-He)).startAngle(-ot)}function Xt(Rt){Rt.attr("d",function($e){return Et($e.thickness).startAngle(it($e.range[0])).endAngle(it($e.range[1]))()})}pt.enter().append("g").classed("angular",!0),pt.attr("transform",i(at[0],at[1])),xt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),xt.selectAll("g.xangularaxistick,path,text").remove(),(ke=b(Le,qe.gauge.axis)).type="linear",ke.range=qe.gauge.axis.range,ke._id="xangularaxis",ke.ticklabeloverflow="allow",ke.setScale();var nr=function(Rt){return(ke.range[0]-Rt.x)/(ke.range[1]-ke.range[0])*Math.PI+Math.PI},Ue={},We=a.makeLabelFns(ke,0).labelStandoff;Ue.xFn=function(Rt){var $e=nr(Rt);return Math.cos($e)*We},Ue.yFn=function(Rt){var $e=nr(Rt),yt=Math.sin($e)>0?.2:1;return-Math.sin($e)*(We+Rt.fontSize*yt)+Math.abs(Math.cos($e))*(Rt.fontSize*o)},Ue.anchorFn=function(Rt){var $e=nr(Rt),yt=Math.cos($e);return Math.abs(yt)<.1?"middle":yt>0?"start":"end"},Ue.heightFn=function(Rt,$e,yt){var Bt=nr(Rt);return-.5*(1+Math.sin(Bt))*yt};var Be=function(Rt){return i(at[0]+ze*Math.cos(Rt),at[1]-ze*Math.sin(Rt))};Pe=function(Rt){return Be(nr(Rt))},Ce=a.calcTicks(ke),Fe=a.getTickSigns(ke)[2],ke.visible&&(a.drawTicks(Le,ke,{vals:Ce,layer:xt,path:"M"+(Fe="inside"===ke.ticks?-1:1)*((ke.linewidth||1)/2)+",0h"+Fe*ke.ticklen,transFn:function(Rt){var $e=nr(Rt);return Be($e)+"rotate("+-r($e)+")"}}),a.drawLabels(Le,ke,{vals:Ce,layer:xt,transFn:Pe,labelFns:Ue}));var Ae=[Xe].concat(qe.gauge.steps),De=pt.selectAll("g.bg-arc").data(Ae);De.enter().append("g").classed("bg-arc",!0).append("path"),De.select("path").call(Xt).call(w),De.exit().remove();var Oe=Et(qe.gauge.bar.thickness),Ie=pt.selectAll("g.value-arc").data([qe.gauge.bar]);Ie.enter().append("g").classed("value-arc",!0).append("path");var ct,vt,ft,et=Ie.select("path");m(Ft)?(et.transition().duration(Ft.duration).ease(Ft.easing).each("end",function(){Dt&&Dt()}).each("interrupt",function(){Dt&&Dt()}).attrTween("d",(ct=Oe,vt=it(ve[0].lastY),ft=it(ve[0].y),function(){var Rt=g(vt,ft);return function($e){return ct.endAngle(Rt($e))()}})),qe._lastValue=ve[0].y):et.attr("d","number"==typeof ve[0].y?Oe.endAngle(it(ve[0].y)):"M0,0Z"),et.call(w),Ie.exit().remove(),Ae=[];var It=qe.gauge.threshold.value;(It||0===It)&&Ae.push({range:[It,It],color:qe.gauge.threshold.color,line:{color:qe.gauge.threshold.line.color,width:qe.gauge.threshold.line.width},thickness:qe.gauge.threshold.thickness});var ut=pt.selectAll("g.threshold-arc").data(Ae);ut.enter().append("g").classed("threshold-arc",!0).append("path"),ut.select("path").call(Xt).call(w),ut.exit().remove();var Ot=pt.selectAll("g.gauge-outline").data([Je]);Ot.enter().append("g").classed("gauge-outline",!0).append("path"),Ot.select("path").call(Xt).call(w),Ot.exit().remove()}(A,0,F,{radius:re,innerRadius:ie,gauge:ue,layer:ge,size:j,gaugeBg:Z,gaugeOutline:Y,transitionOpts:D,onComplete:C});var be=te.selectAll("g.bullet").data(V?F:[]);be.exit().remove();var Te=te.selectAll("g.bulletaxis").data(V?F:[]);Te.exit().remove(),V&&function(Le,fe,ve,Me){var ke,Ce,Pe,Fe,qe,rt=ve[0].trace,ze=Me.gauge,He=Me.layer,Xe=Me.gaugeBg,Je=Me.gaugeOutline,at=Me.size,pt=rt.domain,xt=Me.transitionOpts,Ft=Me.onComplete;ze.enter().append("g").classed("bullet",!0),ze.attr("transform",i(at.l,at.t)),He.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),He.selectAll("g.xbulletaxistick,path,text").remove();var Dt=at.h,ot=rt.gauge.bar.thickness*Dt,it=pt.x[0],Et=pt.x[0]+(pt.x[1]-pt.x[0])*(rt._hasNumber||rt._hasDelta?1-p.bulletNumberDomainSize:1);function Xt(De){De.attr("width",function(Oe){return Math.max(0,ke.c2p(Oe.range[1])-ke.c2p(Oe.range[0]))}).attr("x",function(Oe){return ke.c2p(Oe.range[0])}).attr("y",function(Oe){return.5*(1-Oe.thickness)*Dt}).attr("height",function(Oe){return Oe.thickness*Dt})}(ke=b(Le,rt.gauge.axis))._id="xbulletaxis",ke.domain=[it,Et],ke.setScale(),Ce=a.calcTicks(ke),Pe=a.makeTransTickFn(ke),Fe=a.getTickSigns(ke)[2],qe=at.t+at.h,ke.visible&&(a.drawTicks(Le,ke,{vals:"inside"===ke.ticks?a.clipEnds(ke,Ce):Ce,layer:He,path:a.makeTickPath(ke,qe,Fe),transFn:Pe}),a.drawLabels(Le,ke,{vals:Ce,layer:He,transFn:Pe,labelFns:a.makeLabelFns(ke,qe)}));var nr=[Xe].concat(rt.gauge.steps),Ue=ze.selectAll("g.bg-bullet").data(nr);Ue.enter().append("g").classed("bg-bullet",!0).append("rect"),Ue.select("rect").call(Xt).call(w),Ue.exit().remove();var We=ze.selectAll("g.value-bullet").data([rt.gauge.bar]);We.enter().append("g").classed("value-bullet",!0).append("rect"),We.select("rect").attr("height",ot).attr("y",(Dt-ot)/2).call(w),m(xt)?We.select("rect").transition().duration(xt.duration).ease(xt.easing).each("end",function(){Ft&&Ft()}).each("interrupt",function(){Ft&&Ft()}).attr("width",Math.max(0,ke.c2p(Math.min(rt.gauge.axis.range[1],ve[0].y)))):We.select("rect").attr("width","number"==typeof ve[0].y?Math.max(0,ke.c2p(Math.min(rt.gauge.axis.range[1],ve[0].y))):0),We.exit().remove();var Be=ve.filter(function(){return rt.gauge.threshold.value||0===rt.gauge.threshold.value}),Qe=ze.selectAll("g.threshold-bullet").data(Be);Qe.enter().append("g").classed("threshold-bullet",!0).append("line"),Qe.select("line").attr("x1",ke.c2p(rt.gauge.threshold.value)).attr("x2",ke.c2p(rt.gauge.threshold.value)).attr("y1",(1-rt.gauge.threshold.thickness)/2*Dt).attr("y2",(1-(1-rt.gauge.threshold.thickness)/2)*Dt).call(v.stroke,rt.gauge.threshold.line.color).style("stroke-width",rt.gauge.threshold.line.width),Qe.exit().remove();var Ae=ze.selectAll("g.gauge-outline").data([Je]);Ae.enter().append("g").classed("gauge-outline",!0).append("rect"),Ae.select("rect").call(Xt).call(w),Ae.exit().remove()}(A,0,F,{gauge:be,layer:Te,size:j,gaugeBg:Z,gaugeOutline:Y,transitionOpts:D,onComplete:C});var we=te.selectAll("text.title").data(F);we.exit().remove(),we.enter().append("text").classed("title",!0),we.attr("text-anchor",function(){return V?f.right:f[W.title.align]}).text(W.title.text).call(n.font,W.title.font).call(s.convertToTspans,A),we.attr("transform",function(){var Le,fe=j.l+j.w*l[W.title.align],ve=p.titlePadding,Me=n.bBox(we.node());return z?(N&&(Le=W.gauge.axis.visible?n.bBox(ge.node()).top-ve-Me.bottom:j.t+j.h/2-re/2-Me.bottom-ve),V&&(Le=U-(Me.top+Me.bottom)/2,fe=j.l-p.bulletPadding*j.w)):Le=W._numbersTop-ve-Me.bottom,i(fe,Le)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/attributes"),g=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../mesh3d/attributes"),e=y("../../plots/attributes"),i=y("../../lib/extend").extendFlat,r=y("../../plot_api/edit_types").overrideAll,o=$.exports=r(i({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:_(),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),valuehoverformat:g("value",1),showlegend:i({},e.showlegend,{dflt:!1})},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:t.opacity,lightposition:t.lightposition,lighting:t.lighting,flatshading:t.flatshading,contour:t.contour,hoverinfo:i({},e.hoverinfo)}),"calc","nested");o.flatshading.dflt=!0,o.lighting.facenormalsepsilon.dflt=0,o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/calc"),g=y("../streamtube/calc").processGrid,_=y("../streamtube/calc").filter;$.exports=function(t,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=_(e.x,e._len),e._y=_(e.y,e._len),e._z=_(e.z,e._len),e._value=_(e.value,e._len);var i=g(e);e._gridFill=i.fill,e._Xs=i.Xs,e._Ys=i.Ys,e._Zs=i.Zs,e._len=i.len;for(var r=1/0,o=-1/0,n=0;n<e._len;n++){var p=e._value[n];r=Math.min(r,p),o=Math.max(o,p)}e._minValues=r,e._maxValues=o,e._vMin=null==e.isomin?r:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?o:e.isomax,d(t,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_mesh3d,g=y("../../lib/gl_format_color").parseColorScale,_=y("../../lib/str2rgbarray"),t=y("../../components/colorscale").extractOpts,e=y("../../plots/gl3d/zip3"),i=function(s,a){for(var c=a.length-1;c>0;c--){var u=Math.min(a[c],a[c-1]),h=Math.max(a[c],a[c-1]);if(h>u&&u<s&&s<=h)return{id:c,distRatio:(h-s)/(h-u)}}return{id:0,distRatio:0}};function r(s,a,c){this.scene=s,this.uid=c,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var o=r.prototype;o.handlePick=function(s){if(s.object===this.mesh){var a=s.data.index,u=this.data._meshY[a],h=this.data._meshZ[a],v=this.data._Ys.length,f=this.data._Zs.length,l=i(this.data._meshX[a],this.data._Xs).id,x=i(u,this.data._Ys).id,m=i(h,this.data._Zs).id,w=s.index=m+f*x+f*v*l;s.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&void 0!==b[w]?s.textLabel=b[w]:b&&(s.textLabel=b),!0}},o.update=function(s){var a=this.scene,c=a.fullSceneLayout;function u(f,l,x,m){return l.map(function(w){return f.d2l(w,0,m)*x})}this.data=p(s);var h={positions:e(u(c.xaxis,s._meshX,a.dataScale[0],s.xcalendar),u(c.yaxis,s._meshY,a.dataScale[1],s.ycalendar),u(c.zaxis,s._meshZ,a.dataScale[2],s.zcalendar)),cells:e(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:_(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},v=t(s);h.vertexIntensity=s._meshIntensity,h.vertexIntensityBounds=[v.min,v.max],h.colormap=g(s),this.mesh.update(h)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function p(s){s._meshI=[],s._meshJ=[],s._meshK=[];var a,c,u,h,v,f,l,x=s.surface.show,m=s.spaceframe.show,w=s.surface.fill,b=s.spaceframe.fill,k=!1,T=!1,L=0,A=s._Xs,I=s._Ys,D=s._Zs,S=A.length,C=I.length,R=D.length,F=n.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),H=function(ze,He,Xe){switch(F){case 5:return Xe+R*He+R*C*ze;case 4:return Xe+R*ze+R*S*He;case 3:return He+C*Xe+C*R*ze;case 2:return He+C*ze+C*S*Xe;case 1:return ze+S*Xe+S*R*He;default:return ze+S*He+S*C*Xe}},U=s._minValues,X=s._maxValues,Z=s._vMin,Y=s._vMax;function W(ze,He,Xe){for(var Je=f.length,at=c;at<Je;at++)if(ze===u[at]&&He===h[at]&&Xe===v[at])return at;return-1}function te(){c=a}function z(){u=[],h=[],v=[],f=[],a=0,te()}function N(ze,He,Xe,Je){return u.push(ze),h.push(He),v.push(Xe),f.push(Je),++a-1}function V(ze,He,Xe){for(var Je=[],at=0;at<ze.length;at++)Je[at]=ze[at]*(1-Xe)+Xe*He[at];return Je}function Q(ze){l=ze}function j(ze,He){return"all"===ze||null===ze||ze.indexOf(He)>-1}function J(ze,He){return null===ze?He:ze}function K(ze,He,Xe){te();var at,pt,Qe,Ae,De,Oe,Ie,et,ct,vt,ft,It,ut,Ot,Rt,xt=[He],Ft=[Xe];if(l>=1)xt=[He],Ft=[Xe];else if(l>0){var Dt=(Ae=Xe,vt=V(et=function($e,yt,Bt){for(var Ut=[],Qt=0;Qt<$e.length;Qt++)Ut[Qt]=($e[Qt]+yt[Qt]+Bt[Qt])/3;return Ut}(De=(Qe=He)[0],Oe=Qe[1],Ie=Qe[2]),De,ct=Math.sqrt(1-l)),{xyzv:[[De,Oe,ft=V(et,Oe,ct)],[ft,vt,De],[Oe,Ie,It=V(et,Ie,ct)],[It,ft,Oe],[Ie,De,vt],[vt,It,Ie]],abc:[[ut=Ae[0],Ot=Ae[1],-1],[-1,-1,ut],[Ot,Rt=Ae[2],-1],[-1,-1,Ot],[Rt,ut,-1],[-1,-1,Rt]]});xt=Dt.xyzv,Ft=Dt.abc}for(var ot=0;ot<xt.length;ot++){He=xt[ot],Xe=Ft[ot];for(var it=[],Et=0;Et<3;Et++){var Xt=He[Et][0],nr=He[Et][1],Ue=He[Et][2],We=He[Et][3],Be=Xe[Et]>-1?Xe[Et]:W(Xt,nr,Ue);it[Et]=Be>-1?Be:N(Xt,nr,Ue,J(ze,We))}at=it[1],pt=it[2],s._meshI.push(it[0]),s._meshJ.push(at),s._meshK.push(pt),++L}}function re(ze,He,Xe,Je){var at=ze[3];at<Xe&&(at=Xe),at>Je&&(at=Je);for(var pt=(ze[3]-at)/(ze[3]-He[3]+1e-9),xt=[],Ft=0;Ft<4;Ft++)xt[Ft]=(1-pt)*ze[Ft]+pt*He[Ft];return xt}function ie(ze,He,Xe){return ze>=He&&ze<=Xe}function ce(ze){var He=.001*(Y-Z);return ze>=Z-He&&ze<=Y+He}function se(ze){for(var He=[],Xe=0;Xe<4;Xe++){var Je=ze[Xe];He.push([s._x[Je],s._y[Je],s._z[Je],s._value[Je]])}return He}function de(ze,He,Xe,Je,at,pt){pt||(pt=1),Xe=[-1,-1,-1];var xt=!1,Ft=[ie(He[0][3],Je,at),ie(He[1][3],Je,at),ie(He[2][3],Je,at)];if(!Ft[0]&&!Ft[1]&&!Ft[2])return!1;var Dt=function(it,Et,Xt){return ce(Et[0][3])&&ce(Et[1][3])&&ce(Et[2][3])?(K(it,Et,Xt),!0):pt<3&&de(it,Et,Xt,Z,Y,++pt)};if(Ft[0]&&Ft[1]&&Ft[2])return Dt(ze,He,Xe)||xt;var ot=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(it){if(Ft[it[0]]&&Ft[it[1]]&&!Ft[it[2]]){var Et=He[it[0]],Xt=He[it[1]],nr=He[it[2]],Ue=re(nr,Et,Je,at),We=re(nr,Xt,Je,at);xt=Dt(ze,[We,Ue,Et],[-1,-1,Xe[it[0]]])||xt,xt=Dt(ze,[Et,Xt,We],[Xe[it[0]],Xe[it[1]],-1])||xt,ot=!0}}),ot||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(it){if(Ft[it[0]]&&!Ft[it[1]]&&!Ft[it[2]]){var Et=He[it[0]],nr=He[it[2]],Ue=re(He[it[1]],Et,Je,at),We=re(nr,Et,Je,at);xt=Dt(ze,[We,Ue,Et],[-1,-1,Xe[it[0]]])||xt,ot=!0}}),xt}function ue(ze,He,Xe,Je){var Dt,ot,it,Et,at=!1,pt=se(He),xt=[ie(pt[0][3],Xe,Je),ie(pt[1][3],Xe,Je),ie(pt[2][3],Xe,Je),ie(pt[3][3],Xe,Je)];if(!(xt[0]||xt[1]||xt[2]||xt[3]))return at;if(xt[0]&&xt[1]&&xt[2]&&xt[3])return T&&(Dt=ze,ot=pt,it=He,(Et=function(Xt,nr,Ue){K(Dt,[ot[Xt],ot[nr],ot[Ue]],[it[Xt],it[nr],it[Ue]])})(0,1,2),Et(3,0,1),Et(2,3,0),at=void Et(1,2,3)||at),at;var Ft=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Dt){if(xt[Dt[0]]&&xt[Dt[1]]&&xt[Dt[2]]&&!xt[Dt[3]]){var ot=pt[Dt[0]],it=pt[Dt[1]],Et=pt[Dt[2]],Xt=pt[Dt[3]];if(T)at=K(ze,[ot,it,Et],[He[Dt[0]],He[Dt[1]],He[Dt[2]]])||at;else{var nr=re(Xt,ot,Xe,Je),Ue=re(Xt,it,Xe,Je),We=re(Xt,Et,Xe,Je);at=K(null,[nr,Ue,We],[-1,-1,-1])||at}Ft=!0}}),Ft||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Dt){if(xt[Dt[0]]&&xt[Dt[1]]&&!xt[Dt[2]]&&!xt[Dt[3]]){var ot=pt[Dt[0]],it=pt[Dt[1]],Et=pt[Dt[2]],Xt=pt[Dt[3]],nr=re(Et,ot,Xe,Je),Ue=re(Et,it,Xe,Je),We=re(Xt,it,Xe,Je),Be=re(Xt,ot,Xe,Je);T?(at=K(ze,[ot,Be,nr],[He[Dt[0]],-1,-1])||at,at=K(ze,[it,Ue,We],[He[Dt[1]],-1,-1])||at):(null,Ae=[nr,Ue,We,Be],De=[-1,-1,-1,-1],(Oe=function(Ie,et,ct){K(null,[Ae[Ie],Ae[et],Ae[ct]],[De[Ie],De[et],De[ct]])})(0,1,2),at=void Oe(2,3,0)||at),Ft=!0}var Ae,De,Oe}),Ft||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Dt){if(xt[Dt[0]]&&!xt[Dt[1]]&&!xt[Dt[2]]&&!xt[Dt[3]]){var ot=pt[Dt[0]],Et=pt[Dt[2]],Xt=pt[Dt[3]],nr=re(pt[Dt[1]],ot,Xe,Je),Ue=re(Et,ot,Xe,Je),We=re(Xt,ot,Xe,Je);T?(at=K(ze,[ot,nr,Ue],[He[Dt[0]],-1,-1])||at,at=K(ze,[ot,Ue,We],[He[Dt[0]],-1,-1])||at,at=K(ze,[ot,We,nr],[He[Dt[0]],-1,-1])||at):at=K(null,[nr,Ue,We],[-1,-1,-1])||at,Ft=!0}})),at}function ge(ze,He,Xe,Je,at,pt,xt,Ft,Dt,ot,it){var Et=!1;return k&&(j(ze,"A")&&(Et=ue(null,[He,Xe,Je,pt],ot,it)||Et),j(ze,"B")&&(Et=ue(null,[Xe,Je,at,Dt],ot,it)||Et),j(ze,"C")&&(Et=ue(null,[Xe,pt,xt,Dt],ot,it)||Et),j(ze,"D")&&(Et=ue(null,[Je,pt,Ft,Dt],ot,it)||Et),j(ze,"E")&&(Et=ue(null,[Xe,Je,pt,Dt],ot,it)||Et)),T&&(Et=ue(ze,[Xe,Je,pt,Dt],ot,it)||Et),Et}function be(ze,He,Xe,Je,at,pt,xt,Ft){return[!0===Ft[0]||de(ze,se([He,Xe,Je]),[He,Xe,Je],pt,xt),!0===Ft[1]||de(ze,se([Je,at,He]),[Je,at,He],pt,xt)]}function Te(ze,He,Xe,Je,at,pt,xt,Ft,Dt){return Ft?be(ze,He,Xe,at,Je,pt,xt,Dt):be(ze,Xe,at,Je,He,pt,xt,Dt)}function we(ze,He,Xe,Je,at,pt,xt){var Ft,Dt,ot,it,Et=!1,Xt=function(){Et=de(ze,[Ft,Dt,ot],[-1,-1,-1],at,pt)||Et,Et=de(ze,[ot,it,Ft],[-1,-1,-1],at,pt)||Et},nr=xt[0],Ue=xt[1],We=xt[2];return nr&&(Ft=V(se([H(He,Xe-0,Je-0)])[0],se([H(He-1,Xe-0,Je-0)])[0],nr),Dt=V(se([H(He,Xe-0,Je-1)])[0],se([H(He-1,Xe-0,Je-1)])[0],nr),ot=V(se([H(He,Xe-1,Je-1)])[0],se([H(He-1,Xe-1,Je-1)])[0],nr),it=V(se([H(He,Xe-1,Je-0)])[0],se([H(He-1,Xe-1,Je-0)])[0],nr),Xt()),Ue&&(Ft=V(se([H(He-0,Xe,Je-0)])[0],se([H(He-0,Xe-1,Je-0)])[0],Ue),Dt=V(se([H(He-0,Xe,Je-1)])[0],se([H(He-0,Xe-1,Je-1)])[0],Ue),ot=V(se([H(He-1,Xe,Je-1)])[0],se([H(He-1,Xe-1,Je-1)])[0],Ue),it=V(se([H(He-1,Xe,Je-0)])[0],se([H(He-1,Xe-1,Je-0)])[0],Ue),Xt()),We&&(Ft=V(se([H(He-0,Xe-0,Je)])[0],se([H(He-0,Xe-0,Je-1)])[0],We),Dt=V(se([H(He-0,Xe-1,Je)])[0],se([H(He-0,Xe-1,Je-1)])[0],We),ot=V(se([H(He-1,Xe-1,Je)])[0],se([H(He-1,Xe-1,Je-1)])[0],We),it=V(se([H(He-1,Xe-0,Je)])[0],se([H(He-1,Xe-0,Je-1)])[0],We),Xt()),Et}function Le(ze,He,Xe,Je,at,pt,xt,Ft,Dt,ot,it,Et){var Xt=ze;return Et?(k&&"even"===ze&&(Xt=null),ge(Xt,He,Xe,Je,at,pt,xt,Ft,Dt,ot,it)):(k&&"odd"===ze&&(Xt=null),ge(Xt,Dt,Ft,xt,pt,at,Je,Xe,He,ot,it))}function fe(ze,He,Xe,Je,at){for(var pt=[],xt=0,Ft=0;Ft<He.length;Ft++)for(var Dt=He[Ft],ot=1;ot<R;ot++)for(var it=1;it<C;it++)pt.push(Te(ze,H(Dt,it-1,ot-1),H(Dt,it-1,ot),H(Dt,it,ot-1),H(Dt,it,ot),Xe,Je,(Dt+it+ot)%2,at&&at[xt]?at[xt]:[])),xt++;return pt}function ve(ze,He,Xe,Je,at){for(var pt=[],xt=0,Ft=0;Ft<He.length;Ft++)for(var Dt=He[Ft],ot=1;ot<S;ot++)for(var it=1;it<R;it++)pt.push(Te(ze,H(ot-1,Dt,it-1),H(ot,Dt,it-1),H(ot-1,Dt,it),H(ot,Dt,it),Xe,Je,(ot+Dt+it)%2,at&&at[xt]?at[xt]:[])),xt++;return pt}function Me(ze,He,Xe,Je,at){for(var pt=[],xt=0,Ft=0;Ft<He.length;Ft++)for(var Dt=He[Ft],ot=1;ot<C;ot++)for(var it=1;it<S;it++)pt.push(Te(ze,H(it-1,ot-1,Dt),H(it-1,ot,Dt),H(it,ot-1,Dt),H(it,ot,Dt),Xe,Je,(it+ot+Dt)%2,at&&at[xt]?at[xt]:[])),xt++;return pt}function ke(ze,He,Xe){for(var Je=1;Je<R;Je++)for(var at=1;at<C;at++)for(var pt=1;pt<S;pt++)Le(ze,H(pt-1,at-1,Je-1),H(pt-1,at-1,Je),H(pt-1,at,Je-1),H(pt-1,at,Je),H(pt,at-1,Je-1),H(pt,at-1,Je),H(pt,at,Je-1),H(pt,at,Je),He,Xe,(pt+at+Je)%2)}function Ce(ze,He,Xe){k=!0,ke(ze,He,Xe),k=!1}function Pe(ze,He,Xe,Je,at,pt){for(var xt=[],Dt=0;Dt<He.length;Dt++)for(var ot=He[Dt],it=1;it<R;it++)for(var Et=1;Et<C;Et++)xt.push(we(ze,ot,Et,it,Xe,Je,at[Dt]));return xt}function Fe(ze,He,Xe,Je,at,pt){for(var xt=[],Dt=0;Dt<He.length;Dt++)for(var ot=He[Dt],it=1;it<S;it++)for(var Et=1;Et<R;Et++)xt.push(we(ze,it,ot,Et,Xe,Je,at[Dt]));return xt}function qe(ze,He,Xe,Je,at,pt){for(var xt=[],Dt=0;Dt<He.length;Dt++)for(var ot=He[Dt],it=1;it<C;it++)for(var Et=1;Et<S;Et++)xt.push(we(ze,Et,it,ot,Xe,Je,at[Dt]));return xt}function rt(ze,He){for(var Xe=[],Je=ze;Je<He;Je++)Xe.push(Je);return Xe}return function(){if(z(),function(){for(var Ft=0;Ft<S;Ft++)for(var Dt=0;Dt<C;Dt++)for(var ot=0;ot<R;ot++){var it=H(Ft,Dt,ot);N(s._x[it],s._y[it],s._z[it],s._value[it])}}(),m&&b&&(Q(b),T=!0,ke(null,Z,Y),T=!1),x&&w){Q(w);for(var ze=s.surface.pattern,He=s.surface.count,Xe=0;Xe<He;Xe++){var Je=1===He?.5:Xe/(He-1),at=(1-Je)*Z+Je*Y,pt=Math.abs(at-U)>Math.abs(at-X)?[U,at]:[at,X];Ce(ze,pt[0],pt[1])}}var xt=[[Math.min(Z,X),Math.max(Z,X)],[Math.min(U,Y),Math.max(U,Y)]];["x","y","z"].forEach(function(Ft){for(var Dt=[],ot=0;ot<xt.length;ot++){var it=0,Et=xt[ot][0],Xt=xt[ot][1],nr=s.slices[Ft];if(nr.show&&nr.fill){Q(nr.fill);var Ue=[],We=[],Be=[];if(nr.locations.length)for(var Qe=0;Qe<nr.locations.length;Qe++){var Ae=i(nr.locations[Qe],"x"===Ft?A:"y"===Ft?I:D);0===Ae.distRatio?Ue.push(Ae.id):Ae.id>0&&(We.push(Ae.id),Be.push("x"===Ft?[Ae.distRatio,0,0]:"y"===Ft?[0,Ae.distRatio,0]:[0,0,Ae.distRatio]))}else Ue=rt(1,"x"===Ft?S-1:"y"===Ft?C-1:R-1);We.length>0&&(Dt[it]="x"===Ft?Pe(null,We,Et,Xt,Be):"y"===Ft?Fe(null,We,Et,Xt,Be):qe(null,We,Et,Xt,Be),it++),Ue.length>0&&(Dt[it]="x"===Ft?fe(null,Ue,Et,Xt,Dt[it]):"y"===Ft?ve(null,Ue,Et,Xt,Dt[it]):Me(null,Ue,Et,Xt,Dt[it]),it++)}var De=s.caps[Ft];De.show&&De.fill&&(Q(De.fill),Dt[it]="x"===Ft?fe(null,[0,S-1],Et,Xt,Dt[it]):"y"===Ft?ve(null,[0,C-1],Et,Xt,Dt[it]):Me(null,[0,R-1],Et,Xt,Dt[it]),it++)}}),0===L&&z(),s._meshX=u,s._meshY=h,s._meshZ=v,s._meshIntensity=f,s._Xs=A,s._Ys=I,s._Zs=D}(),s}$.exports={findNearestOnAxis:i,generateIsoMeshes:p,createIsosurfaceTrace:function(s,a){var u=d({gl:s.glplot.gl}),h=new r(s,u,a.uid);return u._trace=h,h.update(a),s.glplot.add(u),h}}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry"),_=y("./attributes"),t=y("../../components/colorscale/defaults");function e(i,r,o,n,p){var s=p("isomin"),a=p("isomax");null!=a&&null!=s&&s>a&&(r.isomin=null,r.isomax=null);var c=p("x"),u=p("y"),h=p("z"),v=p("value");c&&c.length&&u&&u.length&&h&&h.length&&v&&v.length?(g.getComponentMethod("calendars","handleTraceDefaults")(i,r,["x","y","z"],n),p("valuehoverformat"),["x","y","z"].forEach(function(f){p(f+"hoverformat");var l="caps."+f;p(l+".show")&&p(l+".fill");var x="slices."+f;p(x+".show")&&(p(x+".fill"),p(x+".locations"))}),p("spaceframe.show")&&p("spaceframe.fill"),p("surface.show")&&(p("surface.count"),p("surface.fill"),p("surface.pattern")),p("contour.show")&&(p("contour.color"),p("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(f){p(f)}),t(i,r,n,p,{prefix:"",cLetter:"c"}),r._length=null):r.visible=!1}$.exports={supplyDefaults:function(i,r,o,n){e(i,r,0,n,function(p,s){return d.coerce(i,r,_,p,s)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,calc:y("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/attributes"),g=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../surface/attributes"),e=y("../../plots/attributes"),i=y("../../lib/extend").extendFlat;$.exports=i({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:_({editType:"calc"}),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},d("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:t.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:i({},t.contours.x.show,{}),color:t.contours.x.color,width:t.contours.x.width,editType:"calc"},lightposition:{x:i({},t.lightposition.x,{dflt:1e5}),y:i({},t.lightposition.y,{dflt:1e5}),z:i({},t.lightposition.z,{dflt:0}),editType:"calc"},lighting:i({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},t.lighting),hoverinfo:i({},e.hoverinfo,{editType:"calc"}),showlegend:i({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/calc");$.exports=function(g,_){_.intensity&&d(g,_,{vals:_.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_mesh3d,g=y("../../../stackgl_modules").delaunay_triangulate,_=y("../../../stackgl_modules").alpha_shape,t=y("../../../stackgl_modules").convex_hull,e=y("../../lib/gl_format_color").parseColorScale,i=y("../../lib/str2rgbarray"),r=y("../../components/colorscale").extractOpts,o=y("../../plots/gl3d/zip3");function n(h,v,f){this.scene=h,this.uid=f,this.mesh=v,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var p=n.prototype;function s(h){for(var v=[],f=h.length,l=0;l<f;l++)v[l]=i(h[l]);return v}function a(h,v,f,l){for(var x=[],m=v.length,w=0;w<m;w++)x[w]=h.d2l(v[w],0,l)*f;return x}function c(h){for(var v=[],f=h.length,l=0;l<f;l++)v[l]=Math.round(h[l]);return v}function u(h,v){for(var f=h.length,l=0;l<f;l++)if(h[l]<=-.5||h[l]>=v-.5)return!1;return!0}p.handlePick=function(h){if(h.object===this.mesh){var v=h.index=h.data.index;h.traceCoordinate=h.data._cellCenter?h.data.dataCoordinate:[this.data.x[v],this.data.y[v],this.data.z[v]];var f=this.data.hovertext||this.data.text;return Array.isArray(f)&&void 0!==f[v]?h.textLabel=f[v]:f&&(h.textLabel=f),!0}},p.update=function(h){var v=this.scene,f=v.fullSceneLayout;this.data=h;var l,x=h.x.length,m=o(a(f.xaxis,h.x,v.dataScale[0],h.xcalendar),a(f.yaxis,h.y,v.dataScale[1],h.ycalendar),a(f.zaxis,h.z,v.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!u(h.i,x)||!u(h.j,x)||!u(h.k,x))return;l=o(c(h.i),c(h.j),c(h.k))}else l=0===h.alphahull?t(m):h.alphahull>0?_(h.alphahull,m):function(T,L){for(var A=["x","y","z"].indexOf(T),I=[],D=L.length,S=0;S<D;S++)I[S]=[L[S][(A+1)%3],L[S][(A+2)%3]];return g(I)}(h.delaunayaxis,m);var w={positions:m,cells:l,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:i(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var b=r(h);this.color="#fff";var k=h.intensitymode;w[k+"Intensity"]=h.intensity,w[k+"IntensityBounds"]=[b.min,b.max],w.colormap=e(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],w.vertexColors=s(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],w.cellColors=s(h.facecolor)):(this.color=h.color,w.meshColor=i(h.color));this.mesh.update(w)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(h,v){var l=d({gl:h.glplot.gl}),x=new n(h,l,v.uid);return l._trace=x,x.update(v),h.glplot.add(l),x}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../../components/colorscale/defaults"),t=y("./attributes");$.exports=function(e,i,r,o){function n(s,a){return g.coerce(e,i,t,s,a)}function p(s){var a=s.map(function(c){var u=n(c);return u&&g.isArrayOrTypedArray(u)?u:null});return a.every(function(c){return c&&c.length===a[0].length})&&a}p(["x","y","z"])?(p(["i","j","k"]),(!i.i||i.j&&i.k)&&(!i.j||i.k&&i.i)&&(!i.k||i.i&&i.j)?(d.getComponentMethod("calendars","handleTraceDefaults")(e,i,["x","y","z"],o),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(s){n(s)}),n("contour.show")&&(n("contour.color"),n("contour.width")),"intensity"in e?(n("intensity"),n("intensitymode"),_(e,i,o,n,{prefix:"",cLetter:"c"})):(i.showscale=!1,"facecolor"in e?n("facecolor"):"vertexcolor"in e?n("vertexcolor"):n("color",r)),n("text"),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),i._length=null):i.visible=!1):i.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(y,$,ee){"use strict";var d=y("../../lib").extendFlat,g=y("../scatter/attributes"),_=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=y("../../components/drawing/attributes").dash,e=y("../../components/fx/attributes"),i=y("../../constants/delta.js"),r=i.INCREASING.COLOR,o=i.DECREASING.COLOR,n=g.line;function p(s){return{line:{color:d({},n.color,{dflt:s}),width:n.width,dash:t,editType:"style"},editType:"style"}}$.exports={xperiod:g.xperiod,xperiod0:g.xperiod0,xperiodalignment:g.xperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:d({},n.width,{}),dash:d({},t,{}),editType:"style"},increasing:p(r),decreasing:p(o),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:d({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(y,$,ee){"use strict";var d=y("../../lib"),g=d._,_=y("../../plots/cartesian/axes"),t=y("../../plots/cartesian/align_period"),e=y("../../constants/numerical").BADNUM;function i(o,n,p,s){return{o,h:n,l:p,c:s}}function r(o,n,p,s,a,c){for(var u=a.makeCalcdata(n,"open"),h=a.makeCalcdata(n,"high"),v=a.makeCalcdata(n,"low"),f=a.makeCalcdata(n,"close"),l=Array.isArray(n.text),x=Array.isArray(n.hovertext),m=!0,w=null,b=!!n.xperiodalignment,k=[],T=0;T<s.length;T++){var L=s[T],A=u[T],I=h[T],D=v[T],S=f[T];if(L!==e&&A!==e&&I!==e&&D!==e&&S!==e){S===A?null!==w&&S!==w&&(m=S>w):m=S>A,w=S;var C=c(A,I,D,S);C.pos=L,C.yc=(A+S)/2,C.i=T,C.dir=m?"increasing":"decreasing",C.x=C.pos,C.y=[D,I],b&&(C.orig_p=p[T]),l&&(C.tx=n.text[T]),x&&(C.htx=n.hovertext[T]),k.push(C)}else k.push({pos:L,empty:!0})}return n._extremes[a._id]=_.findExtremes(a,d.concat(v,h),{padded:!0}),k.length&&(k[0].t={labels:{open:g(o,"open:")+" ",high:g(o,"high:")+" ",low:g(o,"low:")+" ",close:g(o,"close:")+" "}}),k}$.exports={calc:function(o,n){var p=_.getFromId(o,n.xaxis),s=_.getFromId(o,n.yaxis),a=function(f,l,x){var m=x._minDiff;if(!m){var w,b=f._fullData,k=[];for(m=1/0,w=0;w<b.length;w++){var T=b[w];if("ohlc"===T.type&&!0===T.visible&&T.xaxis===l._id){k.push(T);var L=l.makeCalcdata(T,"x");T._origX=L;var A=t(x,l,"x",L).vals;T._xcalc=A;var I=d.distinctVals(A).minDiff;I&&isFinite(I)&&(m=Math.min(m,I))}}for(m===1/0&&(m=1),w=0;w<k.length;w++)k[w]._minDiff=m}return m*x.tickwidth}(o,p,n),c=n._minDiff;n._minDiff=null;var u=n._origX;n._origX=null;var h=n._xcalc;n._xcalc=null;var v=r(o,n,u,h,s,i);return n._extremes[p._id]=_.findExtremes(p,h,{vpad:c/2}),v.length?(d.extendFlat(v[0].t,{wHover:c/2,tickLen:a}),v):[{t:{empty:!0}}]},calcCommon:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./ohlc_defaults"),_=y("../scatter/period_defaults"),t=y("./attributes");function e(i,r,o,n){o(n+".line.color"),o(n+".line.width",r.line.width),o(n+".line.dash",r.line.dash)}$.exports=function(i,r,o,n){function p(s,a){return d.coerce(i,r,t,s,a)}g(i,r,p,n)?(_(i,r,n,p,{x:!0}),p("xhoverformat"),p("yhoverformat"),p("line.width"),p("line.dash"),e(0,r,p,"increasing"),e(0,r,p,"decreasing"),p("text"),p("hovertext"),p("tickwidth"),n._requestRangeslider[r.xaxis]=!0):r.visible=!1}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../lib"),_=y("../../components/fx"),t=y("../../components/color"),e=y("../../lib").fillText,i=y("../../constants/delta.js"),r={increasing:i.INCREASING.SYMBOL,decreasing:i.DECREASING.SYMBOL};function o(s,a,c,u){var h,v,f=s.cd,l=s.xa,x=f[0].trace,m=f[0].t,w=x.type,b="ohlc"===w?"l":"min",k="ohlc"===w?"h":"max",T=m.bPos||0,L=m.bdPos||m.tickLen,A=m.wHover,I=Math.min(1,L/Math.abs(l.r2c(l.range[1])-l.r2c(l.range[0])));function D(X){var Z=X.pos+T-a;return _.inbox(Z-A,Z+A,h)}function S(X){var Z=X[b],Y=X[k];return Z===Y||_.inbox(Z-c,Y-c,h)}function C(X){return(D(X)+S(X))/2}h=s.maxHoverDistance-I,v=s.maxSpikeDistance-I;var R=_.getDistanceFunction(u,D,S,C);if(_.getClosest(f,R,s),!1===s.index)return null;var F=f[s.index];if(F.empty)return null;var H=x[F.dir],U=H.line.color;return s.color=t.opacity(U)&&H.line.width?U:H.fillcolor,s.x0=l.c2p(F.pos+T-L,!0),s.x1=l.c2p(F.pos+T+L,!0),s.xLabelVal=void 0!==F.orig_p?F.orig_p:F.pos,s.spikeDistance=C(F)*v/h,s.xSpike=l.c2p(F.pos,!0),s}function n(s,a,c,u){var h=s.cd,v=s.ya,f=h[0].trace,l=h[0].t,x=[],m=o(s,a,c,u);if(!m)return[];var w=h[m.index].hi||f.hoverinfo,b=w.split("+");if("all"!==w&&-1===b.indexOf("y"))return[];for(var k=["high","open","close","low"],T={},L=0;L<k.length;L++){var A,I=k[L],D=f[I][m.index],S=v.c2p(D,!0);D in T?(A=T[D]).yLabel+="<br>"+l.labels[I]+d.hoverLabelText(v,D,f.yhoverformat):((A=g.extendFlat({},m)).y0=A.y1=S,A.yLabelVal=D,A.yLabel=l.labels[I]+d.hoverLabelText(v,D,f.yhoverformat),A.name="",x.push(A),T[D]=A)}return x}function p(s,a,c,u){var h=s.cd,v=s.ya,f=h[0].trace,l=h[0].t,x=o(s,a,c,u);if(!x)return[];var m=h[x.index],w=x.index=m.i,b=m.dir;function k(C){return l.labels[C]+d.hoverLabelText(v,f[C][w],f.yhoverformat)}var T=m.hi||f.hoverinfo,L=T.split("+"),A="all"===T,I=A||-1!==L.indexOf("y"),D=A||-1!==L.indexOf("text"),S=I?[k("open"),k("high"),k("low"),k("close")+"  "+r[b]]:[];return D&&e(m,f,S),x.extraText=S.join("<br>"),x.y0=x.y1=v.c2p(m.yc,!0),[x]}$.exports={hoverPoints:function(s,a,c,u){return s.cd[0].trace.hoverlabel.split?n(s,a,c,u):p(s,a,c,u)},hoverSplit:n,hoverOnPoints:p}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"ohlc",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc").calc,plot:y("./plot"),style:y("./style"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib");$.exports=function(_,t,e,i){var r=e("x"),o=e("open"),n=e("high"),p=e("low"),s=e("close");if(e("hoverlabel.split"),d.getComponentMethod("calendars","handleTraceDefaults")(_,t,["x"],i),o&&n&&p&&s){var a=Math.min(o.length,n.length,p.length,s.length);return r&&(a=Math.min(a,g.minRowLength(r))),t._length=a,a}}},{"../../lib":503,"../../registry":638}],878:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib");$.exports=function(_,t,e,i){var r=t.yaxis,o=t.xaxis,n=!!o.rangebreaks;g.makeTraceGroups(i,e,"trace ohlc").each(function(p){var s=d.select(this),a=p[0],c=a.t;if(!0!==a.trace.visible||c.empty)s.remove();else{var u=c.tickLen,h=s.selectAll("path").data(g.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(v){if(v.empty)return"M0,0Z";var f=o.c2p(v.pos-u,!0),l=o.c2p(v.pos+u,!0),x=n?(f+l)/2:o.c2p(v.pos,!0);return"M"+f+","+r.c2p(v.o,!0)+"H"+x+"M"+x+","+r.c2p(v.h,!0)+"V"+r.c2p(v.l,!0)+"M"+l+","+r.c2p(v.c,!0)+"H"+x})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(y,$,ee){"use strict";$.exports=function(d,g){var _,t=d.cd,e=d.xaxis,i=d.yaxis,r=[],o=t[0].t.bPos||0;if(!1===g)for(_=0;_<t.length;_++)t[_].selected=0;else for(_=0;_<t.length;_++){var n=t[_];g.contains([e.c2p(n.pos+o),i.c2p(n.yc)],null,n.i,d)?(r.push({pointNumber:n.i,x:e.c2d(n.pos),y:i.c2d(n.yc)}),n.selected=1):n.selected=0}return r}},{}],880:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("../../components/color");$.exports=function(t,e,i){var r=i||d.select(t).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(o){return o[0].trace.opacity}),r.each(function(o){var n=o[0].trace;d.select(this).selectAll("path").each(function(p){if(!p.empty){var s=n[p.dir].line;d.select(this).style("fill","none").call(_.stroke,s.color).call(g.dashLine,s.dash,s.width).style("opacity",n.selectedpoints&&!p.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(y,$,ee){"use strict";var d=y("../../lib/extend").extendFlat,g=y("../../plots/attributes"),_=y("../../plots/font_attributes"),t=y("../../components/colorscale/attributes"),e=y("../../plots/template_attributes").hovertemplateAttrs,i=y("../../plots/domain").attributes,r=d({editType:"calc"},t("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:i({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:d({},g.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:_({editType:"calc"}),tickfont:_({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:r,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(y,$,ee){"use strict";var d=y("../../plots/get_data").getModuleCalcData,g=y("./plot");ee.name="parcats",ee.plot=function(_,t,e,i){var r=d(_.calcdata,"parcats");r.length&&g(_,r[0],e,i)},ee.clean=function(_,t,e,i){var r=i._has&&i._has("parcats"),o=t._has&&t._has("parcats");r&&!o&&i._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(y,$,ee){"use strict";var d=y("../../lib/gup").wrap,g=y("../../components/colorscale/helpers").hasColorscale,_=y("../../components/colorscale/calc"),t=y("../../lib/filter_unique.js"),e=y("../../components/drawing"),i=y("../../lib"),r=y("fast-isnumeric");function o(s,a,c){s.valueInds.push(a),s.count+=c}function n(s,a,c){return{categoryInds:s,color:a,rawColor:c,valueInds:[],count:0}}function p(s,a,c){s.valueInds.push(a),s.count+=c}$.exports=function(s,a){var c=i.filterVisible(a.dimensions);if(0===c.length)return[];var u,h,v,f=c.map(function(W){var te;if("trace"===W.categoryorder)te=null;else if("array"===W.categoryorder)te=W.categoryarray;else{te=t(W.values);for(var z=!0,N=0;N<te.length;N++)if(!r(te[N])){z=!1;break}te.sort(z?i.sorterAsc:void 0),"category descending"===W.categoryorder&&(te=te.reverse())}return function(V,Q){Q=null==Q?[]:Q.map(function(de){return de});var j={},J={},K=[];Q.forEach(function(de,ue){j[de]=0,J[de]=ue});for(var re=0;re<V.length;re++){var ie,ce=V[re];void 0===j[ce]?(j[ce]=1,ie=Q.push(ce)-1,J[ce]=ie):(j[ce]++,ie=J[ce]),K.push(ie)}var se=Q.map(function(de){return j[de]});return{uniqueValues:Q,uniqueCounts:se,inds:K}}(W.values,te)});u=i.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(W){var te;if(function(z){for(var N=new Array(z.length),V=0;V<z.length;V++){if(z[V]<0||z[V]>=z.length||void 0!==N[z[V]])return!1;N[z[V]]=!0}return!0}(W.map(function(z){return z.displayindex})))for(te=0;te<W.length;te++)W[te]._displayindex=W[te].displayindex;else for(te=0;te<W.length;te++)W[te]._displayindex=te}(c),c.forEach(function(W,te){!function(z,N){z._categoryarray=N.uniqueValues,z._ticktext=null==z.ticktext?[]:z.ticktext.slice();for(var V=z._ticktext.length;V<N.uniqueValues.length;V++)z._ticktext.push(N.uniqueValues[V])}(W,f[te])});var l,x=a.line;x?(g(a,"line")&&_(s,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),l=e.tryColorscale(x)):l=i.identity;var m,w,b,k,T,L=c[0].values.length,A={},I=f.map(function(W){return W.inds});for(v=0,m=0;m<L;m++){var D=[];for(w=0;w<I.length;w++)D.push(I[w][m]);v+=h=u[m%u.length];var S=(b=m,k=void 0,T=void 0,i.isArrayOrTypedArray(x.color)?T=k=x.color[b%x.color.length]:k=x.color,{color:l(k),rawColor:T}),C=D+"-"+S.rawColor;void 0===A[C]&&(A[C]=n(D,S.color,S.rawColor)),p(A[C],m,h)}var R,W,te,z,N,F=c.map(function(W,te){return{dimensionInd:te,containerInd:W._index,displayInd:W._displayindex,dimensionLabel:W.label,count:v,categories:[],dragX:null}});for(m=0;m<L;m++)for(h=u[m%u.length],w=0;w<F.length;w++){var H=F[w].containerInd,U=f[w].inds[m],X=F[w].categories;void 0===X[U]&&(X[U]={dimensionInd:w,categoryInd:R=U,categoryValue:a.dimensions[H]._categoryarray[U],displayInd:R,categoryLabel:a.dimensions[H]._ticktext[U],valueInds:[],count:0,dragY:null}),o(X[U],m,h)}return d((te=A,z=v,N=(W=F).map(function(V){return V.categories.length}).reduce(function(V,Q){return Math.max(V,Q)}),{dimensions:W,paths:te,trace:void 0,maxCats:N,count:z}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/helpers").hasColorscale,_=y("../../components/colorscale/defaults"),t=y("../../plots/domain").defaults,e=y("../../plots/array_container_defaults"),i=y("./attributes"),r=y("../parcoords/merge_length");function o(n,p){function s(l,x){return d.coerce(n,p,i.dimensions,l,x)}var a=s("values"),c=s("visible");if(a&&a.length||(c=p.visible=!1),c){s("label"),s("displayindex",p._index);var u,h=n.categoryarray,v=Array.isArray(h)&&h.length>0;v&&(u="array");var f=s("categoryorder",u);"array"===f?(s("categoryarray"),s("ticktext")):(delete n.categoryarray,delete n.ticktext),v||"array"!==f||(p.categoryorder="trace")}}$.exports=function(n,p,s,a){function c(l,x){return d.coerce(n,p,i,l,x)}var u=e(n,p,{name:"dimensions",handleItemDefaults:o}),h=function(l,x,m,w,b){b("line.shape"),b("line.hovertemplate");var k=b("line.color",w.colorway[0]);if(g(l,"line")&&d.isArrayOrTypedArray(k)){if(k.length)return b("line.colorscale"),_(l,x,w,b,{prefix:"line.",cLetter:"c"}),k.length;x.line.color=m}return 1/0}(n,p,s,a,c);t(p,a,c),Array.isArray(u)&&u.length||(p.visible=!1),r(p,u,"values",h),c("hoveron"),c("hovertemplate"),c("arrangement"),c("bundlecolors"),c("sortpaths"),c("counts");var v={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};d.coerceFont(c,"labelfont",v);var f={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};d.coerceFont(c,"tickfont",f)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:y("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-interpolate").interpolateNumber,_=y("../../plot_api/plot_api"),t=y("../../components/fx"),e=y("../../lib"),i=e.strTranslate,r=y("../../components/drawing"),o=y("tinycolor2"),n=y("../../lib/svg_text_utils");function p(z,N,V,Q){var j=z.map(X.bind(0,N,V)),J=Q.selectAll("g.parcatslayer").data([null]);J.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var K=J.selectAll("g.trace.parcats").data(j,s),re=K.enter().append("g").attr("class","trace parcats");K.attr("transform",function(we){return i(we.x,we.y)}),re.append("g").attr("class","paths");var ie=K.select("g.paths").selectAll("path.path").data(function(we){return we.paths},s);ie.attr("fill",function(we){return we.model.color});var ce=ie.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(we){return we.model.color}).attr("fill-opacity",0);x(ce),ie.attr("d",function(we){return we.svgD}),ce.empty()||ie.sort(c),ie.exit().remove(),ie.on("mouseover",u).on("mouseout",h).on("click",l),re.append("g").attr("class","dimensions");var se=K.select("g.dimensions").selectAll("g.dimension").data(function(we){return we.dimensions},s);se.enter().append("g").attr("class","dimension"),se.attr("transform",function(we){return i(we.x,0)}),se.exit().remove();var de=se.selectAll("g.category").data(function(we){return we.categories},s),ue=de.enter().append("g").attr("class","category");de.attr("transform",function(we){return i(0,we.y)}),ue.append("rect").attr("class","catrect").attr("pointer-events","none"),de.select("rect.catrect").attr("fill","none").attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),w(ue);var ge=de.selectAll("rect.bandrect").data(function(we){return we.bands},s);ge.each(function(){e.raiseToTop(this)}),ge.attr("fill",function(we){return we.color});var be=ge.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(we){return we.color}).attr("fill-opacity",0);ge.attr("fill",function(we){return we.color}).attr("width",function(we){return we.width}).attr("height",function(we){return we.height}).attr("y",function(we){return we.y}).attr("cursor",function(we){return"fixed"===we.parcatsViewModel.arrangement?"default":"perpendicular"===we.parcatsViewModel.arrangement?"ns-resize":"move"}),b(be),ge.exit().remove(),ue.append("text").attr("class","catlabel").attr("pointer-events","none");var Te=N._fullLayout.paper_bgcolor;de.select("text.catlabel").attr("text-anchor",function(we){return a(we)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(Te)).style("fill","rgb(0, 0, 0)").attr("x",function(we){return a(we)?we.width+5:-5}).attr("y",function(we){return we.height/2}).text(function(we){return we.model.categoryLabel}).each(function(we){r.font(d.select(this),we.parcatsViewModel.categorylabelfont),n.convertToTspans(d.select(this),N)}),ue.append("text").attr("class","dimlabel"),de.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(we){return"fixed"===we.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(we){return we.width/2}).attr("y",-5).text(function(we,Le){return 0===Le?we.parcatsViewModel.model.dimensions[we.model.dimensionInd].dimensionLabel:null}).each(function(we){r.font(d.select(this),we.parcatsViewModel.labelfont)}),de.selectAll("rect.bandrect").on("mouseover",I).on("mouseout",D),de.exit().remove(),se.call(d.behavior.drag().origin(function(we){return{x:we.x,y:0}}).on("dragstart",S).on("drag",C).on("dragend",R)),K.each(function(we){we.traceSelection=d.select(this),we.pathSelection=d.select(this).selectAll("g.paths").selectAll("path.path"),we.dimensionSelection=d.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),K.exit().remove()}function s(z){return z.key}function a(z){return z.model.dimensionInd===z.parcatsViewModel.dimensions[z.parcatsViewModel.dimensions.length-1].model.dimensionInd}function c(z,N){return z.model.rawColor>N.model.rawColor?1:z.model.rawColor<N.model.rawColor?-1:0}function u(z){if(!z.parcatsViewModel.dragDimension&&-1===z.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),m(d.select(this));var N=v(z),V=f(z);if(z.parcatsViewModel.graphDiv.emit("plotly_hover",{points:N,event:d.event,constraints:V}),-1===z.parcatsViewModel.hoverinfoItems.indexOf("none")){var Q,j,J,K=d.mouse(this)[0],re=z.parcatsViewModel.graphDiv,ie=z.parcatsViewModel.trace,ce=re._fullLayout,se=ce._paperdiv.node().getBoundingClientRect(),de=z.parcatsViewModel.graphDiv.getBoundingClientRect();for(J=0;J<z.leftXs.length-1;J++)if(z.leftXs[J]+z.dimWidths[J]-2<=K&&K<=z.leftXs[J+1]+2){var ue=z.parcatsViewModel.dimensions[J];Q=(ue.x+ue.width+z.parcatsViewModel.dimensions[J+1].x)/2,j=(z.topYs[J]+z.topYs[J+1]+z.height)/2;break}var be=z.parcatsViewModel.x+Q,Te=z.parcatsViewModel.y+j,we=o.mostReadable(z.model.color,["black","white"]),Le=z.model.count,fe=Le/z.parcatsViewModel.model.count,ve={countLabel:Le,probabilityLabel:fe.toFixed(3)},Me=[];-1!==z.parcatsViewModel.hoverinfoItems.indexOf("count")&&Me.push(["Count:",ve.countLabel].join(" ")),-1!==z.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Me.push(["P:",ve.probabilityLabel].join(" "));var ke=Me.join("<br>"),Ce=d.mouse(re)[0];t.loneHover({trace:ie,x:be-se.left+de.left,y:Te-se.top+de.top,text:ke,color:z.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:we,idealAlign:Ce<be?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:ve,eventData:[{data:ie._input,fullData:ie,count:Le,probability:fe}]},{container:ce._hoverlayer.node(),outerContainer:ce._paper.node(),gd:re})}}}function h(z){if(!z.parcatsViewModel.dragDimension&&(x(d.select(this)),t.loneUnhover(z.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),z.parcatsViewModel.pathSelection.sort(c),-1===z.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var N=v(z),V=f(z);z.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:N,event:d.event,constraints:V})}}function v(z){for(var N=[],V=F(z.parcatsViewModel),Q=0;Q<z.model.valueInds.length;Q++)N.push({curveNumber:V,pointNumber:z.model.valueInds[Q]});return N}function f(z){for(var N={},V=z.parcatsViewModel.model.dimensions,Q=0;Q<V.length;Q++){var j=V[Q];N[j.containerInd]=j.categories[z.model.categoryInds[Q]].categoryValue}return void 0!==z.model.rawColor&&(N.color=z.model.rawColor),N}function l(z){if(-1===z.parcatsViewModel.hoverinfoItems.indexOf("skip")){var N=v(z),V=f(z);z.parcatsViewModel.graphDiv.emit("plotly_click",{points:N,event:d.event,constraints:V})}}function x(z){z.attr("fill",function(N){return N.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m(z){z.attr("fill-opacity",.8).attr("stroke",function(N){return o.mostReadable(N.model.color,["black","white"])}).attr("stroke-width",.3)}function w(z){z.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function b(z){z.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function k(z){var V=z.categoryViewModel.model.dimensionInd,Q=z.categoryViewModel.model.categoryInd;return z.parcatsViewModel.pathSelection.filter(function(j){return j.model.categoryInds[V]===Q&&j.model.color===z.color})}function T(z,N,V){var Q=d.select(z).datum(),j=Q.categoryViewModel.model,J=Q.parcatsViewModel.graphDiv,K=d.select(z.parentNode).selectAll("rect.bandrect"),re=[];K.each(function(ce){k(ce).each(function(se){Array.prototype.push.apply(re,v(se))})});var ie={};ie[j.dimensionInd]=j.categoryValue,J.emit(N,{points:re,event:V,constraints:ie})}function L(z,N,V){var Q=d.select(z).datum(),j=Q.categoryViewModel.model,J=Q.parcatsViewModel.graphDiv,K=k(Q),re=[];K.each(function(ce){Array.prototype.push.apply(re,v(ce))});var ie={};ie[j.dimensionInd]=j.categoryValue,void 0!==Q.rawColor&&(ie.color=Q.rawColor),J.emit(N,{points:re,event:V,constraints:ie})}function A(z,N,V){z._fullLayout._calcInverseTransform(z);var Q,j,J=z._fullLayout._invScaleX,K=z._fullLayout._invScaleY,re=d.select(V.parentNode).select("rect.catrect"),ie=re.node().getBoundingClientRect(),ce=re.datum(),se=ce.parcatsViewModel,ue=se.trace,ge=ie.top+ie.height/2;se.dimensions.length>1&&se.model.dimensions[ce.model.dimensionInd].displayInd===se.dimensions.length-1?(Q=ie.left,j="left"):(Q=ie.left+ie.width,j="right");var be=ce.model.count,Te=ce.model.categoryLabel,we=be/ce.parcatsViewModel.model.count,Le={countLabel:be,categoryLabel:Te,probabilityLabel:we.toFixed(3)},fe=[];-1!==ce.parcatsViewModel.hoverinfoItems.indexOf("count")&&fe.push(["Count:",Le.countLabel].join(" ")),-1!==ce.parcatsViewModel.hoverinfoItems.indexOf("probability")&&fe.push(["P("+Le.categoryLabel+"):",Le.probabilityLabel].join(" "));var ve=fe.join("<br>");return{trace:ue,x:J*(Q-N.left),y:K*(ge-N.top),text:ve,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:j,hovertemplate:ue.hovertemplate,hovertemplateLabels:Le,eventData:[{data:ue._input,fullData:ue,count:be,category:Te,probability:we}]}}function I(z){if(!z.parcatsViewModel.dragDimension&&-1===z.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(d.mouse(this)[1]<-1)return;var N,V=z.parcatsViewModel.graphDiv,Q=V._fullLayout,j=Q._paperdiv.node().getBoundingClientRect(),J=z.parcatsViewModel.hoveron;"color"===J?(m(ie=k(re=d.select(this).datum())),ie.each(function(){e.raiseToTop(this)}),d.select(this.parentNode).selectAll("rect.bandrect").filter(function(ce){return ce.color===re.color}).each(function(){e.raiseToTop(this),d.select(this).attr("stroke","black").attr("stroke-width",1.5)}),L(this,"plotly_hover",d.event)):(function(K){d.select(K.parentNode).selectAll("rect.bandrect").each(function(re){var ie=k(re);m(ie),ie.each(function(){e.raiseToTop(this)})}),d.select(K.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),T(this,"plotly_hover",d.event)),-1===z.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===J?N=A(V,j,this):"color"===J?N=function(K,re,ie){K._fullLayout._calcInverseTransform(K);var ce,se,de=K._fullLayout._invScaleX,ue=K._fullLayout._invScaleY,ge=ie.getBoundingClientRect(),be=d.select(ie).datum(),Te=be.categoryViewModel,we=Te.parcatsViewModel,fe=we.trace,ve=ge.y+ge.height/2;we.dimensions.length>1&&we.model.dimensions[Te.model.dimensionInd].displayInd===we.dimensions.length-1?(ce=ge.left,se="left"):(ce=ge.left+ge.width,se="right");var Me=Te.model.categoryLabel,ke=be.parcatsViewModel.model.count,Ce=0;be.categoryViewModel.bands.forEach(function(pt){pt.color===be.color&&(Ce+=pt.count)});var Pe=Te.model.count,Fe=0;we.pathSelection.each(function(pt){pt.model.color===be.color&&(Fe+=pt.model.count)});var qe=Ce/ke,rt=Ce/Fe,ze=Ce/Pe,He={countLabel:ke,categoryLabel:Me,probabilityLabel:qe.toFixed(3)},Xe=[];-1!==Te.parcatsViewModel.hoverinfoItems.indexOf("count")&&Xe.push(["Count:",He.countLabel].join(" ")),-1!==Te.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Xe.push("P(color \u2229 "+Me+"): "+He.probabilityLabel),Xe.push("P("+Me+" | color): "+rt.toFixed(3)),Xe.push("P(color | "+Me+"): "+ze.toFixed(3)));var Je=Xe.join("<br>"),at=o.mostReadable(be.color,["black","white"]);return{trace:fe,x:de*(ce-re.left),y:ue*(ve-re.top),text:Je,color:be.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:at,fontSize:10,idealAlign:se,hovertemplate:fe.hovertemplate,hovertemplateLabels:He,eventData:[{data:fe._input,fullData:fe,category:Me,count:ke,probability:qe,categorycount:Pe,colorcount:Fe,bandcolorcount:Ce}]}}(V,j,this):"dimension"===J&&(N=function(K,re,ie){var ce=[];return d.select(ie.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ce.push(A(K,re,this))}),ce}(V,j,this)),N&&t.loneHover(N,{container:Q._hoverlayer.node(),outerContainer:Q._paper.node(),gd:V}))}var re,ie}function D(z){var N=z.parcatsViewModel;!N.dragDimension&&(x(N.pathSelection),w(N.dimensionSelection.selectAll("g.category")),b(N.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),t.loneUnhover(N.graphDiv._fullLayout._hoverlayer.node()),N.pathSelection.sort(c),-1===N.hoverinfoItems.indexOf("skip"))&&("color"===z.parcatsViewModel.hoveron?L(this,"plotly_unhover",d.event):T(this,"plotly_unhover",d.event))}function S(z){"fixed"!==z.parcatsViewModel.arrangement&&(z.dragDimensionDisplayInd=z.model.displayInd,z.initialDragDimensionDisplayInds=z.parcatsViewModel.model.dimensions.map(function(N){return N.displayInd}),z.dragHasMoved=!1,z.dragCategoryDisplayInd=null,d.select(this).selectAll("g.category").select("rect.catrect").each(function(N){var V=d.mouse(this)[0],Q=d.mouse(this)[1];-2<=V&&V<=N.width+2&&-2<=Q&&Q<=N.height+2&&(z.dragCategoryDisplayInd=N.model.displayInd,z.initialDragCategoryDisplayInds=z.model.categories.map(function(j){return j.displayInd}),N.model.dragY=N.y,e.raiseToTop(this.parentNode),d.select(this.parentNode).selectAll("rect.bandrect").each(function(j){j.y<Q&&Q<=j.y+j.height&&(z.potentialClickBand=this)}))}),z.parcatsViewModel.dragDimension=z,t.loneUnhover(z.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function C(z){if("fixed"!==z.parcatsViewModel.arrangement&&(z.dragHasMoved=!0,null!==z.dragDimensionDisplayInd)){var N=z.dragDimensionDisplayInd,V=N-1,Q=N+1,j=z.parcatsViewModel.dimensions[N];if(null!==z.dragCategoryDisplayInd){var J=j.categories[z.dragCategoryDisplayInd];J.model.dragY+=d.event.dy;var K=J.model.dragY,re=J.model.displayInd,ie=j.categories,ce=ie[re-1],se=ie[re+1];void 0!==ce&&K<ce.y+ce.height/2&&(J.model.displayInd=ce.model.displayInd,ce.model.displayInd=re),void 0!==se&&K+J.height>se.y+se.height/2&&(J.model.displayInd=se.model.displayInd,se.model.displayInd=re),z.dragCategoryDisplayInd=J.model.displayInd}if(null===z.dragCategoryDisplayInd||"freeform"===z.parcatsViewModel.arrangement){j.model.dragX=d.event.x;var de=z.parcatsViewModel.dimensions[V],ue=z.parcatsViewModel.dimensions[Q];void 0!==de&&j.model.dragX<de.x+de.width&&(j.model.displayInd=de.model.displayInd,de.model.displayInd=N),void 0!==ue&&j.model.dragX+j.width>ue.x&&(j.model.displayInd=ue.model.displayInd,ue.model.displayInd=z.dragDimensionDisplayInd),z.dragDimensionDisplayInd=j.model.displayInd}W(z.parcatsViewModel),Y(z.parcatsViewModel),U(z.parcatsViewModel),H(z.parcatsViewModel)}}function R(z){if("fixed"!==z.parcatsViewModel.arrangement&&null!==z.dragDimensionDisplayInd){d.select(this).selectAll("text").attr("font-weight","normal");var N={},V=F(z.parcatsViewModel),Q=z.parcatsViewModel.model.dimensions.map(function(se){return se.displayInd}),j=z.initialDragDimensionDisplayInds.some(function(se,de){return se!==Q[de]});j&&Q.forEach(function(se,de){N["dimensions["+z.parcatsViewModel.model.dimensions[de].containerInd+"].displayindex"]=se});var J=!1;if(null!==z.dragCategoryDisplayInd){var K=z.model.categories.map(function(se){return se.displayInd});if(J=z.initialDragCategoryDisplayInds.some(function(se,de){return se!==K[de]})){var re=z.model.categories.slice().sort(function(se,de){return se.displayInd-de.displayInd}),ie=re.map(function(se){return se.categoryValue}),ce=re.map(function(se){return se.categoryLabel});N["dimensions["+z.model.containerInd+"].categoryarray"]=[ie],N["dimensions["+z.model.containerInd+"].ticktext"]=[ce],N["dimensions["+z.model.containerInd+"].categoryorder"]="array"}}-1===z.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!z.dragHasMoved&&z.potentialClickBand&&("color"===z.parcatsViewModel.hoveron?L(z.potentialClickBand,"plotly_click",d.event.sourceEvent):T(z.potentialClickBand,"plotly_click",d.event.sourceEvent)),z.model.dragX=null,null!==z.dragCategoryDisplayInd&&(z.parcatsViewModel.dimensions[z.dragDimensionDisplayInd].categories[z.dragCategoryDisplayInd].model.dragY=null,z.dragCategoryDisplayInd=null),z.dragDimensionDisplayInd=null,z.parcatsViewModel.dragDimension=null,z.dragHasMoved=null,z.potentialClickBand=null,W(z.parcatsViewModel),Y(z.parcatsViewModel),d.transition().duration(300).ease("cubic-in-out").each(function(){U(z.parcatsViewModel,!0),H(z.parcatsViewModel,!0)}).each("end",function(){(j||J)&&_.restyle(z.parcatsViewModel.graphDiv,N,[V])})}}function F(z){for(var N,V=z.graphDiv._fullData,Q=0;Q<V.length;Q++)if(z.key===V[Q].uid){N=Q;break}return N}function H(z,N){var V;void 0===N&&(N=!1),z.pathSelection.data(function(Q){return Q.paths},s),(V=z.pathSelection,N?V.transition():V).attr("d",function(Q){return Q.svgD})}function U(z,N){function V(K){return N?K.transition():K}void 0===N&&(N=!1),z.dimensionSelection.data(function(K){return K.dimensions},s);var Q=z.dimensionSelection.selectAll("g.category").data(function(K){return K.categories},s);V(z.dimensionSelection).attr("transform",function(K){return i(K.x,0)}),V(Q).attr("transform",function(K){return i(0,K.y)}),Q.select(".dimlabel").text(function(K,re){return 0===re?K.parcatsViewModel.model.dimensions[K.model.dimensionInd].dimensionLabel:null}),Q.select(".catlabel").attr("text-anchor",function(K){return a(K)?"start":"end"}).attr("x",function(K){return a(K)?K.width+5:-5}).each(function(K){var re,ie;a(K)?(re=K.width+5,ie="start"):(re=-5,ie="end"),d.select(this).selectAll("tspan").attr("x",re).attr("text-anchor",ie)});var j=Q.selectAll("rect.bandrect").data(function(K){return K.bands},s),J=j.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(K){return K.color}).attr("fill-opacity",0);j.attr("fill",function(K){return K.color}).attr("width",function(K){return K.width}).attr("height",function(K){return K.height}).attr("y",function(K){return K.y}),b(J),j.each(function(){e.raiseToTop(this)}),j.exit().remove()}function X(z,N,V){var Q,j=V[0],J=N.margin||{l:80,r:80,t:100,b:80},K=j.trace,re=K.domain,ie=N.width,ce=N.height,se=Math.floor(ie*(re.x[1]-re.x[0])),de=Math.floor(ce*(re.y[1]-re.y[0])),ue=re.x[0]*ie+J.l,ge=N.height-re.y[1]*N.height+J.t,be=K.line.shape;Q="all"===K.hoverinfo?["count","probability"]:(K.hoverinfo||"").split("+");var Te={trace:K,key:K.uid,model:j,x:ue,y:ge,width:se,height:de,hoveron:K.hoveron,hoverinfoItems:Q,arrangement:K.arrangement,bundlecolors:K.bundlecolors,sortpaths:K.sortpaths,labelfont:K.labelfont,categorylabelfont:K.tickfont,pathShape:be,dragDimension:null,margin:J,paths:[],dimensions:[],graphDiv:z,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&(W(Te),Y(Te)),Te}function Z(z,N,V,Q,j){var J,K,re=[],ie=[];for(K=0;K<V.length-1;K++)J=g(V[K]+z[K],z[K+1]),re.push(J(j)),ie.push(J(1-j));var ce="M "+z[0]+","+N[0];for(ce+="l"+V[0]+",0 ",K=1;K<V.length;K++)ce+="C"+re[K-1]+","+N[K-1]+" "+ie[K-1]+","+N[K]+" "+z[K]+","+N[K],ce+="l"+V[K]+",0 ";for(ce+="l0,"+Q+" ",ce+="l -"+V[V.length-1]+",0 ",K=V.length-2;K>=0;K--)ce+="C"+ie[K]+","+(N[K+1]+Q)+" "+re[K]+","+(N[K]+Q)+" "+(z[K]+V[K])+","+(N[K]+Q),ce+="l-"+V[K]+",0 ";return ce+"Z"}function Y(z){var N=z.dimensions,V=z.model,Q=N.map(function(Xe){return Xe.categories.map(function(Je){return Je.y})}),j=z.model.dimensions.map(function(Xe){return Xe.categories.map(function(Je){return Je.displayInd})}),J=z.model.dimensions.map(function(Xe){return Xe.displayInd}),K=z.dimensions.map(function(Xe){return Xe.model.dimensionInd}),re=N.map(function(Xe){return Xe.x}),ie=N.map(function(Xe){return Xe.width}),ce=[];for(var se in V.paths)V.paths.hasOwnProperty(se)&&ce.push(V.paths[se]);function de(Xe){var Je=Xe.categoryInds.map(function(at,pt){return j[pt][at]});return K.map(function(at){return Je[at]})}ce.sort(function(Xe,Je){var at=de(Xe),pt=de(Je);return"backward"===z.sortpaths&&(at.reverse(),pt.reverse()),at.push(Xe.valueInds[0]),pt.push(Je.valueInds[0]),z.bundlecolors&&(at.unshift(Xe.rawColor),pt.unshift(Je.rawColor)),at<pt?-1:at>pt?1:0});for(var ue=new Array(ce.length),ge=N[0].model.count,be=N[0].categories.map(function(Xe){return Xe.height}).reduce(function(Xe,Je){return Xe+Je}),Te=0;Te<ce.length;Te++){var we,Le=ce[Te];we=ge>0?be*(Le.count/ge):0;for(var fe,ve=new Array(Q.length),Me=0;Me<Le.categoryInds.length;Me++){var Ce=j[Me][Le.categoryInds[Me]],Pe=J[Me];ve[Pe]=Q[Pe][Ce],Q[Pe][Ce]+=we;var Fe=z.dimensions[Pe].categories[Ce],qe=Fe.bands.length,rt=Fe.bands[qe-1];if(void 0===rt||Le.rawColor!==rt.rawColor){var ze=void 0===rt?0:rt.y+rt.height;Fe.bands.push({key:ze,color:Le.color,rawColor:Le.rawColor,height:we,width:Fe.width,count:Le.count,y:ze,categoryViewModel:Fe,parcatsViewModel:z})}else{var He=Fe.bands[qe-1];He.height+=we,He.count+=Le.count}}fe=Z(re,ve,ie,we,"hspline"===z.pathShape?.5:0),ue[Te]={key:Le.valueInds[0],model:Le,height:we,leftXs:re,topYs:ve,dimWidths:ie,svgD:fe,parcatsViewModel:z}}z.paths=ue}function W(z){var N=z.model.dimensions.map(function(K){return{displayInd:K.displayInd,dimensionInd:K.dimensionInd}});N.sort(function(K,re){return K.displayInd-re.displayInd});var V=[];for(var Q in N)V.push(te(z,z.model.dimensions[N[Q].dimensionInd]));z.dimensions=V}function te(z,N){var V,Q=z.model.dimensions.length;V=40+(Q>1?(z.width-80-16)/(Q-1):0)*N.displayInd;var J,K,re,ce,se=[],de=z.model.maxCats,ue=N.categories.length,ge=N.count,be=z.height-8*(de-1),Te=8*(de-ue)/2,we=N.categories.map(function(Le){return{displayInd:Le.displayInd,categoryInd:Le.categoryInd}});for(we.sort(function(Le,fe){return Le.displayInd-fe.displayInd}),ce=0;ce<ue;ce++)re={key:(K=N.categories[we[ce].categoryInd]).valueInds[0],model:K,width:16,height:J=ge>0?K.count/ge*be:0,y:null!==K.dragY?K.dragY:Te,bands:[],parcatsViewModel:z},Te=Te+J+8,se.push(re);return{key:N.dimensionInd,x:null!==N.dragX?N.dragX:V,y:0,width:16,model:N,categories:se,parcatsViewModel:z,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(z,N,V,Q){p(V,z,Q,N)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(y,$,ee){"use strict";var d=y("./parcats");$.exports=function(g,_,t,e){var i=g._fullLayout,o=i._size;d(g,i._paper,_,{width:o.w,height:o.h,margin:{t:o.t,r:o.r,b:o.b,l:o.l}},t,e)}},{"./parcats":886}],888:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/attributes"),g=y("../../plots/cartesian/layout_attributes"),_=y("../../plots/font_attributes"),t=y("../../plots/domain").attributes,e=y("../../lib/extend").extendFlat,i=y("../../plot_api/plot_template").templatedArray;$.exports={domain:t({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:_({editType:"plot"}),tickfont:_({editType:"plot"}),rangefont:_({editType:"plot"}),dimensions:i("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},g.tickvals,{editType:"plot"}),ticktext:e({},g.ticktext,{editType:"plot"}),tickformat:e({},g.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},d("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(y,$,ee){"use strict";var d=y("./constants"),g=y("@plotly/d3"),_=y("../../lib/gup").keyFun,t=y("../../lib/gup").repeat,e=y("../../lib").sorterAsc,i=y("../../lib").strTranslate,r=d.bar.snapRatio;function o(A,I){return A*(1-r)+I*r}var n=d.bar.snapClose;function p(A,I){return A*(1-n)+I*n}function s(A,I,D,S){if(function(te,z){for(var N=0;N<z.length;N++)if(te>=z[N][0]&&te<=z[N][1])return!0;return!1}(D,S))return D;var C=A?-1:1,R=0,F=I.length-1;if(C<0){var H=R;R=F,F=H}for(var U=I[R],X=U,Z=R;C*Z<C*F;Z+=C){var Y=Z+C,W=I[Y];if(C*D<C*p(U,W))return o(U,X);if(C*D<C*W||Y===F)return o(W,U);X=U,U=W}}function a(A){A.attr("x",-d.bar.captureWidth/2).attr("width",d.bar.captureWidth)}function c(A){A.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(A){if(!A.brush.filterSpecified)return"0,"+A.height;for(var I,D,S,C=h(A.brush.filter.getConsolidated(),A.height),R=[0],F=C.length?C[0][0]:null,H=0;H<C.length;H++)D=(I=C[H])[1]-I[0],R.push(F),R.push(D),(S=H+1)<C.length&&(F=C[S][0]-I[1]);return R.push(A.height),R}function h(A,I){return A.map(function(D){return D.map(function(S){return Math.max(0,S*I)}).sort(e)})}function v(){g.select(document.body).style("cursor",null)}function f(A){A.attr("stroke-dasharray",u)}function l(A,I){var D=g.select(A).selectAll(".highlight, .highlight-shadow");f(I?D.transition().duration(d.bar.snapDuration).each("end",I):D)}function x(A,I){var D,S=A.brush,C=NaN,R={};if(S.filterSpecified){var F=A.height,H=S.filter.getConsolidated(),U=h(H,F),X=NaN,Z=NaN,Y=NaN;for(D=0;D<=U.length;D++){var W=U[D];if(W&&W[0]<=I&&I<=W[1]){X=D;break}if(Z=D?D-1:NaN,W&&W[0]>I){Y=D;break}}if(C=X,isNaN(C)&&(C=isNaN(Z)||isNaN(Y)?isNaN(Z)?Y:Z:I-U[Z][1]<U[Y][0]-I?Z:Y),!isNaN(C)){var te=U[C],z=function(j,J){var K=d.bar.handleHeight;if(!(J>j[1]+K||J<j[0]-K))return J>=.9*j[1]+.1*j[0]?"n":J<=.9*j[0]+.1*j[1]?"s":"ns"}(te,I);z&&(R.interval=H[C],R.intervalPix=te,R.region=z)}}if(A.ordinal&&!R.region){var N=A.unitTickvals,V=A.unitToPaddedPx.invert(I);for(D=0;D<N.length;D++){var Q=[.25*N[Math.max(D-1,0)]+.75*N[D],.25*N[Math.min(D+1,N.length-1)]+.75*N[D]];if(V>=Q[0]&&V<=Q[1]){R.clickableOrdinalRange=Q;break}}}return R}function m(A,I){g.event.sourceEvent.stopPropagation();var D=I.height-g.mouse(A)[1]-2*d.verticalPadding,S=I.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.newExtent=S.grabbingBar?[D-S.grabPoint,D+S.barLength-S.grabPoint].map(I.unitToPaddedPx.invert):[S.startExtent,I.unitToPaddedPx.invert(D)].sort(e),I.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(I),l(A.parentNode)}function w(A,I){var D=x(I,I.height-g.mouse(A)[1]-2*d.verticalPadding),S="crosshair";D.clickableOrdinalRange?S="pointer":D.region&&(S=D.region+"-resize"),g.select(document.body).style("cursor",S)}function b(A){A.on("mousemove",function(I){g.event.preventDefault(),I.parent.inBrushDrag||w(this,I)}).on("mouseleave",function(I){I.parent.inBrushDrag||v()}).call(g.behavior.drag().on("dragstart",function(I){!function(D,S){g.event.sourceEvent.stopPropagation();var C=S.height-g.mouse(D)[1]-2*d.verticalPadding,R=S.unitToPaddedPx.invert(C),F=S.brush,H=x(S,C),U=H.interval,X=F.svgBrush;if(X.wasDragged=!1,X.grabbingBar="ns"===H.region,X.grabbingBar){var Z=U.map(S.unitToPaddedPx);X.grabPoint=C-Z[0]-d.verticalPadding,X.barLength=Z[1]-Z[0]}X.clickableOrdinalRange=H.clickableOrdinalRange,X.stayingIntervals=S.multiselect&&F.filterSpecified?F.filter.getConsolidated():[],U&&(X.stayingIntervals=X.stayingIntervals.filter(function(Y){return Y[0]!==U[0]&&Y[1]!==U[1]})),X.startExtent=H.region?U["s"===H.region?1:0]:R,S.parent.inBrushDrag=!0,X.brushStartCallback()}(this,I)}).on("drag",function(I){m(this,I)}).on("dragend",function(I){!function(D,S){var C=S.brush,R=C.filter,F=C.svgBrush;F._dragging||(w(D,S),m(D,S),S.brush.svgBrush.wasDragged=!1),F._dragging=!1,g.event.sourceEvent.stopPropagation();var H=F.grabbingBar;if(F.grabbingBar=!1,F.grabLocation=void 0,S.parent.inBrushDrag=!1,v(),!F.wasDragged)return F.wasDragged=void 0,F.clickableOrdinalRange?C.filterSpecified&&S.multiselect?F.extent.push(F.clickableOrdinalRange):(F.extent=[F.clickableOrdinalRange],C.filterSpecified=!0):H?(F.extent=F.stayingIntervals,0===F.extent.length&&T(C)):T(C),F.brushCallback(S),l(D.parentNode),void F.brushEndCallback(C.filterSpecified?R.getConsolidated():[]);var U=function(){R.set(R.getConsolidated())};if(S.ordinal){var X=S.unitTickvals;X[X.length-1]<X[0]&&X.reverse(),F.newExtent=[s(0,X,F.newExtent[0],F.stayingIntervals),s(1,X,F.newExtent[1],F.stayingIntervals)];var Z=F.newExtent[1]>F.newExtent[0];F.extent=F.stayingIntervals.concat(Z?[F.newExtent]:[]),F.extent.length||T(C),F.brushCallback(S),Z?l(D.parentNode,U):(U(),l(D.parentNode))}else U();F.brushEndCallback(C.filterSpecified?R.getConsolidated():[])}(this,I)}))}function k(A,I){return A[0]-I[0]}function T(A){A.filterSpecified=!1,A.svgBrush.extent=[[-1/0,1/0]]}function L(A){for(var I,D=A.slice(),S=[],C=D.shift();C;){for(I=C.slice();(C=D.shift())&&C[0]<=I[1];)I[1]=Math.max(I[1],C[1]);S.push(I)}return 1===S.length&&S[0][0]>S[0][1]&&(S=[]),S}$.exports={makeBrush:function(A,I,D,S,C,R){var F,U,X,Z,H=(Z=[],{set:function(Y){1===(Z=Y.map(function(W){return W.slice().sort(e)}).sort(k)).length&&Z[0][0]===-1/0&&Z[0][1]===1/0&&(Z=[[0,-1]]),U=L(Z),X=Z.reduce(function(W,te){return[Math.min(W[0],te[0]),Math.max(W[1],te[1])]},[1/0,-1/0])},get:function(){return Z.slice()},getConsolidated:function(){return U},getBounds:function(){return X}});return H.set(D),{filter:H,filterSpecified:I,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(F=C,function(U){var Y,X=U.brush,Z=(Y=X,Y.svgBrush.extent.map(function(W){return W.slice()})).slice();X.filter.set(Z),F()}),brushEndCallback:R}}},ensureAxisBrush:function(A,I){var D=A.selectAll("."+d.cn.axisBrush).data(t,_);D.enter().append("g").classed(d.cn.axisBrush,!0),function(S,C){var R=S.selectAll(".background").data(t);R.enter().append("rect").classed("background",!0).call(a).call(c).style("pointer-events","auto").attr("transform",i(0,d.verticalPadding)),R.call(b).attr("height",function(U){return U.height-d.verticalPadding});var F=S.selectAll(".highlight-shadow").data(t);F.enter().append("line").classed("highlight-shadow",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width+d.bar.strokeWidth).attr("stroke",C).attr("opacity",d.bar.strokeOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(U){return U.height}).call(f);var H=S.selectAll(".highlight").data(t);H.enter().append("line").classed("highlight",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width-d.bar.strokeWidth).attr("stroke",d.bar.fillColor).attr("opacity",d.bar.fillOpacity).attr("stroke-linecap","butt"),H.attr("y1",function(U){return U.height}).call(f)}(D,I)},cleanRanges:function(A,I){if(Array.isArray(A[0])?(A=A.map(function(S){return S.sort(e)}),A=I.multiselect?L(A.sort(k)):[A[0]]):A=[A.sort(e)],I.tickvals){var D=I.tickvals.slice().sort(e);if(!(A=A.map(function(S){var C=[s(0,D,S[0],[]),s(1,D,S[1],[])];if(C[1]>C[0])return C}).filter(function(S){return S})).length)return}return A.length>1?A:A[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../plots/get_data").getModuleCalcData,_=y("./plot"),t=y("../../constants/xmlns_namespaces");ee.name="parcoords",ee.plot=function(e){var i=g(e.calcdata,"parcoords")[0];i.length&&_(e,i)},ee.clean=function(e,i,r,o){var n=o._has&&o._has("parcoords"),p=i._has&&i._has("parcoords");n&&!p&&(o._paperdiv.selectAll(".parcoords").remove(),o._glimages.selectAll("*").remove())},ee.toSVG=function(e){var i=e._fullLayout._glimages,r=d.select(e).selectAll(".svg-container");r.filter(function(o,n){return n===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var o=this.toDataURL("image/png");i.append("svg:image").attr({xmlns:t.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){d.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(y,$,ee){"use strict";var d=y("../../lib").isArrayOrTypedArray,g=y("../../components/colorscale"),_=y("../../lib/gup").wrap;$.exports=function(t,e){var i,r;return g.hasColorscale(e,"line")&&d(e.line.color)?(i=e.line.color,r=g.extractOpts(e.line).colorscale,g.calc(t,e,{vals:i,containerStr:"line",cLetter:"c"})):(i=function(o){for(var n=new Array(o),p=0;p<o;p++)n[p]=.5;return n}(e._length),r=[[0,e.line.color],[1,e.line.color]]),_({lineColor:i,cscale:r})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(y,$,ee){"use strict";$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/helpers").hasColorscale,_=y("../../components/colorscale/defaults"),t=y("../../plots/domain").defaults,e=y("../../plots/array_container_defaults"),i=y("../../plots/cartesian/axes"),r=y("./attributes"),o=y("./axisbrush"),n=y("./constants").maxDimensionCount,p=y("./merge_length");function s(a,c,u,h){function v(w,b){return d.coerce(a,c,r.dimensions,w,b)}var f=v("values"),l=v("visible");if(f&&f.length||(l=c.visible=!1),l){v("label"),v("tickvals"),v("ticktext"),v("tickformat");var x=v("range");c._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:x},i.setConvert(c._ax,h.layout),v("multiselect");var m=v("constraintrange");m&&(c.constraintrange=o.cleanRanges(m,c))}}$.exports=function(a,c,u,h){function v(w,b){return d.coerce(a,c,r,w,b)}var f=a.dimensions;Array.isArray(f)&&f.length>n&&(d.log("parcoords traces support up to "+n+" dimensions at the moment"),f.splice(n));var l=e(a,c,{name:"dimensions",layout:h,handleItemDefaults:s}),x=function(w,b,k,T,L){var A=L("line.color",k);if(g(w,"line")&&d.isArrayOrTypedArray(A)){if(A.length)return L("line.colorscale"),_(w,b,T,L,{prefix:"line.",cLetter:"c"}),A.length;b.line.color=k}return 1/0}(a,c,u,h,v);t(c,h,v),Array.isArray(l)&&l.length||(c.visible=!1),p(c,l,"values",x);var m={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};d.coerceFont(v,"labelfont",m),d.coerceFont(v,"tickfont",m),d.coerceFont(v,"rangefont",m),v("labelangle"),v("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(y,$,ee){"use strict";var d=y("../../lib").isTypedArray;ee.convertTypedArray=function(g){return d(g)?Array.prototype.slice.call(g):g},ee.isOrdinal=function(g){return!!g.tickvals},ee.isVisible=function(g){return g.visible||!("visible"in g)}},{"../../lib":503}],895:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:y("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(y,$,ee){"use strict";var d=y("glslify"),g=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),_=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),t=y("./constants").maxDimensionCount,e=y("../../lib"),i=new Uint8Array(4),r=new Uint8Array(4),o={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(l,x,m,w,b){var k=l._gl;k.enable(k.SCISSOR_TEST),k.scissor(x,m,w,b),l.clear({color:[0,0,0,0],depth:1})}function p(l,x,m,w,b,k){var T=k.key;m.drawCompleted||(l.read({x:0,y:0,width:1,height:1,data:i}),m.drawCompleted=!0),function L(A){var I=Math.min(w,b-A*w);0===A&&(window.cancelAnimationFrame(m.currentRafs[T]),delete m.currentRafs[T],n(l,k.scissorX,k.scissorY,k.scissorWidth,k.viewBoxSize[1])),m.clearOnly||(k.count=2*I,k.offset=2*A*w,x(k),A*w+I<b&&(m.currentRafs[T]=window.requestAnimationFrame(function(){L(A+1)})),m.drawCompleted=!1)}(0)}function s(l,x){for(var m=new Array(256),w=0;w<256;w++)m[w]=l(w/255).concat(x);return m}function a(l,x){return(l>>>8*x)%256/255}function c(l,x,m){for(var w=new Array(8*x),b=0,k=0;k<x;k++)for(var T=0;T<2;T++)for(var L=0;L<4;L++){var A=4*l+L,I=m[64*k+A];63===A&&0===T&&(I*=-1),w[b++]=I}return w}function u(l){var x="0"+l;return x.substr(x.length-2)}function h(l){return l<t?"p"+u(l+1)+"_"+u(l+4):"colors"}function v(l,x,m,w,b,k,T,L,A,I,D,S,C,R){for(var F=[[],[]],H=0;H<64;H++)F[0][H]=H===b?1:0,F[1][H]=H===k?1:0;var U=l.lines.canvasOverdrag*R,X=l.domain,Z=l.canvasWidth*R,Y=l.canvasHeight*R,W=l.pad.l*R,te=l.pad.b*R,z=l.layoutHeight*R,N=l.layoutWidth*R,V=l.deselectedLines.color;return e.extendFlat({key:D,resolution:[Z,Y],viewBoxPos:[(T*=R)+U,L*=R],viewBoxSize:[A*=R,I*=R],i0:b,i1:k,dim0A:F[0].slice(0,16),dim0B:F[0].slice(16,32),dim0C:F[0].slice(32,48),dim0D:F[0].slice(48,64),dim1A:F[1].slice(0,16),dim1B:F[1].slice(16,32),dim1C:F[1].slice(32,48),dim1D:F[1].slice(48,64),drwLayer:S,contextColor:[V[0]/255,V[1]/255,V[2]/255,V[3]<1?V[3]:Math.max(1/255,Math.pow(1/l.lines.color.length,1/3))],scissorX:(w===x?0:T+U)+(W-U)+N*X.x[0],scissorWidth:(w===m?Z-T+U:A+.5)+(w===x?T+U:0),scissorY:L+te+z*X.y[0],scissorHeight:I,viewportX:W-U+N*X.x[0],viewportY:te+z*X.y[0],viewportWidth:Z,viewportHeight:Y},C)}function f(l){var x=Math.max(0,Math.floor(2047*l[0]),0),m=Math.min(2047,Math.ceil(2047*l[1]),2047);return[Math.min(x,m),Math.max(x,m)]}$.exports=function(l,x){var m,b,k,T,L=x.context,A=x.pick,I=x.regl,D=I._gl,S=D.getParameter(D.ALIASED_LINE_WIDTH_RANGE),C=Math.max(S[0],Math.min(S[1],x.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},F=function(Y){for(var W={},te=0;te<=t;te+=4)W[h(te)]=Y.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return W}(I),H=I.texture(o),U=[];Z(x);var X=I({profile:!1,blend:{enable:L,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!L,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:I.prop("scissorX"),y:I.prop("scissorY"),width:I.prop("scissorWidth"),height:I.prop("scissorHeight")}},viewport:{x:I.prop("viewportX"),y:I.prop("viewportY"),width:I.prop("viewportWidth"),height:I.prop("viewportHeight")},dither:!1,vert:g,frag:_,primitive:"lines",lineWidth:C,attributes:F,uniforms:{resolution:I.prop("resolution"),viewBoxPos:I.prop("viewBoxPos"),viewBoxSize:I.prop("viewBoxSize"),dim0A:I.prop("dim0A"),dim1A:I.prop("dim1A"),dim0B:I.prop("dim0B"),dim1B:I.prop("dim1B"),dim0C:I.prop("dim0C"),dim1C:I.prop("dim1C"),dim0D:I.prop("dim0D"),dim1D:I.prop("dim1D"),loA:I.prop("loA"),hiA:I.prop("hiA"),loB:I.prop("loB"),hiB:I.prop("hiB"),loC:I.prop("loC"),hiC:I.prop("hiC"),loD:I.prop("loD"),hiD:I.prop("hiD"),palette:H,contextColor:I.prop("contextColor"),maskTexture:I.prop("maskTexture"),drwLayer:I.prop("drwLayer"),maskHeight:I.prop("maskHeight")},offset:I.prop("offset"),count:I.prop("count")});function Z(Y){m=Y.model,b=Y.viewModel.dimensions.slice(),k=b[0]?b[0].values.length:0;var W=m.lines,te=A?W.color.map(function(N,V){return V/W.color.length}):W.color,z=function(N,V,Q){for(var J=new Array(N*(t+4)),K=0,re=0;re<N;re++){for(var ie=0;ie<t;ie++)J[K++]=ie<V.length?V[ie].paddedUnitValues[re]:.5;J[K++]=a(re,2),J[K++]=a(re,1),J[K++]=a(re,0),J[K++]=Math.max(1e-6,Math.min(.999999,Q[re]))}return J}(k,b,te);(function(N,V,Q){for(var j=0;j<=t;j+=4)N[h(j)](c(j/4,V,Q))})(F,k,z),L||A||(H=I.texture(e.extendFlat({data:s(m.unitToColor,255)},o)))}return{render:function(Y,W,te){var z,N,V,Q=Y.length,j=1/0,J=-1/0;for(z=0;z<Q;z++)Y[z].dim0.canvasX<j&&(j=Y[z].dim0.canvasX,N=z),Y[z].dim1.canvasX>J&&(J=Y[z].dim1.canvasX,V=z);0===Q&&n(I,0,0,m.canvasWidth,m.canvasHeight);var K=function(we){var Le,fe,ve,Me=[[],[]];for(ve=0;ve<64;ve++){var ke=!we&&ve<b.length?b[ve].brush.filter.getBounds():[-1/0,1/0];Me[0][ve]=ke[0],Me[1][ve]=ke[1]}var Ce=new Array(16384);for(Le=0;Le<16384;Le++)Ce[Le]=255;if(!we)for(Le=0;Le<b.length;Le++){var Pe=Le%8,Fe=(Le-Pe)/8,qe=Math.pow(2,Pe),rt=b[Le].brush.filter.get();if(!(rt.length<2)){var ze=f(rt[0])[1];for(fe=1;fe<rt.length;fe++){var He=f(rt[fe]);for(ve=ze+1;ve<He[0];ve++)Ce[8*ve+Fe]&=~qe;ze=Math.max(ze,He[1])}}}var Xe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ce};return T?T(Xe):T=I.texture(Xe),{maskTexture:T,maskHeight:2048,loA:Me[0].slice(0,16),loB:Me[0].slice(16,32),loC:Me[0].slice(32,48),loD:Me[0].slice(48,64),hiA:Me[1].slice(0,16),hiB:Me[1].slice(16,32),hiC:Me[1].slice(32,48),hiD:Me[1].slice(48,64)}}(L);for(z=0;z<Q;z++){var re=Y[z],ie=re.dim0.crossfilterDimensionIndex,ce=re.dim1.crossfilterDimensionIndex,se=re.canvasX,de=re.canvasY,ue=se+re.panelSizeX,ge=re.plotGlPixelRatio;if(W||!U[ie]||U[ie][0]!==se||U[ie][1]!==ue){U[ie]=[se,ue];var be=v(m,N,V,z,ie,ce,se,de,re.panelSizeX,re.panelSizeY,re.dim0.crossfilterDimensionIndex,L?0:A?2:1,K,ge);R.clearOnly=te,p(I,X,R,W?m.lines.blockLineCount:k,k,be)}}},readPixel:function(Y,W){return I.read({x:Y,y:W,width:1,height:1,data:r}),r},readPixels:function(Y,W,te,z){var N=new Uint8Array(4*te*z);return I.read({x:Y,y:W,width:te,height:z,data:N}),N},destroy:function(){for(var Y in l.style["pointer-events"]="none",H.destroy(),T&&T.destroy(),F)F[Y].destroy()},update:Z}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t){var e,i;for(t||(t=1/0),e=0;e<g.length;e++)(i=g[e]).visible&&(t=Math.min(t,i[_].length));for(t===1/0&&(t=0),d._length=t,e=0;e<g.length;e++)(i=g[e]).visible&&(i._length=t);return t}},{}],898:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=g.numberFormat,t=y("color-rgba"),e=y("../../plots/cartesian/axes"),i=g.strRotate,r=g.strTranslate,o=y("../../lib/svg_text_utils"),n=y("../../components/drawing"),p=y("../../components/colorscale"),s=y("../../lib/gup"),a=s.keyFun,c=s.repeat,u=s.unwrap,h=y("./helpers"),v=y("./constants"),f=y("./axisbrush"),l=y("./lines");function x(U,X,Z){return g.aggNums(U,null,X,Z)}function m(U,X){return b(x(Math.min,U,X),x(Math.max,U,X))}function w(U){var X=U.range;return X?b(X[0],X[1]):m(U.values,U._length)}function b(U,X){return!isNaN(U)&&isFinite(U)||(U=0),!isNaN(X)&&isFinite(X)||(X=0),U===X&&(0===U?(U-=1,X+=1):(U*=.9,X*=1.1)),[U,X]}function k(U,X,Z,Y,W){var te,z,N=w(Z);return Y?d.scale.ordinal().domain(Y.map((te=_(Z.tickformat),z=W,z?function(V,Q){var j=z[Q];return null==j?te(V):j}:te))).range(Y.map(function(V){return U-X+(V-N[0])/(N[1]-N[0])*(2*X-U)})):d.scale.linear().domain(N).range([U-X,X])}function T(U){if(U.tickvals){var X=w(U);return d.scale.ordinal().domain(U.tickvals).range(U.tickvals.map(function(Z){return(Z-X[0])/(X[1]-X[0])}))}}function L(U){var X=U.map(function(W){return W[0]}),Z=U.map(function(W){var te=t(W[1]);return d.rgb("rgb("+te[0]+","+te[1]+","+te[2]+")")}),Y="rgb".split("").map(function(W){return d.scale.linear().clamp(!0).domain(X).range(Z.map((te=W,function(z){return z[te]})));var te});return function(W){return Y.map(function(te){return te(W)})}}function A(U){return U.dimensions.some(function(X){return X.brush.filterSpecified})}function I(U,X,Z){var Y=u(X),W=Y.trace,te=h.convertTypedArray(Y.lineColor),z=W.line,N={color:t(v.deselectedLineColor)},V=p.extractOpts(z),Q=V.reversescale?p.flipScale(Y.cscale):Y.cscale,j=W.domain,J=W.dimensions,K=U.width,re=W.labelangle,ie=W.labelside,ce=W.labelfont,se=W.tickfont,de=W.rangefont,ue=g.extendDeepNoArrays({},z,{color:te.map(d.scale.linear().domain(w({values:te,range:[V.min,V.max],_length:W._length}))),blockLineCount:v.blockLineCount,canvasOverdrag:v.overdrag*v.canvasPixelRatio}),ge=Math.floor(K*(j.x[1]-j.x[0])),be=Math.floor(U.height*(j.y[1]-j.y[0])),Te=U.margin||{l:80,r:80,t:100,b:80},we=ge,Le=be;return{key:Z,colCount:J.filter(h.isVisible).length,dimensions:J,tickDistance:v.tickDistance,unitToColor:L(Q),lines:ue,deselectedLines:N,labelAngle:re,labelSide:ie,labelFont:ce,tickFont:se,rangeFont:de,layoutWidth:K,layoutHeight:U.height,domain:j,translateX:j.x[0]*K,translateY:U.height-j.y[1]*U.height,pad:Te,canvasWidth:we*v.canvasPixelRatio+2*ue.canvasOverdrag,canvasHeight:Le*v.canvasPixelRatio,width:we,height:Le,canvasPixelRatio:v.canvasPixelRatio}}function D(U,X,Z){var K,re,Y=Z.width,W=Z.height,te=Z.dimensions,z=Z.canvasPixelRatio,N=function(K){return Y*K/Math.max(1,Z.colCount-1)},V=v.verticalPadding/W,Q=(K=W,re=v.verticalPadding,d.scale.linear().range([re,K-re])),j={key:Z.key,xScale:N,model:Z,inBrushDrag:!1},J={};return j.dimensions=te.filter(h.isVisible).map(function(K,re){var Ce,Pe,ie=(Ce=K,Pe=V,d.scale.linear().domain(w(Ce)).range([Pe,1-Pe])),ce=J[K.label];J[K.label]=(ce||0)+1;var se=K.label+(ce?"__"+ce:""),de=K.constraintrange,ue=de&&de.length;ue&&!Array.isArray(de[0])&&(de=[de]);var ge=ue?de.map(function(Ce){return Ce.map(ie)}):[[-1/0,1/0]],be=K.values;be.length>K._length&&(be=be.slice(0,K._length));var Te,we=K.tickvals;function Le(Ce,Pe){return{val:Ce,text:Te[Pe]}}function fe(Ce,Pe){return Ce.val-Pe.val}if(Array.isArray(we)&&we.length){Te=K.ticktext,Array.isArray(Te)&&Te.length?Te.length>we.length?Te=Te.slice(0,we.length):we.length>Te.length&&(we=we.slice(0,Te.length)):Te=we.map(_(K.tickformat));for(var ve=1;ve<we.length;ve++)if(we[ve]<we[ve-1]){for(var Me=we.map(Le).sort(fe),ke=0;ke<we.length;ke++)we[ke]=Me[ke].val,Te[ke]=Me[ke].text;break}}else we=void 0;return be=h.convertTypedArray(be),{key:se,label:K.label,tickFormat:K.tickformat,tickvals:we,ticktext:Te,ordinal:h.isOrdinal(K),multiselect:K.multiselect,xIndex:re,crossfilterDimensionIndex:re,visibleIndex:K._index,height:W,values:be,paddedUnitValues:be.map(ie),unitTickvals:we&&we.map(ie),xScale:N,x:N(re),canvasX:N(re)*z,unitToPaddedPx:Q,domainScale:k(W,v.verticalPadding,K,we,Te),ordinalScale:T(K),parent:j,model:Z,brush:f.makeBrush(U,ue,ge,function(){U.linePickActive(!1)},function(){var Ce=j;Ce.focusLayer&&Ce.focusLayer.render(Ce.panels,!0);var Pe=A(Ce);!U.contextShown()&&Pe?(Ce.contextLayer&&Ce.contextLayer.render(Ce.panels,!0),U.contextShown(!0)):U.contextShown()&&!Pe&&(Ce.contextLayer&&Ce.contextLayer.render(Ce.panels,!0,!0),U.contextShown(!1))},function(Ce){if(j.focusLayer.render(j.panels,!0),j.pickLayer&&j.pickLayer.render(j.panels,!0),U.linePickActive(!0),X&&X.filterChanged){var Pe=ie.invert,Fe=Ce.map(function(qe){return qe.map(Pe).sort(g.sorterAsc)}).sort(function(qe,rt){return qe[0]-rt[0]});X.filterChanged(j.key,K._index,Fe)}})}}),j}function S(U){U.classed(v.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function C(U,X){var Y=U*Math.PI/180;return{dir:"top"===X?1:-1,dx:Math.sin(Y),dy:Math.cos(Y),degrees:U}}function R(U,X,Z){for(var Y=X.panels||(X.panels=[]),W=U.data(),te=0;te<W.length-1;te++){var z=Y[te]||(Y[te]={}),N=W[te],V=W[te+1];z.dim0=N,z.dim1=V,z.canvasX=N.canvasX,z.panelSizeX=V.canvasX-N.canvasX,z.panelSizeY=X.model.canvasHeight,z.y=0,z.canvasY=0,z.plotGlPixelRatio=Z}}function F(U,X){return e.tickText(U._ax,X,!1).text}function H(U,X){if(U.ordinal)return"";var Z=U.domainScale.domain();return F(U.model.dimensions[U.visibleIndex],Z[X?Z.length-1:0])}$.exports=function(U,X,Z,Y){var W=U._fullLayout,te=W._toppaper,z=W._glcontainer,N=U._context.plotGlPixelRatio,V=U._fullLayout.paper_bgcolor;!function(ke){for(var Ce=0;Ce<ke.length;Ce++)for(var Pe=0;Pe<ke[Ce].length;Pe++)for(var Fe=ke[Ce][Pe].trace,qe=Fe.dimensions,rt=0;rt<qe.length;rt++){var ze=qe[rt].values,He=qe[rt]._ax;He&&(He.range=He.range?b(He.range[0],He.range[1]):m(ze,Fe._length),He.dtick||(He.dtick=.01*(Math.abs(He.range[1]-He.range[0])||1)),He.tickformat=qe[rt].tickformat,e.calcTicks(He),He.cleanRange())}}(X);var Q,j,J=(Q=!0,j=!1,{linePickActive:function(ke){return arguments.length?Q=!!ke:Q},contextShown:function(ke){return arguments.length?j=!!ke:j}}),K=X.filter(function(ke){return u(ke).trace.visible}).map(I.bind(0,Z)).map(D.bind(0,J,Y));z.each(function(ke,Ce){return g.extendFlat(ke,K[Ce])});var re=z.selectAll(".gl-canvas").each(function(ke){ke.viewModel=K[0],ke.viewModel.plotGlPixelRatio=N,ke.viewModel.paperColor=V,ke.model=ke.viewModel?ke.viewModel.model:null}),ie=null;re.filter(function(ke){return ke.pick}).style("pointer-events","auto").on("mousemove",function(ke){if(J.linePickActive()&&ke.lineLayer&&Y&&Y.hover){var Ce=d.event,Pe=this.width,Fe=this.height,qe=d.mouse(this),rt=qe[0],ze=qe[1];if(rt<0||ze<0||rt>=Pe||ze>=Fe)return;var He=ke.lineLayer.readPixel(rt,Fe-1-ze),Xe=0!==He[3],Je=Xe?He[2]+256*(He[1]+256*He[0]):null,at={x:rt,y:ze,clientX:Ce.clientX,clientY:Ce.clientY,dataIndex:ke.model.key,curveNumber:Je};Je!==ie&&(Xe?Y.hover(at):Y.unhover&&Y.unhover(at),ie=Je)}}),re.style("opacity",function(ke){return ke.pick?0:1}),te.style("background","rgba(255, 255, 255, 0)");var ce=te.selectAll("."+v.cn.parcoords).data(K,a);ce.exit().remove(),ce.enter().append("g").classed(v.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ce.attr("transform",function(ke){return r(ke.model.translateX,ke.model.translateY)});var se=ce.selectAll("."+v.cn.parcoordsControlView).data(c,a);se.enter().append("g").classed(v.cn.parcoordsControlView,!0),se.attr("transform",function(ke){return r(ke.model.pad.l,ke.model.pad.t)});var de=se.selectAll("."+v.cn.yAxis).data(function(ke){return ke.dimensions},a);de.enter().append("g").classed(v.cn.yAxis,!0),se.each(function(ke){R(de,ke,N)}),re.each(function(ke){ke.viewModel&&(!ke.lineLayer||Y?ke.lineLayer=l(this,ke):ke.lineLayer.update(ke),(ke.key||0===ke.key)&&(ke.viewModel[ke.key]=ke.lineLayer),ke.lineLayer.render(ke.viewModel.panels,!ke.context||Y))}),de.attr("transform",function(ke){return r(ke.xScale(ke.xIndex),0)}),de.call(d.behavior.drag().origin(function(ke){return ke}).on("drag",function(ke){var Ce=ke.parent;J.linePickActive(!1),ke.x=Math.max(-v.overdrag,Math.min(ke.model.width+v.overdrag,d.event.x)),ke.canvasX=ke.x*ke.model.canvasPixelRatio,de.sort(function(Pe,Fe){return Pe.x-Fe.x}).each(function(Pe,Fe){Pe.xIndex=Fe,Pe.x=ke===Pe?Pe.x:Pe.xScale(Pe.xIndex),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio}),R(de,Ce,N),de.filter(function(Pe){return 0!==Math.abs(ke.xIndex-Pe.xIndex)}).attr("transform",function(Pe){return r(Pe.xScale(Pe.xIndex),0)}),d.select(this).attr("transform",r(ke.x,0)),de.each(function(Pe,Fe,qe){qe===ke.parent.key&&(Ce.dimensions[Fe]=Pe)}),Ce.contextLayer&&Ce.contextLayer.render(Ce.panels,!1,!A(Ce)),Ce.focusLayer.render&&Ce.focusLayer.render(Ce.panels)}).on("dragend",function(ke){var Ce=ke.parent;ke.x=ke.xScale(ke.xIndex),ke.canvasX=ke.x*ke.model.canvasPixelRatio,R(de,Ce,N),d.select(this).attr("transform",function(Pe){return r(Pe.x,0)}),Ce.contextLayer&&Ce.contextLayer.render(Ce.panels,!1,!A(Ce)),Ce.focusLayer&&Ce.focusLayer.render(Ce.panels),Ce.pickLayer&&Ce.pickLayer.render(Ce.panels,!0),J.linePickActive(!0),Y&&Y.axesMoved&&Y.axesMoved(Ce.key,Ce.dimensions.map(function(Pe){return Pe.crossfilterDimensionIndex}))})),de.exit().remove();var ue=de.selectAll("."+v.cn.axisOverlays).data(c,a);ue.enter().append("g").classed(v.cn.axisOverlays,!0),ue.selectAll("."+v.cn.axis).remove();var ge=ue.selectAll("."+v.cn.axis).data(c,a);ge.enter().append("g").classed(v.cn.axis,!0),ge.each(function(ke){var Ce=ke.model.height/ke.model.tickDistance,Pe=ke.domainScale,Fe=Pe.domain();d.select(this).call(d.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ce,ke.tickFormat).tickValues(ke.ordinal?Fe:null).tickFormat(function(qe){return h.isOrdinal(ke)?qe:F(ke.model.dimensions[ke.visibleIndex],qe)}).scale(Pe)),n.font(ge.selectAll("text"),ke.model.tickFont)}),ge.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ge.selectAll("text").style("text-shadow",o.makeTextShadow(V)).style("cursor","default");var be=ue.selectAll("."+v.cn.axisHeading).data(c,a);be.enter().append("g").classed(v.cn.axisHeading,!0);var Te=be.selectAll("."+v.cn.axisTitle).data(c,a);Te.enter().append("text").classed(v.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Te.text(function(ke){return ke.label}).each(function(ke){var Ce=d.select(this);n.font(Ce,ke.model.labelFont),o.convertToTspans(Ce,U)}).attr("transform",function(ke){var Ce=C(ke.model.labelAngle,ke.model.labelSide),Pe=v.axisTitleOffset;return(Ce.dir>0?"":r(0,2*Pe+ke.model.height))+i(Ce.degrees)+r(-Pe*Ce.dx,-Pe*Ce.dy)}).attr("text-anchor",function(ke){var Ce=C(ke.model.labelAngle,ke.model.labelSide);return 2*Math.abs(Ce.dx)>Math.abs(Ce.dy)?Ce.dir*Ce.dx<0?"start":"end":"middle"});var we=ue.selectAll("."+v.cn.axisExtent).data(c,a);we.enter().append("g").classed(v.cn.axisExtent,!0);var Le=we.selectAll("."+v.cn.axisExtentTop).data(c,a);Le.enter().append("g").classed(v.cn.axisExtentTop,!0),Le.attr("transform",r(0,-v.axisExtentOffset));var fe=Le.selectAll("."+v.cn.axisExtentTopText).data(c,a);fe.enter().append("text").classed(v.cn.axisExtentTopText,!0).call(S),fe.text(function(ke){return H(ke,!0)}).each(function(ke){n.font(d.select(this),ke.model.rangeFont)});var ve=we.selectAll("."+v.cn.axisExtentBottom).data(c,a);ve.enter().append("g").classed(v.cn.axisExtentBottom,!0),ve.attr("transform",function(ke){return r(0,ke.model.height+v.axisExtentOffset)});var Me=ve.selectAll("."+v.cn.axisExtentBottomText).data(c,a);Me.enter().append("text").classed(v.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Me.text(function(ke){return H(ke,!1)}).each(function(ke){n.font(d.select(this),ke.model.rangeFont)}),f.ensureAxisBrush(ue,V)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(y,$,ee){"use strict";var d=y("./parcoords"),g=y("../../lib/prepare_regl"),_=y("./helpers").isVisible;function t(e,i,r){var o=i.indexOf(r),n=e.indexOf(o);return-1===n&&(n+=i.length),n}$.exports=function(e,i){var r=e._fullLayout;if(g(e)){var o={},n={},p={},s={},a=r._size;i.forEach(function(c,u){var h=c[0].trace;p[u]=h.index;var v=s[u]=h._fullInput.index;o[u]=e.data[v].dimensions,n[u]=e.data[v].dimensions.slice()}),d(e,i,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},{filterChanged:function(c,u,h){var v=n[c][u],f=h.map(function(k){return k.slice()}),l="dimensions["+u+"].constraintrange",x=r._tracePreGUI[e._fullData[p[c]]._fullInput.uid];void 0===x[l]&&(x[l]=v.constraintrange||null);var w=e._fullData[p[c]].dimensions[u];f.length?(1===f.length&&(f=f[0]),v.constraintrange=f,w.constraintrange=f.slice(),f=[f]):(delete v.constraintrange,delete w.constraintrange,f=null);var b={};b[l]=f,e.emit("plotly_restyle",[b,[s[c]]])},hover:function(c){e.emit("plotly_hover",c)},unhover:function(c){e.emit("plotly_unhover",c)},axesMoved:function(c,u){var v,f,h=(v=u,f=n[c].filter(_),function(l,x){return t(v,f,l)-t(v,f,x)});o[c].sort(h),n[c].filter(function(v){return!_(v)}).sort(function(v){return n[c].indexOf(v)}).forEach(function(v){o[c].splice(o[c].indexOf(v),1),o[c].splice(n[c].indexOf(v),0,v)}),e.emit("plotly_restyle",[{dimensions:[o[c]]},[s[c]]])}})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(y,$,ee){"use strict";var d=y("../../plots/attributes"),g=y("../../plots/domain").attributes,_=y("../../plots/font_attributes"),t=y("../../components/color/attributes"),e=y("../../plots/template_attributes").hovertemplateAttrs,i=y("../../plots/template_attributes").texttemplateAttrs,r=y("../../lib/extend").extendFlat,o=_({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:t.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:r({},d.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:i({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:r({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:r({},o,{}),outsidetextfont:r({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:r({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:g({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:r({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(y,$,ee){"use strict";var d=y("../../plots/plots");ee.name="pie",ee.plot=function(g,_,t,e){d.plotBasePlot(ee.name,g,_,t,e)},ee.clean=function(g,_,t,e){d.cleanBasePlot(ee.name,g,_,t,e)}},{"../../plots/plots":619}],902:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("tinycolor2"),_=y("../../components/color"),t={};function e(r){return function(o,n){return!!o&&!!(o=g(o)).isValid()&&(o=_.addOpacity(o,o.getAlpha()),r[n]||(r[n]=o),o)}}function i(r,o){var n,p=JSON.stringify(r),s=o[p];if(!s){for(s=r.slice(),n=0;n<r.length;n++)s.push(g(r[n]).lighten(20).toHexString());for(n=0;n<r.length;n++)s.push(g(r[n]).darken(20).toHexString());o[p]=s}return s}$.exports={calc:function(r,o){var n,p,s=[],a=r._fullLayout,c=a.hiddenlabels||[],u=o.labels,h=o.marker.colors||[],v=o.values,f=o._length,l=o._hasValues&&f;if(o.dlabel)for(u=new Array(f),n=0;n<f;n++)u[n]=String(o.label0+n*o.dlabel);var x={},m=e(a["_"+o.type+"colormap"]),w=0,b=!1;for(n=0;n<f;n++){var k,T,L;if(l){if(!d(k=v[n]))continue;k=+k}else k=1;void 0!==(T=u[n])&&""!==T||(T=n);var A=x[T=String(T)];void 0===A?(x[T]=s.length,(L=-1!==c.indexOf(T))||(w+=k),s.push({v:k,label:T,color:m(h[n],T),i:n,pts:[n],hidden:L})):(b=!0,(p=s[A]).v+=k,p.pts.push(n),p.hidden||(w+=k),!1===p.color&&h[n]&&(p.color=m(h[n],T)))}return s=s.filter(function(I){return I.v>=0}),("funnelarea"===o.type?b:o.sort)&&s.sort(function(I,D){return D.v-I.v}),s[0]&&(s[0].vTotal=w),s},crossTraceCalc:function(r,o){var n=(o||{}).type;n||(n="pie");var p=r._fullLayout,s=r.calcdata,a=p[n+"colorway"],c=p["_"+n+"colormap"];p["extend"+n+"colors"]&&(a=i(a,t));for(var u=0,h=0;h<s.length;h++){var v=s[h];if(v[0].trace.type===n)for(var f=0;f<v.length;f++){var l=v[f];!1===l.color&&(c[l.label]?l.color=c[l.label]:(c[l.label]=l.color=a[u%a.length],u++))}}},makePullColorFn:e,generateExtendedColors:i}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("./attributes"),t=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText;function i(r,o){var n=Array.isArray(r),p=g.isArrayOrTypedArray(o),s=Math.min(n?r.length:1/0,p?o.length:1/0);if(isFinite(s)||(s=0),s&&p){for(var a,c=0;c<s;c++){var u=o[c];if(d(u)&&u>0){a=!0;break}}a||(s=0)}return{hasLabels:n,hasValues:p,len:s}}$.exports={handleLabelsAndValues:i,supplyDefaults:function(r,o,n,p){function s(m,w){return g.coerce(r,o,_,m,w)}var a=i(s("labels"),s("values")),c=a.len;if(o._hasLabels=a.hasLabels,o._hasValues=a.hasValues,!o._hasLabels&&o._hasValues&&(s("label0"),s("dlabel")),c){o._length=c,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var u,h=s("text"),v=s("texttemplate");if(v||(u=s("textinfo",Array.isArray(h)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),v||u&&"none"!==u){var f=s("textposition");e(r,o,p,s,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(f)||"auto"===f||"outside"===f)&&s("automargin"),("inside"===f||"auto"===f||Array.isArray(f))&&s("insidetextorientation")}t(o,p,s);var l=s("hole");if(s("title.text")){var x=s("title.position",l?"middle center":"top center");l||"middle center"!==x||(o.title.position="top center"),g.coerceFont(s,"title.font",p.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else o.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(y,$,ee){"use strict";var d=y("../../components/fx/helpers").appendArrayMultiPointValues;$.exports=function(g,_){var t={curveNumber:_.index,pointNumbers:g.pts,data:_._input,fullData:_,label:g.label,color:g.color,value:g.v,percent:g.percent,text:g.text,bbox:g.bbox,v:g.v};return 1===g.pts.length&&(t.pointNumber=t.i=g.pts[0]),d(t,_,g.pts),"funnelarea"===_.type&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":402}],905:[function(y,$,ee){"use strict";var d=y("../../lib");function g(_){return-1!==_.indexOf("e")?_.replace(/[.]?0+e/,"e"):-1!==_.indexOf(".")?_.replace(/[.]?0+$/,""):_}ee.formatPiePercent=function(_,t){var e=g((100*_).toPrecision(3));return d.numSeparate(e,t)+"%"},ee.formatPieValue=function(_,t){var e=g(_.toPrecision(10));return d.numSeparate(e,t)},ee.getFirstFilled=function(_,t){if(Array.isArray(_))for(var e=0;e<t.length;e++){var i=_[t[e]];if(i||0===i||""===i)return i}},ee.castOption=function(_,t){return Array.isArray(_)?ee.getFirstFilled(_,t):_||void 0},ee.getRotationAngle=function(_){return("auto"===_?0:_)*Math.PI/180}},{"../../lib":503}],906:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,supplyLayoutDefaults:y("./layout_defaults"),layoutAttributes:y("./layout_attributes"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style"),styleOne:y("./style_one"),moduleType:"trace",name:"pie",basePlotModule:y("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(y,$,ee){"use strict";$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t){function e(i,r){return d.coerce(_,t,g,i,r)}e("hiddenlabels"),e("piecolorway",t.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../plots/plots"),_=y("../../components/fx"),t=y("../../components/color"),e=y("../../components/drawing"),i=y("../../lib"),r=i.strScale,o=i.strTranslate,n=y("../../lib/svg_text_utils"),p=y("../bar/uniform_text"),s=p.recordMinTextSize,a=p.clearMinTextSize,c=y("../bar/constants").TEXTPAD,u=y("./helpers"),h=y("./event_data"),v=y("../../lib").isValidTextValue;function f(X,Z,Y){var W=Y[0],te=W.cx,z=W.cy,N=W.trace,V="funnelarea"===N.type;"_hasHoverLabel"in N||(N._hasHoverLabel=!1),"_hasHoverEvent"in N||(N._hasHoverEvent=!1),X.on("mouseover",function(Q){var j=Z._fullLayout,J=Z._fullData[N.index];if(!Z._dragging&&!1!==j.hovermode){var K=J.hoverinfo;if(Array.isArray(K)&&(K=_.castHoverinfo({hoverinfo:[u.castOption(K,Q.pts)],_module:N._module},j,0)),"all"===K&&(K="label+text+value+percent+name"),J.hovertemplate||"none"!==K&&"skip"!==K&&K){var re=Q.rInscribed||0,ie=te+Q.pxmid[0]*(1-re),ce=z+Q.pxmid[1]*(1-re),se=j.separators,de=[];if(K&&-1!==K.indexOf("label")&&de.push(Q.label),Q.text=u.castOption(J.hovertext||J.text,Q.pts),K&&-1!==K.indexOf("text")){var ue=Q.text;i.isValidTextValue(ue)&&de.push(ue)}Q.value=Q.v,Q.valueLabel=u.formatPieValue(Q.v,se),K&&-1!==K.indexOf("value")&&de.push(Q.valueLabel),Q.percent=Q.v/W.vTotal,Q.percentLabel=u.formatPiePercent(Q.percent,se),K&&-1!==K.indexOf("percent")&&de.push(Q.percentLabel);var ge=J.hoverlabel,be=ge.font,Te=[];_.loneHover({trace:N,x0:ie-re*W.r,x1:ie+re*W.r,y:ce,_x0:V?te+Q.TL[0]:ie-re*W.r,_x1:V?te+Q.TR[0]:ie+re*W.r,_y0:V?z+Q.TL[1]:ce-re*W.r,_y1:V?z+Q.BL[1]:ce+re*W.r,text:de.join("<br>"),name:J.hovertemplate||-1!==K.indexOf("name")?J.name:void 0,idealAlign:Q.pxmid[0]<0?"left":"right",color:u.castOption(ge.bgcolor,Q.pts)||Q.color,borderColor:u.castOption(ge.bordercolor,Q.pts),fontFamily:u.castOption(be.family,Q.pts),fontSize:u.castOption(be.size,Q.pts),fontColor:u.castOption(be.color,Q.pts),nameLength:u.castOption(ge.namelength,Q.pts),textAlign:u.castOption(ge.align,Q.pts),hovertemplate:u.castOption(J.hovertemplate,Q.pts),hovertemplateLabels:Q,eventData:[h(Q,J)]},{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:Z,inOut_bbox:Te}),Q.bbox=Te[0],N._hasHoverLabel=!0}N._hasHoverEvent=!0,Z.emit("plotly_hover",{points:[h(Q,J)],event:d.event})}}),X.on("mouseout",function(Q){var j=Z._fullLayout,J=Z._fullData[N.index],K=d.select(this).datum();N._hasHoverEvent&&(Q.originalEvent=d.event,Z.emit("plotly_unhover",{points:[h(K,J)],event:d.event}),N._hasHoverEvent=!1),N._hasHoverLabel&&(_.loneUnhover(j._hoverlayer.node()),N._hasHoverLabel=!1)}),X.on("click",function(Q){Z._dragging||!1===Z._fullLayout.hovermode||(Z._hoverdata=[h(Q,Z._fullData[N.index])],_.click(Z,d.event))})}function l(X,Z,Y){var W=u.castOption(X.insidetextfont.color,Z.pts);!W&&X._input.textfont&&(W=u.castOption(X._input.textfont.color,Z.pts));var te=u.castOption(X.insidetextfont.family,Z.pts)||u.castOption(X.textfont.family,Z.pts)||Y.family,z=u.castOption(X.insidetextfont.size,Z.pts)||u.castOption(X.textfont.size,Z.pts)||Y.size;return{color:W||t.contrast(Z.color),family:te,size:z}}function x(X,Z){for(var Y,W,te=0;te<X.length;te++)if((W=(Y=X[te][0]).trace).title.text){var z=W.title.text;W._meta&&(z=i.templateString(z,W._meta));var N=e.tester.append("text").attr("data-notex",1).text(z).call(e.font,W.title.font).call(n.convertToTspans,Z),V=e.bBox(N.node(),!0);Y.titleBox={width:V.width,height:V.height},N.remove()}}function m(X,Z,Y){var W=Y.r||Z.rpx1,te=Z.rInscribed;if(Z.startangle===Z.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var z,N=Z.ring,V=1===N&&Math.abs(Z.startangle-Z.stopangle)===2*Math.PI,Q=Z.halfangle,j=Z.midangle,J=Y.trace.insidetextorientation,K="horizontal"===J,re="tangential"===J,ie="radial"===J,ce="auto"===J,se=[];if(!ce){var de,ue=function(fe,ve){if(rt=(Pe=Z).stopangle,(qe=Pe.startangle)>(Fe=fe)&&Fe>rt||qe<Fe&&Fe<rt){var Me=Math.abs(fe-Z.startangle),ke=Math.abs(fe-Z.stopangle),Ce=Me<ke?Me:ke;(z="tan"===ve?b(X,W,N,Ce,0):w(X,W,N,Ce,Math.PI/2)).textPosAngle=fe,se.push(z)}var Pe,Fe,qe,rt};if(K||re){for(de=4;de>=-4;de-=2)ue(Math.PI*de,"tan");for(de=4;de>=-4;de-=2)ue(Math.PI*(de+1),"tan")}if(K||ie){for(de=4;de>=-4;de-=2)ue(Math.PI*(de+1.5),"rad");for(de=4;de>=-4;de-=2)ue(Math.PI*(de+.5),"rad")}}if(V||ce||K){var ge=Math.sqrt(X.width*X.width+X.height*X.height);if((z={scale:te*W*2/ge,rCenter:1-te,rotate:0}).textPosAngle=(Z.startangle+Z.stopangle)/2,z.scale>=1)return z;se.push(z)}(ce||ie)&&((z=w(X,W,N,Q,j)).textPosAngle=(Z.startangle+Z.stopangle)/2,se.push(z)),(ce||re)&&((z=b(X,W,N,Q,j)).textPosAngle=(Z.startangle+Z.stopangle)/2,se.push(z));for(var be=0,Te=0,we=0;we<se.length;we++){var Le=se[we].scale;if(Te<Le&&(Te=Le,be=we),!ce&&Te>=1)break}return se[be]}function w(X,Z,Y,W,te){Z=Math.max(0,Z-2*c);var z=X.width/X.height,N=L(z,W,Z,Y);return{scale:2*N/X.height,rCenter:k(z,N/Z),rotate:T(te)}}function b(X,Z,Y,W,te){Z=Math.max(0,Z-2*c);var z=X.height/X.width,N=L(z,W,Z,Y);return{scale:2*N/X.width,rCenter:k(z,N/Z),rotate:T(te+Math.PI/2)}}function k(X,Z){return Math.cos(Z)-X*Z}function T(X){return(180/Math.PI*X+720)%180-90}function L(X,Z,Y,W){var te=X+1/(2*Math.tan(Z));return Y*Math.min(1/(Math.sqrt(te*te+.5)+te),W/(Math.sqrt(X*X+W/2)+X))}function A(X,Z){return X.v!==Z.vTotal||Z.trace.hole?Math.min(1/(1+1/Math.sin(X.halfangle)),X.ring/2):1}function I(X,Z){var Y=Z.pxmid[0],W=Z.pxmid[1],te=X.width/2,z=X.height/2;return Y<0&&(te*=-1),W<0&&(z*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(z)*(te>0?1:-1)/2,y:z/(1+Y*Y/(W*W)),outside:!0}}function D(X,Z){var Y,W,te,z=X.trace,N={x:X.cx,y:X.cy},V={tx:0,ty:0};V.ty+=z.title.font.size,te=C(z),-1!==z.title.position.indexOf("top")?(N.y-=(1+te)*X.r,V.ty-=X.titleBox.height):-1!==z.title.position.indexOf("bottom")&&(N.y+=(1+te)*X.r);var j,J=X.r/(void 0===(j=X.trace.aspectratio)?1:j),K=Z.w*(z.domain.x[1]-z.domain.x[0])/2;return-1!==z.title.position.indexOf("left")?(K+=J,N.x-=(1+te)*J,V.tx+=X.titleBox.width/2):-1!==z.title.position.indexOf("center")?K*=2:-1!==z.title.position.indexOf("right")&&(K+=J,N.x+=(1+te)*J,V.tx-=X.titleBox.width/2),Y=K/X.titleBox.width,W=S(X,Z)/X.titleBox.height,{x:N.x,y:N.y,scale:Math.min(Y,W),tx:V.tx,ty:V.ty}}function S(X,Z){var Y=X.trace;return Math.min(X.titleBox.height,Z.h*(Y.domain.y[1]-Y.domain.y[0])/2)}function C(X){var Z,Y=X.pull;if(!Y)return 0;if(Array.isArray(Y))for(Y=0,Z=0;Z<X.pull.length;Z++)X.pull[Z]>Y&&(Y=X.pull[Z]);return Y}function R(X,Z){for(var Y=[],W=0;W<X.length;W++){var te=X[W][0],z=te.trace,N=z.domain,V=Z.w*(N.x[1]-N.x[0]),Q=Z.h*(N.y[1]-N.y[0]);z.title.text&&"middle center"!==z.title.position&&(Q-=S(te,Z));var J=Q/2;"funnelarea"!==z.type||z.scalegroup||(J/=z.aspectratio),te.r=Math.min(V/2,J)/(1+C(z)),te.cx=Z.l+Z.w*(z.domain.x[1]+z.domain.x[0])/2,te.cy=Z.t+Z.h*(1-z.domain.y[0])-Q/2,z.title.text&&-1!==z.title.position.indexOf("bottom")&&(te.cy-=S(te,Z)),z.scalegroup&&-1===Y.indexOf(z.scalegroup)&&Y.push(z.scalegroup)}!function(K,re){for(var ie,ce,se,de=0;de<re.length;de++){var ue=1/0,ge=re[de];for(ce=0;ce<K.length;ce++)if((se=(ie=K[ce][0]).trace).scalegroup===ge){var be;if("pie"===se.type)be=ie.r*ie.r;else if("funnelarea"===se.type){var Te,we;se.aspectratio>1?we=(Te=ie.r)/se.aspectratio:Te=(we=ie.r)*se.aspectratio,be=(Te*=(1+se.baseratio)/2)*we}ue=Math.min(ue,be/ie.vTotal)}for(ce=0;ce<K.length;ce++)if((se=(ie=K[ce][0]).trace).scalegroup===ge){var Le=ue*ie.vTotal;"funnelarea"===se.type&&(Le/=(1+se.baseratio)/2,Le/=se.aspectratio),ie.r=Math.sqrt(Le)}}}(X,Y)}function F(X,Z){return[X*Math.sin(Z),-X*Math.cos(Z)]}function H(X,Z,Y){var be,W=X._fullLayout,te=Y.trace,z=te.texttemplate,N=te.textinfo;if(!z&&N&&"none"!==N){var V,Q=N.split("+"),j=function(be){return-1!==Q.indexOf(be)},J=j("label"),K=j("text"),re=j("value"),ie=j("percent"),ce=W.separators;if(V=J?[Z.label]:[],K){var se=u.getFirstFilled(te.text,Z.pts);v(se)&&V.push(se)}re&&V.push(u.formatPieValue(Z.v,ce)),ie&&V.push(u.formatPiePercent(Z.v/Y.vTotal,ce)),Z.text=V.join("<br>")}if(z){var de=i.castOption(te,Z.i,"texttemplate");if(de){var ue={label:(be=Z).label,value:be.v,valueLabel:u.formatPieValue(be.v,W.separators),percent:be.v/Y.vTotal,percentLabel:u.formatPiePercent(be.v/Y.vTotal,W.separators),color:be.color,text:be.text,customdata:i.castOption(te,be.i,"customdata")},ge=u.getFirstFilled(te.text,Z.pts);(v(ge)||""===ge)&&(ue.text=ge),Z.text=i.texttemplateString(de,ue,X._fullLayout._d3locale,ue,te._meta||{})}else Z.text=""}}function U(X,Z){var Y=X.rotate*Math.PI/180,W=Math.cos(Y),te=Math.sin(Y),z=(Z.left+Z.right)/2,N=(Z.top+Z.bottom)/2;X.textX=z*W-N*te,X.textY=z*te+N*W,X.noCenter=!0}$.exports={plot:function(X,Z){var Y=X._fullLayout,W=Y._size;a("pie",Y),x(Z,X),R(Z,W);var te=i.makeTraceGroups(Y._pielayer,Z,"trace").each(function(z){var N=d.select(this),V=z[0],Q=V.trace;(function(j){var J,K,re,ie=j[0],ce=ie.r,se=ie.trace,de=u.getRotationAngle(se.rotation),ue=2*Math.PI/ie.vTotal,ge="px0",be="px1";if("counterclockwise"===se.direction){for(J=0;J<j.length&&j[J].hidden;J++);if(J===j.length)return;de+=ue*j[J].v,ue*=-1,ge="px1",be="px0"}for(re=F(ce,de),J=0;J<j.length;J++)(K=j[J]).hidden||(K[ge]=re,K.startangle=de,K.pxmid=F(ce,de+=ue*K.v/2),K.midangle=de,re=F(ce,de+=ue*K.v/2),K.stopangle=de,K[be]=re,K.largeArc=K.v>ie.vTotal/2?1:0,K.halfangle=Math.PI*Math.min(K.v/ie.vTotal,.5),K.ring=1-se.hole,K.rInscribed=A(K,ie))})(z),N.attr("stroke-linejoin","round"),N.each(function(){var j=d.select(this).selectAll("g.slice").data(z);j.enter().append("g").classed("slice",!0),j.exit().remove();var J=[[[],[]],[[],[]]],K=!1;j.each(function(be,Te){if(be.hidden)d.select(this).selectAll("path,g").remove();else{be.pointNumber=be.i,be.curveNumber=Q.index,J[be.pxmid[1]<0?0:1][be.pxmid[0]<0?0:1].push(be);var we=V.cx,Le=V.cy,fe=d.select(this),ve=fe.selectAll("path.surface").data([be]);if(ve.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),fe.call(f,X,z),Q.pull){var Me=+u.castOption(Q.pull,be.pts)||0;Me>0&&(we+=Me*be.pxmid[0],Le+=Me*be.pxmid[1])}be.cxFinal=we,be.cyFinal=Le;var ke=Q.hole;if(be.v===V.vTotal){var Ce="M"+(we+be.px0[0])+","+(Le+be.px0[1])+ze(be.px0,be.pxmid,!0,1)+ze(be.pxmid,be.px0,!0,1)+"Z";ve.attr("d",ke?"M"+(we+ke*be.px0[0])+","+(Le+ke*be.px0[1])+ze(be.px0,be.pxmid,!1,ke)+ze(be.pxmid,be.px0,!1,ke)+"Z"+Ce:Ce)}else{var Pe=ze(be.px0,be.px1,!0,1);if(ke){var Fe=1-ke;ve.attr("d","M"+(we+ke*be.px1[0])+","+(Le+ke*be.px1[1])+ze(be.px1,be.px0,!1,ke)+"l"+Fe*be.px0[0]+","+Fe*be.px0[1]+Pe+"Z")}else ve.attr("d","M"+we+","+Le+"l"+be.px0[0]+","+be.px0[1]+Pe+"Z")}H(X,be,V);var qe=u.castOption(Q.textposition,be.pts),rt=fe.selectAll("g.slicetext").data(be.text&&"none"!==qe?[0]:[]);rt.enter().append("g").classed("slicetext",!0),rt.exit().remove(),rt.each(function(){var ot,it,Et,He=i.ensureSingle(d.select(this),"text","",function(ot){ot.attr("data-notex",1)}),Xe=i.ensureUniformFontSize(X,"outside"===qe?(Et=Y.font,{color:u.castOption((ot=Q).outsidetextfont.color,(it=be).pts)||u.castOption(ot.textfont.color,it.pts)||Et.color,family:u.castOption(ot.outsidetextfont.family,it.pts)||u.castOption(ot.textfont.family,it.pts)||Et.family,size:u.castOption(ot.outsidetextfont.size,it.pts)||u.castOption(ot.textfont.size,it.pts)||Et.size}):l(Q,be,Y.font));He.text(be.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Xe).call(n.convertToTspans,X);var Je,at=e.bBox(He.node());if("outside"===qe)Je=I(at,be);else if(Je=m(at,be,V),"auto"===qe&&Je.scale<1){var pt=i.ensureUniformFontSize(X,Q.outsidetextfont);He.call(e.font,pt),Je=I(at=e.bBox(He.node()),be)}var xt=Je.textPosAngle,Ft=void 0===xt?be.pxmid:F(V.r,xt);if(Je.targetX=we+Ft[0]*Je.rCenter+(Je.x||0),Je.targetY=Le+Ft[1]*Je.rCenter+(Je.y||0),U(Je,at),Je.outside){var Dt=Je.targetY;be.yLabelMin=Dt-at.height/2,be.yLabelMid=Dt,be.yLabelMax=Dt+at.height/2,be.labelExtraX=0,be.labelExtraY=0,K=!0}Je.fontSize=Xe.size,s(Q.type,Je,Y),z[Te].transform=Je,He.attr("transform",i.getTextTransform(Je))})}function ze(He,Xe,Je,at){return"a"+at*V.r+","+at*V.r+" 0 "+be.largeArc+(Je?" 1 ":" 0 ")+at*(Xe[0]-He[0])+","+at*(Xe[1]-He[1])}});var Te,re=d.select(this).selectAll("g.titletext").data(Q.title.text?[0]:[]);if(re.enter().append("g").classed("titletext",!0),re.exit().remove(),re.each(function(){var be,Le,fe,Te=i.ensureSingle(d.select(this),"text","",function(Le){Le.attr("data-notex",1)}),we=Q.title.text;Q._meta&&(we=i.templateString(we,Q._meta)),Te.text(we).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,Q.title.font).call(n.convertToTspans,X),be="middle center"===Q.title.position?(Le=V,fe=Math.sqrt(Le.titleBox.width*Le.titleBox.width+Le.titleBox.height*Le.titleBox.height),{x:Le.cx,y:Le.cy,scale:Le.trace.hole*Le.r*2/fe,tx:0,ty:-Le.titleBox.height/2+Le.trace.title.font.size}):D(V,W),Te.attr("transform",o(be.x,be.y)+r(Math.min(1,be.scale))+o(be.tx,be.ty))}),K&&function(be,Te){var we,Le,fe,ve,Me,ke,Ce,Pe,Fe,qe,rt,ze,He;function Xe(xt,Ft){return xt.pxmid[1]-Ft.pxmid[1]}function Je(xt,Ft){return Ft.pxmid[1]-xt.pxmid[1]}function at(xt,Ft){Ft||(Ft={});var Dt,ot,it,Et,Xt=Ft.labelExtraY+(Le?Ft.yLabelMax:Ft.yLabelMin),nr=Le?xt.yLabelMin:xt.yLabelMax,Ue=Le?xt.yLabelMax:xt.yLabelMin,We=xt.cyFinal+Me(xt.px0[1],xt.px1[1]),Be=Xt-nr;if(Be*Ce>0&&(xt.labelExtraY=Be),Array.isArray(Te.pull))for(ot=0;ot<qe.length;ot++)(it=qe[ot])===xt||(u.castOption(Te.pull,xt.pts)||0)>=(u.castOption(Te.pull,it.pts)||0)||((xt.pxmid[1]-it.pxmid[1])*Ce>0?(Be=it.cyFinal+Me(it.px0[1],it.px1[1])-nr-xt.labelExtraY)*Ce>0&&(xt.labelExtraY+=Be):(Ue+xt.labelExtraY-We)*Ce>0&&(Dt=3*ke*Math.abs(ot-qe.indexOf(xt)),(Et=it.cxFinal+ve(it.px0[0],it.px1[0])+Dt-(xt.cxFinal+xt.pxmid[0])-xt.labelExtraX)*ke>0&&(xt.labelExtraX+=Et)))}for(Le=0;Le<2;Le++)for(fe=Le?Xe:Je,Me=Le?Math.max:Math.min,Ce=Le?1:-1,we=0;we<2;we++){for(ve=we?Math.max:Math.min,ke=we?1:-1,(Pe=be[Le][we]).sort(fe),qe=(Fe=be[1-Le][we]).concat(Pe),ze=[],rt=0;rt<Pe.length;rt++)void 0!==Pe[rt].yLabelMid&&ze.push(Pe[rt]);for(He=!1,rt=0;Le&&rt<Fe.length;rt++)if(void 0!==Fe[rt].yLabelMid){He=Fe[rt];break}for(rt=0;rt<ze.length;rt++){var pt=rt&&ze[rt-1];He&&!rt&&(pt=He),at(ze[rt],pt)}}}(J,Q),Te=Q,j.each(function(we){var Le=d.select(this);if(we.labelExtraX||we.labelExtraY){var fe=Le.select("g.slicetext text");we.transform.targetX+=we.labelExtraX,we.transform.targetY+=we.labelExtraY,fe.attr("transform",i.getTextTransform(we.transform));var ve=we.cxFinal+we.pxmid[0],Me="M"+ve+","+(we.cyFinal+we.pxmid[1]),ke=(we.yLabelMax-we.yLabelMin)*(we.pxmid[0]<0?-1:1)/4;if(we.labelExtraX){var Ce=we.labelExtraX*we.pxmid[1]/we.pxmid[0],Pe=we.yLabelMid+we.labelExtraY-(we.cyFinal+we.pxmid[1]);Math.abs(Ce)>Math.abs(Pe)?Me+="l"+Pe*we.pxmid[0]/we.pxmid[1]+","+Pe+"H"+(ve+we.labelExtraX+ke):Me+="l"+we.labelExtraX+","+Ce+"v"+(Pe-Ce)+"h"+ke}else Me+="V"+(we.yLabelMid+we.labelExtraY)+"h"+ke;i.ensureSingle(Le,"path","textline").call(t.stroke,Te.outsidetextfont.color).attr({"stroke-width":Math.min(2,Te.outsidetextfont.size/8),d:Me,fill:"none"})}else Le.select("path.textline").remove()}),K&&Q.automargin){var ie=e.bBox(N.node()),ce=Q.domain,ue=(W.w*(ce.x[1]-ce.x[0])*.5-V.r)/W.w,ge=(W.h*(ce.y[1]-ce.y[0])*.5-V.r)/W.h;g.autoMargin(X,"pie."+Q.uid+".automargin",{xl:ce.x[0]-ue,xr:ce.x[1]+ue,yb:ce.y[0]-ge,yt:ce.y[1]+ge,l:Math.max(V.cx-V.r-ie.left,0),r:Math.max(ie.right-(V.cx+V.r),0),b:Math.max(ie.bottom-(V.cy+V.r),0),t:Math.max(V.cy-V.r-ie.top,0),pad:5})}})});setTimeout(function(){te.selectAll("tspan").each(function(){var z=d.select(this);z.attr("dy")&&z.attr("dy",z.attr("dy"))})},0)},formatSliceLabel:H,transformInsideText:m,determineInsideTextFont:l,positionTitleOutside:D,prerenderTitles:x,layoutAreas:R,attachFxHandlers:f,computeTransform:U}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("./style_one"),_=y("../bar/uniform_text").resizeText;$.exports=function(t){var e=t._fullLayout._pielayer.selectAll(".trace");_(t,e,"pie"),e.each(function(i){var r=i[0].trace,o=d.select(this);o.style({opacity:r.opacity}),o.selectAll("path.surface").each(function(n){d.select(this).call(g,n,r)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("./helpers").castOption;$.exports=function(_,t,e){var i=e.marker.line,r=g(i.color,t.pts)||d.defaultLine,o=g(i.width,t.pts)||0;_.style("stroke-width",o).call(d.fill,t.color).call(d.stroke,r)}},{"../../components/color":366,"./helpers":905}],912:[function(y,$,ee){"use strict";var d=y("../scatter/attributes");$.exports={x:d.x,y:d.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:d.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_pointcloud2d,g=y("../../lib/str2rgbarray"),_=y("../../plots/cartesian/autorange").findExtremes,t=y("../scatter/get_trace_color");function e(r,o){this.scene=r,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=d(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var i=e.prototype;i.handlePick=function(r){var o=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*o],this.pickXYData[2*o+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:Array.isArray(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},i.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=t(r,{})},i.updateFast=function(r){var o,n,p,s,a,c,u=this.xData=this.pickXData=r.x,h=this.yData=this.pickYData=r.y,v=this.pickXYData=r.xy,l=r.indices,x=this.bounds;if(v){if(p=v,o=v.length>>>1,r.xbounds&&r.ybounds)x[0]=r.xbounds[0],x[2]=r.xbounds[1],x[1]=r.ybounds[0],x[3]=r.ybounds[1];else for(c=0;c<o;c++)a=p[2*c+1],(s=p[2*c])<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),a<x[1]&&(x[1]=a),a>x[3]&&(x[3]=a);if(l)n=l;else for(n=new Int32Array(o),c=0;c<o;c++)n[c]=c}else for(o=u.length,p=new Float32Array(2*o),n=new Int32Array(o),c=0;c<o;c++)s=u[c],a=h[c],n[c]=c,p[2*c]=s,p[2*c+1]=a,s<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),a<x[1]&&(x[1]=a),a>x[3]&&(x[3]=a);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=p;var m=g(r.marker.color),w=g(r.marker.border.color),b=r.opacity*r.marker.opacity;m[3]*=b,this.pointcloudOptions.color=m;var k=r.marker.blend;null===k&&(k=u.length<100||h.length<100),this.pointcloudOptions.blend=k,w[3]*=b,this.pointcloudOptions.borderColor=w;var T=r.marker.sizemin,L=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=T,this.pointcloudOptions.sizeMax=L,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var A=this.scene.xaxis,I=this.scene.yaxis,D=L/2||.5;r._extremes[A._id]=_(A,[x[0],x[2]],{ppad:D}),r._extremes[I._id]=_(I,[x[1],x[3]],{ppad:D})},i.dispose=function(){this.pointcloud.dispose()},$.exports=function(r,o){var n=new e(r,o.uid);return n.update(o),n}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes");$.exports=function(_,t,e){function i(r,o){return d.coerce(_,t,g,r,o)}i("x"),i("y"),i("xbounds"),i("ybounds"),_.xy&&_.xy instanceof Float32Array&&(t.xy=_.xy),_.indices&&_.indices instanceof Int32Array&&(t.indices=_.indices),i("text"),i("marker.color",e),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",e),i("marker.border.arearatio"),t._length=null}},{"../../lib":503,"./attributes":912}],915:[function(y,$,ee){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("../scatter3d/calc"),plot:y("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:y("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(y,$,ee){"use strict";var d=y("../../plots/font_attributes"),g=y("../../plots/attributes"),_=y("../../components/color/attributes"),t=y("../../components/fx/attributes"),e=y("../../plots/domain").attributes,i=y("../../plots/template_attributes").hovertemplateAttrs,r=y("../../components/colorscale/attributes"),o=y("../../plot_api/plot_template").templatedArray,n=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,p=y("../../lib/extend").extendFlat,s=y("../../plot_api/edit_types").overrideAll;($.exports=s({hoverinfo:p({},g.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:t.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:d({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:t.hoverlabel,hovertemplate:i({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:t.hoverlabel,hovertemplate:i({},{keys:["value","label"]}),colorscales:o("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:p(r().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(y,$,ee){"use strict";var d=y("../../plot_api/edit_types").overrideAll,g=y("../../plots/get_data").getModuleCalcData,_=y("./plot"),t=y("../../components/fx/layout_attributes"),e=y("../../lib/setcursor"),i=y("../../components/dragelement"),r=y("../../plots/cartesian/select").prepSelect,o=y("../../lib"),n=y("../../registry");function p(s,a){var c=s._fullData[a],u=s._fullLayout,h=u.dragmode,f=c._bgRect;if("pan"!==h&&"zoom"!==h){e(f,"pan"===u.dragmode?"move":"crosshair");var l={_id:"x",c2p:o.identity,_offset:c._sankey.translateX,_length:c._sankey.width},x={_id:"y",c2p:o.identity,_offset:c._sankey.translateY,_length:c._sankey.height},m={gd:s,element:f.node(),plotinfo:{id:a,xaxis:l,yaxis:x,fillRangeItems:o.noop},subplot:a,xaxes:[l],yaxes:[x],doneFnCompleted:function(w){var b,k=s._fullData[a],T=k.node.groups.slice(),L=[];function A(C){for(var R=k._sankey.graph.nodes,F=0;F<R.length;F++)if(R[F].pointNumber===C)return R[F]}for(var I=0;I<w.length;I++){var D=A(w[I].pointNumber);if(D)if(D.group){for(var S=0;S<D.childrenNodes.length;S++)L.push(D.childrenNodes[S].pointNumber);T[D.pointNumber-k.node._count]=!1}else L.push(D.pointNumber)}b=T.filter(Boolean).concat([L]),n.call("_guiRestyle",s,{"node.groups":[b]},a)},prepFn:function(w,b,k){r(w,b,k,m,h)}};i.init(m)}}ee.name="sankey",ee.baseLayoutAttrOverrides=d({hoverlabel:t.hoverlabel},"plot","nested"),ee.plot=function(s){var a=g(s.calcdata,"sankey")[0];_(s,a),ee.updateFx(s)},ee.clean=function(s,a,c,u){var h=u._has&&u._has("sankey"),v=a._has&&a._has("sankey");h&&!v&&(u._paperdiv.selectAll(".sankey").remove(),u._paperdiv.selectAll(".bgsankey").remove())},ee.updateFx=function(s){for(var a=0;a<s._fullData.length;a++)p(s,a)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(y,$,ee){"use strict";var d=y("strongly-connected-components"),g=y("../../lib"),_=y("../../lib/gup").wrap,t=g.isArrayOrTypedArray,e=g.isIndex,i=y("../../components/colorscale");$.exports=function(o,n){var p=function(o){var n,p=o.node,s=o.link,a=[],c=t(s.color),u=t(s.customdata),h={},v={},f=s.colorscales.length;for(n=0;n<f;n++){var l=s.colorscales[n],x=i.extractScale(l,{cLetter:"c"}),m=i.makeColorScaleFunc(x);v[l.label]=m}var w=0;for(n=0;n<s.value.length;n++)s.source[n]>w&&(w=s.source[n]),s.target[n]>w&&(w=s.target[n]);var b,k=w+1;o.node._count=k;var T=o.node.groups,L={};for(n=0;n<T.length;n++){var A=T[n];for(b=0;b<A.length;b++){var I=A[b],D=k+n;L.hasOwnProperty(I)?g.warn("Node "+I+" is already part of a group."):L[I]=D}}var S={source:[],target:[]};for(n=0;n<s.value.length;n++){var C=s.value[n],R=s.source[n],F=s.target[n];if(C>0&&e(R,k)&&e(F,k)&&(!L.hasOwnProperty(R)||!L.hasOwnProperty(F)||L[R]!==L[F])){L.hasOwnProperty(F)&&(F=L[F]),L.hasOwnProperty(R)&&(R=L[R]),h[R=+R]=h[F=+F]=!0;var H="";s.label&&s.label[n]&&(H=s.label[n]);var U=null;H&&v.hasOwnProperty(H)&&(U=v[H]),a.push({pointNumber:n,label:H,color:c?s.color[n]:s.color,customdata:u?s.customdata[n]:s.customdata,concentrationscale:U,source:R,target:F,value:+C}),S.source.push(R),S.target.push(F)}}var X=k+T.length,Z=t(p.color),Y=t(p.customdata),W=[];for(n=0;n<X;n++)h[n]&&W.push({group:n>k-1,childrenNodes:[],pointNumber:n,label:p.label[n],color:Z?p.color[n]:p.color,customdata:Y?p.customdata[n]:p.customdata});var z=!1;return function(N,V,Q){for(var j=g.init2dArray(N,0),J=0;J<Math.min(V.length,Q.length);J++)if(g.isIndex(V[J],N)&&g.isIndex(Q[J],N)){if(V[J]===Q[J])return!0;j[V[J]].push(Q[J])}return d(j).components.some(function(K){return K.length>1})}(X,S.source,S.target)&&(z=!0),{circular:z,links:a,nodes:W,groups:T,groupLookup:L}}(n);return _({circular:p.circular,_nodes:p.nodes,_links:p.links,_groups:p.groups,_groupLookup:p.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(y,$,ee){"use strict";$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../../components/color"),t=y("tinycolor2"),e=y("../../plots/domain").defaults,i=y("../../components/fx/hoverlabel_defaults"),r=y("../../plot_api/plot_template"),o=y("../../plots/array_container_defaults");function n(p,s){function a(c,u){return d.coerce(p,s,g.link.colorscales,c,u)}a("label"),a("cmin"),a("cmax"),a("colorscale")}$.exports=function(p,s,a,c){function u(L,A){return d.coerce(p,s,g,L,A)}var h=d.extendDeep(c.hoverlabel,p.hoverlabel),v=p.node,f=r.newContainer(s,"node");function l(L,A){return d.coerce(v,f,g.node,L,A)}l("label"),l("groups"),l("x"),l("y"),l("pad"),l("thickness"),l("line.color"),l("line.width"),l("hoverinfo",p.hoverinfo),i(v,f,l,h),l("hovertemplate");var x=c.colorway;l("color",f.label.map(function(L,A){return _.addOpacity(x[A%x.length],.8)})),l("customdata");var m=p.link||{},w=r.newContainer(s,"link");function b(L,A){return d.coerce(m,w,g.link,L,A)}b("label"),b("source"),b("target"),b("value"),b("line.color"),b("line.width"),b("hoverinfo",p.hoverinfo),i(m,w,b,h),b("hovertemplate");var k,T=t(c.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";b("color",d.repeat(T,w.value.length)),b("customdata"),o(m,w,{name:"colorscales",handleItemDefaults:n}),e(s,c,u),u("orientation"),u("valueformat"),u("valuesuffix"),f.x.length&&f.y.length&&(k="freeform"),u("arrangement",k),d.coerceFont(u,"textfont",d.extendFlat({},c.font)),s._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),moduleType:"trace",name:"sankey",basePlotModule:y("./base_plot"),selectPoints:y("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=g.numberFormat,t=y("./render"),e=y("../../components/fx"),i=y("../../components/color"),r=y("./constants").cn,o=g._;function n(m){return""!==m}function p(m,w){return m.filter(function(b){return b.key===w.traceId})}function s(m,w){d.select(m).select("path").style("fill-opacity",w),d.select(m).select("rect").style("fill-opacity",w)}function a(m){d.select(m).select("text.name").style("fill","black")}function c(m){return function(w){return-1!==m.node.sourceLinks.indexOf(w.link)||-1!==m.node.targetLinks.indexOf(w.link)}}function u(m){return function(w){return-1!==w.node.sourceLinks.indexOf(m.link)||-1!==w.node.targetLinks.indexOf(m.link)}}function h(m,w,b){w&&b&&p(b,w).selectAll("."+r.sankeyLink).filter(c(w)).call(f.bind(0,w,b,!1))}function v(m,w,b){w&&b&&p(b,w).selectAll("."+r.sankeyLink).filter(c(w)).call(l.bind(0,w,b,!1))}function f(m,w,b,k){var T=k.datum().link.label;k.style("fill-opacity",function(L){if(!L.link.concentrationscale)return.4}),T&&p(w,m).selectAll("."+r.sankeyLink).filter(function(L){return L.link.label===T}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return.4}),b&&p(w,m).selectAll("."+r.sankeyNode).filter(u(m)).call(h)}function l(m,w,b,k){var T=k.datum().link.label;k.style("fill-opacity",function(L){return L.tinyColorAlpha}),T&&p(w,m).selectAll("."+r.sankeyLink).filter(function(L){return L.link.label===T}).style("fill-opacity",function(L){return L.tinyColorAlpha}),b&&p(w,m).selectAll(r.sankeyNode).filter(u(m)).call(v)}function x(m,w){var k=g.nestedProperty(m.hoverlabel||{},w).get();return!Array.isArray(k)&&k}$.exports=function(m,w){for(var b=m._fullLayout,k=b._paper,T=b._size,L=0;L<m._fullData.length;L++)if(m._fullData[L].visible&&m._fullData[L].type===r.sankey&&!m._fullData[L]._viewInitial){var A=m._fullData[L].node;m._fullData[L]._viewInitial={node:{groups:A.groups.slice(),x:A.x.slice(),y:A.y.slice()}}}var I=o(m,"source:")+" ",D=o(m,"target:")+" ",S=o(m,"concentration:")+" ",C=o(m,"incoming flow count:")+" ",R=o(m,"outgoing flow count:")+" ";t(m,k,w,{width:T.w,height:T.h,margin:{t:T.t,r:T.r,b:T.b,l:T.l}},{linkEvents:{hover:function(F,H,U){!1!==m._fullLayout.hovermode&&(d.select(F).call(f.bind(0,H,U,!0)),"skip"!==H.link.trace.link.hoverinfo&&(H.link.fullData=H.link.trace,m.emit("plotly_hover",{event:d.event,points:[H.link]})))},follow:function(F,H){if(!1!==m._fullLayout.hovermode){var U=H.link.trace.link;if("none"!==U.hoverinfo&&"skip"!==U.hoverinfo){for(var X=[],Z=0,Y=0;Y<H.flow.links.length;Y++){var W=H.flow.links[Y];if("closest"!==m._fullLayout.hovermode||H.link.pointNumber===W.pointNumber){H.link.pointNumber===W.pointNumber&&(Z=Y),W.fullData=W.trace,U=H.link.trace.link;var te=N(W),z={valueLabel:_(H.valueFormat)(W.value)+H.valueSuffix};X.push({x:te[0],y:te[1],name:z.valueLabel,text:[W.label||"",I+W.source.label,D+W.target.label,W.concentrationscale?S+_("%0.2f")(W.flow.labelConcentration):""].filter(n).join("<br>"),color:x(U,"bgcolor")||i.addOpacity(W.color,1),borderColor:x(U,"bordercolor"),fontFamily:x(U,"font.family"),fontSize:x(U,"font.size"),fontColor:x(U,"font.color"),nameLength:x(U,"namelength"),textAlign:x(U,"align"),idealAlign:d.event.x<te[0]?"right":"left",hovertemplate:U.hovertemplate,hovertemplateLabels:z,eventData:[W]})}}e.loneHover(X,{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:m,anchorIndex:Z}).each(function(){H.link.concentrationscale||s(this,.65),a(this)})}}function N(V){var Q,j;V.circular?(Q=(V.circularPathData.leftInnerExtent+V.circularPathData.rightInnerExtent)/2,j=V.circularPathData.verticalFullExtent):(Q=(V.source.x1+V.target.x0)/2,j=(V.y0+V.y1)/2);var J=[Q,j];return"v"===V.trace.orientation&&J.reverse(),J[0]+=H.parent.translateX,J[1]+=H.parent.translateY,J}},unhover:function(F,H,U){!1!==m._fullLayout.hovermode&&(d.select(F).call(l.bind(0,H,U,!0)),"skip"!==H.link.trace.link.hoverinfo&&(H.link.fullData=H.link.trace,m.emit("plotly_unhover",{event:d.event,points:[H.link]})),e.loneUnhover(b._hoverlayer.node()))},select:function(F,H){var U=H.link;U.originalEvent=d.event,m._hoverdata=[U],e.click(m,{target:!0})}},nodeEvents:{hover:function(F,H,U){!1!==m._fullLayout.hovermode&&(d.select(F).call(h,H,U),"skip"!==H.node.trace.node.hoverinfo&&(H.node.fullData=H.node.trace,m.emit("plotly_hover",{event:d.event,points:[H.node]})))},follow:function(F,H){if(!1!==m._fullLayout.hovermode){var U=H.node.trace.node;if("none"!==U.hoverinfo&&"skip"!==U.hoverinfo){var X=d.select(F).select("."+r.nodeRect),Z=m._fullLayout._paperdiv.node().getBoundingClientRect(),Y=X.node().getBoundingClientRect(),W=Y.left-2-Z.left,te=Y.right+2-Z.left,z=Y.top+Y.height/4-Z.top,N={valueLabel:_(H.valueFormat)(H.node.value)+H.valueSuffix};H.node.fullData=H.node.trace,m._fullLayout._calcInverseTransform(m);var V=m._fullLayout._invScaleX,j=e.loneHover({x0:V*W,x1:V*te,y:m._fullLayout._invScaleY*z,name:_(H.valueFormat)(H.node.value)+H.valueSuffix,text:[H.node.label,C+H.node.targetLinks.length,R+H.node.sourceLinks.length].filter(n).join("<br>"),color:x(U,"bgcolor")||H.tinyColorHue,borderColor:x(U,"bordercolor"),fontFamily:x(U,"font.family"),fontSize:x(U,"font.size"),fontColor:x(U,"font.color"),nameLength:x(U,"namelength"),textAlign:x(U,"align"),idealAlign:"left",hovertemplate:U.hovertemplate,hovertemplateLabels:N,eventData:[H.node]},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:m});s(j,.85),a(j)}}},unhover:function(F,H,U){!1!==m._fullLayout.hovermode&&(d.select(F).call(v,H,U),"skip"!==H.node.trace.node.hoverinfo&&(H.node.fullData=H.node.trace,m.emit("plotly_unhover",{event:d.event,points:[H.node]})),e.loneUnhover(b._hoverlayer.node()))},select:function(F,H,U){var X=H.node;X.originalEvent=d.event,m._hoverdata=[X],d.select(F).call(v,H,U),e.click(m,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(y,$,ee){"use strict";var d=y("d3-force"),g=y("d3-interpolate").interpolateNumber,_=y("@plotly/d3"),t=y("@plotly/d3-sankey"),e=y("@plotly/d3-sankey-circular"),i=y("./constants"),r=y("tinycolor2"),o=y("../../components/color"),n=y("../../components/drawing"),p=y("../../lib"),s=p.strTranslate,a=p.strRotate,c=y("../../lib/gup"),u=c.keyFun,h=c.repeat,v=c.unwrap,f=y("../../lib/svg_text_utils"),l=y("../../registry"),x=y("../../constants/alignment"),m=x.CAP_SHIFT,w=x.LINE_SPACING;function b(Y,W,te){var z,N=v(W),V=N.trace,Q=V.domain,j="h"===V.orientation,J=V.node.pad,K=V.node.thickness,re=Y.width*(Q.x[1]-Q.x[0]),ie=Y.height*(Q.y[1]-Q.y[0]),ce=N._nodes,se=N._links,de=N.circular;(z=de?e.sankeyCircular().circularLinkGap(0):t.sankey()).iterations(i.sankeyIterations).size(j?[re,ie]:[ie,re]).nodeWidth(K).nodePadding(J).nodeId(function(Ce){return Ce.pointNumber}).nodes(ce).links(se);var ue,ge,be,Te=z();for(var we in z.nodePadding()<J&&p.warn("node.pad was reduced to ",z.nodePadding()," to fit within the figure."),N._groupLookup){var Le,fe=parseInt(N._groupLookup[we]);for(ue=0;ue<Te.nodes.length;ue++)if(Te.nodes[ue].pointNumber===fe){Le=Te.nodes[ue];break}if(Le){var ve={pointNumber:parseInt(we),x0:Le.x0,x1:Le.x1,y0:Le.y0,y1:Le.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Te.nodes.unshift(ve),Le.childrenNodes.unshift(ve)}}if(function(){for(ue=0;ue<Te.nodes.length;ue++){var Ce,Pe,Fe=Te.nodes[ue],qe={};for(ge=0;ge<Fe.targetLinks.length;ge++)Ce=(Pe=Fe.targetLinks[ge]).source.pointNumber+":"+Pe.target.pointNumber,qe.hasOwnProperty(Ce)||(qe[Ce]=[]),qe[Ce].push(Pe);var rt=Object.keys(qe);for(ge=0;ge<rt.length;ge++){var ze=qe[Ce=rt[ge]],He=0,Xe={};for(be=0;be<ze.length;be++)Xe[(Pe=ze[be]).label]||(Xe[Pe.label]=0),Xe[Pe.label]+=Pe.value,He+=Pe.value;for(be=0;be<ze.length;be++)(Pe=ze[be]).flow={value:He,labelConcentration:Xe[Pe.label]/He,concentration:Pe.value/He,links:ze},Pe.concentrationscale&&(Pe.color=r(Pe.concentrationscale(Pe.flow.labelConcentration)))}var Je=0;for(ge=0;ge<Fe.sourceLinks.length;ge++)Je+=Fe.sourceLinks[ge].value;for(ge=0;ge<Fe.sourceLinks.length;ge++)(Pe=Fe.sourceLinks[ge]).concentrationOut=Pe.value/Je;var at=0;for(ge=0;ge<Fe.targetLinks.length;ge++)at+=Fe.targetLinks[ge].value;for(ge=0;ge<Fe.targetLinks.length;ge++)(Pe=Fe.targetLinks[ge]).concenrationIn=Pe.value/at}}(),V.node.x.length&&V.node.y.length){for(ue=0;ue<Math.min(V.node.x.length,V.node.y.length,Te.nodes.length);ue++)if(V.node.x[ue]&&V.node.y[ue]){var Me=[V.node.x[ue]*re,V.node.y[ue]*ie];Te.nodes[ue].x0=Me[0]-K/2,Te.nodes[ue].x1=Me[0]+K/2;var ke=Te.nodes[ue].y1-Te.nodes[ue].y0;Te.nodes[ue].y0=Me[1]-ke/2,Te.nodes[ue].y1=Me[1]+ke/2}"snap"===V.arrangement&&function(Ce){var Pe,Fe,qe=Ce.map(function(Je,at){return{x0:Je.x0,index:at}}).sort(function(Je,at){return Je.x0-at.x0}),rt=[],ze=-1,He=-1/0;for(ue=0;ue<qe.length;ue++){var Xe=Ce[qe[ue].index];Xe.x0>He+K&&(ze+=1,Pe=Xe.x0),He=Xe.x0,rt[ze]||(rt[ze]=[]),rt[ze].push(Xe),Xe.x0+=Fe=Pe-Xe.x0,Xe.x1+=Fe}return rt}(ce=Te.nodes).forEach(function(Pe){var Fe,qe,rt,ze=0,He=Pe.length;for(Pe.sort(function(Xe,Je){return Xe.y0-Je.y0}),rt=0;rt<He;++rt)(Fe=Pe[rt]).y0>=ze||(qe=ze-Fe.y0)>1e-6&&(Fe.y0+=qe,Fe.y1+=qe),ze=Fe.y1+J}),z.update(Te)}return{circular:de,key:te,trace:V,guid:p.randstr(),horizontal:j,width:re,height:ie,nodePad:V.node.pad,nodeLineColor:V.node.line.color,nodeLineWidth:V.node.line.width,linkLineColor:V.link.line.color,linkLineWidth:V.link.line.width,valueFormat:V.valueformat,valueSuffix:V.valuesuffix,textFont:V.textfont,translateX:Q.x[0]*Y.width+Y.margin.l,translateY:Y.height-Q.y[1]*Y.height+Y.margin.t,dragParallel:j?ie:re,dragPerpendicular:j?re:ie,arrangement:V.arrangement,sankey:z,graph:Te,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k(Y,W,te){var z=r(W.color),N=W.source.label+"|"+W.target.label+"__"+te;return W.trace=Y.trace,W.curveNumber=Y.trace.index,{circular:Y.circular,key:N,traceId:Y.key,pointNumber:W.pointNumber,link:W,tinyColorHue:o.tinyRGB(z),tinyColorAlpha:z.getAlpha(),linkPath:T,linkLineColor:Y.linkLineColor,linkLineWidth:Y.linkLineWidth,valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,parent:Y,interactionState:Y.interactionState,flow:W.flow}}function T(){return function(Y){if(Y.link.circular)return te=(W=Y.link).width/2,z=W.circularPathData,"top"===W.circularLinkType?"M "+z.targetX+" "+(z.targetY+te)+" L"+z.rightInnerExtent+" "+(z.targetY+te)+"A"+(z.rightLargeArcRadius+te)+" "+(z.rightSmallArcRadius+te)+" 0 0 1 "+(z.rightFullExtent-te)+" "+(z.targetY-z.rightSmallArcRadius)+"L"+(z.rightFullExtent-te)+" "+z.verticalRightInnerExtent+"A"+(z.rightLargeArcRadius+te)+" "+(z.rightLargeArcRadius+te)+" 0 0 1 "+z.rightInnerExtent+" "+(z.verticalFullExtent-te)+"L"+z.leftInnerExtent+" "+(z.verticalFullExtent-te)+"A"+(z.leftLargeArcRadius+te)+" "+(z.leftLargeArcRadius+te)+" 0 0 1 "+(z.leftFullExtent+te)+" "+z.verticalLeftInnerExtent+"L"+(z.leftFullExtent+te)+" "+(z.sourceY-z.leftSmallArcRadius)+"A"+(z.leftLargeArcRadius+te)+" "+(z.leftSmallArcRadius+te)+" 0 0 1 "+z.leftInnerExtent+" "+(z.sourceY+te)+"L"+z.sourceX+" "+(z.sourceY+te)+"L"+z.sourceX+" "+(z.sourceY-te)+"L"+z.leftInnerExtent+" "+(z.sourceY-te)+"A"+(z.leftLargeArcRadius-te)+" "+(z.leftSmallArcRadius-te)+" 0 0 0 "+(z.leftFullExtent-te)+" "+(z.sourceY-z.leftSmallArcRadius)+"L"+(z.leftFullExtent-te)+" "+z.verticalLeftInnerExtent+"A"+(z.leftLargeArcRadius-te)+" "+(z.leftLargeArcRadius-te)+" 0 0 0 "+z.leftInnerExtent+" "+(z.verticalFullExtent+te)+"L"+z.rightInnerExtent+" "+(z.verticalFullExtent+te)+"A"+(z.rightLargeArcRadius-te)+" "+(z.rightLargeArcRadius-te)+" 0 0 0 "+(z.rightFullExtent+te)+" "+z.verticalRightInnerExtent+"L"+(z.rightFullExtent+te)+" "+(z.targetY-z.rightSmallArcRadius)+"A"+(z.rightLargeArcRadius-te)+" "+(z.rightSmallArcRadius-te)+" 0 0 0 "+z.rightInnerExtent+" "+(z.targetY-te)+"L"+z.targetX+" "+(z.targetY-te)+"Z":"M "+z.targetX+" "+(z.targetY-te)+" L"+z.rightInnerExtent+" "+(z.targetY-te)+"A"+(z.rightLargeArcRadius+te)+" "+(z.rightSmallArcRadius+te)+" 0 0 0 "+(z.rightFullExtent-te)+" "+(z.targetY+z.rightSmallArcRadius)+"L"+(z.rightFullExtent-te)+" "+z.verticalRightInnerExtent+"A"+(z.rightLargeArcRadius+te)+" "+(z.rightLargeArcRadius+te)+" 0 0 0 "+z.rightInnerExtent+" "+(z.verticalFullExtent+te)+"L"+z.leftInnerExtent+" "+(z.verticalFullExtent+te)+"A"+(z.leftLargeArcRadius+te)+" "+(z.leftLargeArcRadius+te)+" 0 0 0 "+(z.leftFullExtent+te)+" "+z.verticalLeftInnerExtent+"L"+(z.leftFullExtent+te)+" "+(z.sourceY+z.leftSmallArcRadius)+"A"+(z.leftLargeArcRadius+te)+" "+(z.leftSmallArcRadius+te)+" 0 0 0 "+z.leftInnerExtent+" "+(z.sourceY-te)+"L"+z.sourceX+" "+(z.sourceY-te)+"L"+z.sourceX+" "+(z.sourceY+te)+"L"+z.leftInnerExtent+" "+(z.sourceY+te)+"A"+(z.leftLargeArcRadius-te)+" "+(z.leftSmallArcRadius-te)+" 0 0 1 "+(z.leftFullExtent-te)+" "+(z.sourceY+z.leftSmallArcRadius)+"L"+(z.leftFullExtent-te)+" "+z.verticalLeftInnerExtent+"A"+(z.leftLargeArcRadius-te)+" "+(z.leftLargeArcRadius-te)+" 0 0 1 "+z.leftInnerExtent+" "+(z.verticalFullExtent-te)+"L"+z.rightInnerExtent+" "+(z.verticalFullExtent-te)+"A"+(z.rightLargeArcRadius-te)+" "+(z.rightLargeArcRadius-te)+" 0 0 1 "+(z.rightFullExtent+te)+" "+z.verticalRightInnerExtent+"L"+(z.rightFullExtent+te)+" "+(z.targetY+z.rightSmallArcRadius)+"A"+(z.rightLargeArcRadius-te)+" "+(z.rightSmallArcRadius-te)+" 0 0 1 "+z.rightInnerExtent+" "+(z.targetY+te)+"L"+z.targetX+" "+(z.targetY+te)+"Z";var W,te,z,N=Y.link.source.x1,V=Y.link.target.x0,Q=g(N,V),j=Q(.5),J=Q(.5),K=Y.link.y0-Y.link.width/2,re=Y.link.y0+Y.link.width/2,ie=Y.link.y1-Y.link.width/2,ce=Y.link.y1+Y.link.width/2;return"M"+N+","+K+"C"+j+","+K+" "+J+","+ie+" "+V+","+ie+"L"+V+","+ce+"C"+J+","+ce+" "+j+","+re+" "+N+","+re+"Z"}}function L(Y,W){var te=r(W.color),z=i.nodePadAcross,N=Y.nodePad/2;W.dx=W.x1-W.x0,W.dy=W.y1-W.y0;var V=W.dx,Q=Math.max(.5,W.dy),j="node_"+W.pointNumber;return W.group&&(j=p.randstr()),W.trace=Y.trace,W.curveNumber=Y.trace.index,{index:W.pointNumber,key:j,partOfGroup:W.partOfGroup||!1,group:W.group,traceId:Y.key,trace:Y.trace,node:W,nodePad:Y.nodePad,nodeLineColor:Y.nodeLineColor,nodeLineWidth:Y.nodeLineWidth,textFont:Y.textFont,size:Y.horizontal?Y.height:Y.width,visibleWidth:Math.ceil(V),visibleHeight:Q,zoneX:-z,zoneY:-N,zoneWidth:V+2*z,zoneHeight:Q+2*N,labelY:Y.horizontal?W.dy/2+1:W.dx/2+1,left:1===W.originalLayer,sizeAcross:Y.width,forceLayouts:Y.forceLayouts,horizontal:Y.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:o.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,graph:Y.graph,arrangement:Y.arrangement,uniqueNodeLabelPathId:[Y.guid,Y.key,j].join("_"),interactionState:Y.interactionState,figure:Y}}function A(Y){Y.attr("transform",function(W){return s(W.node.x0.toFixed(3),W.node.y0.toFixed(3))})}function I(Y){Y.call(A)}function D(Y,W){Y.call(I),W.attr("d",T())}function S(Y){Y.attr("width",function(W){return W.node.x1-W.node.x0}).attr("height",function(W){return W.visibleHeight})}function C(Y){return Y.link.width>1||Y.linkLineWidth>0}function R(Y){return s(Y.translateX,Y.translateY)+(Y.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function F(Y,W,te){Y.on(".basic",null).on("mouseover.basic",function(z){z.interactionState.dragInProgress||z.partOfGroup||(te.hover(this,z,W),z.interactionState.hovered=[this,z])}).on("mousemove.basic",function(z){z.interactionState.dragInProgress||z.partOfGroup||(te.follow(this,z),z.interactionState.hovered=[this,z])}).on("mouseout.basic",function(z){z.interactionState.dragInProgress||z.partOfGroup||(te.unhover(this,z,W),z.interactionState.hovered=!1)}).on("click.basic",function(z){z.interactionState.hovered&&(te.unhover(this,z,W),z.interactionState.hovered=!1),z.interactionState.dragInProgress||z.partOfGroup||te.select(this,z,W)})}function H(Y,W,te,z){var N=_.behavior.drag().origin(function(V){return{x:V.node.x0+V.visibleWidth/2,y:V.node.y0+V.visibleHeight/2}}).on("dragstart",function(V){if("fixed"!==V.arrangement&&(p.ensureSingle(z._fullLayout._infolayer,"g","dragcover",function(j){z._fullLayout._dragCover=j}),p.raiseToTop(this),V.interactionState.dragInProgress=V.node,X(V.node),V.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,V.interactionState.hovered),V.interactionState.hovered=!1),"snap"===V.arrangement)){var Q=V.traceId+"|"+V.key;V.forceLayouts[Q]?V.forceLayouts[Q].alpha(1):function(j,J,K,re){!function(ce){for(var se=0;se<ce.length;se++)ce[se].y=(ce[se].y0+ce[se].y1)/2,ce[se].x=(ce[se].x0+ce[se].x1)/2}(K.graph.nodes);var se,de,ue,ie=K.graph.nodes.filter(function(ce){return ce.originalX===K.node.originalX}).filter(function(ce){return!ce.partOfGroup});K.forceLayouts[J]=d.forceSimulation(ie).alphaDecay(0).force("collide",d.forceCollide().radius(function(ce){return ce.dy/2+K.nodePad/2}).strength(1).iterations(i.forceIterations)).force("constrain",(se=J,de=ie,ue=K,function(){for(var ge=0,be=0;be<de.length;be++){var Te=de[be];Te===ue.interactionState.dragInProgress?(Te.x=Te.lastDraggedX,Te.y=Te.lastDraggedY):(Te.vx=(Te.originalX-Te.x)/i.forceTicksPerFrame,Te.y=Math.min(ue.size-Te.dy/2,Math.max(Te.dy/2,Te.y))),ge=Math.max(ge,Math.abs(Te.vx),Math.abs(Te.vy))}!ue.interactionState.dragInProgress&&ge<.1&&ue.forceLayouts[se].alpha()>0&&ue.forceLayouts[se].alpha(0)})).stop()}(0,Q,V),j=Y,J=W,K=V,re=Q,ie=z,window.requestAnimationFrame(function ce(){var se;for(se=0;se<i.forceTicksPerFrame;se++)K.forceLayouts[re].tick();if(function(ue){for(var ge=0;ge<ue.length;ge++)ue[ge].y0=ue[ge].y-ue[ge].dy/2,ue[ge].y1=ue[ge].y0+ue[ge].dy,ue[ge].x0=ue[ge].x-ue[ge].dx/2,ue[ge].x1=ue[ge].x0+ue[ge].dx}(K.graph.nodes),K.sankey.update(K.graph),D(j.filter(Z(K)),J),K.forceLayouts[re].alpha()>0)window.requestAnimationFrame(ce);else{var de=K.node.originalX;K.node.x0=de-K.visibleWidth/2,K.node.x1=de+K.visibleWidth/2,U(K,ie)}})}var j,J,K,re,ie}).on("drag",function(V){if("fixed"!==V.arrangement){var Q=_.event.x,j=_.event.y;"snap"===V.arrangement?(V.node.x0=Q-V.visibleWidth/2,V.node.x1=Q+V.visibleWidth/2,V.node.y0=j-V.visibleHeight/2,V.node.y1=j+V.visibleHeight/2):("freeform"===V.arrangement&&(V.node.x0=Q-V.visibleWidth/2,V.node.x1=Q+V.visibleWidth/2),j=Math.max(0,Math.min(V.size-V.visibleHeight/2,j)),V.node.y0=j-V.visibleHeight/2,V.node.y1=j+V.visibleHeight/2),X(V.node),"snap"!==V.arrangement&&(V.sankey.update(V.graph),D(Y.filter(Z(V)),W))}}).on("dragend",function(V){if("fixed"!==V.arrangement){V.interactionState.dragInProgress=!1;for(var Q=0;Q<V.node.childrenNodes.length;Q++)V.node.childrenNodes[Q].x=V.node.x,V.node.childrenNodes[Q].y=V.node.y;"snap"!==V.arrangement&&U(V,z)}});Y.on(".drag",null).call(N)}function U(Y,W){for(var te=[],z=[],N=0;N<Y.graph.nodes.length;N++){var Q=(Y.graph.nodes[N].y0+Y.graph.nodes[N].y1)/2;te.push((Y.graph.nodes[N].x0+Y.graph.nodes[N].x1)/2/Y.figure.width),z.push(Q/Y.figure.height)}l.call("_guiRestyle",W,{"node.x":[te],"node.y":[z]},Y.trace.index).then(function(){W._fullLayout._dragCover&&W._fullLayout._dragCover.remove()})}function X(Y){Y.lastDraggedX=Y.x0+Y.dx/2,Y.lastDraggedY=Y.y0+Y.dy/2}function Z(Y){return function(W){return W.node.originalX===Y.node.originalX}}$.exports=function(Y,W,te,z,N){var V=!1;p.ensureSingle(Y._fullLayout._infolayer,"g","first-render",function(){V=!0});var Q=Y._fullLayout._dragCover,j=te.filter(function(ue){return v(ue).trace.visible}).map(b.bind(null,z)),J=W.selectAll("."+i.cn.sankey).data(j,u);J.exit().remove(),J.enter().append("g").classed(i.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",R),J.each(function(ue,ge){Y._fullData[ge]._sankey=ue;var be="bgsankey-"+ue.trace.uid+"-"+ge;p.ensureSingle(Y._fullLayout._draggers,"rect",be),Y._fullData[ge]._bgRect=_.select("."+be),Y._fullData[ge]._bgRect.style("pointer-events","all").attr("width",ue.width).attr("height",ue.height).attr("x",ue.translateX).attr("y",ue.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),J.transition().ease(i.ease).duration(i.duration).attr("transform",R);var K=J.selectAll("."+i.cn.sankeyLinks).data(h,u);K.enter().append("g").classed(i.cn.sankeyLinks,!0).style("fill","none");var re=K.selectAll("."+i.cn.sankeyLink).data(function(ue){return ue.graph.links.filter(function(ge){return ge.value}).map(k.bind(null,ue))},u);re.enter().append("path").classed(i.cn.sankeyLink,!0).call(F,J,N.linkEvents),re.style("stroke",function(ue){return C(ue)?o.tinyRGB(r(ue.linkLineColor)):ue.tinyColorHue}).style("stroke-opacity",function(ue){return C(ue)?o.opacity(ue.linkLineColor):ue.tinyColorAlpha}).style("fill",function(ue){return ue.tinyColorHue}).style("fill-opacity",function(ue){return ue.tinyColorAlpha}).style("stroke-width",function(ue){return C(ue)?ue.linkLineWidth:1}).attr("d",T()),re.style("opacity",function(){return Y._context.staticPlot||V||Q?1:0}).transition().ease(i.ease).duration(i.duration).style("opacity",1),re.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var ie=J.selectAll("."+i.cn.sankeyNodeSet).data(h,u);ie.enter().append("g").classed(i.cn.sankeyNodeSet,!0),ie.style("cursor",function(ue){switch(ue.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ce=ie.selectAll("."+i.cn.sankeyNode).data(function(ue){var ge=ue.graph.nodes;return function(be){var Te,we=[];for(Te=0;Te<be.length;Te++)be[Te].originalX=(be[Te].x0+be[Te].x1)/2,be[Te].originalY=(be[Te].y0+be[Te].y1)/2,-1===we.indexOf(be[Te].originalX)&&we.push(be[Te].originalX);for(we.sort(function(Le,fe){return Le-fe}),Te=0;Te<be.length;Te++)be[Te].originalLayerIndex=we.indexOf(be[Te].originalX),be[Te].originalLayer=be[Te].originalLayerIndex/(we.length-1)}(ge),ge.map(L.bind(null,ue))},u);ce.enter().append("g").classed(i.cn.sankeyNode,!0).call(A).style("opacity",function(ue){return!Y._context.staticPlot&&!V||ue.partOfGroup?0:1}),ce.call(F,J,N.nodeEvents).call(H,re,N,Y),ce.transition().ease(i.ease).duration(i.duration).call(A).style("opacity",function(ue){return ue.partOfGroup?0:1}),ce.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var se=ce.selectAll("."+i.cn.nodeRect).data(h);se.enter().append("rect").classed(i.cn.nodeRect,!0).call(S),se.style("stroke-width",function(ue){return ue.nodeLineWidth}).style("stroke",function(ue){return o.tinyRGB(r(ue.nodeLineColor))}).style("stroke-opacity",function(ue){return o.opacity(ue.nodeLineColor)}).style("fill",function(ue){return ue.tinyColorHue}).style("fill-opacity",function(ue){return ue.tinyColorAlpha}),se.transition().ease(i.ease).duration(i.duration).call(S);var de=ce.selectAll("."+i.cn.nodeLabel).data(h);de.enter().append("text").classed(i.cn.nodeLabel,!0).style("cursor","default"),de.attr("data-notex",1).text(function(ue){return ue.node.label}).each(function(ue){var ge=_.select(this);n.font(ge,ue.textFont),f.convertToTspans(ge,Y)}).style("text-shadow",f.makeTextShadow(Y._fullLayout.paper_bgcolor)).attr("text-anchor",function(ue){return ue.horizontal&&ue.left?"end":"start"}).attr("transform",function(ue){var ge=_.select(this),be=f.lineCount(ge),we=ue.nodeLineWidth/2+3,Le=((ue.horizontal?ue.visibleHeight:ue.visibleWidth)-ue.textFont.size*((be-1)*w-m))/2;ue.horizontal&&(ue.left?we=-we:we+=ue.visibleWidth);var fe=ue.horizontal?"":"scale(-1,1)"+a(90);return s(ue.horizontal?we:Le,ue.horizontal?Le:we)+fe}),de.transition().ease(i.ease).duration(i.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(y,$,ee){"use strict";$.exports=function(d,g){for(var _=[],t=d.cd[0].trace,e=t._sankey.graph.nodes,i=0;i<e.length;i++){var r=e[i];if(!r.partOfGroup){var o=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];"v"===t.orientation&&o.reverse(),g&&g.contains(o,!1,i,d)&&_.push({pointNumber:r.pointNumber})}}return _}},{}],925:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){for(var t=0;t<g.length;t++)g[t].i=t;d.mergeArray(_.text,g,"tx"),d.mergeArray(_.texttemplate,g,"txt"),d.mergeArray(_.hovertext,g,"htx"),d.mergeArray(_.customdata,g,"data"),d.mergeArray(_.textposition,g,"tp"),_.textfont&&(d.mergeArrayCastPositive(_.textfont.size,g,"ts"),d.mergeArray(_.textfont.color,g,"tc"),d.mergeArray(_.textfont.family,g,"tf"));var e=_.marker;if(e){d.mergeArrayCastPositive(e.size,g,"ms"),d.mergeArrayCastPositive(e.opacity,g,"mo"),d.mergeArray(e.symbol,g,"mx"),d.mergeArray(e.color,g,"mc");var i=e.line;e.line&&(d.mergeArray(i.color,g,"mlc"),d.mergeArrayCastPositive(i.width,g,"mlw"));var r=e.gradient;r&&"none"!==r.type&&(d.mergeArray(r.type,g,"mgt"),d.mergeArray(r.color,g,"mgc"))}}},{"../../lib":503}],926:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../components/colorscale/attributes"),e=y("../../plots/font_attributes"),i=y("../../components/drawing/attributes").dash,r=y("../../components/drawing"),o=y("./constants"),n=y("../../lib/extend").extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:d("x"),yhoverformat:d("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:g({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:_({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},i,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:n({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},t("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},t("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../plots/cartesian/axes"),t=y("../../plots/cartesian/align_period"),e=y("../../constants/numerical").BADNUM,i=y("./subtypes"),r=y("./colorscale_calc"),o=y("./arrays_to_calcdata"),n=y("./calc_selection");function p(h,v,f,l,x,m,w){var b=v._length,k=h._fullLayout,T=f._id,L=l._id,A=k._firstScatter[c(v)]===v.uid,I=(u(v,k,f,l)||{}).orientation,D=v.fill;f._minDtick=0,l._minDtick=0;var S={padded:!0},C={padded:!0};w&&(S.ppad=C.ppad=w);var R=b<2||x[0]!==x[b-1]||m[0]!==m[b-1];R&&("tozerox"===D||"tonextx"===D&&(A||"h"===I))?S.tozero=!0:(v.error_y||{}).visible||"tonexty"!==D&&"tozeroy"!==D&&(i.hasMarkers(v)||i.hasText(v))||(S.padded=!1,S.ppad=0),R&&("tozeroy"===D||"tonexty"===D&&(A||"v"===I))?C.tozero=!0:"tonextx"!==D&&"tozerox"!==D||(C.padded=!1),T&&(v._extremes[T]=_.findExtremes(f,x,S)),L&&(v._extremes[L]=_.findExtremes(l,m,C))}function s(h,v){if(i.hasMarkers(h)){var f,l=h.marker,x=1.6*(h.marker.sizeref||1);if(f="area"===h.marker.sizemode?function(T){return Math.max(Math.sqrt((T||0)/x),3)}:function(T){return Math.max((T||0)/x,3)},g.isArrayOrTypedArray(l.size)){var m={type:"linear"};_.setConvert(m);for(var w=m.makeCalcdata(h.marker,"size"),b=new Array(v),k=0;k<v;k++)b[k]=f(w[k]);return b}return f(l.size)}}function a(h,v){var f=c(v),l=h._firstScatter;l[f]||(l[f]=v.uid)}function c(h){var v=h.stackgroup;return h.xaxis+h.yaxis+h.type+(v?"-"+v:"")}function u(h,v,f,l){var x=h.stackgroup;if(x){var m=v._scatterStackOpts[f._id+l._id][x],w="v"===m.orientation?l:f;return"linear"===w.type||"log"===w.type?m:void 0}}$.exports={calc:function(h,v){var f,l,x,m,w,b,k=h._fullLayout,T=_.getFromId(h,v.xaxis||"x"),L=_.getFromId(h,v.yaxis||"y"),A=T.makeCalcdata(v,"x"),I=L.makeCalcdata(v,"y"),D=t(v,T,"x",A),S=t(v,L,"y",I),C=D.vals,R=S.vals,F=v._length,H=new Array(F),U=v.ids,X=u(v,k,T,L),Z=!1;a(k,v);var Y,W="x",te="y";X?(g.pushUnique(X.traceIndices,v._expandedIndex),(f="v"===X.orientation)?(te="s",Y="x"):(W="s",Y="y"),w="interpolate"===X.stackgaps):p(h,v,T,L,C,R,s(v,F));var z=!!v.xperiodalignment,N=!!v.yperiodalignment;for(l=0;l<F;l++){var V=H[l]={},Q=d(C[l]),j=d(R[l]);Q&&j?(V[W]=C[l],V[te]=R[l],z&&(V.orig_x=A[l],V.xEnd=D.ends[l],V.xStart=D.starts[l]),N&&(V.orig_y=I[l],V.yEnd=S.ends[l],V.yStart=S.starts[l])):X&&(f?Q:j)?(V[Y]=f?C[l]:R[l],V.gap=!0,w?(V.s=e,Z=!0):V.s=0):V[W]=V[te]=e,U&&(V.id=String(U[l]))}if(o(H,v),r(h,v),n(H,v),X){for(l=0;l<H.length;)H[l][Y]===e?H.splice(l,1):l++;if(g.sort(H,function(ie,ce){return ie[Y]-ce[Y]||ie.i-ce.i}),Z){for(l=0;l<H.length-1&&H[l].gap;)l++;for((b=H[l].s)||(b=H[l].s=0),x=0;x<l;x++)H[x].s=b;for(m=H.length-1;m>l&&H[m].gap;)m--;for(b=H[m].s,x=H.length-1;x>m;x--)H[x].s=b;for(;l<m;)if(H[++l].gap){for(x=l+1;H[x].gap;)x++;for(var J=H[l-1][Y],K=H[l-1].s,re=(H[x].s-K)/(H[x][Y]-J);l<x;)H[l].s=K+(H[l][Y]-J)*re,l++}}}return H},calcMarkerSize:s,calcAxisExpansion:p,setFirstScatter:a,getStackOpts:u}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){d.isArrayOrTypedArray(_.selectedpoints)&&d.tagSelected(g,_)}},{"../../lib":503}],929:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/helpers").hasColorscale,g=y("../../components/colorscale/calc"),_=y("./subtypes");$.exports=function(t,e){_.hasLines(e)&&d(e,"line")&&g(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),_.hasMarkers(e)&&(d(e,"marker")&&g(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),d(e,"marker.line")&&g(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(y,$,ee){"use strict";$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(y,$,ee){"use strict";var d=y("./calc");function g(_,t,e,i,r,o,n){r[i]=!0;var a,c,h,v,f,p={i:null,gap:!0,s:0};if(p[n]=e,_.splice(t,0,p),t&&e===_[t-1][n]){var s=_[t-1];p.s=s.s,p.i=s.i,p.gap=s.gap}else o&&(p.s=(h=n,v=(a=_)[(c=t)-1],(f=a[c+1])?v?v.s+(f.s-v.s)*(e-v[h])/(f[h]-v[h]):f.s:v.s));t||(_[0].t=_[1].t,_[0].trace=_[1].trace,delete _[1].t,delete _[1].trace)}$.exports=function(_,t){var e=t.xaxis,i=t.yaxis,o=_._fullLayout._scatterStackOpts[e._id+i._id];if(o){var n,p,s,a,c,u,h,v,f,l,x,m,w,b,k,T=_.calcdata;for(var L in o){var A=(l=o[L]).traceIndices;if(A.length){for(x="interpolate"===l.stackgaps,m=l.groupnorm,"v"===l.orientation?(w="x",b="y"):(w="y",b="x"),k=new Array(A.length),n=0;n<k.length;n++)k[n]=!1;u=T[A[0]];var I=new Array(u.length);for(n=0;n<u.length;n++)I[n]=u[n][w];for(n=1;n<A.length;n++){for(c=T[A[n]],p=s=0;p<c.length;p++){for(h=c[p][w];h>I[s]&&s<I.length;s++)g(c,p,I[s],n,k,x,w),p++;if(h!==I[s]){for(a=0;a<n;a++)g(T[A[a]],s,h,a,k,x,w);I.splice(s,0,h)}s++}for(;s<I.length;s++)g(c,p,I[s],n,k,x,w),p++}var D=I.length;for(p=0;p<u.length;p++){for(v=u[p][b]=u[p].s,n=1;n<A.length;n++)(c=T[A[n]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=D,c[p][b]=v+=c[p].s;if(m)for(f=("fraction"===m?v:v/100)||1,n=0;n<A.length;n++){var S=T[A[n]][p];S[b]/=f,S.sNorm=S.s/f}}for(n=0;n<A.length;n++){var C=(c=T[A[n]])[0].trace,R=d.calcMarkerSize(C,C._rawLength),F=Array.isArray(R);if(R&&k[n]||F){var H=R;for(R=new Array(D),p=0;p<D;p++)R[p]=c[p].gap?0:F?H[c[p].i]:H}var U=new Array(D),X=new Array(D);for(p=0;p<D;p++)U[p]=c[p].x,X[p]=c[p].y;d.calcAxisExpansion(_,C,e,i,U,X,R),c[0].t.orientation=l.orientation}}}}}},{"./calc":927}],932:[function(y,$,ee){"use strict";$.exports=function(d){for(var g=0;g<d.length;g++){var _=d[g];if("scatter"===_.type){var t=_.fill;if("none"!==t&&"toself"!==t&&(_.opacity=void 0,"tonexty"===t||"tonextx"===t))for(var e=g-1;e>=0;e--){var i=d[e];if("scatter"===i.type&&i.xaxis===_.xaxis&&i.yaxis===_.yaxis){i.opacity=void 0;break}}}}}},{}],933:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry"),_=y("./attributes"),t=y("./constants"),e=y("./subtypes"),i=y("./xy_defaults"),r=y("./period_defaults"),o=y("./stack_defaults"),n=y("./marker_defaults"),p=y("./line_defaults"),s=y("./line_shape_defaults"),a=y("./text_defaults"),c=y("./fillcolor_defaults");$.exports=function(u,h,v,f){function l(A,I){return d.coerce(u,h,_,A,I)}var x=i(u,h,f,l);if(x||(h.visible=!1),h.visible){r(u,h,f,l),l("xhoverformat"),l("yhoverformat");var m=o(u,h,f,l),w=!m&&x<t.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("mode",w),e.hasLines(h)&&(p(u,h,v,f,l),s(u,h,l),l("connectgaps"),l("line.simplify")),e.hasMarkers(h)&&n(u,h,v,f,l,{gradient:!0}),e.hasText(h)&&(l("texttemplate"),a(u,h,f,l));var b=[];(e.hasMarkers(h)||e.hasText(h))&&(l("cliponaxis"),l("marker.maxdisplayed"),b.push("points")),l("fill",m?m.fillDflt:"none"),"none"!==h.fill&&(c(u,h,v,l),e.hasLines(h)||s(u,h,l));var k=(h.line||{}).color,T=(h.marker||{}).color;"tonext"!==h.fill&&"toself"!==h.fill||b.push("fills"),l("hoveron",b.join("+")||"points"),"fills"!==h.hoveron&&l("hovertemplate");var L=g.getComponentMethod("errorbars","supplyDefaults");L(u,h,k||T||v,{axis:"y"}),L(u,h,k||T||v,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(h,l)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("../../lib").isArrayOrTypedArray;$.exports=function(_,t,e,i){var r=!1;if(t.marker){var o=t.marker.color,n=(t.marker.line||{}).color;o&&!g(o)?r=o:n&&!g(n)&&(r=n)}i("fillcolor",d.addOpacity((t.line||{}).color||r||e,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes");$.exports=function(g,_,t){var e={},i={_fullLayout:t},r=d.getFromTrace(i,_,"x"),o=d.getFromTrace(i,_,"y");return e.xLabel=d.tickText(r,r.c2l(g.x),!0).text,e.yLabel=d.tickText(o,o.c2l(g.y),!0).text,e}},{"../../plots/cartesian/axes":554}],936:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("./subtypes");$.exports=function(_,t){var e,i;if("lines"===_.mode)return(e=_.line.color)&&d.opacity(e)?e:_.fillcolor;if("none"===_.mode)return _.fill?_.fillcolor:"";var r=t.mcc||(_.marker||{}).color,o=t.mlcc||((_.marker||{}).line||{}).color;return(i=r&&d.opacity(r)?r:o&&d.opacity(o)&&(t.mlw||((_.marker||{}).line||{}).width)?o:"")?d.opacity(i)<.3?d.addOpacity(i,.3):i:(e=(_.line||{}).color)&&d.opacity(e)&&g.hasLines(_)&&_.line.width?e:_.fillcolor}},{"../../components/color":366,"./subtypes":951}],937:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/fx"),_=y("../../registry"),t=y("./get_trace_color"),e=y("../../components/color"),i=d.fillText;$.exports=function(r,o,n,p){var s=r.cd,a=s[0].trace,c=r.xa,u=r.ya,h=c.c2p(o),v=u.c2p(n),f=[h,v],l=a.hoveron||"",x=-1!==a.mode.indexOf("markers")?3:.5,m=!!a.xperiodalignment,w=!!a.yperiodalignment;if(-1!==l.indexOf("points")){var b=function(se){var de=Math.max(x,se.mrc||0),ue=c.c2p(se.x)-h,ge=u.c2p(se.y)-v;return Math.max(Math.sqrt(ue*ue+ge*ge)-de,1-x/de)},k=g.getDistanceFunction(p,function(se){if(m){var de=c.c2p(se.xStart),ue=c.c2p(se.xEnd);return h>=Math.min(de,ue)&&h<=Math.max(de,ue)?0:1/0}var ge=Math.max(3,se.mrc||0),be=1-1/ge,Te=Math.abs(c.c2p(se.x)-h);return Te<ge?be*Te/ge:Te-ge+be},function(se){if(w){var de=u.c2p(se.yStart),ue=u.c2p(se.yEnd);return v>=Math.min(de,ue)&&v<=Math.max(de,ue)?0:1/0}var ge=Math.max(3,se.mrc||0),be=1-1/ge,Te=Math.abs(u.c2p(se.y)-v);return Te<ge?be*Te/ge:Te-ge+be},b);if(g.getClosest(s,k,r),!1!==r.index){var T=s[r.index],L=c.c2p(T.x,!0),A=u.c2p(T.y,!0),I=T.mrc||1;r.index=T.i;var D=s[0].t.orientation,S=D&&(T.sNorm||T.s),C="h"===D?S:void 0!==T.orig_x?T.orig_x:T.x,R="v"===D?S:void 0!==T.orig_y?T.orig_y:T.y;return d.extendFlat(r,{color:t(a,T),x0:L-I,x1:L+I,xLabelVal:C,y0:A-I,y1:A+I,yLabelVal:R,spikeDistance:b(T),hovertemplate:a.hovertemplate}),i(T,a,r),_.getComponentMethod("errorbars","hoverInfo")(T,a,r),[r]}}if(-1!==l.indexOf("fills")&&a._polygons){var F,H,U,X,Z,Y,te,z,N=a._polygons,V=[],Q=!1,j=1/0,J=-1/0,K=1/0,re=-1/0;for(F=0;F<N.length;F++)(U=N[F]).contains(f)&&(Q=!Q,V.push(U),K=Math.min(K,U.ymin),re=Math.max(re,U.ymax));if(Q){var ie=((K=Math.max(K,0))+(re=Math.min(re,u._length)))/2;for(F=0;F<V.length;F++)for(X=V[F].pts,H=1;H<X.length;H++)(te=X[H-1][1])>ie!=(z=X[H][1])>=ie&&(Y=X[H-1][0],z-te&&(Z=Y+(X[H][0]-Y)*(ie-te)/(z-te),j=Math.min(j,Z),J=Math.max(J,Z)));j=Math.max(j,0),J=Math.min(J,c._length);var ce=e.defaultLine;return e.opacity(a.fillcolor)?ce=a.fillcolor:e.opacity((a.line||{}).color)&&(ce=a.line.color),d.extendFlat(r,{distance:r.maxHoverDistance,x0:j,x1:J,y0:ie,y1:ie,color:ce,hovertemplate:!1}),delete r.index,r.text=a.text&&!Array.isArray(a.text)?String(a.text):a.name,[r]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(y,$,ee){"use strict";var d=y("./subtypes");$.exports={hasLines:d.hasLines,hasMarkers:d.hasMarkers,hasText:d.hasText,isBubble:d.isBubble,attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./cross_trace_calc"),arraysToCalcdata:y("./arrays_to_calcdata"),plot:y("./plot"),colorbar:y("./marker_colorbar"),formatLabels:y("./format_labels"),style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(y,$,ee){"use strict";var d=y("../../lib").isArrayOrTypedArray,g=y("../../components/colorscale/helpers").hasColorscale,_=y("../../components/colorscale/defaults");$.exports=function(t,e,i,r,o,n){var p=(t.marker||{}).color;o("line.color",i),g(t,"line")?_(t,e,r,o,{prefix:"line.",cLetter:"c"}):o("line.color",!d(p)&&p||i),o("line.width"),(n||{}).noDash||o("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(y,$,ee){"use strict";var d=y("../../constants/numerical"),g=d.BADNUM,_=d.LOG_CLIP,t=_+.5,e=_-.5,i=y("../../lib"),r=i.segmentsIntersect,o=i.constrain,n=y("./constants");$.exports=function(p,s){var a,c,u,h,v,f,l,x,m,w,b,k,T,L,A,I,D,S,C=s.xaxis,R=s.yaxis,F="log"===C.type,H="log"===R.type,U=C._length,X=R._length,Z=s.connectGaps,Y=s.baseTolerance,W=s.shape,te="linear"===W,z=s.fill&&"none"!==s.fill,N=[],V=n.minTolerance,Q=p.length,j=new Array(Q),J=0;function K(Je){var at=p[Je];if(!at)return!1;var pt=s.linearized?C.l2p(at.x):C.c2p(at.x),xt=s.linearized?R.l2p(at.y):R.c2p(at.y);if(pt===g){if(F&&(pt=C.c2p(at.x,!0)),pt===g)return!1;H&&xt===g&&(pt*=Math.abs(C._m*X*(C._m>0?t:e)/(R._m*U*(R._m>0?t:e)))),pt*=1e3}if(xt===g){if(H&&(xt=R.c2p(at.y,!0)),xt===g)return!1;xt*=1e3}return[pt,xt]}function re(Je,at,pt,xt){var Ft=pt-Je,Dt=xt-at,ot=.5-Je,it=.5-at,Et=Ft*Ft+Dt*Dt,Xt=Ft*ot+Dt*it;if(Xt>0&&Xt<Et){var nr=ot*Dt-it*Ft;if(nr*nr<Et)return!0}}function ie(Je,at){var pt=Je[0]/U,xt=Je[1]/X,Ft=Math.max(0,-pt,pt-1,-xt,xt-1);return Ft&&void 0!==D&&re(pt,xt,D,S)&&(Ft=0),Ft&&at&&re(pt,xt,at[0]/U,at[1]/X)&&(Ft=0),(1+n.toleranceGrowth*Ft)*Y}function ce(Je,at){var pt=Je[0]-at[0],xt=Je[1]-at[1];return Math.sqrt(pt*pt+xt*xt)}var se,de,ue,ge,be,Te,we,Le=n.maxScreensAway,fe=-U*Le,ve=U*(1+Le),Me=-X*Le,ke=X*(1+Le),Ce=[[fe,Me,ve,Me],[ve,Me,ve,ke],[ve,ke,fe,ke],[fe,ke,fe,Me]];function Pe(Je){if(Je[0]<fe||Je[0]>ve||Je[1]<Me||Je[1]>ke)return[o(Je[0],fe,ve),o(Je[1],Me,ke)]}function Fe(Je,at){return Je[0]===at[0]&&(Je[0]===fe||Je[0]===ve)||Je[1]===at[1]&&(Je[1]===Me||Je[1]===ke)||void 0}function qe(Je,at,pt){return function(xt,Ft){var Dt=Pe(xt),ot=Pe(Ft),it=[];if(Dt&&ot&&Fe(Dt,ot))return it;Dt&&it.push(Dt),ot&&it.push(ot);var Et=2*i.constrain((xt[Je]+Ft[Je])/2,at,pt)-((Dt||xt)[Je]+(ot||Ft)[Je]);return Et&&((Dt&&ot?Et>0==Dt[Je]>ot[Je]?Dt:ot:Dt||ot)[Je]+=Et),it}}function rt(Je){var at=Je[0],pt=Je[1],xt=at===j[J-1][0],Ft=pt===j[J-1][1];if(!xt||!Ft)if(J>1){var Dt=at===j[J-2][0],ot=pt===j[J-2][1];xt&&(at===fe||at===ve)&&Dt?ot?J--:j[J-1]=Je:Ft&&(pt===Me||pt===ke)&&ot?Dt?J--:j[J-1]=Je:j[J++]=Je}else j[J++]=Je}function ze(Je){j[J-1][0]!==Je[0]&&j[J-1][1]!==Je[1]&&rt([ue,ge]),rt(Je),be=null,ue=ge=0}function He(Je){if(D=Je[0]/U,S=Je[1]/X,de=Je[1]<Me?Me:Je[1]>ke?ke:0,(se=Je[0]<fe?fe:Je[0]>ve?ve:0)||de){if(J)if(be){var at=we(be,Je);at.length>1&&(ze(at[0]),j[J++]=at[1])}else Te=we(j[J-1],Je)[0],j[J++]=Te;else j[J++]=[se||Je[0],de||Je[1]];var pt=j[J-1];se&&de&&(pt[0]!==se||pt[1]!==de)?(be&&(ue!==se&&ge!==de?rt(ue&&ge?(Dt=(Ft=Je)[0]-(xt=be)[0],ot=(Ft[1]-xt[1])/Dt,(xt[1]*Ft[0]-Ft[1]*xt[0])/Dt>0?[ot>0?fe:ve,ke]:[ot>0?ve:fe,Me]):[ue||se,ge||de]):ue&&ge&&rt([ue,ge])),rt([se,de])):ue-se&&ge-de&&rt([se||ue,de||ge]),be=Je,ue=se,ge=de}else be&&ze(we(be,Je)[0]),j[J++]=Je;var xt,Ft,Dt,ot}for("linear"===W||"spline"===W?we=function(Je,at){for(var pt=[],xt=0,Ft=0;Ft<4;Ft++){var Dt=Ce[Ft],ot=r(Je[0],Je[1],at[0],at[1],Dt[0],Dt[1],Dt[2],Dt[3]);ot&&(!xt||Math.abs(ot.x-pt[0][0])>1||Math.abs(ot.y-pt[0][1])>1)&&(ot=[ot.x,ot.y],xt&&ce(ot,Je)<ce(pt[0],Je)?pt.unshift(ot):pt.push(ot),xt++)}return pt}:"hv"===W||"vh"===W?we=function(Je,at){var pt=[],xt=Pe(Je),Ft=Pe(at);return xt&&Ft&&Fe(xt,Ft)||(xt&&pt.push(xt),Ft&&pt.push(Ft)),pt}:"hvh"===W?we=qe(0,fe,ve):"vhv"===W&&(we=qe(1,Me,ke)),a=0;a<Q;a++)if(c=K(a)){for(J=0,be=null,He(c),a++;a<Q;a++){if(!(h=K(a))){if(Z)continue;break}if(te&&s.simplify){var Xe=K(a+1);if(w=ce(h,c),z&&(0===J||J===Q-1)||!(w<ie(h,Xe)*V)){for(x=[(h[0]-c[0])/w,(h[1]-c[1])/w],v=c,b=w,k=L=A=0,l=!1,u=h,a++;a<p.length;a++){if(f=Xe,Xe=K(a+1),!f){if(Z)continue;break}if(I=(m=[f[0]-c[0],f[1]-c[1]])[0]*x[1]-m[1]*x[0],L=Math.min(L,I),(A=Math.max(A,I))-L>ie(f,Xe))break;u=f,(T=m[0]*x[0]+m[1]*x[1])>b?(b=T,h=f,l=!1):T<k&&(k=T,v=f,l=!0)}if(l?(He(h),u!==v&&He(v)):(v!==c&&He(v),u!==h&&He(h)),He(u),a>=p.length||!f)break;He(f),c=f}}else He(h)}be&&rt([ue||be[0],ge||be[1]]),N.push(j.slice(0,J))}return N}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(y,$,ee){"use strict";$.exports=function(d,g,_){"spline"===_("line.shape")&&_("line.smoothing")}},{}],942:[function(y,$,ee){"use strict";var d={tonextx:1,tonexty:1,tonext:1};$.exports=function(g,_,t){var e,i,r,o,n,p={},s=!1,a=-1,c=0,u=-1;for(i=0;i<t.length;i++)(r=(e=t[i][0].trace).stackgroup||"")?r in p?n=p[r]:(n=p[r]=c,c++):e.fill in d&&u>=0?n=u:(n=u=c,c++),n<a&&(s=!0),e._groupIndex=a=n;var h=t.slice();s&&h.sort(function(f,l){var x=f[0].trace,m=l[0].trace;return x._groupIndex-m._groupIndex||x.index-m.index});var v={};for(i=0;i<h.length;i++)r=(e=h[i][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in d&&(e._prevtrace=(o=v[r])||null,o&&(o._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),v[r]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return h}},{}],943:[function(y,$,ee){"use strict";var d=y("fast-isnumeric");$.exports=function(g,_){_||(_=2);var t=g.marker,e=t.sizeref||1,i=t.sizemin||0,r="area"===t.sizemode?function(o){return Math.sqrt(o/e)}:function(o){return o/e};return function(o){var n=r(o/_);return d(n)&&n>0?Math.max(n,i):0}}},{"fast-isnumeric":190}],944:[function(y,$,ee){"use strict";$.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("../../components/colorscale/helpers").hasColorscale,_=y("../../components/colorscale/defaults"),t=y("./subtypes");$.exports=function(e,i,r,o,n,p){var s=t.isBubble(e),a=(e.line||{}).color;p=p||{},a&&(r=a),n("marker.symbol"),n("marker.opacity",s?.7:1),n("marker.size"),n("marker.color",r),g(e,"marker")&&_(e,i,o,n,{prefix:"marker.",cLetter:"c"}),p.noSelect||(n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size")),p.noLine||(n("marker.line.color",a&&!Array.isArray(a)&&i.marker.color!==a?a:s?d.background:d.defaultLine),g(e,"marker.line")&&_(e,i,o,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width",s?1:0)),s&&(n("marker.sizeref"),n("marker.sizemin"),n("marker.sizemode")),p.gradient&&"none"!==n("marker.gradient.type")&&n("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(y,$,ee){"use strict";var d=y("../../lib").dateTick0,g=y("../../constants/numerical").ONEWEEK;function _(t,e){return d(e,t%g==0?1:0)}$.exports=function(t,e,i,r,o){if(o||(o={x:!0,y:!0}),o.x){var n=r("xperiod");n&&(r("xperiod0",_(n,e.xcalendar)),r("xperiodalignment"))}if(o.y){var p=r("yperiod");p&&(r("yperiod0",_(p,e.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../lib"),t=_.ensureSingle,e=_.identity,i=y("../../components/drawing"),r=y("./subtypes"),o=y("./line_points"),n=y("./link_traces"),p=y("../../lib/polygon").tester;function s(a,c,u,h,v,f,l){var x;!function(ve,Me,ke,Ce,Pe){var Fe=ke.xaxis,qe=ke.yaxis,rt=d.extent(_.simpleMap(Fe.range,Fe.r2c)),ze=d.extent(_.simpleMap(qe.range,qe.r2c)),He=Ce[0].trace;if(r.hasMarkers(He)){var Xe=He.marker.maxdisplayed;if(0!==Xe){var Je=Ce.filter(function(Ft){return Ft.x>=rt[0]&&Ft.x<=rt[1]&&Ft.y>=ze[0]&&Ft.y<=ze[1]}),at=Math.ceil(Je.length/Xe),pt=0;Pe.forEach(function(Ft,Dt){var ot=Ft[0].trace;r.hasMarkers(ot)&&ot.marker.maxdisplayed>0&&Dt<Me&&pt++});var xt=Math.round(pt*at/3+Math.floor(pt/3)*at/7.1);Ce.forEach(function(Ft){delete Ft.vis}),Je.forEach(function(Ft,Dt){0===Math.round((Dt+xt)%at)&&(Ft.vis=!0)})}}}(0,c,u,h,v);var m=!!l&&l.duration>0;function w(ve){return m?ve.transition():ve}var b=u.xaxis,k=u.yaxis,T=h[0].trace,L=T.line,A=d.select(f),I=t(A,"g","errorbars"),D=t(A,"g","lines"),S=t(A,"g","points"),C=t(A,"g","text");if(g.getComponentMethod("errorbars","plot")(a,I,u,l),!0===T.visible){var R,F;w(A).style("opacity",T.opacity);var H=T.fill.charAt(T.fill.length-1);"x"!==H&&"y"!==H&&(H=""),h[0][u.isRangePlot?"nodeRangePlot3":"node3"]=A;var U,X,Z="",Y=[],W=T._prevtrace;W&&(Z=W._prevRevpath||"",F=W._nextFill,Y=W._polygons);var te,z,N,V,Q,j,J,K="",re="",ie=[],ce=_.noop;if(R=T._ownFill,r.hasLines(T)||"none"!==T.fill){for(F&&F.datum(h),-1!==["hv","vh","hvh","vhv"].indexOf(L.shape)?(te=i.steps(L.shape),z=i.steps(L.shape.split("").reverse().join(""))):te=z="spline"===L.shape?function(ve){var Me=ve[ve.length-1];return ve.length>1&&ve[0][0]===Me[0]&&ve[0][1]===Me[1]?i.smoothclosed(ve.slice(1),L.smoothing):i.smoothopen(ve,L.smoothing)}:function(ve){return"M"+ve.join("L")},N=function(ve){return z(ve.reverse())},ie=o(h,{xaxis:b,yaxis:k,connectGaps:T.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,shape:L.shape,simplify:L.simplify,fill:T.fill}),J=T._polygons=new Array(ie.length),x=0;x<ie.length;x++)T._polygons[x]=p(ie[x]);ie.length&&(V=ie[0][0],j=(Q=ie[ie.length-1])[Q.length-1]),ce=function(ve){return function(Me){if(U=te(Me),X=N(Me),K?H?(K+="L"+U.substr(1),re=X+"L"+re.substr(1)):(K+="Z"+U,re=X+"Z"+re):(K=U,re=X),r.hasLines(T)&&Me.length>1){var ke=d.select(this);if(ke.datum(h),ve)w(ke.style("opacity",0).attr("d",U).call(i.lineGroupStyle)).style("opacity",1);else{var Ce=w(ke);Ce.attr("d",U),i.singleLineStyle(h,Ce)}}}}}var se=D.selectAll(".js-line").data(ie);w(se.exit()).style("opacity",0).remove(),se.each(ce(!1)),se.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(i.lineGroupStyle).each(ce(!0)),i.setClipUrl(se,u.layerClipId,a),ie.length?(R?(R.datum(h),V&&j&&(H?("y"===H?V[1]=j[1]=k.c2p(0,!0):"x"===H&&(V[0]=j[0]=b.c2p(0,!0)),w(R).attr("d","M"+j+"L"+V+"L"+K.substr(1)).call(i.singleFillStyle)):w(R).attr("d",K+"Z").call(i.singleFillStyle))):F&&("tonext"===T.fill.substr(0,6)&&K&&Z?("tonext"===T.fill?w(F).attr("d",K+"Z"+Z+"Z").call(i.singleFillStyle):w(F).attr("d",K+"L"+Z.substr(1)+"Z").call(i.singleFillStyle),T._polygons=T._polygons.concat(Y)):(ue(F),T._polygons=null)),T._prevRevpath=re,T._prevPolygons=J):(R?ue(R):F&&ue(F),T._polygons=T._prevRevpath=T._prevPolygons=null),S.datum(h),C.datum(h),function(ve,Me,ke){var Ce,Pe=ke[0].trace,Fe=r.hasMarkers(Pe),qe=r.hasText(Pe),rt=function(ve){if(ve.ids)return we}(Pe),ze=fe,He=fe;if(Fe||qe){var Xe=e,Je=Pe.stackgroup,at=Je&&"infer zero"===a._fullLayout._scatterStackOpts[b._id+k._id][Je].stackgaps;Pe.marker.maxdisplayed||Pe._needsCull?Xe=at?be:ge:Je&&!at&&(Xe=Te),Fe&&(ze=Xe),qe&&(He=Xe)}var pt,xt=(Ce=ve.selectAll("path.point").data(ze,rt)).enter().append("path").classed("point",!0);m&&xt.call(i.pointStyle,Pe,a).call(i.translatePoints,b,k).style("opacity",0).transition().style("opacity",1),Ce.order(),Fe&&(pt=i.makePointStyleFns(Pe)),Ce.each(function(Ft){var Dt=d.select(this),ot=w(Dt);i.translatePoint(Ft,ot,b,k)?(i.singlePointStyle(Ft,ot,Pe,pt,a),u.layerClipId&&i.hideOutsideRangePoint(Ft,ot,b,k,Pe.xcalendar,Pe.ycalendar),Pe.customdata&&Dt.classed("plotly-customdata",null!=Ft.data)):ot.remove()}),m?Ce.exit().transition().style("opacity",0).remove():Ce.exit().remove(),(Ce=Me.selectAll("g").data(He,rt)).enter().append("g").classed("textpoint",!0).append("text"),Ce.order(),Ce.each(function(Ft){var Dt=d.select(this),ot=w(Dt.select("text"));i.translatePoint(Ft,ot,b,k)?u.layerClipId&&i.hideOutsideRangePoint(Ft,Dt,b,k,Pe.xcalendar,Pe.ycalendar):Dt.remove()}),Ce.selectAll("text").call(i.textPointStyle,Pe,a).each(function(Ft){var Dt=b.c2p(Ft.x),ot=k.c2p(Ft.y);d.select(this).selectAll("tspan.line").each(function(){w(d.select(this)).attr({x:Dt,y:ot})})}),Ce.exit().remove()}(S,C,h);var de=!1===T.cliponaxis?null:u.layerClipId;i.setClipUrl(S,de,a),i.setClipUrl(C,de,a)}function ue(ve){w(ve).attr("d","M0,0Z")}function ge(ve){return ve.filter(function(Me){return!Me.gap&&Me.vis})}function be(ve){return ve.filter(function(Me){return Me.vis})}function Te(ve){return ve.filter(function(Me){return!Me.gap})}function we(ve){return ve.id}function fe(){return!1}}$.exports=function(a,c,u,h,v,f){var l,x,k,L,m=!v,w=!!v&&v.duration>0,b=n(a,c,u);(l=h.selectAll("g.trace").data(b,function(k){return k[0].trace.uid})).enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),l.order(),k=a,L=c,l.each(function(A){var I=t(d.select(this),"g","fills");i.setClipUrl(I,L.layerClipId,k);var D=A[0].trace,S=[];D._ownfill&&S.push("_ownFill"),D._nexttrace&&S.push("_nextFill");var C=I.selectAll("g").data(S,e);C.enter().append("g"),C.exit().each(function(R){D[R]=null}).remove(),C.order().each(function(R){D[R]=t(d.select(this),"path","js-fill")})}),w?(f&&(x=f()),d.transition().duration(v.duration).ease(v.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()}).each(function(){h.selectAll("g.trace").each(function(k,T){s(a,T,c,k,b,this,v)})})):l.each(function(k,T){s(a,T,c,k,b,this,v)}),m&&l.exit().remove(),h.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(y,$,ee){"use strict";var d=y("./subtypes");$.exports=function(g,_){var t,e,i,r,o=g.cd,n=g.xaxis,p=g.yaxis,s=[],a=o[0].trace;if(!d.hasMarkers(a)&&!d.hasText(a))return[];if(!1===_)for(t=0;t<o.length;t++)o[t].selected=0;else for(t=0;t<o.length;t++)i=n.c2p((e=o[t]).x),r=p.c2p(e.y),null!==e.i&&_.contains([i,r],!1,t,g)?(s.push({pointNumber:e.i,x:n.c2d(e.x),y:p.c2d(e.y)}),e.selected=1):e.selected=0;return s}},{"./subtypes":951}],949:[function(y,$,ee){"use strict";var d=["orientation","groupnorm","stackgaps"];$.exports=function(g,_,t,e){var i=t._scatterStackOpts,r=e("stackgroup");if(r){var o=_.xaxis+_.yaxis,n=i[o];n||(n=i[o]={});var p=n[r],s=!1;p?p.traces.push(_):(p=n[r]={traceIndices:[],traces:[_]},s=!0);for(var a={orientation:_.x&&!_.y?"h":"v"},c=0;c<d.length;c++){var u=d[c],h=u+"Found";if(!p[h]){var v=void 0!==g[u],f="orientation"===u;if((v||s)&&(p[u]=e(u,a[u]),f&&(p.fillDflt="h"===p[u]?"tonextx":"tonexty"),v&&(p[h]=!0,!s&&(delete p.traces[0][u],f))))for(var l=0;l<p.traces.length-1;l++){var x=p.traces[l];x._input.fill!==x.fill&&(x.fill=p.fillDflt)}}}return p}}},{}],950:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("../../registry");function t(i,r,o){g.pointStyle(i.selectAll("path.point"),r,o)}function e(i,r,o){g.textPointStyle(i.selectAll("text"),r,o)}$.exports={style:function(i){var r=d.select(i).selectAll("g.trace.scatter");r.style("opacity",function(o){return o[0].trace.opacity}),r.selectAll("g.points").each(function(o){t(d.select(this),o.trace||o[0].trace,i)}),r.selectAll("g.text").each(function(o){e(d.select(this),o.trace||o[0].trace,i)}),r.selectAll("g.trace path.js-line").call(g.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(g.fillGroupStyle),_.getComponentMethod("errorbars","style")(r)},stylePoints:t,styleText:e,styleOnSelect:function(i,r,o){var n=r[0].trace;n.selectedpoints?(g.selectedPointStyle(o.selectAll("path.point"),n),g.selectedTextStyle(o.selectAll("text"),n)):(t(o,n,i),e(o,n,i))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports={hasLines:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("lines")},hasMarkers:function(g){return g.visible&&(g.mode&&-1!==g.mode.indexOf("markers")||"splom"===g.type)},hasText:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("text")},isBubble:function(g){return d.isPlainObject(g.marker)&&d.isArrayOrTypedArray(g.marker.size)}}},{"../../lib":503}],952:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_,t,e,i){i=i||{},e("textposition"),d.coerceFont(e,"textfont",t.font),i.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],953:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry");$.exports=function(_,t,e,i){var r,o=i("x"),n=i("y");if(g.getComponentMethod("calendars","handleTraceDefaults")(_,t,["x","y"],e),o){var p=d.minRowLength(o);n?r=Math.min(p,d.minRowLength(n)):(r=p,i("y0"),i("dy"))}else{if(!n)return 0;r=d.minRowLength(n),i("x0"),i("dx")}return t._length=r,r}},{"../../lib":503,"../../registry":638}],954:[function(y,$,ee){"use strict";var d=y("../scatter/attributes"),g=y("../../components/colorscale/attributes"),_=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/template_attributes").texttemplateAttrs,i=y("../../plots/attributes"),r=y("../../constants/gl3d_dashes"),o=y("../../constants/gl3d_markers"),n=y("../../lib/extend").extendFlat,p=y("../../plot_api/edit_types").overrideAll,s=y("../../lib/sort_object_keys"),c=d.marker,u=c.line,h=n({width:d.line.width,dash:{valType:"enumerated",values:s(r),dflt:"solid"}},g("line")),v=$.exports=p({x:d.x,y:d.y,z:{valType:"data_array"},text:n({},d.text,{}),texttemplate:e({},{}),hovertext:n({},d.hovertext,{}),hovertemplate:t(),xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z"),mode:n({},d.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:d.connectgaps,line:h,marker:n({symbol:{valType:"enumerated",values:s(o),dflt:"circle",arrayOk:!0},size:n({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:n({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:n({width:n({},u.width,{arrayOk:!1})},g("marker.line"))},g("marker")),textposition:n({},d.textposition,{dflt:"top center"}),textfont:{color:d.textfont.color,size:d.textfont.size,family:n({},d.textfont.family,{arrayOk:!1})},opacity:i.opacity,hoverinfo:n({},i.hoverinfo)},"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(y,$,ee){"use strict";var d=y("../scatter/arrays_to_calcdata"),g=y("../scatter/colorscale_calc");$.exports=function(_,t){var e=[{x:!1,y:!1,trace:t,t:{}}];return d(e,t),g(_,t),e}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(y,$,ee){"use strict";var d=y("../../registry");function g(_,t,e,i){if(!t||!t.visible)return null;for(var r=d.getComponentMethod("errorbars","makeComputeError")(t),o=new Array(_.length),n=0;n<_.length;n++){var p=r(+_[n],n);if("log"===i.type){var s=i.c2l(_[n]),a=_[n]-p[0],c=_[n]+p[1];if(o[n]=[(i.c2l(a,!0)-s)*e,(i.c2l(c,!0)-s)*e],a>0){var u=i.c2l(a);i._lowerLogErrorBound||(i._lowerLogErrorBound=u),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,u)}}else o[n]=[-p[0]*e,p[1]*e]}return o}$.exports=function(_,t,e){var i=[g(_.x,_.error_x,t[0],e.xaxis),g(_.y,_.error_y,t[1],e.yaxis),g(_.z,_.error_z,t[2],e.zaxis)],r=function(c){for(var u=0;u<c.length;u++)if(c[u])return c[u].length;return 0}(i);if(0===r)return null;for(var o=new Array(r),n=0;n<r;n++){for(var p=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(i[s])for(var a=0;a<2;a++)p[a][s]=i[s][n][a];o[n]=p}return o}},{"../../registry":638}],957:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_line3d,g=y("../../../stackgl_modules").gl_scatter3d,_=y("../../../stackgl_modules").gl_error3d,t=y("../../../stackgl_modules").gl_mesh3d,e=y("../../../stackgl_modules").delaunay_triangulate,i=y("../../lib"),r=y("../../lib/str2rgbarray"),o=y("../../lib/gl_format_color").formatColor,n=y("../scatter/make_bubble_size_func"),p=y("../../constants/gl3d_dashes"),s=y("../../constants/gl3d_markers"),a=y("../../plots/cartesian/axes"),c=y("../../components/fx/helpers").appendArrayPointValue,u=y("./calc_errors");function h(L,A){this.scene=L,this.uid=A,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var v=h.prototype;function f(L){return null==L?0:L.indexOf("left")>-1?-1:L.indexOf("right")>-1?1:0}function l(L){return null==L?0:L.indexOf("top")>-1?-1:L.indexOf("bottom")>-1?1:0}function x(L,A){return A(4*L)}function m(L){return s[L]}function w(L,A,I,D,S){var C=null;if(i.isArrayOrTypedArray(L)){C=[];for(var R=0;R<A;R++)C[R]=void 0===L[R]?D:I(L[R],S)}else C=I(L,i.identity);return C}function k(L){if(i.isArrayOrTypedArray(L)){var A=L[0];return i.isArrayOrTypedArray(A)&&(L=A),"rgb("+L.slice(0,3).map(function(I){return Math.round(255*I)})+")"}return null}function T(L){return i.isArrayOrTypedArray(L)?4===L.length&&"number"==typeof L[0]?k(L):L.map(k):null}v.handlePick=function(L){if(L.object&&(L.object===this.linePlot||L.object===this.delaunayMesh||L.object===this.textMarkers||L.object===this.scatterPlot)){var A=L.index=L.data.index;return L.object.highlight&&L.object.highlight(null),this.scatterPlot&&(L.object=this.scatterPlot,this.scatterPlot.highlight(L.data)),L.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[A]||0===this.textLabels[A])&&(L.textLabel=this.textLabels[A]):L.textLabel=this.textLabels),L.traceCoordinate=[this.data.x[A],this.data.y[A],this.data.z[A]],!0}},v.update=function(L){var A,I,D,S,C=this.scene.glplot.gl,R=p.solid;this.data=L;var F=function(L,A){var I,D,S,C,R,F,H=[],U=L.fullSceneLayout,X=L.dataScale,Z=U.xaxis,Y=U.yaxis,W=U.zaxis,te=A.marker,z=A.line,N=A.x||[],V=A.y||[],Q=A.z||[],j=N.length,J=A.xcalendar,K=A.ycalendar,re=A.zcalendar;for(R=0;R<j;R++)I=Z.d2l(N[R],0,J)*X[0],D=Y.d2l(V[R],0,K)*X[1],S=W.d2l(Q[R],0,re)*X[2],H[R]=[I,D,S];if(Array.isArray(A.text))F=A.text;else if(void 0!==A.text)for(F=new Array(j),R=0;R<j;R++)F[R]=A.text;function ie(Ce,Pe){var Fe=U[Ce];return a.tickText(Fe,Fe.d2l(Pe),!0).text}var ce=A.texttemplate;if(ce){var se=L.fullLayout._d3locale,de=Array.isArray(ce),ue=de?Math.min(ce.length,j):j,ge=de?function(Ce){return ce[Ce]}:function(){return ce};for(F=new Array(ue),R=0;R<ue;R++){var be={x:N[R],y:V[R],z:Q[R]},Te={xLabel:ie("xaxis",N[R]),yLabel:ie("yaxis",V[R]),zLabel:ie("zaxis",Q[R])},we={};c(we,A,R);var Le=A._meta||{};F[R]=i.texttemplateString(ge(R),Te,se,we,be,Le)}}if(C={position:H,mode:A.mode,text:F},"line"in A&&(C.lineColor=o(z,1,j),C.lineWidth=z.width,C.lineDashes=z.dash),"marker"in A){var fe=n(A);C.scatterColor=o(te,1,j),C.scatterSize=w(te.size,j,x,20,fe),C.scatterMarker=w(te.symbol,j,m,"\u25cf"),C.scatterLineWidth=te.line.width,C.scatterLineColor=o(te.line,1,j),C.scatterAngle=0}"textposition"in A&&(C.textOffset=function(Ce){var Pe=[0,0];if(Array.isArray(Ce))for(var Fe=0;Fe<Ce.length;Fe++)Pe[Fe]=[0,0],Ce[Fe]&&(Pe[Fe][0]=f(Ce[Fe]),Pe[Fe][1]=l(Ce[Fe]));else Pe[0]=f(Ce),Pe[1]=l(Ce);return Pe}(A.textposition),C.textColor=o(A.textfont,1,j),C.textSize=w(A.textfont.size,j,i.identity,12),C.textFont=A.textfont.family,C.textAngle=0);var ve=["x","y","z"];for(C.project=[!1,!1,!1],C.projectScale=[1,1,1],C.projectOpacity=[1,1,1],R=0;R<3;++R){var Me=A.projection[ve[R]];(C.project[R]=Me.show)&&(C.projectOpacity[R]=Me.opacity,C.projectScale[R]=Me.scale)}C.errorBounds=u(A,X,U);var ke=function(Ce){for(var Pe=[0,0,0],Fe=[[0,0,0],[0,0,0],[0,0,0]],qe=[1,1,1],rt=0;rt<3;rt++){var ze=Ce[rt];ze&&!1!==ze.copy_zstyle&&!1!==Ce[2].visible&&(ze=Ce[2]),ze&&ze.visible&&(Pe[rt]=ze.width/2,Fe[rt]=r(ze.color),qe[rt]=ze.thickness)}return{capSize:Pe,color:Fe,lineWidth:qe}}([A.error_x,A.error_y,A.error_z]);return C.errorColor=ke.color,C.errorLineWidth=ke.lineWidth,C.errorCapSize=ke.capSize,C.delaunayAxis=A.surfaceaxis,C.delaunayColor=r(A.surfacecolor),C}(this.scene,L);"mode"in F&&(this.mode=F.mode),"lineDashes"in F&&F.lineDashes in p&&(R=p[F.lineDashes]),this.color=T(F.scatterColor)||T(F.lineColor),this.dataPoints=F.position,A={gl:this.scene.glplot.gl,position:F.position,color:F.lineColor,lineWidth:F.lineWidth||1,dashes:R[0],dashScale:R[1],opacity:L.opacity,connectGaps:L.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(A):(this.linePlot=d(A),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var H=L.opacity;if(L.marker&&L.marker.opacity&&(H*=L.marker.opacity),I={gl:this.scene.glplot.gl,position:F.position,color:F.scatterColor,size:F.scatterSize,glyph:F.scatterMarker,opacity:H,orthographic:!0,lineWidth:F.scatterLineWidth,lineColor:F.scatterLineColor,project:F.project,projectScale:F.projectScale,projectOpacity:F.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(I):(this.scatterPlot=g(I),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:F.position,glyph:F.text,color:F.textColor,size:F.textSize,angle:F.textAngle,alignment:F.textOffset,font:F.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:L.opacity},this.textLabels=L.hovertext||L.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=g(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:F.position,color:F.errorColor,error:F.errorBounds,lineWidth:F.errorLineWidth,capSize:F.errorCapSize,opacity:L.opacity},this.errorBars?F.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):F.errorBounds&&(this.errorBars=_(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),F.delaunayAxis>=0){var U=function(X,Z,Y){var W,te=(Y+1)%3,z=(Y+2)%3,N=[],V=[];for(W=0;W<X.length;++W){var Q=X[W];!isNaN(Q[te])&&isFinite(Q[te])&&!isNaN(Q[z])&&isFinite(Q[z])&&(N.push([Q[te],Q[z]]),V.push(W))}var j=e(N);for(W=0;W<j.length;++W)for(var J=j[W],K=0;K<J.length;++K)J[K]=V[J[K]];return{positions:X,cells:j,meshColor:Z}}(F.position,F.delaunayColor,F.delaunayAxis);U.opacity=L.opacity,this.delaunayMesh?this.delaunayMesh.update(U):(U.gl=C,this.delaunayMesh=t(U),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},v.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function(L,A){var I=new h(L,A.uid);return I.update(A),I}},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../scatter/subtypes"),t=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),i=y("../scatter/text_defaults"),r=y("./attributes");$.exports=function(o,n,p,s){function a(x,m){return g.coerce(o,n,r,x,m)}if(x=o,m=n,b=s,k=0,T=(w=a)("x"),L=w("y"),A=w("z"),d.getComponentMethod("calendars","handleTraceDefaults")(x,m,["x","y","z"],b),T&&L&&A&&(k=Math.min(T.length,L.length,A.length),m._length=m._xlength=m._ylength=m._zlength=k),k){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),_.hasLines(n)&&(a("connectgaps"),e(o,n,p,s,a)),_.hasMarkers(n)&&t(o,n,p,s,a,{noSelect:!0}),_.hasText(n)&&(a("texttemplate"),i(o,n,s,a,{noSelect:!0}));var c=(n.line||{}).color,u=(n.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",c||u);for(var h=["x","y","z"],v=0;v<3;++v){var f="projection."+h[v];a(f+".show")&&(a(f+".opacity"),a(f+".scale"))}var l=d.getComponentMethod("errorbars","supplyDefaults");l(o,n,c||u||p,{axis:"z"}),l(o,n,c||u||p,{axis:"y",inherit:"z"}),l(o,n,c||u||p,{axis:"x",inherit:"z"})}else n.visible=!1;var x,m,w,b,k,T,L,A}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(y,$,ee){"use strict";$.exports={plot:y("./convert"),attributes:y("./attributes"),markerSymbols:y("../../constants/gl3d_markers"),supplyDefaults:y("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:y("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(y,$,ee){"use strict";var d=y("../scatter/attributes"),g=y("../../plots/attributes"),_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../components/colorscale/attributes"),i=y("../../lib/extend").extendFlat,r=d.marker,o=d.line,n=r.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:i({},d.mode,{dflt:"markers"}),text:i({},d.text,{}),texttemplate:t({editType:"plot"},{keys:["a","b","text"]}),hovertext:i({},d.hovertext,{}),line:{color:o.color,width:o.width,dash:o.dash,shape:i({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:d.connectgaps,fill:i({},d.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:d.fillcolor,marker:i({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:i({width:n.width,editType:"calc"},e("marker.line")),gradient:r.gradient,editType:"calc"},e("marker")),textfont:d.textfont,textposition:d.textposition,selected:d.selected,unselected:d.unselected,hoverinfo:i({},g.hoverinfo,{flags:["a","b","text","name"]}),hoveron:d.hoveron,hovertemplate:_()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../scatter/colorscale_calc"),_=y("../scatter/arrays_to_calcdata"),t=y("../scatter/calc_selection"),e=y("../scatter/calc").calcMarkerSize,i=y("../carpet/lookup_carpetid");$.exports=function(r,o){var n=o._carpetTrace=i(r,o);if(n&&n.visible&&"legendonly"!==n.visible){var p;o.xaxis=n.xaxis,o.yaxis=n.yaxis;var s,a,c=o._length,u=new Array(c),h=!1;for(p=0;p<c;p++)if(a=o.b[p],d(s=o.a[p])&&d(a)){var v=n.ab2xy(+s,+a,!0),f=n.isVisible(+s,+a);f||(h=!0),u[p]={x:v[0],y:v[1],a:s,b:a,vis:f}}else u[p]={x:!1,y:!1};return o._needsCull=h,u[0].carpet=n,u[0].trace=o,e(o,c),g(r,o),_(u,o),t(u,o),u}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/constants"),_=y("../scatter/subtypes"),t=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),i=y("../scatter/line_shape_defaults"),r=y("../scatter/text_defaults"),o=y("../scatter/fillcolor_defaults"),n=y("./attributes");$.exports=function(p,s,a,c){function u(x,m){return d.coerce(p,s,n,x,m)}u("carpet"),s.xaxis="x",s.yaxis="y";var h=u("a"),v=u("b"),f=Math.min(h.length,v.length);if(f){s._length=f,u("text"),u("texttemplate"),u("hovertext"),u("mode",f<g.PTS_LINESONLY?"lines+markers":"lines"),_.hasLines(s)&&(e(p,s,a,c,u),i(p,s,u),u("connectgaps")),_.hasMarkers(s)&&t(p,s,a,c,u,{gradient:!0}),_.hasText(s)&&r(p,s,c,u);var l=[];(_.hasMarkers(s)||_.hasText(s))&&(u("marker.maxdisplayed"),l.push("points")),u("fill"),"none"!==s.fill&&(o(p,s,a,u),_.hasLines(s)||i(p,s,u)),"tonext"!==s.fill&&"toself"!==s.fill||l.push("fills"),"fills"!==u("hoveron",l.join("+")||"points")&&u("hovertemplate"),d.coerceSelectionMarkerOpacity(s,u)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e){var i=t[e];return d.a=i.a,d.b=i.b,d.y=i.y,d}},{}],964:[function(y,$,ee){"use strict";$.exports=function(d,g){var _={},t=g._carpet,e=t.ab2ij([d.a,d.b]),i=Math.floor(e[0]),r=e[0]-i,o=Math.floor(e[1]),p=t.evalxy([],i,o,r,e[1]-o);return _.yLabel=p[1].toFixed(3),_}},{}],965:[function(y,$,ee){"use strict";var d=y("../scatter/hover"),g=y("../../lib").fillText;$.exports=function(_,t,e,i){var r=d(_,t,e,i);if(r&&!1!==r[0].index){var o=r[0];if(void 0===o.index){var p=_.xa._length,s=p*(1-o.y0/_.ya._length)/2,a=p-s;return o.x0=Math.max(Math.min(o.x0,a),s),o.x1=Math.max(Math.min(o.x1,a),s),r}var c=o.cd[o.index];o.a=c.a,o.b=c.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var u=o.trace,h=u._carpet,v=u._module.formatLabels(c,u);o.yLabel=v.yLabel,delete o.text;var f=[];if(!u.hovertemplate){var l=(c.hi||u.hoverinfo).split("+");-1!==l.indexOf("all")&&(l=["a","b","text"]),-1!==l.indexOf("a")&&x(h.aaxis,c.a),-1!==l.indexOf("b")&&x(h.baxis,c.b),f.push("y: "+o.yLabel),-1!==l.indexOf("text")&&g(c,u,f),o.extraText=f.join("<br>")}return r}function x(m,w){var b;b=m.labelprefix&&m.labelprefix.length>0?m.labelprefix.replace(/ = $/,""):m._hovertitle,f.push(b+": "+w.toFixed(3)+m.labelsuffix)}}},{"../../lib":503,"../scatter/hover":937}],966:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../scatter/select"),eventData:y("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:y("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(y,$,ee){"use strict";var d=y("../scatter/plot"),g=y("../../plots/cartesian/axes"),_=y("../../components/drawing");$.exports=function(t,e,i,r){var o,p,s=i[0][0].carpet,a={xaxis:g.getFromId(t,s.xaxis||"x"),yaxis:g.getFromId(t,s.yaxis||"y"),plot:e.plot};for(d(t,a,i,r),o=0;o<i.length;o++)p=r.selectAll("g.trace"+i[o][0].trace.uid+" .js-line"),_.setClipUrl(p,i[o][0].carpet._clipPathId,t)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../scatter/attributes"),t=y("../../plots/attributes"),e=y("../../components/colorscale/attributes"),i=y("../../components/drawing/attributes").dash,r=y("../../lib/extend").extendFlat,o=y("../../plot_api/edit_types").overrideAll,n=_.marker,p=_.line,s=n.line;$.exports=o({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:r({},_.mode,{dflt:"markers"}),text:r({},_.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:r({},_.hovertext,{}),textfont:_.textfont,textposition:_.textposition,line:{color:p.color,width:p.width,dash:i},connectgaps:_.connectgaps,marker:r({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:r({width:s.width},e("marker.line")),gradient:n.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:_.fillcolor,selected:_.selected,unselected:_.unselected,hoverinfo:r({},t.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:d()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../constants/numerical").BADNUM,_=y("../scatter/colorscale_calc"),t=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection"),i=y("../../lib")._;function r(o){return o&&"string"==typeof o}$.exports=function(o,n){var p,s=Array.isArray(n.locations),a=s?n.locations.length:n._length,c=new Array(a);p=n.geojson?function(x){return r(x)||d(x)}:r;for(var u=0;u<a;u++){var h=c[u]={};if(s){var v=n.locations[u];h.loc=p(v)?v:null}else{var f=n.lon[u],l=n.lat[u];h.lonlat=d(f)&&d(l)?[+f,+l]:[g,g]}}return t(c,n),_(o,n),e(c,n),a&&(c[0].t={labels:{lat:i(o,"lat:")+" ",lon:i(o,"lon:")+" "}}),c}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/subtypes"),_=y("../scatter/marker_defaults"),t=y("../scatter/line_defaults"),e=y("../scatter/text_defaults"),i=y("../scatter/fillcolor_defaults"),r=y("./attributes");$.exports=function(o,n,p,s){function a(x,m){return d.coerce(o,n,r,x,m)}var c,u=a("locations");if(u&&u.length){var h,v=a("geojson");("string"==typeof v&&""!==v||d.isPlainObject(v))&&(h="geojson-id"),"geojson-id"===a("locationmode",h)&&a("featureidkey"),c=u.length}else{var f=a("lon")||[],l=a("lat")||[];c=Math.min(f.length,l.length)}c?(n._length=c,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),g.hasLines(n)&&(t(o,n,p,s,a),a("connectgaps")),g.hasMarkers(n)&&_(o,n,p,s,a,{gradient:!0}),g.hasText(n)&&(a("texttemplate"),e(o,n,s,a)),a("fill"),"none"!==n.fill&&i(o,n,p,a),d.coerceSelectionMarkerOpacity(n,a)):n.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e){d.lon=g.lon,d.lat=g.lat,d.location=g.loc?g.loc:null;var i=t[e];return i.fIn&&i.fIn.properties&&(d.properties=i.fIn.properties),d}},{}],972:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes");$.exports=function(g,_,t){var e={},i=t[_.geo]._subplot.mockAxis,r=g.lonlat;return e.lonLabel=d.tickText(i,i.c2l(r[0]),!0).text,e.latLabel=d.tickText(i,i.c2l(r[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],973:[function(y,$,ee){"use strict";var d=y("../../components/fx"),g=y("../../constants/numerical").BADNUM,_=y("../scatter/get_trace_color"),t=y("../../lib").fillText,e=y("./attributes");$.exports=function(i,r,o){var n=i.cd,p=n[0].trace,s=i.xa,a=i.ya,c=i.subplot,u=c.projection.isLonLatOverEdges,h=c.project;if(d.getClosest(n,function(b){var k=b.lonlat;if(k[0]===g||u(k))return 1/0;var T=h(k),L=h([r,o]),A=Math.abs(T[0]-L[0]),I=Math.abs(T[1]-L[1]),D=Math.max(3,b.mrc||0);return Math.max(Math.sqrt(A*A+I*I)-D,1-3/D)},i),!1!==i.index){var v=n[i.index],f=v.lonlat,l=[s.c2p(f),a.c2p(f)],x=v.mrc||1;i.x0=l[0]-x,i.x1=l[0]+x,i.y0=l[1]-x,i.y1=l[1]+x,i.loc=v.loc,i.lon=f[0],i.lat=f[1];var m={};m[p.geo]={_subplot:c};var w=p._module.formatLabels(v,p,m);return i.lonLabel=w.lonLabel,i.latLabel=w.latLabel,i.color=_(p,v),i.extraText=function(b,k,T,L){if(!b.hovertemplate){var A=k.hi||b.hoverinfo,I="all"===A?e.hoverinfo.flags:A.split("+"),D=-1!==I.indexOf("location")&&Array.isArray(b.locations),S=-1!==I.indexOf("lon"),C=-1!==I.indexOf("lat"),R=-1!==I.indexOf("text"),F=[];return D?F.push(k.loc):S&&C?F.push("("+H(T.latLabel)+", "+H(T.lonLabel)+")"):S?F.push(L.lon+H(T.lonLabel)):C&&F.push(L.lat+H(T.latLabel)),R&&t(k,b,F),F.join("<br>")}function H(U){return U+"\xb0"}}(p,v,i,n[0].t.labels),i.hovertemplate=p.hovertemplate,[i]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),calcGeoJSON:y("./plot").calcGeoJSON,plot:y("./plot").plot,style:y("./style"),styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:y("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../lib/topojson_utils").getTopojsonFeatures,t=y("../../lib/geojson_utils"),e=y("../../lib/geo_location_utils"),i=y("../../plots/cartesian/autorange").findExtremes,r=y("../../constants/numerical").BADNUM,o=y("../scatter/calc").calcMarkerSize,n=y("../scatter/subtypes"),p=y("./style");$.exports={calcGeoJSON:function(s,a){var c,u,h=s[0].trace,v=a[h.geo],f=v._subplot,l=h._length;if(Array.isArray(h.locations)){var x=h.locationmode,m="geojson-id"===x?e.extractTraceFeature(s):_(h,f.topojson);for(c=0;c<l;c++){u=s[c];var w="geojson-id"===x?u.fOut:e.locationToFeature(x,u.loc,m);u.lonlat=w?w.properties.ct:[r,r]}}var b,k,T={padded:!0};if("geojson"===v.fitbounds&&"geojson-id"===h.locationmode){var L=e.computeBbox(e.getTraceGeojson(h));b=[L[0],L[2]],k=[L[1],L[3]]}else{for(b=new Array(l),k=new Array(l),c=0;c<l;c++)b[c]=(u=s[c]).lonlat[0],k[c]=u.lonlat[1];T.ppad=o(h,l)}h._extremes.lon=i(v.lonaxis._ax,b,T),h._extremes.lat=i(v.lataxis._ax,k,T)},plot:function(s,a,c){var u=a.layers.frontplot.select(".scatterlayer"),h=g.makeTraceGroups(u,c,"trace scattergeo");function v(f,l){f.lonlat[0]===r&&d.select(l).remove()}h.selectAll("*").remove(),h.each(function(f){var l=d.select(this),x=f[0].trace;if(n.hasLines(x)||"none"!==x.fill){var m=t.calcTraceToLineCoords(f),w="none"!==x.fill?t.makePolygon(m):t.makeLine(m);l.selectAll("path.js-line").data([{geojson:w,trace:x}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(x)&&l.selectAll("path.point").data(g.identity).enter().append("path").classed("point",!0).each(function(b){v(b,this)}),n.hasText(x)&&l.selectAll("g").data(g.identity).enter().append("g").append("text").each(function(b){v(b,this)}),p(s,f)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(y,$,ee){"use strict";var d=y("../scatter/subtypes"),g=y("../../constants/numerical").BADNUM;$.exports=function(_,t){var e,i,r,o,n,p=_.cd,s=_.xaxis,a=_.yaxis,c=[],u=p[0].trace;if(!d.hasMarkers(u)&&!d.hasText(u))return[];if(!1===t)for(n=0;n<p.length;n++)p[n].selected=0;else for(n=0;n<p.length;n++)(i=(e=p[n]).lonlat)[0]!==g&&(r=s.c2p(i),o=a.c2p(i),t.contains([r,o],null,n,_)?(c.push({pointNumber:n,lon:i[0],lat:i[1]}),e.selected=1):e.selected=0);return c}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("../../components/color"),t=y("../scatter/style"),e=t.stylePoints,i=t.styleText;$.exports=function(r,o){var n,p,s,a;o&&(n=r,s=(p=o)[0].trace,(a=p[0].node3).style("opacity",p[0].trace.opacity),e(a,s,n),i(a,s,n),a.selectAll("path.js-line").style("fill","none").each(function(c){var u=d.select(this),h=c.trace,v=h.line||{};u.call(_.stroke,v.color).call(g.dashLine,v.dash||"",v.width||0),"none"!==h.fill&&u.call(_.fill,h.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(y,$,ee){"use strict";var d=y("../../plots/attributes"),g=y("../scatter/attributes"),_=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=y("../../components/colorscale/attributes"),e=y("../../lib/sort_object_keys"),i=y("../../lib/extend").extendFlat,r=y("../../plot_api/edit_types").overrideAll,o=y("./constants").DASHES,n=g.line,p=g.marker,s=p.line,a=$.exports=r({x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),text:g.text,hovertext:g.hovertext,textposition:g.textposition,textfont:g.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(o),dflt:"solid"}},marker:i({},t("marker"),{symbol:p.symbol,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:p.opacity,colorbar:p.colorbar,line:i({},t("marker.line"),{width:s.width})}),connectgaps:g.connectgaps,fill:i({},g.fill,{dflt:"none"}),fillcolor:g.fillcolor,selected:{marker:g.selected.marker,textfont:g.selected.textfont},unselected:{marker:g.unselected.marker,textfont:g.unselected.textfont},opacity:d.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=g.hovertemplate,a.texttemplate=g.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(y,$,ee){"use strict";var d=y("@plotly/point-cluster"),g=y("../../lib"),_=y("../../plots/cartesian/axis_ids"),t=y("../../plots/cartesian/autorange").findExtremes,e=y("../../plots/cartesian/align_period"),i=y("../scatter/calc"),r=i.calcMarkerSize,o=i.calcAxisExpansion,n=i.setFirstScatter,p=y("../scatter/colorscale_calc"),s=y("./convert"),a=y("./scene_update"),c=y("../../constants/numerical").BADNUM,u=y("./constants").TOO_MANY_POINTS;function h(v,f,l){var x=v._extremes[f._id],m=t(f,l._bnds,{padded:!0});x.min=x.min.concat(m.min),x.max=x.max.concat(m.max)}$.exports=function(v,f){var l,x=v._fullLayout,m=_.getFromId(v,f.xaxis),w=_.getFromId(v,f.yaxis),b=x._plots[f.xaxis+f.yaxis],k=f._length,T=k>=u,L=2*k,A={},I=m.makeCalcdata(f,"x"),D=w.makeCalcdata(f,"y"),S=e(f,m,"x",I),C=e(f,w,"y",D),R=S.vals,F=C.vals;f._x=R,f._y=F,f.xperiodalignment&&(f._origX=I,f._xStarts=S.starts,f._xEnds=S.ends),f.yperiodalignment&&(f._origY=D,f._yStarts=C.starts,f._yEnds=C.ends);var H=new Array(L),U=new Array(k);for(l=0;l<k;l++)H[2*l]=R[l]===c?NaN:R[l],H[2*l+1]=F[l]===c?NaN:F[l],U[l]=l;if("log"===m.type)for(l=0;l<L;l+=2)H[l]=m.c2l(H[l]);if("log"===w.type)for(l=1;l<L;l+=2)H[l]=w.c2l(H[l]);T&&"log"!==m.type&&"log"!==w.type?A.tree=d(H):A.ids=U,p(v,f);var X,Z=function(W,te,z,N,V,Q){var j=s.style(W,z);if(j.marker&&(j.marker.positions=N),j.line&&N.length>1&&g.extendFlat(j.line,s.linePositions(W,z,N)),j.errorX||j.errorY){var J=s.errorBarPositions(W,z,N,V,Q);j.errorX&&g.extendFlat(j.errorX,J.x),j.errorY&&g.extendFlat(j.errorY,J.y)}return j.text&&(g.extendFlat(j.text,{positions:N},s.textPosition(W,z,j.text,j.marker)),g.extendFlat(j.textSel,{positions:N},s.textPosition(W,z,j.text,j.markerSel)),g.extendFlat(j.textUnsel,{positions:N},s.textPosition(W,z,j.text,j.markerUnsel))),j}(v,0,f,H,R,F),Y=a(v,b);return n(x,f),T?Z.marker&&(X=Z.marker.sizeAvg||Math.max(Z.marker.size,3)):X=r(f,k),o(v,f,m,w,R,F,X),Z.errorX&&h(f,m,Z.errorX),Z.errorY&&h(f,w,Z.errorY),Z.fill&&!Y.fill2d&&(Y.fill2d=!0),Z.marker&&!Y.scatter2d&&(Y.scatter2d=!0),Z.line&&!Y.line2d&&(Y.line2d=!0),!Z.errorX&&!Z.errorY||Y.error2d||(Y.error2d=!0),Z.text&&!Y.glText&&(Y.glText=!0),Z.marker&&(Z.marker.snap=k),Y.lineOptions.push(Z.line),Y.errorXOptions.push(Z.errorX),Y.errorYOptions.push(Z.errorY),Y.fillOptions.push(Z.fill),Y.markerOptions.push(Z.marker),Y.markerSelectedOptions.push(Z.markerSel),Y.markerUnselectedOptions.push(Z.markerUnsel),Y.textOptions.push(Z.text),Y.textSelectedOptions.push(Z.textSel),Y.textUnselectedOptions.push(Z.textUnsel),Y.selectBatch.push([]),Y.unselectBatch.push([]),A._scene=Y,A.index=Y.count,A.x=R,A.y=F,A.positions=H,Y.count++,[{x:!1,y:!1,t:A,trace:f}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(y,$,ee){"use strict";$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("svg-path-sdf"),_=y("color-normalize"),t=y("../../registry"),e=y("../../lib"),i=y("../../components/drawing"),r=y("../../plots/cartesian/axis_ids"),o=y("../../lib/gl_format_color").formatColor,n=y("../scatter/subtypes"),p=y("../scatter/make_bubble_size_func"),s=y("./helpers"),a=y("./constants"),c=y("../../constants/interactions").DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=y("../../components/fx/helpers").appendArrayPointValue;function v(I,D){var S,C=I._fullLayout,R=D._length,F=D.textfont,H=D.textposition,U=Array.isArray(H)?H:[H],X=F.color,Z=F.size,Y=F.family,W={},te=I._context.plotGlPixelRatio,z=D.texttemplate;if(z){W.text=[];var N=C._d3locale,V=Array.isArray(z),Q=V?Math.min(z.length,R):R,j=V?function(de){return z[de]}:function(){return z};for(S=0;S<Q;S++){var J={i:S},K=D._module.formatLabels(J,D,C),re={};h(re,D,S);var ie=D._meta||{};W.text.push(e.texttemplateString(j(S),K,N,re,J,ie))}}else W.text=Array.isArray(D.text)&&D.text.length<R?D.text.slice():D.text;if(Array.isArray(W.text))for(S=W.text.length;S<R;S++)W.text[S]="";for(W.opacity=D.opacity,W.font={},W.align=[],W.baseline=[],S=0;S<U.length;S++){var ce=U[S].split(/\s+/);switch(ce[1]){case"left":W.align.push("right");break;case"right":W.align.push("left");break;default:W.align.push(ce[1])}switch(ce[0]){case"top":W.baseline.push("bottom");break;case"bottom":W.baseline.push("top");break;default:W.baseline.push(ce[0])}}if(Array.isArray(X))for(W.color=new Array(R),S=0;S<R;S++)W.color[S]=X[S];else W.color=X;if(e.isArrayOrTypedArray(Z)||Array.isArray(Y))for(W.font=new Array(R),S=0;S<R;S++){var se=W.font[S]={};se.size=(e.isTypedArray(Z)?Z[S]:Array.isArray(Z)?d(Z[S])?Z[S]:0:Z)*te,se.family=Array.isArray(Y)?Y[S]:Y}else W.font={size:Z*te,family:Y};return W}function f(I){var D,S,C=I._length,R=I.marker,F={},H=e.isArrayOrTypedArray(R.symbol),U=e.isArrayOrTypedArray(R.color),X=e.isArrayOrTypedArray(R.line.color),Z=e.isArrayOrTypedArray(R.opacity),Y=e.isArrayOrTypedArray(R.size),W=e.isArrayOrTypedArray(R.line.width);if(H||(S=s.isOpenSymbol(R.symbol)),H||U||X||Z){F.colors=new Array(C),F.borderColors=new Array(C);var te=o(R,R.opacity,C),z=o(R.line,R.opacity,C);if(!Array.isArray(z[0])){var N=z;for(z=Array(C),D=0;D<C;D++)z[D]=N}if(!Array.isArray(te[0])){var V=te;for(te=Array(C),D=0;D<C;D++)te[D]=V}for(F.colors=te,F.borderColors=z,D=0;D<C;D++)H&&(S=s.isOpenSymbol(R.symbol[D])),S&&(z[D]=te[D].slice(),te[D]=te[D].slice(),te[D][3]=0);F.opacity=I.opacity}else S?(F.color=_(R.color,"uint8"),F.color[3]=0,F.borderColor=_(R.color,"uint8")):(F.color=_(R.color,"uint8"),F.borderColor=_(R.line.color,"uint8")),F.opacity=I.opacity*R.opacity;if(H)for(F.markers=new Array(C),D=0;D<C;D++)F.markers[D]=A(R.symbol[D]);else F.marker=A(R.symbol);var j,J=p(I,1);if(Y||W){var K,re=F.sizes=new Array(C),ie=F.borderSizes=new Array(C),ce=0;if(Y){for(D=0;D<C;D++)re[D]=J(R.size[D]),ce+=re[D];K=ce/C}else for(j=J(R.size),D=0;D<C;D++)re[D]=j;if(W)for(D=0;D<C;D++)ie[D]=R.line.width[D];else for(j=R.line.width,D=0;D<C;D++)ie[D]=j;F.sizeAvg=K}else F.size=J(R&&R.size||10),F.borderSizes=J(R.line.width);return F}function l(I,D){var C={};return D&&(D.marker&&D.marker.symbol?C=f(e.extendFlat({},I.marker,D.marker)):D.marker&&(D.marker.size&&(C.size=D.marker.size),D.marker.color&&(C.colors=D.marker.color),void 0!==D.marker.opacity&&(C.opacity=D.marker.opacity))),C}function x(I,D,S){var C={};if(!S)return C;if(S.textfont){var R={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};S.textfont&&e.extendFlat(R.textfont,S.textfont),C=v(I,R)}return C}function m(I,D,S){var C={capSize:2*D.width*S,lineWidth:D.thickness*S,color:D.color};return D.copy_ystyle&&(C=I.error_y),C}var w=a.SYMBOL_SDF_SIZE,b=a.SYMBOL_SIZE,k=a.SYMBOL_STROKE,T={},L=i.symbolFuncs[0](.05*b);function A(I){if("circle"===I)return null;var D,S,C=i.symbolNumber(I),R=i.symbolFuncs[C%100],F=!!i.symbolNoDot[C%100],H=!!i.symbolNoFill[C%100],U=s.isDotSymbol(I);return T[I]?T[I]:(D=U&&!F?R(1.1*b)+L:R(b),S=g(D,{w,h:w,viewBox:[-b,-b,b,b],stroke:H?k:-k}),T[I]=S,S||null)}$.exports={style:function(I,D){var S,C={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},R=I._context.plotGlPixelRatio;if(!0!==D.visible)return C;if(n.hasText(D)&&(C.text=v(I,D),C.textSel=x(I,D,D.selected),C.textUnsel=x(I,D,D.unselected)),n.hasMarkers(D)&&(C.marker=f(D),C.markerSel=l(D,D.selected),C.markerUnsel=l(D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var F=D.marker.opacity;for(C.markerUnsel.opacity=new Array(F.length),S=0;S<F.length;S++)C.markerUnsel.opacity[S]=c*F[S]}if(n.hasLines(D)){C.line={overlay:!0,thickness:D.line.width*R,color:D.line.color,opacity:D.opacity};var H=(a.DASHES[D.line.dash]||[1]).slice();for(S=0;S<H.length;++S)H[S]*=D.line.width*R;C.line.dashes=H}return D.error_x&&D.error_x.visible&&(C.errorX=m(D,D.error_x,R)),D.error_y&&D.error_y.visible&&(C.errorY=m(D,D.error_y,R)),D.fill&&"none"!==D.fill&&(C.fill={closed:!0,fill:D.fillcolor,thickness:0}),C},markerStyle:f,markerSelection:l,linePositions:function(I,D,S){var C,R,F=S.length,H=F/2;if(n.hasLines(D)&&H)if("hv"===D.line.shape){for(C=[],R=0;R<H-1;R++)isNaN(S[2*R])||isNaN(S[2*R+1])?C.push(NaN,NaN,NaN,NaN):(C.push(S[2*R],S[2*R+1]),isNaN(S[2*R+2])||isNaN(S[2*R+3])?C.push(NaN,NaN):C.push(S[2*R+2],S[2*R+1]));C.push(S[F-2],S[F-1])}else if("hvh"===D.line.shape){for(C=[],R=0;R<H-1;R++)if(isNaN(S[2*R])||isNaN(S[2*R+1])||isNaN(S[2*R+2])||isNaN(S[2*R+3]))isNaN(S[2*R])||isNaN(S[2*R+1])?C.push(NaN,NaN):C.push(S[2*R],S[2*R+1]),C.push(NaN,NaN);else{var U=(S[2*R]+S[2*R+2])/2;C.push(S[2*R],S[2*R+1],U,S[2*R+1],U,S[2*R+3])}C.push(S[F-2],S[F-1])}else if("vhv"===D.line.shape){for(C=[],R=0;R<H-1;R++)if(isNaN(S[2*R])||isNaN(S[2*R+1])||isNaN(S[2*R+2])||isNaN(S[2*R+3]))isNaN(S[2*R])||isNaN(S[2*R+1])?C.push(NaN,NaN):C.push(S[2*R],S[2*R+1]),C.push(NaN,NaN);else{var X=(S[2*R+1]+S[2*R+3])/2;C.push(S[2*R],S[2*R+1],S[2*R],X,S[2*R+2],X)}C.push(S[F-2],S[F-1])}else if("vh"===D.line.shape){for(C=[],R=0;R<H-1;R++)isNaN(S[2*R])||isNaN(S[2*R+1])?C.push(NaN,NaN,NaN,NaN):(C.push(S[2*R],S[2*R+1]),isNaN(S[2*R+2])||isNaN(S[2*R+3])?C.push(NaN,NaN):C.push(S[2*R],S[2*R+3]));C.push(S[F-2],S[F-1])}else C=S;var Z=!1;for(R=0;R<C.length;R++)if(isNaN(C[R])){Z=!0;break}var Y=Z||C.length>a.TOO_MANY_POINTS||n.hasMarkers(D)?"rect":"round";if(Z&&D.connectgaps){var W=C[0],te=C[1];for(R=0;R<C.length;R+=2)isNaN(C[R])||isNaN(C[R+1])?(C[R]=W,C[R+1]=te):(W=C[R],te=C[R+1])}return{join:Y,positions:C}},errorBarPositions:function(I,D,S,C,R){var F=t.getComponentMethod("errorbars","makeComputeError"),H=r.getFromId(I,D.xaxis),U=r.getFromId(I,D.yaxis),X=S.length/2,Z={};function Y(W,te){var z=te._id.charAt(0),N=D["error_"+z];if(N&&N.visible&&("linear"===te.type||"log"===te.type)){for(var V=F(N),Q={x:0,y:1}[z],j={x:[0,1,2,3],y:[2,3,0,1]}[z],J=new Float64Array(4*X),K=1/0,re=-1/0,ie=0,ce=0;ie<X;ie++,ce+=4){var se=W[ie];if(d(se)){var de=S[2*ie+Q],ue=V(se,ie),ge=ue[0],be=ue[1];if(d(ge)&&d(be)){var we=se+be;J[ce+j[0]]=de-te.c2l(se-ge),J[ce+j[1]]=te.c2l(we)-de,J[ce+j[2]]=0,J[ce+j[3]]=0,K=Math.min(K,se-ge),re=Math.max(re,se+be)}}}Z[z]={positions:S,errors:J,_bnds:[K,re]}}}return Y(C,H),Y(R,U),Z},textPosition:function(I,D,S,C){var R,F=D._length,H={};if(n.hasMarkers(D)){var U=S.font,X=S.align,Z=S.baseline;for(H.offset=new Array(F),R=0;R<F;R++){var Y=C.sizes?C.sizes[R]:C.size,W=Array.isArray(U)?U[R].size:U.size,te=Array.isArray(X)?X.length>1?X[R]:X[0]:X,z=Array.isArray(Z)?Z.length>1?Z[R]:Z[0]:Z,V=u[z],Q=Y?Y/.8+1:0;H.offset[R]=[u[te]*Q/W,(-V*Q-.5*V)/W]}}return H}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../registry"),_=y("./helpers"),t=y("./attributes"),e=y("../scatter/constants"),i=y("../scatter/subtypes"),r=y("../scatter/xy_defaults"),o=y("../scatter/period_defaults"),n=y("../scatter/marker_defaults"),p=y("../scatter/line_defaults"),s=y("../scatter/fillcolor_defaults"),a=y("../scatter/text_defaults");$.exports=function(c,u,h,v){function f(L,A){return d.coerce(c,u,t,L,A)}var l=!!c.marker&&_.isOpenSymbol(c.marker.symbol),x=i.isBubble(c),m=r(c,u,v,f);if(m){o(c,u,v,f),f("xhoverformat"),f("yhoverformat");var w=m<e.PTS_LINESONLY?"lines+markers":"lines";f("text"),f("hovertext"),f("hovertemplate"),f("mode",w),i.hasLines(u)&&(f("connectgaps"),p(c,u,h,v,f),f("line.shape")),i.hasMarkers(u)&&(n(c,u,h,v,f),f("marker.line.width",l||x?1:0)),i.hasText(u)&&(f("texttemplate"),a(c,u,v,f));var b=(u.line||{}).color,k=(u.marker||{}).color;f("fill"),"none"!==u.fill&&s(c,u,h,f);var T=g.getComponentMethod("errorbars","supplyDefaults");T(c,u,b||k||h,{axis:"y"}),T(c,u,b||k||h,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(u,f)}else u.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color"),_=y("../../constants/interactions").DESELECTDIM;$.exports={styleTextSelection:function(t){var e,i,r=t[0],o=r.trace,n=r.t,p=n._scene,s=n.index,a=p.selectBatch[s],c=p.unselectBatch[s],u=p.textOptions[s],h=p.textSelectedOptions[s]||{},v=p.textUnselectedOptions[s]||{},f=d.extendFlat({},u);if(a.length||c.length){var l=h.color,x=v.color,m=u.color,w=Array.isArray(m);for(f.color=new Array(o._length),e=0;e<a.length;e++)f.color[i=a[e]]=l||(w?m[i]:m);for(e=0;e<c.length;e++){i=c[e];var b=w?m[i]:m;f.color[i]=x||(l?b:g.addOpacity(b,_))}}p.glText[s].update(f)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(y,$,ee){"use strict";var d=y("../scatter/format_labels");$.exports=function(g,_,t){var e=g.i;return"x"in g||(g.x=_._x[e]),"y"in g||(g.y=_._y[e]),d(g,_,t)}},{"../scatter/format_labels":935}],985:[function(y,$,ee){"use strict";var d=y("./constants");ee.isOpenSymbol=function(g){return"string"==typeof g?d.OPEN_RE.test(g):g%200>100},ee.isDotSymbol=function(g){return"string"==typeof g?d.DOT_RE.test(g):g>200}},{"./constants":980}],986:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../scatter/get_trace_color");function t(e,i,r,o){var n=e.xa,p=e.ya,s=e.distance,a=e.dxy,c=e.index,u={pointNumber:c,x:i[c],y:r[c]};u.tx=Array.isArray(o.text)?o.text[c]:o.text,u.htx=Array.isArray(o.hovertext)?o.hovertext[c]:o.hovertext,u.data=Array.isArray(o.customdata)?o.customdata[c]:o.customdata,u.tp=Array.isArray(o.textposition)?o.textposition[c]:o.textposition;var h=o.textfont;h&&(u.ts=g.isArrayOrTypedArray(h.size)?h.size[c]:h.size,u.tc=Array.isArray(h.color)?h.color[c]:h.color,u.tf=Array.isArray(h.family)?h.family[c]:h.family);var v=o.marker;v&&(u.ms=g.isArrayOrTypedArray(v.size)?v.size[c]:v.size,u.mo=g.isArrayOrTypedArray(v.opacity)?v.opacity[c]:v.opacity,u.mx=g.isArrayOrTypedArray(v.symbol)?v.symbol[c]:v.symbol,u.mc=g.isArrayOrTypedArray(v.color)?v.color[c]:v.color);var f=v&&v.line;f&&(u.mlc=Array.isArray(f.color)?f.color[c]:f.color,u.mlw=g.isArrayOrTypedArray(f.width)?f.width[c]:f.width);var l=v&&v.gradient;l&&"none"!==l.type&&(u.mgt=Array.isArray(l.type)?l.type[c]:l.type,u.mgc=Array.isArray(l.color)?l.color[c]:l.color);var x=n.c2p(u.x,!0),m=p.c2p(u.y,!0),w=u.mrc||1,b=o.hoverlabel;b&&(u.hbg=Array.isArray(b.bgcolor)?b.bgcolor[c]:b.bgcolor,u.hbc=Array.isArray(b.bordercolor)?b.bordercolor[c]:b.bordercolor,u.hts=g.isArrayOrTypedArray(b.font.size)?b.font.size[c]:b.font.size,u.htc=Array.isArray(b.font.color)?b.font.color[c]:b.font.color,u.htf=Array.isArray(b.font.family)?b.font.family[c]:b.font.family,u.hnl=g.isArrayOrTypedArray(b.namelength)?b.namelength[c]:b.namelength);var k=o.hoverinfo;k&&(u.hi=Array.isArray(k)?k[c]:k);var T=o.hovertemplate;T&&(u.ht=Array.isArray(T)?T[c]:T);var L={};L[e.index]=u;var A=o._origX,I=o._origY,D=g.extendFlat({},e,{color:_(o,u),x0:x-w,x1:x+w,xLabelVal:A?A[c]:u.x,y0:m-w,y1:m+w,yLabelVal:I?I[c]:u.y,cd:L,distance:s,spikeDistance:a,hovertemplate:u.ht});return u.htx?D.text=u.htx:u.tx?D.text=u.tx:o.text&&(D.text=o.text),g.fillText(u,o,D),d.getComponentMethod("errorbars","hoverInfo")(u,o,D),D}$.exports={hoverPoints:function(e,i,r,o){var n,p,s,a,c,u,h,v,f,l,x=e.cd,m=x[0].t,w=x[0].trace,b=e.xa,k=e.ya,T=m.x,L=m.y,A=b.c2p(i),I=k.c2p(r),D=e.distance;if(m.tree){var S=b.p2c(A-D),C=b.p2c(A+D),R=k.p2c(I-D),F=k.p2c(I+D);n="x"===o?m.tree.range(Math.min(S,C),Math.min(k._rl[0],k._rl[1]),Math.max(S,C),Math.max(k._rl[0],k._rl[1])):m.tree.range(Math.min(S,C),Math.min(R,F),Math.max(S,C),Math.max(R,F))}else n=m.ids;var H=D;if("x"===o){var U=!!w.xperiodalignment,X=!!w.yperiodalignment;for(u=0;u<n.length;u++){if(a=T[p=n[u]],h=Math.abs(b.c2p(a)-A),U){var Z=b.c2p(w._xStarts[p]),Y=b.c2p(w._xEnds[p]);h=A>=Math.min(Z,Y)&&A<=Math.max(Z,Y)?0:1/0}if(h<H){if(H=h,v=k.c2p(c=L[p])-I,X){var W=k.c2p(w._yStarts[p]),te=k.c2p(w._yEnds[p]);v=I>=Math.min(W,te)&&I<=Math.max(W,te)?0:1/0}l=Math.sqrt(h*h+v*v),s=n[u]}}}else for(u=n.length-1;u>-1;u--)a=T[p=n[u]],c=L[p],h=b.c2p(a)-A,v=k.c2p(c)-I,(f=Math.sqrt(h*h+v*v))<H&&(H=l=f,s=p);return e.index=s,e.distance=H,e.dxy=l,void 0===s?[e]:[t(e,T,L,w)]},calcHover:t}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(y,$,ee){"use strict";var d=y("./hover");$.exports={moduleType:"trace",name:"scattergl",basePlotModule:y("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../scatter/cross_trace_defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),hoverPoints:d.hoverPoints,selectPoints:y("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(y,$,ee){"use strict";var d=y("regl-scatter2d"),g=y("regl-line2d"),_=y("regl-error2d"),t=y("gl-text"),e=y("../../lib"),i=y("../../components/dragelement/helpers").selectMode,r=y("../../lib/prepare_regl"),o=y("../scatter/subtypes"),n=y("../scatter/link_traces"),p=y("./edit_style").styleTextSelection;function s(a,c,u,h){var v=a._size,k=v.w*h,T=v.h*h;return[v.l*h+c.domain[0]*k,v.b*h+u.domain[0]*T,a.width*h-v.r*h-(1-c.domain[1])*k,a.height*h-v.t*h-(1-u.domain[1])*T]}$.exports=function(a,c,u){if(u.length){var h,v,f=a._fullLayout,l=c._scene,x=c.xaxis,m=c.yaxis;if(l)if(r(a,["ANGLE_instanced_arrays","OES_element_index_uint"])){var w=l.count,b=f._glcanvas.data()[0].regl;if(n(a,c,u),l.dirty){if(!0===l.error2d&&(l.error2d=_(b)),!0===l.line2d&&(l.line2d=g(b)),!0===l.scatter2d&&(l.scatter2d=d(b)),!0===l.fill2d&&(l.fill2d=g(b)),!0===l.glText)for(l.glText=new Array(w),h=0;h<w;h++)l.glText[h]=new t(b);if(l.glText){if(w>l.glText.length){var k=w-l.glText.length;for(h=0;h<k;h++)l.glText.push(new t(b))}else w<l.glText.length&&l.glText.splice(w,l.glText.length-w).forEach(function(j){j.destroy()});for(h=0;h<w;h++)l.glText[h].update(l.textOptions[h])}if(l.line2d&&(l.line2d.update(l.lineOptions),l.lineOptions=l.lineOptions.map(function(j){if(j&&j.positions){for(var J=j.positions,K=0;K<J.length&&(isNaN(J[K])||isNaN(J[K+1]));)K+=2;for(var re=J.length-2;re>K&&(isNaN(J[re])||isNaN(J[re+1]));)re-=2;j.positions=J.slice(K,re+2)}return j}),l.line2d.update(l.lineOptions)),l.error2d){var L=(l.errorXOptions||[]).concat(l.errorYOptions||[]);l.error2d.update(L)}l.scatter2d&&l.scatter2d.update(l.markerOptions),l.fillOrder=e.repeat(null,w),l.fill2d&&(l.fillOptions=l.fillOptions.map(function(j,J){var K=u[J];if(j&&K&&K[0]&&K[0].trace){var re,ie,ce=K[0],se=ce.trace,de=ce.t,ue=l.lineOptions[J],ge=[];se._ownfill&&ge.push(J),se._nexttrace&&ge.push(J+1),ge.length&&(l.fillOrder[J]=ge);var be,Te,we=[],Le=ue&&ue.positions||de.positions;if("tozeroy"===se.fill){for(be=0;be<Le.length&&isNaN(Le[be+1]);)be+=2;for(Te=Le.length-2;Te>be&&isNaN(Le[Te+1]);)Te-=2;0!==Le[be+1]&&(we=[Le[be],0]),we=we.concat(Le.slice(be,Te+2)),0!==Le[Te+1]&&(we=we.concat([Le[Te],0]))}else if("tozerox"===se.fill){for(be=0;be<Le.length&&isNaN(Le[be]);)be+=2;for(Te=Le.length-2;Te>be&&isNaN(Le[Te]);)Te-=2;0!==Le[be]&&(we=[0,Le[be+1]]),we=we.concat(Le.slice(be,Te+2)),0!==Le[Te]&&(we=we.concat([0,Le[Te+1]]))}else if("toself"===se.fill||"tonext"===se.fill){for(we=[],re=0,j.splitNull=!0,ie=0;ie<Le.length;ie+=2)(isNaN(Le[ie])||isNaN(Le[ie+1]))&&((we=we.concat(Le.slice(re,ie))).push(Le[re],Le[re+1]),we.push(null,null),re=ie+2);we=we.concat(Le.slice(re)),re&&we.push(Le[re],Le[re+1])}else{var fe=se._nexttrace;if(fe){var ve=l.lineOptions[J+1];if(ve){var Me=ve.positions;if("tonexty"===se.fill){for(we=Le.slice(),J=Math.floor(Me.length/2);J--;){var ke=Me[2*J],Ce=Me[2*J+1];isNaN(ke)||isNaN(Ce)||we.push(ke,Ce)}j.fill=fe.fillcolor}}}}if(se._prevtrace&&"tonext"===se._prevtrace.fill){var Pe=l.lineOptions[J-1].positions,Fe=we.length/2,qe=[re=Fe];for(ie=0;ie<Pe.length;ie+=2)(isNaN(Pe[ie])||isNaN(Pe[ie+1]))&&(qe.push(ie/2+Fe+1),re=ie+2);we=we.concat(Pe),j.hole=qe}return j.fillmode=se.fill,j.opacity=se.opacity,j.positions=we,j}}),l.fill2d.update(l.fillOptions))}var I=i(f.dragmode),D=f.clickmode.indexOf("select")>-1;for(h=0;h<w;h++){var S=u[h][0],C=S.trace,R=S.t,F=R.index,H=C._length,U=R.x,X=R.y;if(C.selectedpoints||I||D){if(I||(I=!0),C.selectedpoints){var Z=l.selectBatch[F]=e.selIndices2selPoints(C),Y={};for(v=0;v<Z.length;v++)Y[Z[v]]=1;var W=[];for(v=0;v<H;v++)Y[v]||W.push(v);l.unselectBatch[F]=W}var te=R.xpx=new Array(H),z=R.ypx=new Array(H);for(v=0;v<H;v++)te[v]=x.c2p(U[v]),z[v]=m.c2p(X[v])}else R.xpx=R.ypx=null}if(I){if(l.select2d||(l.select2d=d(f._glcanvas.data()[1].regl)),l.scatter2d){var N=new Array(w);for(h=0;h<w;h++)N[h]=l.selectBatch[h].length||l.unselectBatch[h].length?l.markerUnselectedOptions[h]:{};l.scatter2d.update(N)}l.select2d&&(l.select2d.update(l.markerOptions),l.select2d.update(l.markerSelectedOptions)),l.glText&&u.forEach(function(j){o.hasText(((j||[])[0]||{}).trace||{})&&p(j)})}else l.scatter2d&&l.scatter2d.update(l.markerOptions);var V={viewport:s(f,x,m,a._context.plotGlPixelRatio),range:[(x._rl||x.range)[0],(m._rl||m.range)[0],(x._rl||x.range)[1],(m._rl||m.range)[1]]},Q=e.repeat(V,l.count);l.fill2d&&l.fill2d.update(Q),l.line2d&&l.line2d.update(Q),l.error2d&&l.error2d.update(Q.concat(Q)),l.scatter2d&&l.scatter2d.update(Q),l.select2d&&l.select2d.update(Q),l.glText&&l.glText.forEach(function(j){j.update(V)})}else l.init()}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){var t=_._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return _._scene||((t=_._scene={}).init=function(){d.extendFlat(t,i,e)},t.init(),t.update=function(r){var o=d.repeat(r,t.count);if(t.fill2d&&t.fill2d.update(o),t.scatter2d&&t.scatter2d.update(o),t.line2d&&t.line2d.update(o),t.error2d&&t.error2d.update(o.concat(o)),t.select2d&&t.select2d.update(o),t.glText)for(var n=0;n<t.count;n++)t.glText[n].update(r)},t.draw=function(){for(var r=t.count,o=t.fill2d,n=t.error2d,p=t.line2d,s=t.scatter2d,a=t.glText,c=t.select2d,u=t.selectBatch,h=t.unselectBatch,v=0;v<r;v++){if(o&&t.fillOrder[v]&&o.draw(t.fillOrder[v]),p&&t.lineOptions[v]&&p.draw(v),n&&(t.errorXOptions[v]&&n.draw(v),t.errorYOptions[v]&&n.draw(v+r)),s&&t.markerOptions[v])if(h[v].length){var f=d.repeat([],t.count);f[v]=h[v],s.draw(f)}else u[v].length||s.draw(v);a[v]&&t.textOptions[v]&&a[v].render()}c&&c.draw(u),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(r){r.destroy&&r.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,_._scene=null}),t.dirty||d.extendFlat(t,e),t}},{"../../lib":503}],990:[function(y,$,ee){"use strict";var d=y("../scatter/subtypes"),g=y("./edit_style").styleTextSelection;$.exports=function(_,t){var e=_.cd,i=_.xaxis,r=_.yaxis,o=[],n=e[0].trace,p=e[0].t,s=n._length,a=p.x,c=p.y,u=p._scene,h=p.index;if(!u)return o;var v=d.hasText(n),f=d.hasMarkers(n);if(!0!==n.visible||!f&&!v)return o;var x=[],m=[];if(!1!==t&&!t.degenerate)for(var w=0;w<s;w++)t.contains([p.xpx[w],p.ypx[w]],!1,w,_)?(x.push(w),o.push({pointNumber:w,x:i.c2d(a[w]),y:r.c2d(c[w])})):m.push(w);if(f){var b=u.scatter2d;if(x.length||m.length){if(!u.selectBatch[h].length&&!u.unselectBatch[h].length){var k=new Array(u.count);k[h]=u.markerUnselectedOptions[h],b.update.apply(b,k)}}else{var T=new Array(u.count);T[h]=u.markerOptions[h],b.update.apply(b,T)}}return u.selectBatch[h]=x,u.unselectBatch[h]=m,v&&g(e),o}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../scattergeo/attributes"),t=y("../scatter/attributes"),e=y("../../plots/mapbox/layout_attributes"),i=y("../../plots/attributes"),r=y("../../components/colorscale/attributes"),o=y("../../lib/extend").extendFlat,n=y("../../plot_api/edit_types").overrideAll,p=_.line,s=_.marker;$.exports=n({lon:_.lon,lat:_.lat,mode:o({},t.mode,{dflt:"markers"}),text:o({},t.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:o({},t.hovertext,{}),line:{color:p.color,width:p.width},connectgaps:t.connectgaps,marker:o({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},r("marker")),fill:_.fill,fillcolor:t.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:t.selected.marker},unselected:{marker:t.unselected.marker},hoverinfo:o({},i.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:d()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../lib"),_=y("../../constants/numerical").BADNUM,t=y("../../lib/geojson_utils"),e=y("../../components/colorscale"),i=y("../../components/drawing"),r=y("../scatter/make_bubble_size_func"),o=y("../scatter/subtypes"),n=y("../../plots/mapbox/convert_text_opts"),p=y("../../components/fx/helpers").appendArrayPointValue,s=y("../../lib/svg_text_utils").NEWLINES,a=y("../../lib/svg_text_utils").BR_TAG_ALL;function c(){return{geojson:t.makeBlank(),layout:{visibility:"none"},paint:{}}}function u(f,l){return g.isArrayOrTypedArray(f)?l?function(x){return d(f[x])?+f[x]:0}:function(x){return f[x]}:f?function(){return f}:h}function h(){return""}function v(f){return f[0]===_}$.exports=function(f,l){var x,m=l[0].trace,w=!0===m.visible&&0!==m._length,b="none"!==m.fill,k=o.hasLines(m),T=o.hasMarkers(m),L=o.hasText(m),A=T&&"circle"===m.marker.symbol,I=T&&"circle"!==m.marker.symbol,D=c(),S=c(),C=c(),R=c(),F={fill:D,line:S,circle:C,symbol:R};if(!w)return F;if((b||k)&&(x=t.calcTraceToLineCoords(l)),b&&(D.geojson=t.makePolygon(x),D.layout.visibility="visible",g.extendFlat(D.paint,{"fill-color":m.fillcolor})),k&&(S.geojson=t.makeLine(x),S.layout.visibility="visible",g.extendFlat(S.paint,{"line-width":m.line.width,"line-color":m.line.color,"line-opacity":m.opacity})),A){var H=function(Z){var Y,W,te,z,N=Z[0].trace,V=N.marker,Q=N.selectedpoints,j=g.isArrayOrTypedArray(V.color),J=g.isArrayOrTypedArray(V.size),K=g.isArrayOrTypedArray(V.opacity);function re(Te){return N.opacity*Te}j&&(W=e.hasColorscale(N,"marker")?e.makeColorScaleFuncFromTrace(V):g.identity),J&&(te=r(N)),K&&(z=function(Te){return re(d(Te)?+g.constrain(Te,0,1):0)});var ie,be,ce=[];for(Y=0;Y<Z.length;Y++){var se=Z[Y],de=se.lonlat;if(!v(de)){var ue={};W&&(ue.mcc=se.mcc=W(se.mc)),te&&(ue.mrc=se.mrc=te(se.ms)),z&&(ue.mo=z(se.mo)),Q&&(ue.selected=se.selected||0),ce.push({type:"Feature",geometry:{type:"Point",coordinates:de},properties:ue})}}if(Q)for(ie=i.makeSelectedPointStyleFns(N),Y=0;Y<ce.length;Y++){var ge=ce[Y].properties;ie.selectedOpacityFn&&(ge.mo=re(ie.selectedOpacityFn(ge))),ie.selectedColorFn&&(ge.mcc=ie.selectedColorFn(ge)),ie.selectedSizeFn&&(ge.mrc=ie.selectedSizeFn(ge))}return{geojson:{type:"FeatureCollection",features:ce},mcc:j||ie&&ie.selectedColorFn?{type:"identity",property:"mcc"}:V.color,mrc:J||ie&&ie.selectedSizeFn?{type:"identity",property:"mrc"}:(be=V.size,be/2),mo:K||ie&&ie.selectedOpacityFn?{type:"identity",property:"mo"}:re(V.opacity)}}(l);C.geojson=H.geojson,C.layout.visibility="visible",g.extendFlat(C.paint,{"circle-color":H.mcc,"circle-radius":H.mrc,"circle-opacity":H.mo})}if((I||L)&&(R.geojson=function(Z,Y){for(var W=Y._fullLayout,te=Z[0].trace,z=te.marker||{},N=z.symbol,V=z.angle,Q="circle"!==N?u(N):h,j="auto"!==V?u(V,!0):h,J=o.hasText(te)?u(te.text):h,K=[],re=0;re<Z.length;re++){var ie=Z[re];if(!v(ie.lonlat)){var ce,se=te.texttemplate;if(se){var de=Array.isArray(se)?se[re]||"":se,ue=te._module.formatLabels(ie,te,W),ge={};p(ge,te,ie.i),ce=g.texttemplateString(de,ue,W._d3locale,ge,ie,te._meta||{})}else ce=J(re);ce&&(ce=ce.replace(s,"").replace(a,"\n")),K.push({type:"Feature",geometry:{type:"Point",coordinates:ie.lonlat},properties:{symbol:Q(re),angle:j(re),text:ce}})}}return{type:"FeatureCollection",features:K}}(l,f),g.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),I&&(g.extendFlat(R.layout,{"icon-size":m.marker.size/10}),"angle"in m.marker&&"auto"!==m.marker.angle&&g.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=m.marker.allowoverlap,g.extendFlat(R.paint,{"icon-opacity":m.opacity*m.marker.opacity,"icon-color":m.marker.color})),L)){var X=n(m.textposition,(m.marker||{}).size);g.extendFlat(R.layout,{"text-size":m.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),g.extendFlat(R.paint,{"text-color":m.textfont.color,"text-opacity":m.opacity})}return F}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/subtypes"),_=y("../scatter/marker_defaults"),t=y("../scatter/line_defaults"),e=y("../scatter/text_defaults"),i=y("../scatter/fillcolor_defaults"),r=y("./attributes");$.exports=function(o,n,p,s){function a(u,h){return d.coerce(o,n,r,u,h)}if(h=n,f=(v=a)("lon")||[],l=v("lat")||[],x=Math.min(f.length,l.length),h._length=x,x){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),g.hasLines(n)&&(t(o,n,p,s,a,{noDash:!0}),a("connectgaps")),g.hasMarkers(n)){_(o,n,p,s,a,{noLine:!0}),a("marker.allowoverlap"),a("marker.angle");var c=n.marker;"circle"!==c.symbol&&(d.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),d.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}g.hasText(n)&&e(o,n,s,a,{noSelect:!0}),a("fill"),"none"!==n.fill&&i(o,n,p,a),d.coerceSelectionMarkerOpacity(n,a)}else n.visible=!1;var h,v,f,l,x}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(y,$,ee){"use strict";$.exports=function(d,g){return d.lon=g.lon,d.lat=g.lat,d}},{}],995:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes");$.exports=function(g,_,t){var e={},i=t[_.subplot]._subplot.mockAxis,r=g.lonlat;return e.lonLabel=d.tickText(i,i.c2l(r[0]),!0).text,e.latLabel=d.tickText(i,i.c2l(r[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],996:[function(y,$,ee){"use strict";var d=y("../../components/fx"),g=y("../../lib"),_=y("../scatter/get_trace_color"),t=g.fillText,e=y("../../constants/numerical").BADNUM;function i(r,o,n){if(!r.hovertemplate){var p=(o.hi||r.hoverinfo).split("+"),s=-1!==p.indexOf("all"),a=-1!==p.indexOf("lon"),c=-1!==p.indexOf("lat"),u=o.lonlat,h=[];return s||a&&c?h.push("("+v(u[1])+", "+v(u[0])+")"):a?h.push(n.lon+v(u[0])):c&&h.push(n.lat+v(u[1])),(s||-1!==p.indexOf("text"))&&t(o,r,h),h.join("<br>")}function v(f){return f+"\xb0"}}$.exports={hoverPoints:function(r,o,n){var p=r.cd,s=p[0].trace,a=r.xa,c=r.ya,u=r.subplot,h=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),v=o-h;if(d.getClosest(p,function(L){var A=L.lonlat;if(A[0]===e)return 1/0;var I=g.modHalf(A[0],360),D=A[1],S=u.project([I,D]),C=S.x-a.c2p([v,D]),R=S.y-c.c2p([I,n]),F=Math.max(3,L.mrc||0);return Math.max(Math.sqrt(C*C+R*R)-F,1-3/F)},r),!1!==r.index){var f=p[r.index],l=f.lonlat,x=[g.modHalf(l[0],360)+h,l[1]],m=a.c2p(x),w=c.c2p(x),b=f.mrc||1;r.x0=m-b,r.x1=m+b,r.y0=w-b,r.y1=w+b;var k={};k[s.subplot]={_subplot:u};var T=s._module.formatLabels(f,s,k);return r.lonLabel=T.lonLabel,r.latLabel=T.latLabel,r.color=_(s,f),r.extraText=i(s,f,p[0].t.labels),r.hovertemplate=s.hovertemplate,[r]}},getExtraText:i}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("../scattergeo/calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),styleOnSelect:function(d,g){g&&g[0].trace._glTrace.update(g)},moduleType:"trace",name:"scattermapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(y,$,ee){"use strict";var d=y("./convert"),g=y("../../plots/mapbox/constants").traceLayerPrefix,_=["fill","line","circle","symbol"];function t(i,r){this.type="scattermapbox",this.subplot=i,this.uid=r,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol"},this.layerIds={fill:g+r+"-fill",line:g+r+"-line",circle:g+r+"-circle",symbol:g+r+"-symbol"},this.below=null}var e=t.prototype;e.addSource=function(i,r){this.subplot.map.addSource(this.sourceIds[i],{type:"geojson",data:r.geojson})},e.setSourceData=function(i,r){this.subplot.map.getSource(this.sourceIds[i]).setData(r.geojson)},e.addLayer=function(i,r,o){this.subplot.addLayer({type:i,id:this.layerIds[i],source:this.sourceIds[i],layout:r.layout,paint:r.paint},o)},e.update=function(i){var r,o,n,p=this.subplot,s=p.map,a=d(p.gd,i),c=p.belowLookup["trace-"+this.uid];if(c!==this.below){for(r=_.length-1;r>=0;r--)s.removeLayer(this.layerIds[o=_[r]]);for(r=0;r<_.length;r++)n=a[o=_[r]],this.addLayer(o,n,c);this.below=c}for(r=0;r<_.length;r++)n=a[o=_[r]],p.setOptions(this.layerIds[o],"setLayoutProperty",n.layout),"visible"===n.layout.visibility&&(this.setSourceData(o,n),p.setOptions(this.layerIds[o],"setPaintProperty",n.paint));i[0].trace._glTrace=this},e.dispose=function(){for(var i=this.subplot.map,r=_.length-1;r>=0;r--){var o=_[r];i.removeLayer(this.layerIds[o]),i.removeSource(this.sourceIds[o])}},$.exports=function(i,r){for(var o=r[0].trace,n=new t(i,o.uid),p=d(i.gd,r),s=n.below=i.belowLookup["trace-"+o.uid],a=0;a<_.length;a++){var c=_[a],u=p[c];n.addSource(c,u),n.addLayer(c,u,s)}return r[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/subtypes"),_=y("../../constants/numerical").BADNUM;$.exports=function(t,e){var i,r=t.cd,o=t.xaxis,n=t.yaxis,p=[];if(!g.hasMarkers(r[0].trace))return[];if(!1===e)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++){var a=r[i],c=a.lonlat;if(c[0]!==_){var u=[d.modHalf(c[0],360),c[1]],h=[o.c2p(u),n.c2p(u)];e.contains(h,null,i,t)?(p.push({pointNumber:i,lon:c[0],lat:c[1]}),a.selected=1):a.selected=0}}return p}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../../lib/extend").extendFlat,t=y("../scatter/attributes"),e=y("../../plots/attributes"),i=t.line;$.exports={mode:t.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:t.text,texttemplate:g({editType:"plot"},{keys:["r","theta","text"]}),hovertext:t.hovertext,line:{color:i.color,width:i.width,dash:i.dash,shape:_({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:t.connectgaps,marker:t.marker,cliponaxis:_({},t.cliponaxis,{dflt:!1}),textposition:t.textposition,textfont:t.textfont,fill:_({},t.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:t.fillcolor,hoverinfo:_({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:t.hoveron,hovertemplate:d(),selected:t.selected,unselected:t.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../constants/numerical").BADNUM,_=y("../../plots/cartesian/axes"),t=y("../scatter/colorscale_calc"),e=y("../scatter/arrays_to_calcdata"),i=y("../scatter/calc_selection"),r=y("../scatter/calc").calcMarkerSize;$.exports=function(o,n){for(var p=o._fullLayout,s=n.subplot,a=p[s].radialaxis,c=p[s].angularaxis,u=a.makeCalcdata(n,"r"),h=c.makeCalcdata(n,"theta"),v=n._length,f=new Array(v),l=0;l<v;l++){var x=u[l],m=h[l],w=f[l]={};d(x)&&d(m)?(w.r=x,w.theta=m):w.r=g}var b=r(n,v);return n._extremes.x=_.findExtremes(a,u,{ppad:b}),t(o,n),e(f,n),i(f,n),f}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/subtypes"),_=y("../scatter/marker_defaults"),t=y("../scatter/line_defaults"),e=y("../scatter/line_shape_defaults"),i=y("../scatter/text_defaults"),r=y("../scatter/fillcolor_defaults"),o=y("../scatter/constants").PTS_LINESONLY,n=y("./attributes");function p(s,a,c,u){var h,v=u("r"),f=u("theta");if(v)f?h=Math.min(v.length,f.length):(h=v.length,u("theta0"),u("dtheta"));else{if(!f)return 0;h=a.theta.length,u("r0"),u("dr")}return a._length=h,h}$.exports={handleRThetaDefaults:p,supplyDefaults:function(s,a,c,u){function h(l,x){return d.coerce(s,a,n,l,x)}var v=p(0,a,0,h);if(v){h("thetaunit"),h("mode",v<o?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==a.hoveron&&h("hovertemplate"),g.hasLines(a)&&(t(s,a,c,u,h),e(s,a,h),h("connectgaps")),g.hasMarkers(a)&&_(s,a,c,u,h,{gradient:!0}),g.hasText(a)&&(h("texttemplate"),i(s,a,u,h));var f=[];(g.hasMarkers(a)||g.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),f.push("points")),h("fill"),"none"!==a.fill&&(r(s,a,c,h),g.hasLines(a)||e(s,a,h)),"tonext"!==a.fill&&"toself"!==a.fill||f.push("fills"),h("hoveron",f.join("+")||"points"),d.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes");$.exports=function(_,t,e){var i,r,o={},n=e[t.subplot]._subplot;n?(i=n.radialAxis,r=n.angularAxis):(i=(n=e[t.subplot]).radialaxis,r=n.angularaxis);var p=i.c2l(_.r);o.rLabel=g.tickText(i,p,!0).text;var s="degrees"===r.thetaunit?d.rad2deg(_.theta):_.theta;return o.thetaLabel=g.tickText(r,s,!0).text,o}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(y,$,ee){"use strict";var d=y("../scatter/hover");function g(_,t,e,i){var r=e.radialAxis,o=e.angularAxis;r._hovertitle="r",o._hovertitle="\u03b8";var n={};n[t.subplot]={_subplot:e};var p=t._module.formatLabels(_,t,n);i.rLabel=p.rLabel,i.thetaLabel=p.thetaLabel;var a=[];function c(h,v){a.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var u=(_.hi||t.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["r","theta","text"]),-1!==u.indexOf("r")&&c(r,i.rLabel),-1!==u.indexOf("theta")&&c(o,i.thetaLabel),-1!==u.indexOf("text")&&i.text&&(a.push(i.text),delete i.text),i.extraText=a.join("<br>")}}$.exports={hoverPoints:function(_,t,e,i){var r=d(_,t,e,i);if(r&&!1!==r[0].index){var o=r[0];if(void 0===o.index)return r;var n=_.subplot,p=o.cd[o.index],s=o.trace;if(n.isPtInside(p))return o.xLabelVal=void 0,o.yLabelVal=void 0,g(p,s,n,o),o.hovertemplate=s.hovertemplate,r}},makeHoverPointText:g}},{"../scatter/hover":937}],1005:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:y("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(y,$,ee){"use strict";var d=y("../scatter/plot"),g=y("../../constants/numerical").BADNUM;$.exports=function(_,t,e){for(var i=t.layers.frontplot.select("g.scatterlayer"),r={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},o=t.radialAxis,n=t.angularAxis,p=0;p<e.length;p++)for(var s=e[p],a=0;a<s.length;a++){var c=s[a],u=c.r;if(u===g)c.x=c.y=g;else{var h=o.c2g(u),v=n.c2g(c.theta);c.x=h*Math.cos(v),c.y=h*Math.sin(v)}}d(_,r,e,i)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(y,$,ee){"use strict";var d=y("../scatterpolar/attributes"),g=y("../scattergl/attributes"),_=y("../../plots/template_attributes").texttemplateAttrs;$.exports={mode:d.mode,r:d.r,theta:d.theta,r0:d.r0,dr:d.dr,theta0:d.theta0,dtheta:d.dtheta,thetaunit:d.thetaunit,text:d.text,texttemplate:_({editType:"plot"},{keys:["r","theta","text"]}),hovertext:d.hovertext,hovertemplate:d.hovertemplate,line:g.line,connectgaps:g.connectgaps,marker:g.marker,fill:g.fill,fillcolor:g.fillcolor,textposition:g.textposition,textfont:g.textfont,hoverinfo:d.hoverinfo,selected:d.selected,unselected:d.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(y,$,ee){"use strict";var d=y("../scatter/colorscale_calc"),g=y("../scatter/calc").calcMarkerSize,_=y("../scattergl/convert"),t=y("../../plots/cartesian/axes"),e=y("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(i,r){var o=i._fullLayout,n=r.subplot,p=o[n].radialaxis,s=o[n].angularaxis,a=r._r=p.makeCalcdata(r,"r"),c=r._theta=s.makeCalcdata(r,"theta"),u=r._length,h={};u<a.length&&(a=a.slice(0,u)),u<c.length&&(c=c.slice(0,u)),h.r=a,h.theta=c,d(i,r);var v,f=h.opts=_.style(i,r);return u<e?v=g(r,u):f.marker&&(v=2*(f.marker.sizeAvg||Math.max(f.marker.size,3))),r._extremes.x=t.findExtremes(p,a,{ppad:v}),[{x:!1,y:!1,t:h,trace:r}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/subtypes"),_=y("../scatterpolar/defaults").handleRThetaDefaults,t=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),i=y("../scatter/text_defaults"),r=y("../scatter/fillcolor_defaults"),o=y("../scatter/constants").PTS_LINESONLY,n=y("./attributes");$.exports=function(p,s,a,c){function u(v,f){return d.coerce(p,s,n,v,f)}var h=_(p,s,c,u);h?(u("thetaunit"),u("mode",h<o?"lines+markers":"lines"),u("text"),u("hovertext"),"fills"!==s.hoveron&&u("hovertemplate"),g.hasLines(s)&&(e(p,s,a,c,u),u("connectgaps")),g.hasMarkers(s)&&t(p,s,a,c,u),g.hasText(s)&&(u("texttemplate"),i(p,s,c,u)),u("fill"),"none"!==s.fill&&r(p,s,a,u),d.coerceSelectionMarkerOpacity(s,u)):s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(y,$,ee){"use strict";var d=y("../scatterpolar/format_labels");$.exports=function(g,_,t){var e=g.i;return"r"in g||(g.r=_._r[e]),"theta"in g||(g.theta=_._theta[e]),d(g,_,t)}},{"../scatterpolar/format_labels":1003}],1011:[function(y,$,ee){"use strict";var d=y("../scattergl/hover"),g=y("../scatterpolar/hover").makeHoverPointText;$.exports={hoverPoints:function(_,t,e,i){var r=_.cd[0].t,o=r.r,n=r.theta,p=d.hoverPoints(_,t,e,i);if(p&&!1!==p[0].index){var s=p[0];if(void 0===s.index)return p;var a=_.subplot,c=s.cd[s.index],u=s.trace;if(c.r=o[s.index],c.theta=n[s.index],a.isPtInside(c))return s.xLabelVal=void 0,s.yLabelVal=void 0,g(c,u,a,s),p}}}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:y("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(y,$,ee){"use strict";var d=y("@plotly/point-cluster"),g=y("fast-isnumeric"),_=y("../scattergl/plot"),t=y("../scattergl/scene_update"),e=y("../scattergl/convert"),i=y("../../lib"),r=y("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(o,n,p){if(p.length){var s=n.radialAxis,a=n.angularAxis,c=t(o,n);return p.forEach(function(u){if(u&&u[0]&&u[0].trace){var h,v=u[0],f=v.trace,l=v.t,x=f._length,m=l.r,w=l.theta,b=l.opts,k=m.slice(),T=w.slice();for(h=0;h<m.length;h++)n.isPtInside({r:m[h],theta:w[h]})||(k[h]=NaN,T[h]=NaN);var L=new Array(2*x),A=Array(x),I=Array(x);for(h=0;h<x;h++){var D,S,C=k[h];if(g(C)){var R=s.c2g(C),F=a.c2g(T[h],f.thetaunit);D=R*Math.cos(F),S=R*Math.sin(F)}else D=S=NaN;A[h]=L[2*h]=D,I[h]=L[2*h+1]=S}l.tree=d(L),b.marker&&x>=r&&(b.marker.cluster=l.tree),b.marker&&(b.markerSel.positions=b.markerUnsel.positions=b.marker.positions=L),b.line&&L.length>1&&i.extendFlat(b.line,e.linePositions(o,f,L)),b.text&&(i.extendFlat(b.text,{positions:L},e.textPosition(o,f,b.text,b.marker)),i.extendFlat(b.textSel,{positions:L},e.textPosition(o,f,b.text,b.markerSel)),i.extendFlat(b.textUnsel,{positions:L},e.textPosition(o,f,b.text,b.markerUnsel))),b.fill&&!c.fill2d&&(c.fill2d=!0),b.marker&&!c.scatter2d&&(c.scatter2d=!0),b.line&&!c.line2d&&(c.line2d=!0),b.text&&!c.glText&&(c.glText=!0),c.lineOptions.push(b.line),c.fillOptions.push(b.fill),c.markerOptions.push(b.marker),c.markerSelectedOptions.push(b.markerSel),c.markerUnselectedOptions.push(b.markerUnsel),c.textOptions.push(b.text),c.textSelectedOptions.push(b.textSel),c.textUnselectedOptions.push(b.textUnsel),c.selectBatch.push([]),c.unselectBatch.push([]),l.x=A,l.y=I,l.rawx=A,l.rawy=I,l.r=m,l.theta=w,l.positions=L,l._scene=c,l.index=c.count,c.count++}}),_(o,n,p)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../../lib/extend").extendFlat,t=y("../scatter/attributes"),e=y("../../plots/attributes"),i=t.line;$.exports={mode:t.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:t.text,texttemplate:g({editType:"plot"},{keys:["real","imag","text"]}),hovertext:t.hovertext,line:{color:i.color,width:i.width,dash:i.dash,shape:_({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:t.connectgaps,marker:t.marker,cliponaxis:_({},t.cliponaxis,{dflt:!1}),textposition:t.textposition,textfont:t.textfont,fill:_({},t.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:t.fillcolor,hoverinfo:_({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:t.hoveron,hovertemplate:d(),selected:t.selected,unselected:t.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../../constants/numerical").BADNUM,_=y("../scatter/colorscale_calc"),t=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection"),i=y("../scatter/calc").calcMarkerSize;$.exports=function(r,o){for(var n=r._fullLayout,p=o.subplot,a=n[p].imaginaryaxis,c=n[p].realaxis.makeCalcdata(o,"real"),u=a.makeCalcdata(o,"imag"),h=o._length,v=new Array(h),f=0;f<h;f++){var l=c[f],x=u[f],m=v[f]={};d(l)&&d(x)?(m.real=l,m.imag=x):m.real=g}return i(o,h),_(r,o),t(v,o),e(v,o),v}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/subtypes"),_=y("../scatter/marker_defaults"),t=y("../scatter/line_defaults"),e=y("../scatter/line_shape_defaults"),i=y("../scatter/text_defaults"),r=y("../scatter/fillcolor_defaults"),o=y("../scatter/constants").PTS_LINESONLY,n=y("./attributes");$.exports=function(p,s,a,c){function u(f,l){return d.coerce(p,s,n,f,l)}var l,m,w,b,k,h=(l=s,b=(m=u)("real"),k=m("imag"),b&&k&&(w=Math.min(b.length,k.length)),l._length=w,w);if(h){u("mode",h<o?"lines+markers":"lines"),u("text"),u("hovertext"),"fills"!==s.hoveron&&u("hovertemplate"),g.hasLines(s)&&(t(p,s,a,c,u),e(p,s,u),u("connectgaps")),g.hasMarkers(s)&&_(p,s,a,c,u,{gradient:!0}),g.hasText(s)&&(u("texttemplate"),i(p,s,c,u));var v=[];(g.hasMarkers(s)||g.hasText(s))&&(u("cliponaxis"),u("marker.maxdisplayed"),v.push("points")),u("fill"),"none"!==s.fill&&(r(p,s,a,u),g.hasLines(s)||e(p,s,u)),"tonext"!==s.fill&&"toself"!==s.fill||v.push("fills"),u("hoveron",v.join("+")||"points"),d.coerceSelectionMarkerOpacity(s,u)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes");$.exports=function(g,_,t){var e={},i=t[_.subplot]._subplot;return e.realLabel=d.tickText(i.radialAxis,g.real,!0).text,e.imagLabel=d.tickText(i.angularAxis,g.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1018:[function(y,$,ee){"use strict";var d=y("../scatter/hover");function g(_,t,e,i){var r=e.radialAxis,o=e.angularAxis;r._hovertitle="real",o._hovertitle="imag";var n={};n[t.subplot]={_subplot:e};var p=t._module.formatLabels(_,t,n);i.realLabel=p.realLabel,i.imagLabel=p.imagLabel;var a=[];function c(h,v){a.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var u=(_.hi||t.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["real","imag","text"]),-1!==u.indexOf("real")&&c(r,i.realLabel),-1!==u.indexOf("imag")&&c(o,i.imagLabel),-1!==u.indexOf("text")&&i.text&&(a.push(i.text),delete i.text),i.extraText=a.join("<br>")}}$.exports={hoverPoints:function(_,t,e,i){var r=d(_,t,e,i);if(r&&!1!==r[0].index){var o=r[0];if(void 0===o.index)return r;var n=_.subplot,p=o.cd[o.index],s=o.trace;if(n.isPtInside(p))return o.xLabelVal=void 0,o.yLabelVal=void 0,g(p,s,n,o),o.hovertemplate=s.hovertemplate,r}},makeHoverPointText:g}},{"../scatter/hover":937}],1019:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:y("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(y,$,ee){"use strict";var d=y("../scatter/plot"),g=y("../../constants/numerical").BADNUM,_=y("../../plots/smith/helpers").smith;$.exports=function(t,e,i){for(var r=e.layers.frontplot.select("g.scatterlayer"),o={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},n=0;n<i.length;n++)for(var p=i[n],s=0;s<p.length;s++){var a=p[s],c=a.real;if(c===g)a.x=a.y=g;else{var u=_([c,a.imag]);a.x=u[0],a.y=u[1]}}d(t,o,i,r)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../scatter/attributes"),t=y("../../plots/attributes"),e=y("../../components/colorscale/attributes"),i=y("../../components/drawing/attributes").dash,r=y("../../lib/extend").extendFlat,o=_.marker,n=_.line,p=o.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:r({},_.mode,{dflt:"markers"}),text:r({},_.text,{}),texttemplate:g({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:r({},_.hovertext,{}),line:{color:n.color,width:n.width,dash:i,shape:r({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:_.connectgaps,cliponaxis:_.cliponaxis,fill:r({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,marker:r({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:r({width:p.width,editType:"calc"},e("marker.line")),gradient:o.gradient,editType:"calc"},e("marker")),textfont:_.textfont,textposition:_.textposition,selected:_.selected,unselected:_.unselected,hoverinfo:r({},t.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:_.hoveron,hovertemplate:d()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(y,$,ee){"use strict";var d=y("fast-isnumeric"),g=y("../scatter/colorscale_calc"),_=y("../scatter/arrays_to_calcdata"),t=y("../scatter/calc_selection"),e=y("../scatter/calc").calcMarkerSize,i=["a","b","c"],r={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(o,n){var p,s,a,c,u,h,v=o._fullLayout[n.subplot].sum,f=n.sum||v,l={a:n.a,b:n.b,c:n.c};for(p=0;p<i.length;p++)if(!l[a=i[p]]){for(u=l[r[a][0]],h=l[r[a][1]],c=new Array(u.length),s=0;s<u.length;s++)c[s]=f-u[s]-h[s];l[a]=c}var x,m,w,b,L=n._length,A=new Array(L);for(p=0;p<L;p++)m=l.b[p],w=l.c[p],d(x=l.a[p])&&d(m)&&d(w)?(1!=(b=v/((x=+x)+(m=+m)+(w=+w)))&&(x*=b,m*=b,w*=b),A[p]={x:w-m,y:x,a:x,b:m,c:w}):A[p]={x:!1,y:!1};return e(n,L),g(o,n),_(A,n),t(A,n),A}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/constants"),_=y("../scatter/subtypes"),t=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),i=y("../scatter/line_shape_defaults"),r=y("../scatter/text_defaults"),o=y("../scatter/fillcolor_defaults"),n=y("./attributes");$.exports=function(p,s,a,c){function u(m,w){return d.coerce(p,s,n,m,w)}var h,v=u("a"),f=u("b"),l=u("c");if(v?(h=v.length,f?(h=Math.min(h,f.length),l&&(h=Math.min(h,l.length))):h=l?Math.min(h,l.length):0):f&&l&&(h=Math.min(f.length,l.length)),h){s._length=h,u("sum"),u("text"),u("hovertext"),"fills"!==s.hoveron&&u("hovertemplate"),u("mode",h<g.PTS_LINESONLY?"lines+markers":"lines"),_.hasLines(s)&&(e(p,s,a,c,u),i(p,s,u),u("connectgaps")),_.hasMarkers(s)&&t(p,s,a,c,u,{gradient:!0}),_.hasText(s)&&(u("texttemplate"),r(p,s,c,u));var x=[];(_.hasMarkers(s)||_.hasText(s))&&(u("cliponaxis"),u("marker.maxdisplayed"),x.push("points")),u("fill"),"none"!==s.fill&&(o(p,s,a,u),_.hasLines(s)||i(p,s,u)),"tonext"!==s.fill&&"toself"!==s.fill||x.push("fills"),u("hoveron",x.join("+")||"points"),d.coerceSelectionMarkerOpacity(s,u)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(y,$,ee){"use strict";$.exports=function(d,g,_,t,e){if(g.xa&&(d.xaxis=g.xa),g.ya&&(d.yaxis=g.ya),t[e]){var i=t[e];d.a=i.a,d.b=i.b,d.c=i.c}else d.a=g.a,d.b=g.b,d.c=g.c;return d}},{}],1025:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes");$.exports=function(g,_,t){var e={},i=t[_.subplot]._subplot;return e.aLabel=d.tickText(i.aaxis,g.a,!0).text,e.bLabel=d.tickText(i.baxis,g.b,!0).text,e.cLabel=d.tickText(i.caxis,g.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1026:[function(y,$,ee){"use strict";var d=y("../scatter/hover");$.exports=function(g,_,t,e){var i=d(g,_,t,e);if(i&&!1!==i[0].index){var r=i[0];if(void 0===r.index){var n=g.xa._length,p=n*(1-r.y0/g.ya._length)/2,s=n-p;return r.x0=Math.max(Math.min(r.x0,s),p),r.x1=Math.max(Math.min(r.x1,s),p),i}var a=r.cd[r.index],c=r.trace,u=r.subplot;r.a=a.a,r.b=a.b,r.c=a.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var h={};h[c.subplot]={_subplot:u};var v=c._module.formatLabels(a,c,h);r.aLabel=v.aLabel,r.bLabel=v.bLabel,r.cLabel=v.cLabel;var l=[];if(!c.hovertemplate){var x=(a.hi||c.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","c"]),-1!==x.indexOf("a")&&m(u.aaxis,r.aLabel),-1!==x.indexOf("b")&&m(u.baxis,r.bLabel),-1!==x.indexOf("c")&&m(u.caxis,r.cLabel)}return r.extraText=l.join("<br>"),r.hovertemplate=c.hovertemplate,i}function m(w,b){l.push(w._hovertitle+": "+b)}}},{"../scatter/hover":937}],1027:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../scatter/select"),eventData:y("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:y("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(y,$,ee){"use strict";var d=y("../scatter/plot");$.exports=function(g,_,t){var e=_.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var i={xaxis:_.xaxis,yaxis:_.yaxis,plot:e,layerClipId:_._hasClipOnAxisFalse?_.clipIdRelative:null},r=_.layers.frontplot.select("g.scatterlayer");d(g,i,t,r)}},{"../scatter/plot":947}],1029:[function(y,$,ee){"use strict";var d=y("../scatter/attributes"),g=y("../../components/colorscale/attributes"),_=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../scattergl/attributes"),i=y("../../plots/cartesian/constants").idRegex,r=y("../../plot_api/plot_template").templatedArray,o=y("../../lib/extend").extendFlat,n=d.marker,p=n.line,s=o(g("marker.line",{editTypeOverride:"calc"}),{width:o({},p.width,{editType:"calc"}),editType:"calc"}),a=o(g("marker"),{symbol:n.symbol,size:o({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:s,editType:"calc"});function c(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:i[u],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",$.exports={dimensions:r("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:o({},e.text,{}),hovertext:o({},e.hovertext,{}),hovertemplate:t(),xhoverformat:_("x"),yhoverformat:_("y"),marker:a,xaxes:c("x"),yaxes:c("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(y,$,ee){"use strict";var d=y("regl-line2d"),g=y("../../registry"),_=y("../../lib/prepare_regl"),t=y("../../plots/get_data").getModuleCalcData,e=y("../../plots/cartesian"),i=y("../../plots/cartesian/axis_ids").getFromId,r=y("../../plots/cartesian/axes").shouldShowZeroLine;function o(p,s,a){for(var u=s._visibleDims,h=a.viewOpts.ranges=new Array(a.matrixOptions.data.length),v=0;v<u.length;v++){var f=u[v],l=h[v]=new Array(4),x=i(p,s._diag[f][0]);x&&(l[0]=x.r2l(x.range[0]),l[2]=x.r2l(x.range[1]));var m=i(p,s._diag[f][1]);m&&(l[1]=m.r2l(m.range[0]),l[3]=m.r2l(m.range[1]))}a.selectBatch.length||a.unselectBatch.length?a.matrix.update({ranges:h},{ranges:h}):a.matrix.update({ranges:h})}function n(p){var s=p._fullLayout,a=s._glcanvas.data()[0].regl,c=s._splomGrid;c||(c=s._splomGrid=d(a)),c.update(function(u){var h,v=u._context.plotGlPixelRatio,f=u._fullLayout,l=f._size,x=[0,0,f.width*v,f.height*v],m={};function w(Z,Y,W,te,z,N){W*=v,te*=v,z*=v,N*=v;var V=Y[Z+"color"],Q=Y[Z+"width"],j=String(V+Q);j in m?m[j].data.push(NaN,NaN,W,te,z,N):m[j]={data:[W,te,z,N],join:"rect",thickness:Q*v,color:V,viewport:x,range:x,overlay:!1}}for(h in f._splomSubplots){var b,k,T=f._plots[h],L=T.xaxis,A=T.yaxis,I=L._gridVals,D=A._gridVals,S=L._offset,C=L._length,R=A._length,F=l.b+A.domain[0]*l.h,H=-A._m,U=-H*A.r2l(A.range[0],A.calendar);if(L.showgrid)for(h=0;h<I.length;h++)b=S+L.l2p(I[h].x),w("grid",L,b,F,b,F+R);if(A.showgrid)for(h=0;h<D.length;h++)w("grid",A,S,k=F+U+H*D[h].x,S+C,k);r(u,L,A)&&(b=S+L.l2p(0),w("zeroline",L,b,F,b,F+R)),r(u,A,L)&&w("zeroline",A,S,k=F+U+0,S+C,k)}var X=[];for(h in m)X.push(m[h]);return X}(p))}$.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(p){var s=p._fullLayout,a=g.getModule("splom"),c=t(p.calcdata,a)[0];_(p,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(s._hasOnlyLargeSploms&&n(p),a.plot(p,{},c))},drag:function(p){var s=p.calcdata,a=p._fullLayout;a._hasOnlyLargeSploms&&n(p);for(var c=0;c<s.length;c++){var u=s[c][0].trace,h=a._splomScenes[u.uid];"splom"===u.type&&h&&h.matrix&&o(p,u,h)}},updateGrid:n,clean:function(p,s,a,c){var u,h={};if(c._splomScenes){for(u=0;u<p.length;u++){var v=p[u];"splom"===v.type&&(h[v.uid]=1)}for(u=0;u<a.length;u++){var f=a[u];if(!h[f.uid]){var l=c._splomScenes[f.uid];l&&l.destroy&&l.destroy(),c._splomScenes[f.uid]=null,delete c._splomScenes[f.uid]}}}0===Object.keys(c._splomScenes||{}).length&&delete c._splomScenes,c._splomGrid&&!s._hasOnlyLargeSploms&&c._hasOnlyLargeSploms&&(c._splomGrid.destroy(),c._splomGrid=null,delete c._splomGrid),e.clean(p,s,a,c)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axis_ids"),_=y("../scatter/calc").calcMarkerSize,t=y("../scatter/calc").calcAxisExpansion,e=y("../scatter/colorscale_calc"),i=y("../scattergl/convert").markerSelection,r=y("../scattergl/convert").markerStyle,o=y("./scene_update"),n=y("../../constants/numerical").BADNUM,p=y("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(s,a){var c,u,h,v,f,l,x=a.dimensions,m=a._length,w={},b=w.cdata=[],k=w.data=[],T=a._visibleDims=[];function L(I,D){for(var S=I.makeCalcdata({v:D.values,vcalendar:a.calendar},"v"),C=0;C<S.length;C++)S[C]=S[C]===n?NaN:S[C];b.push(S),k.push("log"===I.type?d.simpleMap(S,I.c2l):S)}for(c=0;c<x.length;c++)if((h=x[c]).visible){if(v=g.getFromId(s,a._diag[c][0]),f=g.getFromId(s,a._diag[c][1]),v&&f&&v.type!==f.type){d.log("Skipping splom dimension "+c+" with conflicting axis types");continue}v?(L(v,h),f&&"category"===f.type&&(f._categories=v._categories.slice())):L(f,h),T.push(c)}for(e(s,a),d.extendFlat(w,r(a)),l=b.length*m>p?w.sizeAvg||Math.max(w.size,3):_(a,m),u=0;u<T.length;u++)h=x[c=T[u]],v=g.getFromId(s,a._diag[c][0])||{},f=g.getFromId(s,a._diag[c][1])||{},t(s,a,v,f,b[u],b[u],l);var A=o(s,a);return A.matrix||(A.matrix=!0),A.matrixOptions=w,A.selectedOptions=i(a,a.selected),A.unselectedOptions=i(a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/array_container_defaults"),_=y("./attributes"),t=y("../scatter/subtypes"),e=y("../scatter/marker_defaults"),i=y("../parcoords/merge_length"),r=y("../scattergl/helpers").isOpenSymbol;function o(n,p){function s(c,u){return d.coerce(n,p,_.dimensions,c,u)}s("label");var a=s("values");a&&a.length?s("visible"):p.visible=!1,s("axis.type"),s("axis.matches")}$.exports=function(n,p,s,a){function c(m,w){return d.coerce(n,p,_,m,w)}var u=g(n,p,{name:"dimensions",handleItemDefaults:o}),h=c("diagonal.visible"),v=c("showupperhalf"),f=c("showlowerhalf");if(i(p,u,"values")&&(h||v||f)){c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),e(n,p,s,a,c);var l=r(p.marker.symbol),x=t.isBubble(p);c("marker.line.width",l||x?1:0),function(m,w,b,k){var T,L,A=w.dimensions,I=A.length,D=w.showupperhalf,S=w.showlowerhalf,C=w.diagonal.visible,R=new Array(I),F=new Array(I);for(T=0;T<I;T++){var H=T?T+1:"";R[T]="x"+H,F[T]="y"+H}var U=k("xaxes",R),X=k("yaxes",F),Z=w._diag=new Array(I);w._xaxes={},w._yaxes={};var Y=[],W=[];function te(ie,ce,se,de){if(ie){var ue=ie.charAt(0),ge=b._splomAxes[ue];if(w["_"+ue+"axes"][ie]=1,de.push(ie),!(ie in ge)){var be=ge[ie]={};se&&(be.label=se.label||"",se.visible&&se.axis&&(se.axis.type&&(be.type=se.axis.type),se.axis.matches&&(be.matches=ce)))}}}var z=!C&&!S,N=!C&&!D;for(w._axesDim={},T=0;T<I;T++){var V=A[T],Q=0===T,j=T===I-1,J=Q&&z||j&&N?void 0:U[T],K=Q&&N||j&&z?void 0:X[T];te(J,K,V,Y),te(K,J,V,W),Z[T]=[J,K],w._axesDim[J]=T,w._axesDim[K]=T}for(T=0;T<Y.length;T++)for(L=0;L<W.length;L++){var re=Y[T]+W[L];T>L&&D||T<L&&S?b._splomSubplots[re]=1:T!==L||!C&&S&&D||(b._splomSubplots[re]=1)}(!S||!C&&D&&S)&&(b._splomGridDflt.xside="bottom",b._splomGridDflt.yside="left")}(0,p,a,c),d.coerceSelectionMarkerOpacity(p,c)}else p.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/colorscale_calc"),_=y("../scattergl/convert").markerStyle;$.exports=function(t,e){var i=e.trace,r=t._fullLayout._splomScenes[i.uid];if(r){g(t,i),d.extendFlat(r.matrixOptions,_(i));var o=d.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(o,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(y,$,ee){"use strict";ee.getDimIndex=function(d,g){for(var _=g._id,t={x:0,y:1}[_.charAt(0)],e=d._visibleDims,i=0;i<e.length;i++)if(d._diag[e[i]][t]===_)return i;return!1}},{}],1035:[function(y,$,ee){"use strict";var d=y("./helpers"),g=y("../scattergl/hover").calcHover;$.exports={hoverPoints:function(_,t,e){var i=_.cd[0].trace,r=_.scene.matrixOptions.cdata,o=_.xa,n=_.ya,p=o.c2p(t),s=n.c2p(e),a=_.distance,c=d.getDimIndex(i,o),u=d.getDimIndex(i,n);if(!1===c||!1===u)return[_];for(var h,v,f=r[c],l=r[u],x=a,m=0;m<f.length;m++){var b=l[m],k=o.c2p(f[m])-p,T=n.c2p(b)-s,L=Math.sqrt(k*k+T*T);L<x&&(x=v=L,h=m)}return _.index=h,_.distance=x,_.dxy=v,void 0===h?[_]:[g(_,f,l,i)]}}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../components/grid");$.exports={moduleType:"trace",name:"splom",basePlotModule:y("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("./select"),editStyle:y("./edit_style"),meta:{}},d.register(g)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(y,$,ee){"use strict";var d=y("regl-splom"),g=y("../../lib"),_=y("../../plots/cartesian/axis_ids"),t=y("../../components/dragelement/helpers").selectMode;function e(i,r){var o,n,p,s,a,c=i._fullLayout,u=c._size,h=r.trace,v=r.t,f=c._splomScenes[h.uid],l=f.matrixOptions,x=l.cdata,m=c._glcanvas.data()[0].regl,w=c.dragmode;if(0!==x.length){l.lower=h.showupperhalf,l.upper=h.showlowerhalf,l.diagonal=h.diagonal.visible;var b=h._visibleDims,k=x.length,T=f.viewOpts={};for(T.ranges=new Array(k),T.domains=new Array(k),a=0;a<b.length;a++){p=b[a];var L=T.ranges[a]=new Array(4),A=T.domains[a]=new Array(4);(o=_.getFromId(i,h._diag[p][0]))&&(L[0]=o._rl[0],L[2]=o._rl[1],A[0]=o.domain[0],A[2]=o.domain[1]),(n=_.getFromId(i,h._diag[p][1]))&&(L[1]=n._rl[0],L[3]=n._rl[1],A[1]=n.domain[0],A[3]=n.domain[1])}var I=i._context.plotGlPixelRatio,D=u.l*I,S=u.b*I;T.viewport=[D,S,u.w*I+D,u.h*I+S],!0===f.matrix&&(f.matrix=d(m));var F=c.clickmode.indexOf("select")>-1,H=!0;if(t(w)||h.selectedpoints||F){var U=h._length;if(h.selectedpoints){f.selectBatch=h.selectedpoints;var X=h.selectedpoints,Z={};for(p=0;p<X.length;p++)Z[X[p]]=!0;var Y=[];for(p=0;p<U;p++)Z[p]||Y.push(p);f.unselectBatch=Y}var W=v.xpx=new Array(k),te=v.ypx=new Array(k);for(a=0;a<b.length;a++){if(o=_.getFromId(i,h._diag[p=b[a]][0]))for(W[a]=new Array(U),s=0;s<U;s++)W[a][s]=o.c2p(x[a][s]);if(n=_.getFromId(i,h._diag[p][1]))for(te[a]=new Array(U),s=0;s<U;s++)te[a][s]=n.c2p(x[a][s])}if(f.selectBatch.length||f.unselectBatch.length){var z=g.extendFlat({},l,f.unselectedOptions,T),N=g.extendFlat({},l,f.selectedOptions,T);f.matrix.update(z,N),H=!1}}else v.xpx=v.ypx=null;if(H){var V=g.extendFlat({},l,T);f.matrix.update(V,null)}}}$.exports=function(i,r,o){if(o.length)for(var n=0;n<o.length;n++)e(i,o[n][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(y,$,ee){"use strict";var d=y("../../lib");$.exports=function(g,_){var t=g._fullLayout,e=_.uid,i=t._splomScenes;i||(i=t._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},o=i[_.uid];return o||((o=i[e]=d.extendFlat({},r,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){o.matrix&&o.matrix.draw&&(o.selectBatch.length||o.unselectBatch.length?o.matrix.draw(o.unselectBatch,o.selectBatch):o.matrix.draw()),o.dirty=!1},o.destroy=function(){o.matrix&&o.matrix.destroy&&o.matrix.destroy(),o.matrixOptions=null,o.selectBatch=null,o.unselectBatch=null,o=null}),o.dirty||d.extendFlat(o,r),o}},{"../../lib":503}],1039:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../scatter/subtypes"),_=y("./helpers");$.exports=function(t,e){var i=t.cd,r=i[0].trace,o=i[0].t,n=t.scene,p=n.matrixOptions.cdata,s=t.xaxis,a=t.yaxis,c=[];if(!n)return c;var u=!g.hasMarkers(r)&&!g.hasText(r);if(!0!==r.visible||u)return c;var h=_.getDimIndex(r,s),v=_.getDimIndex(r,a);if(!1===h||!1===v)return c;var f=o.xpx[h],l=o.ypx[v],x=p[h],m=p[v],w=[],b=[];if(!1!==e&&!e.degenerate)for(var k=0;k<x.length;k++)e.contains([f[k],l[k]],null,k,t)?(w.push(k),c.push({pointNumber:k,x:x[k],y:m[k]})):b.push(k);var T=n.matrixOptions;return w.length||b.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,d.extendFlat({},T,n.selectedOptions,n.viewOpts)):n.matrix.update(T,null),n.selectBatch=w,n.unselectBatch=b,c}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/attributes"),g=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../mesh3d/attributes"),e=y("../../plots/attributes"),i=y("../../lib/extend").extendFlat,r={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:_({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:i({},e.showlegend,{dflt:!1})};i(r,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(o){r[o]=t[o]}),r.hoverinfo=i({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),r.transforms=void 0,$.exports=r},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/calc");function _(i){var r,o,n,p,s,a,c,u,h,v,f,l,x=i._x,m=i._y,w=i._z,b=i._len,k=-1/0,T=1/0,L=-1/0,A=1/0,I=-1/0,D=1/0,S="";for(b&&(c=x[0],h=m[0],f=w[0]),b>1&&(u=x[b-1],v=m[b-1],l=w[b-1]),r=0;r<b;r++)k=Math.max(k,x[r]),T=Math.min(T,x[r]),L=Math.max(L,m[r]),A=Math.min(A,m[r]),I=Math.max(I,w[r]),D=Math.min(D,w[r]),p||x[r]===c||(p=!0,S+="x"),s||m[r]===h||(s=!0,S+="y"),a||w[r]===f||(a=!0,S+="z");p||(S+="x"),s||(S+="y"),a||(S+="z");var C=t(i._x),R=t(i._y),F=t(i._z);S=(S=(S=S.replace("x",(c>u?"-":"+")+"x")).replace("y",(h>v?"-":"+")+"y")).replace("z",(f>l?"-":"+")+"z");var H=function(){b=0,C=[],R=[],F=[]};(!b||b<C.length*R.length*F.length)&&H();var U=function(ue){return"x"===ue?x:"y"===ue?m:w},X=function(ue){return"x"===ue?C:"y"===ue?R:F},Z=function(ue){return ue[b-1]<ue[0]?-1:1},Y=U(S[1]),W=U(S[3]),te=U(S[5]),z=X(S[1]).length,N=X(S[3]).length,V=X(S[5]).length,Q=!1,j=function(ue,ge,be){return z*(N*ue+ge)+be},J=Z(U(S[1])),K=Z(U(S[3])),re=Z(U(S[5]));for(r=0;r<V-1;r++){for(o=0;o<N-1;o++){for(n=0;n<z-1;n++){var ie=j(r,o,n),ce=j(r,o,n+1),se=j(r,o+1,n),de=j(r+1,o,n);if(Y[ie]*J<Y[ce]*J&&W[ie]*K<W[se]*K&&te[ie]*re<te[de]*re||(Q=!0),Q)break}if(Q)break}if(Q)break}return Q&&(d.warn("Encountered arbitrary coordinates! Unable to input data grid."),H()),{xMin:T,yMin:A,zMin:D,xMax:k,yMax:L,zMax:I,Xs:C,Ys:R,Zs:F,len:b,fill:S}}function t(i){return d.distinctVals(i).vals}function e(i,r){if(void 0===r&&(r=i.length),d.isTypedArray(i))return i.subarray(0,r);for(var o=[],n=0;n<r;n++)o[n]=+i[n];return o}$.exports={calc:function(i,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=e(r.u,r._len),r._v=e(r.v,r._len),r._w=e(r.w,r._len),r._x=e(r.x,r._len),r._y=e(r.y,r._len),r._z=e(r.z,r._len);var o=_(r);r._gridFill=o.fill,r._Xs=o.Xs,r._Ys=o.Ys,r._Zs=o.Zs,r._len=o.len;var n,p,s,a=0;r.starts&&(n=e(r.starts.x||[]),p=e(r.starts.y||[]),s=e(r.starts.z||[]),a=Math.min(n.length,p.length,s.length)),r._startsX=n||[],r._startsY=p||[],r._startsZ=s||[];var c,u=0,h=1/0;for(c=0;c<r._len;c++){var v=r._u[c],f=r._v[c],l=r._w[c],x=Math.sqrt(v*v+f*f+l*l);u=Math.max(u,x),h=Math.min(h,x)}for(g(i,r,{vals:[h,u],containerStr:"",cLetter:"c"}),c=0;c<a;c++){var m=n[c];o.xMax=Math.max(o.xMax,m),o.xMin=Math.min(o.xMin,m);var w=p[c];o.yMax=Math.max(o.yMax,w),o.yMin=Math.min(o.yMin,w);var b=s[c];o.zMax=Math.max(o.zMax,b),o.zMin=Math.min(o.zMin,b)}r._slen=a,r._normMax=u,r._xbnds=[o.xMin,o.xMax],r._ybnds=[o.yMin,o.yMax],r._zbnds=[o.zMin,o.zMax]},filter:e,processGrid:_}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_streamtube3d,g=d.createTubeMesh,_=y("../../lib"),t=y("../../lib/gl_format_color").parseColorScale,e=y("../../components/colorscale").extractOpts,i=y("../../plots/gl3d/zip3"),r={xaxis:0,yaxis:1,zaxis:2};function o(c,u){this.scene=c,this.uid=u,this.mesh=null,this.data=null}var n=o.prototype;function p(c){var u=c.length;return u>2?c.slice(1,u-1):2===u?[(c[0]+c[1])/2]:c}function s(c){var u=c.length;return 1===u?[.5,.5]:[c[1]-c[0],c[u-1]-c[u-2]]}function a(c,u){var h=c.fullSceneLayout,v=c.dataScale,f=u._len,l={};function x(z,N){var V=h[N],Q=v[r[N]];return _.simpleMap(z,function(j){return V.d2l(j)*Q})}if(l.vectors=i(x(u._u,"xaxis"),x(u._v,"yaxis"),x(u._w,"zaxis"),f),!f)return{positions:[],cells:[]};var m=x(u._Xs,"xaxis"),w=x(u._Ys,"yaxis"),b=x(u._Zs,"zaxis");if(l.meshgrid=[m,w,b],l.gridFill=u._gridFill,u._slen)l.startingPositions=i(x(u._startsX,"xaxis"),x(u._startsY,"yaxis"),x(u._startsZ,"zaxis"));else{for(var k=w[0],T=p(m),L=p(b),A=new Array(T.length*L.length),I=0,D=0;D<T.length;D++)for(var S=0;S<L.length;S++)A[I++]=[T[D],k,L[S]];l.startingPositions=A}l.colormap=t(u),l.tubeSize=u.sizeref,l.maxLength=u.maxdisplayed;var C=x(u._xbnds,"xaxis"),R=x(u._ybnds,"yaxis"),F=x(u._zbnds,"zaxis"),H=s(m),U=s(w),X=s(b),Y=d(l,[[C[0]-H[0],R[0]-U[0],F[0]-X[0]],[C[1]+H[1],R[1]+U[1],F[1]+X[1]]]),W=e(u);Y.vertexIntensityBounds=[W.min/u._normMax,W.max/u._normMax];var te=u.lightposition;return Y.lightPosition=[te.x,te.y,te.z],Y.ambient=u.lighting.ambient,Y.diffuse=u.lighting.diffuse,Y.specular=u.lighting.specular,Y.roughness=u.lighting.roughness,Y.fresnel=u.lighting.fresnel,Y.opacity=u.opacity,u._pad=Y.tubeScale*u.sizeref*2,Y}n.handlePick=function(c){var u=this.scene.fullSceneLayout,h=this.scene.dataScale;function v(x,m){var b=h[r[m]];return u[m].l2c(x)/b}if(c.object===this.mesh){var f=c.data.position,l=c.data.velocity;return c.traceCoordinate=[v(f[0],"xaxis"),v(f[1],"yaxis"),v(f[2],"zaxis"),v(l[0],"xaxis"),v(l[1],"yaxis"),v(l[2],"zaxis"),c.data.intensity*this.data._normMax,c.data.divergence],c.textLabel=this.data.hovertext||this.data.text,!0}},n.update=function(c){this.data=c;var u=a(this.scene,c);this.mesh.update(u)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(c,u){var h=c.glplot.gl,v=a(c,u),f=g(h,v),l=new o(c,u.uid);return l.mesh=f,l.data=u,f._trace=l,c.glplot.add(f),l}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/colorscale/defaults"),_=y("./attributes");$.exports=function(t,e,i,r){function o(h,v){return d.coerce(t,e,_,h,v)}var n=o("u"),p=o("v"),s=o("w"),a=o("x"),c=o("y"),u=o("z");n&&n.length&&p&&p.length&&s&&s.length&&a&&a.length&&c&&c.length&&u&&u.length?(o("starts.x"),o("starts.y"),o("starts.z"),o("maxdisplayed"),o("sizeref"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),g(t,e,r,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"streamtube",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:y("./calc").calc,plot:y("./convert"),eventData:function(d,g){return d.tubex=d.x,d.tubey=d.y,d.tubez=d.z,d.tubeu=g.traceCoordinate[3],d.tubev=g.traceCoordinate[4],d.tubew=g.traceCoordinate[5],d.norm=g.traceCoordinate[6],d.divergence=g.traceCoordinate[7],delete d.x,delete d.y,delete d.z,d},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(y,$,ee){"use strict";var d=y("../../plots/attributes"),g=y("../../plots/template_attributes").hovertemplateAttrs,_=y("../../plots/template_attributes").texttemplateAttrs,t=y("../../components/colorscale/attributes"),e=y("../../plots/domain").attributes,i=y("../pie/attributes"),r=y("./constants"),o=y("../../lib/extend").extendFlat;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:o({colors:{valType:"data_array",editType:"calc"},line:{color:o({},i.marker.line.color,{dflt:null}),width:o({},i.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},t("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:i.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:_({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:i.hovertext,hoverinfo:o({},d.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:g({},{keys:r.eventDataKeys}),textfont:i.textfont,insidetextorientation:i.insidetextorientation,insidetextfont:i.insidetextfont,outsidetextfont:o({},i.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:i.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(y,$,ee){"use strict";var d=y("../../plots/plots");ee.name="sunburst",ee.plot=function(g,_,t,e){d.plotBasePlot(ee.name,g,_,t,e)},ee.clean=function(g,_,t,e){d.cleanBasePlot(ee.name,g,_,t,e)}},{"../../plots/plots":619}],1047:[function(y,$,ee){"use strict";var d=y("d3-hierarchy"),g=y("fast-isnumeric"),_=y("../../lib"),t=y("../../components/colorscale").makeColorScaleFuncFromTrace,e=y("../pie/calc").makePullColorFn,i=y("../pie/calc").generateExtendedColors,r=y("../../components/colorscale").calc,o=y("../../constants/numerical").ALMOST_EQUAL,n={},p={},s={};ee.calc=function(a,c){var u,h,v,f,l,x,m=a._fullLayout,w=c.ids,b=_.isArrayOrTypedArray(w),k=c.labels,T=c.parents,L=c.values,A=_.isArrayOrTypedArray(L),I=[],D={},S={},C=function(K){return K||"number"==typeof K},R=function(K){return!A||g(L[K])&&L[K]>=0};b?(u=Math.min(w.length,T.length),h=function(K){return C(w[K])&&R(K)},v=function(K){return String(w[K])}):(u=Math.min(k.length,T.length),h=function(K){return C(k[K])&&R(K)},v=function(K){return String(k[K])}),A&&(u=Math.min(u,L.length));for(var F=0;F<u;F++)if(h(F)){var H=v(F),U=C(T[F])?String(T[F]):"",X={i:F,id:H,pid:U,label:C(k[F])?String(k[F]):""};A&&(X.v=+L[F]),I.push(X),l=H,D[f=U]?D[f].push(l):D[f]=[l],S[l]=1}if(D[""]){if(D[""].length>1){for(var Z=_.randstr(),Y=0;Y<I.length;Y++)""===I[Y].pid&&(I[Y].pid=Z);I.unshift({hasMultipleRoots:!0,id:Z,pid:"",label:""})}}else{var W,te=[];for(W in D)S[W]||te.push(W);if(1!==te.length)return _.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",te.join(", ")].join(" "));I.unshift({hasImpliedRoot:!0,id:W=te[0],pid:"",label:W})}try{x=d.stratify().id(function(K){return K.id}).parentId(function(K){return K.pid})(I)}catch(K){return _.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",K.message].join(" "))}var z=d.hierarchy(x),N=!1;if(A)switch(c.branchvalues){case"remainder":z.sum(function(K){return K.data.v});break;case"total":z.each(function(K){var re=K.data.data,ie=re.v;if(K.children){var ce=K.children.reduce(function(se,de){return se+de.data.data.v},0);if((re.hasImpliedRoot||re.hasMultipleRoots)&&(ie=ce),ie<ce*o)return N=!0,_.warn(["Total value for node",K.data.data.id,"of",c.name,"is smaller than the sum of its children.","\nparent value =",ie,"\nchildren sum =",ce].join(" "))}K.value=ie})}else!function K(re,ie,ce){var se=0,de=re.children;if(de){for(var ue=de.length,ge=0;ge<ue;ge++)se+=K(de[ge],ie,ce);ce.branches&&se++}else ce.leaves&&se++;return re.value=re.data.data.value=se,ie._values||(ie._values=[]),ie._values[re.data.data.i]=se,se}(z,c,{branches:-1!==c.count.indexOf("branches"),leaves:-1!==c.count.indexOf("leaves")});if(!N){var V,Q;c.sort&&z.sort(function(K,re){return re.value-K.value});var j=c.marker.colors||[];return c._hasColorscale?(!!j.length||(j=A?c.values:c._values),r(a,c,{vals:j,containerStr:"marker",cLetter:"c"}),Q=t(c.marker)):V=e(m["_"+c.type+"colormap"]),z.each(function(K){var re=K.data.data;re.color=c._hasColorscale?Q(j[re.i]):V(j[re.i],re.id)}),I[0].hierarchy=z,I}},ee._runCrossTraceCalc=function(a,c){var u=c._fullLayout,h=c.calcdata,v=u[a+"colorway"],f=u["_"+a+"colormap"];u["extend"+a+"colors"]&&(v=i(v,"icicle"===a?s:"treemap"===a?p:n));var l,x=0;function m(k){var T=k.data.data,L=T.id;!1===T.color&&(f[L]?T.color=f[L]:k.parent?k.parent.parent?T.color=k.parent.data.data.color:(f[L]=T.color=v[x%v.length],x++):T.color=l)}for(var w=0;w<h.length;w++){var b=h[w][0];b.trace.type===a&&b.hierarchy&&(l=b.trace.root.color,b.hierarchy.each(m))}},ee.crossTraceCalc=function(a){return ee._runCrossTraceCalc("sunburst",a)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(y,$,ee){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../../plots/domain").defaults,t=y("../bar/defaults").handleText,e=y("../../components/colorscale"),i=e.hasColorscale,r=e.handleDefaults;$.exports=function(o,n,p,s){function a(l,x){return d.coerce(o,n,g,l,x)}var c=a("labels"),u=a("parents");if(c&&c.length&&u&&u.length){var h=a("values");a(h&&h.length?"branchvalues":"count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",s.paper_bgcolor),a("marker.colors");var v=n._hasColorscale=i(o,"marker","colors")||(o.marker||{}).coloraxis;v&&r(o,n,s,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",v?1:.7);var f=a("text");a("texttemplate"),n.texttemplate||a("textinfo",Array.isArray(f)?"text+label":"label"),a("hovertext"),a("hovertemplate"),t(o,n,s,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),_(n,s,a),n._length=null}else n.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../registry"),_=y("../../components/fx/helpers").appendArrayPointValue,t=y("../../components/fx"),e=y("../../lib"),i=y("../../lib/events"),r=y("./helpers"),o=y("../pie/helpers").formatPieValue;function n(p,s,a){for(var c=p.data.data,u={curveNumber:s.index,pointNumber:c.i,data:s._input,fullData:s},h=0;h<a.length;h++){var v=a[h];v in p&&(u[v]=p[v])}return"parentString"in p&&!r.isHierarchyRoot(p)&&(u.parent=p.parentString),_(u,s,c.i),u}$.exports=function(p,s,a,c,u){var h=c[0],v=h.trace,f=h.hierarchy,l="sunburst"===v.type,x="treemap"===v.type||"icicle"===v.type;"_hasHoverLabel"in v||(v._hasHoverLabel=!1),"_hasHoverEvent"in v||(v._hasHoverEvent=!1),p.on("mouseover",function(m){var w=a._fullLayout;if(!a._dragging&&!1!==w.hovermode){var b,k=a._fullData[v.index],T=m.data.data,L=T.i,A=r.isHierarchyRoot(m),I=r.getParent(f,m),D=r.getValue(m),S=function(J){return e.castOption(k,L,J)},C=S("hovertemplate"),R=t.castHoverinfo(k,w,L),F=w.separators;if(C||R&&"none"!==R&&"skip"!==R){var H,U;l&&(H=h.cx+m.pxmid[0]*(1-m.rInscribed),U=h.cy+m.pxmid[1]*(1-m.rInscribed)),x&&(H=m._hoverX,U=m._hoverY);var X,Z={},Y=[],W=[],te=function(J){return-1!==Y.indexOf(J)};R&&(Y="all"===R?k._module.attributes.hoverinfo.flags:R.split("+")),Z.label=T.label,te("label")&&Z.label&&W.push(Z.label),T.hasOwnProperty("v")&&(Z.value=T.v,Z.valueLabel=o(Z.value,F),te("value")&&W.push(Z.valueLabel)),Z.currentPath=m.currentPath=r.getPath(m.data),te("current path")&&!A&&W.push(Z.currentPath);var z=[],N=function(){-1===z.indexOf(X)&&(W.push(X),z.push(X))};Z.percentParent=m.percentParent=D/r.getValue(I),Z.parent=m.parentString=r.getPtLabel(I),te("percent parent")&&(X=r.formatPercent(Z.percentParent,F)+" of "+Z.parent,N()),Z.percentEntry=m.percentEntry=D/r.getValue(s),Z.entry=m.entry=r.getPtLabel(s),!te("percent entry")||A||m.onPathbar||(X=r.formatPercent(Z.percentEntry,F)+" of "+Z.entry,N()),Z.percentRoot=m.percentRoot=D/r.getValue(f),Z.root=m.root=r.getPtLabel(f),te("percent root")&&!A&&(X=r.formatPercent(Z.percentRoot,F)+" of "+Z.root,N()),Z.text=S("hovertext")||S("text"),te("text")&&e.isValidTextValue(X=Z.text)&&W.push(X),b=[n(m,k,u.eventDataKeys)];var V={trace:k,y:U,_x0:m._x0,_x1:m._x1,_y0:m._y0,_y1:m._y1,text:W.join("<br>"),name:C||te("name")?k.name:void 0,color:S("hoverlabel.bgcolor")||T.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:C,hovertemplateLabels:Z,eventData:b};l&&(V.x0=H-m.rInscribed*m.rpx1,V.x1=H+m.rInscribed*m.rpx1,V.idealAlign=m.pxmid[0]<0?"left":"right"),x&&(V.x=H,V.idealAlign=H<0?"left":"right");var Q=[];t.loneHover(V,{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:a,inOut_bbox:Q}),b[0].bbox=Q[0],v._hasHoverLabel=!0}if(x){var j=p.select("path.surface");u.styleOne(j,m,k,{hovered:!0})}v._hasHoverEvent=!0,a.emit("plotly_hover",{points:b||[n(m,k,u.eventDataKeys)],event:d.event})}}),p.on("mouseout",function(m){var w=a._fullLayout,b=a._fullData[v.index],k=d.select(this).datum();if(v._hasHoverEvent&&(m.originalEvent=d.event,a.emit("plotly_unhover",{points:[n(k,b,u.eventDataKeys)],event:d.event}),v._hasHoverEvent=!1),v._hasHoverLabel&&(t.loneUnhover(w._hoverlayer.node()),v._hasHoverLabel=!1),x){var T=p.select("path.surface");u.styleOne(T,k,b,{hovered:!1})}}),p.on("click",function(m){var w=a._fullLayout,b=a._fullData[v.index],k=l&&(r.isHierarchyRoot(m)||r.isLeaf(m)),T=r.getPtId(m),L=r.isEntry(m)?r.findEntryWithChild(f,T):r.findEntryWithLevel(f,T),A=r.getPtId(L),I={points:[n(m,b,u.eventDataKeys)],event:d.event};k||(I.nextLevel=A);var D=i.triggerHandler(a,"plotly_"+v.type+"click",I);if(!1!==D&&w.hovermode&&(a._hoverdata=[n(m,b,u.eventDataKeys)],t.click(a,d.event)),!k&&!1!==D&&!a._dragging&&!a._transitioning){g.call("_storeDirectGUIEdit",b,w._tracePreGUI[b.uid],{level:b.level});var S={data:[{level:A}],traces:[v.index]},C={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};t.loneUnhover(w._hoverlayer.node()),g.call("animate",a,S,C)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color"),_=y("../../lib/setcursor"),t=y("../pie/helpers");function e(i){return i.data.data.pid}ee.findEntryWithLevel=function(i,r){var o;return r&&i.eachAfter(function(n){if(ee.getPtId(n)===r)return o=n.copy()}),o||i},ee.findEntryWithChild=function(i,r){var o;return i.eachAfter(function(n){for(var p=n.children||[],s=0;s<p.length;s++)if(ee.getPtId(p[s])===r)return o=n.copy()}),o||i},ee.isEntry=function(i){return!i.parent},ee.isLeaf=function(i){return!i.children},ee.getPtId=function(i){return i.data.data.id},ee.getPtLabel=function(i){return i.data.data.label},ee.getValue=function(i){return i.value},ee.isHierarchyRoot=function(i){return""===e(i)},ee.setSliceCursor=function(i,r,o){var n=o.isTransitioning;if(!n){var p=i.datum();n=o.hideOnRoot&&ee.isHierarchyRoot(p)||o.hideOnLeaves&&ee.isLeaf(p)}_(i,n?null:"pointer")},ee.getInsideTextFontKey=function(i,r,o,n,p){var a=o.data.data.i;return d.castOption(r,a,((p||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+i)||d.castOption(r,a,"textfont."+i)||n.size},ee.getOutsideTextFontKey=function(i,r,o,n){var p=o.data.data.i;return d.castOption(r,p,"outsidetextfont."+i)||d.castOption(r,p,"textfont."+i)||n.size},ee.isOutsideText=function(i,r){return!i._hasColorscale&&ee.isHierarchyRoot(r)},ee.determineTextFont=function(i,r,o,n){return ee.isOutsideText(i,r)?{color:ee.getOutsideTextFontKey("color",p=i,s=r,a=o),family:ee.getOutsideTextFontKey("family",p,s,a),size:ee.getOutsideTextFontKey("size",p,s,a)}:function(p,s,a,c){var h=s.data.data,v=h.i,f=d.castOption(p,v,((c||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!f&&p._input.textfont&&(f=d.castOption(p._input,v,"textfont.color")),{color:f||g.contrast(h.color),family:ee.getInsideTextFontKey("family",p,s,a,c),size:ee.getInsideTextFontKey("size",p,s,a,c)}}(i,r,o,n);var p,s,a},ee.hasTransition=function(i){return!!(i&&i.duration>0)},ee.getMaxDepth=function(i){return i.maxdepth>=0?i.maxdepth:1/0},ee.isHeader=function(i,r){return!(ee.isLeaf(i)||i.depth===r._maxDepth-1)},ee.getParent=function(i,r){return ee.findEntryWithLevel(i,e(r))},ee.listPath=function(i,r){var o=i.parent;if(!o)return[];var n=r?[o.data[r]]:[o];return ee.listPath(o,r).concat(n)},ee.getPath=function(i){return ee.listPath(i,"label").join("/")+"/"},ee.formatValue=t.formatPieValue,ee.formatPercent=function(i,r){var o=d.formatPercent(i,0);return"0%"===o&&(o=t.formatPiePercent(i,r)),o}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"sunburst",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(y,$,ee){"use strict";$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t){function e(i,r){return d.coerce(_,t,g,i,r)}e("sunburstcolorway",t.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-hierarchy"),_=y("d3-interpolate").interpolate,t=y("../../components/drawing"),e=y("../../lib"),i=y("../../lib/svg_text_utils"),r=y("../bar/uniform_text"),o=r.recordMinTextSize,n=r.clearMinTextSize,p=y("../pie/plot"),s=y("../pie/helpers").getRotationAngle,a=p.computeTransform,c=p.transformInsideText,u=y("./style").styleOne,h=y("../bar/style").resizeText,v=y("./fx"),f=y("./constants"),l=y("./helpers");function x(w,b,k,T){var L=w._fullLayout,A=!L.uniformtext.mode&&l.hasTransition(T),I=d.select(k).selectAll("g.slice"),D=b[0],S=D.trace,R=l.findEntryWithLevel(D.hierarchy,S.level),F=l.getMaxDepth(S),H=L._size,U=S.domain,Z=H.h*(U.y[1]-U.y[0]),Y=.5*Math.min(H.w*(U.x[1]-U.x[0]),Z),W=D.cx=H.l+H.w*(U.x[1]+U.x[0])/2,te=D.cy=H.t+H.h*(1-U.y[0])-Z/2;if(!R)return I.remove();var z=null,N={};A&&I.each(function(Le){N[l.getPtId(Le)]={rpx0:Le.rpx0,rpx1:Le.rpx1,x0:Le.x0,x1:Le.x1,transform:Le.transform},!z&&l.isEntry(Le)&&(z=Le)});var Le,V=(Le=R,g.partition().size([2*Math.PI,Le.height+1])(Le)).descendants(),Q=R.height+1,j=0,J=F;D.hasMultipleRoots&&l.isHierarchyRoot(R)&&(V=V.slice(1),Q-=1,j=1,J+=1),V=V.filter(function(Le){return Le.y1<=J});var K=s(S.rotation);K&&V.forEach(function(Le){Le.x0+=K,Le.x1+=K});var re=Math.min(Q,F),ie=function(Le){return(Le-j)/re*Y},ce=function(Le,fe){return[Le*Math.cos(fe),-Le*Math.sin(fe)]},se=function(Le){return e.pathAnnulus(Le.rpx0,Le.rpx1,Le.x0,Le.x1,W,te)},de=function(Le){return W+m(Le)[0]*(Le.transform.rCenter||0)+(Le.transform.x||0)},ue=function(Le){return te+m(Le)[1]*(Le.transform.rCenter||0)+(Le.transform.y||0)};(I=I.data(V,l.getPtId)).enter().append("g").classed("slice",!0),A?I.exit().transition().each(function(){var Le=d.select(this);Le.select("path.surface").transition().attrTween("d",function(fe){var ve=function(Me){var ke,Ce=l.getPtId(Me),Pe=N[Ce],Fe=N[l.getPtId(R)];if(Fe){var qe=(Me.x1>Fe.x1?2*Math.PI:0)+K;ke=Me.rpx1<Fe.rpx1?{x0:Me.x0,x1:Me.x1,rpx0:0,rpx1:0}:{x0:qe,x1:qe,rpx0:Me.rpx0,rpx1:Me.rpx1}}else{var rt,ze=l.getPtId(Me.parent);I.each(function(pt){if(l.getPtId(pt)===ze)return rt=pt});var He,Xe=rt.children;Xe.forEach(function(pt,xt){if(l.getPtId(pt)===Ce)return He=xt});var Je=Xe.length,at=_(rt.x0,rt.x1);ke={rpx0:Y,rpx1:Y,x0:at(He/Je),x1:at((He+1)/Je)}}return _(Pe,ke)}(fe);return function(Me){return se(ve(Me))}}),Le.select("g.slicetext").attr("opacity",0)}).remove():I.exit().remove(),I.order();var ge=null;if(A&&z){var be=l.getPtId(z);I.each(function(Le){null===ge&&l.getPtId(Le)===be&&(ge=Le.x1)})}var Te=I;function we(Le){var fe=Le.parent,ve=N[l.getPtId(fe)],Me={};if(ve){var ke=fe.children,Ce=ke.indexOf(Le),Pe=ke.length,Fe=_(ve.x0,ve.x1);Me.x0=Fe(Ce/Pe),Me.x1=Fe(Ce/Pe)}else Me.x0=Me.x1=0;return Me}A&&(Te=Te.transition().each("end",function(){var Le=d.select(this);l.setSliceCursor(Le,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Te.each(function(Le){var qe,fe=d.select(this),ve=e.ensureSingle(fe,"path","surface",function(qe){qe.style("pointer-events","all")});Le.rpx0=ie(Le.y0),Le.rpx1=ie(Le.y1),Le.xmid=(Le.x0+Le.x1)/2,Le.pxmid=ce(Le.rpx1,Le.xmid),Le.midangle=-(Le.xmid-Math.PI/2),Le.startangle=-(Le.x0-Math.PI/2),Le.stopangle=-(Le.x1-Math.PI/2),Le.halfangle=.5*Math.min(e.angleDelta(Le.x0,Le.x1)||Math.PI,Math.PI),Le.ring=1-Le.rpx0/Le.rpx1,Le.rInscribed=0===(qe=Le).rpx0&&e.isFullCircle([qe.x0,qe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(qe.halfangle)),qe.ring/2)),A?ve.transition().attrTween("d",function(qe){var rt=function(ze){var He,Xe=N[l.getPtId(ze)],Je={x0:ze.x0,x1:ze.x1,rpx0:ze.rpx0,rpx1:ze.rpx1};if(Xe)He=Xe;else if(z)if(ze.parent)if(ge){var at=(ze.x1>ge?2*Math.PI:0)+K;He={x0:at,x1:at}}else e.extendFlat(He={rpx0:Y,rpx1:Y},we(ze));else He={rpx0:0,rpx1:0};else He={x0:K,x1:K};return _(He,Je)}(qe);return function(ze){return se(rt(ze))}}):ve.attr("d",se),fe.call(v,R,w,b,{eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),ve.call(u,Le,S);var Me=e.ensureSingle(fe,"g","slicetext"),ke=e.ensureSingle(Me,"text","",function(qe){qe.attr("data-notex",1)}),Ce=e.ensureUniformFontSize(w,l.determineTextFont(S,Le,L.font));ke.text(ee.formatSliceLabel(Le,R,S,b,L)).classed("slicetext",!0).attr("text-anchor","middle").call(t.font,Ce).call(i.convertToTspans,w);var Pe=t.bBox(ke.node());Le.transform=c(Pe,Le,D),Le.transform.targetX=de(Le),Le.transform.targetY=ue(Le);var Fe=function(qe,rt){var ze=qe.transform;return a(ze,rt),ze.fontSize=Ce.size,o(S.type,ze,L),e.getTextTransform(ze)};A?ke.transition().attrTween("transform",function(qe){var rt=function(ze){var He,Xe=N[l.getPtId(ze)],Je=ze.transform;if(Xe)He=Xe;else if(He={rpx1:ze.rpx1,transform:{textPosAngle:Je.textPosAngle,scale:0,rotate:Je.rotate,rCenter:Je.rCenter,x:Je.x,y:Je.y}},z)if(ze.parent)if(ge){var at=ze.x1>ge?2*Math.PI:0;He.x0=He.x1=at}else e.extendFlat(He,we(ze));else He.x0=He.x1=K;else He.x0=He.x1=K;var pt=_(He.transform.textPosAngle,ze.transform.textPosAngle),xt=_(He.rpx1,ze.rpx1),Ft=_(He.x0,ze.x0),Dt=_(He.x1,ze.x1),ot=_(He.transform.scale,Je.scale),it=_(He.transform.rotate,Je.rotate),Et=0===Je.rCenter?3:0===He.transform.rCenter?1/3:1,Xt=_(He.transform.rCenter,Je.rCenter);return function(nr){var Ue=xt(nr),We=Ft(nr),Be=Dt(nr),Qe=Xt(Math.pow(nr,Et)),Ae={pxmid:ce(Ue,(We+Be)/2),rpx1:Ue,transform:{textPosAngle:pt(nr),rCenter:Qe,x:Je.x,y:Je.y}};return o(S.type,Je,L),{transform:{targetX:de(Ae),targetY:ue(Ae),scale:ot(nr),rotate:it(nr),rCenter:Qe}}}}(qe);return function(ze){return Fe(rt(ze),Pe)}}):ke.attr("transform",Fe(Le,Pe))})}function m(w){return k=w.transform.textPosAngle,[(b=w.rpx1)*Math.sin(k),-b*Math.cos(k)];var b,k}ee.plot=function(w,b,k,T){var L,A,I=w._fullLayout,D=I._sunburstlayer,S=!k,C=!I.uniformtext.mode&&l.hasTransition(k);n("sunburst",I),(L=D.selectAll("g.trace.sunburst").data(b,function(R){return R[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),L.order(),C?(T&&(A=T()),d.transition().duration(k.duration).ease(k.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){D.selectAll("g.trace").each(function(R){x(w,R,this,k)})})):(L.each(function(R){x(w,R,this,k)}),I.uniformtext.mode&&h(w,I._sunburstlayer.selectAll(".trace"),"sunburst")),S&&L.exit().remove()},ee.formatSliceLabel=function(w,b,k,T,L){var A=k.texttemplate,I=k.textinfo;if(!(A||I&&"none"!==I))return"";var D=L.separators,C=w.data.data,R=T[0].hierarchy,F=l.isHierarchyRoot(w),H=l.getParent(R,w),U=l.getValue(w);if(!A){var X,Z=I.split("+"),Y=function(K){return-1!==Z.indexOf(K)},W=[];if(Y("label")&&C.label&&W.push(C.label),C.hasOwnProperty("v")&&Y("value")&&W.push(l.formatValue(C.v,D)),!F){Y("current path")&&W.push(l.getPath(w.data));var te=0;Y("percent parent")&&te++,Y("percent entry")&&te++,Y("percent root")&&te++;var z=te>1;if(te){var N,V=function(K){X=l.formatPercent(N,D),z&&(X+=" of "+K),W.push(X)};Y("percent parent")&&!F&&(N=U/l.getValue(H),V("parent")),Y("percent entry")&&(N=U/l.getValue(b),V("entry")),Y("percent root")&&(N=U/l.getValue(R),V("root"))}}return Y("text")&&(X=e.castOption(k,C.i,"text"),e.isValidTextValue(X)&&W.push(X)),W.join("<br>")}var Q=e.castOption(k,C.i,"texttemplate");if(!Q)return"";var j={};C.label&&(j.label=C.label),C.hasOwnProperty("v")&&(j.value=C.v,j.valueLabel=l.formatValue(C.v,D)),j.currentPath=l.getPath(w.data),F||(j.percentParent=U/l.getValue(H),j.percentParentLabel=l.formatPercent(j.percentParent,D),j.parent=l.getPtLabel(H)),j.percentEntry=U/l.getValue(b),j.percentEntryLabel=l.formatPercent(j.percentEntry,D),j.entry=l.getPtLabel(b),j.percentRoot=U/l.getValue(R),j.percentRootLabel=l.formatPercent(j.percentRoot,D),j.root=l.getPtLabel(R),C.hasOwnProperty("color")&&(j.color=C.color);var J=e.castOption(k,C.i,"text");return(e.isValidTextValue(J)||""===J)&&(j.text=J),j.customdata=e.castOption(k,C.i,"customdata"),e.texttemplateString(Q,j,L._d3locale,j,k._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/color"),_=y("../../lib"),t=y("../bar/uniform_text").resizeText;function e(i,r,o){var n=r.data.data,p=!r.children,s=n.i,a=_.castOption(o,s,"marker.line.color")||g.defaultLine,c=_.castOption(o,s,"marker.line.width")||0;i.style("stroke-width",c).call(g.fill,n.color).call(g.stroke,a).style("opacity",p?o.leaf.opacity:null)}$.exports={style:function(i){var r=i._fullLayout._sunburstlayer.selectAll(".trace");t(i,r,"sunburst"),r.each(function(o){var n=d.select(this),p=o[0].trace;n.style("opacity",p.opacity),n.selectAll("path.surface").each(function(s){d.select(this).call(e,s,p)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(y,$,ee){"use strict";var d=y("../../components/color"),g=y("../../components/colorscale/attributes"),_=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/attributes"),i=y("../../lib/extend").extendFlat,r=y("../../plot_api/edit_types").overrideAll;function o(p){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:d.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:d.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var n=$.exports=r(i({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:t(),xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},g("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:o(),y:o(),z:o()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:i({},g.zauto,{}),zmin:i({},g.zmin,{}),zmax:i({},g.zmax,{})},hoverinfo:i({},e.hoverinfo),showlegend:i({},e.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/calc");$.exports=function(g,_){d(g,_,_.surfacecolor?{vals:_.surfacecolor,containerStr:"",cLetter:"c"}:{vals:_.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_surface3d,g=y("../../../stackgl_modules").ndarray,_=y("../../../stackgl_modules").ndarray_linear_interpolate.d2,t=y("../heatmap/interp2d"),e=y("../heatmap/find_empties"),i=y("../../lib").isArrayOrTypedArray,r=y("../../lib/gl_format_color").parseColorScale,o=y("../../lib/str2rgbarray"),n=y("../../components/colorscale").extractOpts;function p(k,T,L){this.scene=k,this.uid=L,this.surface=T,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=p.prototype;s.getXat=function(k,T,L,A){var I=i(this.data.x)?i(this.data.x[0])?this.data.x[T][k]:this.data.x[k]:k;return void 0===L?I:A.d2l(I,0,L)},s.getYat=function(k,T,L,A){var I=i(this.data.y)?i(this.data.y[0])?this.data.y[T][k]:this.data.y[T]:T;return void 0===L?I:A.d2l(I,0,L)},s.getZat=function(k,T,L,A){var I=this.data.z[T][k];return null===I&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[T][k]),void 0===L?I:A.d2l(I,0,L)},s.handlePick=function(k){if(k.object===this.surface){var L=(k.data.index[1]-1)/this.dataScaleY-1,A=Math.max(Math.min(Math.round((k.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(L),this.data._ylength-1),0);k.index=[A,I],k.traceCoordinate=[this.getXat(A,I),this.getYat(A,I),this.getZat(A,I)],k.dataCoordinate=[this.getXat(A,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(A,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(A,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++)null!=k.dataCoordinate[D]&&(k.dataCoordinate[D]*=this.scene.dataScale[D]);var C=this.data.hovertext||this.data.text;return k.textLabel=Array.isArray(C)&&C[I]&&void 0!==C[I][A]?C[I][A]:C||"",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function c(k,T){if(k<T)return 0;for(var L=0;0===Math.floor(k%T);)k/=T,L++;return L}function u(k){for(var T=[],L=0;L<a.length;L++)T.push(c(k,a[L]));return T}function h(k){for(var T=u(k),L=k,A=0;A<a.length;A++)if(T[A]>0){L=a[A];break}return L}function v(k,T){if(!(k<1||T<1)){for(var L=u(k),A=u(T),I=1,D=0;D<a.length;D++)I*=Math.pow(a[D],Math.max(L[D],A[D]));return I}}s.calcXnums=function(k){var T,L=[];for(T=1;T<k;T++){var A=this.getXat(T-1,0),I=this.getXat(T,0);L[T-1]=I!==A&&null!=A&&null!=I?Math.abs(I-A):0}var D=0;for(T=1;T<k;T++)D+=L[T-1];for(T=1;T<k;T++)L[T-1]=0===L[T-1]?1:Math.round(D/L[T-1]);return L},s.calcYnums=function(k){var T,L=[];for(T=1;T<k;T++){var A=this.getYat(0,T-1),I=this.getYat(0,T);L[T-1]=I!==A&&null!=A&&null!=I?Math.abs(I-A):0}var D=0;for(T=1;T<k;T++)D+=L[T-1];for(T=1;T<k;T++)L[T-1]=0===L[T-1]?1:Math.round(D/L[T-1]);return L};var f=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],l=f[9],x=f[13];function m(k,T,L){var A=L[8]+L[2]*T[0]+L[5]*T[1];return k[0]=(L[6]+L[0]*T[0]+L[3]*T[1])/A,k[1]=(L[7]+L[1]*T[0]+L[4]*T[1])/A,k}function w(k,T,L){return function(A,I,D,S){for(var C=[0,0],R=A.shape[0],F=A.shape[1],H=0;H<R;H++)for(var U=0;U<F;U++)D(C,[H,U],S),A.set(H,U,_(I,C[0],C[1]))}(k,T,m,L),k}function b(k,T){for(var L=!1,A=0;A<k.length;A++)if(T===k[A]){L=!0;break}!1===L&&k.push(T)}s.estimateScale=function(k,T){for(var L=1+function(I){if(0!==I.length){for(var D=1,S=0;S<I.length;S++)D=v(D,I[S]);return D}}(0===T?this.calcXnums(k):this.calcYnums(k));L<l;)L*=2;for(;L>x;)L--,L/=h(L),++L<l&&(L=x);var A=Math.round(L/k);return A>1?A:1},s.refineCoords=function(k){for(var T=this.dataScaleX,L=this.dataScaleY,A=k[0].shape[0],I=k[0].shape[1],D=0|Math.floor(k[0].shape[0]*T+1),S=0|Math.floor(k[0].shape[1]*L+1),C=1+A+1,R=1+I+1,F=g(new Float32Array(C*R),[C,R]),H=[1/T,0,0,0,1/L,0,0,0,1],U=0;U<k.length;++U){this.surface.padField(F,k[U]);var X=g(new Float32Array(D*S),[D,S]);w(X,F,H),k[U]=X}},s.setContourLevels=function(){var k,T,A=[[],[],[]],I=[!1,!1,!1],D=!1;for(k=0;k<3;++k)if(this.showContour[k]&&(D=!0,this.contourSize[k]>0&&null!==this.contourStart[k]&&null!==this.contourEnd[k]&&this.contourEnd[k]>this.contourStart[k]))for(I[k]=!0,T=this.contourStart[k];T<this.contourEnd[k];T+=this.contourSize[k])b(A[k],T*this.scene.dataScale[k]);if(D){var S=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(S[k]=I[k]?A[k]:this.scene.contourLevels[k]);this.surface.update({levels:S})}},s.update=function(k){var T,L,A,I,D=this.scene,S=D.fullSceneLayout,C=this.surface,R=r(k),F=D.dataScale,H=k.z[0].length,U=k._ylength,X=D.contourLevels;this.data=k;var Z=[];for(T=0;T<3;T++)for(Z[T]=[],L=0;L<H;L++)Z[T][L]=[];for(L=0;L<H;L++)for(A=0;A<U;A++)Z[0][L][A]=this.getXat(L,A,k.xcalendar,S.xaxis),Z[1][L][A]=this.getYat(L,A,k.ycalendar,S.yaxis),Z[2][L][A]=this.getZat(L,A,k.zcalendar,S.zaxis);if(k.connectgaps)for(k._emptypoints=e(Z[2]),t(Z[2],k._emptypoints),k._interpolatedZ=[],L=0;L<H;L++)for(k._interpolatedZ[L]=[],A=0;A<U;A++)k._interpolatedZ[L][A]=Z[2][L][A];for(T=0;T<3;T++)for(L=0;L<H;L++)for(A=0;A<U;A++)null==(I=Z[T][L][A])?Z[T][L][A]=NaN:I=Z[T][L][A]*=F[T];for(T=0;T<3;T++)for(L=0;L<H;L++)for(A=0;A<U;A++)null!=(I=Z[T][L][A])&&(this.minValues[T]>I&&(this.minValues[T]=I),this.maxValues[T]<I&&(this.maxValues[T]=I));for(T=0;T<3;T++)this.objectOffset[T]=.5*(this.minValues[T]+this.maxValues[T]);for(T=0;T<3;T++)for(L=0;L<H;L++)for(A=0;A<U;A++)null!=(I=Z[T][L][A])&&(Z[T][L][A]-=this.objectOffset[T]);var Y=[g(new Float32Array(H*U),[H,U]),g(new Float32Array(H*U),[H,U]),g(new Float32Array(H*U),[H,U])];for(T=0;T<3;T++)for(L=0;L<H;L++)for(A=0;A<U;A++)Y[T].set(L,A,Z[T][L][A]);Z=[];var W={colormap:R,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},te=n(k);if(W.intensityBounds=[te.min,te.max],k.surfacecolor){var z=g(new Float32Array(H*U),[H,U]);for(L=0;L<H;L++)for(A=0;A<U;A++)z.set(L,A,k.surfacecolor[A][L]);Y.push(z)}else W.intensityBounds[0]*=F[2],W.intensityBounds[1]*=F[2];(x<Y[0].shape[0]||x<Y[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(Y[0].shape[0],0),this.dataScaleY=this.estimateScale(Y[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(Y)),k.surfacecolor&&(W.intensity=Y.pop());var j,J,K,N=[!0,!0,!0],V=["x","y","z"];for(T=0;T<3;++T){var Q=k.contours[V[T]];N[T]=Q.highlight,W.showContour[T]=Q.show||Q.highlight,W.showContour[T]&&(W.contourProject[T]=[Q.project.x,Q.project.y,Q.project.z],Q.show?(this.showContour[T]=!0,W.levels[T]=X[T],C.highlightColor[T]=W.contourColor[T]=o(Q.color),C.highlightTint[T]=W.contourTint[T]=Q.usecolormap?0:1,W.contourWidth[T]=Q.width,this.contourStart[T]=Q.start,this.contourEnd[T]=Q.end,this.contourSize[T]=Q.size):(this.showContour[T]=!1,this.contourStart[T]=null,this.contourEnd[T]=null,this.contourSize[T]=0),Q.highlight&&(W.dynamicColor[T]=o(Q.highlightcolor),W.dynamicWidth[T]=Q.highlightwidth))}(J=(j=R)[0].rgb)[0]===(K=j[j.length-1].rgb)[0]&&J[1]===K[1]&&J[2]===K[2]&&J[3]===K[3]&&(W.vertexColor=!0),W.objectOffset=this.objectOffset,W.coords=Y,C.update(W),C.visible=k.visible,C.enableDynamic=N,C.enableHighlight=N,C.snapToData=!0,"lighting"in k&&(C.ambientLight=k.lighting.ambient,C.diffuseLight=k.lighting.diffuse,C.specularLight=k.lighting.specular,C.roughness=k.lighting.roughness,C.fresnel=k.lighting.fresnel),"lightposition"in k&&(C.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function(k,T){var A=d({gl:k.glplot.gl}),I=new p(k,A,T.uid);return A._trace=I,I.update(T),k.glplot.add(A),I}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(y,$,ee){"use strict";var d=y("../../registry"),g=y("../../lib"),_=y("../../components/colorscale/defaults"),t=y("./attributes");function e(r,o,n,p){var s=p("opacityscale");"max"===s?o.opacityscale=[[0,.1],[1,1]]:"min"===s?o.opacityscale=[[0,1],[1,.1]]:"extremes"===s?o.opacityscale=function(a,c){for(var u=[],h=0;h<32;h++){var v=h/31,f=.1+.9*(1-Math.pow(Math.sin(1*v*Math.PI),2));u.push([v,Math.max(0,Math.min(1,f))])}return u}():function(a){var c=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var u=0;u<a.length;u++){var h=a[u];if(2!==h.length||+h[0]<c)return!1;c=+h[0]}return!0}(s)||(o.opacityscale=void 0)}function i(r,o,n){o in r&&!(n in r)&&(r[n]=r[o])}$.exports={supplyDefaults:function(r,o,n,p){var s,a;function c(b,k){return g.coerce(r,o,t,b,k)}var u=c("x"),h=c("y"),v=c("z");if(!v||!v.length||u&&u.length<1||h&&h.length<1)o.visible=!1;else{o._xlength=Array.isArray(u)&&g.isArrayOrTypedArray(u[0])?v.length:v[0].length,o._ylength=v.length,d.getComponentMethod("calendars","handleTraceDefaults")(r,o,["x","y","z"],p),c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(b){c(b)});var f=c("surfacecolor"),l=["x","y","z"];for(s=0;s<3;++s){var x="contours."+l[s],m=c(x+".show"),w=c(x+".highlight");if(m||w)for(a=0;a<3;++a)c(x+".project."+l[a]);m&&(c(x+".color"),c(x+".width"),c(x+".usecolormap")),w&&(c(x+".highlightcolor"),c(x+".highlightwidth")),c(x+".start"),c(x+".end"),c(x+".size")}f||(i(r,"zmin","cmin"),i(r,"zmax","cmax"),i(r,"zauto","cauto")),_(r,o,p,c,{prefix:"",cLetter:"c"}),e(0,o,0,c),o._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:y("./calc"),plot:y("./convert"),moduleType:"trace",name:"surface",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(y,$,ee){"use strict";var d=y("../../components/annotations/attributes"),g=y("../../lib/extend").extendFlat,_=y("../../plot_api/edit_types").overrideAll,t=y("../../plots/font_attributes"),e=y("../../plots/domain").attributes,i=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;($.exports=_({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:g({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},t({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:g({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},t({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(y,$,ee){"use strict";var d=y("../../plots/get_data").getModuleCalcData,g=y("./plot");ee.name="table",ee.plot=function(_){var t=d(_.calcdata,"table")[0];t.length&&g(_,t)},ee.clean=function(_,t,e,i){var r=i._has&&i._has("table"),o=t._has&&t._has("table");r&&!o&&i._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(y,$,ee){"use strict";var d=y("../../lib/gup").wrap;$.exports=function(){return d({})}},{"../../lib/gup":500}],1065:[function(y,$,ee){"use strict";$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(y,$,ee){"use strict";var d=y("./constants"),g=y("../../lib/extend").extendFlat,_=y("fast-isnumeric");function t(s){if(Array.isArray(s)){for(var a=0,c=0;c<s.length;c++)a=Math.max(a,t(s[c]));return a}return s}function e(s,a){return s+a}function i(s){var a,c=s.slice(),u=1/0,h=0;for(a=0;a<c.length;a++)Array.isArray(c[a])||(c[a]=[c[a]]),u=Math.min(u,c[a].length),h=Math.max(h,c[a].length);if(u!==h)for(a=0;a<c.length;a++){var v=h-c[a].length;v&&(c[a]=c[a].concat(r(v)))}return c}function r(s){for(var a=new Array(s),c=0;c<s;c++)a[c]="";return a}function o(s){return s.calcdata.columns.reduce(function(a,c){return c.xIndex<s.xIndex?a+c.columnWidth:a},0)}function n(s,a){return Object.keys(s).map(function(c){return g({},s[c],{auxiliaryBlocks:a})})}function p(s,a){for(var c,u={},h=0,v=0,f={firstRowIndex:null,lastRowIndex:null,rows:[]},l=0,x=0,m=0;m<s.length;m++)f.rows.push({rowIndex:m,rowHeight:c=s[m]}),((v+=c)>=a||m===s.length-1)&&(u[h]=f,f.key=x++,f.firstRowIndex=l,f.lastRowIndex=m,f={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=v,l=m+1,v=0);return u}$.exports=function(s,a){var c=i(a.cells.values),u=function(F){return F.slice(a.header.values.length,F.length)},h=i(a.header.values);h.length&&!h[0].length&&(h[0]=[""],h=i(h));var v=h.concat(u(c).map(function(){return r((h[0]||[""]).length)})),f=a.domain,l=Math.floor(s._fullLayout._size.w*(f.x[1]-f.x[0])),x=Math.floor(s._fullLayout._size.h*(f.y[1]-f.y[0])),m=a.header.values.length?v[0].map(function(){return a.header.height}):[d.emptyHeaderHeight],w=c.length?c[0].map(function(){return a.cells.height}):[],b=m.reduce(e,0),k=p(w,x-b+d.uplift),T=n(p(m,b),[]),L=n(k,T),A={},I=a._fullInput.columnorder.concat(u(c.map(function(F,H){return H}))),D=v.map(function(F,H){var U=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(H,a.columnwidth.length-1)]:a.columnwidth;return _(U)?Number(U):1}),S=D.reduce(e,0);D=D.map(function(F){return F/S*l});var C=Math.max(t(a.header.line.width),t(a.cells.line.width)),R={key:a.uid+s._context.staticPlot,translateX:f.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-f.y[1]),size:s._fullLayout._size,width:l,maxLineWidth:C,height:x,columnOrder:I,groupHeight:x,rowBlocks:L,headerRowBlocks:T,scrollY:0,cells:g({},a.cells,{values:c}),headerCells:g({},a.header,{values:v}),gdColumns:v.map(function(F){return F[0]}),gdColumnsOriginalOrder:v.map(function(F){return F[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:v.map(function(F,H){return A[F]=(A[F]||0)+1,{key:F+"__"+A[F],label:F,specIndex:H,xIndex:I[H],xScale:o,x:void 0,calcdata:void 0,columnWidth:D[H]}})};return R.columns.forEach(function(F){F.calcdata=R,F.x=o(F)}),R}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(y,$,ee){"use strict";var d=y("../../lib/extend").extendFlat;ee.splitToPanels=function(g){var _=[0,0],t=d({},g,{key:"header",type:"header",page:0,prevPages:_,currentRepaint:[null,null],dragHandle:!0,values:g.calcdata.headerCells.values[g.specIndex],rowBlocks:g.calcdata.headerRowBlocks,calcdata:d({},g.calcdata,{cells:g.calcdata.headerCells})});return[d({},g,{key:"cells1",type:"cells",page:0,prevPages:_,currentRepaint:[null,null],dragHandle:!1,values:g.calcdata.cells.values[g.specIndex],rowBlocks:g.calcdata.rowBlocks}),d({},g,{key:"cells2",type:"cells",page:1,prevPages:_,currentRepaint:[null,null],dragHandle:!1,values:g.calcdata.cells.values[g.specIndex],rowBlocks:g.calcdata.rowBlocks}),t]},ee.splitToCells=function(g){var t,e,i,_=[i=(e=(t=g).rowBlocks[t.page])?e.rows[0].rowIndex:0,e?i+e.rows.length:0];return(g.values||[]).slice(_[0],_[1]).map(function(t,e){return{keyWithinBlock:e+("string"==typeof t&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:_[0]+e,column:g,calcdata:g.calcdata,page:g.page,rowBlocks:g.rowBlocks,value:t}})}},{"../../lib/extend":493}],1068:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../../plots/domain").defaults;$.exports=function(t,e,i,r){function o(n,p){return d.coerce(t,e,g,n,p)}_(e,r,o),o("columnwidth"),o("header.values"),o("header.format"),o("header.align"),o("header.prefix"),o("header.suffix"),o("header.height"),o("header.line.width"),o("header.line.color"),o("header.fill.color"),d.coerceFont(o,"header.font",d.extendFlat({},r.font)),function(n,p){for(var a=n.header.values.length,c=(n.columnorder||[]).slice(0,a),u=c.slice().sort(function(f,l){return f-l}),h=c.map(function(f){return u.indexOf(f)}),v=h.length;v<a;v++)h.push(v);p("columnorder",h)}(e,o),o("cells.values"),o("cells.format"),o("cells.align"),o("cells.prefix"),o("cells.suffix"),o("cells.height"),o("cells.line.width"),o("cells.line.color"),o("cells.fill.color"),d.coerceFont(o,"cells.font",d.extendFlat({},r.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),moduleType:"trace",name:"table",basePlotModule:y("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(y,$,ee){"use strict";var d=y("./constants"),g=y("@plotly/d3"),_=y("../../lib").numberFormat,t=y("../../lib/gup"),e=y("../../components/drawing"),i=y("../../lib/svg_text_utils"),r=y("../../lib").raiseToTop,o=y("../../lib").strTranslate,n=y("../../lib").cancelTransition,p=y("./data_preparation_helper"),s=y("./data_split_helpers"),a=y("../../components/color");function c(Y){return Math.ceil(Y.calcdata.maxLineWidth/2)}function u(Y,W){return"clip"+Y._fullLayout._uid+"_scrollAreaBottomClip_"+W.key}function h(Y,W){return"clip"+Y._fullLayout._uid+"_columnBoundaryClippath_"+W.calcdata.key+"_"+W.specIndex}function v(Y){return[].concat.apply([],Y.map(function(W){return W})).map(function(W){return W.__data__})}function f(Y,W,te){var z=Y.selectAll("."+d.cn.scrollbarKit).data(t.repeat,t.keyFun);z.enter().append("g").classed(d.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),z.each(function(J){var ie,K=J.scrollbarState;K.totalHeight=H(ie=J.rowBlocks,ie.length-1)+(ie.length?U(ie[ie.length-1],1/0):1),K.scrollableAreaHeight=J.groupHeight-L(J),K.currentlyVisibleHeight=Math.min(K.totalHeight,K.scrollableAreaHeight),K.ratio=K.currentlyVisibleHeight/K.totalHeight,K.barLength=Math.max(K.ratio*K.currentlyVisibleHeight,d.goldenRatio*d.scrollbarWidth),K.barWiggleRoom=K.currentlyVisibleHeight-K.barLength,K.wiggleRoom=Math.max(0,K.totalHeight-K.scrollableAreaHeight),K.topY=0===K.barWiggleRoom?0:J.scrollY/K.wiggleRoom*K.barWiggleRoom,K.bottomY=K.topY+K.barLength,K.dragMultiplier=K.wiggleRoom/K.barWiggleRoom}).attr("transform",function(J){return o(J.width+d.scrollbarWidth/2+d.scrollbarOffset,L(J))});var N=z.selectAll("."+d.cn.scrollbar).data(t.repeat,t.keyFun);N.enter().append("g").classed(d.cn.scrollbar,!0);var V=N.selectAll("."+d.cn.scrollbarSlider).data(t.repeat,t.keyFun);V.enter().append("g").classed(d.cn.scrollbarSlider,!0),V.attr("transform",function(J){return o(0,J.scrollbarState.topY||0)});var Q=V.selectAll("."+d.cn.scrollbarGlyph).data(t.repeat,t.keyFun);Q.enter().append("line").classed(d.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",d.scrollbarWidth).attr("stroke-linecap","round").attr("y1",d.scrollbarWidth/2),Q.attr("y2",function(J){return J.scrollbarState.barLength-d.scrollbarWidth/2}).attr("stroke-opacity",function(J){return J.columnDragInProgress||!J.scrollbarState.barWiggleRoom||te?0:.4}),Q.transition().delay(0).duration(0),Q.transition().delay(d.scrollbarHideDelay).duration(d.scrollbarHideDuration).attr("stroke-opacity",0);var j=N.selectAll("."+d.cn.scrollbarCaptureZone).data(t.repeat,t.keyFun);j.enter().append("line").classed(d.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",d.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(J){var K=g.event.y,re=this.getBoundingClientRect(),ie=J.scrollbarState,ce=K-re.top,se=g.scale.linear().domain([0,ie.scrollableAreaHeight]).range([0,ie.totalHeight]).clamp(!0);ie.topY<=ce&&ce<=ie.bottomY||I(W,Y,null,se(ce-ie.barLength/2))(J)}).call(g.behavior.drag().origin(function(J){return g.event.stopPropagation(),J.scrollbarState.scrollbarScrollInProgress=!0,J}).on("drag",I(W,Y)).on("dragend",function(){})),j.attr("y2",function(J){return J.scrollbarState.scrollableAreaHeight}),W._context.staticPlot&&(Q.remove(),j.remove())}function l(Y,W,te,z){var j,N=function(Q){var j=Q.selectAll("."+d.cn.columnCell).data(s.splitToCells,function(J){return J.keyWithinBlock});return j.enter().append("g").classed(d.cn.columnCell,!0),j.exit().remove(),j}(((j=te.selectAll("."+d.cn.columnCells).data(t.repeat,t.keyFun)).enter().append("g").classed(d.cn.columnCells,!0),j.exit().remove(),j));N.each(function(j,J){var K=j.calcdata.cells.font,re=j.column.specIndex,ie={size:w(K.size,re,J),color:w(K.color,re,J),family:w(K.family,re,J)};j.rowNumber=j.key,j.align=w(j.calcdata.cells.align,re,J),j.cellBorderWidth=w(j.calcdata.cells.line.width,re,J),j.font=ie}),function(Q){Q.attr("width",function(j){return j.column.columnWidth}).attr("stroke-width",function(j){return j.cellBorderWidth}).each(function(j){var J=g.select(this);a.stroke(J,w(j.calcdata.cells.line.color,j.column.specIndex,j.rowNumber)),a.fill(J,w(j.calcdata.cells.fill.color,j.column.specIndex,j.rowNumber))})}(function(Q){var j=Q.selectAll("."+d.cn.cellRect).data(t.repeat,function(J){return J.keyWithinBlock});return j.enter().append("rect").classed(d.cn.cellRect,!0),j}(N));var V=function(Q){var j=Q.selectAll("."+d.cn.cellText).data(t.repeat,function(J){return J.keyWithinBlock});return j.enter().append("text").classed(d.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){g.event.stopPropagation()}),j}(function(Q){var j=Q.selectAll("."+d.cn.cellTextHolder).data(t.repeat,function(J){return J.keyWithinBlock});return j.enter().append("g").classed(d.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),j}(N));(function(Q){Q.each(function(j){e.font(g.select(this),j.font)})})(V),x(V,W,z,Y),F(N)}function x(Y,W,te,z){Y.text(function(N){var V=N.column.specIndex,Q=N.rowNumber,j=N.value,J="string"==typeof j,K=J&&j.match(/<br>/i),re=!J||K;N.mayHaveMarkup=J&&j.match(/[<&>]/);var ie,ce="string"==typeof(ie=j)&&ie.match(d.latexCheck);N.latex=ce;var se,de,ue=ce?"":w(N.calcdata.cells.prefix,V,Q)||"",ge=ce?"":w(N.calcdata.cells.suffix,V,Q)||"",be=ce?null:w(N.calcdata.cells.format,V,Q)||null,Te=ue+(be?_(be)(N.value):N.value)+ge;if(N.wrappingNeeded=!N.wrapped&&!re&&!ce&&(se=m(Te)),N.cellHeightMayIncrease=K||ce||N.mayHaveMarkup||(void 0===se?m(Te):se),N.needsConvertToTspans=N.mayHaveMarkup||N.wrappingNeeded||N.latex,N.wrappingNeeded){var we=(" "===d.wrapSplitCharacter?Te.replace(/<a href=/gi,"<a_href="):Te).split(d.wrapSplitCharacter),Le=" "===d.wrapSplitCharacter?we.map(function(fe){return fe.replace(/<a_href=/gi,"<a href=")}):we;N.fragments=Le.map(function(fe){return{text:fe,width:null}}),N.fragments.push({fragment:d.wrapSpacer,width:null}),de=Le.join(d.lineBreaker)+d.lineBreaker+d.wrapSpacer}else delete N.fragments,de=Te;return de}).attr("dy",function(N){return N.needsConvertToTspans?0:"0.75em"}).each(function(N){var V=g.select(this);N.needsConvertToTspans?i.convertToTspans(V,z,(N.wrappingNeeded?S:C)(te,this,W,z,N)):g.select(this.parentNode).attr("transform",function(j){return o(R(j),d.cellPad)}).attr("text-anchor",function(j){return{left:"start",center:"middle",right:"end"}[j.align]})})}function m(Y){return-1!==Y.indexOf(d.wrapSplitCharacter)}function w(Y,W,te){if(Array.isArray(Y)){var z=Y[Math.min(W,Y.length-1)];return Array.isArray(z)?z[Math.min(te,z.length-1)]:z}return Y}function b(Y,W,te){Y.transition().ease(d.releaseTransitionEase).duration(d.releaseTransitionDuration).attr("transform",o(W.x,te))}function k(Y){return"cells"===Y.type}function T(Y){return"header"===Y.type}function L(Y){return(Y.rowBlocks.length?Y.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(W,te){return W+U(te,1/0)},0)}function A(Y,W,te){var z=v(W)[0];if(void 0!==z){var N=z.rowBlocks,V=z.calcdata,Q=H(N,N.length),j=z.calcdata.groupHeight-L(z),J=V.scrollY=Math.max(0,Math.min(Q-j,V.scrollY)),K=function(re,ie,ce){for(var se=[],de=0,ue=0;ue<re.length;ue++){for(var ge=re[ue],be=ge.rows,Te=0,we=0;we<be.length;we++)Te+=be[we].rowHeight;ge.allRowsHeight=Te,ie<de+Te&&ie+ce>de&&se.push(ue),de+=Te}return se}(N,J,j);1===K.length&&(K[0]===N.length-1?K.unshift(K[0]-1):K.push(K[0]+1)),K[0]%2&&K.reverse(),W.each(function(re,ie){re.page=K[ie],re.scrollY=J}),W.attr("transform",function(re){var ie=H(re.rowBlocks,re.page)-re.scrollY;return o(0,ie)}),Y&&(D(Y,te,W,K,z.prevPages,z,0),D(Y,te,W,K,z.prevPages,z,1),f(te,Y))}}function I(Y,W,te,z){return function(N){var V=N.calcdata?N.calcdata:N,Q=W.filter(function(re){return V.key===re.key}),J=V.scrollY;V.scrollY=void 0===z?V.scrollY+(te||V.scrollbarState.dragMultiplier)*g.event.dy:z;var K=Q.selectAll("."+d.cn.yColumn).selectAll("."+d.cn.columnBlock).filter(k);return A(Y,K,Q),V.scrollY===J}}function D(Y,W,te,z,N,V,Q){z[Q]!==N[Q]&&(clearTimeout(V.currentRepaint[Q]),V.currentRepaint[Q]=setTimeout(function(){var j=te.filter(function(J,K){return K===Q&&z[K]!==N[K]});l(Y,W,j,te),N[Q]=z[Q]}))}function S(Y,W,te,z){return function(){var N=g.select(W.parentNode);N.each(function(V){var Q=V.fragments;N.selectAll("tspan.line").each(function(de,ue){Q[ue].width=this.getComputedTextLength()});var j,J,K=Q[Q.length-1].width,re=Q.slice(0,-1),ie=[],ce=0,se=V.column.columnWidth-2*d.cellPad;for(V.value="";re.length;)ce+(J=(j=re.shift()).width+K)>se&&(V.value+=ie.join(d.wrapSpacer)+d.lineBreaker,ie=[],ce=0),ie.push(j.text),ce+=J;ce&&(V.value+=ie.join(d.wrapSpacer)),V.wrapped=!0}),N.selectAll("tspan.line").remove(),x(N.select("."+d.cn.cellText),te,Y,z),g.select(W.parentNode.parentNode).call(F)}}function C(Y,W,te,z,N){return function(){if(!N.settledY){var V=g.select(W.parentNode),Q=Z(N),j=N.key-Q.firstRowIndex,J=Q.rows[j].rowHeight,K=N.cellHeightMayIncrease?W.parentNode.getBoundingClientRect().height+2*d.cellPad:J,re=Math.max(K,J);re-Q.rows[j].rowHeight&&(Q.rows[j].rowHeight=re,Y.selectAll("."+d.cn.columnCell).call(F),A(null,Y.filter(k),0),f(te,z,!0)),V.attr("transform",function(){var ie=this.parentNode.getBoundingClientRect(),ce=g.select(this.parentNode).select("."+d.cn.cellRect).node().getBoundingClientRect(),se=this.transform.baseVal.consolidate(),de=ce.top-ie.top+(se?se.matrix.f:d.cellPad);return o(R(N,g.select(this.parentNode).select("."+d.cn.cellTextHolder).node().getBoundingClientRect().width),de)}),N.settledY=!0}}}function R(Y,W){switch(Y.align){case"left":return d.cellPad;case"right":return Y.column.columnWidth-(W||0)-d.cellPad;case"center":return(Y.column.columnWidth-(W||0))/2;default:return d.cellPad}}function F(Y){Y.attr("transform",function(W){var te=W.rowBlocks[0].auxiliaryBlocks.reduce(function(N,V){return N+U(V,1/0)},0),z=U(Z(W),W.key);return o(0,z+te)}).selectAll("."+d.cn.cellRect).attr("height",function(W){return(te=Z(W),z=W.key,te.rows[z-te.firstRowIndex]).rowHeight;var te,z})}function H(Y,W){for(var te=0,z=W-1;z>=0;z--)te+=X(Y[z]);return te}function U(Y,W){for(var te=0,z=0;z<Y.rows.length&&Y.rows[z].rowIndex<W;z++)te+=Y.rows[z].rowHeight;return te}function X(Y){var W=Y.allRowsHeight;if(void 0!==W)return W;for(var te=0,z=0;z<Y.rows.length;z++)te+=Y.rows[z].rowHeight;return Y.allRowsHeight=te,te}function Z(Y){return Y.rowBlocks[Y.page]}$.exports=function(Y,W){var te=!Y._context.staticPlot,z=Y._fullLayout._paper.selectAll("."+d.cn.table).data(W.map(function(ge){var be=t.unwrap(ge).trace;return p(Y,be)}),t.keyFun);z.exit().remove(),z.enter().append("g").classed(d.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),z.attr("width",function(ge){return ge.width+ge.size.l+ge.size.r}).attr("height",function(ge){return ge.height+ge.size.t+ge.size.b}).attr("transform",function(ge){return o(ge.translateX,ge.translateY)});var N=z.selectAll("."+d.cn.tableControlView).data(t.repeat,t.keyFun),V=N.enter().append("g").classed(d.cn.tableControlView,!0).style("box-sizing","content-box");if(te){var Q="onwheel"in document?"wheel":"mousewheel";V.on("mousemove",function(ge){N.filter(function(be){return ge===be}).call(f,Y)}).on(Q,function(ge){ge.scrollbarState.wheeling||(ge.scrollbarState.wheeling=!0,I(Y,N,null,ge.scrollY+g.event.deltaY)(ge)||(g.event.stopPropagation(),g.event.preventDefault()),ge.scrollbarState.wheeling=!1)}).call(f,Y,!0)}N.attr("transform",function(ge){return o(ge.size.l,ge.size.t)});var j=N.selectAll("."+d.cn.scrollBackground).data(t.repeat,t.keyFun);j.enter().append("rect").classed(d.cn.scrollBackground,!0).attr("fill","none"),j.attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}),N.each(function(ge){e.setClipUrl(g.select(this),u(Y,ge),Y)});var J=N.selectAll("."+d.cn.yColumn).data(function(ge){return ge.columns},t.keyFun);J.enter().append("g").classed(d.cn.yColumn,!0),J.exit().remove(),J.attr("transform",function(ge){return o(ge.x,0)}),te&&J.call(g.behavior.drag().origin(function(ge){return b(g.select(this),ge,-d.uplift),r(this),ge.calcdata.columnDragInProgress=!0,f(N.filter(function(be){return ge.calcdata.key===be.key}),Y),ge}).on("drag",function(ge){var be=g.select(this),Te=function(we){return(ge===we?g.event.x:we.x)+we.columnWidth/2};ge.x=Math.max(-d.overdrag,Math.min(ge.calcdata.width+d.overdrag-ge.columnWidth,g.event.x)),v(J).filter(function(we){return we.calcdata.key===ge.calcdata.key}).sort(function(we,Le){return Te(we)-Te(Le)}).forEach(function(we,Le){we.xIndex=Le,we.x=ge===we?we.x:we.xScale(we)}),J.filter(function(we){return ge!==we}).transition().ease(d.transitionEase).duration(d.transitionDuration).attr("transform",function(we){return o(we.x,0)}),be.call(n).attr("transform",o(ge.x,-d.uplift))}).on("dragend",function(ge){var we,Le,fe,ve,be=g.select(this),Te=ge.calcdata;ge.x=ge.xScale(ge),ge.calcdata.columnDragInProgress=!1,b(be,ge,0),we=Y,Le=Te,fe=Te.columns.map(function(we){return we.xIndex}),ve=Le.gdColumnsOriginalOrder,Le.gdColumns.sort(function(Me,ke){return fe[ve.indexOf(Me)]-fe[ve.indexOf(ke)]}),Le.columnorder=fe,we.emit("plotly_restyle")})),J.each(function(ge){e.setClipUrl(g.select(this),h(Y,ge),Y)});var K=J.selectAll("."+d.cn.columnBlock).data(s.splitToPanels,t.keyFun);K.enter().append("g").classed(d.cn.columnBlock,!0).attr("id",function(ge){return ge.key}),K.style("cursor",function(ge){return ge.dragHandle?"ew-resize":ge.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var re=K.filter(T),ie=K.filter(k);te&&ie.call(g.behavior.drag().origin(function(ge){return g.event.stopPropagation(),ge}).on("drag",I(Y,N,-1)).on("dragend",function(){})),l(Y,N,re,K),l(Y,N,ie,K);var ce=N.selectAll("."+d.cn.scrollAreaClip).data(t.repeat,t.keyFun);ce.enter().append("clipPath").classed(d.cn.scrollAreaClip,!0).attr("id",function(ge){return u(Y,ge)});var se=ce.selectAll("."+d.cn.scrollAreaClipRect).data(t.repeat,t.keyFun);se.enter().append("rect").classed(d.cn.scrollAreaClipRect,!0).attr("x",-d.overdrag).attr("y",-d.uplift).attr("fill","none"),se.attr("width",function(ge){return ge.width+2*d.overdrag}).attr("height",function(ge){return ge.height+d.uplift}),J.selectAll("."+d.cn.columnBoundary).data(t.repeat,t.keyFun).enter().append("g").classed(d.cn.columnBoundary,!0);var de=J.selectAll("."+d.cn.columnBoundaryClippath).data(t.repeat,t.keyFun);de.enter().append("clipPath").classed(d.cn.columnBoundaryClippath,!0),de.attr("id",function(ge){return h(Y,ge)});var ue=de.selectAll("."+d.cn.columnBoundaryRect).data(t.repeat,t.keyFun);ue.enter().append("rect").classed(d.cn.columnBoundaryRect,!0).attr("fill","none"),ue.attr("width",function(ge){return ge.columnWidth+2*c(ge)}).attr("height",function(ge){return ge.calcdata.height+2*c(ge)+d.uplift}).attr("x",function(ge){return-c(ge)}).attr("y",function(ge){return-c(ge)}),A(null,ie,N)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(y,$,ee){"use strict";var d=y("../../plots/template_attributes").hovertemplateAttrs,g=y("../../plots/template_attributes").texttemplateAttrs,_=y("../../components/colorscale/attributes"),t=y("../../plots/domain").attributes,e=y("../pie/attributes"),i=y("../sunburst/attributes"),r=y("./constants"),o=y("../../lib/extend").extendFlat;$.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:o({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:i.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:i.marker.line,editType:"calc"},_("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:o({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:i.textinfo,texttemplate:g({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:i.hoverinfo,hovertemplate:d({},{keys:r.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:o({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:i.root,domain:t({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(y,$,ee){"use strict";var d=y("../../plots/plots");ee.name="treemap",ee.plot=function(g,_,t,e){d.plotBasePlot(ee.name,g,_,t,e)},ee.clean=function(g,_,t,e){d.cleanBasePlot(ee.name,g,_,t,e)}},{"../../plots/plots":619}],1073:[function(y,$,ee){"use strict";var d=y("../sunburst/calc");ee.calc=function(g,_){return d.calc(g,_)},ee.crossTraceCalc=function(g){return d._runCrossTraceCalc("treemap",g)}},{"../sunburst/calc":1047}],1074:[function(y,$,ee){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../../components/color"),t=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText,i=y("../bar/constants").TEXTPAD,r=y("../../components/colorscale"),o=r.hasColorscale,n=r.handleDefaults;$.exports=function(p,s,a,c){function u(k,T){return d.coerce(p,s,g,k,T)}var h=u("labels"),v=u("parents");if(h&&h.length&&v&&v.length){var f=u("values");u(f&&f.length?"branchvalues":"count"),u("level"),u("maxdepth"),"squarify"===u("tiling.packing")&&u("tiling.squarifyratio"),u("tiling.flip"),u("tiling.pad");var l=u("text");u("texttemplate"),s.texttemplate||u("textinfo",Array.isArray(l)?"text+label":"label"),u("hovertext"),u("hovertemplate");var x=u("pathbar.visible");e(p,s,c,u,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition");var m=-1!==s.textposition.indexOf("bottom");u("marker.line.width")&&u("marker.line.color",c.paper_bgcolor);var w=u("marker.colors");(s._hasColorscale=o(p,"marker","colors")||(p.marker||{}).coloraxis)?n(p,s,c,u,{prefix:"marker.",cLetter:"c"}):u("marker.depthfade",!(w||[]).length);var b=2*s.textfont.size;u("marker.pad.t",m?b/4:b),u("marker.pad.l",b/4),u("marker.pad.r",b/4),u("marker.pad.b",m?b:b/4),s._hovered={marker:{line:{width:2,color:_.contrast(c.paper_bgcolor)}}},x&&(u("pathbar.thickness",s.pathbar.textfont.size+2*i),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),t(s,c,u),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../sunburst/helpers"),_=y("../bar/uniform_text").clearMinTextSize,t=y("../bar/style").resizeText,e=y("./plot_one");$.exports=function(i,r,o,n,p){var s,a,c=p.type,u=p.drawDescendants,h=i._fullLayout,v=h["_"+c+"layer"],f=!o;_(c,h),(s=v.selectAll("g.trace."+c).data(r,function(l){return l[0].trace.uid})).enter().append("g").classed("trace",!0).classed(c,!0),s.order(),!h.uniformtext.mode&&g.hasTransition(o)?(n&&(a=n()),d.transition().duration(o.duration).ease(o.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){v.selectAll("g.trace").each(function(l){e(i,l,this,o,u)})})):(s.each(function(l){e(i,l,this,o,u)}),h.uniformtext.mode&&t(i,v.selectAll(".trace"),c)),f&&s.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing"),t=y("../../lib/svg_text_utils"),e=y("./partition"),i=y("./style").styleOne,r=y("./constants"),o=y("../sunburst/helpers"),n=y("../sunburst/fx");$.exports=function(p,s,a,c,u){var h=u.barDifY,v=u.width,f=u.height,l=u.viewX,x=u.viewY,m=u.pathSlice,w=u.toMoveInsideSlice,b=u.strTransform,k=u.hasTransition,T=u.handleSlicesExit,L=u.makeUpdateSliceInterpolator,A=u.makeUpdateTextInterpolator,I={},D=p._fullLayout,S=s[0],C=S.trace,R=S.hierarchy,F=v/C._entryDepth,H=o.listPath(a.data,"id"),U=e(R.copy(),[v,f],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(U=U.filter(function(Z){var Y=H.indexOf(Z.data.id);return-1!==Y&&(Z.x0=F*Y,Z.x1=F*(Y+1),Z.y0=h,Z.y1=h+f,Z.onPathbar=!0,!0)})).reverse(),(c=c.data(U,o.getPtId)).enter().append("g").classed("pathbar",!0),T(c,!0,I,[v,f],m),c.order();var X=c;k&&(X=X.transition().each("end",function(){var Z=d.select(this);o.setSliceCursor(Z,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(Z){Z._x0=l(Z.x0),Z._x1=l(Z.x1),Z._y0=x(Z.y0),Z._y1=x(Z.y1),Z._hoverX=l(Z.x1-Math.min(v,f)/2),Z._hoverY=x(Z.y1-f/2);var Y=d.select(this),W=g.ensureSingle(Y,"path","surface",function(V){V.style("pointer-events","all")});k?W.transition().attrTween("d",function(V){var Q=L(V,!0,I,[v,f]);return function(j){return m(Q(j))}}):W.attr("d",m),Y.call(n,a,p,s,{styleOne:i,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:p._transitioning}),W.call(i,Z,C,{hovered:!1}),Z._text=(o.getPtLabel(Z)||"").split("<br>").join(" ")||"";var te=g.ensureSingle(Y,"g","slicetext"),z=g.ensureSingle(te,"text","",function(V){V.attr("data-notex",1)}),N=g.ensureUniformFontSize(p,o.determineTextFont(C,Z,D.font,{onPathbar:!0}));z.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(_.font,N).call(t.convertToTspans,p),Z.textBB=_.bBox(z.node()),Z.transform=w(Z,{fontSize:N.size,onPathbar:!0}),Z.transform.fontSize=N.size,k?z.transition().attrTween("transform",function(V){var Q=A(V,!0,I,[v,f]);return function(j){return b(Q(j))}}):z.attr("transform",b(Z))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing"),t=y("../../lib/svg_text_utils"),e=y("./partition"),i=y("./style").styleOne,r=y("./constants"),o=y("../sunburst/helpers"),n=y("../sunburst/fx"),p=y("../sunburst/plot").formatSliceLabel;$.exports=function(s,a,c,u,h){var v=h.width,f=h.height,l=h.viewX,x=h.viewY,m=h.pathSlice,w=h.toMoveInsideSlice,b=h.strTransform,k=h.hasTransition,T=h.handleSlicesExit,L=h.makeUpdateSliceInterpolator,A=h.makeUpdateTextInterpolator,I=h.prevEntry,D=s._fullLayout,S=a[0].trace,C=-1!==S.textposition.indexOf("left"),R=-1!==S.textposition.indexOf("right"),F=-1!==S.textposition.indexOf("bottom"),H=!F&&!S.marker.pad.t||F&&!S.marker.pad.b,U=e(c,[v,f],{packing:S.tiling.packing,squarifyratio:S.tiling.squarifyratio,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,pad:{inner:S.tiling.pad,top:S.marker.pad.t,left:S.marker.pad.l,right:S.marker.pad.r,bottom:S.marker.pad.b}}).descendants(),X=1/0,Z=-1/0;U.forEach(function(N){var V=N.depth;V>=S._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(X=Math.min(X,V),Z=Math.max(Z,V))}),u=u.data(U,o.getPtId),S._maxVisibleLayers=isFinite(Z)?Z-X+1:0,u.enter().append("g").classed("slice",!0),T(u,!1,{},[v,f],m),u.order();var Y=null;if(k&&I){var W=o.getPtId(I);u.each(function(N){null===Y&&o.getPtId(N)===W&&(Y={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var te=function(){return Y||{x0:0,x1:v,y0:0,y1:f}},z=u;return k&&(z=z.transition().each("end",function(){var N=d.select(this);o.setSliceCursor(N,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),z.each(function(N){var V=o.isHeader(N,S);N._x0=l(N.x0),N._x1=l(N.x1),N._y0=x(N.y0),N._y1=x(N.y1),N._hoverX=l(N.x1-S.marker.pad.r),N._hoverY=x(F?N.y1-S.marker.pad.b/2:N.y0+S.marker.pad.t/2);var Q=d.select(this),j=g.ensureSingle(Q,"path","surface",function(ie){ie.style("pointer-events","all")});k?j.transition().attrTween("d",function(ie){var ce=L(ie,!1,te(),[v,f]);return function(se){return m(ce(se))}}):j.attr("d",m),Q.call(n,c,s,a,{styleOne:i,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,s,{isTransitioning:s._transitioning}),j.call(i,N,S,{hovered:!1}),N._text=N.x0===N.x1||N.y0===N.y1?"":V?H?"":o.getPtLabel(N)||"":p(N,c,S,a,D)||"";var J=g.ensureSingle(Q,"g","slicetext"),K=g.ensureSingle(J,"text","",function(ie){ie.attr("data-notex",1)}),re=g.ensureUniformFontSize(s,o.determineTextFont(S,N,D.font));K.text(N._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":C||V?"start":"middle").call(_.font,re).call(t.convertToTspans,s),N.textBB=_.bBox(K.node()),N.transform=w(N,{fontSize:re.size,isHeader:V}),N.transform.fontSize=re.size,k?K.transition().attrTween("transform",function(ie){var ce=A(ie,!1,te(),[v,f]);return function(se){return b(ce(se))}}):K.attr("transform",b(N))}),Y}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(y,$,ee){"use strict";$.exports=function d(g,_,t){var e;t.swapXY&&(e=g.x0,g.x0=g.y0,g.y0=e,e=g.x1,g.x1=g.y1,g.y1=e),t.flipX&&(e=g.x0,g.x0=_[0]-g.x1,g.x1=_[0]-e),t.flipY&&(e=g.y0,g.y0=_[1]-g.y1,g.y1=_[1]-e);var i=g.children;if(i)for(var r=0;r<i.length;r++)d(i[r],_,t)}},{}],1080:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"treemap",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(y,$,ee){"use strict";$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t){function e(i,r){return d.coerce(_,t,g,i,r)}e("treemapcolorway",t.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(y,$,ee){"use strict";var d=y("d3-hierarchy"),g=y("./flip_tree");$.exports=function(_,t,e){var i,r=e.flipX,o=e.flipY,n="dice-slice"===e.packing,p=e.pad[o?"bottom":"top"],s=e.pad[r?"right":"left"],a=e.pad[r?"left":"right"],c=e.pad[o?"top":"bottom"];n&&(i=s,s=p,p=i,i=a,a=c,c=i);var u=d.treemap().tile(function(h,v){switch(h){case"squarify":return d.treemapSquarify.ratio(v);case"binary":return d.treemapBinary;case"dice":return d.treemapDice;case"slice":return d.treemapSlice;default:return d.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(s).paddingRight(a).paddingTop(p).paddingBottom(c).size(n?[t[1],t[0]]:t)(_);return(n||r||o)&&g(u,t,{swapXY:n,flipX:r,flipY:o}),u}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(y,$,ee){"use strict";var d=y("./draw"),g=y("./draw_descendants");$.exports=function(_,t,e,i){return d(_,t,e,i,{type:"treemap",drawDescendants:g})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("d3-interpolate").interpolate,_=y("../sunburst/helpers"),t=y("../../lib"),e=y("../bar/constants").TEXTPAD,i=y("../bar/plot").toMoveInsideBar,r=y("../bar/uniform_text").recordMinTextSize,o=y("./constants"),n=y("./draw_ancestors");function p(s){return _.isHierarchyRoot(s)?"":_.getPtId(s)}$.exports=function(s,a,c,u,h){var v=s._fullLayout,f=a[0],l=f.trace,x="icicle"===l.type,m=f.hierarchy,w=_.findEntryWithLevel(m,l.level),b=d.select(c),k=b.selectAll("g.pathbar"),T=b.selectAll("g.slice");if(!w)return k.remove(),void T.remove();var L=_.isHierarchyRoot(w),A=!v.uniformtext.mode&&_.hasTransition(u),I=_.getMaxDepth(l),D=v._size,S=l.domain,C=D.w*(S.x[1]-S.x[0]),R=D.h*(S.y[1]-S.y[0]),F=C,H=l.pathbar.thickness,U=l.marker.line.width+o.gapWithPathbar,X=l.pathbar.visible?l.pathbar.side.indexOf("bottom")>-1?R+U:-(H+U):0,Z={x0:F,x1:F,y0:X,y1:X+H},Y=function(Ce,Pe,Fe){var qe=l.tiling.pad,rt=function(Je){return Je-qe<=Pe.x0},ze=function(Je){return Je+qe>=Pe.x1},He=function(Je){return Je-qe<=Pe.y0},Xe=function(Je){return Je+qe>=Pe.y1};return Ce.x0===Pe.x0&&Ce.x1===Pe.x1&&Ce.y0===Pe.y0&&Ce.y1===Pe.y1?{x0:Ce.x0,x1:Ce.x1,y0:Ce.y0,y1:Ce.y1}:{x0:rt(Ce.x0-qe)?0:ze(Ce.x0-qe)?Fe[0]:Ce.x0,x1:rt(Ce.x1+qe)?0:ze(Ce.x1+qe)?Fe[0]:Ce.x1,y0:He(Ce.y0-qe)?0:Xe(Ce.y0-qe)?Fe[1]:Ce.y0,y1:He(Ce.y1+qe)?0:Xe(Ce.y1+qe)?Fe[1]:Ce.y1}},W=null,te={},z={},N=null,V=function(Ce,Pe){return Pe?te[p(Ce)]:z[p(Ce)]};f.hasMultipleRoots&&L&&I++,l._maxDepth=I,l._backgroundColor=v.paper_bgcolor,l._entryDepth=w.data.depth,l._atRootLevel=L;var j=-C/2+D.l+D.w*(S.x[1]+S.x[0])/2,J=-R/2+D.t+D.h*(1-(S.y[1]+S.y[0])/2),K=function(Ce){return j+Ce},re=function(Ce){return J+Ce},ie=re(0),ce=K(0),se=function(Ce){return ce+Ce},de=function(Ce){return ie+Ce};function ue(Ce,Pe){return Ce+","+Pe}var ge=se(0),be=function(Ce){Ce.x=Math.max(ge,Ce.x)},Te=l.pathbar.edgeshape,we=function(Ce,Pe){var Fe=Ce.x0,qe=Ce.x1,rt=Ce.y0,ze=Ce.y1,He=Ce.textBB,Xe=function(Et){return-1!==l.textposition.indexOf(Et)},Je=Xe("bottom"),at=Xe("top")||Pe.isHeader&&!Je?"start":Je?"end":"middle",pt=Xe("right"),xt=Xe("left")||Pe.onPathbar?-1:pt?1:0,Ft=l[x?"tiling":"marker"].pad;if(Pe.isHeader){if((Fe+=(x?Ft:Ft.l)-e)>=(qe-=(x?Ft:Ft.r)-e)){var Dt=(Fe+qe)/2;Fe=Dt,qe=Dt}var ot;Je?rt<(ot=ze-(x?Ft:Ft.b))&&ot<ze&&(rt=ot):rt<(ot=rt+(x?Ft:Ft.t))&&ot<ze&&(ze=ot)}var it=i(Fe,qe,rt,ze,He,{isHorizontal:!1,constrained:!0,angle:0,anchor:at,leftToRight:xt});return it.fontSize=Pe.fontSize,it.targetX=K(it.targetX),it.targetY=re(it.targetY),isNaN(it.targetX)||isNaN(it.targetY)?{}:(Fe!==qe&&rt!==ze&&r(l.type,it,v),{scale:it.scale,rotate:it.rotate,textX:it.textX,textY:it.textY,anchorX:it.anchorX,anchorY:it.anchorY,targetX:it.targetX,targetY:it.targetY})},Le=function(Ce,Pe){for(var Fe,qe=0,rt=Ce;!Fe&&qe<I;)qe++,(rt=rt.parent)?Fe=V(rt,Pe):qe=I;return Fe||{}},fe=function(Ce,Pe,Fe,qe,rt){var ze,He=V(Ce,Pe);if(He)ze=He;else if(Pe)ze=Z;else if(W)if(Ce.parent){var Xe=N||Fe;Xe&&!Pe?ze=Y(Ce,Xe,qe):t.extendFlat(ze={},Le(Ce,Pe))}else ze=t.extendFlat({},Ce),x&&("h"===rt.orientation?rt.flipX?ze.x0=Ce.x1:ze.x1=0:rt.flipY?ze.y0=Ce.y1:ze.y1=0);else ze={};return g(ze,{x0:Ce.x0,x1:Ce.x1,y0:Ce.y0,y1:Ce.y1})},ve=function(Ce,Pe,Fe,qe){var rt=V(Ce,Pe),ze={},He=function(Ce,Pe,Fe,qe){return Pe?te[p(m)]||Z:Ce.data.depth-w.data.depth<I?Y(Ce,z[l.level]||Fe,qe):{}}(Ce,Pe,Fe,qe);t.extendFlat(ze,{transform:we({x0:He.x0,x1:He.x1,y0:He.y0,y1:He.y1,textBB:Ce.textBB,_text:Ce._text},{isHeader:_.isHeader(Ce,l)})}),rt?ze=rt:Ce.parent&&t.extendFlat(ze,Le(Ce,Pe));var Xe=Ce.transform;return Ce.x0!==Ce.x1&&Ce.y0!==Ce.y1&&r(l.type,Xe,v),g(ze,{transform:{scale:Xe.scale,rotate:Xe.rotate,textX:Xe.textX,textY:Xe.textY,anchorX:Xe.anchorX,anchorY:Xe.anchorY,targetX:Xe.targetX,targetY:Xe.targetY}})},Me=function(Ce,Pe,Fe,qe,rt){var ze=qe[0],He=qe[1];A?Ce.exit().transition().each(function(){var Xe=d.select(this);Xe.select("path.surface").transition().attrTween("d",function(Je){var at=function(pt,xt,Ft,Dt){var ot,it=V(pt,xt);if(xt)ot=Z;else{var Et=V(w,xt);ot=Et?Y(pt,Et,Dt):{}}return g(it,ot)}(Je,Pe,0,[ze,He]);return function(pt){return rt(at(pt))}}),Xe.select("g.slicetext").attr("opacity",0)}).remove():Ce.exit().remove()},ke=function(Ce){var Pe=Ce.transform;return Ce.x0!==Ce.x1&&Ce.y0!==Ce.y1&&r(l.type,Pe,v),t.getTextTransform({textX:Pe.textX,textY:Pe.textY,anchorX:Pe.anchorX,anchorY:Pe.anchorY,targetX:Pe.targetX,targetY:Pe.targetY,scale:Pe.scale,rotate:Pe.rotate})};A&&(k.each(function(Ce){te[p(Ce)]={x0:Ce.x0,x1:Ce.x1,y0:Ce.y0,y1:Ce.y1},Ce.transform&&(te[p(Ce)].transform={textX:Ce.transform.textX,textY:Ce.transform.textY,anchorX:Ce.transform.anchorX,anchorY:Ce.transform.anchorY,targetX:Ce.transform.targetX,targetY:Ce.transform.targetY,scale:Ce.transform.scale,rotate:Ce.transform.rotate})}),T.each(function(Ce){z[p(Ce)]={x0:Ce.x0,x1:Ce.x1,y0:Ce.y0,y1:Ce.y1},Ce.transform&&(z[p(Ce)].transform={textX:Ce.transform.textX,textY:Ce.transform.textY,anchorX:Ce.transform.anchorX,anchorY:Ce.transform.anchorY,targetX:Ce.transform.targetX,targetY:Ce.transform.targetY,scale:Ce.transform.scale,rotate:Ce.transform.rotate}),!W&&_.isEntry(Ce)&&(W=Ce)})),N=h(s,a,w,T,{width:C,height:R,viewX:K,viewY:re,pathSlice:function(Ce){var Pe=K(Ce.x0),Fe=K(Ce.x1),qe=re(Ce.y0),rt=re(Ce.y1);return Fe-Pe&&rt-qe?"M"+ue(Pe,qe+0)+"L"+ue(Fe-0,qe)+"L"+ue(Fe,rt-0)+"L"+ue(Pe+0,rt)+"Z":""},toMoveInsideSlice:we,prevEntry:W,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:ve,handleSlicesExit:Me,hasTransition:A,strTransform:ke}),l.pathbar.visible?n(s,a,w,k,{barDifY:X,width:F,height:H,viewX:se,viewY:de,pathSlice:function(Ce){var Pe=se(Math.max(Math.min(Ce.x0,Ce.x0),0)),Fe=se(Math.min(Math.max(Ce.x1,Ce.x1),F)),qe=de(Ce.y0),rt=de(Ce.y1),ze=H/2,He={},Xe={};He.x=Pe,Xe.x=Fe,He.y=Xe.y=(qe+rt)/2;var Je={x:Pe,y:qe},at={x:Fe,y:qe},pt={x:Fe,y:rt},xt={x:Pe,y:rt};return">"===Te?(Je.x-=ze,at.x-=ze,pt.x-=ze,xt.x-=ze):"/"===Te?(pt.x-=ze,xt.x-=ze,He.x-=ze/2,Xe.x-=ze/2):"\\"===Te?(Je.x-=ze,at.x-=ze,He.x-=ze/2,Xe.x-=ze/2):"<"===Te&&(He.x-=ze,Xe.x-=ze),be(Je),be(xt),be(He),be(at),be(pt),be(Xe),"M"+ue(Je.x,Je.y)+"L"+ue(at.x,at.y)+"L"+ue(Xe.x,Xe.y)+"L"+ue(pt.x,pt.y)+"L"+ue(xt.x,xt.y)+"L"+ue(He.x,He.y)+"Z"},toMoveInsideSlice:we,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:ve,handleSlicesExit:Me,hasTransition:A,strTransform:ke}):k.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/color"),_=y("../../lib"),t=y("../sunburst/helpers"),e=y("../bar/uniform_text").resizeText;function i(r,o,n,p){var s,a,c=(p||{}).hovered,u=o.data.data,h=u.i,v=u.color,f=t.isHierarchyRoot(o),l=1;if(c)s=n._hovered.marker.line.color,a=n._hovered.marker.line.width;else if(f&&v===n.root.color)l=100,s="rgba(0,0,0,0)",a=0;else if(s=_.castOption(n,h,"marker.line.color")||g.defaultLine,a=_.castOption(n,h,"marker.line.width")||0,!n._hasColorscale&&!o.onPathbar){var x=n.marker.depthfade;if(x){var m,w=g.combine(g.addOpacity(n._backgroundColor,.75),v);if(!0===x){var b=t.getMaxDepth(n);m=isFinite(b)?t.isLeaf(o)?0:n._maxVisibleLayers-(o.data.depth-n._entryDepth):o.data.height+1}else m=o.data.depth-n._entryDepth,n._atRootLevel||m++;if(m>0)for(var k=0;k<m;k++)v=g.combine(g.addOpacity(w,.5*k/m),v)}}r.style("stroke-width",a).call(g.fill,v).call(g.stroke,s).style("opacity",l)}$.exports={style:function(r){var o=r._fullLayout._treemaplayer.selectAll(".trace");e(r,o,"treemap"),o.each(function(n){var p=d.select(this),s=n[0].trace;p.style("opacity",s.opacity),p.selectAll("path.surface").each(function(a){d.select(this).call(i,a,s,{hovered:!1})})})},styleOne:i}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(y,$,ee){"use strict";var d=y("../box/attributes"),g=y("../../lib/extend").extendFlat,_=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat;$.exports={y:d.y,x:d.x,x0:d.x0,y0:d.y0,xhoverformat:_("x"),yhoverformat:_("y"),name:g({},d.name,{}),orientation:g({},d.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,points:g({},d.boxpoints,{}),jitter:g({},d.jitter,{}),pointpos:g({},d.pointpos,{}),width:g({},d.width,{}),marker:d.marker,text:d.text,hovertext:d.hovertext,hovertemplate:d.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../box/calc"),t=y("./helpers"),e=y("../../constants/numerical").BADNUM;function i(o,n,p){var s=n.max-n.min;if(!s)return o.bandwidth?o.bandwidth:0;if(o.bandwidth)return Math.max(o.bandwidth,s/1e4);var u,a=p.length,c=d.stdev(p,a-1,n.mean);return Math.max((u=a,1.059*Math.min(c,(n.q3-n.q1)/1.349)*Math.pow(u,-.2)),s/100)}function r(o,n,p,s){var a,c=o.spanmode,u=o.span||[],v=[n.min-2*s,n.max+2*s];function f(x){var m=u[x],w="multicategory"===p.type?p.r2c(m):p.d2c(m,0,o[n.valLetter+"calendar"]);return w===e?v[x]:w}var l={type:"linear",range:a="soft"===c?v:"hard"===c?[n.min,n.max]:[f(0),f(1)]};return g.setConvert(l),l.cleanRange(),a}$.exports=function(o,n){var p=_(o,n);if(p[0].t.empty)return p;for(var s=o._fullLayout,a=g.getFromId(o,n["h"===n.orientation?"xaxis":"yaxis"]),c=1/0,u=-1/0,h=0,v=0,f=0;f<p.length;f++){var l=p[f],x=l.pts.map(t.extractVal),m=l.bandwidth=i(n,l,x),w=l.span=r(n,l,a,m);if(l.min===l.max&&0===m)w=l.span=[l.min,l.max],l.density=[{v:1,t:w[0]}],l.bandwidth=m,h=Math.max(h,1);else{var b=w[1]-w[0],k=Math.ceil(b/(m/3)),T=b/k;if(!isFinite(T)||!isFinite(k))return d.error("Something went wrong with computing the violin span"),p[0].t.empty=!0,p;var L=t.makeKDE(l,n,x);l.density=new Array(k);for(var A=0,I=w[0];I<w[1]+T/2;A++,I+=T){var D=L(I);l.density[A]={v:D,t:I},h=Math.max(h,D)}}v=Math.max(v,x.length),c=Math.min(c,w[0]),u=Math.max(u,w[1])}var S=g.findExtremes(a,[c,u],{padded:!0});if(n._extremes[a._id]=S,n.width)p[0].t.maxKDE=h;else{var C=s._violinScaleGroupStats,R=n.scalegroup,F=C[R];F?(F.maxKDE=Math.max(F.maxKDE,h),F.maxCount=Math.max(F.maxCount,v)):C[R]={maxKDE:h,maxCount:v}}return p[0].t.labels.kde=d._(o,"kde:"),p}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(y,$,ee){"use strict";var d=y("../box/cross_trace_calc").setPositionOffset,g=["v","h"];$.exports=function(_,t){for(var e=_.calcdata,i=t.xaxis,r=t.yaxis,o=0;o<g.length;o++){for(var n=g[o],p="h"===n?r:i,s=[],a=0;a<e.length;a++){var c=e[a],h=c[0].trace;!0!==h.visible||"violin"!==h.type||c[0].t.empty||h.orientation!==n||h.xaxis!==i._id||h.yaxis!==r._id||s.push(a)}d("violin",_,s,p)}}},{"../box/cross_trace_calc":675}],1090:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../components/color"),_=y("../box/defaults"),t=y("./attributes");$.exports=function(e,i,r,o){function n(b,k){return d.coerce(e,i,t,b,k)}function p(b,k){return d.coerce2(e,i,t,b,k)}if(_.handleSampleDefaults(e,i,n,o),!1!==i.visible){n("bandwidth"),n("side"),n("width")||(n("scalegroup",i.name),n("scalemode"));var s,a=n("span");Array.isArray(a)&&(s="manual"),n("spanmode",s);var c=n("line.color",(e.marker||{}).color||r),u=n("line.width"),h=n("fillcolor",g.addOpacity(i.line.color,.5));_.handlePointsDefaults(e,i,n,{prefix:""});var v=p("box.width"),f=p("box.fillcolor",h),l=p("box.line.color",c),x=p("box.line.width",u);n("box.visible",Boolean(v||f||l||x))||(i.box={visible:!1});var m=p("meanline.color",c),w=p("meanline.width",u);n("meanline.visible",Boolean(m||w))||(i.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(y,$,ee){"use strict";var d=y("../../lib"),g=function(_){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*_*_)};ee.makeKDE=function(_,t,e){var i=e.length,r=g,o=_.bandwidth,n=1/(i*o);return function(p){for(var s=0,a=0;a<i;a++)s+=r((p-e[a])/o);return n*s}},ee.getPositionOnKdePath=function(_,t,e){var i,r;"h"===t.orientation?(i="y",r="x"):(i="x",r="y");var o=d.findPointOnPath(_.path,e,r,{pathLength:_.pathLength}),n=_.posCenterPx,p=o[i];return[p,"both"===t.side?2*n-p:n]},ee.getKdeValue=function(_,t,e){var i=_.pts.map(ee.extractVal);return ee.makeKDE(_,t,i)(e)/_.posDensityScale},ee.extractVal=function(_){return _.v}},{"../../lib":503}],1092:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../../plots/cartesian/axes"),_=y("../box/hover"),t=y("./helpers");$.exports=function(e,i,r,o,n){n||(n={});var p,s,a=n.hoverLayer,c=e.cd,u=c[0].trace,h=u.hoveron,v=-1!==h.indexOf("violins"),f=-1!==h.indexOf("kde"),l=[];if(v||f){var x=_.hoverOnBoxes(e,i,r,o);if(f&&x.length>0){var m,w,b,k,T,L=e.xa,A=e.ya;"h"===u.orientation?(T=i,m="y",b=A,w="x",k=L):(T=r,m="x",b=L,w="y",k=A);var I=c[e.index];if(T>=I.span[0]&&T<=I.span[1]){var D=d.extendFlat({},e),S=k.c2p(T,!0),C=t.getKdeValue(I,u,T),R=t.getPositionOnKdePath(I,u,S),F=b._offset,H=b._length;D[m+"0"]=R[0],D[m+"1"]=R[1],D[w+"0"]=D[w+"1"]=S,D[w+"Label"]=w+": "+g.hoverLabelText(k,T,u[w+"hoverformat"])+", "+c[0].t.labels.kde+" "+C.toFixed(3),D.spikeDistance=x[0].spikeDistance;var U=m+"Spike";D[U]=x[0][U],x[0].spikeDistance=void 0,x[0][U]=void 0,D.hovertemplate=!1,l.push(D),(s={stroke:e.color})[m+"1"]=d.constrain(F+R[0],F,F+H),s[m+"2"]=d.constrain(F+R[1],F,F+H),s[w+"1"]=s[w+"2"]=k._offset+S}}v&&(l=l.concat(x))}-1!==h.indexOf("points")&&(p=_.hoverOnPoints(e,i,r));var X=a.selectAll(".violinline-"+u.uid).data(s?[0]:[]);return X.enter().append("line").classed("violinline-"+u.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(s),"closest"===o?p?[p]:l:(p&&l.push(p),l)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style"),styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../box/select"),moduleType:"trace",name:"violin",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(y,$,ee){"use strict";var d=y("../box/layout_attributes"),g=y("../../lib").extendFlat;$.exports={violinmode:g({},d.boxmode,{}),violingap:g({},d.boxgap,{}),violingroupgap:g({},d.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes"),_=y("../box/layout_defaults");$.exports=function(t,e,i){_._supply(t,e,i,function(r,o){return d.coerce(t,e,g,r,o)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing"),t=y("../box/plot"),e=y("../scatter/line_points"),i=y("./helpers");$.exports=function(r,o,n,p){var s=r._fullLayout,a=o.xaxis,c=o.yaxis;function u(h){var v=e(h,{xaxis:a,yaxis:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return _.smoothopen(v[0],1)}g.makeTraceGroups(p,n,"trace violins").each(function(h){var v=d.select(this),f=h[0],l=f.t,x=f.trace;if(!0!==x.visible||l.empty)v.remove();else{var m=l.bPos,w=l.bdPos,b=o[l.valLetter+"axis"],k=o[l.posLetter+"axis"],T="both"===x.side,L=T||"positive"===x.side,A=T||"negative"===x.side,I=v.selectAll("path.violin").data(g.identity);I.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),I.exit().remove(),I.each(function(X){var Z,Y,W,te,z,N,V,Q,j=d.select(this),J=X.density,K=J.length,re=k.c2l(X.pos+m,!0),ie=k.l2p(re);if(x.width)Z=l.maxKDE/w;else{var ce=s._violinScaleGroupStats[x.scalegroup];Z="count"===x.scalemode?ce.maxKDE/w*(ce.maxCount/X.pts.length):ce.maxKDE/w}if(L){for(V=new Array(K),z=0;z<K;z++)(Q=V[z]={})[l.posLetter]=re+J[z].v/Z,Q[l.valLetter]=b.c2l(J[z].t,!0);Y=u(V)}if(A){for(V=new Array(K),N=0,z=K-1;N<K;N++,z--)(Q=V[N]={})[l.posLetter]=re-J[z].v/Z,Q[l.valLetter]=b.c2l(J[z].t,!0);W=u(V)}if(T)te=Y+"L"+W.substr(1)+"Z";else{var se=[ie,b.c2p(J[0].t)],de=[ie,b.c2p(J[K-1].t)];"h"===x.orientation&&(se.reverse(),de.reverse()),te=L?"M"+se+"L"+Y.substr(1)+"L"+de:"M"+de+"L"+W.substr(1)+"L"+se}j.attr("d",te),X.posCenterPx=ie,X.posDensityScale=Z*w,X.path=j.node(),X.pathLength=X.path.getTotalLength()/(T?2:1)});var D,S,C,R=x.box,F=R.width,H=(R.line||{}).width;T?(D=w*F,S=0):L?(D=[0,w*F/2],S=H*{x:1,y:-1}[l.posLetter]):(D=[w*F/2,0],S=H*{x:-1,y:1}[l.posLetter]),t.plotBoxAndWhiskers(v,{pos:k,val:b},x,{bPos:m,bdPos:D,bPosPxOffset:S}),t.plotBoxMean(v,{pos:k,val:b},x,{bPos:m,bdPos:D,bPosPxOffset:S}),!x.box.visible&&x.meanline.visible&&(C=g.identity);var U=v.selectAll("path.meanline").data(C||[]);U.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),U.exit().remove(),U.each(function(X){var Z=b.c2p(X.mean,!0),Y=i.getPositionOnKdePath(X,x,Z);d.select(this).attr("d","h"===x.orientation?"M"+Z+","+Y[0]+"V"+Y[1]:"M"+Y[0]+","+Z+"H"+Y[1])}),t.plotPoints(v,{x:a,y:c},x,l)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/color"),_=y("../scatter/style").stylePoints;$.exports=function(t){var e=d.select(t).selectAll("g.trace.violins");e.style("opacity",function(i){return i[0].trace.opacity}),e.each(function(i){var r=i[0].trace,o=d.select(this),n=r.box||{},p=n.line||{},s=r.meanline||{},a=s.width;o.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(g.stroke,r.line.color).call(g.fill,r.fillcolor),o.selectAll("path.box").style("stroke-width",p.width+"px").call(g.stroke,p.color).call(g.fill,n.fillcolor);var c={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};o.selectAll("path.mean").style(c).call(g.stroke,s.color),o.selectAll("path.meanline").style(c).call(g.stroke,s.color),_(o,r,t)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(y,$,ee){"use strict";var d=y("../../components/colorscale/attributes"),g=y("../isosurface/attributes"),_=y("../surface/attributes"),t=y("../../plots/attributes"),e=y("../../lib/extend").extendFlat,i=y("../../plot_api/edit_types").overrideAll,r=$.exports=i(e({x:g.x,y:g.y,z:g.z,value:g.value,isomin:g.isomin,isomax:g.isomax,surface:g.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:g.slices,caps:g.caps,text:g.text,hovertext:g.hovertext,xhoverformat:g.xhoverformat,yhoverformat:g.yhoverformat,zhoverformat:g.zhoverformat,valuehoverformat:g.valuehoverformat,hovertemplate:g.hovertemplate},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:g.colorbar,opacity:g.opacity,opacityscale:_.opacityscale,lightposition:g.lightposition,lighting:g.lighting,flatshading:g.flatshading,contour:g.contour,hoverinfo:e({},t.hoverinfo),showlegend:e({},t.showlegend,{dflt:!1})}),"calc","nested");r.x.editType=r.y.editType=r.z.editType=r.value.editType="calc+clearAxisTypes",r.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(y,$,ee){"use strict";var d=y("../../../stackgl_modules").gl_mesh3d,g=y("../../lib/gl_format_color").parseColorScale,_=y("../../lib/str2rgbarray"),t=y("../../components/colorscale").extractOpts,e=y("../../plots/gl3d/zip3"),i=y("../isosurface/convert").findNearestOnAxis,r=y("../isosurface/convert").generateIsoMeshes;function o(p,s,a){this.scene=p,this.uid=a,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var n=o.prototype;n.handlePick=function(p){if(p.object===this.mesh){var s=p.data.index,c=this.data._meshY[s],u=this.data._meshZ[s],h=this.data._Ys.length,v=this.data._Zs.length,f=i(this.data._meshX[s],this.data._Xs).id,l=i(c,this.data._Ys).id,x=i(u,this.data._Zs).id,m=p.index=x+v*l+v*h*f;p.traceCoordinate=[this.data._meshX[m],this.data._meshY[m],this.data._meshZ[m],this.data._value[m]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[m]?p.textLabel=w[m]:w&&(p.textLabel=w),!0}},n.update=function(p){var s=this.scene,a=s.fullSceneLayout;function c(v,f,l,x){return f.map(function(m){return v.d2l(m,0,x)*l})}this.data=r(p);var u={positions:e(c(a.xaxis,p._meshX,s.dataScale[0],p.xcalendar),c(a.yaxis,p._meshY,s.dataScale[1],p.ycalendar),c(a.zaxis,p._meshZ,s.dataScale[2],p.zcalendar)),cells:e(p._meshI,p._meshJ,p._meshK),lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,opacityscale:p.opacityscale,contourEnable:p.contour.show,contourColor:_(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading},h=t(p);u.vertexIntensity=p._meshIntensity,u.vertexIntensityBounds=[h.min,h.max],u.colormap=g(p),this.mesh.update(u)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(p,s){var c=d({gl:p.glplot.gl}),u=new o(p,c,s.uid);return c._trace=u,u.update(s),p.glplot.add(c),u}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./attributes"),_=y("../isosurface/defaults").supplyIsoDefaults,t=y("../surface/defaults").opacityscaleDefaults;$.exports=function(e,i,r,o){function n(p,s){return d.coerce(e,i,g,p,s)}_(e,i,r,o,n),t(e,i,o,n)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert"),moduleType:"trace",name:"volume",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(y,$,ee){"use strict";var d=y("../bar/attributes"),g=y("../scatter/attributes").line,_=y("../../plots/attributes"),t=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,i=y("../../plots/template_attributes").texttemplateAttrs,r=y("./constants"),o=y("../../lib/extend").extendFlat,n=y("../../components/color");function p(s){return{marker:{color:o({},d.marker.color,{arrayOk:!1,editType:"style"}),line:{color:o({},d.marker.line.color,{arrayOk:!1,editType:"style"}),width:o({},d.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:t("x"),yhoverformat:t("y"),hovertext:d.hovertext,hovertemplate:e({},{keys:r.eventDataKeys}),hoverinfo:o({},_.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:i({editType:"plot"},{keys:r.eventDataKeys.concat(["label"])}),text:d.text,textposition:d.textposition,insidetextanchor:d.insidetextanchor,textangle:d.textangle,textfont:d.textfont,insidetextfont:d.insidetextfont,outsidetextfont:d.outsidetextfont,constraintext:d.constraintext,cliponaxis:d.cliponaxis,orientation:d.orientation,offset:d.offset,width:d.width,increasing:p(),decreasing:p(),totals:p(),connector:{line:{color:o({},g.color,{dflt:n.defaultLine}),width:o({},g.width,{editType:"plot"}),dash:g.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes"),g=y("../../plots/cartesian/align_period"),_=y("../../lib").mergeArray,t=y("../scatter/calc_selection"),e=y("../../constants/numerical").BADNUM;function i(o){return"a"===o||"absolute"===o}function r(o){return"t"===o||"total"===o}$.exports=function(o,n){var p,s,a,c,u,h,v=d.getFromId(o,n.xaxis||"x"),f=d.getFromId(o,n.yaxis||"y");"h"===n.orientation?(p=v.makeCalcdata(n,"x"),a=f.makeCalcdata(n,"y"),c=g(n,f,"y",a),u=!!n.yperiodalignment,h="y"):(p=f.makeCalcdata(n,"y"),a=v.makeCalcdata(n,"x"),c=g(n,v,"x",a),u=!!n.xperiodalignment,h="x"),s=c.vals;for(var l,x=Math.min(s.length,p.length),m=new Array(x),w=0,b=!1,k=0;k<x;k++){var T=p[k]||0,L=!1;(p[k]!==e||r(n.measure[k])||i(n.measure[k]))&&k+1<x&&(p[k+1]!==e||r(n.measure[k+1])||i(n.measure[k+1]))&&(L=!0);var A=m[k]={i:k,p:s[k],s:T,rawS:T,cNext:L};i(n.measure[k])?(w=A.s,A.isSum=!0,A.dir="totals",A.s=w):r(n.measure[k])?(A.isSum=!0,A.dir="totals",A.s=w):(A.isSum=!1,A.dir=A.rawS<0?"decreasing":"increasing",A.s=w+(l=A.s),w+=l),"totals"===A.dir&&(b=!0),u&&(m[k].orig_p=a[k],m[k][h+"End"]=c.ends[k],m[k][h+"Start"]=c.starts[k]),n.ids&&(A.id=String(n.ids[k])),A.v=(n.base||0)+w}return m.length&&(m[0].hasTotals=b),_(n.text,m,"tx"),_(n.hovertext,m,"htx"),t(m,n),m}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(y,$,ee){"use strict";$.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(y,$,ee){"use strict";var d=y("../bar/cross_trace_calc").setGroupPositions;$.exports=function(g,_){var t,e,i=g._fullLayout,r=g._fullData,o=g.calcdata,n=_.xaxis,p=_.yaxis,s=[],a=[],c=[];for(e=0;e<r.length;e++){var u=r[e];!0===u.visible&&u.xaxis===n._id&&u.yaxis===p._id&&"waterfall"===u.type&&(t=o[e],"h"===u.orientation?c.push(t):a.push(t),s.push(t))}var h={mode:i.waterfallmode,norm:i.waterfallnorm,gap:i.waterfallgap,groupgap:i.waterfallgroupgap};for(d(g,n,p,a,h),d(g,p,n,c,h),e=0;e<s.length;e++){t=s[e];for(var v=0;v<t.length;v++){var f=t[v];!1===f.isSum&&(f.s0+=0===v?0:t[v-1].s),v+1<t.length&&(t[v].nextP0=t[v+1].p0,t[v].nextS0=t[v+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("../bar/defaults").handleGroupingDefaults,_=y("../bar/defaults").handleText,t=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),i=y("./attributes"),r=y("../../components/color"),o=y("../../constants/delta.js"),n=o.INCREASING.COLOR,p=o.DECREASING.COLOR;function s(a,c,u){a(c+".marker.color",u),a(c+".marker.line.color",r.defaultLine),a(c+".marker.line.width")}$.exports={supplyDefaults:function(a,c,u,h){function v(l,x){return d.coerce(a,c,i,l,x)}if(t(a,c,h,v)){e(a,c,h,v),v("xhoverformat"),v("yhoverformat"),v("measure"),v("orientation",c.x&&!c.y?"h":"v"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate");var f=v("textposition");_(a,c,h,v,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==c.textposition&&(v("texttemplate"),c.texttemplate||v("textinfo")),s(v,"increasing",n),s(v,"decreasing",p),s(v,"totals","#4499FF"),v("connector.visible")&&(v("connector.mode"),v("connector.line.width")&&(v("connector.line.color"),v("connector.line.dash")))}else c.visible=!1},crossTraceDefaults:function(a,c){var u,h;function v(l){return d.coerce(h._input,h,i,l)}if("group"===c.waterfallmode)for(var f=0;f<a.length;f++)u=(h=a[f])._input,g(u,h,c,v)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(y,$,ee){"use strict";$.exports=function(d,g){return d.x="xVal"in g?g.xVal:g.x,d.y="yVal"in g?g.yVal:g.y,"initial"in g&&(d.initial=g.initial),"delta"in g&&(d.delta=g.delta),"final"in g&&(d.final=g.final),g.xa&&(d.xaxis=g.xa),g.ya&&(d.yaxis=g.ya),d}},{}],1108:[function(y,$,ee){"use strict";var d=y("../../plots/cartesian/axes").hoverLabelText,g=y("../../components/color").opacity,_=y("../bar/hover").hoverOnBars,t=y("../../constants/delta.js"),e=t.INCREASING.SYMBOL,i=t.DECREASING.SYMBOL;$.exports=function(r,o,n,p,s){var S,C,R,F,a=_(r,o,n,p,s);if(a){var c=a.cd,u=c[0].trace,h="h"===u.orientation,v=h?"x":"y",f=h?r.xa:r.ya,l=c[a.index],x=l.isSum?l.b+l.s:l.rawS;if(!l.isSum){a.initial=l.b+l.s-x,a.delta=x,a.final=a.initial+a.delta;var m=A(Math.abs(a.delta));a.deltaLabel=x<0?"("+m+")":m,a.finalLabel=A(a.final),a.initialLabel=A(a.initial)}var w=l.hi||u.hoverinfo,b=[];if(w&&"none"!==w&&"skip"!==w){var k="all"===w,T=w.split("+"),L=function(I){return k||-1!==T.indexOf(I)};l.isSum||(!L("final")||L(h?"x":"y")||b.push(a.finalLabel),L("delta")&&b.push(x<0?a.deltaLabel+" "+i:a.deltaLabel+" "+e),L("initial")&&b.push("Initial: "+a.initialLabel))}return b.length&&(a.extraText=b.join("<br>")),a.color=(R=(S=u[l.dir].marker).line.color,F=S.line.width,g(C=S.color)?C:g(R)&&F?R:void 0),[a]}function A(I){return d(f,I,u[v+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style").style,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(y,$,ee){"use strict";$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(y,$,ee){"use strict";var d=y("../../lib"),g=y("./layout_attributes");$.exports=function(_,t,e){var i=!1;function r(p,s){return d.coerce(_,t,g,p,s)}for(var o=0;o<e.length;o++){var n=e[o];if(n.visible&&"waterfall"===n.type){i=!0;break}}i&&(r("waterfallmode"),r("waterfallgap",.2),r("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../lib"),_=y("../../components/drawing"),t=y("../../constants/numerical").BADNUM,e=y("../bar/plot"),i=y("../bar/uniform_text").clearMinTextSize;$.exports=function(r,o,n,p){var a,c,v,f,s=r._fullLayout;i("waterfall",s),e.plot(r,o,n,p,{mode:s.waterfallmode,norm:s.waterfallmode,gap:s.waterfallgap,groupgap:s.waterfallgroupgap}),a=r,v=(c=o).xaxis,f=c.yaxis,g.makeTraceGroups(p,n,"trace bars").each(function(l){var x=d.select(this),m=l[0].trace,w=g.ensureSingle(x,"g","lines");if(m.connector&&m.connector.visible){var b="h"===m.orientation,k=m.connector.mode,T=w.selectAll("g.line").data(g.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var L=T.size();T.each(function(A,I){if(I===L-1||A.cNext){var D=(H=v,U=f,Y=[],te=(X=b)?U:H,(Z=[])[0]=(W=X?H:U).c2p((F=A).s0,!0),Y[0]=te.c2p(F.p0,!0),Z[1]=W.c2p(F.s1,!0),Y[1]=te.c2p(F.p1,!0),Z[2]=W.c2p(F.nextS0,!0),Y[2]=te.c2p(F.nextP0,!0),X?[Z,Y]:[Y,Z]),S=D[0],C=D[1],R="";S[0]!==t&&C[0]!==t&&S[1]!==t&&C[1]!==t&&("spanning"===k&&!A.isSum&&I>0&&(R+=b?"M"+S[0]+","+C[1]+"V"+C[0]:"M"+S[1]+","+C[0]+"H"+S[0]),"between"!==k&&(A.isSum||I<L-1)&&(R+=b?"M"+S[1]+","+C[0]+"V"+C[1]:"M"+S[0]+","+C[1]+"H"+S[1]),S[2]!==t&&C[2]!==t&&(R+=b?"M"+S[1]+","+C[1]+"V"+C[2]:"M"+S[1]+","+C[1]+"H"+S[2])),""===R&&(R="M0,0Z"),g.ensureSingle(d.select(this),"path").attr("d",R).call(_.setClipUrl,c.layerClipId,a)}var F,H,U,X,Z,Y,W,te})}else w.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(y,$,ee){"use strict";var d=y("@plotly/d3"),g=y("../../components/drawing"),_=y("../../components/color"),t=y("../../constants/interactions").DESELECTDIM,e=y("../bar/style"),i=y("../bar/uniform_text").resizeText,r=e.styleTextPoints;$.exports={style:function(o,n,p){var s=p||d.select(o).selectAll("g.waterfalllayer").selectAll("g.trace");i(o,s,"waterfall"),s.style("opacity",function(a){return a[0].trace.opacity}),s.each(function(a){var c=d.select(this),u=a[0].trace;c.selectAll(".point > path").each(function(h){if(!h.isBlank){var v=u[h.dir].marker;d.select(this).call(_.fill,v.color).call(_.stroke,v.line.color).call(g.dashLine,v.line.dash,v.line.width).style("opacity",u.selectedpoints&&!h.selected?t:1)}}),r(c,u,o),c.selectAll(".lines").each(function(){var h=u.connector.line;g.lineGroupStyle(d.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(y,$,ee){"use strict";var d=y("../plots/cartesian/axes"),g=y("../lib"),_=y("../plot_api/plot_schema"),t=y("./helpers").pointsAccessorFunction,e=y("../constants/numerical").BADNUM;ee.moduleType="transform",ee.name="aggregate";var i=ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},r=i.aggregations;function o(a,c,u,h){if(h.enabled){for(var v=h.target,f=g.nestedProperty(c,v),l=f.get(),x=function(b,k){var L=k.d2c,A=k.c2d;switch(b.func){case"count":return n;case"first":return p;case"last":return s;case"sum":return function(I,D){for(var S=0,C=0;C<D.length;C++){var R=L(I[D[C]]);R!==e&&(S+=R)}return A(S)};case"avg":return function(I,D){for(var S=0,C=0,R=0;R<D.length;R++){var F=L(I[D[R]]);F!==e&&(S+=F,C++)}return C?A(S/C):e};case"min":return function(I,D){for(var S=1/0,C=0;C<D.length;C++){var R=L(I[D[C]]);R!==e&&(S=Math.min(S,R))}return S===1/0?e:A(S)};case"max":return function(I,D){for(var S=-1/0,C=0;C<D.length;C++){var R=L(I[D[C]]);R!==e&&(S=Math.max(S,R))}return S===-1/0?e:A(S)};case"range":return function(I,D){for(var S=1/0,C=-1/0,R=0;R<D.length;R++){var F=L(I[D[R]]);F!==e&&(S=Math.min(S,F),C=Math.max(C,F))}return C===-1/0||S===1/0?e:A(C-S)};case"change":return function(I,D){var S=L(I[D[0]]),C=L(I[D[D.length-1]]);return S===e||C===e?e:A(C-S)};case"median":return function(I,D){for(var S=[],C=0;C<D.length;C++){var R=L(I[D[C]]);R!==e&&S.push(R)}if(!S.length)return e;S.sort(g.sorterAsc);var F=(S.length-1)/2;return A((S[Math.floor(F)]+S[Math.ceil(F)])/2)};case"mode":return function(I,D){for(var S={},C=0,R=e,F=0;F<D.length;F++){var H=L(I[D[F]]);if(H!==e){var U=S[H]=(S[H]||0)+1;U>C&&(C=U,R=H)}}return C?A(R):e};case"rms":return function(I,D){for(var S=0,C=0,R=0;R<D.length;R++){var F=L(I[D[R]]);F!==e&&(S+=F*F,C++)}return C?A(Math.sqrt(S/C)):e};case"stddev":return function(I,D){var S,C=0,R=0,F=1,H=e;for(S=0;S<D.length&&H===e;S++)H=L(I[D[S]]);if(H===e)return e;for(;S<D.length;S++){var U=L(I[D[S]]);if(U!==e){var X=U-H;C+=X,R+=X*X,F++}}var Z="sample"===b.funcmode?F-1:F;return Z?Math.sqrt((R-C*C/F)/Z):0}}}(h,d.getDataConversions(a,c,v,l)),m=new Array(u.length),w=0;w<u.length;w++)m[w]=x(l,u[w]);f.set(m),"count"===h.func&&g.pushUnique(c._arrayAttrs,v)}}function n(a,c){return c.length}function p(a,c){return a[c[0]]}function s(a,c){return a[c[c.length-1]]}ee.supplyDefaults=function(a,c){var u,h={};function v(A,I){return g.coerce(a,h,i,A,I)}if(!v("enabled"))return h;var f=_.findArrayAttributes(c),l={};for(u=0;u<f.length;u++)l[f[u]]=1;var x=v("groups");if(!Array.isArray(x)){if(!l[x])return h.enabled=!1,h;l[x]=0}var m,w=a.aggregations||[],b=h.aggregations=new Array(w.length);function k(A,I){return g.coerce(w[u],m,r,A,I)}for(u=0;u<w.length;u++){m={_index:u};var T=k("target"),L=k("func");k("enabled")&&T&&(l[T]||"count"===L&&void 0===l[T])?("stddev"===L&&k("funcmode"),l[T]=0,b[u]=m):b[u]={enabled:!1,_index:u}}for(u=0;u<f.length;u++)l[f[u]]&&b.push({target:f[u],func:r.func.dflt,enabled:!0,_index:-1});return h},ee.calcTransform=function(a,c,u){if(u.enabled){var h=u.groups,v=g.getTargetArray(c,{target:h});if(v){var f,l,x,w={},b={},k=[],T=t(c.transforms,u),L=v.length;for(c._length&&(L=Math.min(L,c._length)),f=0;f<L;f++)void 0===(x=w[l=v[f]])?(w[l]=k.length,k.push([f]),b[w[l]]=T(f)):(k[x].push(f),b[w[l]]=(b[w[l]]||[]).concat(T(f)));u._indexToPoints=b;var A=u.aggregations;for(f=0;f<A.length;f++)o(a,c,k,A[f]);"string"==typeof h&&o(a,c,k,{target:h,func:"first",enabled:!0}),c._length=k.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../registry"),_=y("../plots/cartesian/axes"),t=y("./helpers").pointsAccessorFunction,e=y("../constants/filter_ops"),i=e.COMPARISON_OPS,r=e.INTERVAL_OPS,o=e.SET_OPS;ee.moduleType="transform",ee.name="filter",ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(i).concat(r).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ee.supplyDefaults=function(n){var p={};function s(u,h){return d.coerce(n,p,ee.attributes,u,h)}if(s("enabled")){var a=s("target");if(d.isArrayOrTypedArray(a)&&0===a.length)return p.enabled=!1,p;s("preservegaps"),s("operation"),s("value");var c=g.getComponentMethod("calendars","handleDefaults");c(n,p,"valuecalendar",null),c(n,p,"targetcalendar",null)}return p},ee.calcTransform=function(n,p,s){if(s.enabled){var a=d.getTargetArray(p,s);if(a){var c=s.target,u=a.length;p._length&&(u=Math.min(u,p._length));var h=s.targetcalendar,v=p._arrayAttrs,f=s.preservegaps;if("string"==typeof c){var l=d.nestedProperty(p,c+"calendar").get();l&&(h=l)}var x,m,w=function(D,S,C){var R=D.operation,F=D.value,H=Array.isArray(F);function U(W){return-1!==W.indexOf(R)}var X,Z=function(W){return S(W,0,D.valuecalendar)},Y=function(W){return S(W,0,C)};switch(U(i)?X=Z(H?F[0]:F):U(r)?X=H?[Z(F[0]),Z(F[1])]:[Z(F),Z(F)]:U(o)&&(X=H?F.map(Z):[Z(F)]),R){case"=":return function(W){return Y(W)===X};case"!=":return function(W){return Y(W)!==X};case"<":return function(W){return Y(W)<X};case"<=":return function(W){return Y(W)<=X};case">":return function(W){return Y(W)>X};case">=":return function(W){return Y(W)>=X};case"[]":return function(W){var te=Y(W);return te>=X[0]&&te<=X[1]};case"()":return function(W){var te=Y(W);return te>X[0]&&te<X[1]};case"[)":return function(W){var te=Y(W);return te>=X[0]&&te<X[1]};case"(]":return function(W){var te=Y(W);return te>X[0]&&te<=X[1]};case"][":return function(W){var te=Y(W);return te<=X[0]||te>=X[1]};case")(":return function(W){var te=Y(W);return te<X[0]||te>X[1]};case"](":return function(W){var te=Y(W);return te<=X[0]||te>X[1]};case")[":return function(W){var te=Y(W);return te<X[0]||te>=X[1]};case"{}":return function(W){return-1!==X.indexOf(Y(W))};case"}{":return function(W){return-1===X.indexOf(Y(W))}}}(s,_.getDataToCoordFunc(n,p,c,a),h),b={},k={},T=0;f?(x=function(D){b[D.astr]=d.extendDeep([],D.get()),D.set(new Array(u))},m=function(D,S){var C=b[D.astr][S];D.get()[S]=C}):(x=function(D){b[D.astr]=d.extendDeep([],D.get()),D.set([])},m=function(D,S){var C=b[D.astr][S];D.get().push(C)}),I(x);for(var L=t(p.transforms,s),A=0;A<u;A++)w(a[A])?(I(m,A),k[T++]=L(A)):f&&T++;s._indexToPoints=k,p._length=T}}function I(D,S){for(var C=0;C<v.length;C++)D(d.nestedProperty(p,v[C]),S)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plot_api/plot_schema"),_=y("../plots/plots"),t=y("./helpers").pointsAccessorFunction;function e(i,r){var o,n,p,s,a,c,u,h,v,f,l=r.transform,x=r.transformIndex,m=i.transforms[x].groups,w=t(i.transforms,l);if(!d.isArrayOrTypedArray(m)||0===m.length)return[i];var b=d.filterUnique(m),k=new Array(b.length),T=m.length,L=g.findArrayAttributes(i),A=l.styles||[],I={};for(o=0;o<A.length;o++)I[A[o].target]=A[o].value;l.styles&&(f=d.keyedContainer(l,"styles","target","value.name"));var D={},S={};for(o=0;o<b.length;o++){D[c=b[o]]=o,S[c]=0,(u=k[o]=d.extendDeepNoArrays({},i))._group=c,u.transforms[x]._indexToPoints={};var C=null;for(f&&(C=f.get(c)),u.name=C||""===C?C:d.templateString(l.nameformat,{trace:i.name,group:c}),h=u.transforms,u.transforms=[],n=0;n<h.length;n++)u.transforms[n]=d.extendDeepNoArrays({},h[n]);for(n=0;n<L.length;n++)d.nestedProperty(u,L[n]).set([])}for(p=0;p<L.length;p++){for(s=L[p],n=0,v=[];n<b.length;n++)v[n]=d.nestedProperty(k[n],s).get();for(a=d.nestedProperty(i,s).get(),n=0;n<T;n++)v[D[m[n]]].push(a[n])}for(n=0;n<T;n++)(u=k[D[m[n]]]).transforms[x]._indexToPoints[S[m[n]]]=w(n),S[m[n]]++;for(o=0;o<b.length;o++)c=b[o],_.clearExpandedTraceDefaultColors(u=k[o]),u=d.extendDeepNoArrays(u,I[c]||{});return k}ee.moduleType="transform",ee.name="groupby",ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ee.supplyDefaults=function(i,r,o){var n,p={};function s(v,f){return d.coerce(i,p,ee.attributes,v,f)}if(!s("enabled"))return p;s("groups"),s("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var a=i.styles,c=p.styles=[];if(a)for(n=0;n<a.length;n++){var u=c[n]={};d.coerce(a[n],c[n],ee.attributes.styles,"target");var h=d.coerce(a[n],c[n],ee.attributes.styles,"value");d.isPlainObject(h)?u.value=d.extendDeep({},h):h&&delete u.value}return p},ee.transform=function(i,r){var o,n,p,s=[];for(n=0;n<i.length;n++)for(o=e(i[n],r),p=0;p<o.length;p++)s.push(o[p]);return s}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(y,$,ee){"use strict";ee.pointsAccessorFunction=function(d,g){for(var _,t,e=0;e<d.length&&(_=d[e])!==g;e++)_._indexToPoints&&!1!==_.enabled&&(t=_._indexToPoints);return t?function(i){return t[i]}:function(i){return[i]}}},{}],1118:[function(y,$,ee){"use strict";var d=y("../lib"),g=y("../plots/cartesian/axes"),_=y("./helpers").pointsAccessorFunction,t=y("../constants/numerical").BADNUM;ee.moduleType="transform",ee.name="sort",ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ee.supplyDefaults=function(e){var i={};function r(o,n){return d.coerce(e,i,ee.attributes,o,n)}return r("enabled")&&(r("target"),r("order")),i},ee.calcTransform=function(e,i,r){if(r.enabled){var o=d.getTargetArray(i,r);if(o){var n=r.target,p=o.length;i._length&&(p=Math.min(p,i._length));var s,a,c=i._arrayAttrs,u=function(m,w,b,k){var T,L=new Array(k),A=new Array(k);for(T=0;T<k;T++)L[T]={v:w[T],i:T};for(L.sort(function(I,D){switch(I.order){case"ascending":return function(S,C){var R=D(S.v),F=D(C.v);return R===t?1:F===t?-1:R-F};case"descending":return function(S,C){var R=D(S.v),F=D(C.v);return R===t?1:F===t?-1:F-R}}}(m,b)),T=0;T<k;T++)A[T]=L[T].i;return A}(r,o,g.getDataToCoordFunc(e,i,n,o),p),h=_(i.transforms,r),v={};for(s=0;s<c.length;s++){var f=d.nestedProperty(i,c[s]),l=f.get(),x=new Array(p);for(a=0;a<p;a++)x[a]=l[u[a]];f.set(x)}for(a=0;a<p;a++)v[a]=h(u[a]);r._indexToPoints=v,i._length=p}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(y,$,ee){"use strict";ee.version="2.8.3"},{}],1120:[function(y,$,ee){(function(d){(function(){!function(g){"object"==typeof ee&&void 0!==$?$.exports=g():("undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:this).stackgl=g()}(function(){return function g(_,t,e){function i(n,p){if(!t[n]){if(!_[n]){var s="function"==typeof y&&y;if(!p&&s)return s(n,!0);if(r)return r(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var c=t[n]={exports:{}};_[n][0].call(c.exports,function(u){return i(_[n][1][u]||u)},c,c.exports,g,_,t,e)}return t[n].exports}for(var r="function"==typeof y&&y,o=0;o<e.length;o++)i(e[o]);return i}({1:[function(g,_,t){"use strict";t.byteLength=function(c){var u=s(c),v=u[1];return 3*(u[0]+v)/4-v},t.toByteArray=function(c){var u,h,T,v=s(c),f=v[0],l=v[1],x=new r(3*(f+(T=l))/4-T),m=0,w=l>0?f-4:f;for(h=0;h<w;h+=4)u=i[c.charCodeAt(h)]<<18|i[c.charCodeAt(h+1)]<<12|i[c.charCodeAt(h+2)]<<6|i[c.charCodeAt(h+3)],x[m++]=u>>16&255,x[m++]=u>>8&255,x[m++]=255&u;return 2===l&&(u=i[c.charCodeAt(h)]<<2|i[c.charCodeAt(h+1)]>>4,x[m++]=255&u),1===l&&(u=i[c.charCodeAt(h)]<<10|i[c.charCodeAt(h+1)]<<4|i[c.charCodeAt(h+2)]>>2,x[m++]=u>>8&255,x[m++]=255&u),x},t.fromByteArray=function(c){for(var u,h=c.length,v=h%3,f=[],l=0,x=h-v;l<x;l+=16383)f.push(a(c,l,l+16383>x?x:l+16383));return 1===v?f.push(e[(u=c[h-1])>>2]+e[u<<4&63]+"=="):2===v&&f.push(e[(u=(c[h-2]<<8)+c[h-1])>>10]+e[u>>4&63]+e[u<<2&63]+"="),f.join("")};for(var e=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,p=o.length;n<p;++n)e[n]=o[n],i[o.charCodeAt(n)]=n;function s(c){var u=c.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=c.indexOf("=");return-1===h&&(h=u),[h,h===u?0:4-h%4]}function a(c,u,h){for(var f,l=[],x=u;x<h;x+=3)l.push(e[(f=(c[x]<<16&16711680)+(c[x+1]<<8&65280)+(255&c[x+2]))>>18&63]+e[f>>12&63]+e[f>>6&63]+e[63&f]);return l.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(g,_,t){},{}],3:[function(g,_,t){(function(e){(function(){"use strict";var i=g("base64-js"),r=g("ieee754");function o(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var J=new Uint8Array(j);return J.__proto__=n.prototype,J}function n(j,J,K){if("number"==typeof j){if("string"==typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return a(j)}return p(j,J,K)}function p(j,J,K){if("string"==typeof j)return function(ce,se){if("string"==typeof se&&""!==se||(se="utf8"),!n.isEncoding(se))throw new TypeError("Unknown encoding: "+se);var de=0|h(ce,se),ue=o(de),ge=ue.write(ce,se);return ge!==de&&(ue=ue.slice(0,ge)),ue}(j,J);if(ArrayBuffer.isView(j))return c(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(V(j,ArrayBuffer)||j&&V(j.buffer,ArrayBuffer))return function(ce,se,de){if(se<0||ce.byteLength<se)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<se+(de||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===se&&void 0===de?new Uint8Array(ce):void 0===de?new Uint8Array(ce,se):new Uint8Array(ce,se,de)).__proto__=n.prototype,ue}(j,J,K);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var re=j.valueOf&&j.valueOf();if(null!=re&&re!==j)return n.from(re,J,K);var ie=function(ce){if(n.isBuffer(ce)){var se=0|u(ce.length),de=o(se);return 0===de.length||ce.copy(de,0,0,se),de}return void 0!==ce.length?"number"!=typeof ce.length||Q(ce.length)?o(0):c(ce):"Buffer"===ce.type&&Array.isArray(ce.data)?c(ce.data):void 0}(j);if(ie)return ie;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return n.from(j[Symbol.toPrimitive]("string"),J,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function s(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function a(j){return s(j),o(j<0?0:0|u(j))}function c(j){for(var J=j.length<0?0:0|u(j.length),K=o(J),re=0;re<J;re+=1)K[re]=255&j[re];return K}function u(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|j}function h(j,J){if(n.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||V(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var K=j.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===K)return 0;for(var ie=!1;;)switch(J){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return te(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return z(j).length;default:if(ie)return re?-1:te(j).length;J=(""+J).toLowerCase(),ie=!0}}function v(j,J,K){var re=!1;if((void 0===J||J<0)&&(J=0),J>this.length||((void 0===K||K>this.length)&&(K=this.length),K<=0)||(K>>>=0)<=(J>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return C(this,J,K);case"utf8":case"utf-8":return I(this,J,K);case"ascii":return D(this,J,K);case"latin1":case"binary":return S(this,J,K);case"base64":return A(this,J,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,J,K);default:if(re)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),re=!0}}function f(j,J,K){var re=j[J];j[J]=j[K],j[K]=re}function l(j,J,K,re,ie){if(0===j.length)return-1;if("string"==typeof K?(re=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),Q(K=+K)&&(K=ie?0:j.length-1),K<0&&(K=j.length+K),K>=j.length){if(ie)return-1;K=j.length-1}else if(K<0){if(!ie)return-1;K=0}if("string"==typeof J&&(J=n.from(J,re)),n.isBuffer(J))return 0===J.length?-1:x(j,J,K,re,ie);if("number"==typeof J)return J&=255,"function"==typeof Uint8Array.prototype.indexOf?ie?Uint8Array.prototype.indexOf.call(j,J,K):Uint8Array.prototype.lastIndexOf.call(j,J,K):x(j,[J],K,re,ie);throw new TypeError("val must be string, number or Buffer")}function x(j,J,K,re,ie){var ce,se=1,de=j.length,ue=J.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(j.length<2||J.length<2)return-1;se=2,de/=2,ue/=2,K/=2}function ge(Le,fe){return 1===se?Le[fe]:Le.readUInt16BE(fe*se)}if(ie){var be=-1;for(ce=K;ce<de;ce++)if(ge(j,ce)===ge(J,-1===be?0:ce-be)){if(-1===be&&(be=ce),ce-be+1===ue)return be*se}else-1!==be&&(ce-=ce-be),be=-1}else for(K+ue>de&&(K=de-ue),ce=K;ce>=0;ce--){for(var Te=!0,we=0;we<ue;we++)if(ge(j,ce+we)!==ge(J,we)){Te=!1;break}if(Te)return ce}return-1}function m(j,J,K,re){K=Number(K)||0;var ie=j.length-K;re?(re=Number(re))>ie&&(re=ie):re=ie;var ce=J.length;re>ce/2&&(re=ce/2);for(var se=0;se<re;++se){var de=parseInt(J.substr(2*se,2),16);if(Q(de))return se;j[K+se]=de}return se}function w(j,J,K,re){return N(te(J,j.length-K),j,K,re)}function b(j,J,K,re){return N(function(ie){for(var ce=[],se=0;se<ie.length;++se)ce.push(255&ie.charCodeAt(se));return ce}(J),j,K,re)}function k(j,J,K,re){return b(j,J,K,re)}function T(j,J,K,re){return N(z(J),j,K,re)}function L(j,J,K,re){return N(function(ie,ce){for(var se,de,ge=[],be=0;be<ie.length&&!((ce-=2)<0);++be)de=(se=ie.charCodeAt(be))>>8,ge.push(se%256),ge.push(de);return ge}(J,j.length-K),j,K,re)}function A(j,J,K){return i.fromByteArray(0===J&&K===j.length?j:j.slice(J,K))}function I(j,J,K){K=Math.min(j.length,K);for(var re=[],ie=J;ie<K;){var ce,se,de,ue,ge=j[ie],be=null,Te=ge>239?4:ge>223?3:ge>191?2:1;if(ie+Te<=K)switch(Te){case 1:ge<128&&(be=ge);break;case 2:128==(192&(ce=j[ie+1]))&&(ue=(31&ge)<<6|63&ce)>127&&(be=ue);break;case 3:se=j[ie+2],128==(192&(ce=j[ie+1]))&&128==(192&se)&&(ue=(15&ge)<<12|(63&ce)<<6|63&se)>2047&&(ue<55296||ue>57343)&&(be=ue);break;case 4:se=j[ie+2],de=j[ie+3],128==(192&(ce=j[ie+1]))&&128==(192&se)&&128==(192&de)&&(ue=(15&ge)<<18|(63&ce)<<12|(63&se)<<6|63&de)>65535&&ue<1114112&&(be=ue)}null===be?(be=65533,Te=1):be>65535&&(re.push((be-=65536)>>>10&1023|55296),be=56320|1023&be),re.push(be),ie+=Te}return function(we){var Le=we.length;if(Le<=4096)return String.fromCharCode.apply(String,we);for(var fe="",ve=0;ve<Le;)fe+=String.fromCharCode.apply(String,we.slice(ve,ve+=4096));return fe}(re)}function D(j,J,K){var re="";K=Math.min(j.length,K);for(var ie=J;ie<K;++ie)re+=String.fromCharCode(127&j[ie]);return re}function S(j,J,K){var re="";K=Math.min(j.length,K);for(var ie=J;ie<K;++ie)re+=String.fromCharCode(j[ie]);return re}function C(j,J,K){var re=j.length;(!J||J<0)&&(J=0),(!K||K<0||K>re)&&(K=re);for(var ie="",ce=J;ce<K;++ce)ie+=W(j[ce]);return ie}function R(j,J,K){for(var re=j.slice(J,K),ie="",ce=0;ce<re.length;ce+=2)ie+=String.fromCharCode(re[ce]+256*re[ce+1]);return ie}function F(j,J,K){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+J>K)throw new RangeError("Trying to access beyond buffer length")}function H(j,J,K,re,ie,ce){if(!n.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>ie||J<ce)throw new RangeError('"value" argument is out of bounds');if(K+re>j.length)throw new RangeError("Index out of range")}function U(j,J,K,re,ie,ce){if(K+re>j.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function X(j,J,K,re,ie){return J=+J,K>>>=0,ie||U(j,0,K,4),r.write(j,J,K,re,23,4),K+4}function Z(j,J,K,re,ie){return J=+J,K>>>=0,ie||U(j,0,K,8),r.write(j,J,K,re,52,8),K+8}t.Buffer=n,t.SlowBuffer=function(j){return+j!=j&&(j=0),n.alloc(+j)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,(n.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(J){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(j,J,K){return p(j,J,K)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(j,J,K){return ie=J,ce=K,s(re=j),re<=0?o(re):void 0!==ie?"string"==typeof ce?o(re).fill(ie,ce):o(re).fill(ie):o(re);var re,ie,ce},n.allocUnsafe=function(j){return a(j)},n.allocUnsafeSlow=function(j){return a(j)},n.isBuffer=function(j){return null!=j&&!0===j._isBuffer&&j!==n.prototype},n.compare=function(j,J){if(V(j,Uint8Array)&&(j=n.from(j,j.offset,j.byteLength)),V(J,Uint8Array)&&(J=n.from(J,J.offset,J.byteLength)),!n.isBuffer(j)||!n.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===J)return 0;for(var K=j.length,re=J.length,ie=0,ce=Math.min(K,re);ie<ce;++ie)if(j[ie]!==J[ie]){K=j[ie],re=J[ie];break}return K<re?-1:re<K?1:0},n.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(j,J){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(0===j.length)return n.alloc(0);var K;if(void 0===J)for(J=0,K=0;K<j.length;++K)J+=j[K].length;var re=n.allocUnsafe(J),ie=0;for(K=0;K<j.length;++K){var ce=j[K];if(V(ce,Uint8Array)&&(ce=n.from(ce)),!n.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(re,ie),ie+=ce.length}return re},n.byteLength=h,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var J=0;J<j;J+=2)f(this,J,J+1);return this},n.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var J=0;J<j;J+=4)f(this,J,J+3),f(this,J+1,J+2);return this},n.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var J=0;J<j;J+=8)f(this,J,J+7),f(this,J+1,J+6),f(this,J+2,J+5),f(this,J+3,J+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var j=this.length;return 0===j?"":0===arguments.length?I(this,0,j):v.apply(this,arguments)},n.prototype.equals=function(j){if(!n.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||0===n.compare(this,j)},n.prototype.inspect=function(){var j="",J=t.INSPECT_MAX_BYTES;return j=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(j+=" ... "),"<Buffer "+j+">"},n.prototype.compare=function(j,J,K,re,ie){if(V(j,Uint8Array)&&(j=n.from(j,j.offset,j.byteLength)),!n.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(void 0===J&&(J=0),void 0===K&&(K=j?j.length:0),void 0===re&&(re=0),void 0===ie&&(ie=this.length),J<0||K>j.length||re<0||ie>this.length)throw new RangeError("out of range index");if(re>=ie&&J>=K)return 0;if(re>=ie)return-1;if(J>=K)return 1;if(this===j)return 0;for(var ce=(ie>>>=0)-(re>>>=0),se=(K>>>=0)-(J>>>=0),de=Math.min(ce,se),ue=this.slice(re,ie),ge=j.slice(J,K),be=0;be<de;++be)if(ue[be]!==ge[be]){ce=ue[be],se=ge[be];break}return ce<se?-1:se<ce?1:0},n.prototype.includes=function(j,J,K){return-1!==this.indexOf(j,J,K)},n.prototype.indexOf=function(j,J,K){return l(this,j,J,K,!0)},n.prototype.lastIndexOf=function(j,J,K){return l(this,j,J,K,!1)},n.prototype.write=function(j,J,K,re){if(void 0===J)re="utf8",K=this.length,J=0;else if(void 0===K&&"string"==typeof J)re=J,K=this.length,J=0;else{if(!isFinite(J))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");J>>>=0,isFinite(K)?(K>>>=0,void 0===re&&(re="utf8")):(re=K,K=void 0)}var ie=this.length-J;if((void 0===K||K>ie)&&(K=ie),j.length>0&&(K<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var ce=!1;;)switch(re){case"hex":return m(this,j,J,K);case"utf8":case"utf-8":return w(this,j,J,K);case"ascii":return b(this,j,J,K);case"latin1":case"binary":return k(this,j,J,K);case"base64":return T(this,j,J,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,j,J,K);default:if(ce)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),ce=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(j,J){var K=this.length;(j=~~j)<0?(j+=K)<0&&(j=0):j>K&&(j=K),(J=void 0===J?K:~~J)<0?(J+=K)<0&&(J=0):J>K&&(J=K),J<j&&(J=j);var re=this.subarray(j,J);return re.__proto__=n.prototype,re},n.prototype.readUIntLE=function(j,J,K){j>>>=0,J>>>=0,K||F(j,J,this.length);for(var re=this[j],ie=1,ce=0;++ce<J&&(ie*=256);)re+=this[j+ce]*ie;return re},n.prototype.readUIntBE=function(j,J,K){j>>>=0,J>>>=0,K||F(j,J,this.length);for(var re=this[j+--J],ie=1;J>0&&(ie*=256);)re+=this[j+--J]*ie;return re},n.prototype.readUInt8=function(j,J){return j>>>=0,J||F(j,1,this.length),this[j]},n.prototype.readUInt16LE=function(j,J){return j>>>=0,J||F(j,2,this.length),this[j]|this[j+1]<<8},n.prototype.readUInt16BE=function(j,J){return j>>>=0,J||F(j,2,this.length),this[j]<<8|this[j+1]},n.prototype.readUInt32LE=function(j,J){return j>>>=0,J||F(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},n.prototype.readUInt32BE=function(j,J){return j>>>=0,J||F(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},n.prototype.readIntLE=function(j,J,K){j>>>=0,J>>>=0,K||F(j,J,this.length);for(var re=this[j],ie=1,ce=0;++ce<J&&(ie*=256);)re+=this[j+ce]*ie;return re>=(ie*=128)&&(re-=Math.pow(2,8*J)),re},n.prototype.readIntBE=function(j,J,K){j>>>=0,J>>>=0,K||F(j,J,this.length);for(var re=J,ie=1,ce=this[j+--re];re>0&&(ie*=256);)ce+=this[j+--re]*ie;return ce>=(ie*=128)&&(ce-=Math.pow(2,8*J)),ce},n.prototype.readInt8=function(j,J){return j>>>=0,J||F(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},n.prototype.readInt16LE=function(j,J){j>>>=0,J||F(j,2,this.length);var K=this[j]|this[j+1]<<8;return 32768&K?4294901760|K:K},n.prototype.readInt16BE=function(j,J){j>>>=0,J||F(j,2,this.length);var K=this[j+1]|this[j]<<8;return 32768&K?4294901760|K:K},n.prototype.readInt32LE=function(j,J){return j>>>=0,J||F(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},n.prototype.readInt32BE=function(j,J){return j>>>=0,J||F(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},n.prototype.readFloatLE=function(j,J){return j>>>=0,J||F(j,4,this.length),r.read(this,j,!0,23,4)},n.prototype.readFloatBE=function(j,J){return j>>>=0,J||F(j,4,this.length),r.read(this,j,!1,23,4)},n.prototype.readDoubleLE=function(j,J){return j>>>=0,J||F(j,8,this.length),r.read(this,j,!0,52,8)},n.prototype.readDoubleBE=function(j,J){return j>>>=0,J||F(j,8,this.length),r.read(this,j,!1,52,8)},n.prototype.writeUIntLE=function(j,J,K,re){j=+j,J>>>=0,K>>>=0,re||H(this,j,J,K,Math.pow(2,8*K)-1,0);var ie=1,ce=0;for(this[J]=255&j;++ce<K&&(ie*=256);)this[J+ce]=j/ie&255;return J+K},n.prototype.writeUIntBE=function(j,J,K,re){j=+j,J>>>=0,K>>>=0,re||H(this,j,J,K,Math.pow(2,8*K)-1,0);var ie=K-1,ce=1;for(this[J+ie]=255&j;--ie>=0&&(ce*=256);)this[J+ie]=j/ce&255;return J+K},n.prototype.writeUInt8=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,1,255,0),this[J]=255&j,J+1},n.prototype.writeUInt16LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,65535,0),this[J]=255&j,this[J+1]=j>>>8,J+2},n.prototype.writeUInt16BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,65535,0),this[J]=j>>>8,this[J+1]=255&j,J+2},n.prototype.writeUInt32LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,4294967295,0),this[J+3]=j>>>24,this[J+2]=j>>>16,this[J+1]=j>>>8,this[J]=255&j,J+4},n.prototype.writeUInt32BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,4294967295,0),this[J]=j>>>24,this[J+1]=j>>>16,this[J+2]=j>>>8,this[J+3]=255&j,J+4},n.prototype.writeIntLE=function(j,J,K,re){if(j=+j,J>>>=0,!re){var ie=Math.pow(2,8*K-1);H(this,j,J,K,ie-1,-ie)}var ce=0,se=1,de=0;for(this[J]=255&j;++ce<K&&(se*=256);)j<0&&0===de&&0!==this[J+ce-1]&&(de=1),this[J+ce]=(j/se>>0)-de&255;return J+K},n.prototype.writeIntBE=function(j,J,K,re){if(j=+j,J>>>=0,!re){var ie=Math.pow(2,8*K-1);H(this,j,J,K,ie-1,-ie)}var ce=K-1,se=1,de=0;for(this[J+ce]=255&j;--ce>=0&&(se*=256);)j<0&&0===de&&0!==this[J+ce+1]&&(de=1),this[J+ce]=(j/se>>0)-de&255;return J+K},n.prototype.writeInt8=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,1,127,-128),j<0&&(j=255+j+1),this[J]=255&j,J+1},n.prototype.writeInt16LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,32767,-32768),this[J]=255&j,this[J+1]=j>>>8,J+2},n.prototype.writeInt16BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,32767,-32768),this[J]=j>>>8,this[J+1]=255&j,J+2},n.prototype.writeInt32LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,2147483647,-2147483648),this[J]=255&j,this[J+1]=j>>>8,this[J+2]=j>>>16,this[J+3]=j>>>24,J+4},n.prototype.writeInt32BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[J]=j>>>24,this[J+1]=j>>>16,this[J+2]=j>>>8,this[J+3]=255&j,J+4},n.prototype.writeFloatLE=function(j,J,K){return X(this,j,J,!0,K)},n.prototype.writeFloatBE=function(j,J,K){return X(this,j,J,!1,K)},n.prototype.writeDoubleLE=function(j,J,K){return Z(this,j,J,!0,K)},n.prototype.writeDoubleBE=function(j,J,K){return Z(this,j,J,!1,K)},n.prototype.copy=function(j,J,K,re){if(!n.isBuffer(j))throw new TypeError("argument should be a Buffer");if(K||(K=0),re||0===re||(re=this.length),J>=j.length&&(J=j.length),J||(J=0),re>0&&re<K&&(re=K),re===K||0===j.length||0===this.length)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),j.length-J<re-K&&(re=j.length-J+K);var ie=re-K;if(this===j&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(J,K,re);else if(this===j&&K<J&&J<re)for(var ce=ie-1;ce>=0;--ce)j[ce+J]=this[ce+K];else Uint8Array.prototype.set.call(j,this.subarray(K,re),J);return ie},n.prototype.fill=function(j,J,K,re){if("string"==typeof j){if("string"==typeof J?(re=J,J=0,K=this.length):"string"==typeof K&&(re=K,K=this.length),void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!n.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(1===j.length){var ie=j.charCodeAt(0);("utf8"===re&&ie<128||"latin1"===re)&&(j=ie)}}else"number"==typeof j&&(j&=255);if(J<0||this.length<J||this.length<K)throw new RangeError("Out of range index");if(K<=J)return this;var ce;if(J>>>=0,K=void 0===K?this.length:K>>>0,j||(j=0),"number"==typeof j)for(ce=J;ce<K;++ce)this[ce]=j;else{var se=n.isBuffer(j)?j:n.from(j,re),de=se.length;if(0===de)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(ce=0;ce<K-J;++ce)this[ce+J]=se[ce%de]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function W(j){return j<16?"0"+j.toString(16):j.toString(16)}function te(j,J){var K;J=J||1/0;for(var re=j.length,ie=null,ce=[],se=0;se<re;++se){if((K=j.charCodeAt(se))>55295&&K<57344){if(!ie){if(K>56319){(J-=3)>-1&&ce.push(239,191,189);continue}if(se+1===re){(J-=3)>-1&&ce.push(239,191,189);continue}ie=K;continue}if(K<56320){(J-=3)>-1&&ce.push(239,191,189),ie=K;continue}K=65536+(ie-55296<<10|K-56320)}else ie&&(J-=3)>-1&&ce.push(239,191,189);if(ie=null,K<128){if((J-=1)<0)break;ce.push(K)}else if(K<2048){if((J-=2)<0)break;ce.push(K>>6|192,63&K|128)}else if(K<65536){if((J-=3)<0)break;ce.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;ce.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return ce}function z(j){return i.toByteArray(function(J){if((J=(J=J.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;J.length%4!=0;)J+="=";return J}(j))}function N(j,J,K,re){for(var ie=0;ie<re&&!(ie+K>=J.length||ie>=j.length);++ie)J[ie+K]=j[ie];return ie}function V(j,J){return j instanceof J||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===J.name}function Q(j){return j!=j}}).call(this)}).call(this,g("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(g,_,t){t.read=function(e,i,r,o,n){var p,s,a=8*n-o-1,c=(1<<a)-1,u=c>>1,h=-7,v=r?n-1:0,f=r?-1:1,l=e[i+v];for(v+=f,p=l&(1<<-h)-1,l>>=-h,h+=a;h>0;p=256*p+e[i+v],v+=f,h-=8);for(s=p&(1<<-h)-1,p>>=-h,h+=o;h>0;s=256*s+e[i+v],v+=f,h-=8);if(0===p)p=1-u;else{if(p===c)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,o),p-=u}return(l?-1:1)*s*Math.pow(2,p-o)},t.write=function(e,i,r,o,n,p){var s,a,c,u=8*p-n-1,h=(1<<u)-1,v=h>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,l=o?0:p-1,x=o?1:-1,m=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(a=isNaN(i)?1:0,s=h):(s=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-s))<1&&(s--,c*=2),(i+=s+v>=1?f/c:f*Math.pow(2,1-v))*c>=2&&(s++,c/=2),s+v>=h?(a=0,s=h):s+v>=1?(a=(i*c-1)*Math.pow(2,n),s+=v):(a=i*Math.pow(2,v-1)*Math.pow(2,n),s=0));n>=8;e[r+l]=255&a,l+=x,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;e[r+l]=255&s,l+=x,s/=256,u-=8);e[r+l-x]|=128*m}},{}],5:[function(g,_,t){var e,i,r=_.exports={};function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function p(x){if(e===setTimeout)return setTimeout(x,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(x,0);try{return e(x,0)}catch(m){try{return e.call(null,x,0)}catch(w){return e.call(this,x,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(x){e=o}try{i="function"==typeof clearTimeout?clearTimeout:n}catch(x){i=n}}();var s,a=[],c=!1,u=-1;function h(){c&&s&&(c=!1,s.length?a=s.concat(a):u=-1,a.length&&v())}function v(){if(!c){var x=p(h);c=!0;for(var m=a.length;m;){for(s=a,a=[];++u<m;)s&&s[u].run();u=-1,m=a.length}s=null,c=!1,function(w){if(i===clearTimeout)return clearTimeout(w);if((i===n||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(w);try{i(w)}catch(b){try{return i.call(null,w)}catch(k){return i.call(this,w)}}}(x)}}function f(x,m){this.fun=x,this.array=m}function l(){}r.nextTick=function(x){var m=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)m[w-1]=arguments[w];a.push(new f(x,m)),1!==a.length||c||p(v)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=l,r.addListener=l,r.once=l,r.off=l,r.removeListener=l,r.removeAllListeners=l,r.emit=l,r.prependListener=l,r.prependOnceListener=l,r.listeners=function(x){return[]},r.binding=function(x){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(x){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],6:[function(g,_,t){_.exports={alpha_shape:g("alpha-shape"),convex_hull:g("convex-hull"),delaunay_triangulate:g("delaunay-triangulate"),gl_cone3d:g("gl-cone3d"),gl_error3d:g("gl-error3d"),gl_heatmap2d:g("gl-heatmap2d"),gl_line3d:g("gl-line3d"),gl_mesh3d:g("gl-mesh3d"),gl_plot2d:g("gl-plot2d"),gl_plot3d:g("gl-plot3d"),gl_pointcloud2d:g("gl-pointcloud2d"),gl_scatter3d:g("gl-scatter3d"),gl_select_box:g("gl-select-box"),gl_spikes2d:g("gl-spikes2d"),gl_streamtube3d:g("gl-streamtube3d"),gl_surface3d:g("gl-surface3d"),ndarray:g("ndarray"),ndarray_linear_interpolate:g("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(g,_,t){"use strict";_.exports=function(p){var s=(p=p||{}).eye||[0,0,1],a=p.center||[0,0,0],c=p.up||[0,1,0],u=p.distanceLimits||[0,1/0],h=p.mode||"turntable",v=e(),f=i(),l=r();return v.setDistanceLimits(u[0],u[1]),v.lookAt(0,s,a,c),f.setDistanceLimits(u[0],u[1]),f.lookAt(0,s,a,c),l.setDistanceLimits(u[0],u[1]),l.lookAt(0,s,a,c),new o({turntable:v,orbit:f,matrix:l},h)};var e=g("turntable-camera-controller"),i=g("orbit-camera-controller"),r=g("matrix-camera-controller");function o(p,s){this._controllerNames=Object.keys(p),this._controllerList=this._controllerNames.map(function(a){return p[a]}),this._mode=s,this._active=p[s],this._active||(this._mode="turntable",this._active=p.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=o.prototype;n.flush=function(p){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].flush(p)},n.idle=function(p){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].idle(p)},n.lookAt=function(p,s,a,c){for(var u=this._controllerList,h=0;h<u.length;++h)u[h].lookAt(p,s,a,c)},n.rotate=function(p,s,a,c){for(var u=this._controllerList,h=0;h<u.length;++h)u[h].rotate(p,s,a,c)},n.pan=function(p,s,a,c){for(var u=this._controllerList,h=0;h<u.length;++h)u[h].pan(p,s,a,c)},n.translate=function(p,s,a,c){for(var u=this._controllerList,h=0;h<u.length;++h)u[h].translate(p,s,a,c)},n.setMatrix=function(p,s){for(var a=this._controllerList,c=0;c<a.length;++c)a[c].setMatrix(p,s)},n.setDistanceLimits=function(p,s){for(var a=this._controllerList,c=0;c<a.length;++c)a[c].setDistanceLimits(p,s)},n.setDistance=function(p,s){for(var a=this._controllerList,c=0;c<a.length;++c)a[c].setDistance(p,s)},n.recalcMatrix=function(p){this._active.recalcMatrix(p)},n.getDistance=function(p){return this._active.getDistance(p)},n.getDistanceLimits=function(p){return this._active.getDistanceLimits(p)},n.lastT=function(){return this._active.lastT()},n.setMode=function(p){if(p!==this._mode){var s=this._controllerNames.indexOf(p);if(!(s<0)){var a=this._active,c=this._controllerList[s],u=Math.max(a.lastT(),c.lastT());a.recalcMatrix(u),c.setMatrix(u,a.computedMatrix),this._active=c,this._mode=p,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(g,_,t){"use strict";var e="undefined"==typeof WeakMap?g("weak-map"):WeakMap,i=g("gl-buffer"),r=g("gl-vao"),o=new e;_.exports=function(n){var p=o.get(n),s=p&&(p._triangleBuffer.handle||p._triangleBuffer.buffer);if(!s||!n.isBuffer(s)){var a=i(n,new Float32Array([-1,-1,-1,4,4,-1]));(p=r(n,[{buffer:a,type:n.FLOAT,size:2}]))._triangleBuffer=a,o.set(n,p)}p.bind(),n.drawArrays(n.TRIANGLES,0,3),p.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(g,_,t){var e=g("pad-left");_.exports=function(i,r,o){r="number"==typeof r?r:1,o=o||": ";var n=i.split(/\r?\n/),p=String(n.length+r-1).length;return n.map(function(s,a){var c=a+r,u=String(c).length;return e(c,p-u)+o+s}).join("\n")}},{"pad-left":264}],10:[function(g,_,t){"use strict";_.exports=function(r){var o=r.length;if(0===o)return[];if(1===o)return[0];for(var n=r[0].length,p=[r[0]],s=[0],a=1;a<o;++a)if(p.push(r[a]),i(p,n)){if(s.push(a),s.length===n+1)return s}else p.pop();return s};var e=g("robust-orientation");function i(r,o){for(var n=new Array(o+1),p=0;p<r.length;++p)n[p]=r[p];for(p=0;p<=r.length;++p){for(var s=r.length;s<=o;++s){for(var a=new Array(o),c=0;c<o;++c)a[c]=Math.pow(s+1-p,c);n[s]=a}if(e.apply(void 0,n))return!0}return!1}},{"robust-orientation":284}],11:[function(g,_,t){"use strict";_.exports=function(r,o){return e(o).filter(function(n){for(var p=new Array(n.length),s=0;s<n.length;++s)p[s]=o[n[s]];return i(p)*r<1})};var e=g("delaunay-triangulate"),i=g("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(g,_,t){_.exports=function(r,o){return i(e(r,o))};var e=g("alpha-complex"),i=g("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(g,_,t){_.exports=function(e){return atob(e)}},{}],14:[function(g,_,t){"use strict";_.exports=function(r,o){for(var n=o.length,p=new Array(n+1),s=0;s<n;++s){for(var a=new Array(n+1),c=0;c<=n;++c)a[c]=r[c][s];p[s]=a}for(p[n]=new Array(n+1),s=0;s<=n;++s)p[n][s]=1;var u=new Array(n+1);for(s=0;s<n;++s)u[s]=o[s];u[n]=1;var h=e(p,u),v=i(h[n+1]);0===v&&(v=1);var f=new Array(n+1);for(s=0;s<=n;++s)f[s]=i(h[s])/v;return f};var e=g("robust-linear-solve");function i(r){for(var o=0,n=0;n<r.length;++n)o+=r[n];return o}},{"robust-linear-solve":283}],15:[function(g,_,t){"use strict";var e=g("./lib/rationalize");_.exports=function(i,r){return e(i[0].mul(r[1]).add(r[0].mul(i[1])),i[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(g,_,t){"use strict";_.exports=function(e,i){return e[0].mul(i[1]).cmp(i[0].mul(e[1]))}},{}],17:[function(g,_,t){"use strict";var e=g("./lib/rationalize");_.exports=function(i,r){return e(i[0].mul(r[1]),i[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(g,_,t){"use strict";var e=g("./is-rat"),i=g("./lib/is-bn"),r=g("./lib/num-to-bn"),o=g("./lib/str-to-bn"),n=g("./lib/rationalize"),p=g("./div");_.exports=function s(a,c){if(e(a))return c?p(a,s(c)):[a[0].clone(),a[1].clone()];var u,h,v=0;if(i(a))u=a.clone();else if("string"==typeof a)u=o(a);else{if(0===a)return[r(0),r(1)];if(a===Math.floor(a))u=r(a);else{for(;a!==Math.floor(a);)a*=Math.pow(2,256),v-=256;u=r(a)}}if(e(c))u.mul(c[1]),h=c[0].clone();else if(i(c))h=c.clone();else if("string"==typeof c)h=o(c);else if(c)if(c===Math.floor(c))h=r(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),v+=256;h=r(c)}else h=r(1);return v>0?u=u.ushln(v):v<0&&(h=h.ushln(-v)),n(u,h)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(g,_,t){"use strict";var e=g("./lib/is-bn");_.exports=function(i){return Array.isArray(i)&&2===i.length&&e(i[0])&&e(i[1])}},{"./lib/is-bn":23}],20:[function(g,_,t){"use strict";var e=g("bn.js");_.exports=function(i){return i.cmp(new e(0))}},{"bn.js":33}],21:[function(g,_,t){"use strict";var e=g("./bn-sign");_.exports=function(i){var r=i.length,o=i.words,n=0;if(1===r)n=o[0];else if(2===r)n=o[0]+67108864*o[1];else for(var p=0;p<r;p++)n+=o[p]*Math.pow(67108864,p);return e(i)*n}},{"./bn-sign":20}],22:[function(g,_,t){"use strict";var e=g("double-bits"),i=g("bit-twiddle").countTrailingZeros;_.exports=function(r){var o=i(e.lo(r));if(o<32)return o;var n=i(e.hi(r));return n>20?52:n+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(g,_,t){"use strict";g("bn.js"),_.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(g,_,t){"use strict";var e=g("bn.js"),i=g("double-bits");_.exports=function(r){var o=i.exponent(r);return o<52?new e(r):new e(r*Math.pow(2,52-o)).ushln(o-52)}},{"bn.js":33,"double-bits":64}],25:[function(g,_,t){"use strict";var e=g("./num-to-bn"),i=g("./bn-sign");_.exports=function(r,o){var n=i(r),p=i(o);if(0===n)return[e(0),e(1)];if(0===p)return[e(0),e(0)];p<0&&(r=r.neg(),o=o.neg());var s=r.gcd(o);return s.cmpn(1)?[r.div(s),o.div(s)]:[r,o]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(g,_,t){"use strict";var e=g("bn.js");_.exports=function(i){return new e(i)}},{"bn.js":33}],27:[function(g,_,t){"use strict";var e=g("./lib/rationalize");_.exports=function(i,r){return e(i[0].mul(r[0]),i[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(g,_,t){"use strict";var e=g("./lib/bn-sign");_.exports=function(i){return e(i[0])*e(i[1])}},{"./lib/bn-sign":20}],29:[function(g,_,t){"use strict";var e=g("./lib/rationalize");_.exports=function(i,r){return e(i[0].mul(r[1]).sub(i[1].mul(r[0])),i[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(g,_,t){"use strict";var e=g("./lib/bn-to-num"),i=g("./lib/ctz");_.exports=function(r){var o=r[0],n=r[1];if(0===o.cmpn(0))return 0;var p=o.abs().divmod(n.abs()),a=e(p.div),c=p.mod,u=o.negative!==n.negative?-1:1;if(0===c.cmpn(0))return u*a;if(a){var h=i(a)+4,v=e(c.ushln(h).divRound(n));return u*(a+v*Math.pow(2,-h))}var f=n.bitLength()-c.bitLength()+53;return v=e(c.ushln(f).divRound(n)),f<1023?u*v*Math.pow(2,-f):u*(v*=Math.pow(2,-1023))*Math.pow(2,1023-f)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(g,_,t){"use strict";function e(s,a,c,u,h){for(var v=h+1;u<=h;){var f=u+h>>>1,l=s[f];(void 0!==c?c(l,a):l-a)>=0?(v=f,h=f-1):u=f+1}return v}function i(s,a,c,u,h){for(var v=h+1;u<=h;){var f=u+h>>>1,l=s[f];(void 0!==c?c(l,a):l-a)>0?(v=f,h=f-1):u=f+1}return v}function r(s,a,c,u,h){for(var v=u-1;u<=h;){var f=u+h>>>1,l=s[f];(void 0!==c?c(l,a):l-a)<0?(v=f,u=f+1):h=f-1}return v}function o(s,a,c,u,h){for(var v=u-1;u<=h;){var f=u+h>>>1,l=s[f];(void 0!==c?c(l,a):l-a)<=0?(v=f,u=f+1):h=f-1}return v}function n(s,a,c,u,h){for(;u<=h;){var v=u+h>>>1,f=s[v],l=void 0!==c?c(f,a):f-a;if(0===l)return v;l<=0?u=v+1:h=v-1}return-1}function p(s,a,c,u,h,v){return"function"==typeof c?v(s,a,c,void 0===u?0:0|u,void 0===h?s.length-1:0|h):v(s,a,void 0,void 0===c?0:0|c,void 0===u?s.length-1:0|u)}_.exports={ge:function(s,a,c,u,h){return p(s,a,c,u,h,e)},gt:function(s,a,c,u,h){return p(s,a,c,u,h,i)},lt:function(s,a,c,u,h){return p(s,a,c,u,h,r)},le:function(s,a,c,u,h){return p(s,a,c,u,h,o)},eq:function(s,a,c,u,h){return p(s,a,c,u,h,n)}}},{}],32:[function(g,_,t){"use strict";function e(r){var o=32;return(r&=-r)&&o--,65535&r&&(o-=16),16711935&r&&(o-=8),252645135&r&&(o-=4),858993459&r&&(o-=2),1431655765&r&&(o-=1),o}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(r){return(r>0)-(r<0)},t.abs=function(r){var o=r>>31;return(r^o)-o},t.min=function(r,o){return o^(r^o)&-(r<o)},t.max=function(r,o){return r^(r^o)&-(r<o)},t.isPow2=function(r){return!(r&r-1||!r)},t.log2=function(r){var o,n;return o=(r>65535)<<4,o|=n=((r>>>=o)>255)<<3,o|=n=((r>>>=n)>15)<<2,(o|=n=((r>>>=n)>3)<<1)|(r>>>=n)>>1},t.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},t.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},t.countTrailingZeros=e,t.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},t.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},t.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var o=0;o<256;++o){var n=o,p=o,s=7;for(n>>>=1;n;n>>>=1)p<<=1,p|=1&n,--s;r[o]=p<<s&255}})(i),t.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},t.interleave2=function(r,o){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},t.deinterleave2=function(r,o){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>o&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},t.interleave3=function(r,o,n){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(r,o){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>o&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},t.nextCombination=function(r){var o=r|r-1;return o+1|(~o&-~o)-1>>>e(r)+1}},{}],33:[function(g,_,t){!function(e,i){"use strict";function r(S,C){if(!S)throw new Error(C||"Assertion failed")}function o(S,C){S.super_=C;var R=function(){};R.prototype=C.prototype,S.prototype=new R,S.prototype.constructor=S}function n(S,C,R){if(n.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,null!==S&&("le"!==C&&"be"!==C||(R=C,C=10),this._init(S||0,C||10,R||"be"))}var p;"object"==typeof e?e.exports=n:i.BN=n,n.BN=n,n.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:g("buffer").Buffer}catch(S){}function s(S,C){var R=S.charCodeAt(C);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function a(S,C,R){var F=s(S,R);return R-1>=C&&(F|=s(S,R-1)<<4),F}function c(S,C,R,F){for(var H=0,U=Math.min(S.length,R),X=C;X<U;X++){var Z=S.charCodeAt(X)-48;H*=F,H+=Z>=49?Z-49+10:Z>=17?Z-17+10:Z}return H}n.isBN=function(S){return S instanceof n||null!==S&&"object"==typeof S&&S.constructor.wordSize===n.wordSize&&Array.isArray(S.words)},n.max=function(S,C){return S.cmp(C)>0?S:C},n.min=function(S,C){return S.cmp(C)<0?S:C},n.prototype._init=function(S,C,R){if("number"==typeof S)return this._initNumber(S,C,R);if("object"==typeof S)return this._initArray(S,C,R);"hex"===C&&(C=16),r(C===(0|C)&&C>=2&&C<=36);var F=0;"-"===(S=S.toString().replace(/\s+/g,""))[0]&&(F++,this.negative=1),F<S.length&&(16===C?this._parseHex(S,F,R):(this._parseBase(S,C,F),"le"===R&&this._initArray(this.toArray(),C,R)))},n.prototype._initNumber=function(S,C,R){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(r(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),"le"===R&&this._initArray(this.toArray(),C,R)},n.prototype._initArray=function(S,C,R){if(r("number"==typeof S.length),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var H,U,X=0;if("be"===R)for(F=S.length-1,H=0;F>=0;F-=3)this.words[H]|=(U=S[F]|S[F-1]<<8|S[F-2]<<16)<<X&67108863,this.words[H+1]=U>>>26-X&67108863,(X+=24)>=26&&(X-=26,H++);else if("le"===R)for(F=0,H=0;F<S.length;F+=3)this.words[H]|=(U=S[F]|S[F+1]<<8|S[F+2]<<16)<<X&67108863,this.words[H+1]=U>>>26-X&67108863,(X+=24)>=26&&(X-=26,H++);return this.strip()},n.prototype._parseHex=function(S,C,R){this.length=Math.ceil((S.length-C)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var H,U=0,X=0;if("be"===R)for(F=S.length-1;F>=C;F-=2)H=a(S,C,F)<<U,this.words[X]|=67108863&H,U>=18?(U-=18,this.words[X+=1]|=H>>>26):U+=8;else for(F=(S.length-C)%2==0?C+1:C;F<S.length;F+=2)H=a(S,C,F)<<U,this.words[X]|=67108863&H,U>=18?(U-=18,this.words[X+=1]|=H>>>26):U+=8;this.strip()},n.prototype._parseBase=function(S,C,R){this.words=[0],this.length=1;for(var F=0,H=1;H<=67108863;H*=C)F++;F--,H=H/C|0;for(var U=S.length-R,X=U%F,Z=Math.min(U,U-X)+R,Y=0,W=R;W<Z;W+=F)Y=c(S,W,W+F,C),this.imuln(H),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(0!==X){var te=1;for(Y=c(S,W,S.length,C),W=0;W<X;W++)te*=C;this.imuln(te),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this.strip()},n.prototype.copy=function(S){S.words=new Array(this.length);for(var C=0;C<this.length;C++)S.words[C]=this.words[C];S.length=this.length,S.negative=this.negative,S.red=this.red},n.prototype.clone=function(){var S=new n(null);return this.copy(S),S},n.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(S,C,R){R.negative=C.negative^S.negative;var F=S.length+C.length|0;R.length=F,F=F-1|0;var H=0|S.words[0],U=0|C.words[0],X=H*U,Y=X/67108864|0;R.words[0]=67108863&X;for(var W=1;W<F;W++){for(var te=Y>>>26,z=67108863&Y,N=Math.min(W,C.length-1),V=Math.max(0,W-S.length+1);V<=N;V++)te+=(X=(H=0|S.words[W-V|0])*(U=0|C.words[V])+z)/67108864|0,z=67108863&X;R.words[W]=0|z,Y=0|te}return 0!==Y?R.words[W]=0|Y:R.length--,R.strip()}n.prototype.toString=function(S,C){var R;if(C=0|C||1,16===(S=S||10)||"hex"===S){R="";for(var F=0,H=0,U=0;U<this.length;U++){var X=this.words[U],Z=(16777215&(X<<F|H)).toString(16);R=0!=(H=X>>>24-F&16777215)||U!==this.length-1?u[6-Z.length]+Z+R:Z+R,(F+=2)>=26&&(F-=26,U--)}for(0!==H&&(R=H.toString(16)+R);R.length%C!=0;)R="0"+R;return 0!==this.negative&&(R="-"+R),R}if(S===(0|S)&&S>=2&&S<=36){var Y=h[S],W=v[S];R="";var te=this.clone();for(te.negative=0;!te.isZero();){var z=te.modn(W).toString(S);R=(te=te.idivn(W)).isZero()?z+R:u[Y-z.length]+z+R}for(this.isZero()&&(R="0"+R);R.length%C!=0;)R="0"+R;return 0!==this.negative&&(R="-"+R),R}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var S=this.words[0];return 2===this.length?S+=67108864*this.words[1]:3===this.length&&1===this.words[2]?S+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-S:S},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(S,C){return r(void 0!==p),this.toArrayLike(p,S,C)},n.prototype.toArray=function(S,C){return this.toArrayLike(Array,S,C)},n.prototype.toArrayLike=function(S,C,R){var F=this.byteLength(),H=R||Math.max(1,F);r(F<=H,"byte array longer than desired length"),r(H>0,"Requested array length <= 0"),this.strip();var U,X,Z="le"===C,Y=new S(H),W=this.clone();if(Z){for(X=0;!W.isZero();X++)U=W.andln(255),W.iushrn(8),Y[X]=U;for(;X<H;X++)Y[X]=0}else{for(X=0;X<H-F;X++)Y[X]=0;for(X=0;!W.isZero();X++)U=W.andln(255),W.iushrn(8),Y[H-X-1]=U}return Y},n.prototype._countBits=Math.clz32?function(S){return 32-Math.clz32(S)}:function(S){var C=S,R=0;return C>=4096&&(R+=13,C>>>=13),C>=64&&(R+=7,C>>>=7),C>=8&&(R+=4,C>>>=4),C>=2&&(R+=2,C>>>=2),R+C},n.prototype._zeroBits=function(S){if(0===S)return 26;var C=S,R=0;return 0==(8191&C)&&(R+=13,C>>>=13),0==(127&C)&&(R+=7,C>>>=7),0==(15&C)&&(R+=4,C>>>=4),0==(3&C)&&(R+=2,C>>>=2),0==(1&C)&&R++,R},n.prototype.bitLength=function(){var C=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+C},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,C=0;C<this.length;C++){var R=this._zeroBits(this.words[C]);if(S+=R,26!==R)break}return S},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(S){return 0!==this.negative?this.abs().inotn(S).iaddn(1):this.clone()},n.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var C=0;C<S.length;C++)this.words[C]=this.words[C]|S.words[C];return this.strip()},n.prototype.ior=function(S){return r(0==(this.negative|S.negative)),this.iuor(S)},n.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},n.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},n.prototype.iuand=function(S){var C;C=this.length>S.length?S:this;for(var R=0;R<C.length;R++)this.words[R]=this.words[R]&S.words[R];return this.length=C.length,this.strip()},n.prototype.iand=function(S){return r(0==(this.negative|S.negative)),this.iuand(S)},n.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},n.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},n.prototype.iuxor=function(S){var C,R;this.length>S.length?(C=this,R=S):(C=S,R=this);for(var F=0;F<R.length;F++)this.words[F]=C.words[F]^R.words[F];if(this!==C)for(;F<C.length;F++)this.words[F]=C.words[F];return this.length=C.length,this.strip()},n.prototype.ixor=function(S){return r(0==(this.negative|S.negative)),this.iuxor(S)},n.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},n.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},n.prototype.inotn=function(S){r("number"==typeof S&&S>=0);var C=0|Math.ceil(S/26),R=S%26;this._expand(C),R>0&&C--;for(var F=0;F<C;F++)this.words[F]=67108863&~this.words[F];return R>0&&(this.words[F]=~this.words[F]&67108863>>26-R),this.strip()},n.prototype.notn=function(S){return this.clone().inotn(S)},n.prototype.setn=function(S,C){r("number"==typeof S&&S>=0);var R=S/26|0,F=S%26;return this._expand(R+1),this.words[R]=C?this.words[R]|1<<F:this.words[R]&~(1<<F),this.strip()},n.prototype.iadd=function(S){var C,R,F;if(0!==this.negative&&0===S.negative)return this.negative=0,C=this.isub(S),this.negative^=1,this._normSign();if(0===this.negative&&0!==S.negative)return S.negative=0,C=this.isub(S),S.negative=1,C._normSign();this.length>S.length?(R=this,F=S):(R=S,F=this);for(var H=0,U=0;U<F.length;U++)this.words[U]=67108863&(C=(0|R.words[U])+(0|F.words[U])+H),H=C>>>26;for(;0!==H&&U<R.length;U++)this.words[U]=67108863&(C=(0|R.words[U])+H),H=C>>>26;if(this.length=R.length,0!==H)this.words[this.length]=H,this.length++;else if(R!==this)for(;U<R.length;U++)this.words[U]=R.words[U];return this},n.prototype.add=function(S){var C;return 0!==S.negative&&0===this.negative?(S.negative=0,C=this.sub(S),S.negative^=1,C):0===S.negative&&0!==this.negative?(this.negative=0,C=S.sub(this),this.negative=1,C):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},n.prototype.isub=function(S){if(0!==S.negative){S.negative=0;var C=this.iadd(S);return S.negative=1,C._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var R,F,H=this.cmp(S);if(0===H)return this.negative=0,this.length=1,this.words[0]=0,this;H>0?(R=this,F=S):(R=S,F=this);for(var U=0,X=0;X<F.length;X++)U=(C=(0|R.words[X])-(0|F.words[X])+U)>>26,this.words[X]=67108863&C;for(;0!==U&&X<R.length;X++)U=(C=(0|R.words[X])+U)>>26,this.words[X]=67108863&C;if(0===U&&X<R.length&&R!==this)for(;X<R.length;X++)this.words[X]=R.words[X];return this.length=Math.max(this.length,X),R!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(S){return this.clone().isub(S)};var l=function(S,C,R){var F,H,U,X=S.words,Z=C.words,Y=R.words,W=0,te=0|X[0],z=8191&te,N=te>>>13,V=0|X[1],Q=8191&V,j=V>>>13,J=0|X[2],K=8191&J,re=J>>>13,ie=0|X[3],ce=8191&ie,se=ie>>>13,de=0|X[4],ue=8191&de,ge=de>>>13,be=0|X[5],Te=8191&be,we=be>>>13,Le=0|X[6],fe=8191&Le,ve=Le>>>13,Me=0|X[7],ke=8191&Me,Ce=Me>>>13,Pe=0|X[8],Fe=8191&Pe,qe=Pe>>>13,rt=0|X[9],ze=8191&rt,He=rt>>>13,Xe=0|Z[0],Je=8191&Xe,at=Xe>>>13,pt=0|Z[1],xt=8191&pt,Ft=pt>>>13,Dt=0|Z[2],ot=8191&Dt,it=Dt>>>13,Et=0|Z[3],Xt=8191&Et,nr=Et>>>13,Ue=0|Z[4],We=8191&Ue,Be=Ue>>>13,Qe=0|Z[5],Ae=8191&Qe,De=Qe>>>13,Oe=0|Z[6],Ie=8191&Oe,et=Oe>>>13,ct=0|Z[7],vt=8191&ct,ft=ct>>>13,It=0|Z[8],ut=8191&It,Ot=It>>>13,Rt=0|Z[9],$e=8191&Rt,yt=Rt>>>13;R.negative=S.negative^C.negative,R.length=19;var Bt=(W+(F=Math.imul(z,Je))|0)+((8191&(H=(H=Math.imul(z,at))+Math.imul(N,Je)|0))<<13)|0;W=((U=Math.imul(N,at))+(H>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,F=Math.imul(Q,Je),H=(H=Math.imul(Q,at))+Math.imul(j,Je)|0,U=Math.imul(j,at);var Ut=(W+(F=F+Math.imul(z,xt)|0)|0)+((8191&(H=(H=H+Math.imul(z,Ft)|0)+Math.imul(N,xt)|0))<<13)|0;W=((U=U+Math.imul(N,Ft)|0)+(H>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,F=Math.imul(K,Je),H=(H=Math.imul(K,at))+Math.imul(re,Je)|0,U=Math.imul(re,at),F=F+Math.imul(Q,xt)|0,H=(H=H+Math.imul(Q,Ft)|0)+Math.imul(j,xt)|0,U=U+Math.imul(j,Ft)|0;var Qt=(W+(F=F+Math.imul(z,ot)|0)|0)+((8191&(H=(H=H+Math.imul(z,it)|0)+Math.imul(N,ot)|0))<<13)|0;W=((U=U+Math.imul(N,it)|0)+(H>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,F=Math.imul(ce,Je),H=(H=Math.imul(ce,at))+Math.imul(se,Je)|0,U=Math.imul(se,at),F=F+Math.imul(K,xt)|0,H=(H=H+Math.imul(K,Ft)|0)+Math.imul(re,xt)|0,U=U+Math.imul(re,Ft)|0,F=F+Math.imul(Q,ot)|0,H=(H=H+Math.imul(Q,it)|0)+Math.imul(j,ot)|0,U=U+Math.imul(j,it)|0;var Re=(W+(F=F+Math.imul(z,Xt)|0)|0)+((8191&(H=(H=H+Math.imul(z,nr)|0)+Math.imul(N,Xt)|0))<<13)|0;W=((U=U+Math.imul(N,nr)|0)+(H>>>13)|0)+(Re>>>26)|0,Re&=67108863,F=Math.imul(ue,Je),H=(H=Math.imul(ue,at))+Math.imul(ge,Je)|0,U=Math.imul(ge,at),F=F+Math.imul(ce,xt)|0,H=(H=H+Math.imul(ce,Ft)|0)+Math.imul(se,xt)|0,U=U+Math.imul(se,Ft)|0,F=F+Math.imul(K,ot)|0,H=(H=H+Math.imul(K,it)|0)+Math.imul(re,ot)|0,U=U+Math.imul(re,it)|0,F=F+Math.imul(Q,Xt)|0,H=(H=H+Math.imul(Q,nr)|0)+Math.imul(j,Xt)|0,U=U+Math.imul(j,nr)|0;var ht=(W+(F=F+Math.imul(z,We)|0)|0)+((8191&(H=(H=H+Math.imul(z,Be)|0)+Math.imul(N,We)|0))<<13)|0;W=((U=U+Math.imul(N,Be)|0)+(H>>>13)|0)+(ht>>>26)|0,ht&=67108863,F=Math.imul(Te,Je),H=(H=Math.imul(Te,at))+Math.imul(we,Je)|0,U=Math.imul(we,at),F=F+Math.imul(ue,xt)|0,H=(H=H+Math.imul(ue,Ft)|0)+Math.imul(ge,xt)|0,U=U+Math.imul(ge,Ft)|0,F=F+Math.imul(ce,ot)|0,H=(H=H+Math.imul(ce,it)|0)+Math.imul(se,ot)|0,U=U+Math.imul(se,it)|0,F=F+Math.imul(K,Xt)|0,H=(H=H+Math.imul(K,nr)|0)+Math.imul(re,Xt)|0,U=U+Math.imul(re,nr)|0,F=F+Math.imul(Q,We)|0,H=(H=H+Math.imul(Q,Be)|0)+Math.imul(j,We)|0,U=U+Math.imul(j,Be)|0;var Mt=(W+(F=F+Math.imul(z,Ae)|0)|0)+((8191&(H=(H=H+Math.imul(z,De)|0)+Math.imul(N,Ae)|0))<<13)|0;W=((U=U+Math.imul(N,De)|0)+(H>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,F=Math.imul(fe,Je),H=(H=Math.imul(fe,at))+Math.imul(ve,Je)|0,U=Math.imul(ve,at),F=F+Math.imul(Te,xt)|0,H=(H=H+Math.imul(Te,Ft)|0)+Math.imul(we,xt)|0,U=U+Math.imul(we,Ft)|0,F=F+Math.imul(ue,ot)|0,H=(H=H+Math.imul(ue,it)|0)+Math.imul(ge,ot)|0,U=U+Math.imul(ge,it)|0,F=F+Math.imul(ce,Xt)|0,H=(H=H+Math.imul(ce,nr)|0)+Math.imul(se,Xt)|0,U=U+Math.imul(se,nr)|0,F=F+Math.imul(K,We)|0,H=(H=H+Math.imul(K,Be)|0)+Math.imul(re,We)|0,U=U+Math.imul(re,Be)|0,F=F+Math.imul(Q,Ae)|0,H=(H=H+Math.imul(Q,De)|0)+Math.imul(j,Ae)|0,U=U+Math.imul(j,De)|0;var Nt=(W+(F=F+Math.imul(z,Ie)|0)|0)+((8191&(H=(H=H+Math.imul(z,et)|0)+Math.imul(N,Ie)|0))<<13)|0;W=((U=U+Math.imul(N,et)|0)+(H>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,F=Math.imul(ke,Je),H=(H=Math.imul(ke,at))+Math.imul(Ce,Je)|0,U=Math.imul(Ce,at),F=F+Math.imul(fe,xt)|0,H=(H=H+Math.imul(fe,Ft)|0)+Math.imul(ve,xt)|0,U=U+Math.imul(ve,Ft)|0,F=F+Math.imul(Te,ot)|0,H=(H=H+Math.imul(Te,it)|0)+Math.imul(we,ot)|0,U=U+Math.imul(we,it)|0,F=F+Math.imul(ue,Xt)|0,H=(H=H+Math.imul(ue,nr)|0)+Math.imul(ge,Xt)|0,U=U+Math.imul(ge,nr)|0,F=F+Math.imul(ce,We)|0,H=(H=H+Math.imul(ce,Be)|0)+Math.imul(se,We)|0,U=U+Math.imul(se,Be)|0,F=F+Math.imul(K,Ae)|0,H=(H=H+Math.imul(K,De)|0)+Math.imul(re,Ae)|0,U=U+Math.imul(re,De)|0,F=F+Math.imul(Q,Ie)|0,H=(H=H+Math.imul(Q,et)|0)+Math.imul(j,Ie)|0,U=U+Math.imul(j,et)|0;var Zt=(W+(F=F+Math.imul(z,vt)|0)|0)+((8191&(H=(H=H+Math.imul(z,ft)|0)+Math.imul(N,vt)|0))<<13)|0;W=((U=U+Math.imul(N,ft)|0)+(H>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,F=Math.imul(Fe,Je),H=(H=Math.imul(Fe,at))+Math.imul(qe,Je)|0,U=Math.imul(qe,at),F=F+Math.imul(ke,xt)|0,H=(H=H+Math.imul(ke,Ft)|0)+Math.imul(Ce,xt)|0,U=U+Math.imul(Ce,Ft)|0,F=F+Math.imul(fe,ot)|0,H=(H=H+Math.imul(fe,it)|0)+Math.imul(ve,ot)|0,U=U+Math.imul(ve,it)|0,F=F+Math.imul(Te,Xt)|0,H=(H=H+Math.imul(Te,nr)|0)+Math.imul(we,Xt)|0,U=U+Math.imul(we,nr)|0,F=F+Math.imul(ue,We)|0,H=(H=H+Math.imul(ue,Be)|0)+Math.imul(ge,We)|0,U=U+Math.imul(ge,Be)|0,F=F+Math.imul(ce,Ae)|0,H=(H=H+Math.imul(ce,De)|0)+Math.imul(se,Ae)|0,U=U+Math.imul(se,De)|0,F=F+Math.imul(K,Ie)|0,H=(H=H+Math.imul(K,et)|0)+Math.imul(re,Ie)|0,U=U+Math.imul(re,et)|0,F=F+Math.imul(Q,vt)|0,H=(H=H+Math.imul(Q,ft)|0)+Math.imul(j,vt)|0,U=U+Math.imul(j,ft)|0;var or=(W+(F=F+Math.imul(z,ut)|0)|0)+((8191&(H=(H=H+Math.imul(z,Ot)|0)+Math.imul(N,ut)|0))<<13)|0;W=((U=U+Math.imul(N,Ot)|0)+(H>>>13)|0)+(or>>>26)|0,or&=67108863,F=Math.imul(ze,Je),H=(H=Math.imul(ze,at))+Math.imul(He,Je)|0,U=Math.imul(He,at),F=F+Math.imul(Fe,xt)|0,H=(H=H+Math.imul(Fe,Ft)|0)+Math.imul(qe,xt)|0,U=U+Math.imul(qe,Ft)|0,F=F+Math.imul(ke,ot)|0,H=(H=H+Math.imul(ke,it)|0)+Math.imul(Ce,ot)|0,U=U+Math.imul(Ce,it)|0,F=F+Math.imul(fe,Xt)|0,H=(H=H+Math.imul(fe,nr)|0)+Math.imul(ve,Xt)|0,U=U+Math.imul(ve,nr)|0,F=F+Math.imul(Te,We)|0,H=(H=H+Math.imul(Te,Be)|0)+Math.imul(we,We)|0,U=U+Math.imul(we,Be)|0,F=F+Math.imul(ue,Ae)|0,H=(H=H+Math.imul(ue,De)|0)+Math.imul(ge,Ae)|0,U=U+Math.imul(ge,De)|0,F=F+Math.imul(ce,Ie)|0,H=(H=H+Math.imul(ce,et)|0)+Math.imul(se,Ie)|0,U=U+Math.imul(se,et)|0,F=F+Math.imul(K,vt)|0,H=(H=H+Math.imul(K,ft)|0)+Math.imul(re,vt)|0,U=U+Math.imul(re,ft)|0,F=F+Math.imul(Q,ut)|0,H=(H=H+Math.imul(Q,Ot)|0)+Math.imul(j,ut)|0,U=U+Math.imul(j,Ot)|0;var Wt=(W+(F=F+Math.imul(z,$e)|0)|0)+((8191&(H=(H=H+Math.imul(z,yt)|0)+Math.imul(N,$e)|0))<<13)|0;W=((U=U+Math.imul(N,yt)|0)+(H>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(ze,xt),H=(H=Math.imul(ze,Ft))+Math.imul(He,xt)|0,U=Math.imul(He,Ft),F=F+Math.imul(Fe,ot)|0,H=(H=H+Math.imul(Fe,it)|0)+Math.imul(qe,ot)|0,U=U+Math.imul(qe,it)|0,F=F+Math.imul(ke,Xt)|0,H=(H=H+Math.imul(ke,nr)|0)+Math.imul(Ce,Xt)|0,U=U+Math.imul(Ce,nr)|0,F=F+Math.imul(fe,We)|0,H=(H=H+Math.imul(fe,Be)|0)+Math.imul(ve,We)|0,U=U+Math.imul(ve,Be)|0,F=F+Math.imul(Te,Ae)|0,H=(H=H+Math.imul(Te,De)|0)+Math.imul(we,Ae)|0,U=U+Math.imul(we,De)|0,F=F+Math.imul(ue,Ie)|0,H=(H=H+Math.imul(ue,et)|0)+Math.imul(ge,Ie)|0,U=U+Math.imul(ge,et)|0,F=F+Math.imul(ce,vt)|0,H=(H=H+Math.imul(ce,ft)|0)+Math.imul(se,vt)|0,U=U+Math.imul(se,ft)|0,F=F+Math.imul(K,ut)|0,H=(H=H+Math.imul(K,Ot)|0)+Math.imul(re,ut)|0,U=U+Math.imul(re,Ot)|0;var er=(W+(F=F+Math.imul(Q,$e)|0)|0)+((8191&(H=(H=H+Math.imul(Q,yt)|0)+Math.imul(j,$e)|0))<<13)|0;W=((U=U+Math.imul(j,yt)|0)+(H>>>13)|0)+(er>>>26)|0,er&=67108863,F=Math.imul(ze,ot),H=(H=Math.imul(ze,it))+Math.imul(He,ot)|0,U=Math.imul(He,it),F=F+Math.imul(Fe,Xt)|0,H=(H=H+Math.imul(Fe,nr)|0)+Math.imul(qe,Xt)|0,U=U+Math.imul(qe,nr)|0,F=F+Math.imul(ke,We)|0,H=(H=H+Math.imul(ke,Be)|0)+Math.imul(Ce,We)|0,U=U+Math.imul(Ce,Be)|0,F=F+Math.imul(fe,Ae)|0,H=(H=H+Math.imul(fe,De)|0)+Math.imul(ve,Ae)|0,U=U+Math.imul(ve,De)|0,F=F+Math.imul(Te,Ie)|0,H=(H=H+Math.imul(Te,et)|0)+Math.imul(we,Ie)|0,U=U+Math.imul(we,et)|0,F=F+Math.imul(ue,vt)|0,H=(H=H+Math.imul(ue,ft)|0)+Math.imul(ge,vt)|0,U=U+Math.imul(ge,ft)|0,F=F+Math.imul(ce,ut)|0,H=(H=H+Math.imul(ce,Ot)|0)+Math.imul(se,ut)|0,U=U+Math.imul(se,Ot)|0;var cr=(W+(F=F+Math.imul(K,$e)|0)|0)+((8191&(H=(H=H+Math.imul(K,yt)|0)+Math.imul(re,$e)|0))<<13)|0;W=((U=U+Math.imul(re,yt)|0)+(H>>>13)|0)+(cr>>>26)|0,cr&=67108863,F=Math.imul(ze,Xt),H=(H=Math.imul(ze,nr))+Math.imul(He,Xt)|0,U=Math.imul(He,nr),F=F+Math.imul(Fe,We)|0,H=(H=H+Math.imul(Fe,Be)|0)+Math.imul(qe,We)|0,U=U+Math.imul(qe,Be)|0,F=F+Math.imul(ke,Ae)|0,H=(H=H+Math.imul(ke,De)|0)+Math.imul(Ce,Ae)|0,U=U+Math.imul(Ce,De)|0,F=F+Math.imul(fe,Ie)|0,H=(H=H+Math.imul(fe,et)|0)+Math.imul(ve,Ie)|0,U=U+Math.imul(ve,et)|0,F=F+Math.imul(Te,vt)|0,H=(H=H+Math.imul(Te,ft)|0)+Math.imul(we,vt)|0,U=U+Math.imul(we,ft)|0,F=F+Math.imul(ue,ut)|0,H=(H=H+Math.imul(ue,Ot)|0)+Math.imul(ge,ut)|0,U=U+Math.imul(ge,Ot)|0;var _r=(W+(F=F+Math.imul(ce,$e)|0)|0)+((8191&(H=(H=H+Math.imul(ce,yt)|0)+Math.imul(se,$e)|0))<<13)|0;W=((U=U+Math.imul(se,yt)|0)+(H>>>13)|0)+(_r>>>26)|0,_r&=67108863,F=Math.imul(ze,We),H=(H=Math.imul(ze,Be))+Math.imul(He,We)|0,U=Math.imul(He,Be),F=F+Math.imul(Fe,Ae)|0,H=(H=H+Math.imul(Fe,De)|0)+Math.imul(qe,Ae)|0,U=U+Math.imul(qe,De)|0,F=F+Math.imul(ke,Ie)|0,H=(H=H+Math.imul(ke,et)|0)+Math.imul(Ce,Ie)|0,U=U+Math.imul(Ce,et)|0,F=F+Math.imul(fe,vt)|0,H=(H=H+Math.imul(fe,ft)|0)+Math.imul(ve,vt)|0,U=U+Math.imul(ve,ft)|0,F=F+Math.imul(Te,ut)|0,H=(H=H+Math.imul(Te,Ot)|0)+Math.imul(we,ut)|0,U=U+Math.imul(we,Ot)|0;var xr=(W+(F=F+Math.imul(ue,$e)|0)|0)+((8191&(H=(H=H+Math.imul(ue,yt)|0)+Math.imul(ge,$e)|0))<<13)|0;W=((U=U+Math.imul(ge,yt)|0)+(H>>>13)|0)+(xr>>>26)|0,xr&=67108863,F=Math.imul(ze,Ae),H=(H=Math.imul(ze,De))+Math.imul(He,Ae)|0,U=Math.imul(He,De),F=F+Math.imul(Fe,Ie)|0,H=(H=H+Math.imul(Fe,et)|0)+Math.imul(qe,Ie)|0,U=U+Math.imul(qe,et)|0,F=F+Math.imul(ke,vt)|0,H=(H=H+Math.imul(ke,ft)|0)+Math.imul(Ce,vt)|0,U=U+Math.imul(Ce,ft)|0,F=F+Math.imul(fe,ut)|0,H=(H=H+Math.imul(fe,Ot)|0)+Math.imul(ve,ut)|0,U=U+Math.imul(ve,Ot)|0;var dr=(W+(F=F+Math.imul(Te,$e)|0)|0)+((8191&(H=(H=H+Math.imul(Te,yt)|0)+Math.imul(we,$e)|0))<<13)|0;W=((U=U+Math.imul(we,yt)|0)+(H>>>13)|0)+(dr>>>26)|0,dr&=67108863,F=Math.imul(ze,Ie),H=(H=Math.imul(ze,et))+Math.imul(He,Ie)|0,U=Math.imul(He,et),F=F+Math.imul(Fe,vt)|0,H=(H=H+Math.imul(Fe,ft)|0)+Math.imul(qe,vt)|0,U=U+Math.imul(qe,ft)|0,F=F+Math.imul(ke,ut)|0,H=(H=H+Math.imul(ke,Ot)|0)+Math.imul(Ce,ut)|0,U=U+Math.imul(Ce,Ot)|0;var pr=(W+(F=F+Math.imul(fe,$e)|0)|0)+((8191&(H=(H=H+Math.imul(fe,yt)|0)+Math.imul(ve,$e)|0))<<13)|0;W=((U=U+Math.imul(ve,yt)|0)+(H>>>13)|0)+(pr>>>26)|0,pr&=67108863,F=Math.imul(ze,vt),H=(H=Math.imul(ze,ft))+Math.imul(He,vt)|0,U=Math.imul(He,ft),F=F+Math.imul(Fe,ut)|0,H=(H=H+Math.imul(Fe,Ot)|0)+Math.imul(qe,ut)|0,U=U+Math.imul(qe,Ot)|0;var br=(W+(F=F+Math.imul(ke,$e)|0)|0)+((8191&(H=(H=H+Math.imul(ke,yt)|0)+Math.imul(Ce,$e)|0))<<13)|0;W=((U=U+Math.imul(Ce,yt)|0)+(H>>>13)|0)+(br>>>26)|0,br&=67108863,F=Math.imul(ze,ut),H=(H=Math.imul(ze,Ot))+Math.imul(He,ut)|0,U=Math.imul(He,Ot);var Nr=(W+(F=F+Math.imul(Fe,$e)|0)|0)+((8191&(H=(H=H+Math.imul(Fe,yt)|0)+Math.imul(qe,$e)|0))<<13)|0;W=((U=U+Math.imul(qe,yt)|0)+(H>>>13)|0)+(Nr>>>26)|0,Nr&=67108863;var kr=(W+(F=Math.imul(ze,$e))|0)+((8191&(H=(H=Math.imul(ze,yt))+Math.imul(He,$e)|0))<<13)|0;return W=((U=Math.imul(He,yt))+(H>>>13)|0)+(kr>>>26)|0,kr&=67108863,Y[0]=Bt,Y[1]=Ut,Y[2]=Qt,Y[3]=Re,Y[4]=ht,Y[5]=Mt,Y[6]=Nt,Y[7]=Zt,Y[8]=or,Y[9]=Wt,Y[10]=er,Y[11]=cr,Y[12]=_r,Y[13]=xr,Y[14]=dr,Y[15]=pr,Y[16]=br,Y[17]=Nr,Y[18]=kr,0!==W&&(Y[19]=W,R.length++),R};function x(S,C,R){return(new m).mulp(S,C,R)}function m(S,C){this.x=S,this.y=C}Math.imul||(l=f),n.prototype.mulTo=function(S,C){var R=this.length+S.length;return 10===this.length&&10===S.length?l(this,S,C):R<63?f(this,S,C):R<1024?function(F,H,U){U.negative=H.negative^F.negative,U.length=F.length+H.length;for(var X=0,Z=0,Y=0;Y<U.length-1;Y++){var W=Z;Z=0;for(var te=67108863&X,z=Math.min(Y,H.length-1),N=Math.max(0,Y-F.length+1);N<=z;N++){var Q=(0|F.words[Y-N])*(0|H.words[N]),j=67108863&Q;te=67108863&(j=j+te|0),Z+=(W=(W=W+(Q/67108864|0)|0)+(j>>>26)|0)>>>26,W&=67108863}U.words[Y]=te,X=W,W=Z}return 0!==X?U.words[Y]=X:U.length--,U.strip()}(this,S,C):x(this,S,C)},m.prototype.makeRBT=function(S){for(var C=new Array(S),R=n.prototype._countBits(S)-1,F=0;F<S;F++)C[F]=this.revBin(F,R,S);return C},m.prototype.revBin=function(S,C,R){if(0===S||S===R-1)return S;for(var F=0,H=0;H<C;H++)F|=(1&S)<<C-H-1,S>>=1;return F},m.prototype.permute=function(S,C,R,F,H,U){for(var X=0;X<U;X++)F[X]=C[S[X]],H[X]=R[S[X]]},m.prototype.transform=function(S,C,R,F,H,U){this.permute(U,S,C,R,F,H);for(var X=1;X<H;X<<=1)for(var Z=X<<1,Y=Math.cos(2*Math.PI/Z),W=Math.sin(2*Math.PI/Z),te=0;te<H;te+=Z)for(var z=Y,N=W,V=0;V<X;V++){var Q=R[te+V],j=F[te+V],J=R[te+V+X],K=F[te+V+X],re=z*J-N*K;K=z*K+N*J,R[te+V]=Q+(J=re),F[te+V]=j+K,R[te+V+X]=Q-J,F[te+V+X]=j-K,V!==Z&&(re=Y*z-W*N,N=Y*N+W*z,z=re)}},m.prototype.guessLen13b=function(S,C){var R=1|Math.max(C,S),F=1&R,H=0;for(R=R/2|0;R;R>>>=1)H++;return 1<<H+1+F},m.prototype.conjugate=function(S,C,R){if(!(R<=1))for(var F=0;F<R/2;F++){var H=S[F];S[F]=S[R-F-1],S[R-F-1]=H,H=C[F],C[F]=-C[R-F-1],C[R-F-1]=-H}},m.prototype.normalize13b=function(S,C){for(var R=0,F=0;F<C/2;F++){var H=8192*Math.round(S[2*F+1]/C)+Math.round(S[2*F]/C)+R;S[F]=67108863&H,R=H<67108864?0:H/67108864|0}return S},m.prototype.convert13b=function(S,C,R,F){for(var H=0,U=0;U<C;U++)R[2*U]=8191&(H+=0|S[U]),R[2*U+1]=8191&(H>>>=13),H>>>=13;for(U=2*C;U<F;++U)R[U]=0;r(0===H),r(0==(-8192&H))},m.prototype.stub=function(S){for(var C=new Array(S),R=0;R<S;R++)C[R]=0;return C},m.prototype.mulp=function(S,C,R){var F=2*this.guessLen13b(S.length,C.length),H=this.makeRBT(F),U=this.stub(F),X=new Array(F),Z=new Array(F),Y=new Array(F),W=new Array(F),te=new Array(F),z=new Array(F),N=R.words;N.length=F,this.convert13b(S.words,S.length,X,F),this.convert13b(C.words,C.length,W,F),this.transform(X,U,Z,Y,F,H),this.transform(W,U,te,z,F,H);for(var V=0;V<F;V++){var Q=Z[V]*te[V]-Y[V]*z[V];Y[V]=Z[V]*z[V]+Y[V]*te[V],Z[V]=Q}return this.conjugate(Z,Y,F),this.transform(Z,Y,N,U,F,H),this.conjugate(N,U,F),this.normalize13b(N,F),R.negative=S.negative^C.negative,R.length=S.length+C.length,R.strip()},n.prototype.mul=function(S){var C=new n(null);return C.words=new Array(this.length+S.length),this.mulTo(S,C)},n.prototype.mulf=function(S){var C=new n(null);return C.words=new Array(this.length+S.length),x(this,S,C)},n.prototype.imul=function(S){return this.clone().mulTo(S,this)},n.prototype.imuln=function(S){r("number"==typeof S),r(S<67108864);for(var C=0,R=0;R<this.length;R++){var F=(0|this.words[R])*S,H=(67108863&F)+(67108863&C);C>>=26,C+=F/67108864|0,C+=H>>>26,this.words[R]=67108863&H}return 0!==C&&(this.words[R]=C,this.length++),this},n.prototype.muln=function(S){return this.clone().imuln(S)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(S){var C=function(U){for(var X=new Array(U.bitLength()),Z=0;Z<X.length;Z++){var W=Z%26;X[Z]=(U.words[Z/26|0]&1<<W)>>>W}return X}(S);if(0===C.length)return new n(1);for(var R=this,F=0;F<C.length&&0===C[F];F++,R=R.sqr());if(++F<C.length)for(var H=R.sqr();F<C.length;F++,H=H.sqr())0!==C[F]&&(R=R.mul(H));return R},n.prototype.iushln=function(S){r("number"==typeof S&&S>=0);var C,R=S%26,F=(S-R)/26,H=67108863>>>26-R<<26-R;if(0!==R){var U=0;for(C=0;C<this.length;C++){var X=this.words[C]&H;this.words[C]=(0|this.words[C])-X<<R|U,U=X>>>26-R}U&&(this.words[C]=U,this.length++)}if(0!==F){for(C=this.length-1;C>=0;C--)this.words[C+F]=this.words[C];for(C=0;C<F;C++)this.words[C]=0;this.length+=F}return this.strip()},n.prototype.ishln=function(S){return r(0===this.negative),this.iushln(S)},n.prototype.iushrn=function(S,C,R){var F;r("number"==typeof S&&S>=0),F=C?(C-C%26)/26:0;var H=S%26,U=Math.min((S-H)/26,this.length),X=67108863^67108863>>>H<<H,Z=R;if(F-=U,F=Math.max(0,F),Z){for(var Y=0;Y<U;Y++)Z.words[Y]=this.words[Y];Z.length=U}if(0!==U)if(this.length>U)for(this.length-=U,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+U];else this.words[0]=0,this.length=1;var W=0;for(Y=this.length-1;Y>=0&&(0!==W||Y>=F);Y--){var te=0|this.words[Y];this.words[Y]=W<<26-H|te>>>H,W=te&X}return Z&&0!==W&&(Z.words[Z.length++]=W),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(S,C,R){return r(0===this.negative),this.iushrn(S,C,R)},n.prototype.shln=function(S){return this.clone().ishln(S)},n.prototype.ushln=function(S){return this.clone().iushln(S)},n.prototype.shrn=function(S){return this.clone().ishrn(S)},n.prototype.ushrn=function(S){return this.clone().iushrn(S)},n.prototype.testn=function(S){r("number"==typeof S&&S>=0);var C=S%26,R=(S-C)/26;return!(this.length<=R||!(this.words[R]&1<<C))},n.prototype.imaskn=function(S){r("number"==typeof S&&S>=0);var C=S%26,R=(S-C)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=R?this:(0!==C&&R++,this.length=Math.min(R,this.length),0!==C&&(this.words[this.length-1]&=67108863^67108863>>>C<<C),this.strip())},n.prototype.maskn=function(S){return this.clone().imaskn(S)},n.prototype.iaddn=function(S){return r("number"==typeof S),r(S<67108864),S<0?this.isubn(-S):0!==this.negative?1===this.length&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},n.prototype._iaddn=function(S){this.words[0]+=S;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},n.prototype.isubn=function(S){if(r("number"==typeof S),r(S<67108864),S<0)return this.iaddn(-S);if(0!==this.negative)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this.strip()},n.prototype.addn=function(S){return this.clone().iaddn(S)},n.prototype.subn=function(S){return this.clone().isubn(S)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(S,C,R){var F,H;this._expand(S.length+R);var X=0;for(F=0;F<S.length;F++){H=(0|this.words[F+R])+X;var Z=(0|S.words[F])*C;X=((H-=67108863&Z)>>26)-(Z/67108864|0),this.words[F+R]=67108863&H}for(;F<this.length-R;F++)X=(H=(0|this.words[F+R])+X)>>26,this.words[F+R]=67108863&H;if(0===X)return this.strip();for(r(-1===X),X=0,F=0;F<this.length;F++)X=(H=-(0|this.words[F])+X)>>26,this.words[F]=67108863&H;return this.negative=1,this.strip()},n.prototype._wordDiv=function(S,C){var R,F=this.clone(),H=S,U=0|H.words[H.length-1];0!=(R=26-this._countBits(U))&&(H=H.ushln(R),F.iushln(R),U=0|H.words[H.length-1]);var X,Z=F.length-H.length;if("mod"!==C){(X=new n(null)).length=Z+1,X.words=new Array(X.length);for(var Y=0;Y<X.length;Y++)X.words[Y]=0}var W=F.clone()._ishlnsubmul(H,1,Z);0===W.negative&&(F=W,X&&(X.words[Z]=1));for(var te=Z-1;te>=0;te--){var z=67108864*(0|F.words[H.length+te])+(0|F.words[H.length+te-1]);for(z=Math.min(z/U|0,67108863),F._ishlnsubmul(H,z,te);0!==F.negative;)z--,F.negative=0,F._ishlnsubmul(H,1,te),F.isZero()||(F.negative^=1);X&&(X.words[te]=z)}return X&&X.strip(),F.strip(),"div"!==C&&0!==R&&F.iushrn(R),{div:X||null,mod:F}},n.prototype.divmod=function(S,C,R){return r(!S.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===S.negative?(U=this.neg().divmod(S,C),"mod"!==C&&(F=U.div.neg()),"div"!==C&&(H=U.mod.neg(),R&&0!==H.negative&&H.iadd(S)),{div:F,mod:H}):0===this.negative&&0!==S.negative?(U=this.divmod(S.neg(),C),"mod"!==C&&(F=U.div.neg()),{div:F,mod:U.mod}):0!=(this.negative&S.negative)?(U=this.neg().divmod(S.neg(),C),"div"!==C&&(H=U.mod.neg(),R&&0!==H.negative&&H.isub(S)),{div:U.div,mod:H}):S.length>this.length||this.cmp(S)<0?{div:new n(0),mod:this}:1===S.length?"div"===C?{div:this.divn(S.words[0]),mod:null}:"mod"===C?{div:null,mod:new n(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new n(this.modn(S.words[0]))}:this._wordDiv(S,C);var F,H,U},n.prototype.div=function(S){return this.divmod(S,"div",!1).div},n.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},n.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},n.prototype.divRound=function(S){var C=this.divmod(S);if(C.mod.isZero())return C.div;var R=0!==C.div.negative?C.mod.isub(S):C.mod,F=S.ushrn(1),H=S.andln(1),U=R.cmp(F);return U<0||1===H&&0===U?C.div:0!==C.div.negative?C.div.isubn(1):C.div.iaddn(1)},n.prototype.modn=function(S){r(S<=67108863);for(var C=(1<<26)%S,R=0,F=this.length-1;F>=0;F--)R=(C*R+(0|this.words[F]))%S;return R},n.prototype.idivn=function(S){r(S<=67108863);for(var C=0,R=this.length-1;R>=0;R--){var F=(0|this.words[R])+67108864*C;this.words[R]=F/S|0,C=F%S}return this.strip()},n.prototype.divn=function(S){return this.clone().idivn(S)},n.prototype.egcd=function(S){r(0===S.negative),r(!S.isZero());var C=this,R=S.clone();C=0!==C.negative?C.umod(S):C.clone();for(var F=new n(1),H=new n(0),U=new n(0),X=new n(1),Z=0;C.isEven()&&R.isEven();)C.iushrn(1),R.iushrn(1),++Z;for(var Y=R.clone(),W=C.clone();!C.isZero();){for(var te=0,z=1;0==(C.words[0]&z)&&te<26;++te,z<<=1);if(te>0)for(C.iushrn(te);te-- >0;)(F.isOdd()||H.isOdd())&&(F.iadd(Y),H.isub(W)),F.iushrn(1),H.iushrn(1);for(var N=0,V=1;0==(R.words[0]&V)&&N<26;++N,V<<=1);if(N>0)for(R.iushrn(N);N-- >0;)(U.isOdd()||X.isOdd())&&(U.iadd(Y),X.isub(W)),U.iushrn(1),X.iushrn(1);C.cmp(R)>=0?(C.isub(R),F.isub(U),H.isub(X)):(R.isub(C),U.isub(F),X.isub(H))}return{a:U,b:X,gcd:R.iushln(Z)}},n.prototype._invmp=function(S){r(0===S.negative),r(!S.isZero());var C=this,R=S.clone();C=0!==C.negative?C.umod(S):C.clone();for(var F,H=new n(1),U=new n(0),X=R.clone();C.cmpn(1)>0&&R.cmpn(1)>0;){for(var Z=0,Y=1;0==(C.words[0]&Y)&&Z<26;++Z,Y<<=1);if(Z>0)for(C.iushrn(Z);Z-- >0;)H.isOdd()&&H.iadd(X),H.iushrn(1);for(var W=0,te=1;0==(R.words[0]&te)&&W<26;++W,te<<=1);if(W>0)for(R.iushrn(W);W-- >0;)U.isOdd()&&U.iadd(X),U.iushrn(1);C.cmp(R)>=0?(C.isub(R),H.isub(U)):(R.isub(C),U.isub(H))}return(F=0===C.cmpn(1)?H:U).cmpn(0)<0&&F.iadd(S),F},n.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var C=this.clone(),R=S.clone();C.negative=0,R.negative=0;for(var F=0;C.isEven()&&R.isEven();F++)C.iushrn(1),R.iushrn(1);for(;;){for(;C.isEven();)C.iushrn(1);for(;R.isEven();)R.iushrn(1);var H=C.cmp(R);if(H<0){var U=C;C=R,R=U}else if(0===H||0===R.cmpn(1))break;C.isub(R)}return R.iushln(F)},n.prototype.invm=function(S){return this.egcd(S).a.umod(S)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(S){return this.words[0]&S},n.prototype.bincn=function(S){r("number"==typeof S);var C=S%26,R=(S-C)/26,F=1<<C;if(this.length<=R)return this._expand(R+1),this.words[R]|=F,this;for(var H=F,U=R;0!==H&&U<this.length;U++){var X=0|this.words[U];H=(X+=H)>>>26,this.words[U]=X&=67108863}return 0!==H&&(this.words[U]=H,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(S){var C,R=S<0;if(0!==this.negative&&!R)return-1;if(0===this.negative&&R)return 1;if(this.strip(),this.length>1)C=1;else{R&&(S=-S),r(S<=67108863,"Number is too big");var F=0|this.words[0];C=F===S?0:F<S?-1:1}return 0!==this.negative?0|-C:C},n.prototype.cmp=function(S){if(0!==this.negative&&0===S.negative)return-1;if(0===this.negative&&0!==S.negative)return 1;var C=this.ucmp(S);return 0!==this.negative?0|-C:C},n.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var C=0,R=this.length-1;R>=0;R--){var F=0|this.words[R],H=0|S.words[R];if(F!==H){F<H?C=-1:F>H&&(C=1);break}}return C},n.prototype.gtn=function(S){return 1===this.cmpn(S)},n.prototype.gt=function(S){return 1===this.cmp(S)},n.prototype.gten=function(S){return this.cmpn(S)>=0},n.prototype.gte=function(S){return this.cmp(S)>=0},n.prototype.ltn=function(S){return-1===this.cmpn(S)},n.prototype.lt=function(S){return-1===this.cmp(S)},n.prototype.lten=function(S){return this.cmpn(S)<=0},n.prototype.lte=function(S){return this.cmp(S)<=0},n.prototype.eqn=function(S){return 0===this.cmpn(S)},n.prototype.eq=function(S){return 0===this.cmp(S)},n.red=function(S){return new I(S)},n.prototype.toRed=function(S){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),S.convertTo(this)._forceRed(S)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(S){return this.red=S,this},n.prototype.forceRed=function(S){return r(!this.red,"Already a number in reduction context"),this._forceRed(S)},n.prototype.redAdd=function(S){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},n.prototype.redIAdd=function(S){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},n.prototype.redSub=function(S){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},n.prototype.redISub=function(S){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},n.prototype.redShl=function(S){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},n.prototype.redMul=function(S){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},n.prototype.redIMul=function(S){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(S){return r(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var w={k256:null,p224:null,p192:null,p25519:null};function b(S,C){this.name=S,this.p=new n(C,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function T(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(S){if("string"==typeof S){var C=n._prime(S);this.m=C.p,this.prime=C}else r(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function D(S){I.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var S=new n(null);return S.words=new Array(Math.ceil(this.n/13)),S},b.prototype.ireduce=function(S){var C,R=S;do{this.split(R,this.tmp),C=(R=(R=this.imulK(R)).iadd(this.tmp)).bitLength()}while(C>this.n);var F=C<this.n?-1:R.ucmp(this.p);return 0===F?(R.words[0]=0,R.length=1):F>0?R.isub(this.p):void 0!==R.strip?R.strip():R._strip(),R},b.prototype.split=function(S,C){S.iushrn(this.n,0,C)},b.prototype.imulK=function(S){return S.imul(this.k)},o(k,b),k.prototype.split=function(S,C){for(var R=Math.min(S.length,9),F=0;F<R;F++)C.words[F]=S.words[F];if(C.length=R,S.length<=9)return S.words[0]=0,void(S.length=1);var H=S.words[9];for(C.words[C.length++]=4194303&H,F=10;F<S.length;F++){var U=0|S.words[F];S.words[F-10]=(4194303&U)<<4|H>>>22,H=U}S.words[F-10]=H>>>=22,S.length-=0===H&&S.length>10?10:9},k.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var C=0,R=0;R<S.length;R++){var F=0|S.words[R];S.words[R]=67108863&(C+=977*F),C=64*F+(C/67108864|0)}return 0===S.words[S.length-1]&&(S.length--,0===S.words[S.length-1]&&S.length--),S},o(T,b),o(L,b),o(A,b),A.prototype.imulK=function(S){for(var C=0,R=0;R<S.length;R++){var F=19*(0|S.words[R])+C,H=67108863&F;F>>>=26,S.words[R]=H,C=F}return 0!==C&&(S.words[S.length++]=C),S},n._prime=function(S){if(w[S])return w[S];var C;if("k256"===S)C=new k;else if("p224"===S)C=new T;else if("p192"===S)C=new L;else{if("p25519"!==S)throw new Error("Unknown prime "+S);C=new A}return w[S]=C,C},I.prototype._verify1=function(S){r(0===S.negative,"red works only with positives"),r(S.red,"red works only with red numbers")},I.prototype._verify2=function(S,C){r(0==(S.negative|C.negative),"red works only with positives"),r(S.red&&S.red===C.red,"red works only with red numbers")},I.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},I.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},I.prototype.add=function(S,C){this._verify2(S,C);var R=S.add(C);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},I.prototype.iadd=function(S,C){this._verify2(S,C);var R=S.iadd(C);return R.cmp(this.m)>=0&&R.isub(this.m),R},I.prototype.sub=function(S,C){this._verify2(S,C);var R=S.sub(C);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},I.prototype.isub=function(S,C){this._verify2(S,C);var R=S.isub(C);return R.cmpn(0)<0&&R.iadd(this.m),R},I.prototype.shl=function(S,C){return this._verify1(S),this.imod(S.ushln(C))},I.prototype.imul=function(S,C){return this._verify2(S,C),this.imod(S.imul(C))},I.prototype.mul=function(S,C){return this._verify2(S,C),this.imod(S.mul(C))},I.prototype.isqr=function(S){return this.imul(S,S.clone())},I.prototype.sqr=function(S){return this.mul(S,S)},I.prototype.sqrt=function(S){if(S.isZero())return S.clone();var C=this.m.andln(3);if(r(C%2==1),3===C){var R=this.m.add(new n(1)).iushrn(2);return this.pow(S,R)}for(var F=this.m.subn(1),H=0;!F.isZero()&&0===F.andln(1);)H++,F.iushrn(1);r(!F.isZero());var U=new n(1).toRed(this),X=U.redNeg(),Z=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new n(2*Y*Y).toRed(this);0!==this.pow(Y,Z).cmp(X);)Y.redIAdd(X);for(var W=this.pow(Y,F),te=this.pow(S,F.addn(1).iushrn(1)),z=this.pow(S,F),N=H;0!==z.cmp(U);){for(var V=z,Q=0;0!==V.cmp(U);Q++)V=V.redSqr();r(Q<N);var j=this.pow(W,new n(1).iushln(N-Q-1));te=te.redMul(j),W=j.redSqr(),z=z.redMul(W),N=Q}return te},I.prototype.invm=function(S){var C=S._invmp(this.m);return 0!==C.negative?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},I.prototype.pow=function(S,C){if(C.isZero())return new n(1).toRed(this);if(0===C.cmpn(1))return S.clone();var R=new Array(16);R[0]=new n(1).toRed(this),R[1]=S;for(var F=2;F<R.length;F++)R[F]=this.mul(R[F-1],S);var H=R[0],U=0,X=0,Z=C.bitLength()%26;for(0===Z&&(Z=26),F=C.length-1;F>=0;F--){for(var Y=C.words[F],W=Z-1;W>=0;W--){var te=Y>>W&1;H!==R[0]&&(H=this.sqr(H)),0!==te||0!==U?(U<<=1,U|=te,(4==++X||0===F&&0===W)&&(H=this.mul(H,R[U]),X=0,U=0)):X=0}Z=26}return H},I.prototype.convertTo=function(S){var C=S.umod(this.m);return C===S?C.clone():C},I.prototype.convertFrom=function(S){var C=S.clone();return C.red=null,C},n.mont=function(S){return new D(S)},o(D,I),D.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},D.prototype.convertFrom=function(S){var C=this.imod(S.mul(this.rinv));return C.red=null,C},D.prototype.imul=function(S,C){if(S.isZero()||C.isZero())return S.words[0]=0,S.length=1,S;var R=S.imul(C),F=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=R.isub(F).iushrn(this.shift),U=H;return H.cmp(this.m)>=0?U=H.isub(this.m):H.cmpn(0)<0&&(U=H.iadd(this.m)),U._forceRed(this)},D.prototype.mul=function(S,C){if(S.isZero()||C.isZero())return new n(0)._forceRed(this);var R=S.mul(C),F=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=R.isub(F).iushrn(this.shift),U=H;return H.cmp(this.m)>=0?U=H.isub(this.m):H.cmpn(0)<0&&(U=H.iadd(this.m)),U._forceRed(this)},D.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===_||_,this)},{buffer:2}],34:[function(g,_,t){"use strict";_.exports=function(e){var i,r,o,n=e.length,p=0;for(i=0;i<n;++i)p+=e[i].length;var s=new Array(p),a=0;for(i=0;i<n;++i){var c=e[i],u=c.length;for(r=0;r<u;++r){var h=s[a++]=new Array(u-1),v=0;for(o=0;o<u;++o)o!==r&&(h[v++]=c[o]);if(1&r){var f=h[1];h[1]=h[0],h[0]=f}}}return s}},{}],35:[function(g,_,t){"use strict";_.exports=function(h,v,f){switch(arguments.length){case 1:return c(h);case 2:return"function"==typeof v?s(h,h,v,!0):u(h,v);case 3:return s(h,v,f,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,i=g("typedarray-pool"),r=g("./lib/sweep"),o=g("./lib/intersect");function n(h,v){for(var f=0;f<h;++f)if(!(v[f]<=v[f+h]))return!0;return!1}function p(h,v,f,l){for(var x=0,m=0,w=0,b=h.length;w<b;++w){var k=h[w];if(!n(v,k)){for(var T=0;T<2*v;++T)f[x++]=k[T];l[m++]=w}}return m}function s(h,v,f,l){var x=h.length,m=v.length;if(!(x<=0||m<=0)){var w=h[0].length>>>1;if(!(w<=0)){var b,k=i.mallocDouble(2*w*x),T=i.mallocInt32(x);if((x=p(h,w,k,T))>0){if(1===w&&l)r.init(x),b=r.sweepComplete(w,f,0,x,k,T,0,x,k,T);else{var L=i.mallocDouble(2*w*m),A=i.mallocInt32(m);(m=p(v,w,L,A))>0&&(r.init(x+m),b=1===w?r.sweepBipartite(w,f,0,x,k,T,0,m,L,A):o(w,f,l,x,k,T,m,L,A),i.free(L),i.free(A))}i.free(k),i.free(T)}return b}}}function a(h,v){e.push([h,v])}function c(h){return e=[],s(h,h,a,!0),e}function u(h,v){return e=[],s(h,v,a,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(g,_,t){"use strict";function e(i){return i?function(r,o,n,p,s,a,c,u,h,v,f){return s-p>h-u?function(l,x,m,w,b,k,T,L,A,I,D){for(var S=2*l,C=w,R=S*w;C<b;++C,R+=S){var F=k[x+R],H=k[x+R+l],U=T[C];e:for(var X=L,Z=S*L;X<A;++X,Z+=S){var te=D[X];if(!(I[x+Z+l]<F||H<I[x+Z])){for(var z=x+1;z<l;++z)if(k[z+l+R]<I[z+Z]||I[z+l+Z]<k[z+R])continue e;var J=m(U,te);if(void 0!==J)return J}}}}(r,o,n,p,s,a,c,u,h,v,f):function(l,x,m,w,b,k,T,L,A,I,D){for(var S=2*l,C=L,R=S*L;C<A;++C,R+=S){var F=I[x+R],H=I[x+R+l],U=D[C];e:for(var X=w,Z=S*w;X<b;++X,Z+=S){var te=T[X];if(!(H<k[x+Z]||k[x+Z+l]<F)){for(var z=x+1;z<l;++z)if(k[z+l+Z]<I[z+R]||I[z+l+R]<k[z+Z])continue e;var J=m(te,U);if(void 0!==J)return J}}}}(r,o,n,p,s,a,c,u,h,v,f)}:function(r,o,n,p,s,a,c,u,h,v,f,l){return a-s>v-h?p?function(x,m,w,b,k,T,L,A,I,D,S){for(var C=2*x,R=b,F=C*b;R<k;++R,F+=C){var H=T[m+F],U=T[m+F+x],X=L[R];e:for(var Z=A,Y=C*A;Z<I;++Z,Y+=C){var W=D[m+Y],te=S[Z];if(!(W<=H||U<W)){for(var z=m+1;z<x;++z)if(T[z+x+F]<D[z+Y]||D[z+x+Y]<T[z+F])continue e;var J=w(te,X);if(void 0!==J)return J}}}}(r,o,n,s,a,c,u,h,v,f,l):function(x,m,w,b,k,T,L,A,I,D,S){for(var C=2*x,R=b,F=C*b;R<k;++R,F+=C){var H=T[m+F],U=T[m+F+x],X=L[R];e:for(var Z=A,Y=C*A;Z<I;++Z,Y+=C){var W=D[m+Y],te=S[Z];if(!(W<H||U<W)){for(var z=m+1;z<x;++z)if(T[z+x+F]<D[z+Y]||D[z+x+Y]<T[z+F])continue e;var J=w(X,te);if(void 0!==J)return J}}}}(r,o,n,s,a,c,u,h,v,f,l):p?function(x,m,w,b,k,T,L,A,I,D,S){for(var C=2*x,R=A,F=C*A;R<I;++R,F+=C){var H=D[m+F],U=S[R];e:for(var X=b,Z=C*b;X<k;++X,Z+=C){var te=L[X];if(!(H<=T[m+Z]||T[m+Z+x]<H)){for(var z=m+1;z<x;++z)if(T[z+x+Z]<D[z+F]||D[z+x+F]<T[z+Z])continue e;var J=w(U,te);if(void 0!==J)return J}}}}(r,o,n,s,a,c,u,h,v,f,l):function(x,m,w,b,k,T,L,A,I,D,S){for(var C=2*x,R=A,F=C*A;R<I;++R,F+=C){var H=D[m+F],U=S[R];e:for(var X=b,Z=C*b;X<k;++X,Z+=C){var te=L[X];if(!(H<T[m+Z]||T[m+Z+x]<H)){for(var z=m+1;z<x;++z)if(T[z+x+Z]<D[z+F]||D[z+x+F]<T[z+Z])continue e;var J=w(te,U);if(void 0!==J)return J}}}}(r,o,n,s,a,c,u,h,v,f,l)}}t.partial=e(!1),t.full=e(!0)},{}],37:[function(g,_,t){"use strict";_.exports=function(T,L,A,I,D,S,C,R,F){!function(Me,ke){var Ce=8*i.log2(ke+1)*(Me+1)|0,Pe=i.nextPow2(6*Ce);x.length<Pe&&(e.free(x),x=e.mallocInt32(Pe));var Fe=i.nextPow2(2*Ce);m.length<Fe&&(e.free(m),m=e.mallocDouble(Fe))}(T,I+C);var H,U=0,X=2*T;for(w(U++,0,0,I,0,C,A?16:0,-1/0,1/0),A||w(U++,0,0,C,0,I,1,-1/0,1/0);U>0;){var Z=6*(U-=1),Y=x[Z],W=x[Z+1],te=x[Z+2],z=x[Z+3],N=x[Z+4],V=x[Z+5],Q=2*U,j=m[Q],J=m[Q+1],K=1&V,re=!!(16&V),ie=D,ce=S,se=R,de=F;if(K&&(ie=R,ce=F,se=D,de=S),!(2&V&&(te=h(T,Y,W,te,ie,ce,J),W>=te)||4&V&&(W=v(T,Y,W,te,ie,ce,j))>=te)){var ue=te-W,ge=N-z;if(re){if(T*ue*(ue+ge)<1<<22){if(void 0!==(H=p.scanComplete(T,Y,L,W,te,ie,ce,z,N,se,de)))return H;continue}}else{if(T*Math.min(ue,ge)<128){if(void 0!==(H=o(T,Y,L,K,W,te,ie,ce,z,N,se,de)))return H;continue}if(T*ue*ge<1<<22){if(void 0!==(H=p.scanBipartite(T,Y,L,K,W,te,ie,ce,z,N,se,de)))return H;continue}}var be=c(T,Y,W,te,ie,ce,j,J);if(W<be)if(T*(be-W)<128){if(void 0!==(H=n(T,Y+1,L,W,be,ie,ce,z,N,se,de)))return H}else if(Y===T-2){if(void 0!==(H=K?p.sweepBipartite(T,L,z,N,se,de,W,be,ie,ce):p.sweepBipartite(T,L,W,be,ie,ce,z,N,se,de)))return H}else w(U++,Y+1,W,be,z,N,K,-1/0,1/0),w(U++,Y+1,z,N,W,be,1^K,-1/0,1/0);if(be<te){var Te=s(T,Y,z,N,se,de),we=se[X*Te+Y],Le=u(T,Y,Te,N,se,de,we);if(Le<N&&w(U++,Y,be,te,Le,N,(4|K)+(re?16:0),we,J),z<Te&&w(U++,Y,be,te,z,Te,(2|K)+(re?16:0),j,we),Te+1===Le){if(void 0!==(H=re?k(T,Y,L,be,te,ie,ce,Te,se,de[Te]):b(T,Y,L,K,be,te,ie,ce,Te,se,de[Te])))return H}else if(Te<Le){var fe;if(re){if(be<(fe=f(T,Y,be,te,ie,ce,we))){var ve=u(T,Y,be,fe,ie,ce,we);if(Y===T-2){if(be<ve&&void 0!==(H=p.sweepComplete(T,L,be,ve,ie,ce,Te,Le,se,de))||ve<fe&&void 0!==(H=p.sweepBipartite(T,L,ve,fe,ie,ce,Te,Le,se,de)))return H}else be<ve&&w(U++,Y+1,be,ve,Te,Le,16,-1/0,1/0),ve<fe&&(w(U++,Y+1,ve,fe,Te,Le,0,-1/0,1/0),w(U++,Y+1,Te,Le,ve,fe,1,-1/0,1/0))}}else be<(fe=K?l(T,Y,be,te,ie,ce,we):f(T,Y,be,te,ie,ce,we))&&(Y===T-2?H=K?p.sweepBipartite(T,L,Te,Le,se,de,be,fe,ie,ce):p.sweepBipartite(T,L,be,fe,ie,ce,Te,Le,se,de):(w(U++,Y+1,be,fe,Te,Le,K,-1/0,1/0),w(U++,Y+1,Te,Le,be,fe,1^K,-1/0,1/0)))}}}}};var e=g("typedarray-pool"),i=g("bit-twiddle"),r=g("./brute"),o=r.partial,n=r.full,p=g("./sweep"),s=g("./median"),a=g("./partition"),c=a("!(lo>=p0)&&!(p1>=hi)"),u=a("lo===p0"),h=a("lo<p0"),v=a("hi<=p0"),f=a("lo<=p0&&p0<=hi"),l=a("lo<p0&&p0<=hi"),x=e.mallocInt32(1024),m=e.mallocDouble(1024);function w(T,L,A,I,D,S,C,R,F){var H=6*T;x[H]=L,x[H+1]=A,x[H+2]=I,x[H+3]=D,x[H+4]=S,x[H+5]=C;var U=2*T;m[U]=R,m[U+1]=F}function b(T,L,A,I,D,S,C,R,F,H,U){var X=2*T,Z=F*X,Y=H[Z+L];e:for(var W=D,te=D*X;W<S;++W,te+=X){var z=C[te+L],N=C[te+L+T];if(!(Y<z||N<Y||I&&Y===z)){for(var V,Q=R[W],j=L+1;j<T;++j)if(z=C[te+j],(N=C[te+j+T])<H[Z+j]||H[Z+j+T]<z)continue e;if(void 0!==(V=I?A(U,Q):A(Q,U)))return V}}}function k(T,L,A,I,D,S,C,R,F,H){var U=2*T,X=R*U,Z=F[X+L];e:for(var Y=I,W=I*U;Y<D;++Y,W+=U){var te=C[Y];if(te!==H){var z=S[W+L],N=S[W+L+T];if(!(Z<z||N<Z)){for(var V=L+1;V<T;++V)if(z=S[W+V],(N=S[W+V+T])<F[X+V]||F[X+V+T]<z)continue e;var J=A(te,H);if(void 0!==J)return J}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(g,_,t){"use strict";_.exports=function(r,o,n,p,s,a){if(p<=n+1)return n;for(var c=n,u=p,h=p+n>>>1,v=2*r,f=h,l=s[v*h+o];c<u;){if(u-c<8){i(r,o,c,u,s,a),l=s[v*h+o];break}var x=u-c,m=Math.random()*x+c|0,w=s[v*m+o],b=Math.random()*x+c|0,k=s[v*b+o],T=Math.random()*x+c|0,L=s[v*T+o];w<=k?L>=k?(f=b,l=k):w>=L?(f=m,l=w):(f=T,l=L):k>=L?(f=b,l=k):L>=w?(f=m,l=w):(f=T,l=L);for(var A=v*(u-1),I=v*f,D=0;D<v;++D,++A,++I){var S=s[A];s[A]=s[I],s[I]=S}var C=a[u-1];for(a[u-1]=a[f],a[f]=C,A=v*(u-1),I=v*(f=e(r,o,c,u-1,s,a,l)),D=0;D<v;++D,++A,++I)S=s[A],s[A]=s[I],s[I]=S;if(C=a[u-1],a[u-1]=a[f],a[f]=C,h<f){for(u=f-1;c<u&&s[v*(u-1)+o]===l;)u-=1;u+=1}else{if(!(f<h))break;for(c=f+1;c<u&&s[v*c+o]===l;)c+=1}}return e(r,o,n,h,s,a,s[v*h+o])};var e=g("./partition")("lo<p0");function i(r,o,n,p,s,a){for(var c=2*r,u=c*(n+1)+o,h=n+1;h<p;++h,u+=c)for(var v=s[u],f=h,l=c*(h-1);f>n&&s[l+o]>v;--f,l-=c){for(var x=l,m=l+c,w=0;w<c;++w,++x,++m){var b=s[x];s[x]=s[m],s[m]=b}var k=a[f];a[f]=a[f-1],a[f-1]=k}}},{"./partition":39}],39:[function(g,_,t){"use strict";_.exports=function(i){return e[i]};var e={"lo===p0":function(i,r,o,n,p,s,a){for(var c=2*i,u=c*o,h=u,v=o,f=r,l=o;n>l;++l,u+=c)if(p[u+f]===a)if(v===l)v+=1,h+=c;else{for(var x=0;c>x;++x){var m=p[u+x];p[u+x]=p[h],p[h++]=m}var w=s[l];s[l]=s[v],s[v++]=w}return v},"lo<p0":function(i,r,o,n,p,s,a){for(var c=2*i,u=c*o,h=u,v=o,f=r,l=o;n>l;++l,u+=c)if(p[u+f]<a)if(v===l)v+=1,h+=c;else{for(var x=0;c>x;++x){var m=p[u+x];p[u+x]=p[h],p[h++]=m}var w=s[l];s[l]=s[v],s[v++]=w}return v},"lo<=p0":function(i,r,o,n,p,s,a){for(var c=2*i,u=c*o,h=u,v=o,f=i+r,l=o;n>l;++l,u+=c)if(p[u+f]<=a)if(v===l)v+=1,h+=c;else{for(var x=0;c>x;++x){var m=p[u+x];p[u+x]=p[h],p[h++]=m}var w=s[l];s[l]=s[v],s[v++]=w}return v},"hi<=p0":function(i,r,o,n,p,s,a){for(var c=2*i,u=c*o,h=u,v=o,f=i+r,l=o;n>l;++l,u+=c)if(p[u+f]<=a)if(v===l)v+=1,h+=c;else{for(var x=0;c>x;++x){var m=p[u+x];p[u+x]=p[h],p[h++]=m}var w=s[l];s[l]=s[v],s[v++]=w}return v},"lo<p0&&p0<=hi":function(i,r,o,n,p,s,a){for(var c=2*i,u=c*o,h=u,v=o,f=r,l=i+r,x=o;n>x;++x,u+=c)if(p[u+f]<a&&a<=p[u+l])if(v===x)v+=1,h+=c;else{for(var b=0;c>b;++b){var k=p[u+b];p[u+b]=p[h],p[h++]=k}var T=s[x];s[x]=s[v],s[v++]=T}return v},"lo<=p0&&p0<=hi":function(i,r,o,n,p,s,a){for(var c=2*i,u=c*o,h=u,v=o,f=r,l=i+r,x=o;n>x;++x,u+=c)if(p[u+f]<=a&&a<=p[u+l])if(v===x)v+=1,h+=c;else{for(var b=0;c>b;++b){var k=p[u+b];p[u+b]=p[h],p[h++]=k}var T=s[x];s[x]=s[v],s[v++]=T}return v},"!(lo>=p0)&&!(p1>=hi)":function(i,r,o,n,p,s,a,c){for(var u=2*i,h=u*o,v=h,f=o,l=r,x=i+r,m=o;n>m;++m,h+=u)if(!(p[h+l]>=a||c>=p[h+x]))if(f===m)f+=1,v+=u;else{for(var k=0;u>k;++k){var T=p[h+k];p[h+k]=p[v],p[v++]=T}var L=s[m];s[m]=s[f],s[f++]=L}return f}}},{}],40:[function(g,_,t){"use strict";function e(a,c,u){for(var h=2*(a+1),v=a+1;v<=c;++v){for(var f=u[h++],l=u[h++],x=v,m=h-2;x-- >a;){var w=u[m-2],b=u[m-1];if(w<f||w===f&&b<l)break;u[m]=w,u[m+1]=b,m-=2}u[m]=f,u[m+1]=l}}function i(a,c,u){var h=u[a*=2],v=u[a+1];u[a]=u[c*=2],u[a+1]=u[c+1],u[c]=h,u[c+1]=v}function r(a,c,u){u[a*=2]=u[c*=2],u[a+1]=u[c+1]}function o(a,c,u,h){u*=2;var v=h[a*=2],f=h[a+1];h[a]=h[c*=2],h[a+1]=h[c+1],h[c]=h[u],h[c+1]=h[u+1],h[u]=v,h[u+1]=f}function n(a,c,u,h,v){v[a*=2]=v[c*=2],v[c]=u,v[a+1]=v[c+1],v[c+1]=h}function p(a,c,u){var h=u[a*=2],v=u[c*=2];return!(h<v)&&(h!==v||u[a+1]>u[c+1])}function s(a,c,u,h){var v=h[a*=2];return v<c||v===c&&h[a+1]<u}_.exports=function(a,c){c<=128?e(0,c-1,a):function u(h,v,f){var l=(v-h+1)/6|0,x=h+l,m=v-l,w=h+v>>1,b=w-l,k=w+l,T=x,L=b,A=w,I=k,D=m,S=h+1,C=v-1,R=0;p(T,L,f)&&(R=T,T=L,L=R),p(I,D,f)&&(R=I,I=D,D=R),p(T,A,f)&&(R=T,T=A,A=R),p(L,A,f)&&(R=L,L=A,A=R),p(T,I,f)&&(R=T,T=I,I=R),p(A,I,f)&&(R=A,A=I,I=R),p(L,D,f)&&(R=L,L=D,D=R),p(L,A,f)&&(R=L,L=A,A=R),p(I,D,f)&&(R=I,I=D,D=R);for(var F=f[2*L],H=f[2*L+1],U=f[2*I],X=f[2*I+1],Z=2*T,Y=2*A,W=2*D,te=2*x,z=2*w,N=2*m,V=0;V<2;++V){var j=f[Y+V],J=f[W+V];f[te+V]=f[Z+V],f[z+V]=j,f[N+V]=J}r(b,h,f),r(k,v,f);for(var K=S;K<=C;++K)if(s(K,F,H,f))K!==S&&i(K,S,f),++S;else if(!s(K,U,X,f))for(;;){if(s(C,U,X,f)){s(C,F,H,f)?(o(K,S,C,f),++S,--C):(i(K,C,f),--C);break}if(--C<K)break}n(h,S-1,F,H,f),n(v,C+1,U,X,f),S-2-h<=32?e(h,S-2,f):u(h,S-2,f),v-(C+2)<=32?e(C+2,v,f):u(C+2,v,f),C-S<=32?e(S,C,f):u(S,C,f)}(0,c-1,a)}},{}],41:[function(g,_,t){"use strict";_.exports={init:function(f){var l=i.nextPow2(f);o.length<l&&(e.free(o),o=e.mallocInt32(l)),n.length<l&&(e.free(n),n=e.mallocInt32(l)),p.length<l&&(e.free(p),p=e.mallocInt32(l)),s.length<l&&(e.free(s),s=e.mallocInt32(l)),a.length<l&&(e.free(a),a=e.mallocInt32(l)),c.length<l&&(e.free(c),c=e.mallocInt32(l));var x=8*l;u.length<x&&(e.free(u),u=e.mallocDouble(x))},sweepBipartite:function(f,l,x,m,w,b,k,T,L,A){for(var I=0,D=2*f,S=f-1,C=D-1,R=x;R<m;++R){var F=b[R],H=D*R;u[I++]=w[H+S],u[I++]=-(F+1),u[I++]=w[H+C],u[I++]=F}for(R=k;R<T;++R){F=A[R]+(1<<28);var U=D*R;u[I++]=L[U+S],u[I++]=-F,u[I++]=L[U+C],u[I++]=F}var X=I>>>1;r(u,X);var Z=0,Y=0;for(R=0;R<X;++R){var W=0|u[2*R+1];if(W>=1<<28)h(p,s,Y--,W=W-(1<<28)|0);else if(W>=0)h(o,n,Z--,W);else if(W<=-(1<<28)){W=-W-(1<<28)|0;for(var te=0;te<Z;++te)if(void 0!==(z=l(o[te],W)))return z;v(p,s,Y++,W)}else{for(W=-W-1|0,te=0;te<Y;++te){var z;if(void 0!==(z=l(W,p[te])))return z}v(o,n,Z++,W)}}},sweepComplete:function(f,l,x,m,w,b,k,T,L,A){for(var I=0,D=2*f,S=f-1,C=D-1,R=x;R<m;++R){var F=b[R]+1<<1,H=D*R;u[I++]=w[H+S],u[I++]=-F,u[I++]=w[H+C],u[I++]=F}for(R=k;R<T;++R){F=A[R]+1<<1;var U=D*R;u[I++]=L[U+S],u[I++]=1|-F,u[I++]=L[U+C],u[I++]=1|F}var X=I>>>1;r(u,X);var Z=0,Y=0,W=0;for(R=0;R<X;++R){var te=0|u[2*R+1],z=1&te;if(R<X-1&&te>>1==u[2*R+3]>>1&&(z=2,R+=1),te<0){for(var N=-(te>>1)-1,V=0;V<W;++V)if(void 0!==(Q=l(a[V],N)))return Q;if(0!==z)for(V=0;V<Z;++V)if(void 0!==(Q=l(o[V],N)))return Q;if(1!==z)for(V=0;V<Y;++V){var Q;if(void 0!==(Q=l(p[V],N)))return Q}0===z?v(o,n,Z++,N):1===z?v(p,s,Y++,N):2===z&&v(a,c,W++,N)}else N=(te>>1)-1,0===z?h(o,n,Z--,N):1===z?h(p,s,Y--,N):2===z&&h(a,c,W--,N)}},scanBipartite:function(f,l,x,m,w,b,k,T,L,A,I,D){var S=0,C=2*f,R=l,F=l+f,H=1,U=1;m?U=1<<28:H=1<<28;for(var X=w;X<b;++X){var Z=X+H,Y=C*X;u[S++]=k[Y+R],u[S++]=-Z,u[S++]=k[Y+F],u[S++]=Z}for(X=L;X<A;++X)Z=X+U,u[S++]=I[C*X+R],u[S++]=-Z;var te=S>>>1;r(u,te);var z=0;for(X=0;X<te;++X){var N=0|u[2*X+1];if(N<0){var V=!1;if((Z=-N)>=1<<28?(V=!m,Z-=1<<28):(V=!!m,Z-=1),V)v(o,n,z++,Z);else{var Q=D[Z],j=C*Z,J=I[j+l+1],K=I[j+l+1+f];e:for(var re=0;re<z;++re){var ie=o[re],ce=C*ie;if(!(K<k[ce+l+1]||k[ce+l+1+f]<J)){for(var se=l+2;se<f;++se)if(I[j+se+f]<k[ce+se]||k[ce+se+f]<I[j+se])continue e;var de,ue=T[ie];if(void 0!==(de=m?x(Q,ue):x(ue,Q)))return de}}}}else h(o,n,z--,N-H)}},scanComplete:function(f,l,x,m,w,b,k,T,L,A,I){for(var D=0,S=2*f,C=l,R=l+f,F=m;F<w;++F){var H=F+(1<<28),U=S*F;u[D++]=b[U+C],u[D++]=-H,u[D++]=b[U+R],u[D++]=H}for(F=T;F<L;++F)H=F+1,u[D++]=A[S*F+C],u[D++]=-H;var Z=D>>>1;r(u,Z);var Y=0;for(F=0;F<Z;++F){var W=0|u[2*F+1];if(W<0)if((H=-W)>=1<<28)o[Y++]=H-(1<<28);else{var te=I[H-=1],z=S*H,N=A[z+l+1],V=A[z+l+1+f];e:for(var Q=0;Q<Y;++Q){var j=o[Q],J=k[j];if(J===te)break;var K=S*j;if(!(V<b[K+l+1]||b[K+l+1+f]<N)){for(var re=l+2;re<f;++re)if(A[z+re+f]<b[K+re]||b[K+re+f]<A[z+re])continue e;var ie=x(J,te);if(void 0!==ie)return ie}}}else{for(H=W-(1<<28),Q=Y-1;Q>=0;--Q)if(o[Q]===H){for(re=Q+1;re<Y;++re)o[re-1]=o[re];break}--Y}}}};var e=g("typedarray-pool"),i=g("bit-twiddle"),r=g("./sort"),o=e.mallocInt32(1024),n=e.mallocInt32(1024),p=e.mallocInt32(1024),s=e.mallocInt32(1024),a=e.mallocInt32(1024),c=e.mallocInt32(1024),u=e.mallocDouble(8192);function h(f,l,x,m){var w=l[m],b=f[x-1];f[w]=b,l[b]=w}function v(f,l,x,m){f[x]=m,l[m]=x}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(g,_,t){"use strict";var e=g("./lib/monotone"),i=g("./lib/triangulation"),r=g("./lib/delaunay"),o=g("./lib/filter");function n(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function p(a,c){return a[0]-c[0]||a[1]-c[1]}function s(a,c,u){return c in a?a[c]:u}_.exports=function(a,c,u){Array.isArray(c)?(u=u||{},c=c||[]):(u=c||{},c=[]);var h=!!s(u,"delaunay",!0),v=!!s(u,"interior",!0),f=!!s(u,"exterior",!0),l=!!s(u,"infinity",!1);if(!v&&!f||0===a.length)return[];var x=e(a,c);if(h||v!==f||l){for(var m=i(a.length,c.map(n).sort(p)),w=0;w<x.length;++w){var b=x[w];m.addTriangle(b[0],b[1],b[2])}return h&&r(a,m),f?v?l?o(m,0,l):m.cells():o(m,1,l):o(m,-1)}return x}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(g,_,t){"use strict";var e=g("robust-in-sphere")[4];function i(r,o,n,p,s,a){var c=o.opposite(p,s);if(!(c<0)){if(s<p){var u=p;p=s,s=u,u=a,a=c,c=u}o.isConstraint(p,s)||e(r[p],r[s],r[a],r[c])<0&&n.push(p,s)}}g("binary-search-bounds"),_.exports=function(r,o){for(var n=[],p=r.length,s=o.stars,a=0;a<p;++a)for(var c=s[a],u=1;u<c.length;u+=2)if(!((l=c[u])<a||o.isConstraint(a,l))){for(var h=c[u-1],v=-1,f=1;f<c.length;f+=2)if(c[f-1]===l){v=c[f];break}v<0||e(r[a],r[l],r[h],r[v])<0&&n.push(a,l)}for(;n.length>0;){for(var l=n.pop(),x=(h=-1,v=-1,c=s[a=n.pop()],1);x<c.length;x+=2){var m=c[x-1],w=c[x];m===l?v=w:w===l&&(h=m)}h<0||v<0||e(r[a],r[l],r[h],r[v])>=0||(o.flip(a,l),i(r,o,n,h,a,v),i(r,o,n,a,v,h),i(r,o,n,v,l,h),i(r,o,n,l,h,v))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(g,_,t){"use strict";var e,i=g("binary-search-bounds");function r(n,p,s,a,c,u,h){this.cells=n,this.neighbor=p,this.flags=a,this.constraint=s,this.active=c,this.next=u,this.boundary=h}function o(n,p){return n[0]-p[0]||n[1]-p[1]||n[2]-p[2]}_.exports=function(n,p,s){var a=function(L,A){for(var I=L.cells(),D=I.length,S=0;S<D;++S){var C=(z=I[S])[0],R=z[1],F=z[2];R<F?R<C&&(z[0]=R,z[1]=F,z[2]=C):F<C&&(z[0]=F,z[1]=C,z[2]=R)}I.sort(o);var H=new Array(D);for(S=0;S<H.length;++S)H[S]=0;var U=[],X=[],Z=new Array(3*D),Y=new Array(3*D),W=null;A&&(W=[]);var te=new r(I,Z,Y,H,U,X,W);for(S=0;S<D;++S)for(var z=I[S],N=0;N<3;++N){var V=Z[3*S+N]=te.locate(R=z[(N+1)%3],C=z[N],L.opposite(R,C)),Q=Y[3*S+N]=L.isConstraint(C,R);V<0&&(Q?X.push(S):(U.push(S),H[S]=1),A&&W.push([R,C,-1]))}return te}(n,s);if(0===p)return s?a.cells.concat(a.boundary):a.cells;for(var c=1,u=a.active,h=a.next,v=a.flags,f=a.cells,l=a.constraint,x=a.neighbor;u.length>0||h.length>0;){for(;u.length>0;){var m=u.pop();if(v[m]!==-c){v[m]=c;for(var w=0;w<3;++w){var b=x[3*m+w];b>=0&&0===v[b]&&(l[3*m+w]?h.push(b):(u.push(b),v[b]=c))}}}var k=h;h=u,u=k,h.length=0,c=-c}var T=function(L,A,I){for(var D=0,S=0;S<L.length;++S)A[S]===I&&(L[D++]=L[S]);return L.length=D,L}(f,v,p);return s?T.concat(a.boundary):T},r.prototype.locate=(e=[0,0,0],function(n,p,s){var a=n,c=p,u=s;return p<s?p<n&&(a=p,c=s,u=n):s<n&&(a=s,c=n,u=p),a<0?-1:(e[0]=a,e[1]=c,e[2]=u,i.eq(this.cells,e,o))})},{"binary-search-bounds":31}],45:[function(g,_,t){"use strict";var e=g("binary-search-bounds"),i=g("robust-orientation")[3];function r(h,v,f,l,x){this.a=h,this.b=v,this.idx=f,this.lowerIds=l,this.upperIds=x}function o(h,v,f,l){this.a=h,this.b=v,this.type=f,this.idx=l}function n(h,v){var f=h.a[0]-v.a[0]||h.a[1]-v.a[1]||h.type-v.type;return f||(0!==h.type&&(f=i(h.a,h.b,v.b))?f:h.idx-v.idx)}function p(h,v){return i(h.a,h.b,v)}function s(h,v,f,l,x){for(var m=e.lt(v,l,p),w=e.gt(v,l,p),b=m;b<w;++b){for(var k=v[b],T=k.lowerIds,L=T.length;L>1&&i(f[T[L-2]],f[T[L-1]],l)>0;)h.push([T[L-1],T[L-2],x]),L-=1;T.length=L,T.push(x);var A=k.upperIds;for(L=A.length;L>1&&i(f[A[L-2]],f[A[L-1]],l)<0;)h.push([A[L-2],A[L-1],x]),L-=1;A.length=L,A.push(x)}}function a(h,v){var f;return(f=h.a[0]<v.a[0]?i(h.a,h.b,v.a):i(v.b,v.a,h.a))?f:(f=v.b[0]<h.b[0]?i(h.a,h.b,v.b):i(v.b,v.a,h.b))||h.idx-v.idx}function c(h,v,f){var l=e.le(h,f,a),x=h[l],m=x.upperIds,w=m[m.length-1];x.upperIds=[w],h.splice(l+1,0,new r(f.a,f.b,f.idx,[w],m))}function u(h,v,f){var l=f.a;f.a=f.b,f.b=l;var x=e.eq(h,f,a);h[x-1].upperIds=h[x].upperIds,h.splice(x,1)}_.exports=function(h,v){for(var f=h.length,l=v.length,x=[],m=0;m<f;++m)x.push(new o(h[m],null,0,m));for(m=0;m<l;++m){var w=v[m],b=h[w[0]],k=h[w[1]];b[0]<k[0]?x.push(new o(b,k,2,m),new o(k,b,1,m)):b[0]>k[0]&&x.push(new o(k,b,2,m),new o(b,k,1,m))}x.sort(n);for(var T=x[0].a[0]-(1+Math.abs(x[0].a[0]))*Math.pow(2,-52),L=[new r([T,1],[T,0],-1,[],[],[],[])],A=[],I=(m=0,x.length);m<I;++m){var D=x[m],S=D.type;0===S?s(A,L,h,D.a,D.idx):2===S?c(L,0,D):u(L,0,D)}return A}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(g,_,t){"use strict";var e=g("binary-search-bounds");function i(n,p){this.stars=n,this.edges=p}_.exports=function(n,p){for(var s=new Array(n),a=0;a<n;++a)s[a]=[];return new i(s,p)};var r=i.prototype;function o(n,p,s){for(var a=1,c=n.length;a<c;a+=2)if(n[a-1]===p&&n[a]===s)return n[a-1]=n[c-2],n[a]=n[c-1],void(n.length=c-2)}r.isConstraint=function(){var n=[0,0];function p(s,a){return s[0]-a[0]||s[1]-a[1]}return function(s,a){return n[0]=Math.min(s,a),n[1]=Math.max(s,a),e.eq(this.edges,n,p)>=0}}(),r.removeTriangle=function(n,p,s){var a=this.stars;o(a[n],p,s),o(a[p],s,n),o(a[s],n,p)},r.addTriangle=function(n,p,s){var a=this.stars;a[n].push(p,s),a[p].push(s,n),a[s].push(n,p)},r.opposite=function(n,p){for(var s=this.stars[p],a=1,c=s.length;a<c;a+=2)if(s[a]===n)return s[a-1];return-1},r.flip=function(n,p){var s=this.opposite(n,p),a=this.opposite(p,n);this.removeTriangle(n,p,s),this.removeTriangle(p,n,a),this.addTriangle(n,a,s),this.addTriangle(p,s,a)},r.edges=function(){for(var n=this.stars,p=[],s=0,a=n.length;s<a;++s)for(var c=n[s],u=0,h=c.length;u<h;u+=2)p.push([c[u],c[u+1]]);return p},r.cells=function(){for(var n=this.stars,p=[],s=0,a=n.length;s<a;++s)for(var c=n[s],u=0,h=c.length;u<h;u+=2){var v=c[u],f=c[u+1];s<Math.min(v,f)&&p.push([s,v,f])}return p}},{"binary-search-bounds":31}],47:[function(g,_,t){"use strict";_.exports=function(e){for(var i=1,r=1;r<e.length;++r)for(var o=0;o<r;++o)if(e[r]<e[o])i=-i;else if(e[o]===e[r])return 0;return i}},{}],48:[function(g,_,t){"use strict";var e=g("dup"),i=g("robust-linear-solve");function r(p,s){for(var a=0,c=p.length,u=0;u<c;++u)a+=p[u]*s[u];return a}function o(p){var s=p.length;if(0===s)return[];var a=e([p.length+1,p.length+1],1),c=e([p.length+1],1);a[s][s]=0;for(var u=0;u<s;++u){for(var h=0;h<=u;++h)a[h][u]=a[u][h]=2*r(p[u],p[h]);c[u]=r(p[u],p[u])}var v=i(a,c),f=0,l=v[s+1];for(u=0;u<l.length;++u)f+=l[u];var x=new Array(s);for(u=0;u<s;++u){l=v[u];var m=0;for(h=0;h<l.length;++h)m+=l[h];x[u]=m/f}return x}function n(p){if(0===p.length)return[];for(var s=p[0].length,a=e([s]),c=o(p),u=0;u<p.length;++u)for(var h=0;h<s;++h)a[h]+=p[u][h]*c[u];return a}n.barycenetric=o,_.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(g,_,t){_.exports=function(i){for(var r=e(i),o=0,n=0;n<i.length;++n)for(var p=i[n],s=0;s<r.length;++s)o+=Math.pow(p[s]-r[s],2);return Math.sqrt(o/i.length)};var e=g("circumcenter")},{circumcenter:48}],50:[function(g,_,t){"use strict";_.exports=function(w,b,k){var T,S,R,F;if(k){T=b;for(var L=new Array(b.length),A=0;A<b.length;++A){var I=b[A];L[A]=[I[0],I[1],k[A]]}b=L}for(var D=(R=!!k,void 0,x(b,F=v(S=w,[],h(S)),R),!!F);m(w,b,!!k);)D=!0;if(k&&D)for(T.length=0,k.length=0,A=0;A<b.length;++A)T.push([(I=b[A])[0],I[1]]),k.push(I[2]);return D};var e=g("union-find"),i=g("box-intersect"),r=g("robust-segment-intersect"),o=g("big-rat"),n=g("big-rat/cmp"),p=g("big-rat/to-float"),s=g("rat-vec"),a=g("nextafter"),c=g("./lib/rat-seg-intersect");function u(w){var b=p(w);return[a(b,-1/0),a(b,1/0)]}function h(w){for(var b=new Array(w.length),k=0;k<w.length;++k){var T=w[k];b[k]=[a(T[0],-1/0),a(T[1],-1/0),a(T[0],1/0),a(T[1],1/0)]}return b}function v(w,b,k){for(var T=b.length,L=new e(T),A=[],I=0;I<b.length;++I){var D=b[I],S=u(D[0]),C=u(D[1]);A.push([a(S[0],-1/0),a(C[0],-1/0),a(S[1],1/0),a(C[1],1/0)])}i(A,function(X,Z){L.link(X,Z)});var R=!0,F=new Array(T);for(I=0;I<T;++I)(U=L.find(I))!==I&&(R=!1,w[U]=[Math.min(w[I][0],w[U][0]),Math.min(w[I][1],w[U][1])]);if(R)return null;var H=0;for(I=0;I<T;++I){var U;(U=L.find(I))===I?(F[I]=H,w[H++]=w[I]):F[I]=-1}for(w.length=H,I=0;I<T;++I)F[I]<0&&(F[I]=F[L.find(I)]);return F}function f(w,b){return w[0]-b[0]||w[1]-b[1]}function l(w,b){return w[0]-b[0]||w[1]-b[1]||(w[2]<b[2]?-1:w[2]>b[2]?1:0)}function x(w,b,k){if(0!==w.length){if(b)for(var T=0;T<w.length;++T){var L=b[(I=w[T])[0]],A=b[I[1]];I[0]=Math.min(L,A),I[1]=Math.max(L,A)}else for(T=0;T<w.length;++T){var I;L=(I=w[T])[0],A=I[1],I[0]=Math.min(L,A),I[1]=Math.max(L,A)}w.sort(k?l:f);var D=1;for(T=1;T<w.length;++T){var S=w[T-1],C=w[T];(C[0]!==S[0]||C[1]!==S[1]||k&&C[2]!==S[2])&&(w[D++]=C)}w.length=D}}function m(w,b,k){var S,C,F,T=function(S,C){for(var R=new Array(C.length),F=0;F<C.length;++F){var H=C[F],U=S[H[0]],X=S[H[1]];R[F]=[a(Math.min(U[0],X[0]),-1/0),a(Math.min(U[1],X[1]),-1/0),a(Math.max(U[0],X[0]),1/0),a(Math.max(U[1],X[1]),1/0)]}return R}(w,b),L=(S=w,C=b,F=[],i(T,function(H,U){var X=C[H],Z=C[U];X[0]!==Z[0]&&X[0]!==Z[1]&&X[1]!==Z[0]&&X[1]!==Z[1]&&r(S[X[0]],S[X[1]],S[Z[0]],S[Z[1]])&&F.push([H,U])}),F),I=function(S,C,R,F){var H=[];return i(R,F,function(U,X){var Z=C[U];if(Z[0]!==X&&Z[1]!==X){var Y=S[X];r(S[Z[0]],S[Z[1]],Y,Y)&&H.push([U,X])}}),H}(w,b,T,h(w)),D=v(w,function(S,C,R,F,H){var U,X,Z=S.map(function(ge){return[o(ge[0]),o(ge[1])]});for(U=0;U<R.length;++U){var Y=R[U],W=Y[1],te=C[X=Y[0]],z=C[W],N=c(s(S[te[0]]),s(S[te[1]]),s(S[z[0]]),s(S[z[1]]));if(N){var V=S.length;S.push([p(N[0]),p(N[1])]),Z.push(N),F.push([X,V],[W,V])}}for(F.sort(function(ge,be){if(ge[0]!==be[0])return ge[0]-be[0];var Te=Z[ge[1]],we=Z[be[1]];return n(Te[0],we[0])||n(Te[1],we[1])}),U=F.length-1;U>=0;--U){var Q=C[X=(de=F[U])[0]],j=Q[0],J=Q[1],K=S[j],re=S[J];if((K[0]-re[0]||K[1]-re[1])<0){var ie=j;j=J,J=ie}Q[0]=j;var ce,se=Q[1]=de[1];for(H&&(ce=Q[2]);U>0&&F[U-1][0]===X;){var de,ue=(de=F[--U])[1];C.push(H?[se,ue,ce]:[se,ue]),se=ue}C.push(H?[se,J,ce]:[se,J])}return Z}(w,b,L,I,k));return x(b,D,k),!!D||L.length>0||I.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(g,_,t){"use strict";_.exports=function(c,u,h,v){var f=n(u,c),l=n(v,h),x=a(f,l);if(0===o(x))return null;var w=a(l,n(c,h)),b=i(w,x),k=s(f,b);return p(c,k)};var e=g("big-rat/mul"),i=g("big-rat/div"),r=g("big-rat/sub"),o=g("big-rat/sign"),n=g("rat-vec/sub"),p=g("rat-vec/add"),s=g("rat-vec/muls");function a(c,u){return r(e(c[0],u[1]),e(c[1],u[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(g,_,t){_.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(g,_,t){"use strict";var e=g("./colorScale"),i=g("lerp");function r(p){return[p[0]/255,p[1]/255,p[2]/255,p[3]]}function o(p){for(var s,a="#",c=0;c<3;++c)a+=("00"+(s=(s=p[c]).toString(16))).substr(s.length);return a}function n(p){return"rgba("+p.join(",")+")"}_.exports=function(p){var s,a,c,u,h,v,f,l,x,m;if(p||(p={}),l=(p.nshades||72)-1,f=p.format||"hex",(v=p.colormap)||(v="jet"),"string"==typeof v){if(v=v.toLowerCase(),!e[v])throw Error(v+" not a supported colorscale");h=e[v]}else{if(!Array.isArray(v))throw Error("unsupported colormap option",v);h=v.slice()}if(h.length>l+1)throw new Error(v+" map requires nshades to be at least size "+h.length);x=Array.isArray(p.alpha)?2!==p.alpha.length?[1,1]:p.alpha.slice():"number"==typeof p.alpha?[p.alpha,p.alpha]:[1,1],s=h.map(function(L){return Math.round(L.index*l)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var w=h.map(function(L,A){var I=h[A].index,D=h[A].rgb.slice();return 4===D.length&&D[3]>=0&&D[3]<=1||(D[3]=x[0]+(x[1]-x[0])*I),D}),b=[];for(m=0;m<s.length-1;++m){u=s[m+1]-s[m],a=w[m],c=w[m+1];for(var k=0;k<u;k++){var T=k/u;b.push([Math.round(i(a[0],c[0],T)),Math.round(i(a[1],c[1],T)),Math.round(i(a[2],c[2],T)),i(a[3],c[3],T)])}}return b.push(h[h.length-1].rgb.concat(x[1])),"hex"===f?b=b.map(o):"rgbaString"===f?b=b.map(n):"float"===f&&(b=b.map(r)),b}},{"./colorScale":52,lerp:240}],54:[function(g,_,t){"use strict";_.exports=function(s,a,c,u){var h=e(a,c,u);if(0===h){var v=i(e(s,a,c)),f=i(e(s,a,u));if(v===f){if(0===v){var l=p(s,a,c);return l===p(s,a,u)?0:l?1:-1}return 0}return 0===f?v>0||p(s,a,u)?-1:1:0===v?f>0||p(s,a,c)?1:-1:i(f-v)}var m=e(s,a,c);return m>0?h>0&&e(s,a,u)>0?1:-1:m<0?h>0||e(s,a,u)>0?1:-1:e(s,a,u)>0||p(s,a,c)?1:-1};var e=g("robust-orientation"),i=g("signum"),r=g("two-sum"),o=g("robust-product"),n=g("robust-sum");function p(s,a,c){var u=r(s[0],-a[0]),h=r(s[1],-a[1]),v=r(c[0],-a[0]),f=r(c[1],-a[1]),l=n(o(u,v),o(h,f));return l[l.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(g,_,t){"use strict";_.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(g,_,t){_.exports=function(r,o){var n=r.length,p=r.length-o.length;if(p)return p;switch(n){case 0:return 0;case 1:return r[0]-o[0];case 2:return r[0]+r[1]-o[0]-o[1]||e(r[0],r[1])-e(o[0],o[1]);case 3:var s=r[0]+r[1],a=o[0]+o[1];if(p=s+r[2]-(a+o[2]))return p;var c=e(r[0],r[1]),u=e(o[0],o[1]);return e(c,r[2])-e(u,o[2])||e(c+r[2],s)-e(u+o[2],a);case 4:var h=r[0],v=r[1],f=r[2],l=r[3],x=o[0],m=o[1],w=o[2],b=o[3];return h+v+f+l-(x+m+w+b)||e(h,v,f,l)-e(x,m,w,b,x)||e(h+v,h+f,h+l,v+f,v+l,f+l)-e(x+m,x+w,x+b,m+w,m+b,w+b)||e(h+v+f,h+v+l,h+f+l,v+f+l)-e(x+m+w,x+m+b,x+w+b,m+w+b);default:for(var k=r.slice().sort(i),T=o.slice().sort(i),L=0;L<n;++L)if(p=k[L]-T[L])return p;return 0}};var e=Math.min;function i(r,o){return r-o}},{}],57:[function(g,_,t){"use strict";var e=g("compare-cell"),i=g("cell-orientation");_.exports=function(r,o){return e(r,o)||i(r)-i(o)}},{"cell-orientation":47,"compare-cell":56}],58:[function(g,_,t){"use strict";var e=g("./lib/ch1d"),i=g("./lib/ch2d"),r=g("./lib/chnd");_.exports=function(o){var n=o.length;if(0===n)return[];if(1===n)return[[0]];var p=o[0].length;return 0===p?[]:1===p?e(o):2===p?i(o):r(o,p)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(g,_,t){"use strict";_.exports=function(e){for(var i=0,r=0,o=1;o<e.length;++o)e[o][0]<e[i][0]&&(i=o),e[o][0]>e[r][0]&&(r=o);return i<r?[[i],[r]]:i>r?[[r],[i]]:[[i]]}},{}],60:[function(g,_,t){"use strict";_.exports=function(i){var r=e(i),o=r.length;if(o<=2)return[];for(var n=new Array(o),p=r[o-1],s=0;s<o;++s){var a=r[s];n[s]=[p,a],p=a}return n};var e=g("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(g,_,t){"use strict";_.exports=function(r,o){try{return e(r,!0)}catch(s){var n=i(r);if(n.length<=o)return[];var p=function(a,c){for(var u=a.length,h=new Array(u),v=0;v<c.length;++v)h[v]=a[c[v]];var f=c.length;for(v=0;v<u;++v)c.indexOf(v)<0&&(h[f++]=a[v]);return h}(r,n);return function(a,c){for(var u=a.length,h=c.length,v=0;v<u;++v)for(var f=a[v],l=0;l<f.length;++l){var x=f[l];if(x<h)f[l]=c[x];else{x-=h;for(var m=0;m<h;++m)x>=c[m]&&(x+=1);f[l]=x}}return a}(e(p,!0),n)}};var e=g("incremental-convex-hull"),i=g("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(g,_,t){"use strict";_.exports=function(e,i,r,o,n,p){var s=n-1,a=n*n,c=s*s,u=(1+2*n)*c,h=n*c,v=a*(3-2*n),f=a*s;if(e.length){p||(p=new Array(e.length));for(var l=e.length-1;l>=0;--l)p[l]=u*e[l]+h*i[l]+v*r[l]+f*o[l];return p}return u*e+h*i+v*r+f*o},_.exports.derivative=function(e,i,r,o,n,p){var s=6*n*n-6*n,a=3*n*n-4*n+1,c=-6*n*n+6*n,u=3*n*n-2*n;if(e.length){p||(p=new Array(e.length));for(var h=e.length-1;h>=0;--h)p[h]=s*e[h]+a*i[h]+c*r[h]+u*o[h];return p}return s*e+a*i+c*r[h]+u*o}},{}],63:[function(g,_,t){"use strict";var e=g("incremental-convex-hull"),i=g("uniq");function r(n,p){this.point=n,this.index=p}function o(n,p){for(var s=n.point,a=p.point,c=s.length,u=0;u<c;++u){var h=a[u]-s[u];if(h)return h}return 0}_.exports=function(n,p){var s=n.length;if(0===s)return[];var a=n[0].length;if(a<1)return[];if(1===a)return function(I,D,S){if(1===I)return S?[[-1,0]]:[];var C=D.map(function(X,Z){return[X[0],Z]});C.sort(function(X,Z){return X[0]-Z[0]});for(var R=new Array(I-1),F=1;F<I;++F)R[F-1]=[C[F-1][1],C[F][1]];return S&&R.push([-1,R[0][1]],[R[I-1][1],-1]),R}(s,n,p);for(var c=new Array(s),u=1,h=0;h<s;++h){for(var v=n[h],f=new Array(a+1),l=0,x=0;x<a;++x){var m=v[x];f[x]=m,l+=m*m}f[a]=l,c[h]=new r(f,h),u=Math.max(l,u)}i(c,o),s=c.length;var w=new Array(s+a+1),b=new Array(s+a+1),k=(a+1)*(a+1)*u,T=new Array(a+1);for(h=0;h<=a;++h)T[h]=0;for(T[a]=k,w[0]=T.slice(),b[0]=-1,h=0;h<=a;++h)(f=T.slice())[h]=1,w[h+1]=f,b[h+1]=-1;for(h=0;h<s;++h){var L=c[h];w[h+a+1]=L.point,b[h+a+1]=L.index}var A=e(w,!1);if(A=A.filter(p?function(I){for(var D=0,S=0;S<=a;++S){var C=b[I[S]];if(C<0&&++D>=2)return!1;I[S]=C}return!0}:function(I){for(var D=0;D<=a;++D){var S=b[I[D]];if(S<0)return!1;I[D]=S}return!0}),1&a)for(h=0;h<A.length;++h)f=(L=A[h])[0],L[0]=L[1],L[1]=f;return A}},{"incremental-convex-hull":233,uniq:310}],64:[function(g,_,t){(function(e){(function(){var i=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),o=new Uint32Array(r.buffer);r[0]=1,i=!0,1072693248===o[1]?(_.exports=function(p){return r[0]=p,[o[0],o[1]]},_.exports.pack=function(p,s){return o[0]=p,o[1]=s,r[0]},_.exports.lo=function(p){return r[0]=p,o[0]},_.exports.hi=function(p){return r[0]=p,o[1]}):1072693248===o[0]?(_.exports=function(p){return r[0]=p,[o[1],o[0]]},_.exports.pack=function(p,s){return o[1]=p,o[0]=s,r[0]},_.exports.lo=function(p){return r[0]=p,o[1]},_.exports.hi=function(p){return r[0]=p,o[0]}):i=!1}if(!i){var n=new e(8);_.exports=function(p){return n.writeDoubleLE(p,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},_.exports.pack=function(p,s){return n.writeUInt32LE(p,0,!0),n.writeUInt32LE(s,4,!0),n.readDoubleLE(0,!0)},_.exports.lo=function(p){return n.writeDoubleLE(p,0,!0),n.readUInt32LE(0,!0)},_.exports.hi=function(p){return n.writeDoubleLE(p,0,!0),n.readUInt32LE(4,!0)}}_.exports.sign=function(p){return _.exports.hi(p)>>>31},_.exports.exponent=function(p){return(_.exports.hi(p)<<1>>>21)-1023},_.exports.fraction=function(p){var s=_.exports.lo(p),a=_.exports.hi(p),c=1048575&a;return 2146435072&a&&(c+=1<<20),[s,c]},_.exports.denormalized=function(p){return!(2146435072&_.exports.hi(p))}}).call(this)}).call(this,g("buffer").Buffer)},{buffer:3}],65:[function(g,_,t){"use strict";_.exports=function(e,i){switch(void 0===i&&(i=0),typeof e){case"number":if(e>0)return function(r,o){var n,p;for(n=new Array(r),p=0;p<r;++p)n[p]=o;return n}(0|e,i);break;case"object":if("number"==typeof e.length)return function r(o,n,p){var s=0|o[p];if(s<=0)return[];var a,c=new Array(s);if(p===o.length-1)for(a=0;a<s;++a)c[a]=n;else for(a=0;a<s;++a)c[a]=r(o,n,p+1);return c}(e,i,0)}return[]}},{}],66:[function(g,_,t){"use strict";_.exports=function(i,r){var o=i.length;if("number"!=typeof r){r=0;for(var n=0;n<o;++n){var p=i[n];r=Math.max(r,p[0],p[1])}r=1+(0|r)}r|=0;var s=new Array(r);for(n=0;n<r;++n)s[n]=[];for(n=0;n<o;++n)s[(p=i[n])[0]].push(p[1]),s[p[1]].push(p[0]);for(var a=0;a<r;++a)e(s[a],function(c,u){return c-u});return s};var e=g("uniq")},{uniq:310}],67:[function(g,_,t){"use strict";_.exports=function(e,i,r){var o=i||0,n=r||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[o*e[12]+e[8],o*e[13]+e[9],o*e[14]+e[10],o*e[15]+e[11]],[n*e[12]-e[8],n*e[13]-e[9],n*e[14]-e[10],n*e[15]-e[11]]]}},{}],68:[function(g,_,t){"use strict";_.exports=function(s,a,c){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof s?new o(u=p(s),u,0):new o(s,p(s.length),0);case 2:if("number"==typeof a){var u=p(s.length);return new o(s,u,+a)}c=0;case 3:if(s.length!==a.length)throw new Error("state and velocity lengths must match");return new o(s,a,c)}};var e=g("cubic-hermite"),i=g("binary-search-bounds");function r(s,a,c){return Math.min(a,Math.max(s,c))}function o(s,a,c){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var u=0;u<this.dimension;++u)this.bounds[0][u]=-1/0,this.bounds[1][u]=1/0;this._state=s.slice().reverse(),this._velocity=a.slice().reverse(),this._time=[c],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var n=o.prototype;function p(s){for(var a=new Array(s),c=0;c<s;++c)a[c]=0;return a}n.flush=function(s){var a=i.gt(this._time,s)-1;a<=0||(this._time.splice(0,a),this._state.splice(0,a*this.dimension),this._velocity.splice(0,a*this.dimension))},n.curve=function(s){var a=this._time,c=a.length,u=i.le(a,s),h=this._scratch[0],v=this._state,f=this._velocity,l=this.dimension,x=this.bounds;if(u<0)for(var m=l-1,w=0;w<l;++w,--m)h[w]=v[m];else if(u>=c-1){m=v.length-1;var b=s-a[c-1];for(w=0;w<l;++w,--m)h[w]=v[m]+b*f[m]}else{m=l*(u+1)-1;var k=a[u],T=a[u+1]-k||1,L=this._scratch[1],A=this._scratch[2],I=this._scratch[3],D=this._scratch[4],S=!0;for(w=0;w<l;++w,--m)L[w]=v[m],I[w]=f[m]*T,A[w]=v[m+l],D[w]=f[m+l]*T,S=S&&L[w]===A[w]&&I[w]===D[w]&&0===I[w];if(S)for(w=0;w<l;++w)h[w]=L[w];else e(L,I,A,D,(s-k)/T,h)}var C=x[0],R=x[1];for(w=0;w<l;++w)h[w]=r(C[w],R[w],h[w]);return h},n.dcurve=function(s){var a=this._time,c=a.length,u=i.le(a,s),h=this._scratch[0],v=this._state,f=this._velocity,l=this.dimension;if(u>=c-1)for(var x=v.length-1,m=0;m<l;++m,--x)h[m]=f[x];else{x=l*(u+1)-1;var w=a[u],b=a[u+1]-w||1,k=this._scratch[1],T=this._scratch[2],L=this._scratch[3],A=this._scratch[4],I=!0;for(m=0;m<l;++m,--x)k[m]=v[x],L[m]=f[x]*b,T[m]=v[x+l],A[m]=f[x+l]*b,I=I&&k[m]===T[m]&&L[m]===A[m]&&0===L[m];if(I)for(m=0;m<l;++m)h[m]=0;else for(e.derivative(k,L,T,A,(s-w)/b,h),m=0;m<l;++m)h[m]/=b}return h},n.lastT=function(){var s=this._time;return s[s.length-1]},n.stable=function(){for(var s=this._velocity,a=s.length,c=this.dimension-1;c>=0;--c)if(s[--a])return!1;return!0},n.jump=function(s){var a=this.lastT(),c=this.dimension;if(!(s<a||arguments.length!==c+1)){var u=this._state,h=this._velocity,v=u.length-this.dimension,f=this.bounds,l=f[0],x=f[1];this._time.push(a,s);for(var m=0;m<2;++m)for(var w=0;w<c;++w)u.push(u[v++]),h.push(0);for(this._time.push(s),w=c;w>0;--w)u.push(r(l[w-1],x[w-1],arguments[w])),h.push(0)}},n.push=function(s){var a=this.lastT(),c=this.dimension;if(!(s<a||arguments.length!==c+1)){var u=this._state,h=this._velocity,v=u.length-this.dimension,f=s-a,l=this.bounds,x=l[0],m=l[1],w=f>1e-6?1/f:0;this._time.push(s);for(var b=c;b>0;--b){var k=r(x[b-1],m[b-1],arguments[b]);u.push(k),h.push((k-u[v++])*w)}}},n.set=function(s){var a=this.dimension;if(!(s<this.lastT()||arguments.length!==a+1)){var c=this._state,u=this._velocity,h=this.bounds,v=h[0],f=h[1];this._time.push(s);for(var l=a;l>0;--l)c.push(r(v[l-1],f[l-1],arguments[l])),u.push(0)}},n.move=function(s){var a=this.lastT(),c=this.dimension;if(!(s<=a||arguments.length!==c+1)){var u=this._state,h=this._velocity,v=u.length-this.dimension,f=this.bounds,l=f[0],x=f[1],m=s-a,w=m>1e-6?1/m:0;this._time.push(s);for(var b=c;b>0;--b){var k=arguments[b];u.push(r(l[b-1],x[b-1],u[v++]+k)),h.push(k*w)}}},n.idle=function(s){var a=this.lastT();if(!(s<a)){var c=this.dimension,u=this._state,h=this._velocity,v=u.length-c,f=this.bounds,l=f[0],x=f[1],m=s-a;this._time.push(s);for(var w=c-1;w>=0;--w)u.push(r(l[w],x[w],u[v]+m*h[v])),h.push(0),v+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(g,_,t){"use strict";function e(l,x,m,w,b,k){this._color=l,this.key=x,this.value=m,this.left=w,this.right=b,this._count=k}function i(l){return new e(l._color,l.key,l.value,l.left,l.right,l._count)}function r(l,x){return new e(l,x.key,x.value,x.left,x.right,x._count)}function o(l){l._count=1+(l.left?l.left._count:0)+(l.right?l.right._count:0)}function n(l,x){this._compare=l,this.root=x}_.exports=function(l){return new n(l||f,null)};var p=n.prototype;function s(l,x){var m;return x.left&&(m=s(l,x.left))?m:(m=l(x.key,x.value))||(x.right?s(l,x.right):void 0)}function a(l,x,m,w){var b;return x(l,w.key)<=0&&(w.left&&(b=a(l,x,m,w.left))||(b=m(w.key,w.value)))?b:w.right?a(l,x,m,w.right):void 0}function c(l,x,m,w,b){var k,T=m(l,b.key),L=m(x,b.key);return T<=0&&(b.left&&(k=c(l,x,m,w,b.left))||L>0&&(k=w(b.key,b.value)))?k:L>0&&b.right?c(l,x,m,w,b.right):void 0}function u(l,x){this.tree=l,this._stack=x}Object.defineProperty(p,"keys",{get:function(){var l=[];return this.forEach(function(x,m){l.push(x)}),l}}),Object.defineProperty(p,"values",{get:function(){var l=[];return this.forEach(function(x,m){l.push(m)}),l}}),Object.defineProperty(p,"length",{get:function(){return this.root?this.root._count:0}}),p.insert=function(l,x){for(var m=this._compare,w=this.root,b=[],k=[];w;){var T=m(l,w.key);b.push(w),k.push(T),w=T<=0?w.left:w.right}b.push(new e(0,l,x,null,null,1));for(var L=b.length-2;L>=0;--L)w=b[L],b[L]=k[L]<=0?new e(w._color,w.key,w.value,b[L+1],w.right,w._count+1):new e(w._color,w.key,w.value,w.left,b[L+1],w._count+1);for(L=b.length-1;L>1;--L){var A=b[L-1];if(w=b[L],1===A._color||1===w._color)break;var I=b[L-2];if(I.left===A)if(A.left===w){if(!(D=I.right)||0!==D._color){I._color=0,I.left=A.right,A._color=1,A.right=I,b[L-2]=A,b[L-1]=w,o(I),o(A),L>=3&&((S=b[L-3]).left===I?S.left=A:S.right=A);break}A._color=1,I.right=r(1,D),I._color=0,L-=1}else{if(!(D=I.right)||0!==D._color){A.right=w.left,I._color=0,I.left=w.right,w._color=1,w.left=A,w.right=I,b[L-2]=w,b[L-1]=A,o(I),o(A),o(w),L>=3&&((S=b[L-3]).left===I?S.left=w:S.right=w);break}A._color=1,I.right=r(1,D),I._color=0,L-=1}else if(A.right===w){if(!(D=I.left)||0!==D._color){I._color=0,I.right=A.left,A._color=1,A.left=I,b[L-2]=A,b[L-1]=w,o(I),o(A),L>=3&&((S=b[L-3]).right===I?S.right=A:S.left=A);break}A._color=1,I.left=r(1,D),I._color=0,L-=1}else{var D;if(!(D=I.left)||0!==D._color){var S;A.left=w.right,I._color=0,I.right=w.left,w._color=1,w.right=A,w.left=I,b[L-2]=w,b[L-1]=A,o(I),o(A),o(w),L>=3&&((S=b[L-3]).right===I?S.right=w:S.left=w);break}A._color=1,I.left=r(1,D),I._color=0,L-=1}}return b[0]._color=1,new n(m,b[0])},p.forEach=function(l,x,m){if(this.root)switch(arguments.length){case 1:return s(l,this.root);case 2:return a(x,this._compare,l,this.root);case 3:return this._compare(x,m)>=0?void 0:c(x,m,this._compare,l,this.root)}},Object.defineProperty(p,"begin",{get:function(){for(var l=[],x=this.root;x;)l.push(x),x=x.left;return new u(this,l)}}),Object.defineProperty(p,"end",{get:function(){for(var l=[],x=this.root;x;)l.push(x),x=x.right;return new u(this,l)}}),p.at=function(l){if(l<0)return new u(this,[]);for(var x=this.root,m=[];;){if(m.push(x),x.left){if(l<x.left._count){x=x.left;continue}l-=x.left._count}if(!l)return new u(this,m);if(l-=1,!x.right||l>=x.right._count)break;x=x.right}return new u(this,[])},p.ge=function(l){for(var x=this._compare,m=this.root,w=[],b=0;m;){var k=x(l,m.key);w.push(m),k<=0&&(b=w.length),m=k<=0?m.left:m.right}return w.length=b,new u(this,w)},p.gt=function(l){for(var x=this._compare,m=this.root,w=[],b=0;m;){var k=x(l,m.key);w.push(m),k<0&&(b=w.length),m=k<0?m.left:m.right}return w.length=b,new u(this,w)},p.lt=function(l){for(var x=this._compare,m=this.root,w=[],b=0;m;){var k=x(l,m.key);w.push(m),k>0&&(b=w.length),m=k<=0?m.left:m.right}return w.length=b,new u(this,w)},p.le=function(l){for(var x=this._compare,m=this.root,w=[],b=0;m;){var k=x(l,m.key);w.push(m),k>=0&&(b=w.length),m=k<0?m.left:m.right}return w.length=b,new u(this,w)},p.find=function(l){for(var x=this._compare,m=this.root,w=[];m;){var b=x(l,m.key);if(w.push(m),0===b)return new u(this,w);m=b<=0?m.left:m.right}return new u(this,[])},p.remove=function(l){var x=this.find(l);return x?x.remove():this},p.get=function(l){for(var x=this._compare,m=this.root;m;){var w=x(l,m.key);if(0===w)return m.value;m=w<=0?m.left:m.right}};var h=u.prototype;function v(l,x){l.key=x.key,l.value=x.value,l.left=x.left,l.right=x.right,l._color=x._color,l._count=x._count}function f(l,x){return l<x?-1:l>x?1:0}Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new u(this.tree,this._stack.slice())},h.remove=function(){var l=this._stack;if(0===l.length)return this.tree;var x=new Array(l.length),m=l[l.length-1];x[x.length-1]=new e(m._color,m.key,m.value,m.left,m.right,m._count);for(var w=l.length-2;w>=0;--w)x[w]=(m=l[w]).left===l[w+1]?new e(m._color,m.key,m.value,x[w+1],m.right,m._count):new e(m._color,m.key,m.value,m.left,x[w+1],m._count);if((m=x[x.length-1]).left&&m.right){var b=x.length;for(m=m.left;m.right;)x.push(m),m=m.right;var k=x[b-1];for(x.push(new e(m._color,k.key,k.value,m.left,m.right,m._count)),x[b-1].key=m.key,x[b-1].value=m.value,w=x.length-2;w>=b;--w)x[w]=new e((m=x[w])._color,m.key,m.value,m.left,x[w+1],m._count);x[b-1].left=x[b]}if(0===(m=x[x.length-1])._color){var T=x[x.length-2];for(T.left===m?T.left=null:T.right===m&&(T.right=null),x.pop(),w=0;w<x.length;++w)x[w]._count--;return new n(this.tree._compare,x[0])}if(m.left||m.right){for(m.left?v(m,m.left):m.right&&v(m,m.right),m._color=1,w=0;w<x.length-1;++w)x[w]._count--;return new n(this.tree._compare,x[0])}if(1===x.length)return new n(this.tree._compare,null);for(w=0;w<x.length;++w)x[w]._count--;var L=x[x.length-2];return function(A){for(var I,D,S,C,R=A.length-1;R>=0;--R){if(I=A[R],0===R)return void(I._color=1);if((D=A[R-1]).left===I){if((S=D.right).right&&0===S.right._color)return C=(S=D.right=i(S)).right=i(S.right),D.right=S.left,S.left=D,S.right=C,S._color=D._color,I._color=1,D._color=1,C._color=1,o(D),o(S),R>1&&((F=A[R-2]).left===D?F.left=S:F.right=S),void(A[R-1]=S);if(S.left&&0===S.left._color)return C=(S=D.right=i(S)).left=i(S.left),D.right=C.left,S.left=C.right,C.left=D,C.right=S,C._color=D._color,D._color=1,S._color=1,I._color=1,o(D),o(S),o(C),R>1&&((F=A[R-2]).left===D?F.left=C:F.right=C),void(A[R-1]=C);if(1===S._color){if(0===D._color)return D._color=1,void(D.right=r(0,S));D.right=r(0,S);continue}S=i(S),D.right=S.left,S.left=D,S._color=D._color,D._color=0,o(D),o(S),R>1&&((F=A[R-2]).left===D?F.left=S:F.right=S),A[R-1]=S,A[R]=D,R+1<A.length?A[R+1]=I:A.push(I),R+=2}else{if((S=D.left).left&&0===S.left._color)return C=(S=D.left=i(S)).left=i(S.left),D.left=S.right,S.right=D,S.left=C,S._color=D._color,I._color=1,D._color=1,C._color=1,o(D),o(S),R>1&&((F=A[R-2]).right===D?F.right=S:F.left=S),void(A[R-1]=S);if(S.right&&0===S.right._color)return C=(S=D.left=i(S)).right=i(S.right),D.left=C.right,S.right=C.left,C.right=D,C.left=S,C._color=D._color,D._color=1,S._color=1,I._color=1,o(D),o(S),o(C),R>1&&((F=A[R-2]).right===D?F.right=C:F.left=C),void(A[R-1]=C);if(1===S._color){if(0===D._color)return D._color=1,void(D.left=r(0,S));D.left=r(0,S);continue}var F;S=i(S),D.left=S.right,S.right=D,S._color=D._color,D._color=0,o(D),o(S),R>1&&((F=A[R-2]).right===D?F.right=S:F.left=S),A[R-1]=S,A[R]=D,R+1<A.length?A[R+1]=I:A.push(I),R+=2}}}(x),L.left===m?L.left=null:L.right=null,new n(this.tree._compare,x[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var l=0,x=this._stack;if(0===x.length){var m=this.tree.root;return m?m._count:0}x[x.length-1].left&&(l=x[x.length-1].left._count);for(var w=x.length-2;w>=0;--w)x[w+1]===x[w].right&&(++l,x[w].left&&(l+=x[w].left._count));return l},enumerable:!0}),h.next=function(){var l=this._stack;if(0!==l.length){var x=l[l.length-1];if(x.right)for(x=x.right;x;)l.push(x),x=x.left;else for(l.pop();l.length>0&&l[l.length-1].right===x;)x=l[l.length-1],l.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var l=this._stack;if(0===l.length)return!1;if(l[l.length-1].right)return!0;for(var x=l.length-1;x>0;--x)if(l[x-1].left===l[x])return!0;return!1}}),h.update=function(l){var x=this._stack;if(0===x.length)throw new Error("Can't update empty node!");var m=new Array(x.length),w=x[x.length-1];m[m.length-1]=new e(w._color,w.key,l,w.left,w.right,w._count);for(var b=x.length-2;b>=0;--b)m[b]=(w=x[b]).left===x[b+1]?new e(w._color,w.key,w.value,m[b+1],w.right,w._count):new e(w._color,w.key,w.value,w.left,m[b+1],w._count);return new n(this.tree._compare,m[0])},h.prev=function(){var l=this._stack;if(0!==l.length){var x=l[l.length-1];if(x.left)for(x=x.left;x;)l.push(x),x=x.right;else for(l.pop();l.length>0&&l[l.length-1].left===x;)x=l[l.length-1],l.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var l=this._stack;if(0===l.length)return!1;if(l[l.length-1].left)return!0;for(var x=l.length-1;x>0;--x)if(l[x-1].right===l[x])return!0;return!1}})},{}],70:[function(g,_,t){"use strict";_.exports=function(b,k){var T=new a(b);return T.update(k),T};var e=g("./lib/text.js"),i=g("./lib/lines.js"),r=g("./lib/background.js"),o=g("./lib/cube.js"),n=g("./lib/ticks.js"),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(b,k){return b[0]=k[0],b[1]=k[1],b[2]=k[2],b}function a(b){this.gl=b,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(b)}var c=a.prototype;function u(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}c.update=function(b){function k(X,Z,Y){if(Y in b){var W,te=b[Y],z=this[Y];this[Y]=W=(X?Array.isArray(te)&&Array.isArray(te[0]):Array.isArray(te))?[Z(te[0]),Z(te[1]),Z(te[2])]:[Z(te),Z(te),Z(te)];for(var N=0;N<3;++N)if(W[N]!==z[N])return!0}return!1}b=b||{};var T,L=k.bind(this,!1,Number),A=k.bind(this,!1,Boolean),I=k.bind(this,!1,String),D=k.bind(this,!0,function(X){if(Array.isArray(X)){if(3===X.length)return[+X[0],+X[1],+X[2],1];if(4===X.length)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),S=!1,C=!1;if("bounds"in b)for(var R=b.bounds,F=0;F<2;++F)for(var H=0;H<3;++H)R[F][H]!==this.bounds[F][H]&&(C=!0),this.bounds[F][H]=R[F][H];if("ticks"in b)for(T=b.ticks,S=!0,this.autoTicks=!1,F=0;F<3;++F)this.tickSpacing[F]=0;else L("tickSpacing")&&(this.autoTicks=!0,C=!0);if(this._firstInit&&("ticks"in b||"tickSpacing"in b||(this.autoTicks=!0),C=!0,S=!0,this._firstInit=!1),C&&this.autoTicks&&(T=n.create(this.bounds,this.tickSpacing),S=!0),S){for(F=0;F<3;++F)T[F].sort(function(X,Z){return X.x-Z.x});n.equal(T,this.ticks)?S=!1:this.ticks=T}A("tickEnable"),I("tickFont")&&(S=!0),L("tickSize"),L("tickAngle"),L("tickPad"),D("tickColor");var U=I("labels");I("labelFont")&&(U=!0),A("labelEnable"),L("labelSize"),L("labelPad"),D("labelColor"),A("lineEnable"),A("lineMirror"),L("lineWidth"),D("lineColor"),A("lineTickEnable"),A("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),D("lineTickColor"),A("gridEnable"),L("gridWidth"),D("gridColor"),A("zeroEnable"),D("zeroLineColor"),L("zeroLineWidth"),A("backgroundEnable"),D("backgroundColor"),this._text?this._text&&(U||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var h=[new u,new u,new u];function v(b,k,T,L,A){for(var I=b.primalOffset,D=b.primalMinor,S=b.mirrorOffset,C=b.mirrorMinor,R=L[k],F=0;F<3;++F)if(k!==F){var H=I,U=S,X=D,Z=C;R&1<<F&&(H=S,U=I,X=C,Z=D),H[F]=T[0][F],U[F]=T[1][F],A[F]>0?(X[F]=-1,Z[F]=0):(X[F]=0,Z[F]=1)}}var f=[0,0,0],l={model:p,view:p,projection:p,_ortho:!1};c.isOpaque=function(){return!0},c.isTransparent=function(){return!1},c.drawTransparent=function(b){};var x=[0,0,0],m=[0,0,0],w=[0,0,0];c.draw=function(b){for(var k=this.gl,T=(b=b||l).model||p,L=b.view||p,A=b.projection||p,I=this.bounds,D=b._ortho||!1,S=o(T,L,A,I,D),C=S.cubeEdges,R=S.axis,Z=(D?2:1)*this.pixelRatio*(A[3]*L[12]+A[7]*L[13]+A[11]*L[14]+A[15]*L[15])/k.drawingBufferHeight,Y=0;Y<3;++Y)this.lastCubeProps.cubeEdges[Y]=C[Y],this.lastCubeProps.axis[Y]=R[Y];var W=h;for(Y=0;Y<3;++Y)v(h[Y],Y,this.bounds,C,R);k=this.gl;var te,ce,se,Le,fe,ve,Me,ke,Ce,Pe,Fe,qe,z=f;for(Y=0;Y<3;++Y)z[Y]=this.backgroundEnable[Y]?R[Y]:0;for(this._background.draw(T,L,A,I,z,this.backgroundColor),this._lines.bind(T,L,A,this),Y=0;Y<3;++Y){var N=[0,0,0];N[Y]=R[Y]>0?I[1][Y]:I[0][Y];for(var V=0;V<2;++V){var Q=(Y+1+V)%3,j=(Y+1+(1^V))%3;this.gridEnable[Q]&&this._lines.drawGrid(Q,j,this.bounds,N,this.gridColor[Q],this.gridWidth[Q]*this.pixelRatio)}for(V=0;V<2;++V)Q=(Y+1+V)%3,this.zeroEnable[j=(Y+1+(1^V))%3]&&Math.min(I[0][j],I[1][j])<=0&&Math.max(I[0][j],I[1][j])>=0&&this._lines.drawZero(Q,j,this.bounds,N,this.zeroLineColor[j],this.zeroLineWidth[j]*this.pixelRatio)}for(Y=0;Y<3;++Y){this.lineEnable[Y]&&this._lines.drawAxisLine(Y,this.bounds,W[Y].primalOffset,this.lineColor[Y],this.lineWidth[Y]*this.pixelRatio),this.lineMirror[Y]&&this._lines.drawAxisLine(Y,this.bounds,W[Y].mirrorOffset,this.lineColor[Y],this.lineWidth[Y]*this.pixelRatio);var J=s(x,W[Y].primalMinor),K=s(m,W[Y].mirrorMinor),re=this.lineTickLength;for(V=0;V<3;++V){var ie=Z/T[5*V];J[V]*=re[V]*ie,K[V]*=re[V]*ie}this.lineTickEnable[Y]&&this._lines.drawAxisTicks(Y,W[Y].primalOffset,J,this.lineTickColor[Y],this.lineTickWidth[Y]*this.pixelRatio),this.lineTickMirror[Y]&&this._lines.drawAxisTicks(Y,W[Y].mirrorOffset,K,this.lineTickColor[Y],this.lineTickWidth[Y]*this.pixelRatio)}function de(Le){(se=[0,0,0])[Le]=1}for(this._lines.unbind(),this._text.bind(T,L,A,this.pixelRatio),Y=0;Y<3;++Y){var ge=W[Y].primalMinor,be=W[Y].mirrorMinor,Te=s(w,W[Y].primalOffset);for(V=0;V<3;++V)this.lineTickEnable[Y]&&(Te[V]+=Z*ge[V]*Math.max(this.lineTickLength[V],0)/T[5*V]);var we=[0,0,0];if(we[Y]=1,this.tickEnable[Y]){for(-3600===this.tickAngle[Y]?(this.tickAngle[Y]=0,this.tickAlign[Y]="auto"):this.tickAlign[Y]=-1,te[0]="auto"===(te=[this.tickAlign[Y],.5,ce=1])[0]?0:parseInt(""+te[0]),se=[0,0,0],Me=void 0,ke=void 0,Ce=void 0,Pe=void 0,Fe=void 0,qe=void 0,Pe=(fe=ge)[ke=((Le=Y)+2)%3],Fe=(ve=be)[Me=(Le+1)%3],qe=ve[ke],(Ce=fe[Me])>0&&qe>0||Ce>0&&qe<0||Ce<0&&qe>0||Ce<0&&qe<0?de(Me):(Pe>0&&Fe>0||Pe>0&&Fe<0||Pe<0&&Fe>0||Pe<0&&Fe<0)&&de(ke),V=0;V<3;++V)Te[V]+=Z*ge[V]*this.tickPad[V]/T[5*V];this._text.drawTicks(Y,this.tickSize[Y],this.tickAngle[Y],Te,this.tickColor[Y],we,se,te)}if(this.labelEnable[Y]){for(ce=0,se=[0,0,0],this.labels[Y].length>4&&(de(Y),ce=1),te[0]="auto"===(te=[this.labelAlign[Y],.5,ce])[0]?0:parseInt(""+te[0]),V=0;V<3;++V)Te[V]+=Z*ge[V]*this.labelPad[V]/T[5*V];Te[Y]+=.5*(I[0][Y]+I[1][Y]),this._text.drawLabel(Y,this.labelSize[Y],this.labelAngle[Y],Te,this.labelColor[Y],[0,0,0],se,te)}}this._text.unbind()},c.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(g,_,t){"use strict";_.exports=function(p){for(var s=[],a=[],c=0,u=0;u<3;++u)for(var h=(u+1)%3,v=(u+2)%3,f=[0,0,0],l=[0,0,0],x=-1;x<=1;x+=2){a.push(c,c+2,c+1,c+1,c+2,c+3),f[u]=x,l[u]=x;for(var m=-1;m<=1;m+=2){f[h]=m;for(var w=-1;w<=1;w+=2)f[v]=w,s.push(f[0],f[1],f[2],l[0],l[1],l[2]),c+=1}var b=h;h=v,v=b}var k=e(p,new Float32Array(s)),T=e(p,new Uint16Array(a),p.ELEMENT_ARRAY_BUFFER),L=i(p,[{buffer:k,type:p.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:p.FLOAT,size:3,offset:12,stride:24}],T),A=r(p);return A.attributes.position.location=0,A.attributes.normal.location=1,new o(p,k,L,A)};var e=g("gl-buffer"),i=g("gl-vao"),r=g("./shaders").bg;function o(p,s,a,c){this.gl=p,this.buffer=s,this.vao=a,this.shader=c}var n=o.prototype;n.draw=function(p,s,a,c,u,h){for(var v=!1,f=0;f<3;++f)v=v||u[f];if(v){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:p,view:s,projection:a,bounds:c,enable:u,colors:h},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(g,_,t){"use strict";_.exports=function(m,w,b,k,T){i(n,w,m),i(n,b,n);for(var L=0,A=0;A<2;++A){a[2]=k[A][2];for(var I=0;I<2;++I){a[1]=k[I][1];for(var D=0;D<2;++D)a[0]=k[D][0],u(p[L],a,n),L+=1}}var S=-1;for(A=0;A<8;++A){for(var C=p[A][3],R=0;R<3;++R)s[A][R]=p[A][R]/C;T&&(s[A][2]*=-1),C<0&&(S<0||s[A][2]<s[S][2])&&(S=A)}if(S<0){S=0;for(var F=0;F<3;++F){for(var H=(F+2)%3,U=(F+1)%3,X=-1,Z=-1,Y=0;Y<2;++Y){var W=(z=Y<<F)+(Y<<H)+(1-Y<<U),te=z+(1-Y<<H)+(Y<<U);o(s[z],s[W],s[te],c)<0||(Y?X=1:Z=1)}if(X<0||Z<0)Z>X&&(S|=1<<F);else{for(Y=0;Y<2;++Y){W=(z=Y<<F)+(Y<<H)+(1-Y<<U);var z,N=v([p[z],p[W],p[te=z+(1-Y<<H)+(Y<<U)],p[z+(1<<H)+(1<<U)]]);Y?X=N:Z=N}Z>X&&(S|=1<<F)}}}var V=7^S,Q=-1;for(A=0;A<8;++A)A!==S&&A!==V&&(Q<0||s[Q][1]>s[A][1])&&(Q=A);var j=-1;for(A=0;A<3;++A)(K=Q^1<<A)!==S&&K!==V&&(j<0&&(j=K),(U=s[K])[0]<s[j][0]&&(j=K));var J=-1;for(A=0;A<3;++A){var K;(K=Q^1<<A)!==S&&K!==V&&K!==j&&(J<0&&(J=K),(U=s[K])[0]>s[J][0]&&(J=K))}var re=f;re[0]=re[1]=re[2]=0,re[e.log2(j^Q)]=Q&j,re[e.log2(Q^J)]=Q&J;var ie=7^J;ie===S||ie===V?re[e.log2(J^(ie=7^j))]=ie&J:re[e.log2(j^ie)]=ie&j;var ce=l,se=S;for(F=0;F<3;++F)ce[F]=se&1<<F?-1:1;return x};var e=g("bit-twiddle"),i=g("gl-mat4/multiply"),r=g("split-polygon"),o=g("robust-orientation"),n=new Array(16),p=new Array(8),s=new Array(8),a=new Array(3),c=[0,0,0];function u(m,w,b){for(var k=0;k<4;++k){m[k]=b[12+k];for(var T=0;T<3;++T)m[k]+=w[T]*b[4*T+k]}}!function(){for(var m=0;m<8;++m)p[m]=[1,1,1,1],s[m]=[1,1,1]}();var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(m){for(var w=0;w<h.length;++w)if((m=r.positive(m,h[w])).length<3)return 0;var b=m[0],k=b[0]/b[3],T=b[1]/b[3],L=0;for(w=1;w+1<m.length;++w){var A=m[w],I=m[w+1];L+=Math.abs((A[0]/A[3]-k)*(I[1]/I[3]-T)-(A[1]/A[3]-T)*(I[0]/I[3]-k))}return L}var f=[1,1,1],l=[0,0,0],x={cubeEdges:f,axis:l}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(g,_,t){"use strict";_.exports=function(f,l,x){var m=[],w=[0,0,0],b=[0,0,0],k=[0,0,0],T=[0,0,0];m.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var A=m.length/3|0,I=0;I<x[L].length;++I){var D=+x[L][I].x;m.push(D,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1)}var S=m.length/3|0;w[L]=A,b[L]=S-A,A=m.length/3|0;for(var C=0;C<x[L].length;++C)m.push(D=+x[L][C].x,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1);S=m.length/3|0,k[L]=A,T[L]=S-A}var R=e(f,new Float32Array(m)),F=i(f,[{buffer:R,type:f.FLOAT,size:3,stride:0,offset:0}]),H=r(f);return H.attributes.position.location=0,new h(f,R,F,H,b,w,T,k)};var e=g("gl-buffer"),i=g("gl-vao"),r=g("./shaders").line,o=[0,0,0],n=[0,0,0],p=[0,0,0],s=[0,0,0],a=[1,1];function c(f){return f[0]=f[1]=f[2]=0,f}function u(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f}function h(f,l,x,m,w,b,k,T){this.gl=f,this.vertBuffer=l,this.vao=x,this.shader=m,this.tickCount=w,this.tickOffset=b,this.gridCount=k,this.gridOffset=T}var v=h.prototype;v.bind=function(f,l,x){this.shader.bind(),this.shader.uniforms.model=f,this.shader.uniforms.view=l,this.shader.uniforms.projection=x,a[0]=this.gl.drawingBufferWidth,a[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=a,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(f,l,x,m,w){var b=c(n);this.shader.uniforms.majorAxis=n,b[f]=l[1][f]-l[0][f],this.shader.uniforms.minorAxis=b;var k,T=u(s,x);T[f]+=l[0][f],this.shader.uniforms.offset=T,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=m,(k=c(p))[(f+2)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6),(k=c(p))[(f+1)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(f,l,x,m,w){if(this.tickCount[f]){var b=c(o);b[f]=1,this.shader.uniforms.majorAxis=b,this.shader.uniforms.offset=l,this.shader.uniforms.minorAxis=x,this.shader.uniforms.color=m,this.shader.uniforms.lineWidth=w;var k=c(p);k[f]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[f],this.tickOffset[f])}},v.drawGrid=function(f,l,x,m,w,b){if(this.gridCount[f]){var k=c(n);k[l]=x[1][l]-x[0][l],this.shader.uniforms.minorAxis=k;var T=u(s,m);T[l]+=x[0][l],this.shader.uniforms.offset=T;var L=c(o);L[f]=1,this.shader.uniforms.majorAxis=L;var A=c(p);A[f]=1,this.shader.uniforms.screenAxis=A,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[f],this.gridOffset[f])}},v.drawZero=function(f,l,x,m,w,b){var k=c(n);this.shader.uniforms.majorAxis=k,k[f]=x[1][f]-x[0][f],this.shader.uniforms.minorAxis=k;var T=u(s,m);T[f]+=x[0][f],this.shader.uniforms.offset=T;var L=c(p);L[l]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(g,_,t){"use strict";var e=g("glslify"),i=g("gl-shader"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.line=function(c){return i(c,r,o,null,[{name:"position",type:"vec3"}])};var n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);t.text=function(c){return i(c,n,p,null,[{name:"position",type:"vec3"}])};var s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);t.bg=function(c){return i(c,s,a,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(g,_,t){(function(e){(function(){"use strict";_.exports=function(h,v,f,l,x,m){var w=i(h),b=r(h,[{buffer:w,size:3}]),k=n(h);k.attributes.position.location=0;var T=new a(h,k,w,b);return T.update(v,f,l,x,m),T};var i=g("gl-buffer"),r=g("gl-vao"),o=g("vectorize-text"),n=g("./shaders").text,p=window||e.global||{},s=p.__TEXT_CACHE||{};function a(h,v,f,l){this.gl=h,this.shader=v,this.buffer=f,this.vao=l,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}p.__TEXT_CACHE={};var c=a.prototype,u=[0,0];c.bind=function(h,v,f,l){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=h,x.view=v,x.projection=f,x.pixelScale=l,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=u},c.unbind=function(){this.vao.unbind()},c.update=function(h,v,f,l,x){var m=[];function w(S,C,R,F,H,U){var X=s[R];X||(X=s[R]={});var Z=X[C];Z||(Z=X[C]=function(J,K){try{return o(J,K)}catch(re){return console.warn('error vectorizing text:"'+J+'" error:',re),{cells:[],positions:[]}}}(C,{triangles:!0,font:R,textAlign:"center",textBaseline:"middle",lineSpacing:H,styletags:U}));for(var Y=(F||12)/12,W=Z.positions,te=Z.cells,z=0,N=te.length;z<N;++z)for(var V=te[z],Q=2;Q>=0;--Q){var j=W[V[Q]];m.push(Y*j[0],-Y*j[1],S)}}for(var b=[0,0,0],k=[0,0,0],T=[0,0,0],L=[0,0,0],A={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){T[I]=m.length/3|0,w(.5*(h[0][I]+h[1][I]),v[I],f[I],12,1.25,A),L[I]=(m.length/3|0)-T[I],b[I]=m.length/3|0;for(var D=0;D<l[I].length;++D)l[I][D].text&&w(l[I][D].x,l[I][D].text,l[I][D].font||x,l[I][D].fontSize||12,1.25,A);k[I]=(m.length/3|0)-b[I]}this.buffer.update(m),this.tickOffset=b,this.tickCount=k,this.labelOffset=T,this.labelCount=L},c.drawTicks=function(h,v,f,l,x,m,w,b){this.tickCount[h]&&(this.shader.uniforms.axis=m,this.shader.uniforms.color=x,this.shader.uniforms.angle=f,this.shader.uniforms.scale=v,this.shader.uniforms.offset=l,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=b,this.vao.draw(this.gl.TRIANGLES,this.tickCount[h],this.tickOffset[h]))},c.drawLabel=function(h,v,f,l,x,m,w,b){this.labelCount[h]&&(this.shader.uniforms.axis=m,this.shader.uniforms.color=x,this.shader.uniforms.angle=f,this.shader.uniforms.scale=v,this.shader.uniforms.offset=l,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=b,this.vao.draw(this.gl.TRIANGLES,this.labelCount[h],this.labelOffset[h]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,g("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(g,_,t){"use strict";function e(i,r){var o=i+"",n=o.indexOf("."),p=0;n>=0&&(p=o.length-n-1);var s=Math.pow(10,p),a=Math.round(i*r*s),c=a+"";if(c.indexOf("e")>=0)return c;var u=a/s,h=a%s;a<0?(u=0|-Math.ceil(u),h=0|-h):(u=0|Math.floor(u),h|=0);var v=""+u;if(a<0&&(v="-"+v),p){for(var f=""+h;f.length<p;)f="0"+f;return v+"."+f}return v}t.create=function(i,r){for(var o=[],n=0;n<3;++n){for(var p=[],s=0;s*r[n]<=i[1][n];++s)p.push({x:s*r[n],text:e(r[n],s)});for(s=-1;s*r[n]>=i[0][n];--s)p.push({x:s*r[n],text:e(r[n],s)});o.push(p)}return o},t.equal=function(i,r){for(var o=0;o<3;++o){if(i[o].length!==r[o].length)return!1;for(var n=0;n<i[o].length;++n){var p=i[o][n],s=r[o][n];if(p.x!==s.x||p.text!==s.text||p.font!==s.font||p.fontColor!==s.fontColor||p.fontSize!==s.fontSize||p.dx!==s.dx||p.dy!==s.dy)return!1}}return!0}},{}],77:[function(g,_,t){"use strict";_.exports=function(x,m,w,b,k){var T=m.model||s,L=m.view||s,A=m.projection||s,I=m._ortho||!1,D=x.bounds,S=(k=k||r(T,L,A,D,I)).axis;o(a,L,T),o(a,A,a);for(var C=f,R=0;R<3;++R)C[R].lo=1/0,C[R].hi=-1/0,C[R].pixelsPerDataUnit=1/0;var F=e(n(a,a));n(a,a);for(var H=0;H<3;++H){var U=(H+1)%3,X=(H+2)%3,Z=l;e:for(R=0;R<2;++R){var Y=[];if(S[H]<0!=!!R){Z[H]=D[R][H];for(var W=0;W<2;++W){Z[U]=D[W^R][U];for(var te=0;te<2;++te)Z[X]=D[te^W^R][X],Y.push(Z.slice())}var z=I?5:4;for(W=z;W===z;++W){if(0===Y.length)continue e;Y=i.positive(Y,F[W])}for(W=0;W<Y.length;++W){var N=v(l,a,X=Y[W],w,b);for(te=0;te<3;++te)C[te].lo=Math.min(C[te].lo,X[te]),C[te].hi=Math.max(C[te].hi,X[te]),te!==H&&(C[te].pixelsPerDataUnit=Math.min(C[te].pixelsPerDataUnit,Math.abs(N[te])))}}}}return C};var e=g("extract-frustum-planes"),i=g("split-polygon"),r=g("./lib/cube.js"),o=g("gl-mat4/multiply"),n=g("gl-mat4/transpose"),p=g("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),a=new Float32Array(16);function c(x,m,w){this.lo=x,this.hi=m,this.pixelsPerDataUnit=w}var u=[0,0,0,1],h=[0,0,0,1];function v(x,m,w,b,k){for(var T=0;T<3;++T){for(var L=u,A=h,I=0;I<3;++I)A[I]=L[I]=w[I];A[3]=L[3]=1,A[T]+=1,p(A,A,m),A[3]<0&&(x[T]=1/0),L[T]-=1,p(L,L,m),L[3]<0&&(x[T]=1/0);var D=(L[0]/L[3]-A[0]/A[3])*b,S=(L[1]/L[3]-A[1]/A[3])*k;x[T]=.25*Math.sqrt(D*D+S*S)}return x}var f=[new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0)],l=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(g,_,t){"use strict";var e=g("typedarray-pool"),i=g("ndarray-ops"),r=g("ndarray"),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(c,u,h,v,f){this.gl=c,this.type=u,this.handle=h,this.length=v,this.usage=f}var p=n.prototype;function s(c,u,h,v,f,l){var x=f.length*f.BYTES_PER_ELEMENT;if(l<0)return c.bufferData(u,f,v),x;if(x+l>h)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return c.bufferSubData(u,l,f),h}p.bind=function(){this.gl.bindBuffer(this.type,this.handle)},p.unbind=function(){this.gl.bindBuffer(this.type,null)},p.dispose=function(){this.gl.deleteBuffer(this.handle)},p.update=function(c,u){if("number"!=typeof u&&(u=-1),this.bind(),"object"==typeof c&&void 0!==c.shape){var h=c.dtype;if(o.indexOf(h)<0&&(h="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(h=gl.getExtension("OES_element_index_uint")&&"uint16"!==h?"uint32":"uint16"),h===c.dtype&&function(x,m){for(var w=1,b=m.length-1;b>=0;--b){if(m[b]!==w)return!1;w*=x[b]}return!0}(c.shape,c.stride))this.length=s(this.gl,this.type,this.length,this.usage,0===c.offset&&c.data.length===c.shape[0]?c.data:c.data.subarray(c.offset,c.shape[0]),u);else{var v=e.malloc(c.size,h),f=r(v,c.shape);i.assign(f,c),this.length=s(this.gl,this.type,this.length,this.usage,u<0?v:v.subarray(0,c.size),u),e.free(v)}}else if(Array.isArray(c)){var l;l=function(c,u){for(var h=e.malloc(c.length,u),v=c.length,f=0;f<v;++f)h[f]=c[f];return h}(c,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=s(this.gl,this.type,this.length,this.usage,u<0?l:l.subarray(0,c.length),u),e.free(l)}else if("object"==typeof c&&"number"==typeof c.length)this.length=s(this.gl,this.type,this.length,this.usage,c,u);else{if("number"!=typeof c&&void 0!==c)throw new Error("gl-buffer: Invalid data type");if(u>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(c|=0)<=0&&(c=1),this.gl.bufferData(this.type,0|c,this.usage),this.length=c}},_.exports=function(c,u,h,v){if(v=v||c.DYNAMIC_DRAW,(h=h||c.ARRAY_BUFFER)!==c.ARRAY_BUFFER&&h!==c.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(v!==c.DYNAMIC_DRAW&&v!==c.STATIC_DRAW&&v!==c.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=c.createBuffer(),l=new n(c,h,f,0,v);return l.update(u),l}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(g,_,t){"use strict";var e=g("gl-vec3");_.exports=function(r,o){var n=r.positions,p=r.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(0===r.positions.length)return o&&(o[0]=[0,0,0],o[1]=[0,0,0]),s;for(var a=0,c=1/0,u=-1/0,h=1/0,v=-1/0,f=1/0,l=-1/0,x=null,m=null,w=[],b=1/0,k=!1,T=0;T<n.length;T++){var L=n[T];c=Math.min(L[0],c),u=Math.max(L[0],u),h=Math.min(L[1],h),v=Math.max(L[1],v),f=Math.min(L[2],f),l=Math.max(L[2],l);var A=p[T];if(e.length(A)>a&&(a=e.length(A)),T){var I=2*e.distance(x,L)/(e.length(m)+e.length(A));I?(b=Math.min(b,I),k=!1):k=!0}k||(x=L,m=A),w.push(A)}var S=[u,v,l];o&&(o[0]=[c,h,f],o[1]=S),0===a&&(a=1);var C=1/a;isFinite(b)||(b=1),s.vectorScale=b;var R=r.coneSize||.5;r.absoluteConeSize&&(R=r.absoluteConeSize*C),s.coneScale=R,T=0;for(var F=0;T<n.length;T++)for(var H=(L=n[T])[0],U=L[1],X=L[2],Z=w[T],Y=e.length(Z)*C,W=0;W<8;W++){s.positions.push([H,U,X,F++]),s.positions.push([H,U,X,F++]),s.positions.push([H,U,X,F++]),s.positions.push([H,U,X,F++]),s.positions.push([H,U,X,F++]),s.positions.push([H,U,X,F++]),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vertexIntensity.push(Y,Y,Y),s.vertexIntensity.push(Y,Y,Y);var te=s.positions.length;s.cells.push([te-6,te-5,te-4],[te-3,te-2,te-1])}return s};var i=g("./lib/shaders");_.exports.createMesh=g("./create_mesh"),_.exports.createConeMesh=function(r,o){return _.exports.createMesh(r,o,{shaders:i,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(g,_,t){"use strict";var e=g("gl-shader"),i=g("gl-buffer"),r=g("gl-vao"),o=g("gl-texture2d"),n=g("gl-mat4/multiply"),p=g("gl-mat4/invert"),s=g("ndarray"),a=g("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(l,x,m,w,b,k,T,L,A,I,D){this.gl=l,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=m,this.pickShader=w,this.trianglePositions=b,this.triangleVectors=k,this.triangleColors=L,this.triangleUVs=A,this.triangleIds=T,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=D,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=c,this._view=c,this._projection=c,this._resolution=[1,1]}var h=u.prototype;function v(l,x){var m=e(l,x.meshShader.vertex,x.meshShader.fragment,null,x.meshShader.attributes);return m.attributes.position.location=0,m.attributes.color.location=2,m.attributes.uv.location=3,m.attributes.vector.location=4,m}function f(l,x){var m=e(l,x.pickShader.vertex,x.pickShader.fragment,null,x.pickShader.attributes);return m.attributes.position.location=0,m.attributes.id.location=1,m.attributes.vector.location=4,m}h.isOpaque=function(){return this.opacity>=1},h.isTransparent=function(){return this.opacity<1},h.pickSlots=1,h.setPickBase=function(l){this.pickId=l},h.update=function(l){l=l||{};var x=this.gl;this.dirty=!0,"lightPosition"in l&&(this.lightPosition=l.lightPosition),"opacity"in l&&(this.opacity=l.opacity),"ambient"in l&&(this.ambientLight=l.ambient),"diffuse"in l&&(this.diffuseLight=l.diffuse),"specular"in l&&(this.specularLight=l.specular),"roughness"in l&&(this.roughness=l.roughness),"fresnel"in l&&(this.fresnel=l.fresnel),void 0!==l.tubeScale&&(this.tubeScale=l.tubeScale),void 0!==l.vectorScale&&(this.vectorScale=l.vectorScale),void 0!==l.coneScale&&(this.coneScale=l.coneScale),void 0!==l.coneOffset&&(this.coneOffset=l.coneOffset),l.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(Q){for(var j=a({colormap:Q,nshades:256,format:"rgba"}),J=new Uint8Array(1024),K=0;K<256;++K){for(var re=j[K],ie=0;ie<3;++ie)J[4*K+ie]=re[ie];J[4*K+3]=255*re[3]}return s(J,[256,256,4],[4,0,1])}(l.colormap)),this.texture.generateMipmap());var m=l.cells,w=l.positions,b=l.vectors;if(w&&m&&b){var k=[],T=[],L=[],A=[],I=[];this.cells=m,this.positions=w,this.vectors=b;var D=l.meshColor||[1,1,1,1],S=l.vertexIntensity,C=1/0,R=-1/0;if(S)if(l.vertexIntensityBounds)C=+l.vertexIntensityBounds[0],R=+l.vertexIntensityBounds[1];else for(var F=0;F<S.length;++F){var H=S[F];C=Math.min(C,H),R=Math.max(R,H)}else for(F=0;F<w.length;++F)H=w[F][2],C=Math.min(C,H),R=Math.max(R,H);for(this.intensity=S||function(Q){for(var j=Q.length,J=new Array(j),K=0;K<j;++K)J[K]=Q[K][2];return J}(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=0;F<w.length;++F)for(var U=w[F],X=0;X<3;++X)!isNaN(U[X])&&isFinite(U[X])&&(this.bounds[0][X]=Math.min(this.bounds[0][X],U[X]),this.bounds[1][X]=Math.max(this.bounds[1][X],U[X]));var Z=0;e:for(F=0;F<m.length;++F){var Y=m[F];switch(Y.length){case 3:for(X=0;X<3;++X){U=w[te=Y[X]];for(var W=0;W<3;++W)if(isNaN(U[W])||!isFinite(U[W]))continue e}for(X=0;X<3;++X){var te;U=w[te=Y[2-X]],k.push(U[0],U[1],U[2],U[3]);var z=b[te];T.push(z[0],z[1],z[2],z[3]||0);var N;L.push(D[0],D[1],D[2],3===D.length?1:D[3]),A.push((N=S?[(S[te]-C)/(R-C),0]:[(U[2]-C)/(R-C),0])[0],N[1]),I.push(F)}Z+=1}}this.triangleCount=Z,this.trianglePositions.update(k),this.triangleVectors.update(T),this.triangleColors.update(L),this.triangleUVs.update(A),this.triangleIds.update(new Uint32Array(I))}},h.drawTransparent=h.draw=function(l){for(var x=this.gl,m=(l=l||{}).model||c,w=l.view||c,b=l.projection||c,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)k[0][T]=Math.max(k[0][T],this.clipBounds[0][T]),k[1][T]=Math.min(k[1][T],this.clipBounds[1][T]);var L={model:m,view:w,projection:b,inverseModel:c.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=p(L.inverseModel,L.model),x.disable(x.CULL_FACE),this.texture.bind(0);var A=new Array(16);for(n(A,L.view,L.model),n(A,L.projection,A),p(A,A),T=0;T<3;++T)L.eyePosition[T]=A[12+T]/A[15];var I=A[15];for(T=0;T<3;++T)I+=this.lightPosition[T]*A[4*T+3];for(T=0;T<3;++T){for(var D=A[12+T],S=0;S<3;++S)D+=A[4*S+T]*this.lightPosition[S];L.lightPosition[T]=D/I}if(this.triangleCount>0){var C=this.triShader;C.bind(),C.uniforms=L,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},h.drawPick=function(l){for(var x=this.gl,m=(l=l||{}).model||c,w=l.view||c,b=l.projection||c,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)k[0][T]=Math.max(k[0][T],this.clipBounds[0][T]),k[1][T]=Math.min(k[1][T],this.clipBounds[1][T]);this._model=[].slice.call(m),this._view=[].slice.call(w),this._projection=[].slice.call(b),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var L={model:m,view:w,projection:b,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},A=this.pickShader;A.bind(),A.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},h.pick=function(l){if(!l||l.id!==this.pickId)return null;var x=l.value[0]+256*l.value[1]+65536*l.value[2],m=this.cells[x],w=this.positions[m[1]].slice(0,3),b={position:w,dataCoordinate:w,index:Math.floor(m[1]/48)};return"cone"===this.traceType?b.index=Math.floor(m[1]/48):"streamtube"===this.traceType&&(b.intensity=this.intensity[m[1]],b.velocity=this.vectors[m[1]].slice(0,3),b.divergence=this.vectors[m[1]][3],b.index=x),b},h.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},_.exports=function(l,x,m){var w=m.shaders;1===arguments.length&&(l=(x=l).gl);var b=v(l,w),k=f(l,w),T=o(l,s(new Uint8Array([255,255,255,255]),[1,1,4]));T.generateMipmap(),T.minFilter=l.LINEAR_MIPMAP_LINEAR,T.magFilter=l.LINEAR;var L=i(l),A=i(l),I=i(l),D=i(l),S=i(l),R=new u(l,T,b,k,L,A,S,I,D,r(l,[{buffer:L,type:l.FLOAT,size:4},{buffer:S,type:l.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:l.FLOAT,size:4},{buffer:D,type:l.FLOAT,size:2},{buffer:A,type:l.FLOAT,size:4}]),m.traceType||"cone");return R.update(x),R}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(g,_,t){var e=g("glslify"),i=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),r=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:i,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},t.pickShader={vertex:o,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(g,_,t){_.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(g,_,t){var e=g("./1.0/numbers");_.exports=function(i){return e[i]}},{"./1.0/numbers":82}],84:[function(g,_,t){"use strict";_.exports=function(u){var h=u.gl,v=e(h),f=i(h,[{buffer:v,type:h.FLOAT,size:3,offset:0,stride:40},{buffer:v,type:h.FLOAT,size:4,offset:12,stride:40},{buffer:v,type:h.FLOAT,size:3,offset:28,stride:40}]),l=r(h);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var x=new n(h,v,f,l);return x.update(u),x};var e=g("gl-buffer"),i=g("gl-vao"),r=g("./shaders/index"),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(u,h,v,f){this.gl=u,this.shader=f,this.buffer=h,this.vao=v,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var p=n.prototype;function s(u,h){for(var v=0;v<3;++v)u[0][v]=Math.min(u[0][v],h[v]),u[1][v]=Math.max(u[1][v],h[v])}p.isOpaque=function(){return!this.hasAlpha},p.isTransparent=function(){return this.hasAlpha},p.drawTransparent=p.draw=function(u){var h=this.gl,v=this.shader.uniforms;this.shader.bind();var f=v.view=u.view||o,l=v.projection=u.projection||o;v.model=u.model||o,v.clipBounds=this.clipBounds,v.opacity=this.opacity;var k=(u._ortho?2:1)*this.pixelRatio*(l[3]*f[12]+l[7]*f[13]+l[11]*f[14]+l[15]*f[15])/h.drawingBufferHeight;this.vao.bind();for(var T=0;T<3;++T)h.lineWidth(this.lineWidth[T]*this.pixelRatio),v.capSize=this.capSize[T]*k,this.lineCount[T]&&h.drawArrays(h.LINES,this.lineOffset[T],this.lineCount[T]);this.vao.unbind()};var a=function(){for(var u=new Array(3),h=0;h<3;++h){for(var v=[],f=1;f<=2;++f)for(var l=-1;l<=1;l+=2){var x=[0,0,0];x[(f+h)%3]=l,v.push(x)}u[h]=v}return u}();function c(u,h,v,f){for(var l=a[f],x=0;x<l.length;++x){var m=l[x];u.push(h[0],h[1],h[2],v[0],v[1],v[2],v[3],m[0],m[1],m[2])}return l.length}p.update=function(u){"lineWidth"in(u=u||{})&&(this.lineWidth=u.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in u&&(this.capSize=u.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in u&&(this.opacity=+u.opacity,this.opacity<1&&(this.hasAlpha=!0));var h=u.color||[[0,0,0],[0,0,0],[0,0,0]],v=u.position,f=u.error;if(Array.isArray(h[0])||(h=[h,h,h]),v&&f){var l=[],x=v.length,m=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=m;e:for(var b=0;b<x;++b){for(var k=v[b],T=0;T<3;++T)if(isNaN(k[T])||!isFinite(k[T]))continue e;var I,L=f[b],A=h[w];Array.isArray(A[0])&&(A=h[b]),3===A.length?A=[A[0],A[1],A[2],1]:4===A.length&&(A=[A[0],A[1],A[2],A[3]],!this.hasAlpha&&A[3]<1&&(this.hasAlpha=!0)),isNaN(L[0][w])||isNaN(L[1][w])||(L[0][w]<0&&((I=k.slice())[w]+=L[0][w],l.push(k[0],k[1],k[2],A[0],A[1],A[2],A[3],0,0,0,I[0],I[1],I[2],A[0],A[1],A[2],A[3],0,0,0),s(this.bounds,I),m+=2+c(l,I,A,w)),L[1][w]>0&&((I=k.slice())[w]+=L[1][w],l.push(k[0],k[1],k[2],A[0],A[1],A[2],A[3],0,0,0,I[0],I[1],I[2],A[0],A[1],A[2],A[3],0,0,0),s(this.bounds,I),m+=2+c(l,I,A,w)))}this.lineCount[w]=m-this.lineOffset[w]}this.buffer.update(l)}},p.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(g,_,t){"use strict";var e=g("glslify"),i=g("gl-shader"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);_.exports=function(n){return i(n,r,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(g,_,t){"use strict";var e=g("gl-texture2d");_.exports=function(x,m,w,b){i||(i=x.FRAMEBUFFER_UNSUPPORTED,r=x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,n=x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=x.getExtension("WEBGL_draw_buffers");if(!p&&k&&function(C,R){var F=C.getParameter(R.MAX_COLOR_ATTACHMENTS_WEBGL);p=new Array(F+1);for(var H=0;H<=F;++H){for(var U=new Array(F),X=0;X<H;++X)U[X]=C.COLOR_ATTACHMENT0+X;for(X=H;X<F;++X)U[X]=C.NONE;p[H]=U}}(x,k),Array.isArray(m)&&(b=w,w=0|m[1],m=0|m[0]),"number"!=typeof m)throw new Error("gl-fbo: Missing shape parameter");var T=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(m<0||m>T||w<0||w>T)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(b=b||{})){if((L=Math.max(0|b.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!k)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>x.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var A=x.UNSIGNED_BYTE,I=x.getExtension("OES_texture_float");if(b.float&&L>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");A=x.FLOAT}else b.preferFloat&&L>0&&I&&(A=x.FLOAT);var D=!0;"depth"in b&&(D=!!b.depth);var S=!1;return"stencil"in b&&(S=!!b.stencil),new v(x,m,w,A,L,D,S,k)};var i,r,o,n,p=null;function s(x){return[x.getParameter(x.FRAMEBUFFER_BINDING),x.getParameter(x.RENDERBUFFER_BINDING),x.getParameter(x.TEXTURE_BINDING_2D)]}function a(x,m){x.bindFramebuffer(x.FRAMEBUFFER,m[0]),x.bindRenderbuffer(x.RENDERBUFFER,m[1]),x.bindTexture(x.TEXTURE_2D,m[2])}function c(x){switch(x){case i:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case n:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function u(x,m,w,b,k,T){if(!b)return null;var L=e(x,m,w,k,b);return L.magFilter=x.NEAREST,L.minFilter=x.NEAREST,L.mipSamples=1,L.bind(),x.framebufferTexture2D(x.FRAMEBUFFER,T,x.TEXTURE_2D,L.handle,0),L}function h(x,m,w,b,k){var T=x.createRenderbuffer();return x.bindRenderbuffer(x.RENDERBUFFER,T),x.renderbufferStorage(x.RENDERBUFFER,b,m,w),x.framebufferRenderbuffer(x.FRAMEBUFFER,k,x.RENDERBUFFER,T),T}function v(x,m,w,b,k,T,L,A){this.gl=x,this._shape=[0|m,0|w],this._destroyed=!1,this._ext=A,this.color=new Array(k);for(var I=0;I<k;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=b,this._useDepth=T,this._useStencil=L;var D=this,S=[0|m,0|w];Object.defineProperties(S,{0:{get:function(){return D._shape[0]},set:function(C){return D.width=C}},1:{get:function(){return D._shape[1]},set:function(C){return D.height=C}}}),this._shapeVector=S,function(C){var R=s(C.gl),F=C.gl,H=C.handle=F.createFramebuffer(),U=C._shape[0],X=C._shape[1],Z=C.color.length,Y=C._ext,W=C._useStencil,te=C._useDepth,z=C._colorType;F.bindFramebuffer(F.FRAMEBUFFER,H);for(var N=0;N<Z;++N)C.color[N]=u(F,U,X,z,F.RGBA,F.COLOR_ATTACHMENT0+N);0===Z?(C._color_rb=h(F,U,X,F.RGBA4,F.COLOR_ATTACHMENT0),Y&&Y.drawBuffersWEBGL(p[0])):Z>1&&Y.drawBuffersWEBGL(p[Z]);var V=F.getExtension("WEBGL_depth_texture");V?W?C.depth=u(F,U,X,V.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):te&&(C.depth=u(F,U,X,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):te&&W?C._depth_rb=h(F,U,X,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):te?C._depth_rb=h(F,U,X,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):W&&(C._depth_rb=h(F,U,X,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var Q=F.checkFramebufferStatus(F.FRAMEBUFFER);if(Q!==F.FRAMEBUFFER_COMPLETE){for(C._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(C.handle),C.handle=null,C.depth&&(C.depth.dispose(),C.depth=null),C._depth_rb&&(F.deleteRenderbuffer(C._depth_rb),C._depth_rb=null),N=0;N<C.color.length;++N)C.color[N].dispose(),C.color[N]=null;C._color_rb&&(F.deleteRenderbuffer(C._color_rb),C._color_rb=null),a(F,R),c(Q)}a(F,R)}(this)}var f=v.prototype;function l(x,m,w){if(x._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(x._shape[0]!==m||x._shape[1]!==w){var b=x.gl,k=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(m<0||m>k||w<0||w>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");x._shape[0]=m,x._shape[1]=w;for(var T=s(b),L=0;L<x.color.length;++L)x.color[L].shape=x._shape;x._color_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,x._color_rb),b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,x._shape[0],x._shape[1])),x.depth&&(x.depth.shape=x._shape),x._depth_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,x._depth_rb),x._useDepth&&x._useStencil?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,x._shape[0],x._shape[1]):x._useDepth?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,x._shape[0],x._shape[1]):x._useStencil&&b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX,x._shape[0],x._shape[1])),b.bindFramebuffer(b.FRAMEBUFFER,x.handle);var A=b.checkFramebufferStatus(b.FRAMEBUFFER);A!==b.FRAMEBUFFER_COMPLETE&&(x.dispose(),a(b,T),c(A)),a(b,T)}}Object.defineProperties(f,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(x){if(Array.isArray(x)||(x=[0|x,0|x]),2!==x.length)throw new Error("gl-fbo: Shape vector must be length 2");var m=0|x[0],w=0|x[1];return l(this,m,w),[m,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(x){return l(this,x|=0,this._shape[1]),x},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(x){return l(this,this._shape[0],x|=0),x},enumerable:!1}}),f.bind=function(){if(!this._destroyed){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,this.handle),x.viewport(0,0,this._shape[0],this._shape[1])}},f.dispose=function(){if(!this._destroyed){this._destroyed=!0;var x=this.gl;x.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(x.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var m=0;m<this.color.length;++m)this.color[m].dispose(),this.color[m]=null;this._color_rb&&(x.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(g,_,t){var e=g("sprintf-js").sprintf,i=g("gl-constants/lookup"),r=g("glsl-shader-name"),o=g("add-line-numbers");_.exports=function(n,p,s){"use strict";var a=r(p)||"of unknown name (see npm glsl-shader-name)",c="unknown type";void 0!==s&&(c=s===i.FRAGMENT_SHADER?"fragment":"vertex");for(var u=e("Error compiling %s shader %s:\n",c,a),h=e("%s%s",u,n),v=n.split("\n"),f={},l=0;l<v.length;l++){var x=v[l];if(""!==x&&"\0"!==x){var m=parseInt(x.split(":")[2]);if(isNaN(m))throw new Error(e("Could not parse error: %s",x));f[m]=x}}var w=o(p).split("\n");for(l=0;l<w.length;l++)if((f[l+3]||f[l+2]||f[l+1])&&(u+=w[l]+"\n",f[l+1])){var k=f[l+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),u+=e("^^^ %s\n\n",k)}return{long:u.trim(),short:h.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(g,_,t){"use strict";_.exports=function(h,v){var f=h.gl,T=new s(h,o(f,p.vertex,p.fragment),o(f,p.pickVertex,p.pickFragment),n(f),n(f),n(f),n(f));return T.update(v),h.addObject(T),T};var e=g("binary-search-bounds"),i=g("iota-array"),r=g("typedarray-pool"),o=g("gl-shader"),n=g("gl-buffer"),p=g("./lib/shaders");function s(h,v,f,l,x,m,w){this.plot=h,this.shader=v,this.pickShader=f,this.positionBuffer=l,this.weightBuffer=x,this.colorBuffer=m,this.idBuffer=w,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var a,h,v,c=s.prototype,u=[0,0,1,0,0,1,1,0,1,1,0,1];c.draw=(a=[1,0,0,0,1,0,0,0,1],function(){var h=this.plot,v=this.shader,f=this.bounds,l=this.numVertices;if(!(l<=0)){var x=h.gl,m=h.dataBox,b=f[3]-f[1],k=m[2]-m[0],T=m[3]-m[1];a[0]=2*(f[2]-f[0])/k,a[4]=2*b/T,a[6]=2*(f[0]-m[0])/k-1,a[7]=2*(f[1]-m[1])/T-1,v.bind();var L=v.uniforms;L.viewTransform=a,L.shape=this.shape;var A=v.attributes;this.positionBuffer.bind(),A.position.pointer(),this.weightBuffer.bind(),A.weight.pointer(x.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),A.color.pointer(x.UNSIGNED_BYTE,!0),x.drawArrays(x.TRIANGLES,0,l)}}),c.drawPick=(h=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0],function(f){var l=this.plot,x=this.pickShader,m=this.bounds,w=this.numVertices;if(!(w<=0)){var b=l.gl,k=l.dataBox,L=m[3]-m[1],A=k[2]-k[0],I=k[3]-k[1];h[0]=2*(m[2]-m[0])/A,h[4]=2*L/I,h[6]=2*(m[0]-k[0])/A-1,h[7]=2*(m[1]-k[1])/I-1;for(var D=0;D<4;++D)v[D]=f>>8*D&255;this.pickOffset=f,x.bind();var S=x.uniforms;S.viewTransform=h,S.pickOffset=v,S.shape=this.shape;var C=x.attributes;return this.positionBuffer.bind(),C.position.pointer(),this.weightBuffer.bind(),C.weight.pointer(b.UNSIGNED_BYTE,!1),this.idBuffer.bind(),C.pickId.pointer(b.UNSIGNED_BYTE,!1),b.drawArrays(b.TRIANGLES,0,w),f+this.shape[0]*this.shape[1]}}),c.pick=function(h,v,f){var l=this.pickOffset;if(f<l||f>=l+this.shape[0]*this.shape[1])return null;var m=f-l;return{object:this,pointId:m,dataCoord:[this.xData[m%this.shape[0]],this.yData[m/this.shape[0]|0]]}},c.update=function(h){var v=(h=h||{}).shape||[0,0],f=h.x||i(v[0]),l=h.y||i(v[1]),x=h.z||new Float32Array(v[0]*v[1]),m=!1!==h.zsmooth;this.xData=f,this.yData=l;var w,b,k,T,L=h.colorLevels||[0],A=h.colorValues||[0,0,0,1],I=L.length,D=this.bounds;m?(w=D[0]=f[0],b=D[1]=l[0],k=D[2]=f[f.length-1],T=D[3]=l[l.length-1]):(w=D[0]=f[0]+(f[1]-f[0])/2,b=D[1]=l[0]+(l[1]-l[0])/2,k=D[2]=f[f.length-1]+(f[f.length-1]-f[f.length-2])/2,T=D[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var S=1/(k-w),C=1/(T-b),R=v[0],F=v[1];this.shape=[R,F];var H=(m?(R-1)*(F-1):R*F)*(u.length>>>1);this.numVertices=H;for(var U=r.mallocUint8(4*H),X=r.mallocFloat32(2*H),Z=r.mallocUint8(2*H),Y=r.mallocUint32(H),W=0,te=m?R-1:R,z=m?F-1:F,N=0;N<z;++N){var V,Q;m?(V=C*(l[N]-b),Q=C*(l[N+1]-b)):(V=N<F-1?C*(l[N]-(l[N+1]-l[N])/2-b):C*(l[N]-(l[N]-l[N-1])/2-b),Q=N<F-1?C*(l[N]+(l[N+1]-l[N])/2-b):C*(l[N]+(l[N]-l[N-1])/2-b));for(var j=0;j<te;++j){var J,K;m?(J=S*(f[j]-w),K=S*(f[j+1]-w)):(J=j<R-1?S*(f[j]-(f[j+1]-f[j])/2-w):S*(f[j]-(f[j]-f[j-1])/2-w),K=j<R-1?S*(f[j]+(f[j+1]-f[j])/2-w):S*(f[j]+(f[j]-f[j-1])/2-w));for(var re=0;re<u.length;re+=2){var ie,ce,se,de,ue=u[re],ge=u[re+1],be=x[m?(N+ge)*R+(j+ue):N*R+j],Te=e.le(L,be);if(Te<0)ie=A[0],ce=A[1],se=A[2],de=A[3];else if(Te===I-1)ie=A[4*I-4],ce=A[4*I-3],se=A[4*I-2],de=A[4*I-1];else{var we=(be-L[Te])/(L[Te+1]-L[Te]),Le=1-we,fe=4*Te,ve=4*(Te+1);ie=Le*A[fe]+we*A[ve],ce=Le*A[fe+1]+we*A[ve+1],se=Le*A[fe+2]+we*A[ve+2],de=Le*A[fe+3]+we*A[ve+3]}U[4*W]=255*ie,U[4*W+1]=255*ce,U[4*W+2]=255*se,U[4*W+3]=255*de,X[2*W]=.5*J+.5*K,X[2*W+1]=.5*V+.5*Q,Z[2*W]=ue,Z[2*W+1]=ge,Y[W]=N*R+j,W+=1}}}this.positionBuffer.update(X),this.weightBuffer.update(Z),this.colorBuffer.update(U),this.idBuffer.update(Y),r.free(X),r.free(U),r.free(Z),r.free(Y)},c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(g,_,t){"use strict";var e=g("glslify");_.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(g,_,t){var e=g("glslify"),i=g("gl-shader"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),p=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];t.createShader=function(s){return i(s,r,o,null,p)},t.createPickShader=function(s){return i(s,r,n,null,p)}},{"gl-shader":132,glslify:231}],91:[function(g,_,t){"use strict";_.exports=function(w){var b=w.gl||w.scene&&w.scene.gl,k=c(b);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;var T=u(b);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;for(var L=e(b),A=i(b,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),I=s(new Array(1024),[256,1,4]),D=0;D<1024;++D)I.data[D]=255;var S=r(b,I);S.wrap=b.REPEAT;var C=new x(b,k,T,L,A,S);return C.update(w),C};var e=g("gl-buffer"),i=g("gl-vao"),r=g("gl-texture2d"),o=new Uint8Array(4),n=new Float32Array(o.buffer),p=g("binary-search-bounds"),s=g("ndarray"),a=g("./lib/shaders"),c=a.createShader,u=a.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(w,b){for(var k=0,T=0;T<3;++T){var L=w[T]-b[T];k+=L*L}return Math.sqrt(k)}function f(w){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)b[0][k]=Math.max(w[0][k],b[0][k]),b[1][k]=Math.min(w[1][k],b[1][k]);return b}function l(w,b,k,T){this.arcLength=w,this.position=b,this.index=k,this.dataCoordinate=T}function x(w,b,k,T,L,A){this.gl=w,this.shader=b,this.pickShader=k,this.buffer=T,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=A,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var m=x.prototype;m.isTransparent=function(){return this.hasAlpha},m.isOpaque=function(){return!this.hasAlpha},m.pickSlots=1,m.setPickBase=function(w){this.pickId=w},m.drawTransparent=m.draw=function(w){if(this.vertexCount){var b=this.gl,k=this.shader,T=this.vao;k.bind(),k.uniforms={model:w.model||h,view:w.view||h,projection:w.projection||h,clipBounds:f(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(b.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},m.drawPick=function(w){if(this.vertexCount){var b=this.gl,k=this.pickShader,T=this.vao;k.bind(),k.uniforms={model:w.model||h,view:w.view||h,projection:w.projection||h,pickId:this.pickId,clipBounds:f(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(b.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},m.update=function(w){var b,k;this.dirty=!0;var T=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],A=[],I=[],D=0,S=0,C=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=w.position||w.positions;if(R){var F=w.color||w.colors||[0,0,0,1],H=w.lineWidth||1,U=!1;e:for(b=1;b<R.length;++b){var X,Z,Y,W=R[b-1],te=R[b];for(A.push(D),I.push(W.slice()),k=0;k<3;++k){if(isNaN(W[k])||isNaN(te[k])||!isFinite(W[k])||!isFinite(te[k])){if(!T&&L.length>0){for(var z=0;z<24;++z)L.push(L[L.length-12]);S+=2,U=!0}continue e}C[0][k]=Math.min(C[0][k],W[k],te[k]),C[1][k]=Math.max(C[1][k],W[k],te[k])}Array.isArray(F[0])?(X=F.length>b-1?F[b-1]:F.length>0?F[F.length-1]:[0,0,0,1],Z=F.length>b?F[b]:F.length>0?F[F.length-1]:[0,0,0,1]):X=Z=F,3===X.length&&(X=[X[0],X[1],X[2],1]),3===Z.length&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0),Y=Array.isArray(H)?H.length>b-1?H[b-1]:H.length>0?H[H.length-1]:[0,0,0,1]:H;var N=D;if(D+=v(W,te),U){for(k=0;k<2;++k)L.push(W[0],W[1],W[2],te[0],te[1],te[2],N,Y,X[0],X[1],X[2],X[3]);S+=2,U=!1}L.push(W[0],W[1],W[2],te[0],te[1],te[2],N,Y,X[0],X[1],X[2],X[3],W[0],W[1],W[2],te[0],te[1],te[2],N,-Y,X[0],X[1],X[2],X[3],te[0],te[1],te[2],W[0],W[1],W[2],D,-Y,Z[0],Z[1],Z[2],Z[3],te[0],te[1],te[2],W[0],W[1],W[2],D,Y,Z[0],Z[1],Z[2],Z[3]),S+=4}}if(this.buffer.update(L),A.push(D),I.push(R[R.length-1].slice()),this.bounds=C,this.vertexCount=S,this.points=I,this.arcLength=A,"dashes"in w){var V=w.dashes.slice();for(V.unshift(0),b=1;b<V.length;++b)V[b]=V[b-1]+V[b];var Q=s(new Array(1024),[256,1,4]);for(b=0;b<256;++b){for(k=0;k<4;++k)Q.set(b,0,k,0);1&p.le(V,V[V.length-1]*b/255)?Q.set(b,0,0,0):Q.set(b,0,0,255)}this.texture.setPixels(Q)}},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},m.pick=function(w){if(!w||w.id!==this.pickId)return null;var R,F,H,b=(R=w.value[0],F=w.value[1],H=w.value[2],o[0]=0,o[1]=H,o[2]=F,o[3]=R,n[0]),k=p.le(this.arcLength,b);if(k<0)return null;if(k===this.arcLength.length-1)return new l(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),k);for(var T=this.points[k],L=this.points[Math.min(k+1,this.points.length-1)],A=(b-this.arcLength[k])/(this.arcLength[k+1]-this.arcLength[k]),I=1-A,D=[0,0,0],S=0;S<3;++S)D[S]=I*T[S]+A*L[S];var C=Math.min(A<.5?k:k+1,this.points.length-1);return new l(b,D,C,this.points[C])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(g,_,t){_.exports=function(e){var i=new Float32Array(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}},{}],93:[function(g,_,t){_.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(g,_,t){_.exports=function(e){var i=e[0],r=e[1],o=e[2],n=e[3],p=e[4],s=e[5],a=e[6],c=e[7],u=e[8],h=e[9],v=e[10],f=e[11],l=e[12],x=e[13],m=e[14],w=e[15];return(i*s-r*p)*(v*w-f*m)-(i*a-o*p)*(h*w-f*x)+(i*c-n*p)*(h*m-v*x)+(r*a-o*s)*(u*w-f*l)-(r*c-n*s)*(u*m-v*l)+(o*c-n*a)*(u*x-h*l)}},{}],95:[function(g,_,t){_.exports=function(e,i){var r=i[0],o=i[1],n=i[2],p=i[3],s=r+r,a=o+o,c=n+n,u=r*s,h=o*s,v=o*a,f=n*s,l=n*a,x=n*c,m=p*s,w=p*a,b=p*c;return e[0]=1-v-x,e[1]=h+b,e[2]=f-w,e[3]=0,e[4]=h-b,e[5]=1-u-x,e[6]=l+m,e[7]=0,e[8]=f+w,e[9]=l-m,e[10]=1-u-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2],s=i[3],a=o+o,c=n+n,u=p+p,h=o*a,v=o*c,f=o*u,l=n*c,x=n*u,m=p*u,w=s*a,b=s*c,k=s*u;return e[0]=1-(l+m),e[1]=v+k,e[2]=f-b,e[3]=0,e[4]=v-k,e[5]=1-(h+m),e[6]=x+w,e[7]=0,e[8]=f+b,e[9]=x-w,e[10]=1-(h+l),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},{}],97:[function(g,_,t){_.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(g,_,t){_.exports=function(e,i){var r=i[0],o=i[1],n=i[2],p=i[3],s=i[4],a=i[5],c=i[6],u=i[7],h=i[8],v=i[9],f=i[10],l=i[11],x=i[12],m=i[13],w=i[14],b=i[15],k=r*a-o*s,T=r*c-n*s,L=r*u-p*s,A=o*c-n*a,I=o*u-p*a,D=n*u-p*c,S=h*m-v*x,C=h*w-f*x,R=h*b-l*x,F=v*w-f*m,H=v*b-l*m,U=f*b-l*w,X=k*U-T*H+L*F+A*R-I*C+D*S;return X?(e[0]=(a*U-c*H+u*F)*(X=1/X),e[1]=(n*H-o*U-p*F)*X,e[2]=(m*D-w*I+b*A)*X,e[3]=(f*I-v*D-l*A)*X,e[4]=(c*R-s*U-u*C)*X,e[5]=(r*U-n*R+p*C)*X,e[6]=(w*L-x*D-b*T)*X,e[7]=(h*D-f*L+l*T)*X,e[8]=(s*H-a*R+u*S)*X,e[9]=(o*R-r*H-p*S)*X,e[10]=(x*I-m*L+b*k)*X,e[11]=(v*L-h*I-l*k)*X,e[12]=(a*C-s*F-c*S)*X,e[13]=(r*F-o*C+n*S)*X,e[14]=(m*T-x*A-w*k)*X,e[15]=(h*A-v*T+f*k)*X,e):null}},{}],99:[function(g,_,t){var e=g("./identity");_.exports=function(i,r,o,n){var p,s,a,c,u,h,v,f,l,x,m=r[0],w=r[1],b=r[2],k=n[0],T=n[1],L=n[2],A=o[0],I=o[1],D=o[2];return Math.abs(m-A)<1e-6&&Math.abs(w-I)<1e-6&&Math.abs(b-D)<1e-6?e(i):(v=m-A,f=w-I,l=b-D,p=T*(l*=x=1/Math.sqrt(v*v+f*f+l*l))-L*(f*=x),s=L*(v*=x)-k*l,a=k*f-T*v,(x=Math.sqrt(p*p+s*s+a*a))?(p*=x=1/x,s*=x,a*=x):(p=0,s=0,a=0),c=f*a-l*s,u=l*p-v*a,h=v*s-f*p,(x=Math.sqrt(c*c+u*u+h*h))?(c*=x=1/x,u*=x,h*=x):(c=0,u=0,h=0),i[0]=p,i[1]=c,i[2]=v,i[3]=0,i[4]=s,i[5]=u,i[6]=f,i[7]=0,i[8]=a,i[9]=h,i[10]=l,i[11]=0,i[12]=-(p*m+s*w+a*b),i[13]=-(c*m+u*w+h*b),i[14]=-(v*m+f*w+l*b),i[15]=1,i)}},{"./identity":97}],100:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2],s=i[3],a=i[4],c=i[5],u=i[6],h=i[7],v=i[8],f=i[9],l=i[10],x=i[11],m=i[12],w=i[13],b=i[14],k=i[15],T=r[0],L=r[1],A=r[2],I=r[3];return e[0]=T*o+L*a+A*v+I*m,e[1]=T*n+L*c+A*f+I*w,e[2]=T*p+L*u+A*l+I*b,e[3]=T*s+L*h+A*x+I*k,e[4]=(T=r[4])*o+(L=r[5])*a+(A=r[6])*v+(I=r[7])*m,e[5]=T*n+L*c+A*f+I*w,e[6]=T*p+L*u+A*l+I*b,e[7]=T*s+L*h+A*x+I*k,e[8]=(T=r[8])*o+(L=r[9])*a+(A=r[10])*v+(I=r[11])*m,e[9]=T*n+L*c+A*f+I*w,e[10]=T*p+L*u+A*l+I*b,e[11]=T*s+L*h+A*x+I*k,e[12]=(T=r[12])*o+(L=r[13])*a+(A=r[14])*v+(I=r[15])*m,e[13]=T*n+L*c+A*f+I*w,e[14]=T*p+L*u+A*l+I*b,e[15]=T*s+L*h+A*x+I*k,e}},{}],101:[function(g,_,t){_.exports=function(e,i,r,o,n,p,s){var a=1/(i-r),c=1/(o-n),u=1/(p-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(i+r)*a,e[13]=(n+o)*c,e[14]=(s+p)*u,e[15]=1,e}},{}],102:[function(g,_,t){_.exports=function(e,i,r,o,n){var p=1/Math.tan(i/2),s=1/(o-n);return e[0]=p/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+o)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*o*s,e[15]=0,e}},{}],103:[function(g,_,t){_.exports=function(e,i,r,o){var n,p,s,a,c,u,h,v,f,l,x,m,w,b,k,T,L,A,I,D,S,C,R,F,H=o[0],U=o[1],X=o[2],Z=Math.sqrt(H*H+U*U+X*X);return Math.abs(Z)<1e-6?null:(H*=Z=1/Z,U*=Z,X*=Z,n=Math.sin(r),p=Math.cos(r),c=i[1],u=i[2],h=i[3],f=i[5],l=i[6],x=i[7],w=i[9],b=i[10],k=i[11],I=H*U*(s=1-p)-X*n,D=U*U*s+p,S=X*U*s+H*n,C=H*X*s+U*n,R=U*X*s-H*n,F=X*X*s+p,e[0]=(a=i[0])*(T=H*H*s+p)+(v=i[4])*(L=U*H*s+X*n)+(m=i[8])*(A=X*H*s-U*n),e[1]=c*T+f*L+w*A,e[2]=u*T+l*L+b*A,e[3]=h*T+x*L+k*A,e[4]=a*I+v*D+m*S,e[5]=c*I+f*D+w*S,e[6]=u*I+l*D+b*S,e[7]=h*I+x*D+k*S,e[8]=a*C+v*R+m*F,e[9]=c*C+f*R+w*F,e[10]=u*C+l*R+b*F,e[11]=h*C+x*R+k*F,i!==e&&(e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e)}},{}],104:[function(g,_,t){_.exports=function(e,i,r){var o=Math.sin(r),n=Math.cos(r),p=i[4],s=i[5],a=i[6],c=i[7],u=i[8],h=i[9],v=i[10],f=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=p*n+u*o,e[5]=s*n+h*o,e[6]=a*n+v*o,e[7]=c*n+f*o,e[8]=u*n-p*o,e[9]=h*n-s*o,e[10]=v*n-a*o,e[11]=f*n-c*o,e}},{}],105:[function(g,_,t){_.exports=function(e,i,r){var o=Math.sin(r),n=Math.cos(r),p=i[0],s=i[1],a=i[2],c=i[3],u=i[8],h=i[9],v=i[10],f=i[11];return i!==e&&(e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=p*n-u*o,e[1]=s*n-h*o,e[2]=a*n-v*o,e[3]=c*n-f*o,e[8]=p*o+u*n,e[9]=s*o+h*n,e[10]=a*o+v*n,e[11]=c*o+f*n,e}},{}],106:[function(g,_,t){_.exports=function(e,i,r){var o=Math.sin(r),n=Math.cos(r),p=i[0],s=i[1],a=i[2],c=i[3],u=i[4],h=i[5],v=i[6],f=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=p*n+u*o,e[1]=s*n+h*o,e[2]=a*n+v*o,e[3]=c*n+f*o,e[4]=u*n-p*o,e[5]=h*n-s*o,e[6]=v*n-a*o,e[7]=f*n-c*o,e}},{}],107:[function(g,_,t){_.exports=function(e,i,r){var o=r[0],n=r[1],p=r[2];return e[0]=i[0]*o,e[1]=i[1]*o,e[2]=i[2]*o,e[3]=i[3]*o,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=i[7]*n,e[8]=i[8]*p,e[9]=i[9]*p,e[10]=i[10]*p,e[11]=i[11]*p,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e}},{}],108:[function(g,_,t){_.exports=function(e,i,r){var o,n,p,s,a,c,u,h,v,f,l,x,m=r[0],w=r[1],b=r[2];return i===e?(e[12]=i[0]*m+i[4]*w+i[8]*b+i[12],e[13]=i[1]*m+i[5]*w+i[9]*b+i[13],e[14]=i[2]*m+i[6]*w+i[10]*b+i[14],e[15]=i[3]*m+i[7]*w+i[11]*b+i[15]):(n=i[1],p=i[2],s=i[3],a=i[4],c=i[5],u=i[6],h=i[7],v=i[8],f=i[9],l=i[10],x=i[11],e[0]=o=i[0],e[1]=n,e[2]=p,e[3]=s,e[4]=a,e[5]=c,e[6]=u,e[7]=h,e[8]=v,e[9]=f,e[10]=l,e[11]=x,e[12]=o*m+a*w+v*b+i[12],e[13]=n*m+c*w+f*b+i[13],e[14]=p*m+u*w+l*b+i[14],e[15]=s*m+h*w+x*b+i[15]),e}},{}],109:[function(g,_,t){_.exports=function(e,i){if(e===i){var r=i[1],o=i[2],n=i[3],p=i[6],s=i[7],a=i[11];e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=r,e[6]=i[9],e[7]=i[13],e[8]=o,e[9]=p,e[11]=i[14],e[12]=n,e[13]=s,e[14]=a}else e[0]=i[0],e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=i[1],e[5]=i[5],e[6]=i[9],e[7]=i[13],e[8]=i[2],e[9]=i[6],e[10]=i[10],e[11]=i[14],e[12]=i[3],e[13]=i[7],e[14]=i[11],e[15]=i[15];return e}},{}],110:[function(g,_,t){"use strict";var e=g("barycentric"),i=g("polytope-closest-point/lib/closest_point_2d.js");function r(p,s){for(var a=[0,0,0,0],c=0;c<4;++c)for(var u=0;u<4;++u)a[u]+=p[4*c+u]*s[c];return a}function o(p,s,a,c,u){for(var h=r(c,r(a,r(s,[p[0],p[1],p[2],1]))),v=0;v<3;++v)h[v]/=h[3];return[.5*u[0]*(1+h[0]),.5*u[1]*(1-h[1])]}function n(p,s){for(var a=[0,0,0],c=0;c<p.length;++c)for(var u=p[c],h=s[c],v=0;v<3;++v)a[v]+=h*u[v];return a}_.exports=function(p,s,a,c,u,h){if(1===p.length)return[0,p[0].slice()];for(var v=new Array(p.length),f=0;f<p.length;++f)v[f]=o(p[f],a,c,u,h);var l=0,x=1/0;for(f=0;f<v.length;++f){for(var m=0,w=0;w<2;++w)m+=Math.pow(v[f][w]-s[w],2);m<x&&(x=m,l=f)}var b=function(T,L){if(2===T.length){for(var A=0,I=0,D=0;D<2;++D)A+=Math.pow(L[D]-T[0][D],2),I+=Math.pow(L[D]-T[1][D],2);return(A=Math.sqrt(A))+(I=Math.sqrt(I))<1e-6?[1,0]:[I/(A+I),A/(I+A)]}if(3===T.length){var S=[0,0];return i(T[0],T[1],T[2],L,S),e(T,S)}return[]}(v,s),k=0;for(f=0;f<3;++f){if(b[f]<-.001||b[f]>1.0001)return null;k+=b[f]}return Math.abs(k-1)>.001?null:[l,n(p,b),b]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(g,_,t){var e=g("glslify"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),r=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),u=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),v=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);t.meshShader={vertex:i,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.wireShader={vertex:o,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.pointShader={vertex:p,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},t.pickShader={vertex:a,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},t.pointPickShader={vertex:u,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},t.contourShader={vertex:h,fragment:v,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(g,_,t){"use strict";var e=g("gl-shader"),i=g("gl-buffer"),r=g("gl-vao"),o=g("gl-texture2d"),n=g("normals"),p=g("gl-mat4/multiply"),s=g("gl-mat4/invert"),a=g("ndarray"),c=g("colormap"),u=g("simplicial-complex-contour"),h=g("typedarray-pool"),v=g("./lib/shaders"),f=g("./lib/closest-point"),l=v.meshShader,x=v.wireShader,m=v.pointShader,w=v.pickShader,b=v.pointPickShader,k=v.contourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(U,X,Z,Y,W,te,z,N,V,Q,j,J,K,re,ie,ce,se,de,ue,ge,be,Te,we,Le,fe,ve,Me){this.gl=U,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=Z,this.lineShader=Y,this.pointShader=W,this.pickShader=te,this.pointPickShader=z,this.contourShader=N,this.trianglePositions=V,this.triangleColors=j,this.triangleNormals=K,this.triangleUVs=J,this.triangleIds=Q,this.triangleVAO=re,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ie,this.edgeColors=se,this.edgeUVs=de,this.edgeIds=ce,this.edgeVAO=ue,this.edgeCount=0,this.pointPositions=ge,this.pointColors=Te,this.pointUVs=we,this.pointSizes=Le,this.pointIds=be,this.pointVAO=fe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ve,this.contourVAO=Me,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=T,this._view=T,this._projection=T,this._resolution=[1,1]}var A=L.prototype;function I(U,X){if(!X||!X.length)return 1;for(var Z=0;Z<X.length;++Z){if(X.length<2)return 1;if(X[Z][0]===U)return X[Z][1];if(X[Z][0]>U&&Z>0){var Y=(X[Z][0]-U)/(X[Z][0]-X[Z-1][0]);return X[Z][1]*(1-Y)+Y*X[Z-1][1]}}return 1}function D(U){var X=e(U,l.vertex,l.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function S(U){var X=e(U,x.vertex,x.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function C(U){var X=e(U,m.vertex,m.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function R(U){var X=e(U,w.vertex,w.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function F(U){var X=e(U,b.vertex,b.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function H(U){var X=e(U,k.vertex,k.fragment);return X.attributes.position.location=0,X}A.isOpaque=function(){return!this.hasAlpha},A.isTransparent=function(){return this.hasAlpha},A.pickSlots=1,A.setPickBase=function(U){this.pickId=U},A.highlight=function(U){if(U&&this.contourEnable){for(var X=u(this.cells,this.intensity,U.intensity),Z=X.cells,Y=X.vertexIds,W=X.vertexWeights,te=Z.length,z=h.mallocFloat32(6*te),N=0,V=0;V<te;++V)for(var Q=Z[V],j=0;j<2;++j){var J=Q[0];2===Q.length&&(J=Q[j]);for(var ie=W[J],ce=1-ie,se=this.positions[Y[J][0]],de=this.positions[Y[J][1]],ue=0;ue<3;++ue)z[N++]=ie*se[ue]+ce*de[ue]}this.contourCount=N/3|0,this.contourPositions.update(z.subarray(0,N)),h.free(z)}else this.contourCount=0},A.update=function(U){U=U||{};var X=this.gl;this.dirty=!0,"contourEnable"in U&&(this.contourEnable=U.contourEnable),"contourColor"in U&&(this.contourColor=U.contourColor),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"lightPosition"in U&&(this.lightPosition=U.lightPosition),this.hasAlpha=!1,"opacity"in U&&(this.opacity=U.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in U&&(this.opacityscale=U.opacityscale,this.hasAlpha=!0),"ambient"in U&&(this.ambientLight=U.ambient),"diffuse"in U&&(this.diffuseLight=U.diffuse),"specular"in U&&(this.specularLight=U.specular),"roughness"in U&&(this.roughness=U.roughness),"fresnel"in U&&(this.fresnel=U.fresnel),U.texture?(this.texture.dispose(),this.texture=o(X,U.texture)):U.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(function(nr,Ue){for(var We=c({colormap:nr,nshades:256,format:"rgba"}),Be=new Uint8Array(1024),Qe=0;Qe<256;++Qe){for(var Ae=We[Qe],De=0;De<3;++De)Be[4*Qe+De]=Ae[De];Be[4*Qe+3]=Ue?255*I(Qe/255,Ue):255*Ae[3]}return a(Be,[256,256,4],[4,0,1])}(U.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=U.cells,Y=U.positions;if(Y&&Z){var W=[],te=[],z=[],N=[],V=[],Q=[],j=[],J=[],K=[],re=[],ie=[],ce=[],se=[],de=[];this.cells=Z,this.positions=Y;var ue=U.vertexNormals,ge=U.cellNormals,be=void 0===U.vertexNormalsEpsilon?1e-6:U.vertexNormalsEpsilon;U.useFacetNormals&&!ge&&(ge=n.faceNormals(Z,Y,void 0===U.faceNormalsEpsilon?1e-6:U.faceNormalsEpsilon)),ge||ue||(ue=n.vertexNormals(Z,Y,be));var we=U.vertexColors,Le=U.cellColors,fe=U.meshColor||[1,1,1,1],ve=U.vertexUVs,Me=U.vertexIntensity,ke=U.cellUVs,Ce=U.cellIntensity,Pe=1/0,Fe=-1/0;if(!ve&&!ke)if(Me)if(U.vertexIntensityBounds)Pe=+U.vertexIntensityBounds[0],Fe=+U.vertexIntensityBounds[1];else for(var qe=0;qe<Me.length;++qe){var rt=Me[qe];Pe=Math.min(Pe,rt),Fe=Math.max(Fe,rt)}else if(Ce)if(U.cellIntensityBounds)Pe=+U.cellIntensityBounds[0],Fe=+U.cellIntensityBounds[1];else for(qe=0;qe<Ce.length;++qe)rt=Ce[qe],Pe=Math.min(Pe,rt),Fe=Math.max(Fe,rt);else for(qe=0;qe<Y.length;++qe)rt=Y[qe][2],Pe=Math.min(Pe,rt),Fe=Math.max(Fe,rt);this.intensity=Me||Ce||function(nr){for(var Ue=nr.length,We=new Array(Ue),Be=0;Be<Ue;++Be)We[Be]=nr[Be][2];return We}(Y),this.pickVertex=!(Ce||Le);var ze=U.pointSizes,He=U.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],qe=0;qe<Y.length;++qe)for(var Xe=Y[qe],Je=0;Je<3;++Je)!isNaN(Xe[Je])&&isFinite(Xe[Je])&&(this.bounds[0][Je]=Math.min(this.bounds[0][Je],Xe[Je]),this.bounds[1][Je]=Math.max(this.bounds[1][Je],Xe[Je]));var at=0,pt=0,xt=0;e:for(qe=0;qe<Z.length;++qe){var Ft=Z[qe];switch(Ft.length){case 1:for(Xe=Y[ot=Ft[0]],Je=0;Je<3;++Je)if(isNaN(Xe[Je])||!isFinite(Xe[Je]))continue e;re.push(Xe[0],Xe[1],Xe[2]),it=we?we[ot]:Le?Le[qe]:fe,this.opacityscale&&Me?te.push(it[0],it[1],it[2],this.opacity*I((Me[ot]-Pe)/(Fe-Pe),this.opacityscale)):3===it.length?ie.push(it[0],it[1],it[2],this.opacity):(ie.push(it[0],it[1],it[2],it[3]*this.opacity),it[3]<1&&(this.hasAlpha=!0)),ce.push((Et=ve?ve[ot]:Me?[(Me[ot]-Pe)/(Fe-Pe),0]:ke?ke[qe]:Ce?[(Ce[qe]-Pe)/(Fe-Pe),0]:[(Xe[2]-Pe)/(Fe-Pe),0])[0],Et[1]),se.push(ze?ze[ot]:He),de.push(qe),xt+=1;break;case 2:for(Je=0;Je<2;++Je){Xe=Y[ot=Ft[Je]];for(var Dt=0;Dt<3;++Dt)if(isNaN(Xe[Dt])||!isFinite(Xe[Dt]))continue e}for(Je=0;Je<2;++Je)Xe=Y[ot=Ft[Je]],Q.push(Xe[0],Xe[1],Xe[2]),it=we?we[ot]:Le?Le[qe]:fe,this.opacityscale&&Me?te.push(it[0],it[1],it[2],this.opacity*I((Me[ot]-Pe)/(Fe-Pe),this.opacityscale)):3===it.length?j.push(it[0],it[1],it[2],this.opacity):(j.push(it[0],it[1],it[2],it[3]*this.opacity),it[3]<1&&(this.hasAlpha=!0)),J.push((Et=ve?ve[ot]:Me?[(Me[ot]-Pe)/(Fe-Pe),0]:ke?ke[qe]:Ce?[(Ce[qe]-Pe)/(Fe-Pe),0]:[(Xe[2]-Pe)/(Fe-Pe),0])[0],Et[1]),K.push(qe);pt+=1;break;case 3:for(Je=0;Je<3;++Je)for(Xe=Y[ot=Ft[Je]],Dt=0;Dt<3;++Dt)if(isNaN(Xe[Dt])||!isFinite(Xe[Dt]))continue e;for(Je=0;Je<3;++Je){var ot,it,Et,Xt;Xe=Y[ot=Ft[2-Je]],W.push(Xe[0],Xe[1],Xe[2]),(it=we?we[ot]:Le?Le[qe]:fe)?this.opacityscale&&Me?te.push(it[0],it[1],it[2],this.opacity*I((Me[ot]-Pe)/(Fe-Pe),this.opacityscale)):3===it.length?te.push(it[0],it[1],it[2],this.opacity):(te.push(it[0],it[1],it[2],it[3]*this.opacity),it[3]<1&&(this.hasAlpha=!0)):te.push(.5,.5,.5,1),N.push((Et=ve?ve[ot]:Me?[(Me[ot]-Pe)/(Fe-Pe),0]:ke?ke[qe]:Ce?[(Ce[qe]-Pe)/(Fe-Pe),0]:[(Xe[2]-Pe)/(Fe-Pe),0])[0],Et[1]),z.push((Xt=ue?ue[ot]:ge[qe])[0],Xt[1],Xt[2]),V.push(qe)}at+=1}}this.pointCount=xt,this.edgeCount=pt,this.triangleCount=at,this.pointPositions.update(re),this.pointColors.update(ie),this.pointUVs.update(ce),this.pointSizes.update(se),this.pointIds.update(new Uint32Array(de)),this.edgePositions.update(Q),this.edgeColors.update(j),this.edgeUVs.update(J),this.edgeIds.update(new Uint32Array(K)),this.trianglePositions.update(W),this.triangleColors.update(te),this.triangleUVs.update(N),this.triangleNormals.update(z),this.triangleIds.update(new Uint32Array(V))}},A.drawTransparent=A.draw=function(U){for(var X=this.gl,Z=(U=U||{}).model||T,Y=U.view||T,W=U.projection||T,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],z=0;z<3;++z)te[0][z]=Math.max(te[0][z],this.clipBounds[0][z]),te[1][z]=Math.min(te[1][z],this.clipBounds[1][z]);var N={model:Z,view:Y,projection:W,inverseModel:T.slice(),clipBounds:te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};N.inverseModel=s(N.inverseModel,N.model),X.disable(X.CULL_FACE),this.texture.bind(0);var V=new Array(16);for(p(V,N.view,N.model),p(V,N.projection,V),s(V,V),z=0;z<3;++z)N.eyePosition[z]=V[12+z]/V[15];var Q,j=V[15];for(z=0;z<3;++z)j+=this.lightPosition[z]*V[4*z+3];for(z=0;z<3;++z){for(var J=V[12+z],K=0;K<3;++K)J+=V[4*K+z]*this.lightPosition[K];N.lightPosition[z]=J/j}this.triangleCount>0&&((Q=this.triShader).bind(),Q.uniforms=N,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((Q=this.lineShader).bind(),Q.uniforms=N,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((Q=this.pointShader).bind(),Q.uniforms=N,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((Q=this.contourShader).bind(),Q.uniforms=N,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind())},A.drawPick=function(U){for(var X=this.gl,Z=(U=U||{}).model||T,Y=U.view||T,W=U.projection||T,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],z=0;z<3;++z)te[0][z]=Math.max(te[0][z],this.clipBounds[0][z]),te[1][z]=Math.min(te[1][z],this.clipBounds[1][z]);this._model=[].slice.call(Z),this._view=[].slice.call(Y),this._projection=[].slice.call(W),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var N,V={model:Z,view:Y,projection:W,clipBounds:te,pickId:this.pickId/255};(N=this.pickShader).bind(),N.uniforms=V,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((N=this.pointPickShader).bind(),N.uniforms=V,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind())},A.pick=function(U){if(!U||U.id!==this.pickId)return null;for(var X=U.value[0]+256*U.value[1]+65536*U.value[2],Z=this.cells[X],Y=this.positions,W=new Array(Z.length),te=0;te<Z.length;++te)W[te]=Y[Z[te]];var z=U.coord[0],N=U.coord[1];if(!this.pickVertex){var V=this.positions[Z[0]],Q=this.positions[Z[1]],j=this.positions[Z[2]];return{_cellCenter:!0,position:[z,N],index:X,cell:Z,cellId:X,intensity:this.intensity[X],dataCoordinate:[(V[0]+Q[0]+j[0])/3,(V[1]+Q[1]+j[1])/3,(V[2]+Q[2]+j[2])/3]}}var K=f(W,[z*this.pixelRatio,this._resolution[1]-N*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!K)return null;var re=K[2],ie=0;for(te=0;te<Z.length;++te)ie+=re[te]*this.intensity[Z[te]];return{position:K[1],index:Z[K[0]],cell:Z,cellId:X,intensity:ie,dataCoordinate:this.positions[Z[K[0]]]}},A.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},_.exports=function(U,X){if(1===arguments.length&&(U=(X=U).gl),!(U.getExtension("OES_standard_derivatives")||U.getExtension("MOZ_OES_standard_derivatives")||U.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var Y=D(U),W=S(U),te=C(U),z=R(U),N=F(U),V=H(U),Q=o(U,a(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap(),Q.minFilter=U.LINEAR_MIPMAP_LINEAR,Q.magFilter=U.LINEAR;var j=i(U),J=i(U),K=i(U),re=i(U),ie=i(U),ce=r(U,[{buffer:j,type:U.FLOAT,size:3},{buffer:ie,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:J,type:U.FLOAT,size:4},{buffer:K,type:U.FLOAT,size:2},{buffer:re,type:U.FLOAT,size:3}]),se=i(U),de=i(U),ue=i(U),ge=i(U),be=r(U,[{buffer:se,type:U.FLOAT,size:3},{buffer:ge,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:de,type:U.FLOAT,size:4},{buffer:ue,type:U.FLOAT,size:2}]),Te=i(U),we=i(U),Le=i(U),fe=i(U),ve=i(U),Me=r(U,[{buffer:Te,type:U.FLOAT,size:3},{buffer:ve,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:we,type:U.FLOAT,size:4},{buffer:Le,type:U.FLOAT,size:2},{buffer:fe,type:U.FLOAT,size:1}]),ke=i(U),Pe=new L(U,Q,Y,W,te,z,N,V,j,ie,J,K,re,ce,se,ge,de,ue,be,Te,ve,we,Le,fe,Me,ke,r(U,[{buffer:ke,type:U.FLOAT,size:3}]));return Pe.update(X),Pe}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(g,_,t){"use strict";_.exports=function(a){var c=a.gl;return new o(a,e(c,[0,0,0,1,1,0,1,1]),i(c,r.boxVert,r.lineFrag))};var e=g("gl-buffer"),i=g("gl-shader"),r=g("./shaders");function o(a,c,u){this.plot=a,this.vbo=c,this.shader=u}var n,p,s=o.prototype;s.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},s.drawBox=(n=[0,0],p=[0,0],function(a,c,u,h,v){var l=this.shader,x=this.plot.gl;n[0]=a,n[1]=c,p[0]=u,p[1]=h,l.uniforms.lo=n,l.uniforms.hi=p,l.uniforms.color=v,x.drawArrays(x.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(g,_,t){"use strict";_.exports=function(f){var l=f.gl;return new n(f,e(l),i(l,o.gridVert,o.gridFrag),i(l,o.tickVert,o.gridFrag))};var e=g("gl-buffer"),i=g("gl-shader"),r=g("binary-search-bounds"),o=g("./shaders");function n(f,l,x,m){this.plot=f,this.vbo=l,this.shader=x,this.tickShader=m,this.ticks=[[],[]]}function p(f,l){return f-l}var s,a,c,u,h,f,l,x,m,w,b,v=n.prototype;v.draw=(s=[0,0],a=[0,0],c=[0,0],function(){for(var f=this.plot,l=this.vbo,x=this.shader,m=this.ticks,w=f.gl,b=f._tickBounds,k=f.dataBox,T=f.viewBox,L=f.gridLineWidth,A=f.gridLineColor,I=f.gridLineEnable,D=f.pixelRatio,S=0;S<2;++S){var C=b[S],F=.5*(k[S+2]+k[S]),H=k[S+2]-k[S];a[S]=2*(b[S+2]-C)/H,s[S]=2*(C-F)/H}x.bind(),l.bind(),x.attributes.dataCoord.pointer(),x.uniforms.dataShift=s,x.uniforms.dataScale=a;var U=0;for(S=0;S<2;++S){c[0]=c[1]=0,c[S]=1,x.uniforms.dataAxis=c,x.uniforms.lineWidth=L[S]/(T[S+2]-T[S])*D,x.uniforms.color=A[S];var X=6*m[S].length;I[S]&&X&&w.drawArrays(w.TRIANGLES,U,X),U+=X}}),v.drawTickMarks=(f=[0,0],l=[0,0],x=[1,0],m=[0,1],w=[0,0],b=[0,0],function(){for(var k=this.plot,T=this.vbo,L=this.tickShader,A=this.ticks,I=k.gl,D=k._tickBounds,S=k.dataBox,C=k.viewBox,R=k.pixelRatio,F=k.screenBox,H=F[2]-F[0],U=F[3]-F[1],X=C[2]-C[0],Z=C[3]-C[1],Y=0;Y<2;++Y){var W=D[Y],z=.5*(S[Y+2]+S[Y]),N=S[Y+2]-S[Y];l[Y]=2*(D[Y+2]-W)/N,f[Y]=2*(W-z)/N}l[0]*=X/H,f[0]*=X/H,l[1]*=Z/U,f[1]*=Z/U,L.bind(),T.bind(),L.attributes.dataCoord.pointer();var V=L.uniforms;V.dataShift=f,V.dataScale=l;var Q=k.tickMarkLength,j=k.tickMarkWidth,J=k.tickMarkColor,K=6*A[0].length,re=Math.min(r.ge(A[0],(S[0]-D[0])/(D[2]-D[0]),p),A[0].length),ie=Math.min(r.gt(A[0],(S[2]-D[0])/(D[2]-D[0]),p),A[0].length),ce=0+6*re,se=6*Math.max(0,ie-re),de=Math.min(r.ge(A[1],(S[1]-D[1])/(D[3]-D[1]),p),A[1].length),ue=Math.min(r.gt(A[1],(S[3]-D[1])/(D[3]-D[1]),p),A[1].length),ge=K+6*de,be=6*Math.max(0,ue-de);w[0]=2*(C[0]-Q[1])/H-1,w[1]=(C[3]+C[1])/U-1,b[0]=Q[1]*R/H,b[1]=j[1]*R/U,be&&(V.color=J[1],V.tickScale=b,V.dataAxis=m,V.screenOffset=w,I.drawArrays(I.TRIANGLES,ge,be)),w[0]=(C[2]+C[0])/H-1,w[1]=2*(C[1]-Q[0])/U-1,b[0]=j[0]*R/H,b[1]=Q[0]*R/U,se&&(V.color=J[0],V.tickScale=b,V.dataAxis=x,V.screenOffset=w,I.drawArrays(I.TRIANGLES,ce,se)),w[0]=2*(C[2]+Q[3])/H-1,w[1]=(C[3]+C[1])/U-1,b[0]=Q[3]*R/H,b[1]=j[3]*R/U,be&&(V.color=J[3],V.tickScale=b,V.dataAxis=m,V.screenOffset=w,I.drawArrays(I.TRIANGLES,ge,be)),w[0]=(C[2]+C[0])/H-1,w[1]=2*(C[3]+Q[2])/U-1,b[0]=j[2]*R/H,b[1]=Q[2]*R/U,se&&(V.color=J[2],V.tickScale=b,V.dataAxis=x,V.screenOffset=w,I.drawArrays(I.TRIANGLES,ce,se))}),v.update=(u=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1],function(f){for(var l=f.ticks,x=f.bounds,m=new Float32Array(18*(l[0].length+l[1].length)),w=0,b=[[],[]],k=0;k<2;++k)for(var T=b[k],L=l[k],A=x[k],I=x[k+2],D=0;D<L.length;++D){var S=(L[D].x-A)/(I-A);T.push(S);for(var C=0;C<6;++C)m[w++]=S,m[w++]=u[C],m[w++]=h[C]}this.ticks=b,this.vbo.update(m)}),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(g,_,t){"use strict";_.exports=function(a){var c=a.gl;return new o(a,e(c,[-1,-1,-1,1,1,-1,1,1]),i(c,r.lineVert,r.lineFrag))};var e=g("gl-buffer"),i=g("gl-shader"),r=g("./shaders");function o(a,c,u){this.plot=a,this.vbo=c,this.shader=u}var n,p,s=o.prototype;s.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},s.drawLine=(n=[0,0],p=[0,0],function(a,c,u,h,v,f){var l=this.plot,x=this.shader,m=l.gl;n[0]=a,n[1]=c,p[0]=u,p[1]=h,x.uniforms.start=n,x.uniforms.end=p,x.uniforms.width=v*l.pixelRatio,x.uniforms.color=f,m.drawArrays(m.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(g,_,t){"use strict";var e=g("glslify"),i=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);_.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:i,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:i,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:i,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(g,_,t){"use strict";_.exports=function(l){var x=l.gl;return new p(l,e(x),i(x,n.textVert,n.textFrag))};var e=g("gl-buffer"),i=g("gl-shader"),r=g("text-cache"),o=g("binary-search-bounds"),n=g("./shaders");function p(l,x,m){this.plot=l,this.vbo=x,this.shader=m,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s,a,c,u,h,v,l,x,f=p.prototype;f.drawTicks=(s=[0,0],a=[0,0],c=[0,0],function(l){var x=this.plot,m=this.shader,w=this.tickX[l],b=this.tickOffset[l],k=x.gl,T=x.viewBox,L=x.dataBox,A=x.screenBox,I=x.pixelRatio,D=x.tickEnable,S=x.tickPad,C=x.tickColor,R=x.tickAngle,F=x.labelEnable,H=x.labelPad,U=x.labelColor,X=x.labelAngle,Z=this.labelOffset[l],Y=this.labelCount[l],W=o.lt(w,L[l]),te=o.le(w,L[l+2]);s[0]=s[1]=0,s[l]=1,a[l]=(T[2+l]+T[l])/(A[2+l]-A[l])-1;var z=2/A[2+(1^l)]-A[1^l];a[1^l]=z*T[1^l]-1,D[l]&&(a[1^l]-=z*I*S[l],W<te&&b[te]>b[W]&&(m.uniforms.dataAxis=s,m.uniforms.screenOffset=a,m.uniforms.color=C[l],m.uniforms.angle=R[l],k.drawArrays(k.TRIANGLES,b[W],b[te]-b[W]))),F[l]&&Y&&(a[1^l]-=z*I*H[l],m.uniforms.dataAxis=c,m.uniforms.screenOffset=a,m.uniforms.color=U[l],m.uniforms.angle=X[l],k.drawArrays(k.TRIANGLES,Z,Y)),a[1^l]=z*T[2+(1^l)]-1,D[l+2]&&(a[1^l]+=z*I*S[l+2],W<te&&b[te]>b[W]&&(m.uniforms.dataAxis=s,m.uniforms.screenOffset=a,m.uniforms.color=C[l+2],m.uniforms.angle=R[l+2],k.drawArrays(k.TRIANGLES,b[W],b[te]-b[W]))),F[l+2]&&Y&&(a[1^l]+=z*I*H[l+2],m.uniforms.dataAxis=c,m.uniforms.screenOffset=a,m.uniforms.color=U[l+2],m.uniforms.angle=X[l+2],k.drawArrays(k.TRIANGLES,Z,Y))}),f.drawTitle=(l=[0,0],x=[0,0],function(){var m=this.plot,w=this.shader,b=m.gl,k=m.screenBox,T=m.titleCenter,L=m.titleAngle,A=m.titleColor,I=m.pixelRatio;if(this.titleCount){for(var D=0;D<2;++D)x[D]=2*(T[D]*I-k[D])/(k[2+D]-k[D])-1;w.bind(),w.uniforms.dataAxis=l,w.uniforms.screenOffset=x,w.uniforms.angle=L,w.uniforms.color=A,b.drawArrays(b.TRIANGLES,this.titleOffset,this.titleCount)}}),f.bind=(u=[0,0],h=[0,0],v=[0,0],function(){var l=this.plot,x=this.shader,m=l._tickBounds,w=l.dataBox,b=l.screenBox,k=l.viewBox;x.bind();for(var T=0;T<2;++T){var L=m[T],I=.5*(w[T+2]+w[T]),D=w[T+2]-w[T],C=k[T+2]-k[T],F=b[T+2]-b[T];h[T]=2*(m[T+2]-L)/D*C/F,u[T]=2*(L-I)/D*C/F}v[1]=2*l.pixelRatio/(b[3]-b[1]),v[0]=v[1]*(b[3]-b[1])/(b[2]-b[0]),x.uniforms.dataScale=h,x.uniforms.dataShift=u,x.uniforms.textScale=v,this.vbo.bind(),x.attributes.textCoordinate.pointer()}),f.update=function(l){var x,m,w,b,k,T=[],L=l.ticks,A=l.bounds;for(k=0;k<2;++k){var I=[Math.floor(T.length/3)],D=[-1/0],S=L[k];for(x=0;x<S.length;++x){var C=S[x],R=C.x,H=C.font||"sans-serif";b=C.fontSize||12;for(var U=1/(A[k+2]-A[k]),X=A[k],Z=C.text.split("\n"),Y=0;Y<Z.length;Y++)for(w=r(H,Z[Y]).data,m=0;m<w.length;m+=2)T.push(w[m]*b,-w[m+1]*b-Y*b*1.2,(R-X)*U);I.push(Math.floor(T.length/3)),D.push(R)}this.tickOffset[k]=I,this.tickX[k]=D}for(k=0;k<2;++k){for(this.labelOffset[k]=Math.floor(T.length/3),w=r(l.labelFont[k],l.labels[k],{textAlign:"center"}).data,b=l.labelSize[k],x=0;x<w.length;x+=2)T.push(w[x]*b,-w[x+1]*b,0);this.labelCount[k]=Math.floor(T.length/3)-this.labelOffset[k]}for(this.titleOffset=Math.floor(T.length/3),w=r(l.titleFont,l.title).data,b=l.titleSize,x=0;x<w.length;x+=2)T.push(w[x]*b,-w[x+1]*b,0);this.titleCount=Math.floor(T.length/3)-this.titleOffset,this.vbo.update(T)},f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(g,_,t){"use strict";_.exports=function(u){var h=u.gl,f=new p(h,e(h,[h.drawingBufferWidth,h.drawingBufferHeight]));return f.grid=i(f),f.text=r(f),f.line=o(f),f.box=n(f),f.update(u),f};var e=g("gl-select-static"),i=g("./lib/grid"),r=g("./lib/text"),o=g("./lib/line"),n=g("./lib/box");function p(u,h){this.gl=u,this.pickBuffer=h,this.screenBox=[0,0,u.drawingBufferWidth,u.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=p.prototype;function a(u){for(var h=u.slice(),v=0;v<h.length;++v)h[v]=h[v].slice();return h}function c(u,h){return u.x-h.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var u=this.gl,h=this.screenBox,v=this.viewBox,f=this.dataBox,l=this.pixelRatio,x=this.grid,m=this.line,w=this.text,b=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,u.bindFramebuffer(u.FRAMEBUFFER,null),u.enable(u.SCISSOR_TEST),u.disable(u.DEPTH_TEST),u.depthFunc(u.LESS),u.depthMask(!1),u.enable(u.BLEND),u.blendEquation(u.FUNC_ADD,u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),this.borderColor){u.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]);var k=this.borderColor;u.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT)}u.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),u.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]);var T=this.backgroundColor;u.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),u.clear(u.COLOR_BUFFER_BIT),x.draw();var L=this.zeroLineEnable,A=this.zeroLineColor,I=this.zeroLineWidth;if(L[0]||L[1]){m.bind();for(var D=0;D<2;++D)if(L[D]&&f[D]<=0&&f[D+2]>=0){var S=h[D]-f[D]*(h[D+2]-h[D])/(f[D+2]-f[D]);0===D?m.drawLine(S,h[1],S,h[3],I[D],A[D]):m.drawLine(h[0],S,h[2],S,I[D],A[D])}}for(D=0;D<b.length;++D)b[D].draw();u.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]),u.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),this.grid.drawTickMarks(),m.bind();var C=this.borderLineEnable,R=this.borderLineWidth,F=this.borderLineColor;for(C[1]&&m.drawLine(v[0],v[1]-.5*R[1]*l,v[0],v[3]+.5*R[3]*l,R[1],F[1]),C[0]&&m.drawLine(v[0]-.5*R[0]*l,v[1],v[2]+.5*R[2]*l,v[1],R[0],F[0]),C[3]&&m.drawLine(v[2],v[1]-.5*R[1]*l,v[2],v[3]+.5*R[3]*l,R[3],F[3]),C[2]&&m.drawLine(v[0]-.5*R[0]*l,v[3],v[2]+.5*R[2]*l,v[3],R[2],F[2]),w.bind(),D=0;D<2;++D)w.drawTicks(D);this.titleEnable&&w.drawTitle();var H=this.overlays;for(D=0;D<H.length;++D)H[D].draw();u.disable(u.SCISSOR_TEST),u.disable(u.BLEND),u.depthMask(!0)}},s.drawPick=function(){if(!this.static){var u=this.pickBuffer;this._pickTimeout=null,u.begin();for(var h=1,v=this.objects,f=0;f<v.length;++f)h=v[f].drawPick(h);u.end()}},s.pick=function(u,h){if(!this.static){var v=this.pixelRatio,f=this.pickPixelRatio,l=this.viewBox,x=0|Math.round((u-l[0]/v)*f),m=0|Math.round((h-l[1]/v)*f),w=this.pickBuffer.query(x,m,this.pickRadius);if(!w)return null;for(var b=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),k=this.objects,T=0;T<k.length;++T){var L=k[T].pick(x,m,b);if(L)return L}return null}},s.setScreenBox=function(u){var h=this.screenBox,v=this.pixelRatio;h[0]=0|Math.round(u[0]*v),h[1]=0|Math.round(u[1]*v),h[2]=0|Math.round(u[2]*v),h[3]=0|Math.round(u[3]*v),this.setDirty()},s.setDataBox=function(u){var h=this.dataBox;(h[0]!==u[0]||h[1]!==u[1]||h[2]!==u[2]||h[3]!==u[3])&&(h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],this.setDirty())},s.setViewBox=function(u){var h=this.pixelRatio,v=this.viewBox;v[0]=0|Math.round(u[0]*h),v[1]=0|Math.round(u[1]*h),v[2]=0|Math.round(u[2]*h),v[3]=0|Math.round(u[3]*h);var f=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((u[2]-u[0])*f),0|Math.round((u[3]-u[1])*f)],this.setDirty()},s.update=function(u){var h=this.gl;this.pixelRatio=(u=u||{}).pixelRatio||1;var v=this.pixelRatio;this.pickPixelRatio=Math.max(v,1),this.setScreenBox(u.screenBox||[0,0,h.drawingBufferWidth/v,h.drawingBufferHeight/v]),this.setViewBox(u.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/v,.125*(this.screenBox[3]-this.screenBox[1])/v,.875*(this.screenBox[2]-this.screenBox[0])/v,.875*(this.screenBox[3]-this.screenBox[1])/v]);var f=this.viewBox,l=(f[2]-f[0])/(f[3]-f[1]);this.setDataBox(u.dataBox||[-10,-10/l,10,10/l]),this.borderColor=!1!==u.borderColor&&(u.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(u.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(u.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(u.gridLineWidth||[1,1]).slice(),this.gridLineColor=a(u.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(u.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(u.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=a(u.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(u.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(u.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=a(u.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(u.titleCenter||[.5*(f[0]+f[2])/v,(f[3]+120)/v]).slice(),this.titleEnable=!("titleEnable"in u)||!!u.titleEnable,this.titleAngle=u.titleAngle||0,this.titleColor=(u.titleColor||[0,0,0,1]).slice(),this.labelPad=(u.labelPad||[15,15,15,15]).slice(),this.labelAngle=(u.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(u.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=a(u.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(u.tickPad||[15,15,15,15]).slice(),this.tickAngle=(u.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(u.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=a(u.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(u.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(u.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=a(u.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var x=u.ticks||[[],[]],m=this._tickBounds;m[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var w=0;w<2;++w){var b=x[w].slice(0);0!==b.length&&(b.sort(c),m[w]=Math.min(m[w],b[0].x),m[w+2]=Math.max(m[w+2],b[b.length-1].x))}this.grid.update({bounds:m,ticks:x}),this.text.update({bounds:m,ticks:x,labels:u.labels||["x","y"],labelSize:u.labelSize||[12,12],labelFont:u.labelFont||["sans-serif","sans-serif"],title:u.title||"",titleSize:u.titleSize||18,titleFont:u.titleFont||"sans-serif"}),this.static=!!u.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var u=this.objects.length-1;u>=0;--u)this.objects[u].dispose();for(this.objects.length=0,u=this.overlays.length-1;u>=0;--u)this.overlays[u].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(u){this.objects.indexOf(u)<0&&(this.objects.push(u),this.setDirty())},s.removeObject=function(u){for(var h=this.objects,v=0;v<h.length;++v)if(h[v]===u){h.splice(v,1),this.setDirty();break}},s.addOverlay=function(u){this.overlays.indexOf(u)<0&&(this.overlays.push(u),this.setOverlayDirty())},s.removeOverlay=function(u){for(var h=this.overlays,v=0;v<h.length;++v)if(h[v]===u){h.splice(v,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(g,_,t){"use strict";_.exports=function(s,a){s=s||document.body;var c=[.01,1/0];"distanceLimits"in(a=a||{})&&(c[0]=a.distanceLimits[0],c[1]=a.distanceLimits[1]),"zoomMin"in a&&(c[0]=a.zoomMin),"zoomMax"in a&&(c[1]=a.zoomMax);var u=i({center:a.center||[0,0,0],up:a.up||[0,1,0],eye:a.eye||[0,0,10],mode:a.mode||"orbit",distanceLimits:c}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0,f=s.clientWidth,l=s.clientHeight,x={keyBindingMode:"rotate",enableWheel:!0,view:u,element:s,delay:a.delay||16,rotateSpeed:a.rotateSpeed||1,zoomSpeed:a.zoomSpeed||1,translateSpeed:a.translateSpeed||1,flipX:!!a.flipX,flipY:!!a.flipY,modes:u.modes,_ortho:a._ortho||a.projection&&"orthographic"===a.projection.type||!1,tick:function(){var m=e(),w=this.delay,b=m-2*w;u.idle(m-w),u.recalcMatrix(b),u.flush(m-(100+2*w));for(var k=!0,T=u.computedMatrix,L=0;L<16;++L)k=k&&h[L]===T[L],h[L]=T[L];var A=s.clientWidth===f&&s.clientHeight===l;return f=s.clientWidth,l=s.clientHeight,k?!A:(v=Math.exp(u.computedRadius[0]),!0)},lookAt:function(m,w,b){u.lookAt(u.lastT(),m,w,b)},rotate:function(m,w,b){u.rotate(u.lastT(),m,w,b)},pan:function(m,w,b){u.pan(u.lastT(),m,w,b)},translate:function(m,w,b){u.translate(u.lastT(),m,w,b)}};return Object.defineProperties(x,{matrix:{get:function(){return u.computedMatrix},set:function(m){return u.setMatrix(u.lastT(),m),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(m){var w=u.computedUp.slice(),b=u.computedEye.slice(),k=u.computedCenter.slice();if(u.setMode(m),"turntable"===m){var T=e();u._active.lookAt(T,b,k,w),u._active.lookAt(T+500,b,k,[0,0,1]),u._active.flush(T)}return u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(m){return u.lookAt(u.lastT(),null,m),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(m){return u.lookAt(u.lastT(),m),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(m){return u.lookAt(u.lastT(),null,null,m),u.computedUp},enumerable:!0},distance:{get:function(){return v},set:function(m){return u.setDistance(u.lastT(),m),m},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(c)},set:function(m){return u.setDistanceLimits(m),m},enumerable:!0}}),s.addEventListener("contextmenu",function(m){return m.preventDefault(),!1}),x._lastX=-1,x._lastY=-1,x._lastMods={shift:!1,control:!1,alt:!1,meta:!1},x.enableMouseListeners=function(){function m(w,b,k,T){var L=x.keyBindingMode;if(!1!==L){var A="rotate"===L,I="pan"===L,D="zoom"===L,S=!!T.control,C=!!T.alt,R=!!T.shift,F=!!(1&w),H=!!(2&w),U=!!(4&w),X=1/s.clientHeight,Z=X*(b-x._lastX),Y=X*(k-x._lastY),W=x.flipX?1:-1,te=x.flipY?1:-1,z=Math.PI*x.rotateSpeed,N=e();if(-1!==x._lastX&&-1!==x._lastY&&((A&&F&&!S&&!C&&!R||F&&!S&&!C&&R)&&u.rotate(N,W*z*Z,-te*z*Y,0),(I&&F&&!S&&!C&&!R||H||F&&S&&!C&&!R)&&u.pan(N,-x.translateSpeed*Z*v,x.translateSpeed*Y*v,0),D&&F&&!S&&!C&&!R||U||F&&!S&&C&&!R)){var V=-x.zoomSpeed*Y/window.innerHeight*(N-u.lastT())*100;u.pan(N,0,0,v*(Math.exp(V)-1))}return x._lastX=b,x._lastY=k,x._lastMods=T,!0}}x.mouseListener=r(s,m),s.addEventListener("touchstart",function(w){var b=n(w.changedTouches[0],s);m(0,b[0],b[1],x._lastMods),m(1,b[0],b[1],x._lastMods)},!!p&&{passive:!0}),s.addEventListener("touchmove",function(w){var b=n(w.changedTouches[0],s);m(1,b[0],b[1],x._lastMods),w.preventDefault()},!!p&&{passive:!1}),s.addEventListener("touchend",function(w){m(0,x._lastX,x._lastY,x._lastMods)},!!p&&{passive:!0}),x.wheelListener=o(s,function(w,b){if(!1!==x.keyBindingMode&&x.enableWheel){var k=x.flipX?1:-1,T=x.flipY?1:-1,L=e();if(Math.abs(w)>Math.abs(b))u.rotate(L,0,0,-w*k*Math.PI*x.rotateSpeed/window.innerWidth);else if(!x._ortho){var A=-x.zoomSpeed*T*b/window.innerHeight*(L-u.lastT())/20;u.pan(L,0,0,v*(Math.exp(A)-1))}}},!0)},x.enableMouseListeners(),x};var e=g("right-now"),i=g("3d-view"),r=g("mouse-change"),o=g("mouse-wheel"),n=g("mouse-event-offset"),p=g("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(g,_,t){var e=g("glslify"),i=g("gl-shader"),r=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);_.exports=function(n){return i(n,r,o,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(g,_,t){"use strict";var e=g("./camera.js"),i=g("gl-axes3d"),r=g("gl-axes3d/properties"),o=g("gl-spikes3d"),n=g("gl-select-static"),p=g("gl-fbo"),s=g("a-big-triangle"),a=g("mouse-change"),c=g("gl-mat4/perspective"),u=g("gl-mat4/ortho"),h=g("./lib/shader"),v=g("is-mobile")({tablet:!0,featureDetect:!0});function f(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(m){var w=Math.round(Math.log(Math.abs(m))/Math.log(10));if(w<0){var b=Math.round(Math.pow(10,-w));return Math.ceil(m*b)/b}return w>0?(b=Math.round(Math.pow(10,w)),Math.ceil(m/b)*b):Math.ceil(m)}function x(m){return"boolean"!=typeof m||m}_.exports={createScene:function(m){(m=m||{}).camera=m.camera||{};var w=m.canvas;w||(w=document.createElement("canvas"),m.container?m.container.appendChild(w):document.body.appendChild(w));var b=m.gl;if(b||(m.glOptions&&(v=!!m.glOptions.preserveDrawingBuffer),b=function(ue,ge){var be=null;try{(be=ue.getContext("webgl",ge))||(be=ue.getContext("experimental-webgl",ge))}catch(Te){return null}return be}(w,m.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!b)throw new Error("webgl not supported");var k=m.bounds||[[-10,-10,-10],[10,10,10]],T=new f,L=p(b,b.drawingBufferWidth,b.drawingBufferHeight,{preferFloat:!v}),A=h(b),I=m.cameraObject&&!0===m.cameraObject._ortho||m.camera.projection&&"orthographic"===m.camera.projection.type||!1,D={eye:m.camera.eye||[2,0,0],center:m.camera.center||[0,0,0],up:m.camera.up||[0,1,0],zoomMin:m.camera.zoomMax||.1,zoomMax:m.camera.zoomMin||100,mode:m.camera.mode||"turntable",_ortho:I},S=m.axes||{},C=i(b,S);C.enable=!S.disable;var F=o(b,m.spikes||{}),H=[],U=[],X=[],Z=[],Y=!0,W=!0,N={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},V=(W=!0,[b.drawingBufferWidth,b.drawingBufferHeight]),Q=m.cameraObject||e(w,D),j={gl:b,contextLost:!1,pixelRatio:m.pixelRatio||1,canvas:w,selection:T,camera:Q,axes:C,axesPixels:null,spikes:F,bounds:k,objects:H,shape:V,aspect:m.aspectRatio||[1,1,1],pickRadius:m.pickRadius||10,zNear:m.zNear||.01,zFar:m.zFar||1e3,fovy:m.fovy||Math.PI/4,clearColor:m.clearColor||[0,0,0,0],autoResize:x(m.autoResize),autoBounds:x(m.autoBounds),autoScale:!!m.autoScale,autoCenter:x(m.autoCenter),clipToBounds:x(m.clipToBounds),snapToData:!!m.snapToData,onselect:m.onselect||null,onrender:m.onrender||null,onclick:m.onclick||null,cameraParams:N,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ue){this.aspect[0]=ue.x,this.aspect[1]=ue.y,this.aspect[2]=ue.z,W=!0},setBounds:function(ue,ge){this.bounds[0][ue]=ge.min,this.bounds[1][ue]=ge.max},setClearColor:function(ue){this.clearColor=ue},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},J=[b.drawingBufferWidth/j.pixelRatio|0,b.drawingBufferHeight/j.pixelRatio|0];function K(){if(!j._stopped&&j.autoResize){var ue=w.parentNode,ge=1,be=1;ue&&ue!==document.body?(ge=ue.clientWidth,be=ue.clientHeight):(ge=window.innerWidth,be=window.innerHeight);var Te=0|Math.ceil(ge*j.pixelRatio),we=0|Math.ceil(be*j.pixelRatio);if(Te!==w.width||we!==w.height){w.width=Te,w.height=we;var Le=w.style;Le.position=Le.position||"absolute",Le.left="0px",Le.top="0px",Le.width=ge+"px",Le.height=be+"px",Y=!0}}}function re(){for(var ue=H.length,ge=Z.length,be=0;be<ge;++be)X[be]=0;e:for(be=0;be<ue;++be){var Te=H[be],we=Te.pickSlots;if(we){for(var Le=0;Le<ge;++Le)if(X[Le]+we<255){U[be]=Le,Te.setPickBase(X[Le]+1),X[Le]+=we;continue e}var fe=n(b,V);U[be]=ge,Z.push(fe),X.push(we),Te.setPickBase(1),ge+=1}else U[be]=-1}for(;ge>0&&0===X[ge-1];)X.pop(),Z.pop().dispose()}function ie(){if(j.contextLost)return!0;b.isContextLost()&&(j.contextLost=!0,j.mouseListener.enabled=!1,j.selection.object=null,j.oncontextloss&&j.oncontextloss())}j.autoResize&&K(),window.addEventListener("resize",K),j.update=function(ue){j._stopped||(ue=ue||{},Y=!0,W=!0)},j.add=function(ue){j._stopped||(ue.axes=C,H.push(ue),U.push(-1),Y=!0,W=!0,re())},j.remove=function(ue){if(!j._stopped){var ge=H.indexOf(ue);ge<0||(H.splice(ge,1),U.pop(),Y=!0,W=!0,re())}},j.dispose=function(){if(!j._stopped&&(j._stopped=!0,window.removeEventListener("resize",K),w.removeEventListener("webglcontextlost",ie),j.mouseListener.enabled=!1,!j.contextLost)){C.dispose(),F.dispose();for(var ue=0;ue<H.length;++ue)H[ue].dispose();for(L.dispose(),ue=0;ue<Z.length;++ue)Z[ue].dispose();A.dispose(),b=null,C=null,F=null,H=[]}},j._mouseRotating=!1,j._prevButtons=0,j.enableMouseListeners=function(){j.mouseListener=a(w,function(ue,ge,be){if(!j._stopped){var Te=Z.length,we=H.length,Le=T.object;T.distance=1/0,T.mouse[0]=ge,T.mouse[1]=be,T.object=null,T.screen=null,T.dataCoordinate=T.dataPosition=null;var fe=!1;if(ue&&j._prevButtons)j._mouseRotating=!0;else{j._mouseRotating&&(W=!0),j._mouseRotating=!1;for(var ve=0;ve<Te;++ve){var Me=Z[ve].query(ge,J[1]-be-1,j.pickRadius);if(Me){if(Me.distance>T.distance)continue;for(var ke=0;ke<we;++ke){var Ce=H[ke];if(U[ke]===ve){var Pe=Ce.pick(Me);Pe&&(T.buttons=ue,T.screen=Me.coord,T.distance=Me.distance,T.object=Ce,T.index=Pe.distance,T.dataPosition=Pe.position,T.dataCoordinate=Pe.dataCoordinate,T.data=Pe,fe=!0)}}}}}Le&&Le!==T.object&&(Le.highlight&&Le.highlight(null),Y=!0),T.object&&(T.object.highlight&&T.object.highlight(T.data),Y=!0),(fe=fe||T.object!==Le)&&j.onselect&&j.onselect(T),1&ue&&!(1&j._prevButtons)&&j.onclick&&j.onclick(T),j._prevButtons=ue}})},w.addEventListener("webglcontextlost",ie);var ce=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],se=[ce[0].slice(),ce[1].slice()];function de(){if(!ie()){K();var ue=j.camera.tick();N.view=j.camera.matrix,Y=Y||ue,W=W||ue,C.pixelRatio=j.pixelRatio,F.pixelRatio=j.pixelRatio;var ge=H.length,be=ce[0],Te=ce[1];be[0]=be[1]=be[2]=1/0,Te[0]=Te[1]=Te[2]=-1/0;for(var we=0;we<ge;++we){(He=H[we]).pixelRatio=j.pixelRatio,He.axes=j.axes,Y=Y||!!He.dirty,W=W||!!He.dirty;var Le=He.bounds;if(Le)for(var fe=Le[0],ve=Le[1],Me=0;Me<3;++Me)be[Me]=Math.min(be[Me],fe[Me]),Te[Me]=Math.max(Te[Me],ve[Me])}var ke=j.bounds;if(j.autoBounds)for(Me=0;Me<3;++Me){if(Te[Me]<be[Me])be[Me]=-1,Te[Me]=1;else{be[Me]===Te[Me]&&(be[Me]-=1,Te[Me]+=1);var Ce=.05*(Te[Me]-be[Me]);be[Me]=be[Me]-Ce,Te[Me]=Te[Me]+Ce}ke[0][Me]=be[Me],ke[1][Me]=Te[Me]}var Pe=!1;for(Me=0;Me<3;++Me)Pe=Pe||se[0][Me]!==ke[0][Me]||se[1][Me]!==ke[1][Me],se[0][Me]=ke[0][Me],se[1][Me]=ke[1][Me];if(W=W||Pe,Y=Y||Pe){if(Pe){var Fe=[0,0,0];for(we=0;we<3;++we)Fe[we]=l((ke[1][we]-ke[0][we])/10);C.update(C.autoTicks?{bounds:ke,tickSpacing:Fe}:{bounds:ke})}var qe=b.drawingBufferWidth,rt=b.drawingBufferHeight;for(V[0]=qe,V[1]=rt,J[0]=0|Math.max(qe/j.pixelRatio,1),J[1]=0|Math.max(rt/j.pixelRatio,1),function(Xe,Je){var at=Xe.bounds,pt=Xe.cameraParams,xt=pt.projection,Ft=pt.model,it=Xe.zNear,Et=Xe.zFar,Xt=Xe.fovy,nr=Xe.gl.drawingBufferWidth/Xe.gl.drawingBufferHeight;Je?(u(xt,-nr,nr,-1,1,it,Et),pt._ortho=!0):(c(xt,Xt,nr,it,Et),pt._ortho=!1);for(var Ue=0;Ue<16;++Ue)Ft[Ue]=0;Ft[15]=1;var We=0;for(Ue=0;Ue<3;++Ue)We=Math.max(We,at[1][Ue]-at[0][Ue]);for(Ue=0;Ue<3;++Ue)Ft[5*Ue]=Xe.autoScale?Xe.aspect[Ue]/(at[1][Ue]-at[0][Ue]):1/We,Xe.autoCenter&&(Ft[12+Ue]=.5*-Ft[5*Ue]*(at[0][Ue]+at[1][Ue]))}(j,I),we=0;we<ge;++we)(He=H[we]).axesBounds=ke,j.clipToBounds&&(He.clipBounds=ke);T.object&&(F.position=j.snapToData?T.dataCoordinate:T.dataPosition,F.bounds=ke),W&&(W=!1,function(){if(!ie()){b.colorMask(!0,!0,!0,!0),b.depthMask(!0),b.disable(b.BLEND),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL);for(var Xe=H.length,Je=Z.length,at=0;at<Je;++at){var pt=Z[at];pt.shape=J,pt.begin();for(var xt=0;xt<Xe;++xt)if(U[xt]===at){var Ft=H[xt];Ft.drawPick&&(Ft.pixelRatio=1,Ft.drawPick(N))}pt.end()}}}()),j.axesPixels=r(j.axes,N,qe,rt),j.onrender&&j.onrender(),b.bindFramebuffer(b.FRAMEBUFFER,null),b.viewport(0,0,qe,rt),j.clearRGBA(),b.depthMask(!0),b.colorMask(!0,!0,!0,!0),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.disable(b.BLEND),b.disable(b.CULL_FACE);var ze=!1;for(C.enable&&(ze=ze||C.isTransparent(),C.draw(N)),F.axes=C,T.object&&F.draw(N),b.disable(b.CULL_FACE),we=0;we<ge;++we)(He=H[we]).axes=C,He.pixelRatio=j.pixelRatio,He.isOpaque&&He.isOpaque()&&He.draw(N),He.isTransparent&&He.isTransparent()&&(ze=!0);if(ze){for(L.shape=V,L.bind(),b.clear(b.DEPTH_BUFFER_BIT),b.colorMask(!1,!1,!1,!1),b.depthMask(!0),b.depthFunc(b.LESS),C.enable&&C.isTransparent()&&C.drawTransparent(N),we=0;we<ge;++we)(He=H[we]).isOpaque&&He.isOpaque()&&He.draw(N);for(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.colorMask(!0,!0,!0,!0),b.depthMask(!1),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),C.isTransparent()&&C.drawTransparent(N),we=0;we<ge;++we){var He;(He=H[we]).isTransparent&&He.isTransparent()&&He.drawTransparent(N)}b.bindFramebuffer(b.FRAMEBUFFER,null),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.disable(b.DEPTH_TEST),A.bind(),L.color[0].bind(0),A.uniforms.accumBuffer=0,s(b),b.disable(b.BLEND)}for(Y=!1,we=0;we<ge;++we)H[we].dirty=!1}}}return j.enableMouseListeners(),function ue(){j._stopped||j.contextLost||(de(),requestAnimationFrame(ue))}(),j.redraw=function(){j._stopped||(Y=!0,de())},j},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(g,_,t){var e=g("glslify");t.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),t.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),t.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),t.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(g,_,t){"use strict";var e=g("gl-shader"),i=g("gl-buffer"),r=g("typedarray-pool"),o=g("./lib/shader");function n(c,u,h,v,f){this.plot=c,this.offsetBuffer=u,this.pickBuffer=h,this.shader=v,this.pickShader=f,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}_.exports=function(c,u){var h=c.gl,m=new n(c,i(h),i(h),e(h,o.pointVertex,o.pointFragment),e(h,o.pickVertex,o.pickFragment));return m.update(u),c.addObject(m),m};var p,s,a=n.prototype;a.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},a.update=function(c){var u;function h(b,k){return b in c?c[b]:k}c=c||{},this.sizeMin=h("sizeMin",.5),this.sizeMax=h("sizeMax",20),this.color=h("color",[1,0,0,1]).slice(),this.areaRatio=h("areaRatio",1),this.borderColor=h("borderColor",[0,0,0,1]).slice(),this.blend=h("blend",!1);var v=c.positions.length>>>1,f=c.positions instanceof Float32Array,l=c.idToIndex instanceof Int32Array&&c.idToIndex.length>=v,x=c.positions,m=f?x:r.mallocFloat32(x.length),w=l?c.idToIndex:r.mallocInt32(v);if(f||m.set(x),!l)for(m.set(x),u=0;u<v;u++)w[u]=u;this.points=x,this.offsetBuffer.update(m),this.pickBuffer.update(w),f||r.free(m),l||r.free(w),this.pointCount=v,this.pickOffset=0},a.unifiedDraw=(p=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0],function(c){var u=void 0!==c,h=u?this.pickShader:this.shader,v=this.plot.gl,f=this.plot.dataBox;if(0===this.pointCount)return c;var l=f[2]-f[0],x=f[3]-f[1],m=function(T,L){var A,I=0,D=T.length>>>1;for(A=0;A<D;A++){var S=T[2*A],C=T[2*A+1];S>=L[0]&&S<=L[2]&&C>=L[1]&&C<=L[3]&&I++}return I}(this.points,f),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(m,.33333)));p[0]=2/l,p[4]=2/x,p[6]=-2*f[0]/l-1,p[7]=-2*f[1]/x-1,this.offsetBuffer.bind(),h.bind(),h.attributes.position.pointer(),h.uniforms.matrix=p,h.uniforms.color=this.color,h.uniforms.borderColor=this.borderColor,h.uniforms.pointCloud=w<5,h.uniforms.pointSize=w,h.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),u&&(s[0]=255&c,s[1]=c>>8&255,s[2]=c>>16&255,s[3]=c>>24&255,this.pickBuffer.bind(),h.attributes.pickId.pointer(v.UNSIGNED_BYTE),h.uniforms.pickOffset=s,this.pickOffset=c);var b=v.getParameter(v.BLEND),k=v.getParameter(v.DITHER);return b&&!this.blend&&v.disable(v.BLEND),k&&v.disable(v.DITHER),v.drawArrays(v.POINTS,0,this.pointCount),b&&!this.blend&&v.enable(v.BLEND),k&&v.enable(v.DITHER),c+this.pointCount}),a.draw=a.unifiedDraw,a.drawPick=a.unifiedDraw,a.pick=function(c,u,h){var v=this.pickOffset;if(h<v||h>=v+this.pointCount)return null;var l=h-v,x=this.points;return{object:this,pointId:l,dataCoord:[x[2*l],x[2*l+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(g,_,t){_.exports=function(e,i,r,o){var n,p,s,a,c,u=i[0],h=i[1],v=i[2],f=i[3],l=r[0],x=r[1],m=r[2],w=r[3];return(p=u*l+h*x+v*m+f*w)<0&&(p=-p,l=-l,x=-x,m=-m,w=-w),1-p>1e-6?(n=Math.acos(p),s=Math.sin(n),a=Math.sin((1-o)*n)/s,c=Math.sin(o*n)/s):(a=1-o,c=o),e[0]=a*u+c*l,e[1]=a*h+c*x,e[2]=a*v+c*m,e[3]=a*f+c*w,e}},{}],125:[function(g,_,t){"use strict";_.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(g,_,t){"use strict";var e=g("vectorize-text");_.exports=function(r,o,n){var p=i[o];if(p||(p=i[o]={}),r in p)return p[r];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},a=e(r,s);s.triangles=!1;var c,u,h=e(r,s);if(n&&1!==n){for(c=0;c<a.positions.length;++c)for(u=0;u<a.positions[c].length;++u)a.positions[c][u]/=n;for(c=0;c<h.positions.length;++c)for(u=0;u<h.positions[c].length;++u)h.positions[c][u]/=n}var v=[[1/0,1/0],[-1/0,-1/0]],f=h.positions.length;for(c=0;c<f;++c){var l=h.positions[c];for(u=0;u<2;++u)v[0][u]=Math.min(v[0][u],l[u]),v[1][u]=Math.max(v[1][u],l[u])}return p[r]=[a,h,v]};var i={}},{"vectorize-text":311}],127:[function(g,_,t){var e=g("gl-shader"),i=g("glslify"),r=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),n=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),a=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:r,fragment:p,attributes:a},u={vertex:o,fragment:p,attributes:a},h={vertex:n,fragment:p,attributes:a},v={vertex:r,fragment:s,attributes:a},f={vertex:o,fragment:s,attributes:a},l={vertex:n,fragment:s,attributes:a};function x(m,w){var b=e(m,w),k=b.attributes;return k.position.location=0,k.color.location=1,k.glyph.location=2,k.id.location=3,b}t.createPerspective=function(m){return x(m,c)},t.createOrtho=function(m){return x(m,u)},t.createProject=function(m){return x(m,h)},t.createPickPerspective=function(m){return x(m,v)},t.createPickOrtho=function(m){return x(m,f)},t.createPickProject=function(m){return x(m,l)}},{"gl-shader":132,glslify:231}],128:[function(g,_,t){"use strict";var e=g("is-string-blank"),i=g("gl-buffer"),r=g("gl-vao"),o=g("typedarray-pool"),n=g("gl-mat4/multiply"),p=g("./lib/shaders"),s=g("./lib/glyphs"),a=g("./lib/get-simple-string"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(X,Z){var Y=X[0],W=X[1],te=X[2],z=X[3];return X[0]=Z[0]*Y+Z[4]*W+Z[8]*te+Z[12]*z,X[1]=Z[1]*Y+Z[5]*W+Z[9]*te+Z[13]*z,X[2]=Z[2]*Y+Z[6]*W+Z[10]*te+Z[14]*z,X[3]=Z[3]*Y+Z[7]*W+Z[11]*te+Z[15]*z,X}function h(X,Z,Y,W){return u(W,W),u(W,W),u(W,W)}function v(X,Z){this.index=X,this.dataCoordinate=this.position=Z}function f(X){return!0===X||X>1?1:X}function l(X,Z,Y,W,te,z,N,V,Q,j,J,K){this.gl=X,this.pixelRatio=1,this.shader=Z,this.orthoShader=Y,this.projectShader=W,this.pointBuffer=te,this.colorBuffer=z,this.glyphBuffer=N,this.idBuffer=V,this.vao=Q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=j,this.pickOrthoShader=J,this.pickProjectShader=K,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}_.exports=function(X){var Z=X.gl,Y=p.createPerspective(Z),W=p.createOrtho(Z),te=p.createProject(Z),z=p.createPickPerspective(Z),N=p.createPickOrtho(Z),V=p.createPickProject(Z),Q=i(Z),j=i(Z),J=i(Z),K=i(Z),ie=new l(Z,Y,W,te,Q,j,J,K,r(Z,[{buffer:Q,size:3,type:Z.FLOAT},{buffer:j,size:4,type:Z.FLOAT},{buffer:J,size:2,type:Z.FLOAT},{buffer:K,size:4,type:Z.UNSIGNED_BYTE,normalized:!0}]),z,N,V);return ie.update(X),ie};var x=l.prototype;x.pickSlots=1,x.setPickBase=function(X){this.pickId=X},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&!this.projectHasAlpha)return!0;return!1};var m=[0,0],w=[0,0,0],b=[0,0,0],k=[0,0,0,1],T=[0,0,0,1],L=c.slice(),A=[0,0,0],I=[[0,0,0],[0,0,0]];function D(X){return X[0]=X[1]=X[2]=0,X}function S(X,Z){return X[0]=Z[0],X[1]=Z[1],X[2]=Z[2],X[3]=1,X}function C(X,Z,Y,W){return X[0]=Z[0],X[1]=Z[1],X[2]=Z[2],X[Y]=W,X}var F=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function H(X,Z,Y,W,te,z,N){var V=Y.gl;if((z===Y.projectHasAlpha||N)&&function(X,Z,Y,W){var te,z=Z.axesProject,N=Z.gl,V=X.uniforms,Q=Y.model||c,j=Y.view||c,J=Y.projection||c,K=Z.axesBounds,re=function(ke){for(var Ce=I,Pe=0;Pe<2;++Pe)for(var Fe=0;Fe<3;++Fe)Ce[Pe][Fe]=Math.max(Math.min(ke[Pe][Fe],1e8),-1e8);return Ce}(Z.clipBounds);te=Z.axes&&Z.axes.lastCubeProps?Z.axes.lastCubeProps.axis:[1,1,1],m[0]=2/N.drawingBufferWidth,m[1]=2/N.drawingBufferHeight,X.bind(),V.view=j,V.projection=J,V.screenSize=m,V.highlightId=Z.highlightId,V.highlightScale=Z.highlightScale,V.clipBounds=re,V.pickGroup=Z.pickId/255,V.pixelRatio=W;for(var ie=0;ie<3;++ie)if(z[ie]){V.scale=Z.projectScale[ie],V.opacity=Z.projectOpacity[ie];for(var ce=L,se=0;se<16;++se)ce[se]=0;for(se=0;se<4;++se)ce[5*se]=1;ce[5*ie]=0,ce[12+ie]=te[ie]<0?K[0][ie]:K[1][ie],n(ce,Q,ce),V.model=ce;var de=(ie+1)%3,ue=(ie+2)%3,ge=D(w),be=D(b);ge[de]=1,be[ue]=1;var Te=h(0,0,0,S(k,ge)),we=h(0,0,0,S(T,be));if(Math.abs(Te[1])>Math.abs(we[1])){var Le=Te;Te=we,we=Le,Le=ge,ge=be,be=Le;var fe=de;de=ue,ue=fe}Te[0]<0&&(ge[de]=-1),we[1]>0&&(be[ue]=-1);var ve=0,Me=0;for(se=0;se<4;++se)ve+=Math.pow(Q[4*de+se],2),Me+=Math.pow(Q[4*ue+se],2);ge[de]/=Math.sqrt(ve),be[ue]/=Math.sqrt(Me),V.axes[0]=ge,V.axes[1]=be,V.fragClipBounds[0]=C(A,re[0],ie,-1e8),V.fragClipBounds[1]=C(A,re[1],ie,1e8),Z.vao.bind(),Z.vao.draw(N.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(N.lineWidth(Z.lineWidth*W),Z.vao.draw(N.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}(Z,Y,W,te),z===Y.hasAlpha||N){X.bind();var Q=X.uniforms;Q.model=W.model||c,Q.view=W.view||c,Q.projection=W.projection||c,m[0]=2/V.drawingBufferWidth,m[1]=2/V.drawingBufferHeight,Q.screenSize=m,Q.highlightId=Y.highlightId,Q.highlightScale=Y.highlightScale,Q.fragClipBounds=F,Q.clipBounds=Y.axes.bounds,Q.opacity=Y.opacity,Q.pickGroup=Y.pickId/255,Q.pixelRatio=te,Y.vao.bind(),Y.vao.draw(V.TRIANGLES,Y.vertexCount),Y.lineWidth>0&&(V.lineWidth(Y.lineWidth*te),Y.vao.draw(V.LINES,Y.lineVertexCount,Y.vertexCount)),Y.vao.unbind()}}function U(X,Z,Y,W){var te;te=Array.isArray(X)?Z<X.length?X[Z]:void 0:X,te=a(te);var z=!0;e(te)&&(te="\u25bc",z=!1);var N=s(te,Y,W);return{mesh:N[0],lines:N[1],bounds:N[2],visible:z}}x.draw=function(X){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,X,this.pixelRatio,!1,!1)},x.drawTransparent=function(X){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,X,this.pixelRatio,!0,!1)},x.drawPick=function(X){H(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,X,1,!0,!0)},x.pick=function(X){if(!X||X.id!==this.pickId)return null;var Z=X.value[2]+(X.value[1]<<8)+(X.value[0]<<16);if(Z>=this.pointCount||Z<0)return null;var Y=this.points[Z],W=this._selectResult;W.index=Z;for(var te=0;te<3;++te)W.position[te]=W.dataCoordinate[te]=Y[te];return W},x.highlight=function(X){if(X){var Z=X.index;this.highlightId=[(255&Z)/255,(Z>>8&255)/255,(Z>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},x.update=function(X){if("perspective"in(X=X||{})&&(this.useOrtho=!X.perspective),"orthographic"in X&&(this.useOrtho=!!X.orthographic),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"project"in X)if(Array.isArray(X.project))this.axesProject=X.project;else{var Z=!!X.project;this.axesProject=[Z,Z,Z]}if("projectScale"in X)if(Array.isArray(X.projectScale))this.projectScale=X.projectScale.slice();else{var Y=+X.projectScale;this.projectScale=[Y,Y,Y]}if(this.projectHasAlpha=!1,"projectOpacity"in X){this.projectOpacity=Array.isArray(X.projectOpacity)?X.projectOpacity.slice():[Y=+X.projectOpacity,Y,Y];for(var W=0;W<3;++W)this.projectOpacity[W]=f(this.projectOpacity[W]),this.projectOpacity[W]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in X&&(this.opacity=f(X.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var te,z,N=X.position,V=X.font||"normal",Q=X.alignment||[0,0];if(2===Q.length)te=Q[0],z=Q[1];else for(te=[],z=[],W=0;W<Q.length;++W)te[W]=Q[W][0],z[W]=Q[W][1];var j=[1/0,1/0,1/0],J=[-1/0,-1/0,-1/0],K=X.glyph,re=X.color,ie=X.size,ce=X.angle,se=X.lineColor,de=-1,ue=0,ge=0,be=0;if(N.length){be=N.length;e:for(W=0;W<be;++W){for(var Te=N[W],we=0;we<3;++we)if(isNaN(Te[we])||!isFinite(Te[we]))continue e;var Le=(at=U(K,W,V,this.pixelRatio)).mesh,fe=at.lines,ve=at.bounds;ue+=3*Le.cells.length,ge+=2*fe.edges.length}}var Me=ue+ge,ke=o.mallocFloat(3*Me),Ce=o.mallocFloat(4*Me),Pe=o.mallocFloat(2*Me),Fe=o.mallocUint32(Me);if(Me>0){var qe=0,rt=ue,ze=[0,0,0,1],He=[0,0,0,1],Xe=Array.isArray(re)&&Array.isArray(re[0]),Je=Array.isArray(se)&&Array.isArray(se[0]);e:for(W=0;W<be;++W){for(de+=1,Te=N[W],we=0;we<3;++we){if(isNaN(Te[we])||!isFinite(Te[we]))continue e;J[we]=Math.max(J[we],Te[we]),j[we]=Math.min(j[we],Te[we])}Le=(at=U(K,W,V,this.pixelRatio)).mesh,fe=at.lines,ve=at.bounds;var at,pt=at.visible;if(pt)if(Array.isArray(re)){if(3===(xt=Xe?W<re.length?re[W]:[0,0,0,0]:re).length){for(we=0;we<3;++we)ze[we]=xt[we];ze[3]=1}else if(4===xt.length){for(we=0;we<4;++we)ze[we]=xt[we];!this.hasAlpha&&xt[3]<1&&(this.hasAlpha=!0)}}else ze[0]=ze[1]=ze[2]=0,ze[3]=1;else ze=[1,1,1,0];if(pt)if(Array.isArray(se)){var xt;if(3===(xt=Je?W<se.length?se[W]:[0,0,0,0]:se).length){for(we=0;we<3;++we)He[we]=xt[we];He[we]=1}else if(4===xt.length){for(we=0;we<4;++we)He[we]=xt[we];!this.hasAlpha&&xt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];var Ft=.5;pt?Array.isArray(ie)?Ft=W<ie.length?+ie[W]:12:ie?Ft=+ie:this.useOrtho&&(Ft=12):Ft=0;var Dt=0;Array.isArray(ce)?Dt=W<ce.length?+ce[W]:0:ce&&(Dt=+ce);var ot=Math.cos(Dt),it=Math.sin(Dt);for(Te=N[W],we=0;we<3;++we)J[we]=Math.max(J[we],Te[we]),j[we]=Math.min(j[we],Te[we]);var Et=te,Xt=z;Et=0,Array.isArray(te)?Et=W<te.length?te[W]:0:te&&(Et=te),Xt=0,Array.isArray(z)?Xt=W<z.length?z[W]:0:z&&(Xt=z);var nr=[Et*=Et>0?1-ve[0][0]:Et<0?1+ve[1][0]:1,Xt*=Xt>0?1-ve[0][1]:Xt<0?1+ve[1][1]:1],Ue=Le.cells||[],We=Le.positions||[];for(we=0;we<Ue.length;++we)for(var Be=Ue[we],Qe=0;Qe<3;++Qe){for(var Ae=0;Ae<3;++Ae)ke[3*qe+Ae]=Te[Ae];for(Ae=0;Ae<4;++Ae)Ce[4*qe+Ae]=ze[Ae];Fe[qe]=de;var De=We[Be[Qe]];Pe[2*qe]=Ft*(ot*De[0]-it*De[1]+nr[0]),Pe[2*qe+1]=Ft*(it*De[0]+ot*De[1]+nr[1]),qe+=1}for(Ue=fe.edges,We=fe.positions,we=0;we<Ue.length;++we)for(Be=Ue[we],Qe=0;Qe<2;++Qe){for(Ae=0;Ae<3;++Ae)ke[3*rt+Ae]=Te[Ae];for(Ae=0;Ae<4;++Ae)Ce[4*rt+Ae]=He[Ae];Fe[rt]=de,Pe[2*rt]=Ft*(ot*(De=We[Be[Qe]])[0]-it*De[1]+nr[0]),Pe[2*rt+1]=Ft*(it*De[0]+ot*De[1]+nr[1]),rt+=1}}}this.bounds=[j,J],this.points=N,this.pointCount=N.length,this.vertexCount=ue,this.lineVertexCount=ge,this.pointBuffer.update(ke),this.colorBuffer.update(Ce),this.glyphBuffer.update(Pe),this.idBuffer.update(Fe),o.free(ke),o.free(Ce),o.free(Pe),o.free(Fe)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(g,_,t){"use strict";var e=g("glslify");t.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),t.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(g,_,t){"use strict";var e=g("gl-shader"),i=g("gl-buffer"),r=g("./lib/shaders");function o(p,s,a){this.plot=p,this.boxBuffer=s,this.boxShader=a,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}_.exports=function(p,s){var a=p.gl,h=new o(p,i(a,[0,0,0,1,1,0,1,1]),e(a,r.boxVertex,r.boxFragment));return h.update(s),p.addOverlay(h),h};var n=o.prototype;n.draw=function(){if(this.enabled){var p=this.plot,s=this.selectBox,a=this.borderWidth,c=this.innerColor,u=this.outerColor,h=this.borderColor,v=p.box,f=p.screenBox,l=p.dataBox,x=p.viewBox,m=p.pixelRatio,w=(s[0]-l[0])*(x[2]-x[0])/(l[2]-l[0])+x[0],b=(s[1]-l[1])*(x[3]-x[1])/(l[3]-l[1])+x[1],k=(s[2]-l[0])*(x[2]-x[0])/(l[2]-l[0])+x[0],T=(s[3]-l[1])*(x[3]-x[1])/(l[3]-l[1])+x[1];if(w=Math.max(w,x[0]),b=Math.max(b,x[1]),k=Math.min(k,x[2]),T=Math.min(T,x[3]),!(k<w||T<b)){v.bind();var L=f[2]-f[0],A=f[3]-f[1];if(this.outerFill&&(v.drawBox(0,0,L,b,u),v.drawBox(0,b,w,T,u),v.drawBox(0,T,L,A,u),v.drawBox(k,b,L,T,u)),this.innerFill&&v.drawBox(w,b,k,T,c),a>0){var I=a*m;v.drawBox(w-I,b-I,k+I,b+I,h),v.drawBox(w-I,T-I,k+I,T+I,h),v.drawBox(w-I,b-I,w+I,T+I,h),v.drawBox(k-I,b-I,k+I,T+I,h)}}}},n.update=function(p){this.innerFill=!!(p=p||{}).innerFill,this.outerFill=!!p.outerFill,this.innerColor=(p.innerColor||[0,0,0,.5]).slice(),this.outerColor=(p.outerColor||[0,0,0,.5]).slice(),this.borderColor=(p.borderColor||[0,0,0,1]).slice(),this.borderWidth=p.borderWidth||0,this.selectBox=(p.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(g,_,t){"use strict";_.exports=function(a,c){var u=c[0],h=c[1];return new p(a,e(a,u,h,{}),i.mallocUint8(u*h*4))};var e=g("gl-fbo"),i=g("typedarray-pool"),r=g("ndarray"),o=g("bit-twiddle").nextPow2;function n(a,c,u,h,v){this.coord=[a,c],this.id=u,this.value=h,this.distance=v}function p(a,c,u){this.gl=a,this.fbo=c,this.buffer=u,this._readTimeout=null;var h=this;this._readCallback=function(){h.gl&&(c.bind(),a.readPixels(0,0,c.shape[0],c.shape[1],a.RGBA,a.UNSIGNED_BYTE,h.buffer),h._readTimeout=null)}}var s=p.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var c=this.fbo.shape[0],u=this.fbo.shape[1];if(u*c*4>this.buffer.length){i.free(this.buffer);for(var h=this.buffer=i.mallocUint8(o(u*c*4)),v=0;v<u*c*4;++v)h[v]=255}return a}}}),s.begin=function(){var a=this.gl;a&&(this.fbo.bind(),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))},s.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(a,c,u){if(!this.gl)return null;var h=this.fbo.shape.slice();a|=0,c|=0,"number"!=typeof u&&(u=1);var v=0|Math.min(Math.max(a-u,0),h[0]),f=0|Math.min(Math.max(a+u,0),h[0]),l=0|Math.min(Math.max(c-u,0),h[1]),x=0|Math.min(Math.max(c+u,0),h[1]);if(f<=v||x<=l)return null;var m=[f-v,x-l],w=r(this.buffer,[m[0],m[1],4],[4,4*h[0],1],4*(v+h[0]*l)),b=function(L,A,I){for(var D=1e8,S=-1,C=-1,R=L.shape[0],F=L.shape[1],H=0;H<R;H++)for(var U=0;U<F;U++){var X=L.get(H,U,0),Z=L.get(H,U,1),Y=L.get(H,U,2),W=L.get(H,U,3);if(X<255||Z<255||Y<255||W<255){var te=A-H,z=I-U,N=te*te+z*z;N<D&&(D=N,S=H,C=U)}}return[S,C,D]}(w.hi(m[0],m[1],1),u,u),k=b[0],T=b[1];return k<0||Math.pow(this.radius,2)<b[2]?null:new n(k+v|0,T+l|0,w.get(k,T,0),[w.get(k,T,1),w.get(k,T,2),w.get(k,T,3)],Math.sqrt(b[2]))},s.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(g,_,t){"use strict";var e=g("./lib/create-uniforms"),i=g("./lib/create-attributes"),r=g("./lib/reflect"),o=g("./lib/shader-cache"),n=g("./lib/runtime-reflect"),p=g("./lib/GLError");function s(u){this.gl=u,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var a=s.prototype;function c(u,h){return u.name<h.name?-1:1}a.bind=function(){var u;this.program||this._relink();var h=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),v=this.gl.lastAttribCount;if(h>v)for(u=v;u<h;u++)this.gl.enableVertexAttribArray(u);else if(v>h)for(u=h;u<v;u++)this.gl.disableVertexAttribArray(u);this.gl.lastAttribCount=h,this.gl.useProgram(this.program)},a.dispose=function(){for(var u=this.gl.lastAttribCount,h=0;h<u;h++)this.gl.disableVertexAttribArray(h);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},a.update=function(u,h,v,f){if(!h||1===arguments.length){var l=u;u=l.vertex,h=l.fragment,v=l.uniforms,f=l.attributes}var x=this,m=x.gl,w=x._vref;x._vref=o.shader(m,m.VERTEX_SHADER,u),w&&w.dispose(),x.vertShader=x._vref.shader;var b=this._fref;if(x._fref=o.shader(m,m.FRAGMENT_SHADER,h),b&&b.dispose(),x.fragShader=x._fref.shader,!v||!f){var k=m.createProgram();if(m.attachShader(k,x.fragShader),m.attachShader(k,x.vertShader),m.linkProgram(k),!m.getProgramParameter(k,m.LINK_STATUS)){var T=m.getProgramInfoLog(k);throw new p(T,"Error linking program:"+T)}v=v||n.uniforms(m,k),f=f||n.attributes(m,k),m.deleteProgram(k)}(f=f.slice()).sort(c);var L,A=[],I=[],D=[];for(L=0;L<f.length;++L){var S=f[L];if(S.type.indexOf("mat")>=0){for(var C=0|S.type.charAt(S.type.length-1),R=new Array(C),F=0;F<C;++F)R[F]=D.length,I.push(S.name+"["+F+"]"),"number"==typeof S.location?D.push(S.location+F):Array.isArray(S.location)&&S.location.length===C&&"number"==typeof S.location[F]?D.push(0|S.location[F]):D.push(-1);A.push({name:S.name,type:S.type,locations:R})}else A.push({name:S.name,type:S.type,locations:[D.length]}),I.push(S.name),D.push("number"==typeof S.location?0|S.location:-1)}var H=0;for(L=0;L<D.length;++L)if(D[L]<0){for(;D.indexOf(H)>=0;)H+=1;D[L]=H}var U=new Array(v.length);function X(){x.program=o.program(m,x._vref,x._fref,I,D);for(var Z=0;Z<v.length;++Z)U[Z]=m.getUniformLocation(x.program,v[Z].name)}X(),x._relink=X,x.types={uniforms:r(v),attributes:r(f)},x.attributes=i(m,x,A,D),Object.defineProperty(x,"uniforms",e(m,x,v,U))},_.exports=function(u,h,v,f,l){var x=new s(u);return x.update(h,v,f,l),x}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(g,_,t){function e(i,r,o){this.shortMessage=r||"",this.longMessage=o||"",this.rawError=i||"",this.message="gl-shader: "+(r||i||"")+(o?"\n"+o:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,_.exports=e},{}],134:[function(g,_,t){"use strict";_.exports=function(s,a,c,u){for(var h={},v=0,f=c.length;v<f;++v){var l=c[v],x=l.name,m=l.type,w=l.locations;switch(m){case"bool":case"int":case"float":n(s,a,w[0],u,1,h,x);break;default:if(m.indexOf("vec")>=0){if((b=m.charCodeAt(m.length-1)-48)<2||b>4)throw new e("","Invalid data type for attribute "+x+": "+m);n(s,a,w[0],u,b,h,x)}else{if(!(m.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+x+": "+m);var b;if((b=m.charCodeAt(m.length-1)-48)<2||b>4)throw new e("","Invalid data type for attribute "+x+": "+m);p(s,a,w,u,b,h,x)}}}return h};var e=g("./GLError");function i(s,a,c,u,h,v){this._gl=s,this._wrapper=a,this._index=c,this._locations=u,this._dimension=h,this._constFunc=v}var r=i.prototype;r.pointer=function(s,a,c,u){var h=this._gl,v=this._locations[this._index];h.vertexAttribPointer(v,this._dimension,s||h.FLOAT,!!a,c||0,u||0),h.enableVertexAttribArray(v)},r.set=function(s,a,c,u){return this._constFunc(this._locations[this._index],s,a,c,u)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=0|s,this._wrapper.program=null),0|s}});var o=[function(s,a,c){return void 0===c.length?s.vertexAttrib1f(a,c):s.vertexAttrib1fv(a,c)},function(s,a,c,u){return void 0===c.length?s.vertexAttrib2f(a,c,u):s.vertexAttrib2fv(a,c)},function(s,a,c,u,h){return void 0===c.length?s.vertexAttrib3f(a,c,u,h):s.vertexAttrib3fv(a,c)},function(s,a,c,u,h,v){return void 0===c.length?s.vertexAttrib4f(a,c,u,h,v):s.vertexAttrib4fv(a,c)}];function n(s,a,c,u,h,v,f){var l=o[h],x=new i(s,a,c,u,h,l);Object.defineProperty(v,f,{set:function(m){return s.disableVertexAttribArray(u[c]),l(s,u[c],m),m},get:function(){return x},enumerable:!0})}function p(s,a,c,u,h,v,f){for(var l=new Array(h),x=new Array(h),m=0;m<h;++m)n(s,a,c[m],u,h,l,m),x[m]=l[m];Object.defineProperty(l,"location",{set:function(k){if(Array.isArray(k))for(var T=0;T<h;++T)x[T].location=k[T];else for(T=0;T<h;++T)x[T].location=k+T;return k},get:function(){for(var k=new Array(h),T=0;T<h;++T)k[T]=u[c[T]];return k},enumerable:!0}),l.pointer=function(k,T,L,A){k=k||s.FLOAT,T=!!T,L=L||h*h,A=A||0;for(var I=0;I<h;++I){var D=u[c[I]];s.vertexAttribPointer(D,h,k,T,L,A+I*h),s.enableVertexAttribArray(D)}};var w=new Array(h),b=s["vertexAttrib"+h+"fv"];Object.defineProperty(v,f,{set:function(k){for(var T=0;T<h;++T){var L=u[c[T]];if(s.disableVertexAttribArray(L),Array.isArray(k[0]))b.call(s,L,k[T]);else{for(var A=0;A<h;++A)w[A]=k[h*T+A];b.call(s,L,w)}}return k},get:function(){return l},enumerable:!0})}},{"./GLError":133}],135:[function(g,_,t){"use strict";var e=g("./reflect"),i=g("./GLError");function r(n){return function(){return n}}function o(n,p){for(var s=new Array(n),a=0;a<n;++a)s[a]=p;return s}_.exports=function(n,p,s,a){function c(f){return function(l){for(var x=function F(H,U){if("object"!=typeof U)return[[H,U]];var X=[];for(var Z in U){var Y=U[Z],W=H;parseInt(Z)+""===Z?W+="["+Z+"]":W+="."+Z,"object"==typeof Y?X.push.apply(X,F(W,Y)):X.push([W,Y])}return X}("",f),m=0;m<x.length;++m){var w=x[m],b=w[0],k=w[1];if(a[k]){var T=l;if("string"==typeof b&&(0===b.indexOf(".")||0===b.indexOf("["))){var L=b;if(0===b.indexOf(".")&&(L=b.slice(1)),L.indexOf("]")===L.length-1){var A=L.indexOf("["),I=L.slice(0,A),D=L.slice(A+1,L.length-1);T=I?l[I][D]:l[D]}else T=l[L]}var S,C=s[k].type;switch(C){case"bool":case"int":case"sampler2D":case"samplerCube":n.uniform1i(a[k],T);break;case"float":n.uniform1f(a[k],T);break;default:var R=C.indexOf("vec");if(!(0<=R&&R<=1&&C.length===4+R)){if(0===C.indexOf("mat")&&4===C.length){if((S=C.charCodeAt(C.length-1)-48)<2||S>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+C);n["uniformMatrix"+S+"fv"](a[k],!1,T);break}throw new i("","Unknown uniform data type for "+name+": "+C)}if((S=C.charCodeAt(C.length-1)-48)<2||S>4)throw new i("","Invalid data type");switch(C.charAt(0)){case"b":case"i":n["uniform"+S+"iv"](a[k],T);break;case"v":n["uniform"+S+"fv"](a[k],T);break;default:throw new i("","Unrecognized data type for vector "+name+": "+C)}}}}}}function u(f,l,x){if("object"==typeof x){var m=h(x);Object.defineProperty(f,l,{get:r(m),set:c(x),enumerable:!0,configurable:!1})}else a[x]?Object.defineProperty(f,l,{get:(w=x,function(b,k,T){return b.getUniform(k.program,T[w])}),set:c(x),enumerable:!0,configurable:!1}):f[l]=function(b){switch(b){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var k=b.indexOf("vec");if(0<=k&&k<=1&&b.length===4+k){if((T=b.charCodeAt(b.length-1)-48)<2||T>4)throw new i("","Invalid data type");return"b"===b.charAt(0)?o(T,!1):o(T,0)}if(0===b.indexOf("mat")&&4===b.length){var T;if((T=b.charCodeAt(b.length-1)-48)<2||T>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+b);return o(T*T,0)}throw new i("","Unknown uniform data type for "+name+": "+b)}}(s[x].type);var w}function h(f){var l;if(Array.isArray(f)){l=new Array(f.length);for(var x=0;x<f.length;++x)u(l,x,f[x])}else for(var m in l={},f)u(l,m,f[m]);return l}var v=e(s,!0);return{get:r(h(v)),set:c(v),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(g,_,t){"use strict";_.exports=function(e,i){for(var r={},o=0;o<e.length;++o)for(var n=e[o].name.split("."),p=r,s=0;s<n.length;++s){var a=n[s].split("[");if(a.length>1){a[0]in p||(p[a[0]]=[]),p=p[a[0]];for(var c=1;c<a.length;++c){var u=parseInt(a[c]);c<a.length-1||s<n.length-1?(u in p||(p[u]=c<a.length-1?[]:{}),p=p[u]):p[u]=i?o:e[o].type}}else s<n.length-1?(a[0]in p||(p[a[0]]={}),p=p[a[0]]):p[a[0]]=i?o:e[o].type}return r}},{}],137:[function(g,_,t){"use strict";t.uniforms=function(o,n){for(var p=o.getProgramParameter(n,o.ACTIVE_UNIFORMS),s=[],a=0;a<p;++a){var c=o.getActiveUniform(n,a);if(c){var u=r(o,c.type);if(c.size>1)for(var h=0;h<c.size;++h)s.push({name:c.name.replace("[0]","["+h+"]"),type:u});else s.push({name:c.name,type:u})}}return s},t.attributes=function(o,n){for(var p=o.getProgramParameter(n,o.ACTIVE_ATTRIBUTES),s=[],a=0;a<p;++a){var c=o.getActiveAttrib(n,a);c&&s.push({name:c.name,type:r(o,c.type)})}return s};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(o,n){if(!i){var p=Object.keys(e);i={};for(var s=0;s<p.length;++s){var a=p[s];i[o[a]]=e[a]}}return i[n]}},{}],138:[function(g,_,t){"use strict";t.shader=function(c,u,h){return a(c).getShaderReference(u,h)},t.program=function(c,u,h,v,f){return a(c).getProgram(u,h,v,f)};var e=g("./GLError"),i=g("gl-format-compiler-error"),r=new("undefined"==typeof WeakMap?g("weakmap-shim"):WeakMap),o=0;function n(c,u,h,v,f,l,x){this.id=c,this.src=u,this.type=h,this.shader=v,this.count=l,this.programs=[],this.cache=x}function p(c){this.gl=c,this.shaders=[{},{}],this.programs={}}n.prototype.dispose=function(){if(0==--this.count){for(var c=this.cache,u=c.gl,h=this.programs,v=0,f=h.length;v<f;++v){var l=c.programs[h[v]];l&&(delete c.programs[v],u.deleteProgram(l))}u.deleteShader(this.shader),delete c.shaders[this.type===u.FRAGMENT_SHADER|0][this.src]}};var s=p.prototype;function a(c){var u=r.get(c);return u||(u=new p(c),r.set(c,u)),u}s.getShaderReference=function(c,u){var h=this.gl,v=this.shaders[c===h.FRAGMENT_SHADER|0],f=v[u];if(f&&h.isShader(f.shader))f.count+=1;else{var l=function(x,m,w){var b=x.createShader(m);if(x.shaderSource(b,w),x.compileShader(b),!x.getShaderParameter(b,x.COMPILE_STATUS)){var k=x.getShaderInfoLog(b);try{var T=i(k,w,m)}catch(L){throw console.warn("Failed to format compiler error: "+L),new e(k,"Error compiling shader:\n"+k)}throw new e(k,T.short,T.long)}return b}(h,c,u);f=v[u]=new n(o++,u,c,l,[],1,this)}return f},s.getProgram=function(c,u,h,v){var f=[c.id,u.id,h.join(":"),v.join(":")].join("@"),l=this.programs[f];return l&&this.gl.isProgram(l)||(this.programs[f]=l=function(x,m,w,b,k){var T=x.createProgram();x.attachShader(T,m),x.attachShader(T,w);for(var L=0;L<b.length;++L)x.bindAttribLocation(T,k[L],b[L]);if(x.linkProgram(T),!x.getProgramParameter(T,x.LINK_STATUS)){var A=x.getProgramInfoLog(T);throw new e(A,"Error linking program: "+A)}return T}(this.gl,c.shader,u.shader,h,v),c.programs.push(f),u.programs.push(f)),l}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(g,_,t){"use strict";function e(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}_.exports=function(r,o){var n=new e(r);return n.update(o),r.addOverlay(n),n};var i=e.prototype;i.update=function(r){this.enable=((r=r||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(o){return o.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var r=this.enable,o=this.width,n=this.color,p=this.center,s=this.plot,a=s.line,c=s.dataBox,u=s.viewBox;if(a.bind(),c[0]<=p[0]&&p[0]<=c[2]&&c[1]<=p[1]&&p[1]<=c[3]){var h=u[0]+(p[0]-c[0])/(c[2]-c[0])*(u[2]-u[0]),v=u[1]+(p[1]-c[1])/(c[3]-c[1])*(u[3]-u[1]);r[0]&&a.drawLine(h,v,u[0],v,o[0],n[0]),r[1]&&a.drawLine(h,v,h,u[1],o[1],n[1]),r[2]&&a.drawLine(h,v,u[2],v,o[2],n[2]),r[3]&&a.drawLine(h,v,h,u[3],o[3],n[3])}},i.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(g,_,t){"use strict";var e=g("glslify"),i=g("gl-shader"),r=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);_.exports=function(n){return i(n,r,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(g,_,t){"use strict";var e=g("gl-buffer"),i=g("gl-vao"),r=g("./shaders/index");_.exports=function(u,h){var v=[];function f(b,k,T,L,A,I){var D=[b,k,T,0,0,0,1];D[L+3]=1,D[L]=A,v.push.apply(v,D),D[6]=-1,v.push.apply(v,D),D[L]=I,v.push.apply(v,D),v.push.apply(v,D),D[6]=1,v.push.apply(v,D),D[L]=A,v.push.apply(v,D)}f(0,0,0,0,0,1),f(0,0,0,1,0,1),f(0,0,0,2,0,1),f(1,0,0,1,-1,1),f(1,0,0,2,-1,1),f(0,1,0,0,-1,1),f(0,1,0,2,-1,1),f(0,0,1,0,-1,1),f(0,0,1,1,-1,1);var l=e(u,v),x=i(u,[{type:u.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:u.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:u.FLOAT,buffer:l,size:1,offset:24,stride:28}]),m=r(u);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.weight.location=2;var w=new n(u,l,x,m);return w.update(h),w};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(u,h,v,f){this.gl=u,this.buffer=h,this.vao=v,this.shader=f,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var p=n.prototype,s=[0,0,0],a=[0,0,0],c=[0,0];p.isTransparent=function(){return!1},p.drawTransparent=function(u){},p.draw=function(u){var h=this.gl,v=this.vao,f=this.shader;v.bind(),f.bind();var l,x=u.model||o,m=u.view||o,w=u.projection||o;this.axes&&(l=this.axes.lastCubeProps.axis);for(var b=s,k=a,T=0;T<3;++T)l&&l[T]<0?(b[T]=this.bounds[0][T],k[T]=this.bounds[1][T]):(b[T]=this.bounds[1][T],k[T]=this.bounds[0][T]);for(c[0]=h.drawingBufferWidth,c[1]=h.drawingBufferHeight,f.uniforms.model=x,f.uniforms.view=m,f.uniforms.projection=w,f.uniforms.coordinates=[this.position,b,k],f.uniforms.colors=this.colors,f.uniforms.screenShape=c,T=0;T<3;++T)f.uniforms.lineWidth=this.lineWidth[T]*this.pixelRatio,this.enabled[T]&&(v.draw(h.TRIANGLES,6,6*T),this.drawSides[T]&&v.draw(h.TRIANGLES,12,18+12*T));v.unbind()},p.update=function(u){u&&("bounds"in u&&(this.bounds=u.bounds),"position"in u&&(this.position=u.position),"lineWidth"in u&&(this.lineWidth=u.lineWidth),"colors"in u&&(this.colors=u.colors),"enabled"in u&&(this.enabled=u.enabled),"drawSides"in u&&(this.drawSides=u.drawSides))},p.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(g,_,t){var e=g("glslify"),i=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),r=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);t.meshShader={vertex:i,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},t.pickShader={vertex:o,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(g,_,t){"use strict";var e=g("gl-vec3"),i=g("gl-vec4"),r=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(u,h){var v,f=u.length;for(v=0;v<f;v++){var l=u[v];if(l===h)return v;if(l>h)return v-1}return v},p=function(u,h,v){return u<h?h:u>v?v:u},s=function(u){var h=1/0;u.sort(function(x,m){return x-m});for(var v=u.length,f=1;f<v;f++){var l=Math.abs(u[f]-u[f-1]);l<h&&(h=l)}return h};_.exports=function(u,h){var v=u.startingPositions,f=u.maxLength||1e3,l=u.tubeSize||1,x=u.absoluteTubeSize,m=u.gridFill||"+x+y+z",w={};-1!==m.indexOf("-x")&&(w.reversedX=!0),-1!==m.indexOf("-y")&&(w.reversedY=!0),-1!==m.indexOf("-z")&&(w.reversedZ=!0),w.filled=r.indexOf(m.replace(/-/g,"").replace(/\+/g,""));var se,de,ue,ge,b=u.getVelocity||function(se){return function(de,ue,ge){var be=ue.vectors,Te=ue.meshgrid,we=de[0],Le=de[1],fe=de[2],ve=Te[0].length,Me=Te[1].length,ke=Te[2].length,Ce=n(Te[0],we),Pe=n(Te[1],Le),Fe=n(Te[2],fe),qe=Ce+1,rt=Pe+1,ze=Fe+1;if(Ce=p(Ce,0,ve-1),qe=p(qe,0,ve-1),Pe=p(Pe,0,Me-1),rt=p(rt,0,Me-1),Fe=p(Fe,0,ke-1),ze=p(ze,0,ke-1),Ce<0||Pe<0||Fe<0||qe>ve-1||rt>Me-1||ze>ke-1)return e.create();var He,Xe,Je,at,pt,xt,Ft=Te[0][Ce],ot=Te[1][Pe],Et=Te[2][Fe],Xt=(we-Ft)/(Te[0][qe]-Ft),nr=(Le-ot)/(Te[1][rt]-ot),Ue=(fe-Et)/(Te[2][ze]-Et);switch(isFinite(Xt)||(Xt=.5),isFinite(nr)||(nr=.5),isFinite(Ue)||(Ue=.5),ge.reversedX&&(Ce=ve-1-Ce,qe=ve-1-qe),ge.reversedY&&(Pe=Me-1-Pe,rt=Me-1-rt),ge.reversedZ&&(Fe=ke-1-Fe,ze=ke-1-ze),ge.filled){case 5:pt=Fe,xt=ze,Je=Pe*ke,at=rt*ke,He=Ce*ke*Me,Xe=qe*ke*Me;break;case 4:pt=Fe,xt=ze,He=Ce*ke,Xe=qe*ke,Je=Pe*ke*ve,at=rt*ke*ve;break;case 3:Je=Pe,at=rt,pt=Fe*Me,xt=ze*Me,He=Ce*Me*ke,Xe=qe*Me*ke;break;case 2:Je=Pe,at=rt,He=Ce*Me,Xe=qe*Me,pt=Fe*Me*ve,xt=ze*Me*ve;break;case 1:He=Ce,Xe=qe,pt=Fe*ve,xt=ze*ve,Je=Pe*ve*ke,at=rt*ve*ke;break;default:He=Ce,Xe=qe,Je=Pe*ve,at=rt*ve,pt=Fe*ve*Me,xt=ze*ve*Me}var We=be[He+Je+pt],Be=be[He+Je+xt],Qe=be[He+at+pt],Ae=be[He+at+xt],De=be[Xe+Je+pt],Oe=be[Xe+Je+xt],Ie=be[Xe+at+pt],et=be[Xe+at+xt],ct=e.create(),vt=e.create(),ft=e.create(),It=e.create();e.lerp(ct,We,De,Xt),e.lerp(vt,Be,Oe,Xt),e.lerp(ft,Qe,Ie,Xt),e.lerp(It,Ae,et,Xt);var ut=e.create(),Ot=e.create();e.lerp(ut,ct,ft,nr),e.lerp(Ot,vt,It,nr);var Rt=e.create();return e.lerp(Rt,ut,Ot,Ue),Rt}(se,u,w)},k=u.getDivergence||function(se,de){var ue=e.create(),ge=1e-4;e.add(ue,se,[ge,0,0]);var be=b(ue);e.subtract(be,be,de),e.scale(be,be,1/ge),e.add(ue,se,[0,ge,0]);var Te=b(ue);e.subtract(Te,Te,de),e.scale(Te,Te,1/ge),e.add(ue,se,[0,0,ge]);var we=b(ue);return e.subtract(we,we,de),e.scale(we,we,1/ge),e.add(ue,be,Te),e.add(ue,ue,we),ue},T=[],L=h[0][0],A=h[0][1],I=h[0][2],D=h[1][0],S=h[1][1],C=h[1][2],F=10*e.distance(h[0],h[1])/f,H=F*F,U=1,X=0,Z=v.length;Z>1&&(U=function(se){for(var de=[],ue=[],ge=[],be={},Te={},we={},Le=se.length,fe=0;fe<Le;fe++){var ve=se[fe],Me=ve[0],ke=ve[1],Ce=ve[2];be[Me]||(de.push(Me),be[Me]=!0),Te[ke]||(ue.push(ke),Te[ke]=!0),we[Ce]||(ge.push(Ce),we[Ce]=!0)}var Pe=s(de),Fe=s(ue),qe=s(ge),rt=Math.min(Pe,Fe,qe);return isFinite(rt)?rt:1}(v));for(var Y=0;Y<Z;Y++){var W=e.create();e.copy(W,v[Y]);var te=[W],z=[],N=b(W),V=W;z.push(N);var Q=[],j=k(W,N),J=e.length(j);isFinite(J)&&J>X&&(X=J),Q.push(J),T.push({points:te,velocities:z,divergences:Q});for(var K=0;K<100*f&&te.length<f&&(de=void 0,ue=void 0,ge=void 0,ue=(se=W)[1],ge=se[2],!((de=se[0])<L||de>D||ue<A||ue>S||ge<I||ge>C));){K++;var re=e.clone(N),ie=e.squaredLength(re);if(0===ie)break;ie>H&&e.scale(re,re,F/Math.sqrt(ie)),e.add(re,re,W),N=b(re),e.squaredDistance(V,re)-H>-1e-4*H&&(te.push(re),V=re,z.push(N),j=k(re,N),J=e.length(j),isFinite(J)&&J>X&&(X=J),Q.push(J)),W=re}}var ce=function(u,h,v,f){for(var l=0,x=0;x<u.length;x++)for(var m=u[x].velocities,w=0;w<m.length;w++)l=Math.max(l,e.length(m[w]));var b=u.map(function(F){return function(H,U,X,Z){for(var Y=H.points,W=H.velocities,te=H.divergences,z=[],N=[],V=[],Q=[],j=[],J=[],K=0,re=0,ie=i.create(),ce=i.create(),se=0;se<Y.length;se++){var de=Y[se],ue=W[se],ge=te[se];0===U&&(ge=.05*X),re=e.length(ue)/Z,ie=i.create(),e.copy(ie,ue),ie[3]=ge;for(var be=0;be<8;be++)j[be]=[de[0],de[1],de[2],be];if(Q.length>0)for(be=0;be<8;be++){var Te=(be+1)%8;z.push(Q[be],j[be],j[Te],j[Te],Q[Te],Q[be]),V.push(ce,ie,ie,ie,ce,ce),J.push(K,re,re,re,K,K);var we=z.length;N.push([we-6,we-5,we-4],[we-3,we-2,we-1])}var Le=Q;Q=j,j=Le;var fe=ce;ce=ie,ie=fe;var ve=K;K=re,re=ve}return{positions:z,cells:N,vectors:V,vertexIntensity:J}}(F,v,f,l)}),k=[],T=[],L=[],A=[];for(x=0;x<b.length;x++){var I=b[x],D=k.length;for(k=k.concat(I.positions),L=L.concat(I.vectors),A=A.concat(I.vertexIntensity),w=0;w<I.cells.length;w++){var S=I.cells[w],C=[];T.push(C);for(var R=0;R<S.length;R++)C.push(S[R]+D)}}return{positions:k,cells:T,vectors:L,vertexIntensity:A,colormap:h}}(T,u.colormap,X,U);return x?ce.tubeScale=x:(0===X&&(X=1),ce.tubeScale=.5*l*U/X),ce};var a=g("./lib/shaders"),c=g("gl-cone3d").createMesh;_.exports.createTubeMesh=function(u,h){return c(u,h,{shaders:a,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(g,_,t){var e=g("gl-shader"),i=g("glslify"),r=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);t.createShader=function(s){var a=e(s,r,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a.attributes.normal.location=2,a},t.createPickShader=function(s){var a=e(s,r,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a.attributes.normal.location=2,a},t.createContourShader=function(s){var a=e(s,n,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a},t.createPickContourShader=function(s){var a=e(s,n,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return a.attributes.uv.location=0,a.attributes.f.location=1,a}},{"gl-shader":132,glslify:231}],145:[function(g,_,t){"use strict";_.exports=function(N){var V=N.gl,Q=m(V),j=b(V),J=w(V),K=k(V),re=i(V),ie=r(V,[{buffer:re,size:4,stride:40,offset:0},{buffer:re,size:3,stride:40,offset:16},{buffer:re,size:3,stride:40,offset:28}]),ce=i(V),se=r(V,[{buffer:ce,size:4,stride:20,offset:0},{buffer:ce,size:1,stride:20,offset:16}]),de=i(V),ue=r(V,[{buffer:de,size:2,type:V.FLOAT}]),ge=o(V,1,256,V.RGBA,V.UNSIGNED_BYTE);ge.minFilter=V.LINEAR,ge.magFilter=V.LINEAR;var be=new D(V,[0,0],[[0,0,0],[0,0,0]],Q,j,re,ie,ge,J,K,ce,se,de,ue,[0,0,0]),Te={levels:[[],[],[]]};for(var we in N)Te[we]=N[we];return Te.colormap=Te.colormap||"jet",be.update(Te),be};var e=g("bit-twiddle"),i=g("gl-buffer"),r=g("gl-vao"),o=g("gl-texture2d"),n=g("typedarray-pool"),p=g("colormap"),s=g("ndarray-ops"),a=g("ndarray-pack"),c=g("ndarray"),u=g("surface-nets"),h=g("gl-mat4/multiply"),v=g("gl-mat4/invert"),f=g("binary-search-bounds"),l=g("ndarray-gradient"),x=g("./lib/shaders"),m=x.createShader,w=x.createContourShader,b=x.createPickShader,k=x.createPickContourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],A=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(N,V,Q,j,J){this.position=N,this.index=V,this.uv=Q,this.level=j,this.dataCoordinate=J}function D(N,V,Q,j,J,K,re,ie,ce,se,de,ue,ge,be,Te){this.gl=N,this.shape=V,this.bounds=Q,this.objectOffset=Te,this.intensityBounds=[],this._shader=j,this._pickShader=J,this._coordinateBuffer=K,this._vao=re,this._colorMap=ie,this._contourShader=ce,this._contourPickShader=se,this._contourBuffer=de,this._contourVAO=ue,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ge,this._dynamicVAO=be,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[c(n.mallocFloat(1024),[0,0]),c(n.mallocFloat(1024),[0,0]),c(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var N=0;N<3;++N){var V=A[N],Q=(N+2)%3;V[(N+1)%3+0]=1,V[Q+3]=1,V[N+6]=1}}();var S=D.prototype;S.genColormap=function(N,V){var Q=!1,j=a([p({colormap:N,nshades:256,format:"rgba"}).map(function(J,K){var re=V?function(ie,ce){if(!ce||!ce.length)return 1;for(var se=0;se<ce.length;++se){if(ce.length<2)return 1;if(ce[se][0]===ie)return ce[se][1];if(ce[se][0]>ie&&se>0){var de=(ce[se][0]-ie)/(ce[se][0]-ce[se-1][0]);return ce[se][1]*(1-de)+de*ce[se-1][1]}}return 1}(K/255,V):J[3];return re<1&&(Q=!0),[J[0],J[1],J[2],255*re]})]);return s.divseq(j,255),this.hasAlphaScale=Q,j},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(N){this.pickId=N};var C=[0,0,0],R={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function F(N,V){var Q,j,J,K=V.axes&&V.axes.lastCubeProps.axis||C,re=V.showSurface,ie=V.showContour;for(Q=0;Q<3;++Q)for(re=re||V.surfaceProject[Q],j=0;j<3;++j)ie=ie||V.contourProject[Q][j];for(Q=0;Q<3;++Q){var ce=R.projections[Q];for(j=0;j<16;++j)ce[j]=0;for(j=0;j<4;++j)ce[5*j]=1;ce[5*Q]=0,ce[12+Q]=V.axesBounds[+(K[Q]>0)][Q],h(ce,N.model,ce);var se=R.clipBounds[Q];for(J=0;J<2;++J)for(j=0;j<3;++j)se[J][j]=N.clipBounds[J][j];se[0][Q]=-1e8,se[1][Q]=1e8}return R.showSurface=re,R.showContour=ie,R}var H={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},U=T.slice(),X=[1,0,0,0,1,0,0,0,1];function Z(N,V){N=N||{};var Q=this.gl;Q.disable(Q.CULL_FACE),this._colorMap.bind(0);var j=H;j.model=N.model||T,j.view=N.view||T,j.projection=N.projection||T,j.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],j.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],j.objectOffset=this.objectOffset,j.contourColor=this.contourColor[0],j.inverseModel=v(j.inverseModel,j.model);for(var J=0;J<2;++J)for(var K=j.clipBounds[J],re=0;re<3;++re)K[re]=Math.min(Math.max(this.clipBounds[J][re],-1e8),1e8);j.kambient=this.ambientLight,j.kdiffuse=this.diffuseLight,j.kspecular=this.specularLight,j.roughness=this.roughness,j.fresnel=this.fresnel,j.opacity=this.opacity,j.height=0,j.permutation=X,j.vertexColor=this.vertexColor;var ie=U;for(h(ie,j.view,j.model),h(ie,j.projection,ie),v(ie,ie),J=0;J<3;++J)j.eyePosition[J]=ie[12+J]/ie[15];var ce=ie[15];for(J=0;J<3;++J)ce+=this.lightPosition[J]*ie[4*J+3];for(J=0;J<3;++J){var se=ie[12+J];for(re=0;re<3;++re)se+=ie[4*re+J]*this.lightPosition[re];j.lightPosition[J]=se/ce}var de=F(j,this);if(de.showSurface){for(this._shader.bind(),this._shader.uniforms=j,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(Q.TRIANGLES,this._vertexCount),J=0;J<3;++J)this.surfaceProject[J]&&this.vertexCount&&(this._shader.uniforms.model=de.projections[J],this._shader.uniforms.clipBounds=de.clipBounds[J],this._vao.draw(Q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(de.showContour){var ue=this._contourShader;j.kambient=1,j.kdiffuse=0,j.kspecular=0,j.opacity=1,ue.bind(),ue.uniforms=j;var ge=this._contourVAO;for(ge.bind(),J=0;J<3;++J)for(ue.uniforms.permutation=A[J],Q.lineWidth(this.contourWidth[J]*this.pixelRatio),re=0;re<this.contourLevels[J].length;++re)re===this.highlightLevel[J]?(ue.uniforms.contourColor=this.highlightColor[J],ue.uniforms.contourTint=this.highlightTint[J]):0!==re&&re-1!==this.highlightLevel[J]||(ue.uniforms.contourColor=this.contourColor[J],ue.uniforms.contourTint=this.contourTint[J]),this._contourCounts[J][re]&&(ue.uniforms.height=this.contourLevels[J][re],ge.draw(Q.LINES,this._contourCounts[J][re],this._contourOffsets[J][re]));for(J=0;J<3;++J)for(ue.uniforms.model=de.projections[J],ue.uniforms.clipBounds=de.clipBounds[J],re=0;re<3;++re)if(this.contourProject[J][re]){ue.uniforms.permutation=A[re],Q.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var be=0;be<this.contourLevels[re].length;++be)be===this.highlightLevel[re]?(ue.uniforms.contourColor=this.highlightColor[re],ue.uniforms.contourTint=this.highlightTint[re]):0!==be&&be-1!==this.highlightLevel[re]||(ue.uniforms.contourColor=this.contourColor[re],ue.uniforms.contourTint=this.contourTint[re]),this._contourCounts[re][be]&&(ue.uniforms.height=this.contourLevels[re][be],ge.draw(Q.LINES,this._contourCounts[re][be],this._contourOffsets[re][be]))}for(ge.unbind(),(ge=this._dynamicVAO).bind(),J=0;J<3;++J)if(0!==this._dynamicCounts[J])for(ue.uniforms.model=j.model,ue.uniforms.clipBounds=j.clipBounds,ue.uniforms.permutation=A[J],Q.lineWidth(this.dynamicWidth[J]*this.pixelRatio),ue.uniforms.contourColor=this.dynamicColor[J],ue.uniforms.contourTint=this.dynamicTint[J],ue.uniforms.height=this.dynamicLevel[J],ge.draw(Q.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]),re=0;re<3;++re)this.contourProject[re][J]&&(ue.uniforms.model=de.projections[re],ue.uniforms.clipBounds=de.clipBounds[re],ge.draw(Q.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]));ge.unbind()}}S.draw=function(N){return Z.call(this,N,!1)},S.drawTransparent=function(N){return Z.call(this,N,!0)};var Y={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function W(N,V){return Array.isArray(N)?[V(N[0]),V(N[1]),V(N[2])]:[V(N),V(N),V(N)]}function te(N){return Array.isArray(N)?3===N.length?[N[0],N[1],N[2],1]:[N[0],N[1],N[2],N[3]]:[0,0,0,1]}function z(N){if(Array.isArray(N)){if(Array.isArray(N))return[te(N[0]),te(N[1]),te(N[2])];var V=te(N);return[V.slice(),V.slice(),V.slice()]}}S.drawPick=function(N){N=N||{};var V=this.gl;V.disable(V.CULL_FACE);var Q=Y;Q.model=N.model||T,Q.view=N.view||T,Q.projection=N.projection||T,Q.shape=this._field[2].shape,Q.pickId=this.pickId/255,Q.lowerBound=this.bounds[0],Q.upperBound=this.bounds[1],Q.objectOffset=this.objectOffset,Q.permutation=X;for(var j=0;j<2;++j)for(var J=Q.clipBounds[j],K=0;K<3;++K)J[K]=Math.min(Math.max(this.clipBounds[j][K],-1e8),1e8);var re=F(Q,this);if(re.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=Q,this._vao.bind(),this._vao.draw(V.TRIANGLES,this._vertexCount),j=0;j<3;++j)this.surfaceProject[j]&&(this._pickShader.uniforms.model=re.projections[j],this._pickShader.uniforms.clipBounds=re.clipBounds[j],this._vao.draw(V.TRIANGLES,this._vertexCount));this._vao.unbind()}if(re.showContour){var ie=this._contourPickShader;ie.bind(),ie.uniforms=Q;var ce=this._contourVAO;for(ce.bind(),K=0;K<3;++K)for(V.lineWidth(this.contourWidth[K]*this.pixelRatio),ie.uniforms.permutation=A[K],j=0;j<this.contourLevels[K].length;++j)this._contourCounts[K][j]&&(ie.uniforms.height=this.contourLevels[K][j],ce.draw(V.LINES,this._contourCounts[K][j],this._contourOffsets[K][j]));for(j=0;j<3;++j)for(ie.uniforms.model=re.projections[j],ie.uniforms.clipBounds=re.clipBounds[j],K=0;K<3;++K)if(this.contourProject[j][K]){ie.uniforms.permutation=A[K],V.lineWidth(this.contourWidth[K]*this.pixelRatio);for(var se=0;se<this.contourLevels[K].length;++se)this._contourCounts[K][se]&&(ie.uniforms.height=this.contourLevels[K][se],ce.draw(V.LINES,this._contourCounts[K][se],this._contourOffsets[K][se]))}ce.unbind()}},S.pick=function(N){if(!N||N.id!==this.pickId)return null;var V=this._field[2].shape,Q=this._pickResult,j=V[0]*(N.value[0]+(N.value[2]>>4)/16)/255,J=Math.floor(j),K=j-J,re=V[1]*(N.value[1]+(15&N.value[2])/16)/255,ie=Math.floor(re),ce=re-ie;J+=1,ie+=1;var se=Q.position;se[0]=se[1]=se[2]=0;for(var de=0;de<2;++de)for(var ue=de?K:1-K,ge=0;ge<2;++ge)for(var be=J+de,Te=ie+ge,we=ue*(ge?ce:1-ce),Le=0;Le<3;++Le)se[Le]+=this._field[Le].get(be,Te)*we;for(var fe=this._pickResult.level,ve=0;ve<3;++ve)if(fe[ve]=f.le(this.contourLevels[ve],se[ve]),fe[ve]<0)this.contourLevels[ve].length>0&&(fe[ve]=0);else if(fe[ve]<this.contourLevels[ve].length-1){var ke=this.contourLevels[ve][fe[ve]+1];Math.abs(this.contourLevels[ve][fe[ve]]-se[ve])>Math.abs(ke-se[ve])&&(fe[ve]+=1)}for(Q.index[0]=K<.5?J:J+1,Q.index[1]=ce<.5?ie:ie+1,Q.uv[0]=j/V[0],Q.uv[1]=re/V[1],Le=0;Le<3;++Le)Q.dataCoordinate[Le]=this._field[Le].get(Q.index[0],Q.index[1]);return Q},S.padField=function(N,V){var Q=V.shape.slice(),j=N.shape.slice();s.assign(N.lo(1,1).hi(Q[0],Q[1]),V),s.assign(N.lo(1).hi(Q[0],1),V.hi(Q[0],1)),s.assign(N.lo(1,j[1]-1).hi(Q[0],1),V.lo(0,Q[1]-1).hi(Q[0],1)),s.assign(N.lo(0,1).hi(1,Q[1]),V.hi(1)),s.assign(N.lo(j[0]-1,1).hi(1,Q[1]),V.lo(Q[0]-1)),N.set(0,0,V.get(0,0)),N.set(0,j[1]-1,V.get(0,Q[1]-1)),N.set(j[0]-1,0,V.get(Q[0]-1,0)),N.set(j[0]-1,j[1]-1,V.get(Q[0]-1,Q[1]-1))},S.update=function(N){this.objectOffset=(N=N||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in N&&(this.contourWidth=W(N.contourWidth,Number)),"showContour"in N&&(this.showContour=W(N.showContour,Boolean)),"showSurface"in N&&(this.showSurface=!!N.showSurface),"contourTint"in N&&(this.contourTint=W(N.contourTint,Boolean)),"contourColor"in N&&(this.contourColor=z(N.contourColor)),"contourProject"in N&&(this.contourProject=W(N.contourProject,function(Wt){return W(Wt,Boolean)})),"surfaceProject"in N&&(this.surfaceProject=N.surfaceProject),"dynamicColor"in N&&(this.dynamicColor=z(N.dynamicColor)),"dynamicTint"in N&&(this.dynamicTint=W(N.dynamicTint,Number)),"dynamicWidth"in N&&(this.dynamicWidth=W(N.dynamicWidth,Number)),"opacity"in N&&(this.opacity=N.opacity),"opacityscale"in N&&(this.opacityscale=N.opacityscale),"colorBounds"in N&&(this.colorBounds=N.colorBounds),"vertexColor"in N&&(this.vertexColor=N.vertexColor?1:0),"colormap"in N&&this._colorMap.setPixels(this.genColormap(N.colormap,this.opacityscale));var V=N.field||N.coords&&N.coords[2]||null,Q=!1;if(V||(V=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in N||"coords"in N){var j=(V.shape[0]+2)*(V.shape[1]+2);j>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(e.nextPow2(j))),this._field[2]=c(this._field[2].data,[V.shape[0]+2,V.shape[1]+2]),this.padField(this._field[2],V),this.shape=V.shape.slice();for(var J=this.shape,K=0;K<2;++K)this._field[2].size>this._field[K].data.length&&(n.freeFloat(this._field[K].data),this._field[K].data=n.mallocFloat(this._field[2].size)),this._field[K]=c(this._field[K].data,[J[0]+2,J[1]+2]);if(N.coords){var re=N.coords;if(!Array.isArray(re)||3!==re.length)throw new Error("gl-surface: invalid coordinates for x/y");for(K=0;K<2;++K){var ie=re[K];for(ge=0;ge<2;++ge)if(ie.shape[ge]!==J[ge])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[K],ie)}}else if(N.ticks){var ce=N.ticks;if(!Array.isArray(ce)||2!==ce.length)throw new Error("gl-surface: invalid ticks");for(K=0;K<2;++K){var se=ce[K];if((Array.isArray(se)||se.length)&&(se=c(se)),se.shape[0]!==J[K])throw new Error("gl-surface: invalid tick length");var de=c(se.data,J);de.stride[K]=se.stride[0],de.stride[1^K]=0,this.padField(this._field[K],de)}}else{for(K=0;K<2;++K){var ue=[0,0];ue[K]=1,this._field[K]=c(this._field[K].data,[J[0]+2,J[1]+2],ue,0)}this._field[0].set(0,0,0);for(var ge=0;ge<J[0];++ge)this._field[0].set(ge+1,0,ge);for(this._field[0].set(J[0]+1,0,J[0]-1),this._field[1].set(0,0,0),ge=0;ge<J[1];++ge)this._field[1].set(0,ge+1,ge);this._field[1].set(0,J[1]+1,J[1]-1)}var be=this._field,Te=c(n.mallocFloat(3*be[2].size*2),[3,J[0]+2,J[1]+2,2]);for(K=0;K<3;++K)l(Te.pick(K),be[K],"mirror");var we=c(n.mallocFloat(3*be[2].size),[J[0]+2,J[1]+2,3]);for(K=0;K<J[0]+2;++K)for(ge=0;ge<J[1]+2;++ge){var Le=Te.get(0,K,ge,0),fe=Te.get(0,K,ge,1),ve=Te.get(1,K,ge,0),Me=Te.get(1,K,ge,1),ke=Te.get(2,K,ge,0),Ce=Te.get(2,K,ge,1),Pe=ve*Ce-Me*ke,Fe=ke*fe-Ce*Le,qe=Le*Me-fe*ve,rt=Math.sqrt(Pe*Pe+Fe*Fe+qe*qe);rt<1e-8?(rt=Math.max(Math.abs(Pe),Math.abs(Fe),Math.abs(qe)))<1e-8?(qe=1,Fe=Pe=0,rt=1):rt=1/rt:rt=1/Math.sqrt(rt),we.set(K,ge,0,Pe*rt),we.set(K,ge,1,Fe*rt),we.set(K,ge,2,qe*rt)}n.free(Te.data);var ze=[1/0,1/0,1/0],He=[-1/0,-1/0,-1/0],Xe=1/0,Je=-1/0,pt=n.mallocFloat(e.nextPow2((J[0]-1)*(J[1]-1)*6*10)),xt=0,Ft=0;for(K=0;K<J[0]-1;++K)e:for(ge=0;ge<J[1]-1;++ge){for(var Dt=0;Dt<2;++Dt)for(var ot=0;ot<2;++ot)for(var it=0;it<3;++it){var Et=this._field[it].get(1+K+Dt,1+ge+ot);if(isNaN(Et)||!isFinite(Et))continue e}for(it=0;it<6;++it){var Xt=K+L[it][0],nr=ge+L[it][1],Ue=this._field[0].get(Xt+1,nr+1),We=this._field[1].get(Xt+1,nr+1);Et=this._field[2].get(Xt+1,nr+1),Pe=we.get(Xt+1,nr+1,0),Fe=we.get(Xt+1,nr+1,1),qe=we.get(Xt+1,nr+1,2),N.intensity&&(Be=N.intensity.get(Xt,nr));var Be=N.intensity?N.intensity.get(Xt,nr):Et+this.objectOffset[2];pt[xt++]=Xt,pt[xt++]=nr,pt[xt++]=Ue,pt[xt++]=We,pt[xt++]=Et,pt[xt++]=0,pt[xt++]=Be,pt[xt++]=Pe,pt[xt++]=Fe,pt[xt++]=qe,ze[0]=Math.min(ze[0],Ue+this.objectOffset[0]),ze[1]=Math.min(ze[1],We+this.objectOffset[1]),ze[2]=Math.min(ze[2],Et+this.objectOffset[2]),Xe=Math.min(Xe,Be),He[0]=Math.max(He[0],Ue+this.objectOffset[0]),He[1]=Math.max(He[1],We+this.objectOffset[1]),He[2]=Math.max(He[2],Et+this.objectOffset[2]),Je=Math.max(Je,Be),Ft+=1}}for(N.intensityBounds&&(Xe=+N.intensityBounds[0],Je=+N.intensityBounds[1]),K=6;K<xt;K+=10)pt[K]=(pt[K]-Xe)/(Je-Xe);this._vertexCount=Ft,this._coordinateBuffer.update(pt.subarray(0,xt)),n.freeFloat(pt),n.free(we.data),this.bounds=[ze,He],this.intensity=N.intensity||this._field[2],this.intensityBounds[0]===Xe&&this.intensityBounds[1]===Je||(Q=!0),this.intensityBounds=[Xe,Je]}if("levels"in N){var Qe=N.levels;for(Qe=Array.isArray(Qe[0])?Qe.slice():[[],[],Qe],K=0;K<3;++K)Qe[K]=Qe[K].slice(),Qe[K].sort(function(Wt,er){return Wt-er});for(K=0;K<3;++K)for(ge=0;ge<Qe[K].length;++ge)Qe[K][ge]-=this.objectOffset[K];e:for(K=0;K<3;++K){if(Qe[K].length!==this.contourLevels[K].length){Q=!0;break}for(ge=0;ge<Qe[K].length;++ge)if(Qe[K][ge]!==this.contourLevels[K][ge]){Q=!0;break e}}this.contourLevels=Qe}if(Q){be=this._field,J=this.shape;for(var Ae=[],De=0;De<3;++De){var Oe=this.contourLevels[De],Ie=[],et=[],ct=[0,0,0];for(K=0;K<Oe.length;++K){var vt=u(this._field[De],Oe[K]);Ie.push(Ae.length/5|0),Ft=0;e:for(ge=0;ge<vt.cells.length;++ge){var ft=vt.cells[ge];for(it=0;it<2;++it){var It=vt.positions[ft[it]],ut=It[0],Ot=0|Math.floor(ut),Rt=ut-Ot,$e=It[1],yt=0|Math.floor($e),Bt=$e-yt,Ut=!1;t:for(var Qt=0;Qt<3;++Qt){ct[Qt]=0;var Re=(De+Qt+1)%3;for(Dt=0;Dt<2;++Dt){var ht=Dt?Rt:1-Rt;for(Xt=0|Math.min(Math.max(Ot+Dt,0),J[0]),ot=0;ot<2;++ot){var Mt=ot?Bt:1-Bt;if(nr=0|Math.min(Math.max(yt+ot,0),J[1]),Et=Qt<2?this._field[Re].get(Xt,nr):(this.intensity.get(Xt,nr)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Et)||isNaN(Et)){Ut=!0;break t}ct[Qt]+=ht*Mt*Et}}}if(Ut){if(it>0){for(var Zt=0;Zt<5;++Zt)Ae.pop();Ft-=1}continue e}Ae.push(ct[0],ct[1],It[0],It[1],ct[2]),Ft+=1}}et.push(Ft)}this._contourOffsets[De]=Ie,this._contourCounts[De]=et}var or=n.mallocFloat(Ae.length);for(K=0;K<Ae.length;++K)or[K]=Ae[K];this._contourBuffer.update(or),n.freeFloat(or)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var N=0;N<3;++N)n.freeFloat(this._field[N].data)},S.highlight=function(N){var V,Q;if(!N)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(V=0;V<3;++V)this.highlightLevel[V]=this.enableHighlight[V]?N.level[V]:-1;for(Q=this.snapToData?N.dataCoordinate:N.position,V=0;V<3;++V)Q[V]-=this.objectOffset[V];if(this.enableDynamic[0]&&Q[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&Q[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&Q[2]!==this.dynamicLevel[2]){for(var j=0,J=this.shape,K=n.mallocFloat(12*J[0]*J[1]),re=0;re<3;++re)if(this.enableDynamic[re]){this.dynamicLevel[re]=Q[re];var de=this._field[(re+1)%3],ue=this._field[(re+2)%3],ge=u(this._field[re],Q[re]),be=ge.cells,Te=ge.positions;for(this._dynamicOffsets[re]=j,V=0;V<be.length;++V)for(var we=be[V],Le=0;Le<2;++Le){var fe=Te[we[Le]],ve=+fe[0],Me=0|ve,ke=0|Math.min(Me+1,J[0]),Ce=ve-Me,Pe=1-Ce,Fe=+fe[1],qe=0|Fe,rt=0|Math.min(qe+1,J[1]),ze=Fe-qe,He=1-ze,Xe=Pe*He,Je=Pe*ze,at=Ce*He,pt=Ce*ze,xt=Xe*de.get(Me,qe)+Je*de.get(Me,rt)+at*de.get(ke,qe)+pt*de.get(ke,rt),Ft=Xe*ue.get(Me,qe)+Je*ue.get(Me,rt)+at*ue.get(ke,qe)+pt*ue.get(ke,rt);if(isNaN(xt)||isNaN(Ft)){Le&&(j-=1);break}K[2*j+0]=xt,K[2*j+1]=Ft,j+=1}this._dynamicCounts[re]=j-this._dynamicOffsets[re]}else this.dynamicLevel[re]=NaN,this._dynamicCounts[re]=0;this._dynamicBuffer.update(K.subarray(0,2*j)),n.freeFloat(K)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(g,_,t){"use strict";var e=g("ndarray"),i=g("ndarray-ops"),r=g("typedarray-pool");_.exports=function(b){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||s(b),"number"==typeof arguments[1])return x(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(b,0|arguments[1][0],0|arguments[1][1],arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var k=arguments[1],T=a(k)?k:k.raw;if(T)return m(b,T,0|k.width,0|k.height,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(k.shape&&k.data&&k.stride)return w(b,k)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,n=null,p=null;function s(b){o=[b.LINEAR,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_NEAREST],n=[b.NEAREST,b.LINEAR,b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR],p=[b.REPEAT,b.CLAMP_TO_EDGE,b.MIRRORED_REPEAT]}function a(b){return"undefined"!=typeof HTMLCanvasElement&&b instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&b instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&b instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&b instanceof ImageData}var c=function(b,k){i.muls(b,k,255)};function u(b,k,T){var L=b.gl,A=L.getParameter(L.MAX_TEXTURE_SIZE);if(k<0||k>A||T<0||T>A)throw new Error("gl-texture2d: Invalid texture size");return b._shape=[k,T],b.bind(),L.texImage2D(L.TEXTURE_2D,0,b.format,k,T,0,b.format,b.type,null),b._mipLevels=[0],b}function h(b,k,T,L,A,I){this.gl=b,this.handle=k,this.format=A,this.type=I,this._shape=[T,L],this._mipLevels=[0],this._magFilter=b.NEAREST,this._minFilter=b.NEAREST,this._wrapS=b.CLAMP_TO_EDGE,this._wrapT=b.CLAMP_TO_EDGE,this._anisoSamples=1;var D=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return D._wrapS},set:function(R){return D.wrapS=R}},{get:function(){return D._wrapT},set:function(R){return D.wrapT=R}}]),this._wrapVector=S;var C=[this._shape[0],this._shape[1]];Object.defineProperties(C,[{get:function(){return D._shape[0]},set:function(R){return D.width=R}},{get:function(){return D._shape[1]},set:function(R){return D.height=R}}]),this._shapeVector=C}var v=h.prototype;function f(b,k){return 3===b.length?1===k[2]&&k[1]===b[0]*b[2]&&k[0]===b[2]:1===k[0]&&k[1]===b[0]}function l(b){var k=b.createTexture();return b.bindTexture(b.TEXTURE_2D,k),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),k}function x(b,k,T,L,A){var I=b.getParameter(b.MAX_TEXTURE_SIZE);if(k<0||k>I||T<0||T>I)throw new Error("gl-texture2d: Invalid texture shape");if(A===b.FLOAT&&!b.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var D=l(b);return b.texImage2D(b.TEXTURE_2D,0,L,k,T,0,L,A,null),new h(b,D,k,T,L,A)}function m(b,k,T,L,A,I){var D=l(b);return b.texImage2D(b.TEXTURE_2D,0,A,A,I,k),new h(b,D,T,L,A,I)}function w(b,k){var T=k.dtype,L=k.shape.slice(),A=b.getParameter(b.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>A||L[1]<0||L[1]>A)throw new Error("gl-texture2d: Invalid texture size");var I=f(L,k.stride.slice()),D=0;"float32"===T?D=b.FLOAT:"float64"===T?(D=b.FLOAT,I=!1,T="float32"):"uint8"===T?D=b.UNSIGNED_BYTE:(D=b.UNSIGNED_BYTE,I=!1,T="uint8");var S,C,R=0;if(2===L.length)R=b.LUMINANCE,k=e(k.data,L=[L[0],L[1],1],[k.stride[0],k.stride[1],1],k.offset);else{if(3!==L.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===L[2])R=b.ALPHA;else if(2===L[2])R=b.LUMINANCE_ALPHA;else if(3===L[2])R=b.RGB;else{if(4!==L[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");R=b.RGBA}}D!==b.FLOAT||b.getExtension("OES_texture_float")||(D=b.UNSIGNED_BYTE,I=!1);var F=k.size;if(I)S=0===k.offset&&k.data.length===F?k.data:k.data.subarray(k.offset,k.offset+F);else{var H=[L[2],L[2]*L[0],1];C=r.malloc(F,T);var U=e(C,L,H,0);"float32"!==T&&"float64"!==T||D!==b.UNSIGNED_BYTE?i.assign(U,k):c(U,k),S=C.subarray(0,F)}var X=l(b);return b.texImage2D(b.TEXTURE_2D,0,R,L[0],L[1],0,R,D,S),I||r.free(C),new h(b,X,L[0],L[1],R,D)}Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var k=this.gl;if(this.type===k.FLOAT&&o.indexOf(b)>=0&&(k.getExtension("OES_texture_float_linear")||(b=k.NEAREST)),n.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var k=this.gl;if(this.type===k.FLOAT&&o.indexOf(b)>=0&&(k.getExtension("OES_texture_float_linear")||(b=k.NEAREST)),n.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var k=this._anisoSamples;if(this._anisoSamples=0|Math.max(b,1),k!==this._anisoSamples){var T=this.gl.getExtension("EXT_texture_filter_anisotropic");T&&this.gl.texParameterf(this.gl.TEXTURE_2D,T.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),p.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),p.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),2!==b.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var k=0;k<2;++k)if(p.indexOf(b[k])<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0],this._wrapT=b[1];var T=this.gl;return this.bind(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,this._wrapS),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(Array.isArray(b)){if(2!==b.length)throw new Error("gl-texture2d: Invalid texture shape")}else b=[0|b,0|b];return u(this,0|b[0],0|b[1]),[0|b[0],0|b[1]]}},width:{get:function(){return this._shape[0]},set:function(b){return u(this,b|=0,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return u(this,this._shape[0],b|=0),b}}}),v.bind=function(b){var k=this.gl;return void 0!==b&&k.activeTexture(k.TEXTURE0+(0|b)),k.bindTexture(k.TEXTURE_2D,this.handle),void 0!==b?0|b:k.getParameter(k.ACTIVE_TEXTURE)-k.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),k=0;b>0;++k,b>>>=1)this._mipLevels.indexOf(k)<0&&this._mipLevels.push(k)},v.setPixels=function(b,k,T,L){var A=this.gl;this.bind(),Array.isArray(k)?(L=T,T=0|k[1],k=0|k[0]):(k=k||0,T=T||0),L=L||0;var I=a(b)?b:b.raw;if(I)this._mipLevels.indexOf(L)<0?(A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(L)):A.texSubImage2D(A.TEXTURE_2D,L,k,T,this.format,this.type,I);else{if(!(b.shape&&b.stride&&b.data))throw new Error("gl-texture2d: Unsupported data type");if(b.shape.length<2||k+b.shape[1]>this._shape[1]>>>L||T+b.shape[0]>this._shape[0]>>>L||k<0||T<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(D,S,C,R,F,H,U,X){var Z=X.dtype,Y=X.shape.slice();if(Y.length<2||Y.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var W=0,te=0,z=f(Y,X.stride.slice());if("float32"===Z?W=D.FLOAT:"float64"===Z?(W=D.FLOAT,z=!1,Z="float32"):"uint8"===Z?W=D.UNSIGNED_BYTE:(W=D.UNSIGNED_BYTE,z=!1,Z="uint8"),2===Y.length)te=D.LUMINANCE,X=e(X.data,Y=[Y[0],Y[1],1],[X.stride[0],X.stride[1],1],X.offset);else{if(3!==Y.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===Y[2])te=D.ALPHA;else if(2===Y[2])te=D.LUMINANCE_ALPHA;else if(3===Y[2])te=D.RGB;else{if(4!==Y[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");te=D.RGBA}}if(te!==D.LUMINANCE&&te!==D.ALPHA||F!==D.LUMINANCE&&F!==D.ALPHA||(te=F),te!==F)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var N=X.size,V=U.indexOf(R)<0;if(V&&U.push(R),W===H&&z)0===X.offset&&X.data.length===N?V?D.texImage2D(D.TEXTURE_2D,R,F,Y[0],Y[1],0,F,H,X.data):D.texSubImage2D(D.TEXTURE_2D,R,S,C,Y[0],Y[1],F,H,X.data):V?D.texImage2D(D.TEXTURE_2D,R,F,Y[0],Y[1],0,F,H,X.data.subarray(X.offset,X.offset+N)):D.texSubImage2D(D.TEXTURE_2D,R,S,C,Y[0],Y[1],F,H,X.data.subarray(X.offset,X.offset+N));else{var Q;Q=H===D.FLOAT?r.mallocFloat32(N):r.mallocUint8(N);var j=e(Q,Y,[Y[2],Y[2]*Y[0],1]);W===D.FLOAT&&H===D.UNSIGNED_BYTE?c(j,X):i.assign(j,X),V?D.texImage2D(D.TEXTURE_2D,R,F,Y[0],Y[1],0,F,H,Q.subarray(0,N)):D.texSubImage2D(D.TEXTURE_2D,R,S,C,Y[0],Y[1],F,H,Q.subarray(0,N)),H===D.FLOAT?r.freeFloat32(Q):r.freeUint8(Q)}}(A,k,T,L,this.format,this.type,this._mipLevels,b)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(g,_,t){"use strict";_.exports=function(e,i,r){i?i.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var o=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(r){if(r.length>o)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<r.length;++n){var p=r[n];if(p.buffer){var a=p.size||4,c=p.type||e.FLOAT,u=!!p.normalized,h=p.stride||0,v=p.offset||0;p.buffer.bind(),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,a,c,u,h,v)}else{if("number"==typeof p)e.vertexAttrib1f(n,p);else if(1===p.length)e.vertexAttrib1f(n,p[0]);else if(2===p.length)e.vertexAttrib2f(n,p[0],p[1]);else if(3===p.length)e.vertexAttrib3f(n,p[0],p[1],p[2]);else{if(4!==p.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(n,p[0],p[1],p[2],p[3])}e.disableVertexAttribArray(n)}}for(;n<o;++n)e.disableVertexAttribArray(n)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),n=0;n<o;++n)e.disableVertexAttribArray(n)}},{}],148:[function(g,_,t){"use strict";var e=g("./do-bind.js");function i(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},i.prototype.update=function(r,o,n){this._elements=o,this._attributes=r,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(r,o,n){n=n||0;var p=this.gl;this._elements?p.drawElements(r,o,this._elementsType,n):p.drawArrays(r,n,o)},_.exports=function(r){return new i(r)}},{"./do-bind.js":147}],149:[function(g,_,t){"use strict";var e=g("./do-bind.js");function i(o,n,p,s,a,c){this.location=o,this.dimension=n,this.a=p,this.b=s,this.c=a,this.d=c}function r(o,n,p){this.gl=o,this._ext=n,this.handle=p,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}i.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(o,n,p){if(this.bind(),e(this.gl,n,o),this.unbind(),this._attribs.length=0,o)for(var s=0;s<o.length;++s){var a=o[s];"number"==typeof a?this._attribs.push(new i(s,1,a)):Array.isArray(a)&&this._attribs.push(new i(s,a.length,a[0],a[1],a[2],a[3]))}this._useElements=!!n,this._elementsType=p||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(o,n,p){p=p||0;var s=this.gl;this._useElements?s.drawElements(o,n,this._elementsType,p):s.drawArrays(o,p,n)},_.exports=function(o,n){return new r(o,n,n.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(g,_,t){"use strict";var e=g("./lib/vao-native.js"),i=g("./lib/vao-emulated.js");function r(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}_.exports=function(o,n,p,s){var a,c=o.createVertexArray?new r(o):o.getExtension("OES_vertex_array_object");return(a=c?e(o,c):i(o)).update(n,p,s),a}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}},{}],152:[function(g,_,t){_.exports=function(o,n){var p=e(o[0],o[1],o[2]),s=e(n[0],n[1],n[2]);i(p,p),i(s,s);var a=r(p,s);return a>1?0:Math.acos(a)};var e=g("./fromValues"),i=g("./normalize"),r=g("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(g,_,t){_.exports=function(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e[2]=Math.ceil(i[2]),e}},{}],154:[function(g,_,t){_.exports=function(e){var i=new Float32Array(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i}},{}],155:[function(g,_,t){_.exports=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e}},{}],156:[function(g,_,t){_.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2],s=r[0],a=r[1],c=r[2];return e[0]=n*c-p*a,e[1]=p*s-o*c,e[2]=o*a-n*s,e}},{}],158:[function(g,_,t){_.exports=g("./distance")},{"./distance":159}],159:[function(g,_,t){_.exports=function(e,i){var r=i[0]-e[0],o=i[1]-e[1],n=i[2]-e[2];return Math.sqrt(r*r+o*o+n*n)}},{}],160:[function(g,_,t){_.exports=g("./divide")},{"./divide":161}],161:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]/r[0],e[1]=i[1]/r[1],e[2]=i[2]/r[2],e}},{}],162:[function(g,_,t){_.exports=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]}},{}],163:[function(g,_,t){_.exports=1e-6},{}],164:[function(g,_,t){_.exports=function(i,r){var o=i[0],n=i[1],p=i[2],s=r[0],a=r[1],c=r[2];return Math.abs(o-s)<=e*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(n-a)<=e*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(p-c)<=e*Math.max(1,Math.abs(p),Math.abs(c))};var e=g("./epsilon")},{"./epsilon":163}],165:[function(g,_,t){_.exports=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]}},{}],166:[function(g,_,t){_.exports=function(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e[2]=Math.floor(i[2]),e}},{}],167:[function(g,_,t){_.exports=function(i,r,o,n,p,s){var a,c;for(r||(r=3),o||(o=0),c=n?Math.min(n*r+o,i.length):i.length,a=o;a<c;a+=r)e[0]=i[a],e[1]=i[a+1],e[2]=i[a+2],p(e,e,s),i[a]=e[0],i[a+1]=e[1],i[a+2]=e[2];return i};var e=g("./create")()},{"./create":156}],168:[function(g,_,t){_.exports=function(e,i,r){var o=new Float32Array(3);return o[0]=e,o[1]=i,o[2]=r,o}},{}],169:[function(g,_,t){_.exports={EPSILON:g("./epsilon"),create:g("./create"),clone:g("./clone"),angle:g("./angle"),fromValues:g("./fromValues"),copy:g("./copy"),set:g("./set"),equals:g("./equals"),exactEquals:g("./exactEquals"),add:g("./add"),subtract:g("./subtract"),sub:g("./sub"),multiply:g("./multiply"),mul:g("./mul"),divide:g("./divide"),div:g("./div"),min:g("./min"),max:g("./max"),floor:g("./floor"),ceil:g("./ceil"),round:g("./round"),scale:g("./scale"),scaleAndAdd:g("./scaleAndAdd"),distance:g("./distance"),dist:g("./dist"),squaredDistance:g("./squaredDistance"),sqrDist:g("./sqrDist"),length:g("./length"),len:g("./len"),squaredLength:g("./squaredLength"),sqrLen:g("./sqrLen"),negate:g("./negate"),inverse:g("./inverse"),normalize:g("./normalize"),dot:g("./dot"),cross:g("./cross"),lerp:g("./lerp"),random:g("./random"),transformMat4:g("./transformMat4"),transformMat3:g("./transformMat3"),transformQuat:g("./transformQuat"),rotateX:g("./rotateX"),rotateY:g("./rotateY"),rotateZ:g("./rotateZ"),forEach:g("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(g,_,t){_.exports=function(e,i){return e[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],e}},{}],171:[function(g,_,t){_.exports=g("./length")},{"./length":172}],172:[function(g,_,t){_.exports=function(e){var i=e[0],r=e[1],o=e[2];return Math.sqrt(i*i+r*r+o*o)}},{}],173:[function(g,_,t){_.exports=function(e,i,r,o){var n=i[0],p=i[1],s=i[2];return e[0]=n+o*(r[0]-n),e[1]=p+o*(r[1]-p),e[2]=s+o*(r[2]-s),e}},{}],174:[function(g,_,t){_.exports=function(e,i,r){return e[0]=Math.max(i[0],r[0]),e[1]=Math.max(i[1],r[1]),e[2]=Math.max(i[2],r[2]),e}},{}],175:[function(g,_,t){_.exports=function(e,i,r){return e[0]=Math.min(i[0],r[0]),e[1]=Math.min(i[1],r[1]),e[2]=Math.min(i[2],r[2]),e}},{}],176:[function(g,_,t){_.exports=g("./multiply")},{"./multiply":177}],177:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]*r[0],e[1]=i[1]*r[1],e[2]=i[2]*r[2],e}},{}],178:[function(g,_,t){_.exports=function(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e}},{}],179:[function(g,_,t){_.exports=function(e,i){var r=i[0],o=i[1],n=i[2],p=r*r+o*o+n*n;return p>0&&(p=1/Math.sqrt(p),e[0]=i[0]*p,e[1]=i[1]*p,e[2]=i[2]*p),e}},{}],180:[function(g,_,t){_.exports=function(e,i){i=i||1;var r=2*Math.random()*Math.PI,o=2*Math.random()-1,n=Math.sqrt(1-o*o)*i;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=o*i,e}},{}],181:[function(g,_,t){_.exports=function(e,i,r,o){var n=r[1],p=r[2],s=i[1]-n,a=i[2]-p,c=Math.sin(o),u=Math.cos(o);return e[0]=i[0],e[1]=n+s*u-a*c,e[2]=p+s*c+a*u,e}},{}],182:[function(g,_,t){_.exports=function(e,i,r,o){var n=r[0],p=r[2],s=i[0]-n,a=i[2]-p,c=Math.sin(o),u=Math.cos(o);return e[0]=n+a*c+s*u,e[1]=i[1],e[2]=p+a*u-s*c,e}},{}],183:[function(g,_,t){_.exports=function(e,i,r,o){var n=r[0],p=r[1],s=i[0]-n,a=i[1]-p,c=Math.sin(o),u=Math.cos(o);return e[0]=n+s*u-a*c,e[1]=p+s*c+a*u,e[2]=i[2],e}},{}],184:[function(g,_,t){_.exports=function(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e[2]=Math.round(i[2]),e}},{}],185:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e}},{}],186:[function(g,_,t){_.exports=function(e,i,r,o){return e[0]=i[0]+r[0]*o,e[1]=i[1]+r[1]*o,e[2]=i[2]+r[2]*o,e}},{}],187:[function(g,_,t){_.exports=function(e,i,r,o){return e[0]=i,e[1]=r,e[2]=o,e}},{}],188:[function(g,_,t){_.exports=g("./squaredDistance")},{"./squaredDistance":190}],189:[function(g,_,t){_.exports=g("./squaredLength")},{"./squaredLength":191}],190:[function(g,_,t){_.exports=function(e,i){var r=i[0]-e[0],o=i[1]-e[1],n=i[2]-e[2];return r*r+o*o+n*n}},{}],191:[function(g,_,t){_.exports=function(e){var i=e[0],r=e[1],o=e[2];return i*i+r*r+o*o}},{}],192:[function(g,_,t){_.exports=g("./subtract")},{"./subtract":193}],193:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e}},{}],194:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2];return e[0]=o*r[0]+n*r[3]+p*r[6],e[1]=o*r[1]+n*r[4]+p*r[7],e[2]=o*r[2]+n*r[5]+p*r[8],e}},{}],195:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2],s=r[3]*o+r[7]*n+r[11]*p+r[15];return e[0]=(r[0]*o+r[4]*n+r[8]*p+r[12])/(s=s||1),e[1]=(r[1]*o+r[5]*n+r[9]*p+r[13])/s,e[2]=(r[2]*o+r[6]*n+r[10]*p+r[14])/s,e}},{}],196:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2],s=r[0],a=r[1],c=r[2],u=r[3],h=u*o+a*p-c*n,v=u*n+c*o-s*p,f=u*p+s*n-a*o,l=-s*o-a*n-c*p;return e[0]=h*u+l*-s+v*-c-f*-a,e[1]=v*u+l*-a+f*-s-h*-c,e[2]=f*u+l*-c+h*-a-v*-s,e}},{}],197:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e}},{}],198:[function(g,_,t){_.exports=function(e){var i=new Float32Array(4);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i}},{}],199:[function(g,_,t){_.exports=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e}},{}],200:[function(g,_,t){_.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(g,_,t){_.exports=function(e,i){var r=i[0]-e[0],o=i[1]-e[1],n=i[2]-e[2],p=i[3]-e[3];return Math.sqrt(r*r+o*o+n*n+p*p)}},{}],202:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]/r[0],e[1]=i[1]/r[1],e[2]=i[2]/r[2],e[3]=i[3]/r[3],e}},{}],203:[function(g,_,t){_.exports=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]}},{}],204:[function(g,_,t){_.exports=function(e,i,r,o){var n=new Float32Array(4);return n[0]=e,n[1]=i,n[2]=r,n[3]=o,n}},{}],205:[function(g,_,t){_.exports={create:g("./create"),clone:g("./clone"),fromValues:g("./fromValues"),copy:g("./copy"),set:g("./set"),add:g("./add"),subtract:g("./subtract"),multiply:g("./multiply"),divide:g("./divide"),min:g("./min"),max:g("./max"),scale:g("./scale"),scaleAndAdd:g("./scaleAndAdd"),distance:g("./distance"),squaredDistance:g("./squaredDistance"),length:g("./length"),squaredLength:g("./squaredLength"),negate:g("./negate"),inverse:g("./inverse"),normalize:g("./normalize"),dot:g("./dot"),lerp:g("./lerp"),random:g("./random"),transformMat4:g("./transformMat4"),transformQuat:g("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(g,_,t){_.exports=function(e,i){return e[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],e[3]=1/i[3],e}},{}],207:[function(g,_,t){_.exports=function(e){var i=e[0],r=e[1],o=e[2],n=e[3];return Math.sqrt(i*i+r*r+o*o+n*n)}},{}],208:[function(g,_,t){_.exports=function(e,i,r,o){var n=i[0],p=i[1],s=i[2],a=i[3];return e[0]=n+o*(r[0]-n),e[1]=p+o*(r[1]-p),e[2]=s+o*(r[2]-s),e[3]=a+o*(r[3]-a),e}},{}],209:[function(g,_,t){_.exports=function(e,i,r){return e[0]=Math.max(i[0],r[0]),e[1]=Math.max(i[1],r[1]),e[2]=Math.max(i[2],r[2]),e[3]=Math.max(i[3],r[3]),e}},{}],210:[function(g,_,t){_.exports=function(e,i,r){return e[0]=Math.min(i[0],r[0]),e[1]=Math.min(i[1],r[1]),e[2]=Math.min(i[2],r[2]),e[3]=Math.min(i[3],r[3]),e}},{}],211:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]*r[0],e[1]=i[1]*r[1],e[2]=i[2]*r[2],e[3]=i[3]*r[3],e}},{}],212:[function(g,_,t){_.exports=function(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=-i[3],e}},{}],213:[function(g,_,t){_.exports=function(e,i){var r=i[0],o=i[1],n=i[2],p=i[3],s=r*r+o*o+n*n+p*p;return s>0&&(s=1/Math.sqrt(s),e[0]=r*s,e[1]=o*s,e[2]=n*s,e[3]=p*s),e}},{}],214:[function(g,_,t){var e=g("./normalize"),i=g("./scale");_.exports=function(r,o){return o=o||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),e(r,r),i(r,r,o),r}},{"./normalize":213,"./scale":215}],215:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e}},{}],216:[function(g,_,t){_.exports=function(e,i,r,o){return e[0]=i[0]+r[0]*o,e[1]=i[1]+r[1]*o,e[2]=i[2]+r[2]*o,e[3]=i[3]+r[3]*o,e}},{}],217:[function(g,_,t){_.exports=function(e,i,r,o,n){return e[0]=i,e[1]=r,e[2]=o,e[3]=n,e}},{}],218:[function(g,_,t){_.exports=function(e,i){var r=i[0]-e[0],o=i[1]-e[1],n=i[2]-e[2],p=i[3]-e[3];return r*r+o*o+n*n+p*p}},{}],219:[function(g,_,t){_.exports=function(e){var i=e[0],r=e[1],o=e[2],n=e[3];return i*i+r*r+o*o+n*n}},{}],220:[function(g,_,t){_.exports=function(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e}},{}],221:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2],s=i[3];return e[0]=r[0]*o+r[4]*n+r[8]*p+r[12]*s,e[1]=r[1]*o+r[5]*n+r[9]*p+r[13]*s,e[2]=r[2]*o+r[6]*n+r[10]*p+r[14]*s,e[3]=r[3]*o+r[7]*n+r[11]*p+r[15]*s,e}},{}],222:[function(g,_,t){_.exports=function(e,i,r){var o=i[0],n=i[1],p=i[2],s=r[0],a=r[1],c=r[2],u=r[3],h=u*o+a*p-c*n,v=u*n+c*o-s*p,f=u*p+s*n-a*o,l=-s*o-a*n-c*p;return e[0]=h*u+l*-s+v*-c-f*-a,e[1]=v*u+l*-a+f*-s-h*-c,e[2]=f*u+l*-c+h*-a-v*-s,e[3]=i[3],e}},{}],223:[function(g,_,t){var e=g("glsl-tokenizer"),i=g("atob-lite");_.exports=function(r){for(var o=Array.isArray(r)?r:e(r),n=0;n<o.length;n++){var p=o[n];if("preprocessor"===p.type){var s=p.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var c=s[2];return(s[1]?i(c):c).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(g,_,t){_.exports=function(s){var a,c,u,h=0,v=0,f=999,l=[],x=[],m=1,w=0,b=0,k=!1,T=!1,L="",A=r,I=e;"300 es"===(s=s||{}).version&&(A=n,I=o);var D={},S={};for(h=0;h<A.length;h++)D[A[h]]=!0;for(h=0;h<I.length;h++)S[I[h]]=!0;return function(N){return x=[],null!==N?function(V){var Q;for(h=0,V.toString&&(V=V.toString()),L+=V.replace(/\r\n/g,"\n"),u=L.length;a=L[h],h<u;){switch(Q=h,f){case 0:h="/"===a&&"*"===c?(l.push(a),C(l.join("")),f=999,h+1):(l.push(a),c=a,h+1);break;case 1:case 2:h="\r"!==a&&"\n"!==a||"\\"===c?(l.push(a),c=a,h+1):(C(l.join("")),f=999,h);break;case 3:h=X();break;case 4:h="."===a||/[eE]/.test(a)?(l.push(a),f=5,c=a,h+1):"x"===a&&1===l.length&&"0"===l[0]?(f=11,l.push(a),c=a,h+1):/[^\d]/.test(a)?(C(l.join("")),f=999,h):(l.push(a),c=a,h+1);break;case 11:h=/[^a-fA-F0-9]/.test(a)?(C(l.join("")),f=999,h):(l.push(a),c=a,h+1);break;case 5:"f"===a&&(l.push(a),c=a,h+=1),h=/[eE]/.test(a)?(l.push(a),c=a,h+1):("-"!==a&&"+"!==a||!/[eE]/.test(c))&&/[^\d]/.test(a)?(C(l.join("")),f=999,h):(l.push(a),c=a,h+1);break;case 9999:h=z();break;case 9:h=/[^\s]/g.test(a)?(C(l.join("")),f=999,h):(l.push(a),c=a,h+1);break;case 999:l=l.length?[]:l,h="/"===c&&"*"===a?(b=v+h-1,f=0,c=a,h+1):"/"===c&&"/"===a?(b=v+h-1,f=1,c=a,h+1):"#"===a?(f=2,b=v+h,h):/\s/.test(a)?(f=9,b=v+h,h):(k=/\d/.test(a),T=/[^\w_]/.test(a),b=v+h,f=k?4:T?3:9999,h)}if(Q!==h)switch(L[Q]){case"\n":w=0,++m;break;default:++w}}return v+=h,L=L.slice(h),x}(N):(l.length&&C(l.join("")),f=10,C("(eof)"),x)};function C(N){N.length&&x.push({type:p[f],data:N,position:b,line:m,column:w})}function X(){if("."===c&&/\d/.test(a))return f=5,h;if("/"===c&&"*"===a)return f=0,h;if("/"===c&&"/"===a)return f=1,h;if("."===a&&l.length){for(;Z(l););return f=5,h}if(";"===a||")"===a||"("===a){if(l.length)for(;Z(l););return C(a),f=999,h+1}var N=2===l.length&&"="!==a;if(/[\w_\d\s]/.test(a)||N){for(;Z(l););return f=999,h}return l.push(a),c=a,h+1}function Z(N){for(var V,Q,j=0;;){if(V=i.indexOf(N.slice(0,N.length+j).join("")),Q=i[V],-1===V){if(j--+N.length>0)continue;Q=N.slice(0,1).join("")}return C(Q),b+=Q.length,(l=l.slice(Q.length)).length}}function z(){if(/[^\d\w_]/.test(a)){var N=l.join("");return f=S[N]?8:D[N]?7:6,C(l.join("")),f=999,h}return l.push(a),c=a,h+1}};var e=g("./lib/literals"),i=g("./lib/operators"),r=g("./lib/builtins"),o=g("./lib/literals-300es"),n=g("./lib/builtins-300es"),p=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(g,_,t){var e=g("./builtins");e=e.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),_.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(g,_,t){_.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(g,_,t){var e=g("./literals");_.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(g,_,t){_.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(g,_,t){_.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(g,_,t){var e=g("./index");_.exports=function(i,r){var o=e(r),n=[];return(n=n.concat(o(i))).concat(o(null))}},{"./index":224}],231:[function(g,_,t){_.exports=function(e){"string"==typeof e&&(e=[e]);for(var i=[].slice.call(arguments,1),r=[],o=0;o<e.length-1;o++)r.push(e[o],i[o]||"");return r.push(e[o]),r.join("")}},{}],232:[function(g,_,t){"use strict";var e=g("is-browser");_.exports=e&&function(){var i=!1;try{var r=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch(o){i=!1}return i}()},{"is-browser":236}],233:[function(g,_,t){"use strict";_.exports=function(c,u){var h=c.length;if(0===h)throw new Error("Must have at least d+1 points");var v=c[0].length;if(h<=v)throw new Error("Must input at least d+1 points");var f=c.slice(0,v+1),l=e.apply(void 0,f);if(0===l)throw new Error("Input not in general position");for(var x=new Array(v+1),m=0;m<=v;++m)x[m]=m;l<0&&(x[0]=1,x[1]=0);var w=new r(x,new Array(v+1),!1),b=w.adjacent,k=new Array(v+2);for(m=0;m<=v;++m){for(var T=x.slice(),L=0;L<=v;++L)L===m&&(T[L]=-1);var A=T[0];T[0]=T[1],T[1]=A;var I=new r(T,new Array(v+1),!0);b[m]=I,k[m]=I}for(k[v+1]=w,m=0;m<=v;++m){T=b[m].vertices;var D=b[m].adjacent;for(L=0;L<=v;++L){var S=T[L];if(S<0)D[L]=w;else for(var C=0;C<=v;++C)b[C].vertices.indexOf(S)<0&&(D[L]=b[C])}}var R=new s(v,f,k),F=!!u;for(m=v+1;m<h;++m)R.insert(c[m],F);return R.boundary()};var e=g("robust-orientation"),i=g("simplicial-complex").compareCells;function r(c,u,h){this.vertices=c,this.adjacent=u,this.boundary=h,this.lastVisited=-1}function o(c,u,h){this.vertices=c,this.cell=u,this.index=h}function n(c,u){return i(c.vertices,u.vertices)}r.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var u=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=u};var p=[];function s(c,u,h){this.dimension=c,this.vertices=u,this.simplices=h,this.interior=h.filter(function(x){return!x.boundary}),this.tuple=new Array(c+1);for(var v=0;v<=c;++v)this.tuple[v]=this.vertices[v];var f,x,l=p[c];l||(l=p[c]=((f=e[c+1])||(f=e),x=f,function(){return x.apply(this,this.tuple)})),this.orient=l}var a=s.prototype;a.handleBoundaryDegeneracy=function(c,u){var h=this.dimension,v=this.vertices.length-1,f=this.tuple,l=this.vertices,x=[c];for(c.lastVisited=-v;x.length>0;)for(var m=(c=x.pop()).adjacent,w=0;w<=h;++w){var b=m[w];if(b.boundary&&!(b.lastVisited<=-v)){for(var k=b.vertices,T=0;T<=h;++T){var L=k[T];f[T]=L<0?u:l[L]}var A=this.orient();if(A>0)return b;b.lastVisited=-v,0===A&&x.push(b)}}return null},a.walk=function(c,u){var h=this.vertices.length-1,v=this.dimension,f=this.vertices,l=this.tuple,x=u?this.interior.length*Math.random()|0:this.interior.length-1,m=this.interior[x];e:for(;!m.boundary;){for(var w=m.vertices,b=m.adjacent,k=0;k<=v;++k)l[k]=f[w[k]];for(m.lastVisited=h,k=0;k<=v;++k){var T=b[k];if(!(T.lastVisited>=h)){var L=l[k];l[k]=c;var A=this.orient();if(l[k]=L,A<0){m=T;continue e}T.lastVisited=T.boundary?-h:h}}return}return m},a.addPeaks=function(c,u){var h=this.vertices.length-1,v=this.dimension,f=this.vertices,l=this.tuple,x=this.interior,m=this.simplices,w=[u];u.lastVisited=h,u.vertices[u.vertices.indexOf(-1)]=h,u.boundary=!1,x.push(u);for(var b=[];w.length>0;){var k=(u=w.pop()).vertices,T=u.adjacent,L=k.indexOf(h);if(!(L<0))for(var A=0;A<=v;++A)if(A!==L){var I=T[A];if(I.boundary&&!(I.lastVisited>=h)){var D=I.vertices;if(I.lastVisited!==-h){for(var S=0,C=0;C<=v;++C)D[C]<0?(S=C,l[C]=c):l[C]=f[D[C]];if(this.orient()>0){D[S]=h,I.boundary=!1,x.push(I),w.push(I),I.lastVisited=h;continue}I.lastVisited=-h}var R=I.adjacent,F=k.slice(),H=T.slice(),U=new r(F,H,!0);m.push(U);var X=R.indexOf(u);if(!(X<0))for(R[X]=U,H[L]=I,F[A]=-1,H[A]=u,T[A]=U,U.flip(),C=0;C<=v;++C){var Z=F[C];if(!(Z<0||Z===h)){for(var Y=new Array(v-1),W=0,te=0;te<=v;++te){var z=F[te];z<0||te===C||(Y[W++]=z)}b.push(new o(Y,U,C))}}}}}for(b.sort(n),A=0;A+1<b.length;A+=2){var N=b[A],V=b[A+1];N.index<0||V.index<0||(N.cell.adjacent[N.index]=V.cell,V.cell.adjacent[V.index]=N.cell)}},a.insert=function(c,u){var h=this.vertices;h.push(c);var v=this.walk(c,u);if(v){for(var f=this.dimension,l=this.tuple,x=0;x<=f;++x){var m=v.vertices[x];l[x]=m<0?c:h[m]}var w=this.orient(l);w<0||(0!==w||(v=this.handleBoundaryDegeneracy(v,c)))&&this.addPeaks(c,v)}},a.boundary=function(){for(var c=this.dimension,u=[],h=this.simplices,v=h.length,f=0;f<v;++f){var l=h[f];if(l.boundary){for(var x=new Array(c),m=l.vertices,w=0,b=0,k=0;k<=c;++k)m[k]>=0?x[w++]=m[k]:b=1&k;if(b===(1&c)){var T=x[0];x[0]=x[1],x[1]=T}u.push(x)}}return u}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(g,_,t){"use strict";var e=g("binary-search-bounds");function i(w,b,k,T,L){this.mid=w,this.left=b,this.right=k,this.leftPoints=T,this.rightPoints=L,this.count=(b?b.count:0)+(k?k.count:0)+T.length}_.exports=function(w){return new x(w&&0!==w.length?l(w):null)};var r=i.prototype;function o(w,b){w.mid=b.mid,w.left=b.left,w.right=b.right,w.leftPoints=b.leftPoints,w.rightPoints=b.rightPoints,w.count=b.count}function n(w,b){var k=l(b);w.mid=k.mid,w.left=k.left,w.right=k.right,w.leftPoints=k.leftPoints,w.rightPoints=k.rightPoints,w.count=k.count}function p(w,b){var k=w.intervals([]);k.push(b),n(w,k)}function s(w,b){var k=w.intervals([]),T=k.indexOf(b);return T<0?0:(k.splice(T,1),n(w,k),1)}function a(w,b,k){for(var T=0;T<w.length&&w[T][0]<=b;++T){var L=k(w[T]);if(L)return L}}function c(w,b,k){for(var T=w.length-1;T>=0&&w[T][1]>=b;--T){var L=k(w[T]);if(L)return L}}function u(w,b){for(var k=0;k<w.length;++k){var T=b(w[k]);if(T)return T}}function h(w,b){return w-b}function v(w,b){return w[0]-b[0]||w[1]-b[1]}function f(w,b){return w[1]-b[1]||w[0]-b[0]}function l(w){if(0===w.length)return null;for(var b=[],k=0;k<w.length;++k)b.push(w[k][0],w[k][1]);b.sort(h);var T=b[b.length>>1],L=[],A=[],I=[];for(k=0;k<w.length;++k){var D=w[k];D[1]<T?L.push(D):T<D[0]?A.push(D):I.push(D)}var S=I,C=I.slice();return S.sort(v),C.sort(f),new i(T,l(L),l(A),S,C)}function x(w){this.root=w}r.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},r.insert=function(w){var b=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?p(this,w):this.left.insert(w):this.left=l([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?p(this,w):this.right.insert(w):this.right=l([w]);else{var k=e.ge(this.leftPoints,w,v),T=e.ge(this.rightPoints,w,f);this.leftPoints.splice(k,0,w),this.rightPoints.splice(T,0,w)}},r.remove=function(w){var b=this.count-this.leftPoints;if(w[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(b-1)?s(this,w):2===(A=this.left.remove(w))?(this.left=null,this.count-=1,1):(1===A&&(this.count-=1),A):0;if(w[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(b-1)?s(this,w):2===(A=this.right.remove(w))?(this.right=null,this.count-=1,1):(1===A&&(this.count-=1),A):0;if(1===this.count)return this.leftPoints[0]===w?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===w){if(this.left&&this.right){for(var k=this,T=this.left;T.right;)k=T,T=T.right;if(k===this)T.right=this.right;else{var L=this.left,A=this.right;k.count-=T.count,k.right=T.left,T.left=L,T.right=A}o(this,T),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else o(this,this.left?this.left:this.right);return 1}for(L=e.ge(this.leftPoints,w,v);L<this.leftPoints.length&&this.leftPoints[L][0]===w[0];++L)if(this.leftPoints[L]===w)for(this.count-=1,this.leftPoints.splice(L,1),A=e.ge(this.rightPoints,w,f);A<this.rightPoints.length&&this.rightPoints[A][1]===w[1];++A)if(this.rightPoints[A]===w)return this.rightPoints.splice(A,1),1;return 0},r.queryPoint=function(w,b){return w<this.mid?this.left&&(k=this.left.queryPoint(w,b))?k:a(this.leftPoints,w,b):w>this.mid?this.right&&(k=this.right.queryPoint(w,b))?k:c(this.rightPoints,w,b):u(this.leftPoints,b);var k},r.queryInterval=function(w,b,k){var T;return w<this.mid&&this.left&&(T=this.left.queryInterval(w,b,k))||b>this.mid&&this.right&&(T=this.right.queryInterval(w,b,k))?T:b<this.mid?a(this.leftPoints,b,k):w>this.mid?c(this.rightPoints,w,k):u(this.leftPoints,k)};var m=x.prototype;m.insert=function(w){this.root?this.root.insert(w):this.root=new i(w[0],null,null,[w],[w])},m.remove=function(w){if(this.root){var b=this.root.remove(w);return 2===b&&(this.root=null),0!==b}return!1},m.queryPoint=function(w,b){if(this.root)return this.root.queryPoint(w,b)},m.queryInterval=function(w,b,k){if(w<=b&&this.root)return this.root.queryInterval(w,b,k)},Object.defineProperty(m,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(m,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(g,_,t){"use strict";_.exports=function(e){for(var i=new Array(e),r=0;r<e;++r)i[r]=r;return i}},{}],236:[function(g,_,t){_.exports=!0},{}],237:[function(g,_,t){function e(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}_.exports=function(i){return null!=i&&(e(i)||"function"==typeof(r=i).readFloatLE&&"function"==typeof r.slice&&e(r.slice(0,0))||!!i._isBuffer);var r}},{}],238:[function(g,_,t){"use strict";_.exports=r,_.exports.isMobile=r,_.exports.default=r;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function r(o){o||(o={});var n=o.ua;if(n||"undefined"==typeof navigator||(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),"string"!=typeof n)return!1;var p=o.tablet?i.test(n):e.test(n);return!p&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==n.indexOf("Macintosh")&&-1!==n.indexOf("Safari")&&(p=!0),p}},{}],239:[function(g,_,t){"use strict";_.exports=function(e){for(var i,r=e.length,o=0;o<r;o++)if(((i=e.charCodeAt(o))<9||i>13)&&32!==i&&133!==i&&160!==i&&5760!==i&&6158!==i&&(i<8192||i>8205)&&8232!==i&&8233!==i&&8239!==i&&8287!==i&&8288!==i&&12288!==i&&65279!==i)return!1;return!0}},{}],240:[function(g,_,t){_.exports=function(e,i,r){return e*(1-r)+i*r}},{}],241:[function(g,_,t){var e=g("./normalize"),i=g("gl-mat4/create"),r=g("gl-mat4/clone"),o=g("gl-mat4/determinant"),n=g("gl-mat4/invert"),p=g("gl-mat4/transpose"),s={length:g("gl-vec3/length"),normalize:g("gl-vec3/normalize"),dot:g("gl-vec3/dot"),cross:g("gl-vec3/cross")},a=i(),c=i(),u=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];function f(l,x,m,w,b){l[0]=x[0]*w+m[0]*b,l[1]=x[1]*w+m[1]*b,l[2]=x[2]*w+m[2]*b}_.exports=function(l,x,m,w,b,k){if(x||(x=[0,0,0]),m||(m=[0,0,0]),w||(w=[0,0,0]),b||(b=[0,0,0,1]),k||(k=[0,0,0,1]),!e(a,l)||(r(c,a),c[3]=0,c[7]=0,c[11]=0,c[15]=1,Math.abs(o(c)<1e-8)))return!1;var T,L,A,I,D,S,C,te,z,R=a[3],F=a[7],H=a[11],U=a[12],X=a[13],Z=a[14],Y=a[15];if(0!==R||0!==F||0!==H){if(u[0]=R,u[1]=F,u[2]=H,u[3]=Y,!n(c,c))return!1;p(c,c),I=(L=u)[0],(T=b)[0]=(A=c)[0]*I+A[4]*(D=L[1])+A[8]*(S=L[2])+A[12]*(C=L[3]),T[1]=A[1]*I+A[5]*D+A[9]*S+A[13]*C,T[2]=A[2]*I+A[6]*D+A[10]*S+A[14]*C,T[3]=A[3]*I+A[7]*D+A[11]*S+A[15]*C}else b[0]=b[1]=b[2]=0,b[3]=1;if(x[0]=U,x[1]=X,x[2]=Z,(te=h)[0][0]=(z=a)[0],te[0][1]=z[1],te[0][2]=z[2],te[1][0]=z[4],te[1][1]=z[5],te[1][2]=z[6],te[2][0]=z[8],te[2][1]=z[9],te[2][2]=z[10],m[0]=s.length(h[0]),s.normalize(h[0],h[0]),w[0]=s.dot(h[0],h[1]),f(h[1],h[1],h[0],1,-w[0]),m[1]=s.length(h[1]),s.normalize(h[1],h[1]),w[0]/=m[1],w[1]=s.dot(h[0],h[2]),f(h[2],h[2],h[0],1,-w[1]),w[2]=s.dot(h[1],h[2]),f(h[2],h[2],h[1],1,-w[2]),m[2]=s.length(h[2]),s.normalize(h[2],h[2]),w[1]/=m[2],w[2]/=m[2],s.cross(v,h[1],h[2]),s.dot(h[0],v)<0)for(var W=0;W<3;W++)m[W]*=-1,h[W][0]*=-1,h[W][1]*=-1,h[W][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(k[0]=-k[0]),h[0][2]>h[2][0]&&(k[1]=-k[1]),h[1][0]>h[0][1]&&(k[2]=-k[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(g,_,t){_.exports=function(e,i){var r=i[15];if(0===r)return!1;for(var o=1/r,n=0;n<16;n++)e[n]=i[n]*o;return!0}},{}],243:[function(g,_,t){var e=g("gl-vec3/lerp"),i=g("mat4-recompose"),r=g("mat4-decompose"),o=g("gl-mat4/determinant"),n=g("quat-slerp"),p=c(),s=c(),a=c();function c(){return{translate:u(),scale:u(1),skew:u(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function u(h){return[h||0,h||0,h||0]}_.exports=function(h,v,f,l){if(0===o(v)||0===o(f))return!1;var x=r(v,p.translate,p.scale,p.skew,p.perspective,p.quaternion),m=r(f,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!x||!m||(e(a.translate,p.translate,s.translate,l),e(a.skew,p.skew,s.skew,l),e(a.scale,p.scale,s.scale,l),e(a.perspective,p.perspective,s.perspective,l),n(a.quaternion,p.quaternion,s.quaternion,l),i(h,a.translate,a.scale,a.skew,a.perspective,a.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(g,_,t){var e={identity:g("gl-mat4/identity"),translate:g("gl-mat4/translate"),multiply:g("gl-mat4/multiply"),create:g("gl-mat4/create"),scale:g("gl-mat4/scale"),fromRotationTranslation:g("gl-mat4/fromRotationTranslation")},i=(e.create(),e.create());_.exports=function(r,o,n,p,s,a){return e.identity(r),e.fromRotationTranslation(r,a,o),r[3]=s[0],r[7]=s[1],r[11]=s[2],r[15]=s[3],e.identity(i),0!==p[2]&&(i[9]=p[2],e.multiply(r,r,i)),0!==p[1]&&(i[9]=0,i[8]=p[1],e.multiply(r,r,i)),0!==p[0]&&(i[8]=0,i[4]=p[0],e.multiply(r,r,i)),e.scale(r,r,n),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(g,_,t){"use strict";var e=g("binary-search-bounds"),i=g("mat4-interpolate"),r=g("gl-mat4/invert"),o=g("gl-mat4/rotateX"),n=g("gl-mat4/rotateY"),p=g("gl-mat4/rotateZ"),s=g("gl-mat4/lookAt"),a=g("gl-mat4/translate"),c=(g("gl-mat4/scale"),g("gl-vec3/normalize")),u=[0,0,0];function h(l){this._components=l.slice(),this._time=[0],this.prevMatrix=l.slice(),this.nextMatrix=l.slice(),this.computedMatrix=l.slice(),this.computedInverse=l.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}_.exports=function(l){return new h((l=l||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var v=h.prototype;v.recalcMatrix=function(l){var x=this._time,m=e.le(x,l),w=this.computedMatrix;if(!(m<0)){var b=this._components;if(m===x.length-1)for(var k=16*m,T=0;T<16;++T)w[T]=b[k++];else{var L=x[m+1]-x[m],A=(k=16*m,this.prevMatrix),I=!0;for(T=0;T<16;++T)A[T]=b[k++];var D=this.nextMatrix;for(T=0;T<16;++T)D[T]=b[k++],I=I&&A[T]===D[T];if(L<1e-6||I)for(T=0;T<16;++T)w[T]=A[T];else i(w,A,D,(l-x[m])/L)}var S=this.computedUp;S[0]=w[1],S[1]=w[5],S[2]=w[9],c(S,S);var C=this.computedInverse;r(C,w);var R=this.computedEye,F=C[15];R[0]=C[12]/F,R[1]=C[13]/F,R[2]=C[14]/F;var H=this.computedCenter,U=Math.exp(this.computedRadius[0]);for(T=0;T<3;++T)H[T]=R[T]-w[2+4*T]*U}},v.idle=function(l){if(!(l<this.lastT())){for(var x=this._components,m=x.length-16,w=0;w<16;++w)x.push(x[m++]);this._time.push(l)}},v.flush=function(l){var x=e.gt(this._time,l)-2;x<0||(this._time.splice(0,x),this._components.splice(0,16*x))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(l,x,m,w){this.recalcMatrix(l),this.setMatrix(l,s(this.computedMatrix,x=x||this.computedEye,m=m||u,w=w||this.computedUp));for(var b=0,k=0;k<3;++k)b+=Math.pow(m[k]-x[k],2);b=Math.log(Math.sqrt(b)),this.computedRadius[0]=b},v.rotate=function(l,x,m,w){this.recalcMatrix(l);var b=this.computedInverse;x&&n(b,b,x),m&&o(b,b,m),w&&p(b,b,w),this.setMatrix(l,r(this.computedMatrix,b))};var f=[0,0,0];v.pan=function(l,x,m,w){f[0]=-(x||0),f[1]=-(m||0),f[2]=-(w||0),this.recalcMatrix(l);var b=this.computedInverse;a(b,b,f),this.setMatrix(l,r(b,b))},v.translate=function(l,x,m,w){f[0]=x||0,f[1]=m||0,f[2]=w||0,this.recalcMatrix(l);var b=this.computedMatrix;a(b,b,f),this.setMatrix(l,b)},v.setMatrix=function(l,x){if(!(l<this.lastT())){this._time.push(l);for(var m=0;m<16;++m)this._components.push(x[m])}},v.setDistance=function(l,x){this.computedRadius[0]=x},v.setDistanceLimits=function(l,x){var m=this._limits;m[0]=l,m[1]=x},v.getDistanceLimits=function(l){var x=this._limits;return l?(l[0]=x[0],l[1]=x[1],l):x}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(g,_,t){"use strict";_.exports=function(i){var r=i.length;if(r<3){for(var o=new Array(r),n=0;n<r;++n)o[n]=n;return 2===r&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:o}var p=new Array(r);for(n=0;n<r;++n)p[n]=n;p.sort(function(x,m){return i[x][0]-i[m][0]||i[x][1]-i[m][1]});var s=[p[0],p[1]],a=[p[0],p[1]];for(n=2;n<r;++n){for(var c=p[n],u=i[c],h=s.length;h>1&&e(i[s[h-2]],i[s[h-1]],u)<=0;)h-=1,s.pop();for(s.push(c),h=a.length;h>1&&e(i[a[h-2]],i[a[h-1]],u)>=0;)h-=1,a.pop();a.push(c)}o=new Array(a.length+s.length-2);for(var v=0,f=(n=0,s.length);n<f;++n)o[v++]=s[n];for(var l=a.length-2;l>0;--l)o[v++]=a[l];return o};var e=g("robust-orientation")[3]},{"robust-orientation":284}],247:[function(g,_,t){"use strict";_.exports=function(i,r){r||(r=i,i=window);var o=0,n=0,p=0,s={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function c(k){var T=!1;return"altKey"in k&&(T=T||k.altKey!==s.alt,s.alt=!!k.altKey),"shiftKey"in k&&(T=T||k.shiftKey!==s.shift,s.shift=!!k.shiftKey),"ctrlKey"in k&&(T=T||k.ctrlKey!==s.control,s.control=!!k.ctrlKey),"metaKey"in k&&(T=T||k.metaKey!==s.meta,s.meta=!!k.metaKey),T}function u(k,T){var L=e.x(T),A=e.y(T);"buttons"in T&&(k=0|T.buttons),(k!==o||L!==n||A!==p||c(T))&&(o=0|k,n=L||0,p=A||0,r&&r(o,n,p,s))}function h(k){u(0,k)}function v(){(o||n||p||s.shift||s.alt||s.meta||s.control)&&(n=p=0,o=0,s.shift=s.alt=s.control=s.meta=!1,r&&r(0,0,0,s))}function f(k){c(k)&&r&&r(o,n,p,s)}function l(k){0===e.buttons(k)?u(0,k):u(o,k)}function x(k){u(o|e.buttons(k),k)}function m(k){u(o&~e.buttons(k),k)}function w(){a||(a=!0,i.addEventListener("mousemove",l),i.addEventListener("mousedown",x),i.addEventListener("mouseup",m),i.addEventListener("mouseleave",h),i.addEventListener("mouseenter",h),i.addEventListener("mouseout",h),i.addEventListener("mouseover",h),i.addEventListener("blur",v),i.addEventListener("keyup",f),i.addEventListener("keydown",f),i.addEventListener("keypress",f),i!==window&&(window.addEventListener("blur",v),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}w();var b={element:i};return Object.defineProperties(b,{enabled:{get:function(){return a},set:function(k){k?w():!a||(a=!1,i.removeEventListener("mousemove",l),i.removeEventListener("mousedown",x),i.removeEventListener("mouseup",m),i.removeEventListener("mouseleave",h),i.removeEventListener("mouseenter",h),i.removeEventListener("mouseout",h),i.removeEventListener("mouseover",h),i.removeEventListener("blur",v),i.removeEventListener("keyup",f),i.removeEventListener("keydown",f),i.removeEventListener("keypress",f),i!==window&&(window.removeEventListener("blur",v),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),b};var e=g("mouse-event")},{"mouse-event":249}],248:[function(g,_,t){var e={left:0,top:0};_.exports=function(i,r,o){r=r||i.currentTarget||i.srcElement,Array.isArray(o)||(o=[0,0]);var a,n=i.clientX||0,p=i.clientY||0,s=(a=r)===window||a===document||a===document.body?e:a.getBoundingClientRect();return o[0]=n-s.left,o[1]=p-s.top,o}},{}],249:[function(g,_,t){"use strict";function e(i){return i.target||i.srcElement||window}t.buttons=function(i){if("object"==typeof i){if("buttons"in i)return i.buttons;if("which"in i){if(2===(r=i.which))return 4;if(3===r)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if(1===(r=i.button))return 4;if(2===r)return 2;if(r>=0)return 1<<r}}return 0},t.element=e,t.x=function(i){if("object"==typeof i){if("offsetX"in i)return i.offsetX;var r=e(i).getBoundingClientRect();return i.clientX-r.left}return 0},t.y=function(i){if("object"==typeof i){if("offsetY"in i)return i.offsetY;var r=e(i).getBoundingClientRect();return i.clientY-r.top}return 0}},{}],250:[function(g,_,t){"use strict";var e=g("to-px");_.exports=function(i,r,o){"function"==typeof i&&(o=!!r,r=i,i=window);var n=e("ex",i),p=function(s){o&&s.preventDefault();var a=s.deltaX||0,c=s.deltaY||0,u=s.deltaZ||0,h=1;switch(s.deltaMode){case 1:h=n;break;case 2:h=window.innerHeight}if(c*=h,u*=h,(a*=h)||c||u)return r(a,c,u,s)};return i.addEventListener("wheel",p),p}},{"to-px":304}],251:[function(g,_,t){"use strict";var e=g("typedarray-pool");_.exports=function(r){function o(h){throw new Error("ndarray-extract-contour: "+h)}"object"!=typeof r&&o("Must specify arguments");var n=r.order;Array.isArray(n)||o("Must specify order");var h,v,f,w,p=r.arrayArguments||1;p<1&&o("Must have at least one array argument"),(r.scalarArguments||0)<0&&o("Scalar arg count must be > 0"),"function"!=typeof r.vertex&&o("Must specify vertex creation function"),"function"!=typeof r.cell&&o("Must specify cell creation function"),"function"!=typeof r.phase&&o("Must specify phase function");for(var a=r.getters||[],c=new Array(p),u=0;u<p;++u)c[u]=a.indexOf(u)>=0;return h=r.vertex,v=r.cell,f=r.phase,w=[c,n].join(","),(0,i[w])(h,v,f,e.mallocUint32,e.freeUint32)};var i={"false,0,1":function(r,o,n,p,s){return function(a,c,u,h){var v,f=0|a.shape[0],l=0|a.shape[1],x=a.data,w=0|a.stride[0],b=0|a.stride[1],k=0|a.offset,T=0|-w,L=0,A=0|-b,I=0,D=-w-b|0,S=0,C=0|w,R=b-w*f|0,F=0,H=0,U=0,X=2*f|0,Z=p(X),Y=p(X),W=0,te=0,z=-1,N=-1,V=0,Q=0|-f,j=0|f,J=0,K=-f-1|0,re=f-1|0,ie=0,ce=0,se=0;for(F=0;F<f;++F)Z[W++]=n(x[k],c,u,h),k+=C;if(k+=R,l>0){if(H=1,Z[W++]=n(x[k],c,u,h),k+=C,f>0)for(F=1,te=Z[W]=n(v=x[k],c,u,h),J=Z[W+Q],ie=Z[W+K],te===(V=Z[W+z])&&te===J&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,V,J,ie,c,u,h),ce=Y[W]=U++),W+=1,k+=C,F=2;F<f;++F)te=Z[W]=n(v=x[k],c,u,h),J=Z[W+Q],ie=Z[W+K],te===(V=Z[W+z])&&te===J&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,V,J,ie,c,u,h),ce=Y[W]=U++,ie!==V&&o(Y[W+z],ce,S,L,ie,V,c,u,h)),W+=1,k+=C;for(k+=R,W=0,se=z,z=N,N=se,se=Q,Q=j,j=se,se=K,K=re,re=se,H=2;H<l;++H){if(Z[W++]=n(x[k],c,u,h),k+=C,f>0)for(F=1,te=Z[W]=n(v=x[k],c,u,h),J=Z[W+Q],ie=Z[W+K],te===(V=Z[W+z])&&te===J&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,V,J,ie,c,u,h),ce=Y[W]=U++,ie!==J&&o(Y[W+Q],ce,I,S,J,ie,c,u,h)),W+=1,k+=C,F=2;F<f;++F)te=Z[W]=n(v=x[k],c,u,h),J=Z[W+Q],ie=Z[W+K],te===(V=Z[W+z])&&te===J&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,V,J,ie,c,u,h),ce=Y[W]=U++,ie!==J&&o(Y[W+Q],ce,I,S,J,ie,c,u,h),ie!==V&&o(Y[W+z],ce,S,L,ie,V,c,u,h)),W+=1,k+=C;1&H&&(W=0),se=z,z=N,N=se,se=Q,Q=j,j=se,se=K,K=re,re=se,k+=R}}s(Y),s(Z)}},"false,1,0":function(r,o,n,p,s){return function(a,c,u,h){var v,f=0|a.shape[0],l=0|a.shape[1],x=a.data,w=0|a.stride[0],b=0|a.stride[1],k=0|a.offset,T=0|-w,L=0,A=0|-b,I=0,D=-w-b|0,S=0,C=0|b,R=w-b*l|0,F=0,H=0,U=0,X=2*l|0,Z=p(X),Y=p(X),W=0,te=0,z=-1,N=-1,V=0,Q=0|-l,j=0|l,J=0,K=-l-1|0,re=l-1|0,ie=0,ce=0,se=0;for(H=0;H<l;++H)Z[W++]=n(x[k],c,u,h),k+=C;if(k+=R,f>0){if(F=1,Z[W++]=n(x[k],c,u,h),k+=C,l>0)for(H=1,te=Z[W]=n(v=x[k],c,u,h),V=Z[W+z],ie=Z[W+K],te===(J=Z[W+Q])&&te===V&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,J,V,ie,c,u,h),ce=Y[W]=U++),W+=1,k+=C,H=2;H<l;++H)te=Z[W]=n(v=x[k],c,u,h),V=Z[W+z],ie=Z[W+K],te===(J=Z[W+Q])&&te===V&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,J,V,ie,c,u,h),ce=Y[W]=U++,ie!==V&&o(Y[W+z],ce,I,S,V,ie,c,u,h)),W+=1,k+=C;for(k+=R,W=0,se=Q,Q=j,j=se,se=z,z=N,N=se,se=K,K=re,re=se,F=2;F<f;++F){if(Z[W++]=n(x[k],c,u,h),k+=C,l>0)for(H=1,te=Z[W]=n(v=x[k],c,u,h),V=Z[W+z],ie=Z[W+K],te===(J=Z[W+Q])&&te===V&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,J,V,ie,c,u,h),ce=Y[W]=U++,ie!==J&&o(Y[W+Q],ce,S,L,ie,J,c,u,h)),W+=1,k+=C,H=2;H<l;++H)te=Z[W]=n(v=x[k],c,u,h),V=Z[W+z],ie=Z[W+K],te===(J=Z[W+Q])&&te===V&&te===ie||(r(F,H,v,L=x[k+T],I=x[k+A],S=x[k+D],te,J,V,ie,c,u,h),ce=Y[W]=U++,ie!==V&&o(Y[W+z],ce,I,S,V,ie,c,u,h),ie!==J&&o(Y[W+Q],ce,S,L,ie,J,c,u,h)),W+=1,k+=C;1&F&&(W=0),se=Q,Q=j,j=se,se=z,z=N,N=se,se=K,K=re,re=se,k+=R}}s(Y),s(Z)}}}},{"typedarray-pool":308}],252:[function(g,_,t){"use strict";var e=g("dup"),i={zero:function(f,l,x,m){var w=f[0];m|=0;var b=0,k=x[0];for(b=0;b<w;++b)l[m]=0,m+=k},fdTemplate1:function(f,l,x,m,w,b,k){var T=f[0],L=x[0],A=-1*L,I=L;m|=0,k|=0;var D=0,S=L,C=b[0];for(D=0;D<T;++D)w[k]=.5*(l[m+A]-l[m+I]),m+=S,k+=C},fdTemplate2:function(f,l,x,m,w,b,k,T,L,A){var I=f[0],D=f[1],S=x[0],C=x[1],F=b[1],U=L[1],X=-1*S,Z=S,Y=-1*C,W=C;m|=0,k|=0,A|=0;var te=0,z=0,N=C,V=S-D*C,Q=F,j=b[0]-D*F,J=U,K=L[0]-D*U;for(z=0;z<I;++z){for(te=0;te<D;++te)w[k]=.5*(l[m+X]-l[m+Z]),T[A]=.5*(l[m+Y]-l[m+W]),m+=N,k+=Q,A+=J;m+=V,k+=j,A+=K}}},r={cdiff:function(f){var l={};return function(x,m,w){var b=x.dtype,k=x.order,T=m.dtype,L=m.order,A=w.dtype,I=w.order,D=[b,k.join(),T,L.join(),A,I.join()].join(),S=l[D];return S||(l[D]=S=f([b,k,T,L,A,I])),S(x.shape.slice(0),x.data,x.stride,0|x.offset,m.data,m.stride,0|m.offset,w.data,w.stride,0|w.offset)}},zero:function(f){var l={};return function(x){var m=x.dtype,w=x.order,b=[m,w.join()].join(),k=l[b];return k||(l[b]=k=f([m,w])),k(x.shape.slice(0),x.data,x.stride,0|x.offset)}},fdTemplate1:function(f){var l={};return function(x,m){var w=x.dtype,b=x.order,k=m.dtype,T=m.order,L=[w,b.join(),k,T.join()].join(),A=l[L];return A||(l[L]=A=f([w,b,k,T])),A(x.shape.slice(0),x.data,x.stride,0|x.offset,m.data,m.stride,0|m.offset)}},fdTemplate2:function(f){var l={};return function(x,m,w){var b=x.dtype,k=x.order,T=m.dtype,L=m.order,A=w.dtype,I=w.order,D=[b,k.join(),T,L.join(),A,I.join()].join(),S=l[D];return S||(l[D]=S=f([b,k,T,L,A,I])),S(x.shape.slice(0),x.data,x.stride,0|x.offset,m.data,m.stride,0|m.offset,w.data,w.stride,0|w.offset)}}};function o(f){return(0,r[f.funcName])(n.bind(void 0,f))}function n(f){return i[f.funcName]}function p(f){return o({funcName:f.funcName})}var s={},a={},c=p({funcName:"cdiff"}),u=p({funcName:"zero"});function h(f){return f in s?s[f]:s[f]=p({funcName:"fdTemplate"+f})}function v(f,l,x,m){return function(w,b){var k=b.shape.slice();return k[0]>2&&k[1]>2&&m(b.pick(-1,-1).lo(1,1).hi(k[0]-2,k[1]-2),w.pick(-1,-1,0).lo(1,1).hi(k[0]-2,k[1]-2),w.pick(-1,-1,1).lo(1,1).hi(k[0]-2,k[1]-2)),k[1]>2&&(x(b.pick(0,-1).lo(1).hi(k[1]-2),w.pick(0,-1,1).lo(1).hi(k[1]-2)),l(w.pick(0,-1,0).lo(1).hi(k[1]-2))),k[1]>2&&(x(b.pick(k[0]-1,-1).lo(1).hi(k[1]-2),w.pick(k[0]-1,-1,1).lo(1).hi(k[1]-2)),l(w.pick(k[0]-1,-1,0).lo(1).hi(k[1]-2))),k[0]>2&&(x(b.pick(-1,0).lo(1).hi(k[0]-2),w.pick(-1,0,0).lo(1).hi(k[0]-2)),l(w.pick(-1,0,1).lo(1).hi(k[0]-2))),k[0]>2&&(x(b.pick(-1,k[1]-1).lo(1).hi(k[0]-2),w.pick(-1,k[1]-1,0).lo(1).hi(k[0]-2)),l(w.pick(-1,k[1]-1,1).lo(1).hi(k[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(k[0]-1,0,0,0),w.set(k[0]-1,0,1,0),w.set(0,k[1]-1,0,0),w.set(0,k[1]-1,1,0),w.set(k[0]-1,k[1]-1,0,0),w.set(k[0]-1,k[1]-1,1,0),w}}_.exports=function(f,l,x){return Array.isArray(x)||(x=e(l.dimension,"string"==typeof x?x:"clamp")),0===l.size?f:0===l.dimension?(f.set(0),f):function(m){var w=m.join();if(L=a[w])return L;for(var b=m.length,k=[c,u],T=1;T<=b;++T)k.push(h(T));var L=v.apply(void 0,k);return a[w]=L,L}(x)(f,l)}},{dup:65}],253:[function(g,_,t){"use strict";function e(n,p){var s=Math.floor(p),a=p-s,u=0<=s+1&&s+1<n.shape[0];return(1-a)*(0<=s&&s<n.shape[0]?+n.get(s):0)+a*(u?+n.get(s+1):0)}function i(n,p,s){var a=Math.floor(p),c=p-a,u=0<=a&&a<n.shape[0],h=0<=a+1&&a+1<n.shape[0],v=Math.floor(s),f=s-v,l=0<=v&&v<n.shape[1],x=0<=v+1&&v+1<n.shape[1],m=u&&l?n.get(a,v):0,w=u&&x?n.get(a,v+1):0;return(1-f)*((1-c)*m+c*(h&&l?n.get(a+1,v):0))+f*((1-c)*w+c*(h&&x?n.get(a+1,v+1):0))}function r(n,p,s,a){var c=Math.floor(p),u=p-c,h=0<=c&&c<n.shape[0],v=0<=c+1&&c+1<n.shape[0],f=Math.floor(s),l=s-f,x=0<=f&&f<n.shape[1],m=0<=f+1&&f+1<n.shape[1],w=Math.floor(a),b=a-w,k=0<=w&&w<n.shape[2],T=0<=w+1&&w+1<n.shape[2],L=h&&x&&k?n.get(c,f,w):0,A=h&&m&&k?n.get(c,f+1,w):0,I=v&&x&&k?n.get(c+1,f,w):0,D=v&&m&&k?n.get(c+1,f+1,w):0,S=h&&x&&T?n.get(c,f,w+1):0,C=h&&m&&T?n.get(c,f+1,w+1):0;return(1-b)*((1-l)*((1-u)*L+u*I)+l*((1-u)*A+u*D))+b*((1-l)*((1-u)*S+u*(v&&x&&T?n.get(c+1,f,w+1):0))+l*((1-u)*C+u*(v&&m&&T?n.get(c+1,f+1,w+1):0)))}function o(n){var p,s,a=0|n.shape.length,c=new Array(a),u=new Array(a),h=new Array(a),v=new Array(a);for(p=0;p<a;++p)s=+arguments[p+1],c[p]=Math.floor(s),u[p]=s-c[p],h[p]=0<=c[p]&&c[p]<n.shape[p],v[p]=0<=c[p]+1&&c[p]+1<n.shape[p];var f,l,x,m=0;e:for(p=0;p<1<<a;++p){for(l=1,x=n.offset,f=0;f<a;++f)if(p&1<<f){if(!v[f])continue e;l*=u[f],x+=n.stride[f]*(c[f]+1)}else{if(!h[f])continue e;l*=1-u[f],x+=n.stride[f]*c[f]}m+=l*n.data[x]}return m}_.exports=function(n,p,s,a){switch(n.shape.length){case 0:return 0;case 1:return e(n,p);case 2:return i(n,p,s);case 3:return r(n,p,s,a);default:return o.apply(void 0,arguments)}},_.exports.d1=e,_.exports.d2=i,_.exports.d3=r},{}],254:[function(g,_,t){"use strict";var e={"float64,2,1,0":function(){return function(p,s,a,c,u){var h=p[0],v=p[1],f=p[2],x=a[1],m=a[2];c|=0;var w=0,b=0,k=0,T=m,L=x-f*m,A=a[0]-v*x;for(k=0;k<h;++k){for(b=0;b<v;++b){for(w=0;w<f;++w)s[c]/=u,c+=T;c+=L}c+=A}}},"uint8,2,0,1,float64,2,1,0":function(){return function(p,s,a,c,u,h,v,f){for(var l=p[0],x=p[1],m=p[2],w=a[0],b=a[1],k=a[2],T=h[0],L=h[1],A=h[2],I=c|=0,D=v|=0,S=0|p[0];S>0;){S<64?(l=S,S=0):(l=64,S-=64);for(var C=0|p[1];C>0;){C<64?(x=C,C=0):(x=64,C-=64),c=I+S*w+C*b,v=D+S*T+C*L;var R=0,F=0,H=0,U=k,X=w-m*k,Z=b-l*w,Y=A,W=T-m*A,te=L-l*T;for(H=0;H<x;++H){for(F=0;F<l;++F){for(R=0;R<m;++R)s[c]=u[v]*f,c+=U,v+=Y;c+=X,v+=W}c+=Z,v+=te}}}}},"float32,1,0,float32,1,0":function(){return function(p,s,a,c,u,h,v){var f=p[0],l=p[1],m=a[1],b=h[1];c|=0,v|=0;var k=0,T=0,L=m,A=a[0]-l*m,I=b,D=h[0]-l*b;for(T=0;T<f;++T){for(k=0;k<l;++k)s[c]=u[v],c+=L,v+=I;c+=A,v+=D}}},"float32,1,0,float32,0,1":function(){return function(p,s,a,c,u,h,v){for(var f=p[0],l=p[1],x=a[0],m=a[1],w=h[0],b=h[1],k=c|=0,T=v|=0,L=0|p[1];L>0;){L<64?(l=L,L=0):(l=64,L-=64);for(var A=0|p[0];A>0;){A<64?(f=A,A=0):(f=64,A-=64),c=k+L*m+A*x,v=T+L*b+A*w;var I=0,D=0,S=m,C=x-l*m,R=b,F=w-l*b;for(D=0;D<f;++D){for(I=0;I<l;++I)s[c]=u[v],c+=S,v+=R;c+=C,v+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(p,s,a,c,u,h,v){for(var f=p[0],l=p[1],x=p[2],m=a[0],w=a[1],b=a[2],k=h[0],T=h[1],L=h[2],A=c|=0,I=v|=0,D=0|p[2];D>0;){D<64?(x=D,D=0):(x=64,D-=64);for(var S=0|p[0];S>0;){S<64?(f=S,S=0):(f=64,S-=64);for(var C=0|p[1];C>0;){C<64?(l=C,C=0):(l=64,C-=64),c=A+D*b+S*m+C*w,v=I+D*L+S*k+C*T;var R=0,F=0,H=0,U=b,X=m-x*b,Z=w-f*m,Y=L,W=k-x*L,te=T-f*k;for(H=0;H<l;++H){for(F=0;F<f;++F){for(R=0;R<x;++R)s[c]=u[v],c+=U,v+=Y;c+=X,v+=W}c+=Z,v+=te}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(p,s,a,c,u,h,v){var f=p[0],l=p[1],x=p[2],m=a[0],b=a[2],k=h[0],L=h[2];c|=0,v|=0;var A=0,I=0,D=0,S=b,C=m-x*b,R=a[1]-f*m,F=L,H=k-x*L,U=h[1]-f*k;for(D=0;D<l;++D){for(I=0;I<f;++I){for(A=0;A<x;++A)s[c]=u[v],c+=S,v+=F;c+=C,v+=H}c+=R,v+=U}}}},i=function(p,s){var a=s.join(",");return(0,e[a])()},r={mul:function(p){var s={};return function(a,c,u){var h=a.dtype,v=a.order,f=c.dtype,l=c.order,x=u.dtype,m=u.order,w=[h,v.join(),f,l.join(),x,m.join()].join(),b=s[w];return b||(s[w]=b=p([h,v,f,l,x,m])),b(a.shape.slice(0),a.data,a.stride,0|a.offset,c.data,c.stride,0|c.offset,u.data,u.stride,0|u.offset)}},muls:function(p){var s={};return function(a,c,u){var h=a.dtype,v=a.order,f=c.dtype,l=c.order,x=[h,v.join(),f,l.join()].join(),m=s[x];return m||(s[x]=m=p([h,v,f,l])),m(a.shape.slice(0),a.data,a.stride,0|a.offset,c.data,c.stride,0|c.offset,u)}},mulseq:function(p){var s={};return function(a,c){var u=a.dtype,h=a.order,v=[u,h.join()].join(),f=s[v];return f||(s[v]=f=p([u,h])),f(a.shape.slice(0),a.data,a.stride,0|a.offset,c)}},div:function(p){var s={};return function(a,c,u){var h=a.dtype,v=a.order,f=c.dtype,l=c.order,x=u.dtype,m=u.order,w=[h,v.join(),f,l.join(),x,m.join()].join(),b=s[w];return b||(s[w]=b=p([h,v,f,l,x,m])),b(a.shape.slice(0),a.data,a.stride,0|a.offset,c.data,c.stride,0|c.offset,u.data,u.stride,0|u.offset)}},divs:function(p){var s={};return function(a,c,u){var h=a.dtype,v=a.order,f=c.dtype,l=c.order,x=[h,v.join(),f,l.join()].join(),m=s[x];return m||(s[x]=m=p([h,v,f,l])),m(a.shape.slice(0),a.data,a.stride,0|a.offset,c.data,c.stride,0|c.offset,u)}},divseq:function(p){var s={};return function(a,c){var u=a.dtype,h=a.order,v=[u,h.join()].join(),f=s[v];return f||(s[v]=f=p([u,h])),f(a.shape.slice(0),a.data,a.stride,0|a.offset,c)}},assign:function(p){var s={};return function(a,c){var u=a.dtype,h=a.order,v=c.dtype,f=c.order,l=[u,h.join(),v,f.join()].join(),x=s[l];return x||(s[l]=x=p([u,h,v,f])),x(a.shape.slice(0),a.data,a.stride,0|a.offset,c.data,c.stride,0|c.offset)}}};function o(p){return(0,r[(s={funcName:p.funcName}).funcName])(i.bind(void 0,s));var s}var n={mul:"*",div:"/"};(function(){for(var p in n)t[p]=o({funcName:p}),t[p+"s"]=o({funcName:p+"s"}),t[p+"seq"]=o({funcName:p+"seq"})})(),t.assign=o({funcName:"assign"})},{}],255:[function(g,_,t){"use strict";var e=g("ndarray"),i=g("./doConvert.js");_.exports=function(r,o){for(var n=[],p=r,s=1;Array.isArray(p);)n.push(p.length),s*=p.length,p=p[0];return 0===n.length?e():(o||(o=e(new Float64Array(s),n)),i(o,r),o)}},{"./doConvert.js":256,ndarray:259}],256:[function(g,_,t){"use strict";var r,o;_.exports=(r=function(){return function(r,o,n,p,s){var a=r[0],c=r[1],u=r[2],v=n[1],f=n[2],l=[0,0,0];p|=0;var x=0,m=0,w=0,b=f,k=v-u*f,T=n[0]-c*v;for(w=0;w<a;++w){for(m=0;m<c;++m){for(x=0;x<u;++x){var L,A=s;for(L=0;L<l.length-1;++L)A=A[l[L]];o[p]=A[l[l.length-1]],p+=b,++l[2]}p+=k,l[2]-=u,++l[1]}p+=T,l[1]-=c,++l[0]}}}.bind(void 0,{funcName:"convert"}),o={},function(n,p){var s=n.dtype,a=n.order,c=[s,a.join()].join(),u=o[c];return u||(o[c]=u=r([s,a])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,p)})},{}],257:[function(g,_,t){"use strict";var e=g("typedarray-pool");function i(p){switch(p){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var r={"uint32,1,0":function(p,s){return function(a,c,u,h,v,f,l,x,m,w,b){var k,T,L,A,I,D,S,C,R=a*v+h,F=p(x);for(k=a+1;k<=c;++k){for(T=k,L=R+=v,I=0,D=R,A=0;A<x;++A)F[I++]=u[D],D+=m;e:for(;T-- >a;){I=0,D=L-v;t:for(A=0;A<x;++A){if((S=u[D])<(C=F[I]))break e;if(S>C)break t;D+=w,I+=b}for(I=L,D=L-v,A=0;A<x;++A)u[I]=u[D],I+=m,D+=m;L-=v}for(I=L,D=0,A=0;A<x;++A)u[I]=F[D++],I+=m}s(F)}}},o={"uint32,1,0":function(p,s,a){return function c(u,h,v,f,l,x,m,w,b,k,T){var L,A,D,S,C,R,F,H,U,X,Z,Y,W,te,z,N,V,Q,j,J,K,re,ie,ce,se=(h-u+1)/6|0,de=u+se,ue=h-se,ge=u+h>>1,be=ge-se,Te=ge+se,we=de,Le=be,fe=ge,ve=Te,Me=ue,ke=u+1,Ce=h-1,Pe=!0,Fe=0,qe=0,rt=0,ze=w,He=s(ze),Xe=s(ze);X=l*we,Z=l*Le,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=we,we=Le,Le=A;break e}if(rt<0)break e;ce+=k}X=l*ve,Z=l*Me,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=ve,ve=Me,Me=A;break e}if(rt<0)break e;ce+=k}X=l*we,Z=l*fe,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=we,we=fe,fe=A;break e}if(rt<0)break e;ce+=k}X=l*Le,Z=l*fe,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=Le,Le=fe,fe=A;break e}if(rt<0)break e;ce+=k}X=l*we,Z=l*ve,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=we,we=ve,ve=A;break e}if(rt<0)break e;ce+=k}X=l*fe,Z=l*ve,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=fe,fe=ve,ve=A;break e}if(rt<0)break e;ce+=k}X=l*Le,Z=l*Me,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=Le,Le=Me,Me=A;break e}if(rt<0)break e;ce+=k}X=l*Le,Z=l*fe,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=Le,Le=fe,fe=A;break e}if(rt<0)break e;ce+=k}X=l*ve,Z=l*Me,ce=f;e:for(U=0;U<w;++U){if((rt=v[R=X+ce]-v[F=Z+ce])>0){A=ve,ve=Me,Me=A;break e}if(rt<0)break e;ce+=k}for(X=l*we,Z=l*Le,Y=l*fe,W=l*ve,te=l*Me,z=l*de,N=l*ge,V=l*ue,ie=0,ce=f,U=0;U<w;++U)R=X+ce,H=Y+ce,Q=W+ce,j=te+ce,J=z+ce,K=N+ce,re=V+ce,He[ie]=v[F=Z+ce],Xe[ie]=v[Q],Pe=Pe&&He[ie]===Xe[ie],D=v[H],S=v[j],v[J]=v[R],v[K]=D,v[re]=S,++ie,ce+=b;for(X=l*be,Z=l*u,ce=f,U=0;U<w;++U)v[R=X+ce]=v[F=Z+ce],ce+=b;for(X=l*Te,Z=l*h,ce=f,U=0;U<w;++U)v[R=X+ce]=v[F=Z+ce],ce+=b;if(Pe)for(C=ke;C<=Ce;++C){for(R=f+C*l,ie=0,U=0;U<w&&0==(rt=v[R]-He[ie]);++U)ie+=T,R+=k;if(0!==rt)if(rt<0){if(C!==ke)for(X=l*C,Z=l*ke,ce=f,U=0;U<w;++U)L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=L,ce+=b;++ke}else for(;;){for(R=f+Ce*l,ie=0,U=0;U<w&&0==(rt=v[R]-He[ie]);++U)ie+=T,R+=k;if(!(rt>0)){if(rt<0){for(X=l*C,Z=l*ke,Y=l*Ce,ce=f,U=0;U<w;++U)H=Y+ce,L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=v[H],v[H]=L,ce+=b;++ke,--Ce;break}for(X=l*C,Z=l*Ce,ce=f,U=0;U<w;++U)L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=L,ce+=b;--Ce;break}Ce--}}else for(C=ke;C<=Ce;++C){for(R=f+C*l,ie=0,U=0;U<w&&0==(Fe=v[R]-He[ie]);++U)ie+=T,R+=k;if(Fe<0){if(C!==ke)for(X=l*C,Z=l*ke,ce=f,U=0;U<w;++U)L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=L,ce+=b;++ke}else{for(R=f+C*l,ie=0,U=0;U<w&&0==(qe=v[R]-Xe[ie]);++U)ie+=T,R+=k;if(qe>0)for(;;){for(R=f+Ce*l,ie=0,U=0;U<w&&0==(rt=v[R]-Xe[ie]);++U)ie+=T,R+=k;if(!(rt>0)){for(R=f+Ce*l,ie=0,U=0;U<w&&0==(rt=v[R]-He[ie]);++U)ie+=T,R+=k;if(rt<0){for(X=l*C,Z=l*ke,Y=l*Ce,ce=f,U=0;U<w;++U)H=Y+ce,L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=v[H],v[H]=L,ce+=b;++ke,--Ce}else{for(X=l*C,Z=l*Ce,ce=f,U=0;U<w;++U)L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=L,ce+=b;--Ce}break}if(--Ce<C)break}}}for(X=l*u,Z=l*(ke-1),ie=0,ce=f,U=0;U<w;++U)v[R=X+ce]=v[F=Z+ce],v[F]=He[ie],++ie,ce+=b;for(X=l*h,Z=l*(Ce+1),ie=0,ce=f,U=0;U<w;++U)v[R=X+ce]=v[F=Z+ce],v[F]=Xe[ie],++ie,ce+=b;if(ke-2-u<=32?p(u,ke-2,v,f,l,x,m,w,b,k,T):c(u,ke-2,v,f,l,x,m,w,b,k,T),h-(Ce+2)<=32?p(Ce+2,h,v,f,l,x,m,w,b,k,T):c(Ce+2,h,v,f,l,x,m,w,b,k,T),Pe)return a(He),void a(Xe);if(ke<de&&Ce>ue){e:for(;;){for(R=f+ke*l,ie=0,ce=f,U=0;U<w;++U){if(v[R]!==He[ie])break e;++ie,R+=b}++ke}e:for(;;){for(R=f+Ce*l,ie=0,ce=f,U=0;U<w;++U){if(v[R]!==Xe[ie])break e;++ie,R+=b}--Ce}for(C=ke;C<=Ce;++C){for(R=f+C*l,ie=0,U=0;U<w&&0==(Fe=v[R]-He[ie]);++U)ie+=T,R+=k;if(0===Fe){if(C!==ke)for(X=l*C,Z=l*ke,ce=f,U=0;U<w;++U)L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=L,ce+=b;++ke}else{for(R=f+C*l,ie=0,U=0;U<w&&0==(qe=v[R]-Xe[ie]);++U)ie+=T,R+=k;if(0===qe)for(;;){for(R=f+Ce*l,ie=0,U=0;U<w&&0==(rt=v[R]-Xe[ie]);++U)ie+=T,R+=k;if(0!==rt){for(R=f+Ce*l,ie=0,U=0;U<w&&0==(rt=v[R]-He[ie]);++U)ie+=T,R+=k;if(rt<0){for(X=l*C,Z=l*ke,Y=l*Ce,ce=f,U=0;U<w;++U)H=Y+ce,L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=v[H],v[H]=L,ce+=b;++ke,--Ce}else{for(X=l*C,Z=l*Ce,ce=f,U=0;U<w;++U)L=v[R=X+ce],v[R]=v[F=Z+ce],v[F]=L,ce+=b;--Ce}break}if(--Ce<C)break}}}}a(He),a(Xe),Ce-ke<=32?p(ke,Ce,v,f,l,x,m,w,b,k,T):c(ke,Ce,v,f,l,x,m,w,b,k,T)}}},n={"uint32,1,0":function(p,s){return function(a){var c=a.data,u=0|a.offset,h=a.shape,v=a.stride,f=0|v[0],l=0|h[0],x=0|v[1],m=0|h[1],w=x,b=x;l<=32?p(0,l-1,c,u,f,x,l,m,w,b,1):s(0,l-1,c,u,f,x,l,m,w,b,1)}}};_.exports=function(p,s){var v,f,l,x,m,a=[s,p].join(","),c=n[a],u=(v=p,l=i(f=s),x=[f,v].join(","),m=r[x],l?m(l[0],l[1]):m());return c(u,function(v,f,l){var x=i(f),m=[f,v].join(","),w=o[m];return v.length>1&&x?w(l,x[0],x[1]):w(l)}(p,s,u))}},{"typedarray-pool":308}],258:[function(g,_,t){"use strict";var e=g("./lib/compile_sort.js"),i={};_.exports=function(r){var o=r.order,n=r.dtype,p=[o,n].join(":"),s=i[p];return s||(i[p]=s=e(o,n)),s(r),r}},{"./lib/compile_sort.js":257}],259:[function(g,_,t){var e=g("is-buffer"),i="undefined"!=typeof Float64Array;function r(a,c){return a[0]-c[0]}function o(){var a,c=this.stride,u=new Array(c.length);for(a=0;a<u.length;++a)u[a]=[Math.abs(c[a]),a];u.sort(r);var h=new Array(u.length);for(a=0;a<h.length;++a)h[a]=u[a][1];return h}var n={T:function(a){function c(h){this.data=h}var u=c.prototype;return u.dtype=a,u.index=function(){return-1},u.size=0,u.dimension=-1,u.shape=u.stride=u.order=[],u.lo=u.hi=u.transpose=u.step=function(){return new c(this.data)},u.get=u.set=function(){},u.pick=function(){return null},function(h){return new c(h)}},0:function(a,c){function u(v,f){this.data=v,this.offset=f}var h=u.prototype;return h.dtype=a,h.index=function(){return this.offset},h.dimension=0,h.size=1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new u(this.data,this.offset)},h.pick=function(){return c(this.data)},h.valueOf=h.get=function(){return"generic"===a?this.data.get(this.offset):this.data[this.offset]},h.set=function(v){return"generic"===a?this.data.set(this.offset,v):this.data[this.offset]=v},function(v,f,l,x){return new u(v,x)}},1:function(a,c,u){function h(f,l,x,m){this.data=f,this.shape=[l],this.stride=[x],this.offset=0|m}var v=h.prototype;return v.dtype=a,v.dimension=1,Object.defineProperty(v,"size",{get:function(){return this.shape[0]}}),v.order=[0],v.set=function(f,l){return"generic"===a?this.data.set(this.offset+this.stride[0]*f,l):this.data[this.offset+this.stride[0]*f]=l},v.get=function(f){return"generic"===a?this.data.get(this.offset+this.stride[0]*f):this.data[this.offset+this.stride[0]*f]},v.index=function(f){return this.offset+this.stride[0]*f},v.hi=function(f){return new h(this.data,"number"!=typeof f||f<0?this.shape[0]:0|f,this.stride[0],this.offset)},v.lo=function(f){var l=this.offset,x=0,m=this.shape[0],w=this.stride[0];return"number"==typeof f&&f>=0&&(l+=w*(x=0|f),m-=x),new h(this.data,m,w,l)},v.step=function(f){var l=this.shape[0],x=this.stride[0],m=this.offset,w=0,b=Math.ceil;return"number"==typeof f&&((w=0|f)<0?(m+=x*(l-1),l=b(-l/w)):l=b(l/w),x*=w),new h(this.data,l,x,m)},v.transpose=function(f){return new h(this.data,this.shape[f=void 0===f?0:0|f],this.stride[f],this.offset)},v.pick=function(f){var l=[],x=[],m=this.offset;return"number"==typeof f&&f>=0?m=m+this.stride[0]*f|0:(l.push(this.shape[0]),x.push(this.stride[0])),(0,c[l.length+1])(this.data,l,x,m)},function(f,l,x,m){return new h(f,l[0],x[0],m)}},2:function(a,c,u){function h(f,l,x,m,w,b){this.data=f,this.shape=[l,x],this.stride=[m,w],this.offset=0|b}var v=h.prototype;return v.dtype=a,v.dimension=2,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(v,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),v.set=function(f,l,x){return"generic"===a?this.data.set(this.offset+this.stride[0]*f+this.stride[1]*l,x):this.data[this.offset+this.stride[0]*f+this.stride[1]*l]=x},v.get=function(f,l){return"generic"===a?this.data.get(this.offset+this.stride[0]*f+this.stride[1]*l):this.data[this.offset+this.stride[0]*f+this.stride[1]*l]},v.index=function(f,l){return this.offset+this.stride[0]*f+this.stride[1]*l},v.hi=function(f,l){return new h(this.data,"number"!=typeof f||f<0?this.shape[0]:0|f,"number"!=typeof l||l<0?this.shape[1]:0|l,this.stride[0],this.stride[1],this.offset)},v.lo=function(f,l){var x=this.offset,m=0,w=this.shape[0],b=this.shape[1],k=this.stride[0],T=this.stride[1];return"number"==typeof f&&f>=0&&(x+=k*(m=0|f),w-=m),"number"==typeof l&&l>=0&&(x+=T*(m=0|l),b-=m),new h(this.data,w,b,k,T,x)},v.step=function(f,l){var x=this.shape[0],m=this.shape[1],w=this.stride[0],b=this.stride[1],k=this.offset,T=0,L=Math.ceil;return"number"==typeof f&&((T=0|f)<0?(k+=w*(x-1),x=L(-x/T)):x=L(x/T),w*=T),"number"==typeof l&&((T=0|l)<0?(k+=b*(m-1),m=L(-m/T)):m=L(m/T),b*=T),new h(this.data,x,m,w,b,k)},v.transpose=function(f,l){var x=this.shape,m=this.stride;return new h(this.data,x[f=void 0===f?0:0|f],x[l=void 0===l?1:0|l],m[f],m[l],this.offset)},v.pick=function(f,l){var x=[],m=[],w=this.offset;return"number"==typeof f&&f>=0?w=w+this.stride[0]*f|0:(x.push(this.shape[0]),m.push(this.stride[0])),"number"==typeof l&&l>=0?w=w+this.stride[1]*l|0:(x.push(this.shape[1]),m.push(this.stride[1])),(0,c[x.length+1])(this.data,x,m,w)},function(f,l,x,m){return new h(f,l[0],l[1],x[0],x[1],m)}},3:function(a,c,u){function h(f,l,x,m,w,b,k,T){this.data=f,this.shape=[l,x,m],this.stride=[w,b,k],this.offset=0|T}var v=h.prototype;return v.dtype=a,v.dimension=3,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(v,"order",{get:function(){var f=Math.abs(this.stride[0]),l=Math.abs(this.stride[1]),x=Math.abs(this.stride[2]);return f>l?l>x?[2,1,0]:f>x?[1,2,0]:[1,0,2]:f>x?[2,0,1]:x>l?[0,1,2]:[0,2,1]}}),v.set=function(f,l,x,m){return"generic"===a?this.data.set(this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x,m):this.data[this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x]=m},v.get=function(f,l,x){return"generic"===a?this.data.get(this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x):this.data[this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x]},v.index=function(f,l,x){return this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x},v.hi=function(f,l,x){return new h(this.data,"number"!=typeof f||f<0?this.shape[0]:0|f,"number"!=typeof l||l<0?this.shape[1]:0|l,"number"!=typeof x||x<0?this.shape[2]:0|x,this.stride[0],this.stride[1],this.stride[2],this.offset)},v.lo=function(f,l,x){var m=this.offset,w=0,b=this.shape[0],k=this.shape[1],T=this.shape[2],L=this.stride[0],A=this.stride[1],I=this.stride[2];return"number"==typeof f&&f>=0&&(m+=L*(w=0|f),b-=w),"number"==typeof l&&l>=0&&(m+=A*(w=0|l),k-=w),"number"==typeof x&&x>=0&&(m+=I*(w=0|x),T-=w),new h(this.data,b,k,T,L,A,I,m)},v.step=function(f,l,x){var m=this.shape[0],w=this.shape[1],b=this.shape[2],k=this.stride[0],T=this.stride[1],L=this.stride[2],A=this.offset,I=0,D=Math.ceil;return"number"==typeof f&&((I=0|f)<0?(A+=k*(m-1),m=D(-m/I)):m=D(m/I),k*=I),"number"==typeof l&&((I=0|l)<0?(A+=T*(w-1),w=D(-w/I)):w=D(w/I),T*=I),"number"==typeof x&&((I=0|x)<0?(A+=L*(b-1),b=D(-b/I)):b=D(b/I),L*=I),new h(this.data,m,w,b,k,T,L,A)},v.transpose=function(f,l,x){var m=this.shape,w=this.stride;return new h(this.data,m[f=void 0===f?0:0|f],m[l=void 0===l?1:0|l],m[x=void 0===x?2:0|x],w[f],w[l],w[x],this.offset)},v.pick=function(f,l,x){var m=[],w=[],b=this.offset;return"number"==typeof f&&f>=0?b=b+this.stride[0]*f|0:(m.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof l&&l>=0?b=b+this.stride[1]*l|0:(m.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof x&&x>=0?b=b+this.stride[2]*x|0:(m.push(this.shape[2]),w.push(this.stride[2])),(0,c[m.length+1])(this.data,m,w,b)},function(f,l,x,m){return new h(f,l[0],l[1],l[2],x[0],x[1],x[2],m)}},4:function(a,c,u){function h(f,l,x,m,w,b,k,T,L,A){this.data=f,this.shape=[l,x,m,w],this.stride=[b,k,T,L],this.offset=0|A}var v=h.prototype;return v.dtype=a,v.dimension=4,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(v,"order",{get:u}),v.set=function(f,l,x,m,w){return"generic"===a?this.data.set(this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m,w):this.data[this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m]=w},v.get=function(f,l,x,m){return"generic"===a?this.data.get(this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m):this.data[this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m]},v.index=function(f,l,x,m){return this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m},v.hi=function(f,l,x,m){return new h(this.data,"number"!=typeof f||f<0?this.shape[0]:0|f,"number"!=typeof l||l<0?this.shape[1]:0|l,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof m||m<0?this.shape[3]:0|m,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},v.lo=function(f,l,x,m){var w=this.offset,b=0,k=this.shape[0],T=this.shape[1],L=this.shape[2],A=this.shape[3],I=this.stride[0],D=this.stride[1],S=this.stride[2],C=this.stride[3];return"number"==typeof f&&f>=0&&(w+=I*(b=0|f),k-=b),"number"==typeof l&&l>=0&&(w+=D*(b=0|l),T-=b),"number"==typeof x&&x>=0&&(w+=S*(b=0|x),L-=b),"number"==typeof m&&m>=0&&(w+=C*(b=0|m),A-=b),new h(this.data,k,T,L,A,I,D,S,C,w)},v.step=function(f,l,x,m){var w=this.shape[0],b=this.shape[1],k=this.shape[2],T=this.shape[3],L=this.stride[0],A=this.stride[1],I=this.stride[2],D=this.stride[3],S=this.offset,C=0,R=Math.ceil;return"number"==typeof f&&((C=0|f)<0?(S+=L*(w-1),w=R(-w/C)):w=R(w/C),L*=C),"number"==typeof l&&((C=0|l)<0?(S+=A*(b-1),b=R(-b/C)):b=R(b/C),A*=C),"number"==typeof x&&((C=0|x)<0?(S+=I*(k-1),k=R(-k/C)):k=R(k/C),I*=C),"number"==typeof m&&((C=0|m)<0?(S+=D*(T-1),T=R(-T/C)):T=R(T/C),D*=C),new h(this.data,w,b,k,T,L,A,I,D,S)},v.transpose=function(f,l,x,m){var w=this.shape,b=this.stride;return new h(this.data,w[f=void 0===f?0:0|f],w[l=void 0===l?1:0|l],w[x=void 0===x?2:0|x],w[m=void 0===m?3:0|m],b[f],b[l],b[x],b[m],this.offset)},v.pick=function(f,l,x,m){var w=[],b=[],k=this.offset;return"number"==typeof f&&f>=0?k=k+this.stride[0]*f|0:(w.push(this.shape[0]),b.push(this.stride[0])),"number"==typeof l&&l>=0?k=k+this.stride[1]*l|0:(w.push(this.shape[1]),b.push(this.stride[1])),"number"==typeof x&&x>=0?k=k+this.stride[2]*x|0:(w.push(this.shape[2]),b.push(this.stride[2])),"number"==typeof m&&m>=0?k=k+this.stride[3]*m|0:(w.push(this.shape[3]),b.push(this.stride[3])),(0,c[w.length+1])(this.data,w,b,k)},function(f,l,x,m){return new h(f,l[0],l[1],l[2],l[3],x[0],x[1],x[2],x[3],m)}},5:function(a,c,u){function h(f,l,x,m,w,b,k,T,L,A,I,D){this.data=f,this.shape=[l,x,m,w,b],this.stride=[k,T,L,A,I],this.offset=0|D}var v=h.prototype;return v.dtype=a,v.dimension=5,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(v,"order",{get:u}),v.set=function(f,l,x,m,w,b){return"generic"===a?this.data.set(this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m+this.stride[4]*w,b):this.data[this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m+this.stride[4]*w]=b},v.get=function(f,l,x,m,w){return"generic"===a?this.data.get(this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m+this.stride[4]*w):this.data[this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m+this.stride[4]*w]},v.index=function(f,l,x,m,w){return this.offset+this.stride[0]*f+this.stride[1]*l+this.stride[2]*x+this.stride[3]*m+this.stride[4]*w},v.hi=function(f,l,x,m,w){return new h(this.data,"number"!=typeof f||f<0?this.shape[0]:0|f,"number"!=typeof l||l<0?this.shape[1]:0|l,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof m||m<0?this.shape[3]:0|m,"number"!=typeof w||w<0?this.shape[4]:0|w,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},v.lo=function(f,l,x,m,w){var b=this.offset,k=0,T=this.shape[0],L=this.shape[1],A=this.shape[2],I=this.shape[3],D=this.shape[4],S=this.stride[0],C=this.stride[1],R=this.stride[2],F=this.stride[3],H=this.stride[4];return"number"==typeof f&&f>=0&&(b+=S*(k=0|f),T-=k),"number"==typeof l&&l>=0&&(b+=C*(k=0|l),L-=k),"number"==typeof x&&x>=0&&(b+=R*(k=0|x),A-=k),"number"==typeof m&&m>=0&&(b+=F*(k=0|m),I-=k),"number"==typeof w&&w>=0&&(b+=H*(k=0|w),D-=k),new h(this.data,T,L,A,I,D,S,C,R,F,H,b)},v.step=function(f,l,x,m,w){var b=this.shape[0],k=this.shape[1],T=this.shape[2],L=this.shape[3],A=this.shape[4],I=this.stride[0],D=this.stride[1],S=this.stride[2],C=this.stride[3],R=this.stride[4],F=this.offset,H=0,U=Math.ceil;return"number"==typeof f&&((H=0|f)<0?(F+=I*(b-1),b=U(-b/H)):b=U(b/H),I*=H),"number"==typeof l&&((H=0|l)<0?(F+=D*(k-1),k=U(-k/H)):k=U(k/H),D*=H),"number"==typeof x&&((H=0|x)<0?(F+=S*(T-1),T=U(-T/H)):T=U(T/H),S*=H),"number"==typeof m&&((H=0|m)<0?(F+=C*(L-1),L=U(-L/H)):L=U(L/H),C*=H),"number"==typeof w&&((H=0|w)<0?(F+=R*(A-1),A=U(-A/H)):A=U(A/H),R*=H),new h(this.data,b,k,T,L,A,I,D,S,C,R,F)},v.transpose=function(f,l,x,m,w){var b=this.shape,k=this.stride;return new h(this.data,b[f=void 0===f?0:0|f],b[l=void 0===l?1:0|l],b[x=void 0===x?2:0|x],b[m=void 0===m?3:0|m],b[w=void 0===w?4:0|w],k[f],k[l],k[x],k[m],k[w],this.offset)},v.pick=function(f,l,x,m,w){var b=[],k=[],T=this.offset;return"number"==typeof f&&f>=0?T=T+this.stride[0]*f|0:(b.push(this.shape[0]),k.push(this.stride[0])),"number"==typeof l&&l>=0?T=T+this.stride[1]*l|0:(b.push(this.shape[1]),k.push(this.stride[1])),"number"==typeof x&&x>=0?T=T+this.stride[2]*x|0:(b.push(this.shape[2]),k.push(this.stride[2])),"number"==typeof m&&m>=0?T=T+this.stride[3]*m|0:(b.push(this.shape[3]),k.push(this.stride[3])),"number"==typeof w&&w>=0?T=T+this.stride[4]*w|0:(b.push(this.shape[4]),k.push(this.stride[4])),(0,c[b.length+1])(this.data,b,k,T)},function(f,l,x,m){return new h(f,l[0],l[1],l[2],l[3],l[4],x[0],x[1],x[2],x[3],x[4],m)}}};function p(a,c){var u=-1===c?"T":String(c),h=n[u];return-1===c?h(a):0===c?h(a,s[a][0]):h(a,s[a],o)}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};_.exports=function(a,c,u,h){if(void 0===a)return(0,s.array[0])([]);"number"==typeof a&&(a=[a]),void 0===c&&(c=[a.length]);var v=c.length;if(void 0===u){u=new Array(v);for(var f=v-1,l=1;f>=0;--f)u[f]=l,l*=c[f]}if(void 0===h)for(h=0,f=0;f<v;++f)u[f]<0&&(h-=(c[f]-1)*u[f]);for(var x=function(w){if(e(w))return"buffer";if(i)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(a),m=s[x];m.length<=v+1;)m.push(p(x,m.length-1));return(0,m[v+1])(a,c,u,h)}},{"is-buffer":237}],260:[function(g,_,t){"use strict";var e=g("double-bits"),i=Math.pow(2,-1074);_.exports=function(r,o){if(isNaN(r)||isNaN(o))return NaN;if(r===o)return r;if(0===r)return o<0?-i:i;var n=e.hi(r),p=e.lo(r);return o>r==r>0?p===-1>>>0?(n+=1,p=0):p+=1:0===p?(p=-1>>>0,n-=1):p-=1,e.pack(p,n)}},{"double-bits":64}],261:[function(g,_,t){t.vertexNormals=function(e,i,r){for(var o=i.length,n=new Array(o),p=void 0===r?1e-6:r,s=0;s<o;++s)n[s]=[0,0,0];for(s=0;s<e.length;++s)for(var a=e[s],u=a[a.length-1],h=a[0],v=0;v<a.length;++v){for(var f=i[u],l=i[u=h],x=i[h=a[(v+1)%a.length]],m=new Array(3),w=0,b=new Array(3),k=0,T=0;T<3;++T)m[T]=f[T]-l[T],w+=m[T]*m[T],b[T]=x[T]-l[T],k+=b[T]*b[T];if(w*k>p){var L=n[u],A=1/Math.sqrt(w*k);for(T=0;T<3;++T){var I=(T+1)%3,D=(T+2)%3;L[T]+=A*(b[I]*m[D]-b[D]*m[I])}}}for(s=0;s<o;++s){L=n[s];var S=0;for(T=0;T<3;++T)S+=L[T]*L[T];if(S>p)for(A=1/Math.sqrt(S),T=0;T<3;++T)L[T]*=A;else for(T=0;T<3;++T)L[T]=0}return n},t.faceNormals=function(e,i,r){for(var o=e.length,n=new Array(o),p=void 0===r?1e-6:r,s=0;s<o;++s){for(var a=e[s],c=new Array(3),u=0;u<3;++u)c[u]=i[a[u]];var h=new Array(3),v=new Array(3);for(u=0;u<3;++u)h[u]=c[1][u]-c[0][u],v[u]=c[2][u]-c[0][u];var f=new Array(3),l=0;for(u=0;u<3;++u){var x=(u+1)%3,m=(u+2)%3;f[u]=h[x]*v[m]-h[m]*v[x],l+=f[u]*f[u]}for(l=l>p?1/Math.sqrt(l):0,u=0;u<3;++u)f[u]*=l;n[s]=f}return n}},{}],262:[function(g,_,t){"use strict";_.exports=function(e,i,r,o,n,p,s,a,c,u){var h=i+p+u;if(v>0){var v=Math.sqrt(h+1);e[0]=.5*(s-c)/v,e[1]=.5*(a-o)/v,e[2]=.5*(r-p)/v,e[3]=.5*v}else{var f=Math.max(i,p,u);v=Math.sqrt(2*f-h+1),i>=f?(e[0]=.5*v,e[1]=.5*(n+r)/v,e[2]=.5*(a+o)/v,e[3]=.5*(s-c)/v):p>=f?(e[0]=.5*(r+n)/v,e[1]=.5*v,e[2]=.5*(c+s)/v,e[3]=.5*(a-o)/v):(e[0]=.5*(o+a)/v,e[1]=.5*(s+c)/v,e[2]=.5*v,e[3]=.5*(r-n)/v)}return e}},{}],263:[function(g,_,t){"use strict";_.exports=function(h){var v=(h=h||{}).center||[0,0,0],f=h.rotation||[0,0,0,1],l=h.radius||1;v=[].slice.call(v,0,3),a(f=[].slice.call(f,0,4),f);var x=new c(f,v,Math.log(l));return x.setDistanceLimits(h.zoomMin,h.zoomMax),("eye"in h||"up"in h)&&x.lookAt(0,h.eye,h.center,h.up),x};var e=g("filtered-vector"),i=g("gl-mat4/lookAt"),r=g("gl-mat4/fromQuat"),o=g("gl-mat4/invert"),n=g("./lib/quatFromFrame");function p(h,v,f){return Math.sqrt(Math.pow(h,2)+Math.pow(v,2)+Math.pow(f,2))}function s(h,v,f,l){return Math.sqrt(Math.pow(h,2)+Math.pow(v,2)+Math.pow(f,2)+Math.pow(l,2))}function a(h,v){var f=v[0],l=v[1],x=v[2],m=v[3],w=s(f,l,x,m);w>1e-6?(h[0]=f/w,h[1]=l/w,h[2]=x/w,h[3]=m/w):(h[0]=h[1]=h[2]=0,h[3]=1)}function c(h,v,f){this.radius=e([f]),this.center=e(v),this.rotation=e(h),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var u=c.prototype;u.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},u.recalcMatrix=function(h){this.radius.curve(h),this.center.curve(h),this.rotation.curve(h);var v=this.computedRotation;a(v,v);var f=this.computedMatrix;r(f,v);var l=this.computedCenter,x=this.computedEye,m=this.computedUp,w=Math.exp(this.computedRadius[0]);x[0]=l[0]+w*f[2],x[1]=l[1]+w*f[6],x[2]=l[2]+w*f[10],m[0]=f[1],m[1]=f[5],m[2]=f[9];for(var b=0;b<3;++b){for(var k=0,T=0;T<3;++T)k+=f[b+4*T]*x[T];f[12+b]=-k}},u.getMatrix=function(h,v){this.recalcMatrix(h);var f=this.computedMatrix;if(v){for(var l=0;l<16;++l)v[l]=f[l];return v}return f},u.idle=function(h){this.center.idle(h),this.radius.idle(h),this.rotation.idle(h)},u.flush=function(h){this.center.flush(h),this.radius.flush(h),this.rotation.flush(h)},u.pan=function(h,v,f,l){v=v||0,f=f||0,l=l||0,this.recalcMatrix(h);var x=this.computedMatrix,m=x[1],w=x[5],b=x[9],k=p(m,w,b),T=x[0],L=x[4],A=x[8],I=T*(m/=k)+L*(w/=k)+A*(b/=k),D=p(T-=m*I,L-=w*I,A-=b*I),S=x[2],C=x[6],R=x[10],F=S*m+C*w+R*b,H=S*(T/=D)+C*(L/=D)+R*(A/=D),U=p(S-=F*m+H*T,C-=F*w+H*L,R-=F*b+H*A);S/=U,C/=U,R/=U,this.center.move(h,T*v+m*f,L*v+w*f,A*v+b*f);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+l),this.radius.set(h,Math.log(W))},u.rotate=function(h,v,f,l){this.recalcMatrix(h);var x=this.computedMatrix,A=x[2],I=x[6],D=x[10],S=(v=v||0)*x[0]+(f=f||0)*x[1],C=v*x[4]+f*x[5],R=v*x[8]+f*x[9],F=-(I*R-D*C),H=-(D*S-A*R),U=-(A*C-I*S),X=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(H,2)-Math.pow(U,2))),Z=s(F,H,U,X);Z>1e-6?(F/=Z,H/=Z,U/=Z,X/=Z):(F=H=U=0,X=1);var Y=this.computedRotation,W=Y[0],te=Y[1],z=Y[2],N=Y[3],V=W*X+N*F+te*U-z*H,Q=te*X+N*H+z*F-W*U,j=z*X+N*U+W*H-te*F,J=N*X-W*F-te*H-z*U;if(l){F=A,H=I,U=D;var K=Math.sin(l)/p(F,H,U);F*=K,H*=K,U*=K,J=J*(X=Math.cos(v))-(V=V*X+J*F+Q*U-j*H)*F-(Q=Q*X+J*H+j*F-V*U)*H-(j=j*X+J*U+V*H-Q*F)*U}var re=s(V,Q,j,J);re>1e-6?(V/=re,Q/=re,j/=re,J/=re):(V=Q=j=0,J=1),this.rotation.set(h,V,Q,j,J)},u.lookAt=function(h,v,f,l){this.recalcMatrix(h);var x=this.computedMatrix;i(x,v=v||this.computedEye,f=f||this.computedCenter,l=l||this.computedUp);var m=this.computedRotation;n(m,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),a(m,m),this.rotation.set(h,m[0],m[1],m[2],m[3]);for(var w=0,b=0;b<3;++b)w+=Math.pow(f[b]-v[b],2);this.radius.set(h,.5*Math.log(Math.max(w,1e-6))),this.center.set(h,f[0],f[1],f[2])},u.translate=function(h,v,f,l){this.center.move(h,v||0,f||0,l||0)},u.setMatrix=function(h,v){var f=this.computedRotation;n(f,v[0],v[1],v[2],v[4],v[5],v[6],v[8],v[9],v[10]),a(f,f),this.rotation.set(h,f[0],f[1],f[2],f[3]);var l=this.computedMatrix;o(l,v);var x=l[15];if(Math.abs(x)>1e-6){var m=l[12]/x,w=l[13]/x,b=l[14]/x;this.recalcMatrix(h);var k=Math.exp(this.computedRadius[0]);this.center.set(h,m-l[2]*k,w-l[6]*k,b-l[10]*k),this.radius.idle(h)}else this.center.idle(h),this.radius.idle(h)},u.setDistance=function(h,v){v>0&&this.radius.set(h,Math.log(v))},u.setDistanceLimits=function(h,v){h=h>0?Math.log(h):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,h),this.radius.bounds[0][0]=h,this.radius.bounds[1][0]=v},u.getDistanceLimits=function(h){var v=this.radius.bounds;return h?(h[0]=Math.exp(v[0][0]),h[1]=Math.exp(v[1][0]),h):[Math.exp(v[0][0]),Math.exp(v[1][0])]},u.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},u.fromJSON=function(h){var v=this.lastT(),f=h.center;f&&this.center.set(v,f[0],f[1],f[2]);var l=h.rotation;l&&this.rotation.set(v,l[0],l[1],l[2],l[3]);var x=h.distance;x&&x>0&&this.radius.set(v,Math.log(x)),this.setDistanceLimits(h.zoomMin,h.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(g,_,t){"use strict";var e=g("repeat-string");_.exports=function(i,r,o){return e(o=void 0!==o?o+"":" ",r)+i}},{"repeat-string":277}],265:[function(g,_,t){_.exports=function(e,i){i||(i=[0,""]),e=String(e);var r=parseFloat(e,10);return i[0]=r,i[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(g,_,t){"use strict";_.exports=function(i,r){for(var o=0|r.length,n=i.length,p=[new Array(o),new Array(o)],s=0;s<o;++s)p[0][s]=[],p[1][s]=[];for(s=0;s<n;++s){var a=i[s];p[0][a[0]].push(a),p[1][a[1]].push(a)}var b,c=[];for(s=0;s<o;++s)p[0][s].length+p[1][s].length===0&&c.push([s]);function u(w,b){var k=p[b][w[b]];k.splice(k.indexOf(w),1)}function h(w,b,k){for(var T,L,A,I=0;I<2;++I)if(p[I][b].length>0){T=p[I][b][0],A=I;break}L=T[1^A];for(var D=0;D<2;++D)for(var S=p[D][b],C=0;C<S.length;++C){var R=S[C],F=R[1^D];e(r[w],r[b],r[L],r[F])>0&&(T=R,L=F,A=D)}return k||T&&u(T,A),L}function v(w,b){var k=p[b][w][0],T=[w];u(k,b);for(var L=k[1^b];;){for(;L!==w;)T.push(L),L=h(T[T.length-2],L,!1);if(p[0][w].length+p[1][w].length===0)break;var A=T[T.length-1],I=w,D=T[1],S=h(A,I,!0);if(e(r[A],r[I],r[D],r[S])<0)break;T.push(w),L=h(A,I)}return T}for(s=0;s<o;++s)for(var l=0;l<2;++l){for(var x=[];p[l][s].length>0;){var m=v(s,l);(b=m)[1]===b[b.length-1]?x.push.apply(x,m):(x.length>0&&c.push(x),x=m)}x.length>0&&c.push(x)}return c};var e=g("compare-angle")},{"compare-angle":54}],267:[function(g,_,t){"use strict";_.exports=function(i,r){for(var o=e(i,r.length),n=new Array(r.length),p=new Array(r.length),s=[],a=0;a<r.length;++a){var c=o[a].length;p[a]=c,n[a]=!0,c<=1&&s.push(a)}for(;s.length>0;){var u=s.pop();n[u]=!1;var h=o[u];for(a=0;a<h.length;++a){var v=h[a];0==--p[v]&&s.push(v)}}var f=new Array(r.length),l=[];for(a=0;a<r.length;++a)n[a]?(f[a]=u=l.length,l.push(r[a])):f[a]=-1;var x=[];for(a=0;a<i.length;++a){var m=i[a];n[m[0]]&&n[m[1]]&&x.push([f[m[0]],f[m[1]]])}return[x,l]};var e=g("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(g,_,t){"use strict";_.exports=function(c,u){for(var h=s(c,u),v=(u=h[1]).length,f=e(c=h[0],u.length),l=0;l<v;++l)if(f[l].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var x=i(c,u),m=(x=x.filter(function(se){for(var de=se.length,ue=[0],ge=0;ge<de;++ge){var be=u[se[ge]],Te=u[se[(ge+1)%de]],we=o(-be[0],be[1]),Le=o(-be[0],Te[1]),fe=o(Te[0],be[1]),ve=o(Te[0],Te[1]);ue=n(ue,n(n(we,Le),n(fe,ve)))}return ue[ue.length-1]>0})).length,w=new Array(m),b=new Array(m);for(l=0;l<m;++l){w[l]=l;var k=new Array(m),T=x[l].map(function(se){return u[se]}),L=r([T]),A=0;e:for(var I=0;I<m;++I)if(k[I]=0,l!==I){for(var D=(ie=x[I]).length,S=0;S<D;++S){var C=L(u[ie[S]]);if(0!==C){C<0&&(k[I]=1,A+=1);continue e}}k[I]=1,A+=1}b[l]=[A,l,k]}for(b.sort(function(se,de){return de[0]-se[0]}),l=0;l<m;++l){var R=(k=b[l])[1],F=k[2];for(I=0;I<m;++I)F[I]&&(w[I]=R)}var H=function(se){for(var de=new Array(se),ue=0;ue<se;++ue)de[ue]=[];return de}(m);for(l=0;l<m;++l)H[l].push(w[l]),H[w[l]].push(l);var U={},X=a(v,!1);for(l=0;l<m;++l)for(D=(ie=x[l]).length,I=0;I<D;++I){var Z=ie[I],Y=ie[(I+1)%D],W=Math.min(Z,Y)+":"+Math.max(Z,Y);if(W in U){var te=U[W];H[te].push(l),H[l].push(te),X[Z]=X[Y]=!0}else U[W]=l}function z(se){for(var de=se.length,ue=0;ue<de;++ue)if(!X[se[ue]])return!1;return!0}var N=[],V=a(m,-1);for(l=0;l<m;++l)w[l]!==l||z(x[l])?V[l]=-1:(N.push(l),V[l]=0);for(h=[];N.length>0;){var Q=N.pop(),j=H[Q];p(j,function(se,de){return se-de});var J,K=j.length,re=V[Q];if(0===re){var ie=x[Q];J=[ie]}for(l=0;l<K;++l){var ce=j[l];V[ce]>=0||(V[ce]=1^re,N.push(ce),0===re&&(z(ie=x[ce])||(ie.reverse(),J.push(ie))))}0===re&&h.push(J)}return h};var e=g("edges-to-adjacency-list"),i=g("planar-dual"),r=g("point-in-big-polygon"),o=g("two-product"),n=g("robust-sum"),p=g("uniq"),s=g("./lib/trim-leaves");function a(c,u){for(var h=new Array(c),v=0;v<c;++v)h[v]=u;return h}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(g,_,t){_.exports=function(a){for(var c=a.length,u=[],h=[],v=0;v<c;++v)for(var f=a[v],l=f.length,x=l-1,m=0;m<l;x=m++){var w=f[x],b=f[m];w[0]===b[0]?h.push([w,b]):u.push([w,b])}if(0===u.length)return 0===h.length?s:(k=p(h),function(A){return k(A[0],A[1])?0:1});var k,A,I,T=i(u),L=(A=T.slabs,I=T.coordinates,function(D){var S=o.le(I,D[0]);if(S<0)return 1;var C=A[S];if(!C){if(!(S>0&&I[S]===D[0]))return 1;C=A[S-1]}for(var R=1;C;){var F=C.key,H=e(D,F[0],F[1]);if(F[0][0]<F[1][0])if(H<0)C=C.left;else{if(!(H>0))return 0;R=-1,C=C.right}else if(H>0)C=C.left;else{if(!(H<0))return 0;R=1,C=C.right}}return R});return 0===h.length?L:function(A,I){return function(D){return A(D[0],D[1])?0:I(D)}}(p(h),L)};var e=g("robust-orientation")[3],i=g("slab-decomposition"),r=g("interval-tree-1d"),o=g("binary-search-bounds");function n(){return!0}function p(a){for(var c={},u=0;u<a.length;++u){var h=a[u],v=h[0][0],f=h[0][1],l=h[1][1],x=[Math.min(f,l),Math.max(f,l)];v in c?c[v].push(x):c[v]=[x]}var k,m={},w=Object.keys(c);for(u=0;u<w.length;++u)m[w[u]]=r(c[w[u]]);return k=m,function(T,L){var A=k[T];return!!A&&!!A.queryPoint(L,n)}}function s(a){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(g,_,t){"use strict";var e=new Float64Array(4),i=new Float64Array(4),r=new Float64Array(4);_.exports=function(o,n,p,s,a){e.length<s.length&&(e=new Float64Array(s.length),i=new Float64Array(s.length),r=new Float64Array(s.length));for(var c=0;c<s.length;++c)e[c]=o[c]-s[c],i[c]=n[c]-o[c],r[c]=p[c]-o[c];var u=0,h=0,v=0,f=0,l=0,x=0;for(c=0;c<s.length;++c){var m=i[c],w=r[c],b=e[c];u+=m*m,h+=m*w,v+=w*w,f+=b*m,l+=b*w,x+=b*b}var k,T,L,A,I,D=Math.abs(u*v-h*h),S=h*l-v*f,C=h*f-u*l;if(S+C<=D)if(S<0)C<0&&f<0?(C=0,-f>=u?(S=1,k=u+2*f+x):k=f*(S=-f/u)+x):(S=0,l>=0?(C=0,k=x):-l>=v?(C=1,k=v+2*l+x):k=l*(C=-l/v)+x);else if(C<0)C=0,f>=0?(S=0,k=x):-f>=u?(S=1,k=u+2*f+x):k=f*(S=-f/u)+x;else{var R=1/D;k=(S*=R)*(u*S+h*(C*=R)+2*f)+C*(h*S+v*C+2*l)+x}else S<0?(L=v+l)>(T=h+f)?(A=L-T)>=(I=u-2*h+v)?(S=1,C=0,k=u+2*f+x):k=(S=A/I)*(u*S+h*(C=1-S)+2*f)+C*(h*S+v*C+2*l)+x:(S=0,L<=0?(C=1,k=v+2*l+x):l>=0?(C=0,k=x):k=l*(C=-l/v)+x):C<0?(L=u+f)>(T=h+l)?(A=L-T)>=(I=u-2*h+v)?(C=1,S=0,k=v+2*l+x):k=(S=1-(C=A/I))*(u*S+h*C+2*f)+C*(h*S+v*C+2*l)+x:(C=0,L<=0?(S=1,k=u+2*f+x):f>=0?(S=0,k=x):k=f*(S=-f/u)+x):(A=v+l-h-f)<=0?(S=0,C=1,k=v+2*l+x):A>=(I=u-2*h+v)?(S=1,C=0,k=u+2*f+x):k=(S=A/I)*(u*S+h*(C=1-S)+2*f)+C*(h*S+v*C+2*l)+x;var F=1-S-C;for(c=0;c<s.length;++c)a[c]=F*o[c]+S*n[c]+C*p[c];return k<0?0:k}},{}],271:[function(g,_,t){_.exports=g("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(g,_,t){"use strict";var e=g("big-rat/add");_.exports=function(i,r){for(var o=i.length,n=new Array(o),p=0;p<o;++p)n[p]=e(i[p],r[p]);return n}},{"big-rat/add":15}],273:[function(g,_,t){"use strict";_.exports=function(i){for(var r=new Array(i.length),o=0;o<i.length;++o)r[o]=e(i[o]);return r};var e=g("big-rat")},{"big-rat":18}],274:[function(g,_,t){"use strict";var e=g("big-rat"),i=g("big-rat/mul");_.exports=function(r,o){for(var n=e(o),p=r.length,s=new Array(p),a=0;a<p;++a)s[a]=i(r[a],n);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(g,_,t){"use strict";var e=g("big-rat/sub");_.exports=function(i,r){for(var o=i.length,n=new Array(o),p=0;p<o;++p)n[p]=e(i[p],r[p]);return n}},{"big-rat/sub":29}],276:[function(g,_,t){"use strict";var e=g("compare-cell"),i=g("compare-oriented-cell"),r=g("cell-orientation");_.exports=function(o){o.sort(i);for(var n=o.length,p=0,s=0;s<n;++s){var a=o[s],c=r(a);if(0!==c){if(p>0){var u=o[p-1];if(0===e(a,u)&&r(u)!==c){p-=1;continue}}o[p++]=a}}return o.length=p,o}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(g,_,t){"use strict";var e,i="";_.exports=function(r,o){if("string"!=typeof r)throw new TypeError("expected a string");if(1===o)return r;if(2===o)return r+r;var n=r.length*o;if(e!==r||void 0===e)e=r,i="";else if(i.length>=n)return i.substr(0,n);for(;n>i.length&&o>1;)1&o&&(i+=r),o>>=1,r+=r;return i=(i+=r).substr(0,n)}},{}],278:[function(g,_,t){(function(e){(function(){_.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(g,_,t){"use strict";_.exports=function(e){for(var i=e.length,r=e[e.length-1],o=i,n=i-2;n>=0;--n){var p=r,s=e[n];(c=s-((r=p+s)-p))&&(e[--o]=r,r=c)}var a=0;for(n=o;n<i;++n){var c;(c=(s=r)-((r=(p=e[n])+s)-p))&&(e[a++]=c)}return e[a++]=r,e.length=a,e}},{}],280:[function(g,_,t){"use strict";var e=g("two-product"),i=g("robust-sum"),r=g("robust-scale"),o=g("robust-compress");function n(u,h,v,f){return function(l){return f(u(v(l[0][0],l[1][1]),v(-l[0][1],l[1][0])))}}function p(u,h,v,f){return function(l){return f(u(h(u(v(l[1][1],l[2][2]),v(-l[1][2],l[2][1])),l[0][0]),u(h(u(v(l[1][0],l[2][2]),v(-l[1][2],l[2][0])),-l[0][1]),h(u(v(l[1][0],l[2][1]),v(-l[1][1],l[2][0])),l[0][2]))))}}function s(u){return(2===u?n:3===u?p:void 0)(i,r,e,o)}var a=[function(){return[0]},function(u){return[u[0][0]]}];function c(u,h,v,f,l,x){return function(m){switch(m.length){case 0:return u(m);case 1:return h(m);case 2:return v(m);case 3:return f(m)}var w=l[m.length];return w||(w=l[m.length]=x(m.length)),w(m)}}!function(){for(;a.length<4;)a.push(s(a.length));_.exports=c.apply(void 0,a.concat([a,s]));for(var u=0;u<a.length;++u)_.exports[u]=a[u]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(g,_,t){"use strict";var e=g("two-product"),i=g("robust-sum");_.exports=function(r,o){for(var n=e(r[0],o[0]),p=1;p<r.length;++p)n=i(n,e(r[p],o[p]));return n}},{"robust-sum":289,"two-product":306}],282:[function(g,_,t){"use strict";var e=g("two-product"),i=g("robust-sum"),r=g("robust-subtract"),o=g("robust-scale");function n(f){return(3===f?p:4===f?s:5===f?a:c)(i,r,e,o)}function p(f,l,x,m){return function(w,b,k){var T=x(w[0],w[0]),L=m(T,b[0]),A=m(T,k[0]),I=x(b[0],b[0]),D=m(I,w[0]),S=m(I,k[0]),C=x(k[0],k[0]),R=m(C,w[0]),F=m(C,b[0]),H=f(l(F,S),l(D,L)),U=l(R,A),X=l(H,U);return X[X.length-1]}}function s(f,l,x,m){return function(w,b,k,T){var L=f(x(w[0],w[0]),x(w[1],w[1])),A=m(L,b[0]),I=m(L,k[0]),D=m(L,T[0]),S=f(x(b[0],b[0]),x(b[1],b[1])),C=m(S,w[0]),R=m(S,k[0]),F=m(S,T[0]),H=f(x(k[0],k[0]),x(k[1],k[1])),U=m(H,w[0]),X=m(H,b[0]),Z=m(H,T[0]),Y=f(x(T[0],T[0]),x(T[1],T[1])),W=m(Y,w[0]),te=m(Y,b[0]),z=m(Y,k[0]),N=f(f(m(l(z,Z),b[1]),f(m(l(te,F),-k[1]),m(l(X,R),T[1]))),f(m(l(te,F),w[1]),f(m(l(W,D),-b[1]),m(l(C,A),T[1])))),V=f(f(m(l(z,Z),w[1]),f(m(l(W,D),-k[1]),m(l(U,I),T[1]))),f(m(l(X,R),w[1]),f(m(l(U,I),-b[1]),m(l(C,A),k[1])))),Q=l(N,V);return Q[Q.length-1]}}function a(f,l,x,m){return function(w,b,k,T,L){var A=f(x(w[0],w[0]),f(x(w[1],w[1]),x(w[2],w[2]))),I=m(A,b[0]),D=m(A,k[0]),S=m(A,T[0]),C=m(A,L[0]),R=f(x(b[0],b[0]),f(x(b[1],b[1]),x(b[2],b[2]))),F=m(R,w[0]),H=m(R,k[0]),U=m(R,T[0]),X=m(R,L[0]),Z=f(x(k[0],k[0]),f(x(k[1],k[1]),x(k[2],k[2]))),Y=m(Z,w[0]),W=m(Z,b[0]),te=m(Z,T[0]),z=m(Z,L[0]),N=f(x(T[0],T[0]),f(x(T[1],T[1]),x(T[2],T[2]))),V=m(N,w[0]),Q=m(N,b[0]),j=m(N,k[0]),J=m(N,L[0]),K=f(x(L[0],L[0]),f(x(L[1],L[1]),x(L[2],L[2]))),re=m(K,w[0]),ie=m(K,b[0]),ce=m(K,k[0]),se=m(K,T[0]),de=f(f(f(m(f(m(l(se,J),k[1]),f(m(l(ce,z),-T[1]),m(l(j,te),L[1]))),b[2]),f(m(f(m(l(se,J),b[1]),f(m(l(ie,X),-T[1]),m(l(Q,U),L[1]))),-k[2]),m(f(m(l(ce,z),b[1]),f(m(l(ie,X),-k[1]),m(l(W,H),L[1]))),T[2]))),f(m(f(m(l(j,te),b[1]),f(m(l(Q,U),-k[1]),m(l(W,H),T[1]))),-L[2]),f(m(f(m(l(se,J),b[1]),f(m(l(ie,X),-T[1]),m(l(Q,U),L[1]))),w[2]),m(f(m(l(se,J),w[1]),f(m(l(re,C),-T[1]),m(l(V,S),L[1]))),-b[2])))),f(f(m(f(m(l(ie,X),w[1]),f(m(l(re,C),-b[1]),m(l(F,I),L[1]))),T[2]),f(m(f(m(l(Q,U),w[1]),f(m(l(V,S),-b[1]),m(l(F,I),T[1]))),-L[2]),m(f(m(l(j,te),b[1]),f(m(l(Q,U),-k[1]),m(l(W,H),T[1]))),w[2]))),f(m(f(m(l(j,te),w[1]),f(m(l(V,S),-k[1]),m(l(Y,D),T[1]))),-b[2]),f(m(f(m(l(Q,U),w[1]),f(m(l(V,S),-b[1]),m(l(F,I),T[1]))),k[2]),m(f(m(l(W,H),w[1]),f(m(l(Y,D),-b[1]),m(l(F,I),k[1]))),-T[2]))))),ue=f(f(f(m(f(m(l(se,J),k[1]),f(m(l(ce,z),-T[1]),m(l(j,te),L[1]))),w[2]),m(f(m(l(se,J),w[1]),f(m(l(re,C),-T[1]),m(l(V,S),L[1]))),-k[2])),f(m(f(m(l(ce,z),w[1]),f(m(l(re,C),-k[1]),m(l(Y,D),L[1]))),T[2]),m(f(m(l(j,te),w[1]),f(m(l(V,S),-k[1]),m(l(Y,D),T[1]))),-L[2]))),f(f(m(f(m(l(ce,z),b[1]),f(m(l(ie,X),-k[1]),m(l(W,H),L[1]))),w[2]),m(f(m(l(ce,z),w[1]),f(m(l(re,C),-k[1]),m(l(Y,D),L[1]))),-b[2])),f(m(f(m(l(ie,X),w[1]),f(m(l(re,C),-b[1]),m(l(F,I),L[1]))),k[2]),m(f(m(l(W,H),w[1]),f(m(l(Y,D),-b[1]),m(l(F,I),k[1]))),-L[2])))),ge=l(de,ue);return ge[ge.length-1]}}function c(f,l,x,m){return function(w,b,k,T,L,A){var I=f(f(x(w[0],w[0]),x(w[1],w[1])),f(x(w[2],w[2]),x(w[3],w[3]))),D=m(I,b[0]),S=m(I,k[0]),C=m(I,T[0]),R=m(I,L[0]),F=m(I,A[0]),H=f(f(x(b[0],b[0]),x(b[1],b[1])),f(x(b[2],b[2]),x(b[3],b[3]))),U=m(H,w[0]),X=m(H,k[0]),Z=m(H,T[0]),Y=m(H,L[0]),W=m(H,A[0]),te=f(f(x(k[0],k[0]),x(k[1],k[1])),f(x(k[2],k[2]),x(k[3],k[3]))),z=m(te,w[0]),N=m(te,b[0]),V=m(te,T[0]),Q=m(te,L[0]),j=m(te,A[0]),J=f(f(x(T[0],T[0]),x(T[1],T[1])),f(x(T[2],T[2]),x(T[3],T[3]))),K=m(J,w[0]),re=m(J,b[0]),ie=m(J,k[0]),ce=m(J,L[0]),se=m(J,A[0]),de=f(f(x(L[0],L[0]),x(L[1],L[1])),f(x(L[2],L[2]),x(L[3],L[3]))),ue=m(de,w[0]),ge=m(de,b[0]),be=m(de,k[0]),Te=m(de,T[0]),we=m(de,A[0]),Le=f(f(x(A[0],A[0]),x(A[1],A[1])),f(x(A[2],A[2]),x(A[3],A[3]))),fe=m(Le,w[0]),ve=m(Le,b[0]),Me=m(Le,k[0]),ke=m(Le,T[0]),Ce=m(Le,L[0]),Pe=f(f(f(m(f(f(m(f(m(l(Ce,we),T[1]),f(m(l(ke,se),-L[1]),m(l(Te,ce),A[1]))),k[2]),m(f(m(l(Ce,we),k[1]),f(m(l(Me,j),-L[1]),m(l(be,Q),A[1]))),-T[2])),f(m(f(m(l(ke,se),k[1]),f(m(l(Me,j),-T[1]),m(l(ie,V),A[1]))),L[2]),m(f(m(l(Te,ce),k[1]),f(m(l(be,Q),-T[1]),m(l(ie,V),L[1]))),-A[2]))),b[3]),f(m(f(f(m(f(m(l(Ce,we),T[1]),f(m(l(ke,se),-L[1]),m(l(Te,ce),A[1]))),b[2]),m(f(m(l(Ce,we),b[1]),f(m(l(ve,W),-L[1]),m(l(ge,Y),A[1]))),-T[2])),f(m(f(m(l(ke,se),b[1]),f(m(l(ve,W),-T[1]),m(l(re,Z),A[1]))),L[2]),m(f(m(l(Te,ce),b[1]),f(m(l(ge,Y),-T[1]),m(l(re,Z),L[1]))),-A[2]))),-k[3]),m(f(f(m(f(m(l(Ce,we),k[1]),f(m(l(Me,j),-L[1]),m(l(be,Q),A[1]))),b[2]),m(f(m(l(Ce,we),b[1]),f(m(l(ve,W),-L[1]),m(l(ge,Y),A[1]))),-k[2])),f(m(f(m(l(Me,j),b[1]),f(m(l(ve,W),-k[1]),m(l(N,X),A[1]))),L[2]),m(f(m(l(be,Q),b[1]),f(m(l(ge,Y),-k[1]),m(l(N,X),L[1]))),-A[2]))),T[3]))),f(f(m(f(f(m(f(m(l(ke,se),k[1]),f(m(l(Me,j),-T[1]),m(l(ie,V),A[1]))),b[2]),m(f(m(l(ke,se),b[1]),f(m(l(ve,W),-T[1]),m(l(re,Z),A[1]))),-k[2])),f(m(f(m(l(Me,j),b[1]),f(m(l(ve,W),-k[1]),m(l(N,X),A[1]))),T[2]),m(f(m(l(ie,V),b[1]),f(m(l(re,Z),-k[1]),m(l(N,X),T[1]))),-A[2]))),-L[3]),m(f(f(m(f(m(l(Te,ce),k[1]),f(m(l(be,Q),-T[1]),m(l(ie,V),L[1]))),b[2]),m(f(m(l(Te,ce),b[1]),f(m(l(ge,Y),-T[1]),m(l(re,Z),L[1]))),-k[2])),f(m(f(m(l(be,Q),b[1]),f(m(l(ge,Y),-k[1]),m(l(N,X),L[1]))),T[2]),m(f(m(l(ie,V),b[1]),f(m(l(re,Z),-k[1]),m(l(N,X),T[1]))),-L[2]))),A[3])),f(m(f(f(m(f(m(l(Ce,we),T[1]),f(m(l(ke,se),-L[1]),m(l(Te,ce),A[1]))),b[2]),m(f(m(l(Ce,we),b[1]),f(m(l(ve,W),-L[1]),m(l(ge,Y),A[1]))),-T[2])),f(m(f(m(l(ke,se),b[1]),f(m(l(ve,W),-T[1]),m(l(re,Z),A[1]))),L[2]),m(f(m(l(Te,ce),b[1]),f(m(l(ge,Y),-T[1]),m(l(re,Z),L[1]))),-A[2]))),w[3]),m(f(f(m(f(m(l(Ce,we),T[1]),f(m(l(ke,se),-L[1]),m(l(Te,ce),A[1]))),w[2]),m(f(m(l(Ce,we),w[1]),f(m(l(fe,F),-L[1]),m(l(ue,R),A[1]))),-T[2])),f(m(f(m(l(ke,se),w[1]),f(m(l(fe,F),-T[1]),m(l(K,C),A[1]))),L[2]),m(f(m(l(Te,ce),w[1]),f(m(l(ue,R),-T[1]),m(l(K,C),L[1]))),-A[2]))),-b[3])))),f(f(f(m(f(f(m(f(m(l(Ce,we),b[1]),f(m(l(ve,W),-L[1]),m(l(ge,Y),A[1]))),w[2]),m(f(m(l(Ce,we),w[1]),f(m(l(fe,F),-L[1]),m(l(ue,R),A[1]))),-b[2])),f(m(f(m(l(ve,W),w[1]),f(m(l(fe,F),-b[1]),m(l(U,D),A[1]))),L[2]),m(f(m(l(ge,Y),w[1]),f(m(l(ue,R),-b[1]),m(l(U,D),L[1]))),-A[2]))),T[3]),m(f(f(m(f(m(l(ke,se),b[1]),f(m(l(ve,W),-T[1]),m(l(re,Z),A[1]))),w[2]),m(f(m(l(ke,se),w[1]),f(m(l(fe,F),-T[1]),m(l(K,C),A[1]))),-b[2])),f(m(f(m(l(ve,W),w[1]),f(m(l(fe,F),-b[1]),m(l(U,D),A[1]))),T[2]),m(f(m(l(re,Z),w[1]),f(m(l(K,C),-b[1]),m(l(U,D),T[1]))),-A[2]))),-L[3])),f(m(f(f(m(f(m(l(Te,ce),b[1]),f(m(l(ge,Y),-T[1]),m(l(re,Z),L[1]))),w[2]),m(f(m(l(Te,ce),w[1]),f(m(l(ue,R),-T[1]),m(l(K,C),L[1]))),-b[2])),f(m(f(m(l(ge,Y),w[1]),f(m(l(ue,R),-b[1]),m(l(U,D),L[1]))),T[2]),m(f(m(l(re,Z),w[1]),f(m(l(K,C),-b[1]),m(l(U,D),T[1]))),-L[2]))),A[3]),m(f(f(m(f(m(l(ke,se),k[1]),f(m(l(Me,j),-T[1]),m(l(ie,V),A[1]))),b[2]),m(f(m(l(ke,se),b[1]),f(m(l(ve,W),-T[1]),m(l(re,Z),A[1]))),-k[2])),f(m(f(m(l(Me,j),b[1]),f(m(l(ve,W),-k[1]),m(l(N,X),A[1]))),T[2]),m(f(m(l(ie,V),b[1]),f(m(l(re,Z),-k[1]),m(l(N,X),T[1]))),-A[2]))),w[3]))),f(f(m(f(f(m(f(m(l(ke,se),k[1]),f(m(l(Me,j),-T[1]),m(l(ie,V),A[1]))),w[2]),m(f(m(l(ke,se),w[1]),f(m(l(fe,F),-T[1]),m(l(K,C),A[1]))),-k[2])),f(m(f(m(l(Me,j),w[1]),f(m(l(fe,F),-k[1]),m(l(z,S),A[1]))),T[2]),m(f(m(l(ie,V),w[1]),f(m(l(K,C),-k[1]),m(l(z,S),T[1]))),-A[2]))),-b[3]),m(f(f(m(f(m(l(ke,se),b[1]),f(m(l(ve,W),-T[1]),m(l(re,Z),A[1]))),w[2]),m(f(m(l(ke,se),w[1]),f(m(l(fe,F),-T[1]),m(l(K,C),A[1]))),-b[2])),f(m(f(m(l(ve,W),w[1]),f(m(l(fe,F),-b[1]),m(l(U,D),A[1]))),T[2]),m(f(m(l(re,Z),w[1]),f(m(l(K,C),-b[1]),m(l(U,D),T[1]))),-A[2]))),k[3])),f(m(f(f(m(f(m(l(Me,j),b[1]),f(m(l(ve,W),-k[1]),m(l(N,X),A[1]))),w[2]),m(f(m(l(Me,j),w[1]),f(m(l(fe,F),-k[1]),m(l(z,S),A[1]))),-b[2])),f(m(f(m(l(ve,W),w[1]),f(m(l(fe,F),-b[1]),m(l(U,D),A[1]))),k[2]),m(f(m(l(N,X),w[1]),f(m(l(z,S),-b[1]),m(l(U,D),k[1]))),-A[2]))),-T[3]),m(f(f(m(f(m(l(ie,V),b[1]),f(m(l(re,Z),-k[1]),m(l(N,X),T[1]))),w[2]),m(f(m(l(ie,V),w[1]),f(m(l(K,C),-k[1]),m(l(z,S),T[1]))),-b[2])),f(m(f(m(l(re,Z),w[1]),f(m(l(K,C),-b[1]),m(l(U,D),T[1]))),k[2]),m(f(m(l(N,X),w[1]),f(m(l(z,S),-b[1]),m(l(U,D),k[1]))),-T[2]))),A[3]))))),Fe=f(f(f(m(f(f(m(f(m(l(Ce,we),T[1]),f(m(l(ke,se),-L[1]),m(l(Te,ce),A[1]))),k[2]),m(f(m(l(Ce,we),k[1]),f(m(l(Me,j),-L[1]),m(l(be,Q),A[1]))),-T[2])),f(m(f(m(l(ke,se),k[1]),f(m(l(Me,j),-T[1]),m(l(ie,V),A[1]))),L[2]),m(f(m(l(Te,ce),k[1]),f(m(l(be,Q),-T[1]),m(l(ie,V),L[1]))),-A[2]))),w[3]),f(m(f(f(m(f(m(l(Ce,we),T[1]),f(m(l(ke,se),-L[1]),m(l(Te,ce),A[1]))),w[2]),m(f(m(l(Ce,we),w[1]),f(m(l(fe,F),-L[1]),m(l(ue,R),A[1]))),-T[2])),f(m(f(m(l(ke,se),w[1]),f(m(l(fe,F),-T[1]),m(l(K,C),A[1]))),L[2]),m(f(m(l(Te,ce),w[1]),f(m(l(ue,R),-T[1]),m(l(K,C),L[1]))),-A[2]))),-k[3]),m(f(f(m(f(m(l(Ce,we),k[1]),f(m(l(Me,j),-L[1]),m(l(be,Q),A[1]))),w[2]),m(f(m(l(Ce,we),w[1]),f(m(l(fe,F),-L[1]),m(l(ue,R),A[1]))),-k[2])),f(m(f(m(l(Me,j),w[1]),f(m(l(fe,F),-k[1]),m(l(z,S),A[1]))),L[2]),m(f(m(l(be,Q),w[1]),f(m(l(ue,R),-k[1]),m(l(z,S),L[1]))),-A[2]))),T[3]))),f(f(m(f(f(m(f(m(l(ke,se),k[1]),f(m(l(Me,j),-T[1]),m(l(ie,V),A[1]))),w[2]),m(f(m(l(ke,se),w[1]),f(m(l(fe,F),-T[1]),m(l(K,C),A[1]))),-k[2])),f(m(f(m(l(Me,j),w[1]),f(m(l(fe,F),-k[1]),m(l(z,S),A[1]))),T[2]),m(f(m(l(ie,V),w[1]),f(m(l(K,C),-k[1]),m(l(z,S),T[1]))),-A[2]))),-L[3]),m(f(f(m(f(m(l(Te,ce),k[1]),f(m(l(be,Q),-T[1]),m(l(ie,V),L[1]))),w[2]),m(f(m(l(Te,ce),w[1]),f(m(l(ue,R),-T[1]),m(l(K,C),L[1]))),-k[2])),f(m(f(m(l(be,Q),w[1]),f(m(l(ue,R),-k[1]),m(l(z,S),L[1]))),T[2]),m(f(m(l(ie,V),w[1]),f(m(l(K,C),-k[1]),m(l(z,S),T[1]))),-L[2]))),A[3])),f(m(f(f(m(f(m(l(Ce,we),k[1]),f(m(l(Me,j),-L[1]),m(l(be,Q),A[1]))),b[2]),m(f(m(l(Ce,we),b[1]),f(m(l(ve,W),-L[1]),m(l(ge,Y),A[1]))),-k[2])),f(m(f(m(l(Me,j),b[1]),f(m(l(ve,W),-k[1]),m(l(N,X),A[1]))),L[2]),m(f(m(l(be,Q),b[1]),f(m(l(ge,Y),-k[1]),m(l(N,X),L[1]))),-A[2]))),w[3]),m(f(f(m(f(m(l(Ce,we),k[1]),f(m(l(Me,j),-L[1]),m(l(be,Q),A[1]))),w[2]),m(f(m(l(Ce,we),w[1]),f(m(l(fe,F),-L[1]),m(l(ue,R),A[1]))),-k[2])),f(m(f(m(l(Me,j),w[1]),f(m(l(fe,F),-k[1]),m(l(z,S),A[1]))),L[2]),m(f(m(l(be,Q),w[1]),f(m(l(ue,R),-k[1]),m(l(z,S),L[1]))),-A[2]))),-b[3])))),f(f(f(m(f(f(m(f(m(l(Ce,we),b[1]),f(m(l(ve,W),-L[1]),m(l(ge,Y),A[1]))),w[2]),m(f(m(l(Ce,we),w[1]),f(m(l(fe,F),-L[1]),m(l(ue,R),A[1]))),-b[2])),f(m(f(m(l(ve,W),w[1]),f(m(l(fe,F),-b[1]),m(l(U,D),A[1]))),L[2]),m(f(m(l(ge,Y),w[1]),f(m(l(ue,R),-b[1]),m(l(U,D),L[1]))),-A[2]))),k[3]),m(f(f(m(f(m(l(Me,j),b[1]),f(m(l(ve,W),-k[1]),m(l(N,X),A[1]))),w[2]),m(f(m(l(Me,j),w[1]),f(m(l(fe,F),-k[1]),m(l(z,S),A[1]))),-b[2])),f(m(f(m(l(ve,W),w[1]),f(m(l(fe,F),-b[1]),m(l(U,D),A[1]))),k[2]),m(f(m(l(N,X),w[1]),f(m(l(z,S),-b[1]),m(l(U,D),k[1]))),-A[2]))),-L[3])),f(m(f(f(m(f(m(l(be,Q),b[1]),f(m(l(ge,Y),-k[1]),m(l(N,X),L[1]))),w[2]),m(f(m(l(be,Q),w[1]),f(m(l(ue,R),-k[1]),m(l(z,S),L[1]))),-b[2])),f(m(f(m(l(ge,Y),w[1]),f(m(l(ue,R),-b[1]),m(l(U,D),L[1]))),k[2]),m(f(m(l(N,X),w[1]),f(m(l(z,S),-b[1]),m(l(U,D),k[1]))),-L[2]))),A[3]),m(f(f(m(f(m(l(Te,ce),k[1]),f(m(l(be,Q),-T[1]),m(l(ie,V),L[1]))),b[2]),m(f(m(l(Te,ce),b[1]),f(m(l(ge,Y),-T[1]),m(l(re,Z),L[1]))),-k[2])),f(m(f(m(l(be,Q),b[1]),f(m(l(ge,Y),-k[1]),m(l(N,X),L[1]))),T[2]),m(f(m(l(ie,V),b[1]),f(m(l(re,Z),-k[1]),m(l(N,X),T[1]))),-L[2]))),w[3]))),f(f(m(f(f(m(f(m(l(Te,ce),k[1]),f(m(l(be,Q),-T[1]),m(l(ie,V),L[1]))),w[2]),m(f(m(l(Te,ce),w[1]),f(m(l(ue,R),-T[1]),m(l(K,C),L[1]))),-k[2])),f(m(f(m(l(be,Q),w[1]),f(m(l(ue,R),-k[1]),m(l(z,S),L[1]))),T[2]),m(f(m(l(ie,V),w[1]),f(m(l(K,C),-k[1]),m(l(z,S),T[1]))),-L[2]))),-b[3]),m(f(f(m(f(m(l(Te,ce),b[1]),f(m(l(ge,Y),-T[1]),m(l(re,Z),L[1]))),w[2]),m(f(m(l(Te,ce),w[1]),f(m(l(ue,R),-T[1]),m(l(K,C),L[1]))),-b[2])),f(m(f(m(l(ge,Y),w[1]),f(m(l(ue,R),-b[1]),m(l(U,D),L[1]))),T[2]),m(f(m(l(re,Z),w[1]),f(m(l(K,C),-b[1]),m(l(U,D),T[1]))),-L[2]))),k[3])),f(m(f(f(m(f(m(l(be,Q),b[1]),f(m(l(ge,Y),-k[1]),m(l(N,X),L[1]))),w[2]),m(f(m(l(be,Q),w[1]),f(m(l(ue,R),-k[1]),m(l(z,S),L[1]))),-b[2])),f(m(f(m(l(ge,Y),w[1]),f(m(l(ue,R),-b[1]),m(l(U,D),L[1]))),k[2]),m(f(m(l(N,X),w[1]),f(m(l(z,S),-b[1]),m(l(U,D),k[1]))),-L[2]))),-T[3]),m(f(f(m(f(m(l(ie,V),b[1]),f(m(l(re,Z),-k[1]),m(l(N,X),T[1]))),w[2]),m(f(m(l(ie,V),w[1]),f(m(l(K,C),-k[1]),m(l(z,S),T[1]))),-b[2])),f(m(f(m(l(re,Z),w[1]),f(m(l(K,C),-b[1]),m(l(U,D),T[1]))),k[2]),m(f(m(l(N,X),w[1]),f(m(l(z,S),-b[1]),m(l(U,D),k[1]))),-T[2]))),L[3]))))),qe=l(Pe,Fe);return qe[qe.length-1]}}var u=[function(){return 0},function(){return 0},function(){return 0}];function h(f){var l=u[f.length];return l||(l=u[f.length]=n(f.length)),l.apply(void 0,f)}function v(f,l,x,m,w,b,k,T){return function(L,A,I,D,S,C){switch(arguments.length){case 0:case 1:return 0;case 2:return m(L,A);case 3:return w(L,A,I);case 4:return b(L,A,I,D);case 5:return k(L,A,I,D,S);case 6:return T(L,A,I,D,S,C)}for(var R=new Array(arguments.length),F=0;F<arguments.length;++F)R[F]=arguments[F];return f(R)}}!function(){for(;u.length<=6;)u.push(n(u.length));_.exports=v.apply(void 0,[h].concat(u));for(var f=0;f<=6;++f)_.exports[f]=u[f]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(g,_,t){"use strict";var e=g("robust-determinant");function i(s){return(2===s?r:o)(s<3?e[s]:e)}function r(s){return function(a,c){return[s([[+c[0],+a[0][1]],[+c[1],+a[1][1]]]),s([[+a[0][0],+c[0]],[+a[1][0],+c[1]]]),s(a)]}}function o(s){return function(a,c){return[s([[+c[0],+a[0][1],+a[0][2]],[+c[1],+a[1][1],+a[1][2]],[+c[2],+a[2][1],+a[2][2]]]),s([[+a[0][0],+c[0],+a[0][2]],[+a[1][0],+c[1],+a[1][2]],[+a[2][0],+c[2],+a[2][2]]]),s([[+a[0][0],+a[0][1],+c[0]],[+a[1][0],+a[1][1],+c[1]],[+a[2][0],+a[2][1],+c[2]]]),s(a)]}}var n=[function(){return[[0]]},function(s,a){return[[a[0]],[s[0][0]]]}];function p(s,a,c,u,h,v){return function(f,l){switch(f.length){case 0:return s(f,l);case 1:return a(f,l);case 2:return c(f,l);case 3:return u(f,l)}var x=h[f.length];return x||(x=h[f.length]=v(f.length)),x(f,l)}}!function(){for(;n.length<=3;)n.push(i(n.length));_.exports=p.apply(void 0,n.concat([n,i]));for(var s=0;s<3;++s)_.exports[s]=n[s]}()},{"robust-determinant":280}],284:[function(g,_,t){"use strict";var e=g("two-product"),i=g("robust-sum"),r=g("robust-scale"),o=g("robust-subtract");function n(l,x,m,w){return function(b,k,T){var L=l(l(x(k[1],T[0]),x(-T[1],k[0])),l(x(b[1],k[0]),x(-k[1],b[0]))),A=l(x(b[1],T[0]),x(-T[1],b[0])),I=w(L,A);return I[I.length-1]}}function p(l,x,m,w){return function(b,k,T,L){var A=l(l(m(l(x(T[1],L[0]),x(-L[1],T[0])),k[2]),l(m(l(x(k[1],L[0]),x(-L[1],k[0])),-T[2]),m(l(x(k[1],T[0]),x(-T[1],k[0])),L[2]))),l(m(l(x(k[1],L[0]),x(-L[1],k[0])),b[2]),l(m(l(x(b[1],L[0]),x(-L[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),L[2])))),I=l(l(m(l(x(T[1],L[0]),x(-L[1],T[0])),b[2]),l(m(l(x(b[1],L[0]),x(-L[1],b[0])),-T[2]),m(l(x(b[1],T[0]),x(-T[1],b[0])),L[2]))),l(m(l(x(k[1],T[0]),x(-T[1],k[0])),b[2]),l(m(l(x(b[1],T[0]),x(-T[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),T[2])))),D=w(A,I);return D[D.length-1]}}function s(l,x,m,w){return function(b,k,T,L,A){var I=l(l(l(m(l(m(l(x(L[1],A[0]),x(-A[1],L[0])),T[2]),l(m(l(x(T[1],A[0]),x(-A[1],T[0])),-L[2]),m(l(x(T[1],L[0]),x(-L[1],T[0])),A[2]))),k[3]),l(m(l(m(l(x(L[1],A[0]),x(-A[1],L[0])),k[2]),l(m(l(x(k[1],A[0]),x(-A[1],k[0])),-L[2]),m(l(x(k[1],L[0]),x(-L[1],k[0])),A[2]))),-T[3]),m(l(m(l(x(T[1],A[0]),x(-A[1],T[0])),k[2]),l(m(l(x(k[1],A[0]),x(-A[1],k[0])),-T[2]),m(l(x(k[1],T[0]),x(-T[1],k[0])),A[2]))),L[3]))),l(m(l(m(l(x(T[1],L[0]),x(-L[1],T[0])),k[2]),l(m(l(x(k[1],L[0]),x(-L[1],k[0])),-T[2]),m(l(x(k[1],T[0]),x(-T[1],k[0])),L[2]))),-A[3]),l(m(l(m(l(x(L[1],A[0]),x(-A[1],L[0])),k[2]),l(m(l(x(k[1],A[0]),x(-A[1],k[0])),-L[2]),m(l(x(k[1],L[0]),x(-L[1],k[0])),A[2]))),b[3]),m(l(m(l(x(L[1],A[0]),x(-A[1],L[0])),b[2]),l(m(l(x(b[1],A[0]),x(-A[1],b[0])),-L[2]),m(l(x(b[1],L[0]),x(-L[1],b[0])),A[2]))),-k[3])))),l(l(m(l(m(l(x(k[1],A[0]),x(-A[1],k[0])),b[2]),l(m(l(x(b[1],A[0]),x(-A[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),A[2]))),L[3]),l(m(l(m(l(x(k[1],L[0]),x(-L[1],k[0])),b[2]),l(m(l(x(b[1],L[0]),x(-L[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),L[2]))),-A[3]),m(l(m(l(x(T[1],L[0]),x(-L[1],T[0])),k[2]),l(m(l(x(k[1],L[0]),x(-L[1],k[0])),-T[2]),m(l(x(k[1],T[0]),x(-T[1],k[0])),L[2]))),b[3]))),l(m(l(m(l(x(T[1],L[0]),x(-L[1],T[0])),b[2]),l(m(l(x(b[1],L[0]),x(-L[1],b[0])),-T[2]),m(l(x(b[1],T[0]),x(-T[1],b[0])),L[2]))),-k[3]),l(m(l(m(l(x(k[1],L[0]),x(-L[1],k[0])),b[2]),l(m(l(x(b[1],L[0]),x(-L[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),L[2]))),T[3]),m(l(m(l(x(k[1],T[0]),x(-T[1],k[0])),b[2]),l(m(l(x(b[1],T[0]),x(-T[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),T[2]))),-L[3]))))),D=l(l(l(m(l(m(l(x(L[1],A[0]),x(-A[1],L[0])),T[2]),l(m(l(x(T[1],A[0]),x(-A[1],T[0])),-L[2]),m(l(x(T[1],L[0]),x(-L[1],T[0])),A[2]))),b[3]),m(l(m(l(x(L[1],A[0]),x(-A[1],L[0])),b[2]),l(m(l(x(b[1],A[0]),x(-A[1],b[0])),-L[2]),m(l(x(b[1],L[0]),x(-L[1],b[0])),A[2]))),-T[3])),l(m(l(m(l(x(T[1],A[0]),x(-A[1],T[0])),b[2]),l(m(l(x(b[1],A[0]),x(-A[1],b[0])),-T[2]),m(l(x(b[1],T[0]),x(-T[1],b[0])),A[2]))),L[3]),m(l(m(l(x(T[1],L[0]),x(-L[1],T[0])),b[2]),l(m(l(x(b[1],L[0]),x(-L[1],b[0])),-T[2]),m(l(x(b[1],T[0]),x(-T[1],b[0])),L[2]))),-A[3]))),l(l(m(l(m(l(x(T[1],A[0]),x(-A[1],T[0])),k[2]),l(m(l(x(k[1],A[0]),x(-A[1],k[0])),-T[2]),m(l(x(k[1],T[0]),x(-T[1],k[0])),A[2]))),b[3]),m(l(m(l(x(T[1],A[0]),x(-A[1],T[0])),b[2]),l(m(l(x(b[1],A[0]),x(-A[1],b[0])),-T[2]),m(l(x(b[1],T[0]),x(-T[1],b[0])),A[2]))),-k[3])),l(m(l(m(l(x(k[1],A[0]),x(-A[1],k[0])),b[2]),l(m(l(x(b[1],A[0]),x(-A[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),A[2]))),T[3]),m(l(m(l(x(k[1],T[0]),x(-T[1],k[0])),b[2]),l(m(l(x(b[1],T[0]),x(-T[1],b[0])),-k[2]),m(l(x(b[1],k[0]),x(-k[1],b[0])),T[2]))),-A[3])))),S=w(I,D);return S[S.length-1]}}function a(l){return(3===l?n:4===l?p:s)(i,e,r,o)}var c=a(3),u=a(4),h=[function(){return 0},function(){return 0},function(l,x){return x[0]-l[0]},function(l,x,m){var w,b=(l[1]-m[1])*(x[0]-m[0]),k=(l[0]-m[0])*(x[1]-m[1]),T=b-k;if(b>0){if(k<=0)return T;w=b+k}else{if(!(b<0)||k>=0)return T;w=-(b+k)}var L=33306690738754716e-32*w;return T>=L||T<=-L?T:c(l,x,m)},function(l,x,m,w){var b=l[0]-w[0],k=x[0]-w[0],T=m[0]-w[0],L=l[1]-w[1],A=x[1]-w[1],I=m[1]-w[1],D=l[2]-w[2],S=x[2]-w[2],C=m[2]-w[2],R=k*I,F=T*A,H=T*L,U=b*I,X=b*A,Z=k*L,Y=D*(R-F)+S*(H-U)+C*(X-Z),W=7771561172376103e-31*((Math.abs(R)+Math.abs(F))*Math.abs(D)+(Math.abs(H)+Math.abs(U))*Math.abs(S)+(Math.abs(X)+Math.abs(Z))*Math.abs(C));return Y>W||-Y>W?Y:u(l,x,m,w)}];function v(l){var x=h[l.length];return x||(x=h[l.length]=a(l.length)),x.apply(void 0,l)}function f(l,x,m,w,b,k,T){return function(L,A,I,D,S){switch(arguments.length){case 0:case 1:return 0;case 2:return w(L,A);case 3:return b(L,A,I);case 4:return k(L,A,I,D);case 5:return T(L,A,I,D,S)}for(var C=new Array(arguments.length),R=0;R<arguments.length;++R)C[R]=arguments[R];return l(C)}}!function(){for(;h.length<=5;)h.push(a(h.length));_.exports=f.apply(void 0,[v].concat(h));for(var l=0;l<=5;++l)_.exports[l]=h[l]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(g,_,t){"use strict";var e=g("robust-sum"),i=g("robust-scale");_.exports=function(r,o){if(1===r.length)return i(o,r[0]);if(1===o.length)return i(r,o[0]);if(0===r.length||0===o.length)return[0];var n=[0];if(r.length<o.length)for(var p=0;p<r.length;++p)n=e(n,i(o,r[p]));else for(p=0;p<o.length;++p)n=e(n,i(r,o[p]));return n}},{"robust-scale":286,"robust-sum":289}],286:[function(g,_,t){"use strict";var e=g("two-product"),i=g("two-sum");_.exports=function(r,o){var n=r.length;if(1===n){var p=e(r[0],o);return p[0]?p:[p[1]]}var s=new Array(2*n),a=[.1,.1],c=[.1,.1],u=0;e(r[0],o,a),a[0]&&(s[u++]=a[0]);for(var h=1;h<n;++h){e(r[h],o,c),i(a[1],c[0],a),a[0]&&(s[u++]=a[0]);var f=c[1],l=a[1],x=f+l,m=l-(x-f);a[1]=x,m&&(s[u++]=m)}return a[1]&&(s[u++]=a[1]),0===u&&(s[u++]=0),s.length=u,s}},{"two-product":306,"two-sum":307}],287:[function(g,_,t){"use strict";_.exports=function(i,r,o,n){var p=e(i,o,n),s=e(r,o,n);if(p>0&&s>0||p<0&&s<0)return!1;var a=e(o,i,r),c=e(n,i,r);return!(a>0&&c>0||a<0&&c<0)&&(0!==p||0!==s||0!==a||0!==c||function(u,h,v,f){for(var l=0;l<2;++l){var x=u[l],m=h[l],w=Math.min(x,m),b=Math.max(x,m),k=v[l],T=f[l],L=Math.min(k,T);if(Math.max(k,T)<w||b<L)return!1}return!0}(i,r,o,n))};var e=g("robust-orientation")[3]},{"robust-orientation":284}],288:[function(g,_,t){"use strict";_.exports=function(e,i){var I,D,S,C,R,r=0|e.length,o=0|i.length;if(1===r&&1===o)return(R=(I=e[0])-((S=I+(D=-i[0]))-(C=S-I))+(D-C))?[R,S]:[S];var n,p,s=new Array(r+o),a=0,c=0,u=0,h=Math.abs,v=e[c],f=h(v),l=-i[u],x=h(l);f<x?(p=v,(c+=1)<r&&(f=h(v=e[c]))):(p=l,(u+=1)<o&&(x=h(l=-i[u]))),c<r&&f<x||u>=o?(n=v,(c+=1)<r&&(f=h(v=e[c]))):(n=l,(u+=1)<o&&(x=h(l=-i[u])));for(var m,w,b=n+p,k=b-n,T=p-k,L=T,A=b;c<r&&u<o;)f<x?(n=v,(c+=1)<r&&(f=h(v=e[c]))):(n=l,(u+=1)<o&&(x=h(l=-i[u]))),(T=(p=L)-(k=(b=n+p)-n))&&(s[a++]=T),L=A-((m=A+b)-(w=m-A))+(b-w),A=m;for(;c<r;)(T=(p=L)-(k=(b=(n=v)+p)-n))&&(s[a++]=T),L=A-((m=A+b)-(w=m-A))+(b-w),A=m,(c+=1)<r&&(v=e[c]);for(;u<o;)(T=(p=L)-(k=(b=(n=l)+p)-n))&&(s[a++]=T),L=A-((m=A+b)-(w=m-A))+(b-w),A=m,(u+=1)<o&&(l=-i[u]);return L&&(s[a++]=L),A&&(s[a++]=A),a||(s[a++]=0),s.length=a,s}},{}],289:[function(g,_,t){"use strict";_.exports=function(e,i){var I,D,S,C,R,r=0|e.length,o=0|i.length;if(1===r&&1===o)return(R=(I=e[0])-((S=I+(D=i[0]))-(C=S-I))+(D-C))?[R,S]:[S];var n,p,s=new Array(r+o),a=0,c=0,u=0,h=Math.abs,v=e[c],f=h(v),l=i[u],x=h(l);f<x?(p=v,(c+=1)<r&&(f=h(v=e[c]))):(p=l,(u+=1)<o&&(x=h(l=i[u]))),c<r&&f<x||u>=o?(n=v,(c+=1)<r&&(f=h(v=e[c]))):(n=l,(u+=1)<o&&(x=h(l=i[u])));for(var m,w,b=n+p,k=b-n,T=p-k,L=T,A=b;c<r&&u<o;)f<x?(n=v,(c+=1)<r&&(f=h(v=e[c]))):(n=l,(u+=1)<o&&(x=h(l=i[u]))),(T=(p=L)-(k=(b=n+p)-n))&&(s[a++]=T),L=A-((m=A+b)-(w=m-A))+(b-w),A=m;for(;c<r;)(T=(p=L)-(k=(b=(n=v)+p)-n))&&(s[a++]=T),L=A-((m=A+b)-(w=m-A))+(b-w),A=m,(c+=1)<r&&(v=e[c]);for(;u<o;)(T=(p=L)-(k=(b=(n=l)+p)-n))&&(s[a++]=T),L=A-((m=A+b)-(w=m-A))+(b-w),A=m,(u+=1)<o&&(l=i[u]);return L&&(s[a++]=L),A&&(s[a++]=A),a||(s[a++]=0),s.length=a,s}},{}],290:[function(g,_,t){"use strict";_.exports=function(r){return i(e(r))};var e=g("boundary-cells"),i=g("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(g,_,t){"use strict";_.exports=function(n,p,s,a){if(s=s||0,void 0===a&&(a=function(m){for(var w=m.length,b=0,k=0;k<w;++k)b=0|Math.max(b,m[k].length);return b-1}(n)),0===n.length||a<1)return{cells:[],vertexIds:[],vertexWeights:[]};var c=function(m,w){for(var b=m.length,k=i.mallocUint8(b),T=0;T<b;++T)k[T]=m[T]<w|0;return k}(p,+s),u=function(m,w){for(var b=m.length,T=i.mallocUint32(2*(w*(w+1)/2*b|0)),L=0,A=0;A<b;++A)for(var I=m[A],D=(w=I.length,0);D<w;++D)for(var S=0;S<D;++S){var C=I[S],R=I[D];T[L++]=0|Math.min(C,R),T[L++]=0|Math.max(C,R)}r(e(T,[L/2|0,2]));var F=2;for(A=2;A<L;A+=2)T[A-2]===T[A]&&T[A-1]===T[A+1]||(T[F++]=T[A],T[F++]=T[A+1]);return e(T,[F/2|0,2])}(n,a),h=function(m,w,b,k){for(var T=m.data,L=m.shape[0],A=i.mallocDouble(L),I=0,D=0;D<L;++D){var S=T[2*D],C=T[2*D+1];if(b[S]!==b[C]){var R=w[S],F=w[C];T[2*I]=S,T[2*I+1]=C,A[I++]=(F-k)/(F-R)}}return m.shape[0]=I,e(A,[I])}(u,p,c,+s),v=function(m,w){var b=i.mallocInt32(2*w),k=m.shape[0],T=m.data;b[0]=0;for(var L=0,A=0;A<k;++A){var I=T[2*A];if(I!==L){for(b[2*L+1]=A;++L<I;)b[2*L]=A,b[2*L+1]=A;b[2*L]=A}}for(b[2*L+1]=k;++L<w;)b[2*L]=b[2*L+1]=k;return b}(u,0|p.length),f=o(a)(n,u.data,v,c),l=function(m){for(var w=0|m.shape[0],b=m.data,k=new Array(w),T=0;T<w;++T)k[T]=[b[2*T],b[2*T+1]];return k}(u),x=[].slice.call(h.data,0,h.shape[0]);return i.free(c),i.free(u.data),i.free(h.data),i.free(v),{cells:f,vertexIds:l,vertexWeights:x}};var e=g("ndarray"),i=g("typedarray-pool"),r=g("ndarray-sort"),o=g("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(g,_,t){"use strict";_.exports=function(i){return e[i]()};var e=[function(){return function(i,r,o,n){for(var p=i.length,s=0;s<p;++s);return[]}},function(){function i(r,o,n,p){for(var s=0|Math.min(n,p),a=0|Math.max(n,p),c=r[2*s],u=r[2*s+1];c<u;){var h=c+u>>1,v=o[2*h+1];if(v===a)return h;a<v?u=h:c=h+1}return c}return function(r,o,n,p){for(var s=r.length,a=[],c=0;c<s;++c){var u=r[c];if(2===u.length){var h=(p[u[0]]<<0)+(p[u[1]]<<1);if(0===h||3===h)continue;switch(h){case 0:break;case 1:a.push([i(n,o,u[0],u[1])]);break;case 2:a.push([i(n,o,u[1],u[0])])}}}return a}},function(){function i(r,o,n,p){for(var s=0|Math.min(n,p),a=0|Math.max(n,p),c=r[2*s],u=r[2*s+1];c<u;){var h=c+u>>1,v=o[2*h+1];if(v===a)return h;a<v?u=h:c=h+1}return c}return function(r,o,n,p){for(var s=r.length,a=[],c=0;c<s;++c){var u=r[c],h=u.length;if(3===h){if(0==(v=(p[u[0]]<<0)+(p[u[1]]<<1)+(p[u[2]]<<2))||7===v)continue;switch(v){case 0:break;case 1:a.push([i(n,o,u[0],u[2]),i(n,o,u[0],u[1])]);break;case 2:a.push([i(n,o,u[1],u[0]),i(n,o,u[1],u[2])]);break;case 3:a.push([i(n,o,u[0],u[2]),i(n,o,u[1],u[2])]);break;case 4:a.push([i(n,o,u[2],u[1]),i(n,o,u[2],u[0])]);break;case 5:a.push([i(n,o,u[2],u[1]),i(n,o,u[0],u[1])]);break;case 6:a.push([i(n,o,u[1],u[0]),i(n,o,u[2],u[0])])}}else if(2===h){var v;if(0==(v=(p[u[0]]<<0)+(p[u[1]]<<1))||3===v)continue;switch(v){case 0:break;case 1:a.push([i(n,o,u[0],u[1])]);break;case 2:a.push([i(n,o,u[1],u[0])])}}}return a}},function(){function i(r,o,n,p){for(var s=0|Math.min(n,p),a=0|Math.max(n,p),c=r[2*s],u=r[2*s+1];c<u;){var h=c+u>>1,v=o[2*h+1];if(v===a)return h;a<v?u=h:c=h+1}return c}return function(r,o,n,p){for(var s=r.length,a=[],c=0;c<s;++c){var u=r[c],h=u.length;if(4===h){if(0==(v=(p[u[0]]<<0)+(p[u[1]]<<1)+(p[u[2]]<<2)+(p[u[3]]<<3))||15===v)continue;switch(v){case 0:break;case 1:a.push([i(n,o,u[0],u[1]),i(n,o,u[0],u[2]),i(n,o,u[0],u[3])]);break;case 2:a.push([i(n,o,u[1],u[2]),i(n,o,u[1],u[0]),i(n,o,u[1],u[3])]);break;case 3:a.push([i(n,o,u[1],u[2]),i(n,o,u[0],u[2]),i(n,o,u[0],u[3])],[i(n,o,u[1],u[3]),i(n,o,u[1],u[2]),i(n,o,u[0],u[3])]);break;case 4:a.push([i(n,o,u[2],u[0]),i(n,o,u[2],u[1]),i(n,o,u[2],u[3])]);break;case 5:a.push([i(n,o,u[0],u[1]),i(n,o,u[2],u[1]),i(n,o,u[0],u[3])],[i(n,o,u[2],u[1]),i(n,o,u[2],u[3]),i(n,o,u[0],u[3])]);break;case 6:a.push([i(n,o,u[2],u[0]),i(n,o,u[1],u[0]),i(n,o,u[1],u[3])],[i(n,o,u[2],u[3]),i(n,o,u[2],u[0]),i(n,o,u[1],u[3])]);break;case 7:a.push([i(n,o,u[0],u[3]),i(n,o,u[1],u[3]),i(n,o,u[2],u[3])]);break;case 8:a.push([i(n,o,u[3],u[1]),i(n,o,u[3],u[0]),i(n,o,u[3],u[2])]);break;case 9:a.push([i(n,o,u[3],u[1]),i(n,o,u[0],u[1]),i(n,o,u[0],u[2])],[i(n,o,u[3],u[2]),i(n,o,u[3],u[1]),i(n,o,u[0],u[2])]);break;case 10:a.push([i(n,o,u[1],u[0]),i(n,o,u[3],u[0]),i(n,o,u[1],u[2])],[i(n,o,u[3],u[0]),i(n,o,u[3],u[2]),i(n,o,u[1],u[2])]);break;case 11:a.push([i(n,o,u[1],u[2]),i(n,o,u[0],u[2]),i(n,o,u[3],u[2])]);break;case 12:a.push([i(n,o,u[3],u[0]),i(n,o,u[2],u[0]),i(n,o,u[2],u[1])],[i(n,o,u[3],u[1]),i(n,o,u[3],u[0]),i(n,o,u[2],u[1])]);break;case 13:a.push([i(n,o,u[0],u[1]),i(n,o,u[2],u[1]),i(n,o,u[3],u[1])]);break;case 14:a.push([i(n,o,u[2],u[0]),i(n,o,u[1],u[0]),i(n,o,u[3],u[0])])}}else if(3===h){if(0==(v=(p[u[0]]<<0)+(p[u[1]]<<1)+(p[u[2]]<<2))||7===v)continue;switch(v){case 0:break;case 1:a.push([i(n,o,u[0],u[2]),i(n,o,u[0],u[1])]);break;case 2:a.push([i(n,o,u[1],u[0]),i(n,o,u[1],u[2])]);break;case 3:a.push([i(n,o,u[0],u[2]),i(n,o,u[1],u[2])]);break;case 4:a.push([i(n,o,u[2],u[1]),i(n,o,u[2],u[0])]);break;case 5:a.push([i(n,o,u[2],u[1]),i(n,o,u[0],u[1])]);break;case 6:a.push([i(n,o,u[1],u[0]),i(n,o,u[2],u[0])])}}else if(2===h){var v;if(0==(v=(p[u[0]]<<0)+(p[u[1]]<<1))||3===v)continue;switch(v){case 0:break;case 1:a.push([i(n,o,u[0],u[1])]);break;case 2:a.push([i(n,o,u[1],u[0])])}}}return a}}]},{}],293:[function(g,_,t){"use strict";var e=g("bit-twiddle"),i=g("union-find");function r(u,h){var v=u.length,f=u.length-h.length,l=Math.min;if(f)return f;switch(v){case 0:return 0;case 1:return u[0]-h[0];case 2:return(w=u[0]+u[1]-h[0]-h[1])||l(u[0],u[1])-l(h[0],h[1]);case 3:var x=u[0]+u[1],m=h[0]+h[1];if(w=x+u[2]-(m+h[2]))return w;var w,b=l(u[0],u[1]),k=l(h[0],h[1]);return(w=l(b,u[2])-l(k,h[2]))||l(b+u[2],x)-l(k+h[2],m);default:var T=u.slice(0);T.sort();var L=h.slice(0);L.sort();for(var A=0;A<v;++A)if(f=T[A]-L[A])return f;return 0}}function o(u,h){return r(u[0],h[0])}function n(u,h){if(h){for(var v=u.length,f=new Array(v),l=0;l<v;++l)f[l]=[u[l],h[l]];for(f.sort(o),l=0;l<v;++l)u[l]=f[l][0],h[l]=f[l][1];return u}return u.sort(r),u}function p(u){if(0===u.length)return[];for(var h=1,v=u.length,f=1;f<v;++f){var l=u[f];if(r(l,u[f-1])){if(f===h){h++;continue}u[h++]=l}}return u.length=h,u}function s(u,h){for(var v=0,f=u.length-1,l=-1;v<=f;){var x=v+f>>1,m=r(u[x],h);m<=0?(0===m&&(l=x),v=x+1):m>0&&(f=x-1)}return l}function a(u,h){for(var v=new Array(u.length),f=0,l=v.length;f<l;++f)v[f]=[];for(var x=[],m=(f=0,h.length);f<m;++f)for(var w=h[f],b=w.length,k=1,T=1<<b;k<T;++k){x.length=e.popCount(k);for(var L=0,A=0;A<b;++A)k&1<<A&&(x[L++]=w[A]);var I=s(u,x);if(!(I<0))for(;v[I++].push(f),!(I>=u.length||0!==r(u[I],x)););}return v}function c(u,h){if(h<0)return[];for(var v=[],f=(1<<h+1)-1,l=0;l<u.length;++l)for(var x=u[l],m=f;m<1<<x.length;m=e.nextCombination(m)){for(var w=new Array(h+1),b=0,k=0;k<x.length;++k)m&1<<k&&(w[b++]=x[k]);v.push(w)}return n(v)}t.dimension=function(u){for(var h=0,v=Math.max,f=0,l=u.length;f<l;++f)h=v(h,u[f].length);return h-1},t.countVertices=function(u){for(var h=-1,v=Math.max,f=0,l=u.length;f<l;++f)for(var x=u[f],m=0,w=x.length;m<w;++m)h=v(h,x[m]);return h+1},t.cloneCells=function(u){for(var h=new Array(u.length),v=0,f=u.length;v<f;++v)h[v]=u[v].slice(0);return h},t.compareCells=r,t.normalize=n,t.unique=p,t.findCell=s,t.incidence=a,t.dual=function(u,h){if(!h)return a(p(c(u,0)),u);for(var v=new Array(h),f=0;f<h;++f)v[f]=[];f=0;for(var l=u.length;f<l;++f)for(var x=u[f],m=0,w=x.length;m<w;++m)v[x[m]].push(f);return v},t.explode=function(u){for(var h=[],v=0,f=u.length;v<f;++v)for(var l=u[v],x=0|l.length,m=1,w=1<<x;m<w;++m){for(var b=[],k=0;k<x;++k)m>>>k&1&&b.push(l[k]);h.push(b)}return n(h)},t.skeleton=c,t.boundary=function(u){for(var h=[],v=0,f=u.length;v<f;++v)for(var l=u[v],x=0,m=l.length;x<m;++x){for(var w=new Array(l.length-1),b=0,k=0;b<m;++b)b!==x&&(w[k++]=l[b]);h.push(w)}return n(h)},t.connectedComponents=function(u,h){return h?function(v,f){for(var l=new i(f),x=0;x<v.length;++x)for(var m=v[x],w=0;w<m.length;++w)for(var b=w+1;b<m.length;++b)l.link(m[w],m[b]);var k=[],T=l.ranks;for(x=0;x<T.length;++x)T[x]=-1;for(x=0;x<v.length;++x){var L=l.find(v[x][0]);T[L]<0?(T[L]=k.length,k.push([v[x].slice(0)])):k[T[L]].push(v[x].slice(0))}return k}(u,h):function(v){for(var f=p(n(c(v,0))),l=new i(f.length),x=0;x<v.length;++x)for(var m=v[x],w=0;w<m.length;++w)for(var b=s(f,[m[w]]),k=w+1;k<m.length;++k)l.link(b,s(f,[m[k]]));var T=[],L=l.ranks;for(x=0;x<L.length;++x)L[x]=-1;for(x=0;x<v.length;++x){var A=l.find(s(f,[v[x][0]]));L[A]<0?(L[A]=T.length,T.push([v[x].slice(0)])):T[L[A]].push(v[x].slice(0))}return T}(u)}},{"bit-twiddle":32,"union-find":309}],294:[function(g,_,t){arguments[4][32][0].apply(t,arguments)},{dup:32}],295:[function(g,_,t){arguments[4][293][0].apply(t,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(g,_,t){"use strict";function e(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}_.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},e.prototype.find=function(i){for(var r=this.roots;r[i]!==i;){var o=r[i];r[i]=r[o],i=o}return i},e.prototype.link=function(i,r){var o=this.find(i),n=this.find(r);if(o!==n){var p=this.ranks,s=this.roots,a=p[o],c=p[n];a<c?s[o]=n:c<a?s[n]=o:(s[n]=o,++p[o])}}},{}],297:[function(g,_,t){"use strict";_.exports=function(r,o,n){for(var p=o.length,s=r.length,a=new Array(p),c=new Array(p),u=new Array(p),h=new Array(p),v=0;v<p;++v)a[v]=c[v]=-1,u[v]=1/0,h[v]=!1;for(v=0;v<s;++v){var f=r[v];if(2!==f.length)throw new Error("Input must be a graph");var l=f[1],x=f[0];c[x]=-1!==c[x]?-2:l,a[l]=-1!==a[l]?-2:x}function m(Z){if(h[Z])return 1/0;var W,te,V=a[Z],Q=c[Z];return V<0||Q<0?1/0:(W=o[V],te=o[Q],Math.abs(e(o[Z],W,te))/Math.sqrt(Math.pow(W[0]-te[0],2)+Math.pow(W[1]-te[1],2)))}function w(Z,Y){var W=S[Z],te=S[Y];S[Z]=te,S[Y]=W,C[W]=Y,C[te]=Z}function b(Z){return u[S[Z]]}function k(Z){return 1&Z?Z-1>>1:(Z>>1)-1}function T(Z){for(var Y=b(Z);;){var W=Y,te=2*Z+1,z=2*(Z+1),N=Z;if(te<R){var V=b(te);V<W&&(N=te,W=V)}if(z<R&&b(z)<W&&(N=z),N===Z)return Z;w(Z,N),Z=N}}function L(Z){for(var Y=b(Z);Z>0;){var W=k(Z);if(!(W>=0&&Y<b(W)))return Z;w(Z,W),Z=W}}function A(){if(R>0){var Z=S[0];return w(0,R-1),R-=1,T(0),Z}return-1}function I(Z,Y){var W=S[Z];return u[W]===Y?Z:(u[W]=-1/0,L(Z),A(),u[W]=Y,L((R+=1)-1))}function D(Z){if(!h[Z]){h[Z]=!0;var Y=a[Z],W=c[Z];a[W]>=0&&(a[W]=Y),c[Y]>=0&&(c[Y]=W),C[Y]>=0&&I(C[Y],m(Y)),C[W]>=0&&I(C[W],m(W))}}var S=[],C=new Array(p);for(v=0;v<p;++v)(u[v]=m(v))<1/0?(C[v]=S.length,S.push(v)):C[v]=-1;var R=S.length;for(v=R>>1;v>=0;--v)T(v);for(;;){var F=A();if(F<0||u[F]>n)break;D(F)}var H=[];for(v=0;v<p;++v)h[v]||(C[v]=H.length,H.push(o[v].slice()));function U(Z,Y){if(Z[Y]<0)return Y;var W=Y,te=Y;do{var z=Z[te];if(!h[te]||z<0||z===te||(z=Z[te=z],!h[te]||z<0||z===te))break;te=z,W=Z[W]}while(W!==te);for(var N=Y;N!==te;N=Z[N])Z[N]=te;return te}var X=[];return r.forEach(function(Z){var Y=U(a,Z[0]),W=U(c,Z[1]);if(Y>=0&&W>=0&&Y!==W){var te=C[Y],z=C[W];te!==z&&X.push([te,z])}}),i.unique(i.normalize(X)),{positions:H,edges:X}};var e=g("robust-orientation"),i=g("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(g,_,t){"use strict";_.exports=function(r,o){var n,p,s,a;if(o[0][0]<o[1][0])n=o[0],p=o[1];else{if(!(o[0][0]>o[1][0]))return i(o,r);n=o[1],p=o[0]}if(r[0][0]<r[1][0])s=r[0],a=r[1];else{if(!(r[0][0]>r[1][0]))return-i(r,o);s=r[1],a=r[0]}var c=e(n,p,a),u=e(n,p,s);if(c<0){if(u<=0)return c}else if(c>0){if(u>=0)return c}else if(u)return u;if(c=e(a,s,p),u=e(a,s,n),c<0){if(u<=0)return c}else if(c>0){if(u>=0)return c}else if(u)return u;return p[0]-a[0]};var e=g("robust-orientation");function i(r,o){var n,p,s,a;if(o[0][0]<o[1][0])n=o[0],p=o[1];else{if(!(o[0][0]>o[1][0])){var c=Math.min(r[0][1],r[1][1]),u=Math.max(r[0][1],r[1][1]),h=Math.min(o[0][1],o[1][1]),v=Math.max(o[0][1],o[1][1]);return u<h?u-h:c>v?c-v:u-v}n=o[1],p=o[0]}r[0][1]<r[1][1]?(s=r[0],a=r[1]):(s=r[1],a=r[0]);var f=e(p,n,s);return f||(f=e(p,n,a))||a-p}},{"robust-orientation":284}],299:[function(g,_,t){"use strict";_.exports=function(u){for(var h=u.length,v=2*h,f=new Array(v),l=0;l<h;++l){var x=u[l],m=x[0][0]<x[1][0];f[2*l]=new c(x[0][0],x,m,l),f[2*l+1]=new c(x[1][0],x,!m,l)}f.sort(function(D,S){var C=D.x-S.x;return C||(C=D.create-S.create)||Math.min(D.segment[0][1],D.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var w=i(o),b=[],k=[],T=[];for(l=0;l<v;){for(var L=f[l].x,A=[];l<v;){var I=f[l];if(I.x!==L)break;l+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(A.push(new a(I.segment[0][1],I.index,!0,!0)),A.push(new a(I.segment[1][1],I.index,!1,!1))):(A.push(new a(I.segment[1][1],I.index,!0,!1)),A.push(new a(I.segment[0][1],I.index,!1,!0)))):w=I.create?w.insert(I.segment,I.index):w.remove(I.segment)}b.push(w.root),k.push(L),T.push(A)}return new n(b,k,T)};var e=g("binary-search-bounds"),i=g("functional-red-black-tree"),r=g("robust-orientation"),o=g("./lib/order-segments");function n(u,h,v){this.slabs=u,this.coordinates=h,this.horizontal=v}function p(u,h){return u.y-h}function s(u,h){for(var v=null;u;){var f,l,x=u.key;x[0][0]<x[1][0]?(f=x[0],l=x[1]):(f=x[1],l=x[0]);var m=r(f,l,h);if(m<0)u=u.left;else if(m>0)if(h[0]!==x[1][0])v=u,u=u.right;else{if(w=s(u.right,h))return w;u=u.left}else{if(h[0]!==x[1][0])return u;var w;if(w=s(u.right,h))return w;u=u.left}}return v}function a(u,h,v,f){this.y=u,this.index=h,this.start=v,this.closed=f}function c(u,h,v,f){this.x=u,this.segment=h,this.create=v,this.index=f}n.prototype.castUp=function(u){var h=e.le(this.coordinates,u[0]);if(h<0)return-1;var v=s(this.slabs[h],u),f=-1;if(v&&(f=v.value),this.coordinates[h]===u[0]){var l=null;if(v&&(l=v.key),h>0){var x=s(this.slabs[h-1],u);x&&(l?o(x.key,l)>0&&(l=x.key,f=x.value):(f=x.value,l=x.key))}var m=this.horizontal[h];if(m.length>0){var w=e.ge(m,u[1],p);if(w<m.length){var b=m[w];if(u[1]===b.y){if(b.closed)return b.index;for(;w<m.length-1&&m[w+1].y===u[1];)if((b=m[w+=1]).closed)return b.index;if(b.y===u[1]&&!b.start){if((w+=1)>=m.length)return f;b=m[w]}}if(b.start)if(l){var k=r(l[0],l[1],[u[0],b.y]);l[0][0]>l[1][0]&&(k=-k),k>0&&(f=b.index)}else f=b.index;else b.y!==u[1]&&(f=b.index)}}}return f}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(g,_,t){"use strict";var e=g("robust-dot-product"),i=g("robust-sum");function r(n,p){var s=i(e(n,p),[p[p.length-1]]);return s[s.length-1]}function o(n,p,s,a){var c=-p/(a-p);c<0?c=0:c>1&&(c=1);for(var u=1-c,h=n.length,v=new Array(h),f=0;f<h;++f)v[f]=c*n[f]+u*s[f];return v}_.exports=function(n,p){for(var s=[],a=[],c=r(n[n.length-1],p),u=n[n.length-1],h=n[0],v=0;v<n.length;++v,u=h){var f=r(h=n[v],p);if(c<0&&f>0||c>0&&f<0){var l=o(u,f,h,c);s.push(l),a.push(l.slice())}f<0?a.push(h.slice()):f>0?s.push(h.slice()):(s.push(h.slice()),a.push(h.slice())),c=f}return{positive:s,negative:a}},_.exports.positive=function(n,p){for(var s=[],a=r(n[n.length-1],p),c=n[n.length-1],u=n[0],h=0;h<n.length;++h,c=u){var v=r(u=n[h],p);(a<0&&v>0||a>0&&v<0)&&s.push(o(c,v,u,a)),v>=0&&s.push(u.slice()),a=v}return s},_.exports.negative=function(n,p){for(var s=[],a=r(n[n.length-1],p),c=n[n.length-1],u=n[0],h=0;h<n.length;++h,c=u){var v=r(u=n[h],p);(a<0&&v>0||a>0&&v<0)&&s.push(o(c,v,u,a)),v<=0&&s.push(u.slice()),a=v}return s}},{"robust-dot-product":281,"robust-sum":289}],301:[function(g,_,t){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(s){return o(p(s),arguments)}function r(s,a){return i.apply(null,[s].concat(a||[]))}function o(s,a){var c,u,h,v,f,l,x,m,w,b=1,k=s.length,T="";for(u=0;u<k;u++)if("string"==typeof s[u])T+=s[u];else if("object"==typeof s[u]){if((v=s[u]).keys)for(c=a[b],h=0;h<v.keys.length;h++){if(null==c)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',v.keys[h],v.keys[h-1]));c=c[v.keys[h]]}else c=v.param_no?a[v.param_no]:a[b++];if(e.not_type.test(v.type)&&e.not_primitive.test(v.type)&&c instanceof Function&&(c=c()),e.numeric_arg.test(v.type)&&"number"!=typeof c&&isNaN(c))throw new TypeError(i("[sprintf] expecting number but found %T",c));switch(e.number.test(v.type)&&(m=c>=0),v.type){case"b":c=parseInt(c,10).toString(2);break;case"c":c=String.fromCharCode(parseInt(c,10));break;case"d":case"i":c=parseInt(c,10);break;case"j":c=JSON.stringify(c,null,v.width?parseInt(v.width):0);break;case"e":c=v.precision?parseFloat(c).toExponential(v.precision):parseFloat(c).toExponential();break;case"f":c=v.precision?parseFloat(c).toFixed(v.precision):parseFloat(c);break;case"g":c=v.precision?String(Number(c.toPrecision(v.precision))):parseFloat(c);break;case"o":c=(parseInt(c,10)>>>0).toString(8);break;case"s":c=String(c),c=v.precision?c.substring(0,v.precision):c;break;case"t":c=String(!!c),c=v.precision?c.substring(0,v.precision):c;break;case"T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase(),c=v.precision?c.substring(0,v.precision):c;break;case"u":c=parseInt(c,10)>>>0;break;case"v":c=c.valueOf(),c=v.precision?c.substring(0,v.precision):c;break;case"x":c=(parseInt(c,10)>>>0).toString(16);break;case"X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}e.json.test(v.type)?T+=c:(!e.number.test(v.type)||m&&!v.sign?w="":(w=m?"+":"-",c=c.toString().replace(e.sign,"")),l=v.pad_char?"0"===v.pad_char?"0":v.pad_char.charAt(1):" ",x=v.width-(w+c).length,f=v.width&&x>0?l.repeat(x):"",T+=v.align?w+c+f:"0"===l?w+f+c:f+w+c)}return T}var n=Object.create(null);function p(s){if(n[s])return n[s];for(var a,c=s,u=[],h=0;c;){if(null!==(a=e.text.exec(c)))u.push(a[0]);else if(null!==(a=e.modulo.exec(c)))u.push("%");else{if(null===(a=e.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(a[2]){h|=1;var v=[],f=a[2],l=[];if(null===(l=e.key.exec(f)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(v.push(l[1]);""!==(f=f.substring(l[0].length));)if(null!==(l=e.key_access.exec(f)))v.push(l[1]);else{if(null===(l=e.index_access.exec(f)))throw new SyntaxError("[sprintf] failed to parse named argument key");v.push(l[1])}a[2]=v}else h|=2;if(3===h)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:a[0],param_no:a[1],keys:a[2],sign:a[3],pad_char:a[4],align:a[5],width:a[6],precision:a[7],type:a[8]})}c=c.substring(a[0].length)}return n[s]=u}void 0!==t&&(t.sprintf=i,t.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=r)}()},{}],302:[function(g,_,t){"use strict";_.exports=function(n,p){if(n.dimension<=0)return{positions:[],cells:[]};if(1===n.dimension)return function(c,u){for(var h=i(c,u),v=h.length,f=new Array(v),l=new Array(v),x=0;x<v;++x)f[x]=[h[x]],l[x]=[x];return{positions:f,cells:l}}(n,p);var s=n.order.join()+"-"+n.dtype,a=o[s];return p=+p||0,a||(a=o[s]=function(c,u){var v=r[c.length+"d"];if(v)return v(e,c,u)}(n.order,n.dtype)),a(n,p)};var e=g("ndarray-extract-contour"),i=g("zero-crossings"),r={"2d":function(n,p,s){var a=n({order:p,scalarArguments:3,getters:"generic"===s?[0]:void 0,phase:function(c,u,h,v){return c>v|0},vertex:function(c,u,h,v,f,l,x,m,w,b,k,T,L){var A=(x<<0)+(m<<1)+(w<<2)+(b<<3)|0;if(0!==A&&15!==A)switch(A){case 0:k.push([c-.5,u-.5]);break;case 1:k.push([c-.25-.25*(v+h-2*L)/(h-v),u-.25-.25*(f+h-2*L)/(h-f)]);break;case 2:k.push([c-.75-.25*(-v-h+2*L)/(v-h),u-.25-.25*(l+v-2*L)/(v-l)]);break;case 3:k.push([c-.5,u-.5-.5*(f+h+l+v-4*L)/(h-f+v-l)]);break;case 4:k.push([c-.25-.25*(l+f-2*L)/(f-l),u-.75-.25*(-f-h+2*L)/(f-h)]);break;case 5:k.push([c-.5-.5*(v+h+l+f-4*L)/(h-v+f-l),u-.5]);break;case 6:k.push([c-.5-.25*(-v-h+l+f)/(v-h+f-l),u-.5-.25*(-f-h+l+v)/(f-h+v-l)]);break;case 7:k.push([c-.75-.25*(l+f-2*L)/(f-l),u-.75-.25*(l+v-2*L)/(v-l)]);break;case 8:k.push([c-.75-.25*(-l-f+2*L)/(l-f),u-.75-.25*(-l-v+2*L)/(l-v)]);break;case 9:k.push([c-.5-.25*(v+h+-l-f)/(h-v+l-f),u-.5-.25*(f+h+-l-v)/(h-f+l-v)]);break;case 10:k.push([c-.5-.5*(-v-h-l-f+4*L)/(v-h+l-f),u-.5]);break;case 11:k.push([c-.25-.25*(-l-f+2*L)/(l-f),u-.75-.25*(f+h-2*L)/(h-f)]);break;case 12:k.push([c-.5,u-.5-.5*(-f-h-l-v+4*L)/(f-h+l-v)]);break;case 13:k.push([c-.75-.25*(v+h-2*L)/(h-v),u-.25-.25*(-l-v+2*L)/(l-v)]);break;case 14:k.push([c-.25-.25*(-v-h+2*L)/(v-h),u-.25-.25*(-f-h+2*L)/(f-h)]);break;case 15:k.push([c-.5,u-.5])}},cell:function(c,u,h,v,f,l,x,m,w){m.push(f?[c,u]:[u,c])}});return function(c,u){var h=[],v=[];return a(c,h,v,u),{positions:h,cells:v}}}},o={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(g,_,t){(function(e){(function(){"use strict";_.exports=function n(p,s,a){a=a||{};var c=o[p];c||(c=o[p]={" ":{data:new Float32Array(0),shape:.2}});var u=c[s];if(!u)if(s.length<=1||!/\d/.test(s))u=c[s]=function(L){for(var A=L.cells,I=L.positions,D=new Float32Array(6*A.length),S=0,C=0,R=0;R<A.length;++R)for(var F=A[R],H=0;H<3;++H){var U=I[F[H]];D[S++]=U[0],D[S++]=U[1]+1.4,C=Math.max(U[0],C)}return{data:D,shape:C}}(i(s,{triangles:!0,font:p,textAlign:a.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var h=s.split(/(\d|\s)/),v=new Array(h.length),f=0,l=0,x=0;x<h.length;++x)v[x]=n(p,h[x]),f+=v[x].data.length,l+=v[x].shape,x>0&&(l+=.02);var m=new Float32Array(f),w=0,b=-.5*l;for(x=0;x<v.length;++x){for(var k=v[x].data,T=0;T<k.length;T+=2)m[w++]=k[T]+b,m[w++]=k[T+1];b+=v[x].shape+.02}u=c[s]={data:m,shape:l}}return u};var i=g("vectorize-text"),r=window||e.global||{},o=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}}).call(this)}).call(this,g("_process"))},{_process:5,"vectorize-text":311}],304:[function(g,_,t){"use strict";var e=g("parse-unit");function i(o,n){var p=e(getComputedStyle(o).getPropertyValue(n));return p[0]*r(p[1],o)}function r(o,n){switch(n=n||document.body,o=(o||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),o){case"%":return n.clientHeight/100;case"ch":case"ex":return function(p,s){var a=document.createElement("div");a.style["font-size"]="128"+p,s.appendChild(a);var c=i(a,"font-size")/128;return s.removeChild(a),c}(o,n);case"em":return i(n,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}_.exports=r},{"parse-unit":265}],305:[function(g,_,t){"use strict";_.exports=function(f){var l=(f=f||{}).center||[0,0,0],x=f.up||[0,1,0],m=f.right||c(x),w=f.radius||1,b=f.theta||0,k=f.phi||0;if(l=[].slice.call(l,0,3),x=[].slice.call(x,0,3),n(x,x),m=[].slice.call(m,0,3),n(m,m),"eye"in f){var T=f.eye,L=[T[0]-l[0],T[1]-l[1],T[2]-l[2]];o(m,L,x),s(m[0],m[1],m[2])<1e-6?m=c(x):n(m,m),w=s(L[0],L[1],L[2]);var A=p(x,L)/w,I=p(m,L)/w;k=Math.acos(A),b=Math.acos(I)}return w=Math.log(w),new u(f.zoomMin,f.zoomMax,l,x,m,w,b,k)};var e=g("filtered-vector"),i=g("gl-mat4/invert"),r=g("gl-mat4/rotate"),o=g("gl-vec3/cross"),n=g("gl-vec3/normalize"),p=g("gl-vec3/dot");function s(f,l,x){return Math.sqrt(Math.pow(f,2)+Math.pow(l,2)+Math.pow(x,2))}function a(f){return Math.min(1,Math.max(-1,f))}function c(f){var l=Math.abs(f[0]),x=Math.abs(f[1]),m=Math.abs(f[2]),w=[0,0,0];l>Math.max(x,m)?w[2]=1:x>Math.max(l,m)?w[0]=1:w[1]=1;for(var b=0,k=0,T=0;T<3;++T)b+=f[T]*f[T],k+=w[T]*f[T];for(T=0;T<3;++T)w[T]-=k/b*f[T];return n(w,w),w}function u(f,l,x,m,w,b,k,T){this.center=e(x),this.up=e(m),this.right=e(w),this.radius=e([b]),this.angle=e([k,T]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(f,l),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var h=u.prototype;h.setDistanceLimits=function(f,l){f=f>0?Math.log(f):-1/0,l=l>0?Math.log(l):1/0,l=Math.max(l,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=l},h.getDistanceLimits=function(f){var l=this.radius.bounds[0];return f?(f[0]=Math.exp(l[0][0]),f[1]=Math.exp(l[1][0]),f):[Math.exp(l[0][0]),Math.exp(l[1][0])]},h.recalcMatrix=function(f){this.center.curve(f),this.up.curve(f),this.right.curve(f),this.radius.curve(f),this.angle.curve(f);for(var l=this.computedUp,x=this.computedRight,m=0,w=0,b=0;b<3;++b)w+=l[b]*x[b],m+=l[b]*l[b];var k=Math.sqrt(m),T=0;for(b=0;b<3;++b)x[b]-=l[b]*w/m,T+=x[b]*x[b],l[b]/=k;var L=Math.sqrt(T);for(b=0;b<3;++b)x[b]/=L;var A=this.computedToward;o(A,l,x),n(A,A);var I=Math.exp(this.computedRadius[0]),D=this.computedAngle[0],S=this.computedAngle[1],C=Math.cos(D),R=Math.sin(D),F=Math.cos(S),H=Math.sin(S),U=this.computedCenter,X=C*F,Z=R*F,Y=H,W=-C*H,te=-R*H,z=F,N=this.computedEye,V=this.computedMatrix;for(b=0;b<3;++b){var Q=X*x[b]+Z*A[b]+Y*l[b];V[4*b+1]=W*x[b]+te*A[b]+z*l[b],V[4*b+2]=Q,V[4*b+3]=0}var j=V[1],J=V[5],K=V[9],re=V[2],ie=V[6],ce=V[10],se=J*ce-K*ie,de=K*re-j*ce,ue=j*ie-J*re,ge=s(se,de,ue);for(de/=ge,ue/=ge,V[0]=se/=ge,V[4]=de,V[8]=ue,b=0;b<3;++b)N[b]=U[b]+V[2+4*b]*I;for(b=0;b<3;++b){T=0;for(var be=0;be<3;++be)T+=V[b+4*be]*N[be];V[12+b]=-T}V[15]=1},h.getMatrix=function(f,l){this.recalcMatrix(f);var x=this.computedMatrix;if(l){for(var m=0;m<16;++m)l[m]=x[m];return l}return x};var v=[0,0,0];h.rotate=function(f,l,x,m){if(this.angle.move(f,l,x),m){this.recalcMatrix(f);var w=this.computedMatrix;v[0]=w[2],v[1]=w[6],v[2]=w[10];for(var b=this.computedUp,k=this.computedRight,T=this.computedToward,L=0;L<3;++L)w[4*L]=b[L],w[4*L+1]=k[L],w[4*L+2]=T[L];for(r(w,w,m,v),L=0;L<3;++L)b[L]=w[4*L],k[L]=w[4*L+1];this.up.set(f,b[0],b[1],b[2]),this.right.set(f,k[0],k[1],k[2])}},h.pan=function(f,l,x,m){l=l||0,x=x||0,m=m||0,this.recalcMatrix(f);var w=this.computedMatrix,b=(Math.exp(this.computedRadius[0]),w[1]),k=w[5],T=w[9],L=s(b,k,T),A=w[0],I=w[4],D=w[8],S=A*(b/=L)+I*(k/=L)+D*(T/=L),C=s(A-=b*S,I-=k*S,D-=T*S),R=(A/=C)*l+b*x,F=(I/=C)*l+k*x,H=(D/=C)*l+T*x;this.center.move(f,R,F,H);var U=Math.exp(this.computedRadius[0]);U=Math.max(1e-4,U+m),this.radius.set(f,Math.log(U))},h.translate=function(f,l,x,m){this.center.move(f,l||0,x||0,m||0)},h.setMatrix=function(f,l,x,m){var w=1;"number"==typeof x&&(w=0|x),(w<0||w>3)&&(w=1);var b=(w+2)%3;l||(this.recalcMatrix(f),l=this.computedMatrix);var k=l[w],T=l[w+4],L=l[w+8];if(m){var A=Math.abs(k),I=Math.abs(T),D=Math.abs(L),S=Math.max(A,I,D);A===S?(k=k<0?-1:1,T=L=0):D===S?(L=L<0?-1:1,k=T=0):(T=T<0?-1:1,k=L=0)}else{var C=s(k,T,L);k/=C,T/=C,L/=C}var R,F,H=l[b],U=l[b+4],X=l[b+8],Z=H*k+U*T+X*L,Y=s(H-=k*Z,U-=T*Z,X-=L*Z),W=T*(X/=Y)-L*(U/=Y),te=L*(H/=Y)-k*X,z=k*U-T*H,N=s(W,te,z);if(W/=N,te/=N,z/=N,this.center.jump(f,fe,ve,Me),this.radius.idle(f),this.up.jump(f,k,T,L),this.right.jump(f,H,U,X),2===w){var V=l[1],Q=l[5],j=l[9];R=se<0?-Math.PI/2:Math.PI/2,F=Math.atan2(V*W+Q*te+j*z,V*H+Q*U+j*X)}else{var re=l[2],ie=l[6],ce=l[10],se=re*k+ie*T+ce*L,de=re*H+ie*U+ce*X,ue=re*W+ie*te+ce*z;R=Math.asin(a(se)),F=Math.atan2(ue,de)}this.angle.jump(f,F,R),this.recalcMatrix(f);var ge=l[2],be=l[6],Te=l[10],we=this.computedMatrix;i(we,l);var Le=we[15],fe=we[12]/Le,ve=we[13]/Le,Me=we[14]/Le,ke=Math.exp(this.computedRadius[0]);this.center.jump(f,fe-ge*ke,ve-be*ke,Me-Te*ke)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(f){this.center.idle(f),this.up.idle(f),this.right.idle(f),this.radius.idle(f),this.angle.idle(f)},h.flush=function(f){this.center.flush(f),this.up.flush(f),this.right.flush(f),this.radius.flush(f),this.angle.flush(f)},h.setDistance=function(f,l){l>0&&this.radius.set(f,Math.log(l))},h.lookAt=function(f,l,x,m){this.recalcMatrix(f),l=l||this.computedEye,x=x||this.computedCenter;var w=(m=m||this.computedUp)[0],b=m[1],k=m[2],T=s(w,b,k);if(!(T<1e-6)){w/=T,b/=T,k/=T;var L=l[0]-x[0],A=l[1]-x[1],I=l[2]-x[2],D=s(L,A,I);if(!(D<1e-6)){L/=D,A/=D,I/=D;var S=this.computedRight,C=S[0],R=S[1],F=S[2],H=w*C+b*R+k*F,U=s(C-=H*w,R-=H*b,F-=H*k);if(!(U<.01&&(U=s(C=b*I-k*A,R=k*L-w*I,F=w*A-b*L))<1e-6)){C/=U,R/=U,F/=U,this.up.set(f,w,b,k),this.right.set(f,C,R,F),this.center.set(f,x[0],x[1],x[2]),this.radius.set(f,Math.log(D));var X=b*F-k*R,Z=k*C-w*F,Y=w*R-b*C,W=s(X,Z,Y),z=C*L+R*A+F*I,N=(X/=W)*L+(Z/=W)*A+(Y/=W)*I,V=Math.asin(a(w*L+b*A+k*I)),Q=Math.atan2(N,z),j=this.angle._state,J=j[j.length-1],K=j[j.length-2];J%=2*Math.PI;var re=Math.abs(J+2*Math.PI-Q),ie=Math.abs(J-Q),ce=Math.abs(J-2*Math.PI-Q);re<ie&&(J+=2*Math.PI),ce<ie&&(J-=2*Math.PI),this.angle.jump(this.angle.lastT(),J,K),this.angle.set(f,Q,V)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(g,_,t){"use strict";_.exports=function(i,r,o){var n=i*r,p=e*i,s=p-(p-i),a=i-s,c=e*r,u=c-(c-r),h=r-u,v=a*h-(n-s*u-a*u-s*h);return o?(o[0]=v,o[1]=n,o):[v,n]};var e=+(Math.pow(2,27)+1)},{}],307:[function(g,_,t){"use strict";_.exports=function(e,i,r){var o=e+i,n=o-e,p=i-n,s=e-(o-n);return r?(r[0]=s+p,r[1]=o,r):[s+p,o]}},{}],308:[function(g,_,t){(function(e){(function(){"use strict";var i=g("bit-twiddle"),r=g("dup"),o=g("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var n="undefined"!=typeof Uint8ClampedArray,p="undefined"!=typeof BigUint64Array,s="undefined"!=typeof BigInt64Array,a=e.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=r([32,0])),a.BIGUINT64||(a.BIGUINT64=r([32,0])),a.BIGINT64||(a.BIGINT64=r([32,0])),a.BUFFER||(a.BUFFER=r([32,0]));var c=a.DATA,u=a.BUFFER;function h(C){if(C){var F=i.log2(C.length||C.byteLength);c[F].push(C)}}function v(C){C=i.nextPow2(C);var R=i.log2(C),F=c[R];return F.length>0?F.pop():new ArrayBuffer(C)}function f(C){return new Uint8Array(v(C),0,C)}function l(C){return new Uint16Array(v(2*C),0,C)}function x(C){return new Uint32Array(v(4*C),0,C)}function m(C){return new Int8Array(v(C),0,C)}function w(C){return new Int16Array(v(2*C),0,C)}function b(C){return new Int32Array(v(4*C),0,C)}function k(C){return new Float32Array(v(4*C),0,C)}function T(C){return new Float64Array(v(8*C),0,C)}function L(C){return n?new Uint8ClampedArray(v(C),0,C):f(C)}function A(C){return p?new BigUint64Array(v(8*C),0,C):null}function I(C){return s?new BigInt64Array(v(8*C),0,C):null}function D(C){return new DataView(v(C),0,C)}function S(C){C=i.nextPow2(C);var R=i.log2(C),F=u[R];return F.length>0?F.pop():new o(C)}t.free=function(C){if(o.isBuffer(C))u[i.log2(C.length)].push(C);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(C)&&(C=C.buffer),!C)return;var F=0|i.log2(C.length||C.byteLength);c[F].push(C)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(C){h(C.buffer)},t.freeArrayBuffer=h,t.freeBuffer=function(C){u[i.log2(C.length)].push(C)},t.malloc=function(C,R){if(void 0===R||"arraybuffer"===R)return v(C);switch(R){case"uint8":return f(C);case"uint16":return l(C);case"uint32":return x(C);case"int8":return m(C);case"int16":return w(C);case"int32":return b(C);case"float":case"float32":return k(C);case"double":case"float64":return T(C);case"uint8_clamped":return L(C);case"bigint64":return I(C);case"biguint64":return A(C);case"buffer":return S(C);case"data":case"dataview":return D(C);default:return null}return null},t.mallocArrayBuffer=v,t.mallocUint8=f,t.mallocUint16=l,t.mallocUint32=x,t.mallocInt8=m,t.mallocInt16=w,t.mallocInt32=b,t.mallocFloat32=t.mallocFloat=k,t.mallocFloat64=t.mallocDouble=T,t.mallocUint8Clamped=L,t.mallocBigUint64=A,t.mallocBigInt64=I,t.mallocDataView=D,t.mallocBuffer=S,t.clearCache=function(){for(var C=0;C<32;++C)a.UINT8[C].length=0,a.UINT16[C].length=0,a.UINT32[C].length=0,a.INT8[C].length=0,a.INT16[C].length=0,a.INT32[C].length=0,a.FLOAT[C].length=0,a.DOUBLE[C].length=0,a.BIGUINT64[C].length=0,a.BIGINT64[C].length=0,a.UINT8C[C].length=0,c[C].length=0,u[C].length=0}}).call(this)}).call(this,void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(g,_,t){"use strict";function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var o=0;o<r;++o)this.roots[o]=o,this.ranks[o]=0}_.exports=e;var i=e.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},i.find=function(r){for(var o=r,n=this.roots;n[r]!==r;)r=n[r];for(;n[o]!==r;){var p=n[o];n[o]=r,o=p}return r},i.link=function(r,o){var n=this.find(r),p=this.find(o);if(n!==p){var s=this.ranks,a=this.roots,c=s[n],u=s[p];c<u?a[n]=p:u<c?a[p]=n:(a[p]=n,++s[n])}}},{}],310:[function(g,_,t){"use strict";_.exports=function(e,i,r){return 0===e.length?e:i?(r||e.sort(i),function(o,n){for(var p=1,s=o.length,a=o[0],c=o[0],u=1;u<s;++u)if(c=a,n(a=o[u],c)){if(u===p){p++;continue}o[p++]=a}return o.length=p,o}(e,i)):(r||e.sort(),function(o){for(var n=1,p=o.length,s=o[0],a=o[0],c=1;c<p;++c,a=s)if(a=s,(s=o[c])!==a){if(c===n){n++;continue}o[n++]=s}return o.length=n,o}(e))}},{}],311:[function(g,_,t){"use strict";_.exports=function(o,n){return"object"==typeof n&&null!==n||(n={}),e(o,n.canvas||i,n.context||r,n)};var e=g("./lib/vtext"),i=null,r=null;"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,r=i.getContext("2d"))},{"./lib/vtext":312}],312:[function(g,_,t){_.exports=function(h,v,f,l){var x=64,m=1.25,w={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return l&&(l.size&&l.size>0&&(x=l.size),l.lineSpacing&&l.lineSpacing>0&&(m=l.lineSpacing),l.styletags&&l.styletags.breaklines&&(w.breaklines=!!l.styletags.breaklines),l.styletags&&l.styletags.bolds&&(w.bolds=!!l.styletags.bolds),l.styletags&&l.styletags.italics&&(w.italics=!!l.styletags.italics),l.styletags&&l.styletags.subscripts&&(w.subscripts=!!l.styletags.subscripts),l.styletags&&l.styletags.superscripts&&(w.superscripts=!!l.styletags.superscripts)),f.font=[l.fontStyle,l.fontVariant,l.fontWeight,x+"px",l.font].filter(function(b){return b}).join(" "),f.textAlign="start",f.textBaseline="alphabetic",f.direction="ltr",u(function(b,k,T,L,A,I){T=(T=T.replace(/\n/g,"")).replace(/\<br\>/g,!0===I.breaklines?"\n":" ");var D="",S=[];for(H=0;H<T.length;++H)S[H]=D;!0===I.bolds&&(S=s("b","b|",T,S)),!0===I.italics&&(S=s("i","i|",T,S)),!0===I.superscripts&&(S=s("sup","+1",T,S)),!0===I.subscripts&&(S=s("sub","-1",T,S));var C=[],R="";for(H=0;H<T.length;++H)null!==S[H]&&(R+=T[H],C.push(S[H]));var F,H,U,X,Z,Y=R.split("\n"),W=Y.length,te=Math.round(A*L),z=L,N=2*L,V=0,Q=W*te+N;b.height<Q&&(b.height=Q),k.fillStyle="#000",k.fillRect(0,0,b.width,b.height),k.fillStyle="#fff";var j=0,J="";function K(){if(""!==J){var be=k.measureText(J).width;k.fillText(J,z+U,N+X),U+=be}}function re(){return Math.round(Z)+"px "}function ie(be,Te){var we=""+k.font;if(!0===I.subscripts){var Le=be.indexOf("-"),fe=Te.indexOf("-"),ve=Le>-1?parseInt(be[1+Le]):0,Me=fe>-1?parseInt(Te[1+fe]):0;ve!==Me&&(we=we.replace(re(),"?px "),Z*=Math.pow(.75,Me-ve),we=we.replace("?px ",re())),X+=.25*te*(Me-ve)}if(!0===I.superscripts){var ke=be.indexOf("+"),Ce=Te.indexOf("+"),Pe=ke>-1?parseInt(be[1+ke]):0,Fe=Ce>-1?parseInt(Te[1+Ce]):0;Pe!==Fe&&(we=we.replace(re(),"?px "),Z*=Math.pow(.75,Fe-Pe),we=we.replace("?px ",re())),X-=.25*te*(Fe-Pe)}if(!0===I.bolds){var qe=be.indexOf("b|")>-1,rt=Te.indexOf("b|")>-1;!qe&&rt&&(we=ze?we.replace("italic ","italic bold "):"bold "+we),qe&&!rt&&(we=we.replace("bold ",""))}if(!0===I.italics){var ze=be.indexOf("i|")>-1,He=Te.indexOf("i|")>-1;!ze&&He&&(we="italic "+we),ze&&!He&&(we=we.replace("italic ",""))}k.font=we}for(F=0;F<W;++F){var ce=Y[F]+"\n";for(U=0,X=F*te,Z=L,J="",H=0;H<ce.length;++H){var se=H+j<C.length?C[H+j]:C[C.length-1];D===se?J+=ce[H]:(K(),J=ce[H],void 0!==se&&(ie(D,se),D=se))}K(),j+=ce.length;var de=0|Math.round(U+2*z);V<de&&(V=de)}var ue=V,ge=N+te*W;return i(k.getImageData(0,0,ue,ge).data,[ge,ue,4]).pick(-1,-1,0).transpose(1,0)}(v,f,h,x,m,w),l,x)},_.exports.processPixels=u;var e=g("surface-nets"),i=g("ndarray"),r=g("simplify-planar-graph"),o=g("clean-pslg"),n=g("cdt2d"),p=g("planar-graph-to-polyline");function s(h,v,f,l){for(var x="<"+h+">",m="</"+h+">",w=x.length,b=m.length,k="+"===v[0]||"-"===v[0],T=0,L=-b;T>-1&&-1!==(T=f.indexOf(x,T))&&-1!==(L=f.indexOf(m,T+w))&&!(L<=T);){for(var A=T;A<L+b;++A)if(A<T+w||A>=L)l[A]=null,f=f.substr(0,A)+" "+f.substr(A+1);else if(null!==l[A]){var I=l[A].indexOf(v[0]);-1===I?l[A]+=v:k&&(l[A]=l[A].substr(0,I+1)+(1+parseInt(l[A][I+1]))+l[A].substr(I+2))}var D=T+w,S=f.substr(D,L-D).indexOf(x);T=-1!==S?S:L+b}return l}function c(h,v,f,l){var x=function(h,v){var f=e(h,128);return v?r(f.cells,f.positions,.25):{edges:f.cells,positions:f.positions}}(h,l),m=function(F,H,U){for(var X=H.textAlign||"start",Z=H.textBaseline||"alphabetic",Y=[1<<30,1<<30],W=[0,0],te=F.length,z=0;z<te;++z)for(var N=F[z],V=0;V<2;++V)Y[V]=0|Math.min(Y[V],N[V]),W[V]=0|Math.max(W[V],N[V]);var Q=0;switch(X){case"center":Q=-.5*(Y[0]+W[0]);break;case"right":case"end":Q=-W[0];break;case"left":case"start":Q=-Y[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+X+"'")}var j=0;switch(Z){case"hanging":case"top":j=-Y[1];break;case"middle":j=-.5*(Y[1]+W[1]);break;case"alphabetic":case"ideographic":j=-3*U;break;case"bottom":j=-W[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Z+"'")}var J=1/U;return"lineHeight"in H?J*=+H.lineHeight:"width"in H?J=H.width/(W[0]-Y[0]):"height"in H&&(J=H.height/(W[1]-Y[1])),F.map(function(K){return[J*(K[0]+Q),J*(K[1]+j)]})}(x.positions,v,f),w=x.edges,b="ccw"===v.orientation;if(o(m,w),v.polygons||v.polygon||v.polyline){for(var k=p(w,m),T=new Array(k.length),L=0;L<k.length;++L){for(var A=k[L],I=new Array(A.length),D=0;D<A.length;++D){for(var S=A[D],C=new Array(S.length),R=0;R<S.length;++R)C[R]=m[S[R]].slice();b&&C.reverse(),I[D]=C}T[L]=I}return T}return v.triangles||v.triangulate||v.triangle?{cells:n(m,w,{delaunay:!1,exterior:!1,interior:!0}),positions:m}:{edges:w,positions:m}}function u(h,v,f){try{return c(h,v,f,!0)}catch(l){}try{return c(h,v,f,!1)}catch(l){}return v.polygons||v.polyline||v.polygon?[]:v.triangles||v.triangulate||v.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(g,_,t){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=x);var e=!1;if("function"==typeof WeakMap){var i=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var r=new i,o=Object.freeze({});if(r.set(o,1),1===r.get(o))return void(_.exports=WeakMap);e=!0}}var n=Object.getOwnPropertyNames,p=Object.defineProperty,s=Object.isExtensible,a="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),u=new Uint8Array(c);crypto.getRandomValues(u),a="weakmap:rand:"+Array.prototype.map.call(u,function(T){return(T%36).toString(36)}).join("")+"___"}if(p(Object,"getOwnPropertyNames",{value:function(T){return n(T).filter(m)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;p(Object,"getPropertyNames",{value:function(T){return h(T).filter(m)}})}!function(){var T=Object.freeze;p(Object,"freeze",{value:function(I){return w(I),T(I)}});var L=Object.seal;p(Object,"seal",{value:function(I){return w(I),L(I)}});var A=Object.preventExtensions;p(Object,"preventExtensions",{value:function(I){return w(I),A(I)}})}();var v=!1,f=0,l=function(){this instanceof l||k();var T=[],L=[],A=f++;return Object.create(l.prototype,{get___:{value:b(function(I,D){var S,C=w(I);return C?A in C?C[A]:D:(S=T.indexOf(I))>=0?L[S]:D})},has___:{value:b(function(I){var D=w(I);return D?A in D:T.indexOf(I)>=0})},set___:{value:b(function(I,D){var S,C=w(I);return C?C[A]=D:(S=T.indexOf(I))>=0?L[S]=D:(L[S=T.length]=D,T[S]=I),this})},delete___:{value:b(function(I){var D,S,C=w(I);return C?A in C&&delete C[A]:!((D=T.indexOf(I))<0||(S=T.length-1,T[D]=void 0,L[D]=L[S],T[D]=T[S],T.length=S,L.length=S,0))})}})};l.prototype=Object.create(Object.prototype,{get:{value:function(T,L){return this.get___(T,L)},writable:!0,configurable:!0},has:{value:function(T){return this.has___(T)},writable:!0,configurable:!0},set:{value:function(T,L){return this.set___(T,L)},writable:!0,configurable:!0},delete:{value:function(T){return this.delete___(T)},writable:!0,configurable:!0}}),"function"==typeof i?function(){function T(){this instanceof l||k();var L,A=new i,I=void 0,D=!1;return L=e?function(S,C){return A.set(S,C),A.has(S)||(I||(I=new l),I.set(S,C)),this}:function(S,C){if(D)try{A.set(S,C)}catch(R){I||(I=new l),I.set___(S,C)}else A.set(S,C);return this},Object.create(l.prototype,{get___:{value:b(function(S,C){return I?A.has(S)?A.get(S):I.get___(S,C):A.get(S,C)})},has___:{value:b(function(S){return A.has(S)||!!I&&I.has___(S)})},set___:{value:b(L)},delete___:{value:b(function(S){var C=!!A.delete(S);return I&&I.delete___(S)||C})},permitHostObjects___:{value:b(function(S){if(S!==x)throw new Error("bogus call to permitHostObjects___");D=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),T.prototype=l.prototype,_.exports=T,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),_.exports=l)}function x(T){T.permitHostObjects___&&T.permitHostObjects___(x)}function m(T){return!("weakmap:"==T.substr(0,"weakmap:".length)&&"___"===T.substr(T.length-3))}function w(T){if(T!==Object(T))throw new TypeError("Not an object: "+T);var L=T[a];if(L&&L.key===T)return L;if(s(T)){L={key:T};try{return p(T,a,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch(A){return}}}function b(T){return T.prototype=null,Object.freeze(T)}function k(){v||"undefined"==typeof console||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(g,_,t){var e=g("./hidden-store.js");_.exports=function(){var i={};return function(r){if(("object"!=typeof r||null===r)&&"function"!=typeof r)throw new Error("Weakmap-shim: Key must be object");var o=r.valueOf(i);return o&&o.identity===i?o:e(r,i)}}},{"./hidden-store.js":315}],315:[function(g,_,t){_.exports=function(e,i){var r={identity:i},o=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(n){return n!==i?o.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(g,_,t){var e=g("./create-store.js");_.exports=function(){var i=e();return{get:function(r,o){var n=i(r);return n.hasOwnProperty("value")?n.value:o},set:function(r,o){return i(r).value=o,this},has:function(r){return"value"in i(r)},delete:function(r){return delete i(r).value}}}},{"./create-store.js":314}],317:[function(g,_,t){"use strict";var r,o;_.exports=(r=function(){return function(r,o,n,p,s,a){var c=r[0],u=n[0],h=[0],v=u;p|=0;var f=0,l=u;for(f=0;f<c;++f){var x=o[p]-a,m=o[p+v]-a;x>=0!=m>=0&&s.push(h[0]+.5+.5*(x+m)/(x-m)),p+=l,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),o={},function(n,p,s){var a=n.dtype,c=n.order,u=[a,c.join()].join(),h=o[u];return h||(o[u]=h=r([a,c])),h(n.shape.slice(0),n.data,n.stride,0|n.offset,p,s)})},{}],318:[function(g,_,t){"use strict";_.exports=function(i,r){var o=[];return r=+r||0,e(i.hi(i.shape[0]-1),o,r),o};var e=g("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)},7287:(Ou,y,$)=>{"use strict";$.r(y),$.d(y,{ConsumerEconomyModule:()=>ks});var ee=$(8583),d=$(4655),g=$(2458),_=$(2238),t=$(7716),e=$(6215),i=$(3342),r=$(2340),o=$(1841);let n=(()=>{class Ye{constructor(ne){this._httpClient=ne,this._data=new e.X(null),this.url=r.N.api}get data$(){return this._data.asObservable()}getData(ne){return this._httpClient.get(this.url+"reports/getAllData",{params:{varId:ne}}).pipe((0,i.b)(ye=>{this._data.next(ye)}))}getVariableNotes(ne){return this._httpClient.get(this.url+"sections/getVariableNotes",{params:{varId:ne}})}getVariableDetails(ne){return this._httpClient.get(this.url+"sections/getVariableDetails",{params:{varId:ne}})}getFilteredData(ne,ye){return this._httpClient.post(this.url+"reports/getFilteredData",ne,{params:{varId:ye}})}addUserEmailToMailChimp(ne){return this._httpClient.post(this.url+"mailchimp/addMemberToList",ne)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.LFG(o.eN))},Ye.\u0275prov=t.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye})();var p=$(1095),s=$(8295),a=$(625),c=$(9647),u=$(9238),h=$(9490),v=$(8345),f=$(6461),l=$(9765),x=$(1439),m=$(6682),w=$(9761),b=$(3190),k=$(5257),T=$(5435),L=$(8002),A=$(7519),I=$(6782),D=$(7238),S=$(946),C=$(3679);const R=["trigger"],F=["panel"];function H(Ye,Tt){if(1&Ye&&(t.TgZ(0,"span",8),t._uU(1),t.qZA()),2&Ye){const ne=t.oxw();t.xp6(1),t.Oqu(ne.placeholder)}}function U(Ye,Tt){if(1&Ye&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&Ye){const ne=t.oxw(2);t.xp6(1),t.Oqu(ne.triggerValue)}}function X(Ye,Tt){1&Ye&&t.Hsn(0,0,["*ngSwitchCase","true"])}function Z(Ye,Tt){if(1&Ye&&(t.TgZ(0,"span",9),t.YNc(1,U,2,1,"span",10),t.YNc(2,X,1,0,"ng-content",11),t.qZA()),2&Ye){const ne=t.oxw();t.Q6J("ngSwitch",!!ne.customTrigger),t.xp6(2),t.Q6J("ngSwitchCase",!0)}}function Y(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"div",14,15),t.NdJ("@transformPanel.done",function(Ze){return t.CHM(ne),t.oxw()._panelDoneAnimatingStream.next(Ze.toState)})("keydown",function(Ze){return t.CHM(ne),t.oxw()._handleKeydown(Ze)}),t.Hsn(3,1),t.qZA(),t.qZA()}if(2&Ye){const ne=t.oxw();t.Q6J("@transformPanelWrap",void 0),t.xp6(1),t.Gre("mat-select-panel ",ne._getPanelTheme(),""),t.Udp("transform-origin",ne._transformOrigin)("font-size",ne._triggerFontSize,"px"),t.Q6J("ngClass",ne.panelClass)("@transformPanel",ne.multiple?"showing-multiple":"showing"),t.uIk("id",ne.id+"-panel")("aria-multiselectable",ne.multiple)("aria-label",ne.ariaLabel||null)("aria-labelledby",ne._getPanelAriaLabelledby())}}const W=[[["mat-select-trigger"]],"*"],te=["mat-select-trigger","*"],z={transformPanelWrap:(0,D.X$)("transformPanelWrap",[(0,D.eR)("* => void",(0,D.IO)("@transformPanel",[(0,D.pV)()],{optional:!0}))]),transformPanel:(0,D.X$)("transformPanel",[(0,D.SB)("void",(0,D.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,D.SB)("showing",(0,D.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,D.SB)("showing-multiple",(0,D.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,D.eR)("void => *",(0,D.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,D.eR)("* => void",(0,D.jt)("100ms 25ms linear",(0,D.oB)({opacity:0})))])};let j=0;const J=256,de=new t.OlP("mat-select-scroll-strategy"),ge=new t.OlP("MAT_SELECT_CONFIG"),be={provide:de,deps:[a.aV],useFactory:function(Ye){return()=>Ye.scrollStrategies.reposition()}};class Te{constructor(Tt,ne){this.source=Tt,this.value=ne}}const we=(0,g.Kr)((0,g.sb)((0,g.Id)((0,g.FD)(class{constructor(Ye,Tt,ne,ye,Ze){this._elementRef=Ye,this._defaultErrorStateMatcher=Tt,this._parentForm=ne,this._parentFormGroup=ye,this.ngControl=Ze}})))),Le=new t.OlP("MatSelectTrigger");let ve=(()=>{class Ye extends we{constructor(ne,ye,Ze,bt,yr,Ur,_n,jn,le,E,O,B,q,ae){var he,me,_e;super(yr,bt,_n,jn,E),this._viewportRuler=ne,this._changeDetectorRef=ye,this._ngZone=Ze,this._dir=Ur,this._parentFormField=le,this._liveAnnouncer=q,this._defaultOptions=ae,this._panelOpen=!1,this._compareWith=(Se,Ve)=>Se===Ve,this._uid="mat-select-"+j++,this._triggerAriaLabelledBy=null,this._destroy=new l.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+j++,this._panelDoneAnimatingStream=new l.xQ,this._overlayPanelClass=(null===(he=this._defaultOptions)||void 0===he?void 0:he.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(_e=null===(me=this._defaultOptions)||void 0===me?void 0:me.disableOptionCentering)&&void 0!==_e&&_e,this.ariaLabel="",this.optionSelectionChanges=(0,x.P)(()=>{const Se=this.options;return Se?Se.changes.pipe((0,w.O)(Se),(0,b.w)(()=>(0,m.T)(...Se.map(Ve=>Ve.onSelectionChange)))):this._ngZone.onStable.pipe((0,k.q)(1),(0,b.w)(()=>this.optionSelectionChanges))}),this.openedChange=new t.vpe,this._openedStream=this.openedChange.pipe((0,T.h)(Se=>Se),(0,L.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,T.h)(Se=>!Se),(0,L.U)(()=>{})),this.selectionChange=new t.vpe,this.valueChange=new t.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ae?void 0:ae.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ae.typeaheadDebounceInterval),this._scrollStrategyFactory=B,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(O)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(ne){this._placeholder=ne,this.stateChanges.next()}get required(){return this._required}set required(ne){this._required=(0,h.Ig)(ne),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(ne){this._multiple=(0,h.Ig)(ne)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(ne){this._disableOptionCentering=(0,h.Ig)(ne)}get compareWith(){return this._compareWith}set compareWith(ne){this._compareWith=ne,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(ne){(ne!==this._value||this._multiple&&Array.isArray(ne))&&(this.options&&this._setSelectionByValue(ne),this._value=ne)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(ne){this._typeaheadDebounceInterval=(0,h.su)(ne)}get id(){return this._id}set id(ne){this._id=ne||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new v.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,A.x)(),(0,I.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,I.R)(this._destroy)).subscribe(ne=>{ne.added.forEach(ye=>ye.select()),ne.removed.forEach(ye=>ye.deselect())}),this.options.changes.pipe((0,w.O)(null),(0,I.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const ne=this._getTriggerAriaLabelledby();if(ne!==this._triggerAriaLabelledBy){const ye=this._elementRef.nativeElement;this._triggerAriaLabelledBy=ne,ne?ye.setAttribute("aria-labelledby",ne):ye.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(ne){ne.disabled&&this.stateChanges.next(),ne.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(ne){this.value=ne}registerOnChange(ne){this._onChange=ne}registerOnTouched(ne){this._onTouched=ne}setDisabledState(ne){this.disabled=ne,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const ne=this._selectionModel.selected.map(ye=>ye.viewValue);return this._isRtl()&&ne.reverse(),ne.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(ne){this.disabled||(this.panelOpen?this._handleOpenKeydown(ne):this._handleClosedKeydown(ne))}_handleClosedKeydown(ne){const ye=ne.keyCode,Ze=ye===f.JH||ye===f.LH||ye===f.oh||ye===f.SV,bt=ye===f.K5||ye===f.L_,yr=this._keyManager;if(!yr.isTyping()&&bt&&!(0,f.Vb)(ne)||(this.multiple||ne.altKey)&&Ze)ne.preventDefault(),this.open();else if(!this.multiple){const Ur=this.selected;yr.onKeydown(ne);const _n=this.selected;_n&&Ur!==_n&&this._liveAnnouncer.announce(_n.viewValue,1e4)}}_handleOpenKeydown(ne){const ye=this._keyManager,Ze=ne.keyCode,bt=Ze===f.JH||Ze===f.LH,yr=ye.isTyping();if(bt&&ne.altKey)ne.preventDefault(),this.close();else if(yr||Ze!==f.K5&&Ze!==f.L_||!ye.activeItem||(0,f.Vb)(ne))if(!yr&&this._multiple&&Ze===f.A&&ne.ctrlKey){ne.preventDefault();const Ur=this.options.some(_n=>!_n.disabled&&!_n.selected);this.options.forEach(_n=>{_n.disabled||(Ur?_n.select():_n.deselect())})}else{const Ur=ye.activeItemIndex;ye.onKeydown(ne),this._multiple&&bt&&ne.shiftKey&&ye.activeItem&&ye.activeItemIndex!==Ur&&ye.activeItem._selectViaInteraction()}else ne.preventDefault(),ye.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,k.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(ne){if(this._selectionModel.selected.forEach(ye=>ye.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&ne)Array.isArray(ne),ne.forEach(ye=>this._selectValue(ye)),this._sortValues();else{const ye=this._selectValue(ne);ye?this._keyManager.updateActiveItem(ye):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(ne){const ye=this.options.find(Ze=>{if(this._selectionModel.isSelected(Ze))return!1;try{return null!=Ze.value&&this._compareWith(Ze.value,ne)}catch(bt){return!1}});return ye&&this._selectionModel.select(ye),ye}_initKeyManager(){this._keyManager=new u.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,I.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,I.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const ne=(0,m.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,I.R)(ne)).subscribe(ye=>{this._onSelect(ye.source,ye.isUserInput),ye.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,m.T)(...this.options.map(ye=>ye._stateChanges)).pipe((0,I.R)(ne)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(ne,ye){const Ze=this._selectionModel.isSelected(ne);null!=ne.value||this._multiple?(Ze!==ne.selected&&(ne.selected?this._selectionModel.select(ne):this._selectionModel.deselect(ne)),ye&&this._keyManager.setActiveItem(ne),this.multiple&&(this._sortValues(),ye&&this.focus())):(ne.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(ne.value)),Ze!==this._selectionModel.isSelected(ne)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const ne=this.options.toArray();this._selectionModel.sort((ye,Ze)=>this.sortComparator?this.sortComparator(ye,Ze,ne):ne.indexOf(ye)-ne.indexOf(Ze)),this.stateChanges.next()}}_propagateChanges(ne){let ye=null;ye=this.multiple?this.selected.map(Ze=>Ze.value):this.selected?this.selected.value:ne,this._value=ye,this.valueChange.emit(ye),this._onChange(ye),this.selectionChange.emit(this._getChangeEvent(ye)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var ne;return!this._panelOpen&&!this.disabled&&(null===(ne=this.options)||void 0===ne?void 0:ne.length)>0}focus(ne){this._elementRef.nativeElement.focus(ne)}_getPanelAriaLabelledby(){var ne;if(this.ariaLabel)return null;const ye=null===(ne=this._parentFormField)||void 0===ne?void 0:ne.getLabelId();return this.ariaLabelledby?(ye?ye+" ":"")+this.ariaLabelledby:ye}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var ne;if(this.ariaLabel)return null;const ye=null===(ne=this._parentFormField)||void 0===ne?void 0:ne.getLabelId();let Ze=(ye?ye+" ":"")+this._valueId;return this.ariaLabelledby&&(Ze+=" "+this.ariaLabelledby),Ze}_panelDoneAnimating(ne){this.openedChange.emit(ne)}setDescribedByIds(ne){this._ariaDescribedby=ne.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(c.rL),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(g.rD),t.Y36(t.SBq),t.Y36(S.Is,8),t.Y36(C.F,8),t.Y36(C.sg,8),t.Y36(s.G_,8),t.Y36(C.a5,10),t.$8M("tabindex"),t.Y36(de),t.Y36(u.Kd),t.Y36(ge,8))},Ye.\u0275dir=t.lG2({type:Ye,viewQuery:function(ne,ye){if(1&ne&&(t.Gf(R,5),t.Gf(F,5),t.Gf(a.pI,5)),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye.trigger=Ze.first),t.iGM(Ze=t.CRH())&&(ye.panel=Ze.first),t.iGM(Ze=t.CRH())&&(ye._overlayDir=Ze.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[t.qOj,t.TTD]}),Ye})(),Me=(()=>{class Ye extends ve{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(ne,ye,Ze){const bt=this._getItemHeight();return Math.min(Math.max(0,bt*ne-ye+bt/2),Ze)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,I.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,k.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(ne){const ye=(0,g.CB)(ne,this.options,this.optionGroups),Ze=this._getItemHeight();this.panel.nativeElement.scrollTop=0===ne&&1===ye?0:(0,g.jH)((ne+ye)*Ze,Ze,this.panel.nativeElement.scrollTop,J)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(ne){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(ne)}_getChangeEvent(ne){return new Te(this,ne)}_calculateOverlayOffsetX(){const ne=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),ye=this._viewportRuler.getViewportSize(),Ze=this._isRtl(),bt=this.multiple?56:32;let yr;if(this.multiple)yr=40;else if(this.disableOptionCentering)yr=16;else{let jn=this._selectionModel.selected[0]||this.options.first;yr=jn&&jn.group?32:16}Ze||(yr*=-1);const Ur=0-(ne.left+yr-(Ze?bt:0)),_n=ne.right+yr-ye.width+(Ze?0:bt);Ur>0?yr+=Ur+8:_n>0&&(yr-=_n+8),this._overlayDir.offsetX=Math.round(yr),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(ne,ye,Ze){const bt=this._getItemHeight(),yr=(bt-this._triggerRect.height)/2,Ur=Math.floor(J/bt);let _n;return this.disableOptionCentering?0:(_n=0===this._scrollTop?ne*bt:this._scrollTop===Ze?(ne-(this._getItemCount()-Ur))*bt+(bt-(this._getItemCount()*bt-J)%bt):ye-bt/2,Math.round(-1*_n-yr))}_checkOverlayWithinViewport(ne){const ye=this._getItemHeight(),Ze=this._viewportRuler.getViewportSize(),bt=this._triggerRect.top-8,yr=Ze.height-this._triggerRect.bottom-8,Ur=Math.abs(this._offsetY),jn=Math.min(this._getItemCount()*ye,J)-Ur-this._triggerRect.height;jn>yr?this._adjustPanelUp(jn,yr):Ur>bt?this._adjustPanelDown(Ur,bt,ne):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(ne,ye){const Ze=Math.round(ne-ye);this._scrollTop-=Ze,this._offsetY-=Ze,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(ne,ye,Ze){const bt=Math.round(ne-ye);if(this._scrollTop+=bt,this._offsetY+=bt,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=Ze)return this._scrollTop=Ze,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const ne=this._getItemHeight(),ye=this._getItemCount(),Ze=Math.min(ye*ne,J),yr=ye*ne-Ze;let Ur;Ur=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),Ur+=(0,g.CB)(Ur,this.options,this.optionGroups);const _n=Ze/2;this._scrollTop=this._calculateOverlayScroll(Ur,_n,yr),this._offsetY=this._calculateOverlayOffsetY(Ur,_n,yr),this._checkOverlayWithinViewport(yr)}_getOriginBasedOnOption(){const ne=this._getItemHeight(),ye=(ne-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-ye+ne/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return Ye.\u0275fac=function(){let Tt;return function(ye){return(Tt||(Tt=t.n5z(Ye)))(ye||Ye)}}(),Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-select"]],contentQueries:function(ne,ye,Ze){if(1&ne&&(t.Suo(Ze,Le,5),t.Suo(Ze,g.ey,5),t.Suo(Ze,g.K7,5)),2&ne){let bt;t.iGM(bt=t.CRH())&&(ye.customTrigger=bt.first),t.iGM(bt=t.CRH())&&(ye.options=bt),t.iGM(bt=t.CRH())&&(ye.optionGroups=bt)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(ne,ye){1&ne&&t.NdJ("keydown",function(bt){return ye._handleKeydown(bt)})("focus",function(){return ye._onFocus()})("blur",function(){return ye._onBlur()}),2&ne&&(t.uIk("id",ye.id)("tabindex",ye.tabIndex)("aria-controls",ye.panelOpen?ye.id+"-panel":null)("aria-expanded",ye.panelOpen)("aria-label",ye.ariaLabel||null)("aria-required",ye.required.toString())("aria-disabled",ye.disabled.toString())("aria-invalid",ye.errorState)("aria-describedby",ye._ariaDescribedby||null)("aria-activedescendant",ye._getAriaActiveDescendant()),t.ekj("mat-select-disabled",ye.disabled)("mat-select-invalid",ye.errorState)("mat-select-required",ye.required)("mat-select-empty",ye.empty)("mat-select-multiple",ye.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[t._Bn([{provide:s.Eo,useExisting:Ye},{provide:g.HF,useExisting:Ye}]),t.qOj],ngContentSelectors:te,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(ne,ye){if(1&ne&&(t.F$t(W),t.TgZ(0,"div",0,1),t.NdJ("click",function(){return ye.toggle()}),t.TgZ(3,"div",2),t.YNc(4,H,2,1,"span",3),t.YNc(5,Z,3,2,"span",4),t.qZA(),t.TgZ(6,"div",5),t._UZ(7,"div",6),t.qZA(),t.qZA(),t.YNc(8,Y,4,14,"ng-template",7),t.NdJ("backdropClick",function(){return ye.close()})("attach",function(){return ye._onAttached()})("detach",function(){return ye.close()})),2&ne){const Ze=t.MAs(1);t.uIk("aria-owns",ye.panelOpen?ye.id+"-panel":null),t.xp6(3),t.Q6J("ngSwitch",ye.empty),t.uIk("id",ye._valueId),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(3),t.Q6J("cdkConnectedOverlayPanelClass",ye._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",ye._scrollStrategy)("cdkConnectedOverlayOrigin",Ze)("cdkConnectedOverlayOpen",ye.panelOpen)("cdkConnectedOverlayPositions",ye._positions)("cdkConnectedOverlayMinWidth",null==ye._triggerRect?null:ye._triggerRect.width)("cdkConnectedOverlayOffsetY",ye._offsetY)}},directives:[a.xu,ee.RF,ee.n9,a.pI,ee.ED,ee.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[z.transformPanelWrap,z.transformPanel]},changeDetection:0}),Ye})(),ke=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({providers:[be],imports:[[ee.ez,a.U8,g.Ng,g.BQ],c.ZD,s.lN,g.Ng,g.BQ]}),Ye})();function Ce(Ye,Tt){if(1&Ye&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&Ye){const ne=Tt.$implicit;t.Q6J("value",ne),t.xp6(1),t.Oqu(ne)}}function Pe(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-form-field",9),t.TgZ(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"mat-select",10),t.NdJ("ngModelChange",function(Ze){const yr=t.CHM(ne).$implicit;return t.oxw().selectedFilters[yr]=Ze}),t.YNc(5,Ce,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA()}if(2&Ye){const ne=Tt.$implicit,ye=t.oxw();t.xp6(3),t.Oqu(ne),t.xp6(1),t.Q6J("ngModel",ye.selectedFilters[ne]),t.xp6(1),t.Q6J("ngForOf",ye.filtersList[ne])}}function Fe(Ye,Tt){1&Ye&&(t.TgZ(0,"div",13),t._uU(1,"No data available for the selected filter."),t.qZA())}function qe(Ye,Tt){1&Ye&&(t.TgZ(0,"span"),t._uU(1,"Apply Filters"),t.qZA())}function rt(Ye,Tt){1&Ye&&(t.O4$(),t.TgZ(0,"svg",14),t._UZ(1,"circle",15),t._UZ(2,"path",16),t.qZA())}let ze=(()=>{class Ye{constructor(ne,ye,Ze){this.data=ne,this.dialogRef=ye,this._dashboardService=Ze,this.filtersList={},this.selectedFilters={},this.selectedFilters=ne.selected,this.varId=ne.varId,this.prepareFiltersView(ne.filters)}ngOnInit(){}prepareFiltersView(ne){const ye=Object.keys(ne[0]);let Ze={};ne.forEach(bt=>{ye.forEach(yr=>{Ze[yr]&&Ze[yr].indexOf(bt[yr])<0?Ze[yr].push(bt[yr]):Ze[yr]||(Ze[yr]=[bt[yr]])})}),this.filtersList=Ze}clearFilters(){this.selectedFilters={},this.applyFilters(!0)}applyFilters(ne=!1){this.loading=!0;const ye=Object.keys(this.selectedFilters);let Ze={};ye.forEach(bt=>{Ze[bt]=[this.selectedFilters[bt]]}),this._dashboardService.getFilteredData(Ze,this.varId).subscribe(bt=>{var yr;"success"===bt.type&&bt.data&&(this.loading=!1,(null===(yr=bt.data.x)||void 0===yr?void 0:yr.length)?this.dialogRef.close({data:this.selectedFilters,response:bt.data,clearCall:ne}):this.showWarning=!0)})}get filtersListArray(){return Object.keys(this.filtersList)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(_.WI),t.Y36(_.so),t.Y36(n))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["app-data-filters-dialog"]],decls:12,vars:5,consts:[[1,"text-3xl","font-semibold","tracking-tight","leading-8","text-center"],["mat-dialog-content","",1,"d-flex","flex-column","justify-center","m-5","text-center","overflow-hidden"],[4,"ngFor","ngForOf"],["class","text-red-600 ml-5 font-medium text-sm justify-center",4,"ngIf"],["mat-dialog-actions","",1,"flex","justify-center"],["mat-raised-button","",1,"w-60","mb-5",3,"click"],["mat-raised-button","",1,"w-60","mb-5",3,"color","click"],[4,"ngIf"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["appearance","fill",1,"w-40","md:w-100","lg:w-100"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-red-600","ml-5","font-medium","text-sm","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"div",0),t._uU(1,"Data Filters"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,Pe,6,3,"div",2),t.YNc(4,Fe,2,0,"div",3),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return ye.clearFilters()}),t.TgZ(7,"span"),t._uU(8,"Clear Filters"),t.qZA(),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return ye.applyFilters()}),t.YNc(10,qe,2,0,"span",7),t.YNc(11,rt,3,0,"svg",8),t.qZA(),t.qZA()),2&ne&&(t.xp6(3),t.Q6J("ngForOf",ye.filtersListArray),t.xp6(1),t.Q6J("ngIf",ye.showWarning),t.xp6(5),t.Q6J("color","warn"),t.xp6(1),t.Q6J("ngIf",!ye.loading),t.xp6(1),t.Q6J("ngIf",ye.loading))},directives:[_.xY,ee.sg,ee.O5,_.H8,p.lW,s.KE,s.hX,Me,C.JJ,C.On,g.ey],styles:[".mat-chip[_ngcontent-%COMP%]{border:1px red solid;background:transparent!important}.mat-icon[_ngcontent-%COMP%]{color:red;height:20px!important;min-height:10px}  .mat-chip-list-wrapper{justify-content:center}"]}),Ye})();const Je=[{label:"National",value:"national"},{label:"State",value:"state"}],at=[{label:"Student",value:"student"},{label:"Teacher/Faculty",value:"teacher"},{label:"Social Sciences Professional",value:"social-sciences"},{label:"Independent Researcher",value:"ind-researcher"},{label:"Government Services",value:"government"},{label:"Journalist/Media Professional",value:"media"},{label:"Self-employed",value:"self-employed"},{label:"Other",value:"other"}];let pt=(()=>{class Ye{constructor(ne,ye){this.document=ne,this.platformId=ye,this.documentIsAccessible=(0,ee.NF)(this.platformId)}static getCookieRegExp(ne){const ye=ne.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+ye+"|;\\s*"+ye+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(ne){try{return decodeURIComponent(ne)}catch(ye){return ne}}check(ne){return!!this.documentIsAccessible&&(ne=encodeURIComponent(ne),Ye.getCookieRegExp(ne).test(this.document.cookie))}get(ne){if(this.documentIsAccessible&&this.check(ne)){ne=encodeURIComponent(ne);const Ze=Ye.getCookieRegExp(ne).exec(this.document.cookie);return Ze[1]?Ye.safeDecodeURIComponent(Ze[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const ne={},ye=this.document;return ye.cookie&&""!==ye.cookie&&ye.cookie.split(";").forEach(Ze=>{const[bt,yr]=Ze.split("=");ne[Ye.safeDecodeURIComponent(bt.replace(/^ /,""))]=Ye.safeDecodeURIComponent(yr)}),ne}set(ne,ye,Ze,bt,yr,Ur,_n){if(!this.documentIsAccessible)return;if("number"==typeof Ze||Ze instanceof Date||bt||yr||Ur||_n)return void this.set(ne,ye,{expires:Ze,path:bt,domain:yr,secure:Ur,sameSite:_n||"Lax"});let jn=encodeURIComponent(ne)+"="+encodeURIComponent(ye)+";";const le=Ze||{};le.expires&&(jn+="number"==typeof le.expires?"expires="+new Date((new Date).getTime()+1e3*le.expires*60*60*24).toUTCString()+";":"expires="+le.expires.toUTCString()+";"),le.path&&(jn+="path="+le.path+";"),le.domain&&(jn+="domain="+le.domain+";"),!1===le.secure&&"None"===le.sameSite&&(le.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${ne} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),le.secure&&(jn+="secure;"),le.sameSite||(le.sameSite="Lax"),jn+="sameSite="+le.sameSite+";",this.document.cookie=jn}delete(ne,ye,Ze,bt,yr="Lax"){if(!this.documentIsAccessible)return;const Ur=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(ne,"",{expires:Ur,path:ye,domain:Ze,secure:bt,sameSite:yr})}deleteAll(ne,ye,Ze,bt="Lax"){if(!this.documentIsAccessible)return;const yr=this.getAll();for(const Ur in yr)yr.hasOwnProperty(Ur)&&this.delete(Ur,ne,ye,Ze,bt)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.LFG(ee.K0),t.LFG(t.Lbi))},Ye.\u0275prov=t.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye})();var xt=$(521),Ft=$(9193);$(2759),$(5124);const it=(0,xt.i$)({passive:!0});let Et=(()=>{class Ye{constructor(ne,ye){this._platform=ne,this._ngZone=ye,this._monitoredElements=new Map}monitor(ne){if(!this._platform.isBrowser)return Ft.E;const ye=(0,h.fI)(ne),Ze=this._monitoredElements.get(ye);if(Ze)return Ze.subject;const bt=new l.xQ,yr="cdk-text-field-autofilled",Ur=_n=>{"cdk-text-field-autofill-start"!==_n.animationName||ye.classList.contains(yr)?"cdk-text-field-autofill-end"===_n.animationName&&ye.classList.contains(yr)&&(ye.classList.remove(yr),this._ngZone.run(()=>bt.next({target:_n.target,isAutofilled:!1}))):(ye.classList.add(yr),this._ngZone.run(()=>bt.next({target:_n.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{ye.addEventListener("animationstart",Ur,it),ye.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(ye,{subject:bt,unlisten:()=>{ye.removeEventListener("animationstart",Ur,it)}}),bt}stopMonitoring(ne){const ye=(0,h.fI)(ne),Ze=this._monitoredElements.get(ye);Ze&&(Ze.unlisten(),Ze.subject.complete(),ye.classList.remove("cdk-text-field-autofill-monitored"),ye.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(ye))}ngOnDestroy(){this._monitoredElements.forEach((ne,ye)=>this.stopMonitoring(ye))}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.LFG(xt.t4),t.LFG(t.R0b))},Ye.\u0275prov=t.Yz7({factory:function(){return new Ye(t.LFG(xt.t4),t.LFG(t.R0b))},token:Ye,providedIn:"root"}),Ye})(),Ue=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({imports:[[xt.ud]]}),Ye})();const Qe=new t.OlP("MAT_INPUT_VALUE_ACCESSOR"),Ae=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let De=0;const Oe=(0,g.FD)(class{constructor(Ye,Tt,ne,ye){this._defaultErrorStateMatcher=Ye,this._parentForm=Tt,this._parentFormGroup=ne,this.ngControl=ye}});let Ie=(()=>{class Ye extends Oe{constructor(ne,ye,Ze,bt,yr,Ur,_n,jn,le,E){super(Ur,bt,yr,Ze),this._elementRef=ne,this._platform=ye,this._autofillMonitor=jn,this._formField=E,this._uid="mat-input-"+De++,this.focused=!1,this.stateChanges=new l.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(q=>(0,xt.qK)().has(q));const O=this._elementRef.nativeElement,B=O.nodeName.toLowerCase();this._inputValueAccessor=_n||O,this._previousNativeValue=this.value,this.id=this.id,ye.IOS&&le.runOutsideAngular(()=>{ne.nativeElement.addEventListener("keyup",q=>{const ae=q.target;!ae.value&&0===ae.selectionStart&&0===ae.selectionEnd&&(ae.setSelectionRange(1,1),ae.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===B,this._isTextarea="textarea"===B,this._isInFormField=!!E,this._isNativeSelect&&(this.controlType=O.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(ne){this._disabled=(0,h.Ig)(ne),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(ne){this._id=ne||this._uid}get required(){return this._required}set required(ne){this._required=(0,h.Ig)(ne)}get type(){return this._type}set type(ne){this._type=ne||"text",this._validateType(),!this._isTextarea&&(0,xt.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(ne){ne!==this.value&&(this._inputValueAccessor.value=ne,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(ne){this._readonly=(0,h.Ig)(ne)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(ne=>{this.autofilled=ne.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(ne){this._elementRef.nativeElement.focus(ne)}_focusChanged(ne){ne!==this.focused&&(this.focused=ne,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var ne,ye;const Ze=(null===(ye=null===(ne=this._formField)||void 0===ne?void 0:ne._hideControlPlaceholder)||void 0===ye?void 0:ye.call(ne))?null:this.placeholder;if(Ze!==this._previousPlaceholder){const bt=this._elementRef.nativeElement;this._previousPlaceholder=Ze,Ze?bt.setAttribute("placeholder",Ze):bt.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const ne=this._elementRef.nativeElement.value;this._previousNativeValue!==ne&&(this._previousNativeValue=ne,this.stateChanges.next())}_validateType(){Ae.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let ne=this._elementRef.nativeElement.validity;return ne&&ne.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const ne=this._elementRef.nativeElement,ye=ne.options[0];return this.focused||ne.multiple||!this.empty||!!(ne.selectedIndex>-1&&ye&&ye.label)}return this.focused||!this.empty}setDescribedByIds(ne){ne.length?this._elementRef.nativeElement.setAttribute("aria-describedby",ne.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.SBq),t.Y36(xt.t4),t.Y36(C.a5,10),t.Y36(C.F,8),t.Y36(C.sg,8),t.Y36(g.rD),t.Y36(Qe,10),t.Y36(Et),t.Y36(t.R0b),t.Y36(s.G_,8))},Ye.\u0275dir=t.lG2({type:Ye,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(ne,ye){1&ne&&t.NdJ("focus",function(){return ye._focusChanged(!0)})("blur",function(){return ye._focusChanged(!1)})("input",function(){return ye._onInput()}),2&ne&&(t.Ikx("disabled",ye.disabled)("required",ye.required),t.uIk("id",ye.id)("data-placeholder",ye.placeholder)("readonly",ye.readonly&&!ye._isNativeSelect||null)("aria-invalid",ye.empty&&ye.required?null:ye.errorState)("aria-required",ye.required),t.ekj("mat-input-server",ye._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[t._Bn([{provide:s.Eo,useExisting:Ye}]),t.qOj,t.TTD]}),Ye})(),et=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({providers:[g.rD],imports:[[Ue,s.lN,g.BQ],Ue,s.lN]}),Ye})();var ct=$(6237),vt=$(8553);const ft=["input"],It=function(Ye){return{enterDuration:Ye}},ut=["*"],Ot=new t.OlP("mat-checkbox-default-options",{providedIn:"root",factory:Rt});function Rt(){return{color:"accent",clickAction:"check-indeterminate"}}let $e=0;const yt=Rt(),Bt={provide:C.JU,useExisting:(0,t.Gpc)(()=>Re),multi:!0};class Ut{}const Qt=(0,g.sb)((0,g.pj)((0,g.Kr)((0,g.Id)(class{constructor(Ye){this._elementRef=Ye}}))));let Re=(()=>{class Ye extends Qt{constructor(ne,ye,Ze,bt,yr,Ur,_n){super(ne),this._changeDetectorRef=ye,this._focusMonitor=Ze,this._ngZone=bt,this._animationMode=Ur,this._options=_n,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++$e,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new t.vpe,this.indeterminateChange=new t.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||yt,this.color=this.defaultColor=this._options.color||yt.color,this.tabIndex=parseInt(yr)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(ne){this._required=(0,h.Ig)(ne)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(ne=>{ne||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(ne){ne!=this.checked&&(this._checked=ne,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(ne){const ye=(0,h.Ig)(ne);ye!==this.disabled&&(this._disabled=ye,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(ne){const ye=ne!=this._indeterminate;this._indeterminate=(0,h.Ig)(ne),ye&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(ne){this.checked=!!ne}registerOnChange(ne){this._controlValueAccessorChangeFn=ne}registerOnTouched(ne){this._onTouched=ne}setDisabledState(ne){this.disabled=ne}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(ne){let ye=this._currentCheckState,Ze=this._elementRef.nativeElement;if(ye!==ne&&(this._currentAnimationClass.length>0&&Ze.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(ye,ne),this._currentCheckState=ne,this._currentAnimationClass.length>0)){Ze.classList.add(this._currentAnimationClass);const bt=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{Ze.classList.remove(bt)},1e3)})}}_emitChangeEvent(){const ne=new Ut;ne.source=this,ne.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(ne),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(ne){var ye;const Ze=null===(ye=this._options)||void 0===ye?void 0:ye.clickAction;ne.stopPropagation(),this.disabled||"noop"===Ze?!this.disabled&&"noop"===Ze&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==Ze&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(ne,ye){ne?this._focusMonitor.focusVia(this._inputElement,ne,ye):this._inputElement.nativeElement.focus(ye)}_onInteractionEvent(ne){ne.stopPropagation()}_getAnimationClassForCheckStateTransition(ne,ye){if("NoopAnimations"===this._animationMode)return"";let Ze="";switch(ne){case 0:if(1===ye)Ze="unchecked-checked";else{if(3!=ye)return"";Ze="unchecked-indeterminate"}break;case 2:Ze=1===ye?"unchecked-checked":"unchecked-indeterminate";break;case 1:Ze=2===ye?"checked-unchecked":"checked-indeterminate";break;case 3:Ze=1===ye?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${Ze}`}_syncIndeterminate(ne){const ye=this._inputElement;ye&&(ye.nativeElement.indeterminate=ne)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(u.tE),t.Y36(t.R0b),t.$8M("tabindex"),t.Y36(ct.Qb,8),t.Y36(Ot,8))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-checkbox"]],viewQuery:function(ne,ye){if(1&ne&&(t.Gf(ft,5),t.Gf(g.wG,5)),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._inputElement=Ze.first),t.iGM(Ze=t.CRH())&&(ye.ripple=Ze.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(ne,ye){2&ne&&(t.Ikx("id",ye.id),t.uIk("tabindex",null),t.ekj("mat-checkbox-indeterminate",ye.indeterminate)("mat-checkbox-checked",ye.checked)("mat-checkbox-disabled",ye.disabled)("mat-checkbox-label-before","before"==ye.labelPosition)("_mat-animation-noopable","NoopAnimations"===ye._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[t._Bn([Bt]),t.qOj],ngContentSelectors:ut,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(ne,ye){if(1&ne&&(t.F$t(),t.TgZ(0,"label",0,1),t.TgZ(2,"span",2),t.TgZ(3,"input",3,4),t.NdJ("change",function(bt){return ye._onInteractionEvent(bt)})("click",function(bt){return ye._onInputClick(bt)}),t.qZA(),t.TgZ(5,"span",5),t._UZ(6,"span",6),t.qZA(),t._UZ(7,"span",7),t.TgZ(8,"span",8),t.O4$(),t.TgZ(9,"svg",9),t._UZ(10,"path",10),t.qZA(),t.kcU(),t._UZ(11,"span",11),t.qZA(),t.qZA(),t.TgZ(12,"span",12,13),t.NdJ("cdkObserveContent",function(){return ye._onLabelTextChange()}),t.TgZ(14,"span",14),t._uU(15,"\xa0"),t.qZA(),t.Hsn(16),t.qZA(),t.qZA()),2&ne){const Ze=t.MAs(1),bt=t.MAs(13);t.uIk("for",ye.inputId),t.xp6(2),t.ekj("mat-checkbox-inner-container-no-side-margin",!bt.textContent||!bt.textContent.trim()),t.xp6(1),t.Q6J("id",ye.inputId)("required",ye.required)("checked",ye.checked)("disabled",ye.disabled)("tabIndex",ye.tabIndex),t.uIk("value",ye.value)("name",ye.name)("aria-label",ye.ariaLabel||null)("aria-labelledby",ye.ariaLabelledby)("aria-checked",ye._getAriaChecked())("aria-describedby",ye.ariaDescribedby),t.xp6(2),t.Q6J("matRippleTrigger",Ze)("matRippleDisabled",ye._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",t.VKq(19,It,"NoopAnimations"===ye._animationMode?0:150))}},directives:[g.wG,vt.wD],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),Ye})(),Nt=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({}),Ye})(),Zt=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({imports:[[g.si,g.BQ,vt.Q8,Nt],g.BQ,Nt]}),Ye})();function or(Ye,Tt){if(1&Ye&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&Ye){const ne=Tt.$implicit;t.Q6J("value",ne.value),t.xp6(1),t.Oqu(ne.label)}}function Wt(Ye,Tt){1&Ye&&(t.TgZ(0,"span"),t._uU(1,"Submit"),t.qZA())}function er(Ye,Tt){1&Ye&&(t.O4$(),t.TgZ(0,"svg",24),t._UZ(1,"circle",25),t._UZ(2,"path",26),t.qZA())}let cr=(()=>{class Ye{constructor(ne,ye,Ze){this.dialogRef=ne,this.cookieService=ye,this.dashboardService=Ze,this.userDetails={Occupation:"",Affiliation:"",emailAddress:"",isChecked:!1,isSubscriptionChecked:!1},this.occupations=at}ngOnInit(){}submitForm(){this.cookieService.set("cena","user-details"),this.dashboardService.addUserEmailToMailChimp({email_address:this.userDetails.emailAddress,status:"subscribed"}).subscribe(),this.dialogRef.close()}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(_.so),t.Y36(pt),t.Y36(n))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["app-first-time-popup"]],decls:42,vars:10,consts:[[1,"text-3xl","font-semibold","tracking-tight","leading-8","text-center"],["mat-dialog-content","",1,"d-flex","flex-column","justify-center","m-5","text-center","overflow-hidden"],["appearance","fill",1,"w-30","md:w-80","lg:w-80","mr-5"],[1,"required"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Affiliation",3,"value"],[1,"mb-2"],[1,"flex","flex-col","text-center","items-center"],[1,"text-2xl","font-semibold"],[1,"text-xs","italic","mb-2"],["appearance","fill",1,"w-30","md:w-80","lg:w-80"],["matInput","","placeholder","Enter a valid Email Address",3,"ngModel","ngModelChange"],[1,"space-x-1"],[1,"text-left"],[1,"example-margin",3,"ngModel","ngModelChange"],["target","_blank","href","https://www.algolia.com/policies/terms/"],["target","_blank","href","https://www.algolia.com/policies/privacy/"],[1,"mt-2",3,"ngModel","ngModelChange"],["mat-dialog-actions","",1,"flex","justify-center"],["mat-raised-button","",1,"w-60","mb-5",3,"disabled","color","click"],[4,"ngIf"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[3,"value"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"div",0),t._uU(1,"Let's get to know you"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"mat-form-field",2),t.TgZ(4,"mat-label",3),t._uU(5,"Occupation"),t.qZA(),t.TgZ(6,"mat-select",4),t.NdJ("ngModelChange",function(bt){return ye.userDetails.Occupation=bt}),t.YNc(7,or,2,2,"mat-option",5),t.qZA(),t.qZA(),t.TgZ(8,"mat-form-field",2),t.TgZ(9,"mat-label"),t._uU(10,"Affiliation"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t._UZ(12,"hr",7),t.TgZ(13,"div",8),t.TgZ(14,"span",9),t._uU(15,"Email"),t.qZA(),t.TgZ(16,"span",10),t._uU(17,"used to send newsletters, CEDA will never spam you with unnecessary emails."),t.qZA(),t.TgZ(18,"mat-form-field",11),t.TgZ(19,"input",12),t.NdJ("ngModelChange",function(bt){return ye.userDetails.emailAddress=bt}),t.qZA(),t.qZA(),t.TgZ(20,"div",13),t.TgZ(21,"mat-checkbox"),t._uU(22,"Newsletter"),t.qZA(),t.TgZ(23,"mat-checkbox"),t._uU(24,"Events"),t.qZA(),t.TgZ(25,"mat-checkbox"),t._uU(26,"Careers"),t.qZA(),t.qZA(),t.qZA(),t._UZ(27,"hr"),t.TgZ(28,"div",14),t.TgZ(29,"mat-checkbox",15),t.NdJ("ngModelChange",function(bt){return ye.userDetails.isChecked=bt}),t._uU(30,"By clicking this checkbox, you agree to "),t.TgZ(31,"a",16),t._uU(32,"Terms & Conditions"),t.qZA(),t._uU(33," and that you have read our "),t.TgZ(34,"a",17),t._uU(35,"Privacy Policy."),t.qZA(),t.qZA(),t.TgZ(36,"mat-checkbox",18),t.NdJ("ngModelChange",function(bt){return ye.userDetails.isSubscriptionChecked=bt}),t._uU(37,"Subscribe to the newsletter."),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",19),t.TgZ(39,"button",20),t.NdJ("click",function(){return ye.submitForm()}),t.YNc(40,Wt,2,0,"span",21),t.YNc(41,er,3,0,"svg",22),t.qZA(),t.qZA()),2&ne&&(t.xp6(6),t.Q6J("ngModel",ye.userDetails.Occupation),t.xp6(1),t.Q6J("ngForOf",ye.occupations),t.xp6(4),t.Q6J("value",ye.userDetails.Affiliation),t.xp6(8),t.Q6J("ngModel",ye.userDetails.emailAddress),t.xp6(10),t.Q6J("ngModel",ye.userDetails.isChecked),t.xp6(7),t.Q6J("ngModel",ye.userDetails.isSubscriptionChecked),t.xp6(3),t.Q6J("disabled",!ye.userDetails.isChecked||""===ye.userDetails.Occupation)("color","warn"),t.xp6(1),t.Q6J("ngIf",!ye.loading),t.xp6(1),t.Q6J("ngIf",ye.loading))},directives:[_.xY,s.KE,s.hX,Me,C.JJ,C.On,ee.sg,Ie,C.Fj,Re,_.H8,p.lW,ee.O5,g.ey],styles:['a[_ngcontent-%COMP%]{color:red}.required[_ngcontent-%COMP%]:after{content:" *";color:red}mat-icon[_ngcontent-%COMP%]{min-width:15px;min-height:15px}']}),Ye})();var _r=$(6627);function xr(Ye,Tt){if(1&Ye&&(t.TgZ(0,"div",4),t.TgZ(1,"h5",5),t._uU(2,"Description"),t.qZA(),t._UZ(3,"p",6),t.TgZ(4,"h5",5),t._uU(5,"Notes"),t.qZA(),t._UZ(6,"p",7),t.TgZ(7,"p",8),t._uU(8,"Credits: "),t.TgZ(9,"cite"),t._uU(10),t.qZA(),t.qZA(),t.qZA()),2&Ye){const ne=t.oxw();t.xp6(10),t.Oqu((null==ne.variableNotes?null:ne.variableNotes.credits)||"--")}}function dr(Ye,Tt){1&Ye&&(t.TgZ(0,"div",9),t._uU(1," No data fetched\n"),t.qZA())}let pr=(()=>{class Ye{constructor(ne,ye){this.data=ne,this.dialogRef=ye,ne&&(ne.variableNotes&&(this.variableNotes=ne.variableNotes),this.pageTitle=ne.pageTitle)}ngOnInit(){}ngAfterViewInit(){this.variableNotes&&this.setData()}setData(){const ne=document.getElementById("notes"),ye=document.getElementById("description");ne.innerHTML=this.variableNotes.notes?this.variableNotes.notes:"--",ye.innerHTML=this.variableNotes.description?this.variableNotes.description:"--"}onClose(){this.dialogRef.close()}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(_.WI),t.Y36(_.so))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["app-variable-notes-dialog"]],decls:5,vars:3,consts:[["svgIcon","close",1,"close","cursor-pointer",3,"click"],[1,"text-3xl","font-semibold","tracking-tight","leading-8","text-center"],["mat-dialog-content","","class","d-flex flex-column justify-center m-5 text-left overflow-hidden",4,"ngIf"],["class","font-medium leading-tight text-xl mt-20 mb-20 mr-12 text-center",4,"ngIf"],["mat-dialog-content","",1,"d-flex","flex-column","justify-center","m-5","text-left","overflow-hidden"],[1,"font-medium","leading-tight","text-xl","mt-0","mb-2"],["id","description",1,"text-base","font-light","leading-relaxed","mt-0","mb-4"],["id","notes",1,"text-base","font-light","leading-relaxed","mt-0","mb-4"],[1,"text-base","font-light","leading-relaxed","text-right","mt-0","mb-4"],[1,"font-medium","leading-tight","text-xl","mt-20","mb-20","mr-12","text-center"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"mat-icon",0),t.NdJ("click",function(){return ye.onClose()}),t.qZA(),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.YNc(3,xr,11,1,"div",2),t.YNc(4,dr,2,0,"div",3)),2&ne&&(t.xp6(2),t.Oqu(ye.pageTitle),t.xp6(1),t.Q6J("ngIf",ye.variableNotes),t.xp6(1),t.Q6J("ngIf",!ye.variableNotes))},directives:[_r.Hw,ee.O5,_.xY],styles:[".close[_ngcontent-%COMP%]{float:right}"]}),Ye})();var br=$(5750);function In(Ye,Tt,ne,ye){return new(ne||(ne=Promise))(function(bt,yr){function Ur(le){try{jn(ye.next(le))}catch(E){yr(E)}}function _n(le){try{jn(ye.throw(le))}catch(E){yr(E)}}function jn(le){le.done?bt(le.value):function(bt){return bt instanceof ne?bt:new ne(function(yr){yr(bt)})}(le.value).then(Ur,_n)}jn((ye=ye.apply(Ye,Tt||[])).next())})}const Mr=["plot"],Ir=["*"];class Sr{static setModuleName(Tt){Sr.moduleName=Tt}static getModuleName(){return Sr.moduleName}static setPlotly(Tt){if("object"==typeof Tt&&"function"!=typeof Tt.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");Sr.plotly=Tt}static insert(Tt){return-1===Sr.instances.indexOf(Tt)&&Sr.instances.push(Tt),Tt}static remove(Tt){const ne=Sr.instances.indexOf(Tt);ne>=0&&(Sr.instances.splice(ne,1),Sr.plotly.purge(Tt))}getInstanceByDivId(Tt){for(const ne of Sr.instances)if(ne&&ne.id===Tt)return ne}getPlotly(){return In(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===Sr.plotly)throw new Error("ViaCDN"===Sr.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return Sr.plotly}waitFor(Tt){return new Promise(ne=>{const ye=()=>{Tt()?ne():setTimeout(ye,10)};ye()})}newPlot(Tt,ne,ye,Ze,bt){return In(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),bt){const yr={data:ne,layout:ye,config:Ze,frames:bt};return this._getPlotly().newPlot(Tt,yr).then(()=>Sr.insert(Tt))}return this._getPlotly().newPlot(Tt,ne,ye,Ze).then(()=>Sr.insert(Tt))})}plot(Tt,ne,ye,Ze,bt){if(bt){const yr={data:ne,layout:ye,config:Ze,frames:bt};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Tt,yr):this._getPlotly().newPlot(Tt,yr)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Tt,ne,ye,Ze):this._getPlotly().newPlot(Tt,ne,ye,Ze)}update(Tt,ne,ye,Ze,bt){if(bt){const yr={data:ne,layout:ye,config:Ze,frames:bt};return this._getPlotly().react(Tt,yr)}return this._getPlotly().react(Tt,ne,ye,Ze)}resize(Tt){return this._getPlotly().Plots.resize(Tt)}}Sr.\u0275fac=function(Tt){return new(Tt||Sr)},Sr.instances=[],Sr.plotly=void 0,Sr.moduleName=void 0,Sr.\u0275prov=t.Yz7({factory:function(){return new Sr},token:Sr,providedIn:"root"});let Pr=(()=>{class Ye{constructor(ne,ye,Ze){this.plotly=ne,this.iterableDiffers=ye,this.keyValueDiffers=Ze,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new t.vpe,this.update=new t.vpe,this.purge=new t.vpe,this.error=new t.vpe,this.afterExport=new t.vpe,this.afterPlot=new t.vpe,this.animated=new t.vpe,this.animatingFrame=new t.vpe,this.animationInterrupted=new t.vpe,this.autoSize=new t.vpe,this.beforeExport=new t.vpe,this.buttonClicked=new t.vpe,this.click=new t.vpe,this.plotlyClick=new t.vpe,this.clickAnnotation=new t.vpe,this.deselect=new t.vpe,this.doubleClick=new t.vpe,this.framework=new t.vpe,this.hover=new t.vpe,this.legendClick=new t.vpe,this.legendDoubleClick=new t.vpe,this.react=new t.vpe,this.relayout=new t.vpe,this.restyle=new t.vpe,this.redraw=new t.vpe,this.selected=new t.vpe,this.selecting=new t.vpe,this.sliderChange=new t.vpe,this.sliderEnd=new t.vpe,this.sliderStart=new t.vpe,this.transitioning=new t.vpe,this.transitionInterrupted=new t.vpe,this.unhover=new t.vpe,this.relayouting=new t.vpe,this.treemapclick=new t.vpe,this.sunburstclick=new t.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const ne=this.createFigure();this.initialized.emit(ne)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const ne=this.createFigure();this.purge.emit(ne),Sr.remove(this.plotlyInstance)}ngOnChanges(ne){let ye=!1;const Ze=ne.revision;Ze&&!Ze.isFirstChange()&&(ye=!0);const bt=ne.debug;bt&&!bt.isFirstChange()&&(ye=!0),ye&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let ne=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(ne=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(ne=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),ne&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let ne=[this.defaultClassName];return Array.isArray(this.className)?ne=ne.concat(this.className):this.className&&ne.push(this.className),ne.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(ne=>{this.plotlyInstance=ne,this.getWindow().gd=this.debug?ne:void 0,this.eventNames.forEach(ye=>{const Ze=`plotly_${ye.toLowerCase()}`;ne.on(Ze,bt=>this[ye].emit(bt))}),ne.on("plotly_click",ye=>{this.click.emit(ye),this.plotlyClick.emit(ye)}),this.updateWindowResizeHandler()},ne=>{console.error("Error while plotting:",ne),this.error.emit(ne)})}createFigure(){const ne=this.plotlyInstance;return{data:ne.data,layout:ne.layout,frames:ne._transitionData?ne._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const ye=new Error("Plotly component wasn't initialized");throw this.error.emit(ye),ye}const ne=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,ne,this.config,this.frames).then(()=>{const ye=this.createFigure();this.update.emit(ye)},ye=>{console.error("Error while updating plot:",ye),this.error.emit(ye)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(ne,ye){const Ze=Object.assign({},ye,{uid:""});return JSON.stringify(Ze)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(Sr),t.Y36(t.ZZ4),t.Y36(t.aQg))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["plotly-plot"]],viewQuery:function(ne,ye){if(1&ne&&t.Gf(Mr,7),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye.plotEl=Ze.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[t._Bn([Sr]),t.TTD],ngContentSelectors:Ir,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(ne,ye){1&ne&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&ne&&(t.Q6J("ngClass",ye.getClassName())("ngStyle",ye.style),t.uIk("id",ye.divId))},directives:[ee.mk,ee.PC],encapsulation:2}),Ye})(),Kr=(()=>{class Ye{constructor(){}}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({providers:[Sr],imports:[[ee.ez]]}),Ye})(),vn=(()=>{class Ye{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");Sr.setPlotly(Ye.plotlyjs)}isValid(){return void 0!==Ye.plotlyjs&&("function"==typeof Ye.plotlyjs.plot||"function"==typeof Ye.plotlyjs.newPlot)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({providers:[Sr],imports:[[ee.ez,Kr],Kr]}),Ye.plotlyjs={},Ye})();var yn=$(7636),Zr=$(5072);function Wr(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(ne),t.oxw().action()}),t._uU(2),t.qZA(),t.qZA()}if(2&Ye){const ne=t.oxw();t.xp6(2),t.Oqu(ne.data.action)}}function pn(Ye,Tt){}const Mn=new t.OlP("MatSnackBarData");class Dn{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const hi=Math.pow(2,31)-1;class Qn{constructor(Tt,ne){this._overlayRef=ne,this._afterDismissed=new l.xQ,this._afterOpened=new l.xQ,this._onAction=new l.xQ,this._dismissedByAction=!1,this.containerInstance=Tt,this.onAction().subscribe(()=>this.dismiss()),Tt._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(Tt){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(Tt,hi))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let An=(()=>{class Ye{constructor(ne,ye){this.snackBarRef=ne,this.data=ye}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(Qn),t.Y36(Mn))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,Wr,3,1,"div",0)),2&ne&&(t.xp6(1),t.Oqu(ye.data.message),t.xp6(1),t.Q6J("ngIf",ye.hasAction))},directives:[ee.O5,p.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Ye})();const ci={snackBarState:(0,D.X$)("state",[(0,D.SB)("void, hidden",(0,D.oB)({transform:"scale(0.8)",opacity:0})),(0,D.SB)("visible",(0,D.oB)({transform:"scale(1)",opacity:1})),(0,D.eR)("* => visible",(0,D.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,D.eR)("* => void, * => hidden",(0,D.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,D.oB)({opacity:0})))])};let yi=(()=>{class Ye extends yn.en{constructor(ne,ye,Ze,bt,yr){super(),this._ngZone=ne,this._elementRef=ye,this._changeDetectorRef=Ze,this._platform=bt,this.snackBarConfig=yr,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new l.xQ,this._onExit=new l.xQ,this._onEnter=new l.xQ,this._animationState="void",this.attachDomPortal=Ur=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(Ur)),this._live="assertive"!==yr.politeness||yr.announcementMessage?"off"===yr.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(ne){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(ne)}attachTemplatePortal(ne){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(ne)}onAnimationEnd(ne){const{fromState:ye,toState:Ze}=ne;if(("void"===Ze&&"void"!==ye||"hidden"===Ze)&&this._completeExit(),"visible"===Ze){const bt=this._onEnter;this._ngZone.run(()=>{bt.next(),bt.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,k.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const ne=this._elementRef.nativeElement,ye=this.snackBarConfig.panelClass;ye&&(Array.isArray(ye)?ye.forEach(Ze=>ne.classList.add(Ze)):ne.classList.add(ye)),"center"===this.snackBarConfig.horizontalPosition&&ne.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&ne.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const ne=this._elementRef.nativeElement.querySelector("[aria-hidden]"),ye=this._elementRef.nativeElement.querySelector("[aria-live]");if(ne&&ye){let Ze=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&ne.contains(document.activeElement)&&(Ze=document.activeElement),ne.removeAttribute("aria-hidden"),ye.appendChild(ne),null==Ze||Ze.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(xt.t4),t.Y36(Dn))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["snack-bar-container"]],viewQuery:function(ne,ye){if(1&ne&&t.Gf(yn.Pl,7),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._portalOutlet=Ze.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(ne,ye){1&ne&&t.WFA("@state.done",function(bt){return ye.onAnimationEnd(bt)}),2&ne&&t.d8E("@state",ye._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(ne,ye){1&ne&&(t.TgZ(0,"div",0),t.YNc(1,pn,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&ne&&(t.xp6(2),t.uIk("aria-live",ye._live)("role",ye._role))},directives:[yn.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[ci.snackBarState]}}),Ye})(),Xi=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({imports:[[a.U8,yn.eL,ee.ez,p.ot,g.BQ],g.BQ]}),Ye})();const Da=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new Dn}});let Ma=(()=>{class Ye{constructor(ne,ye,Ze,bt,yr,Ur){this._overlay=ne,this._live=ye,this._injector=Ze,this._breakpointObserver=bt,this._parentSnackBar=yr,this._defaultConfig=Ur,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=An,this.snackBarContainerComponent=yi,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const ne=this._parentSnackBar;return ne?ne._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(ne){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=ne:this._snackBarRefAtThisLevel=ne}openFromComponent(ne,ye){return this._attach(ne,ye)}openFromTemplate(ne,ye){return this._attach(ne,ye)}open(ne,ye="",Ze){const bt=Object.assign(Object.assign({},this._defaultConfig),Ze);return bt.data={message:ne,action:ye},bt.announcementMessage===ne&&(bt.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,bt)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(ne,ye){const bt=t.zs3.create({parent:ye&&ye.viewContainerRef&&ye.viewContainerRef.injector||this._injector,providers:[{provide:Dn,useValue:ye}]}),yr=new yn.C5(this.snackBarContainerComponent,ye.viewContainerRef,bt),Ur=ne.attach(yr);return Ur.instance.snackBarConfig=ye,Ur.instance}_attach(ne,ye){const Ze=Object.assign(Object.assign(Object.assign({},new Dn),this._defaultConfig),ye),bt=this._createOverlay(Ze),yr=this._attachSnackBarContainer(bt,Ze),Ur=new Qn(yr,bt);if(ne instanceof t.Rgc){const _n=new yn.UE(ne,null,{$implicit:Ze.data,snackBarRef:Ur});Ur.instance=yr.attachTemplatePortal(_n)}else{const _n=this._createInjector(Ze,Ur),jn=new yn.C5(ne,void 0,_n),le=yr.attachComponentPortal(jn);Ur.instance=le.instance}return this._breakpointObserver.observe(Zr.u3.HandsetPortrait).pipe((0,I.R)(bt.detachments())).subscribe(_n=>{const jn=bt.overlayElement.classList;_n.matches?jn.add(this.handsetCssClass):jn.remove(this.handsetCssClass)}),Ze.announcementMessage&&yr._onAnnounce.subscribe(()=>{this._live.announce(Ze.announcementMessage,Ze.politeness)}),this._animateSnackBar(Ur,Ze),this._openedSnackBarRef=Ur,this._openedSnackBarRef}_animateSnackBar(ne,ye){ne.afterDismissed().subscribe(()=>{this._openedSnackBarRef==ne&&(this._openedSnackBarRef=null),ye.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{ne.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):ne.containerInstance.enter(),ye.duration&&ye.duration>0&&ne.afterOpened().subscribe(()=>ne._dismissAfter(ye.duration))}_createOverlay(ne){const ye=new a.X_;ye.direction=ne.direction;let Ze=this._overlay.position().global();const bt="rtl"===ne.direction,yr="left"===ne.horizontalPosition||"start"===ne.horizontalPosition&&!bt||"end"===ne.horizontalPosition&&bt,Ur=!yr&&"center"!==ne.horizontalPosition;return yr?Ze.left("0"):Ur?Ze.right("0"):Ze.centerHorizontally(),"top"===ne.verticalPosition?Ze.top("0"):Ze.bottom("0"),ye.positionStrategy=Ze,this._overlay.create(ye)}_createInjector(ne,ye){return t.zs3.create({parent:ne&&ne.viewContainerRef&&ne.viewContainerRef.injector||this._injector,providers:[{provide:Qn,useValue:ye},{provide:Mn,useValue:ne.data}]})}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.LFG(a.aV),t.LFG(u.Kd),t.LFG(t.zs3),t.LFG(Zr.Yg),t.LFG(Ye,12),t.LFG(Da))},Ye.\u0275prov=t.Yz7({factory:function(){return new Ye(t.LFG(a.aV),t.LFG(u.Kd),t.LFG(t.gxx),t.LFG(Zr.Yg),t.LFG(Ye,12),t.LFG(Da))},token:Ye,providedIn:Xi}),Ye})();var Oi=$(1436),Yi=$(3935),_a=$(5319),Co=$(5917);const Zo=["mat-calendar-body",""];function Xa(Ye,Tt){if(1&Ye&&(t.TgZ(0,"tr",2),t.TgZ(1,"td",3),t._uU(2),t.qZA(),t.qZA()),2&Ye){const ne=t.oxw();t.xp6(1),t.Udp("padding-top",ne._cellPadding)("padding-bottom",ne._cellPadding),t.uIk("colspan",ne.numCols),t.xp6(1),t.hij(" ",ne.label," ")}}function to(Ye,Tt){if(1&Ye&&(t.TgZ(0,"td",3),t._uU(1),t.qZA()),2&Ye){const ne=t.oxw(2);t.Udp("padding-top",ne._cellPadding)("padding-bottom",ne._cellPadding),t.uIk("colspan",ne._firstRowOffset),t.xp6(1),t.hij(" ",ne._firstRowOffset>=ne.labelMinRequiredCells?ne.label:""," ")}}function Uo(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"td",7),t.NdJ("click",function(Ze){const yr=t.CHM(ne).$implicit;return t.oxw(2)._cellClicked(yr,Ze)}),t.TgZ(1,"div",8),t._uU(2),t.qZA(),t._UZ(3,"div",9),t.qZA()}if(2&Ye){const ne=Tt.$implicit,ye=Tt.index,Ze=t.oxw().index,bt=t.oxw();t.Udp("width",bt._cellWidth)("padding-top",bt._cellPadding)("padding-bottom",bt._cellPadding),t.ekj("mat-calendar-body-disabled",!ne.enabled)("mat-calendar-body-active",bt._isActiveCell(Ze,ye))("mat-calendar-body-range-start",bt._isRangeStart(ne.compareValue))("mat-calendar-body-range-end",bt._isRangeEnd(ne.compareValue))("mat-calendar-body-in-range",bt._isInRange(ne.compareValue))("mat-calendar-body-comparison-bridge-start",bt._isComparisonBridgeStart(ne.compareValue,Ze,ye))("mat-calendar-body-comparison-bridge-end",bt._isComparisonBridgeEnd(ne.compareValue,Ze,ye))("mat-calendar-body-comparison-start",bt._isComparisonStart(ne.compareValue))("mat-calendar-body-comparison-end",bt._isComparisonEnd(ne.compareValue))("mat-calendar-body-in-comparison-range",bt._isInComparisonRange(ne.compareValue))("mat-calendar-body-preview-start",bt._isPreviewStart(ne.compareValue))("mat-calendar-body-preview-end",bt._isPreviewEnd(ne.compareValue))("mat-calendar-body-in-preview",bt._isInPreview(ne.compareValue)),t.Q6J("ngClass",ne.cssClasses)("tabindex",bt._isActiveCell(Ze,ye)?0:-1),t.uIk("data-mat-row",Ze)("data-mat-col",ye)("aria-label",ne.ariaLabel)("aria-disabled",!ne.enabled||null)("aria-selected",bt._isSelected(ne.compareValue)),t.xp6(1),t.ekj("mat-calendar-body-selected",bt._isSelected(ne.compareValue))("mat-calendar-body-comparison-identical",bt._isComparisonIdentical(ne.compareValue))("mat-calendar-body-today",bt.todayValue===ne.compareValue),t.xp6(1),t.hij(" ",ne.displayValue," ")}}function Ji(Ye,Tt){if(1&Ye&&(t.TgZ(0,"tr",4),t.YNc(1,to,2,6,"td",5),t.YNc(2,Uo,4,46,"td",6),t.qZA()),2&Ye){const ne=Tt.$implicit,ye=Tt.index,Ze=t.oxw();t.xp6(1),t.Q6J("ngIf",0===ye&&Ze._firstRowOffset),t.xp6(1),t.Q6J("ngForOf",ne)}}function Eo(Ye,Tt){if(1&Ye&&(t.TgZ(0,"th",5),t.TgZ(1,"abbr",6),t._uU(2),t.qZA(),t.qZA()),2&Ye){const ne=Tt.$implicit;t.uIk("aria-label",ne.long),t.xp6(1),t.uIk("title",ne.long),t.xp6(1),t.Oqu(ne.narrow)}}const lo=["*"];function Aa(Ye,Tt){}function ro(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"mat-month-view",5),t.NdJ("activeDateChange",function(Ze){return t.CHM(ne),t.oxw().activeDate=Ze})("_userSelection",function(Ze){return t.CHM(ne),t.oxw()._dateSelected(Ze)}),t.qZA()}if(2&Ye){const ne=t.oxw();t.Q6J("activeDate",ne.activeDate)("selected",ne.selected)("dateFilter",ne.dateFilter)("maxDate",ne.maxDate)("minDate",ne.minDate)("dateClass",ne.dateClass)("comparisonStart",ne.comparisonStart)("comparisonEnd",ne.comparisonEnd)}}function mo(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"mat-year-view",6),t.NdJ("activeDateChange",function(Ze){return t.CHM(ne),t.oxw().activeDate=Ze})("monthSelected",function(Ze){return t.CHM(ne),t.oxw()._monthSelectedInYearView(Ze)})("selectedChange",function(Ze){return t.CHM(ne),t.oxw()._goToDateInView(Ze,"month")}),t.qZA()}if(2&Ye){const ne=t.oxw();t.Q6J("activeDate",ne.activeDate)("selected",ne.selected)("dateFilter",ne.dateFilter)("maxDate",ne.maxDate)("minDate",ne.minDate)("dateClass",ne.dateClass)}}function Mo(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"mat-multi-year-view",7),t.NdJ("activeDateChange",function(Ze){return t.CHM(ne),t.oxw().activeDate=Ze})("yearSelected",function(Ze){return t.CHM(ne),t.oxw()._yearSelectedInMultiYearView(Ze)})("selectedChange",function(Ze){return t.CHM(ne),t.oxw()._goToDateInView(Ze,"year")}),t.qZA()}if(2&Ye){const ne=t.oxw();t.Q6J("activeDate",ne.activeDate)("selected",ne.selected)("dateFilter",ne.dateFilter)("maxDate",ne.maxDate)("minDate",ne.minDate)("dateClass",ne.dateClass)}}function Va(Ye,Tt){}const ga=["button"];function Ja(Ye,Tt){1&Ye&&(t.O4$(),t.TgZ(0,"svg",3),t._UZ(1,"path",4),t.qZA())}const bs=[[["","matDatepickerToggleIcon",""]]],As=["[matDatepickerToggleIcon]"];let es=(()=>{class Ye{constructor(){this.changes=new l.xQ,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(ne,ye){return`${ne} \u2013 ${ye}`}}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275prov=t.Yz7({factory:function(){return new Ye},token:Ye,providedIn:"root"}),Ye})();class ss{constructor(Tt,ne,ye,Ze,bt={},yr=Tt,Ur){this.value=Tt,this.displayValue=ne,this.ariaLabel=ye,this.enabled=Ze,this.cssClasses=bt,this.compareValue=yr,this.rawValue=Ur}}let Wo=(()=>{class Ye{constructor(ne,ye){this._elementRef=ne,this._ngZone=ye,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new t.vpe,this.previewChange=new t.vpe,this._enterHandler=Ze=>{if(this._skipNextFocus&&"focus"===Ze.type)this._skipNextFocus=!1;else if(Ze.target&&this.isRange){const bt=this._getCellFromElement(Ze.target);bt&&this._ngZone.run(()=>this.previewChange.emit({value:bt.enabled?bt:null,event:Ze}))}},this._leaveHandler=Ze=>{null!==this.previewEnd&&this.isRange&&Ze.target&&go(Ze.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:Ze}))},ye.runOutsideAngular(()=>{const Ze=ne.nativeElement;Ze.addEventListener("mouseenter",this._enterHandler,!0),Ze.addEventListener("focus",this._enterHandler,!0),Ze.addEventListener("mouseleave",this._leaveHandler,!0),Ze.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(ne,ye){ne.enabled&&this.selectedValueChange.emit({value:ne.value,event:ye})}_isSelected(ne){return this.startValue===ne||this.endValue===ne}ngOnChanges(ne){const ye=ne.numCols,{rows:Ze,numCols:bt}=this;(ne.rows||ye)&&(this._firstRowOffset=Ze&&Ze.length&&Ze[0].length?bt-Ze[0].length:0),(ne.cellAspectRatio||ye||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/bt+"%"),(ye||!this._cellWidth)&&(this._cellWidth=100/bt+"%")}ngOnDestroy(){const ne=this._elementRef.nativeElement;ne.removeEventListener("mouseenter",this._enterHandler,!0),ne.removeEventListener("focus",this._enterHandler,!0),ne.removeEventListener("mouseleave",this._leaveHandler,!0),ne.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(ne,ye){let Ze=ne*this.numCols+ye;return ne&&(Ze-=this._firstRowOffset),Ze==this.activeCell}_focusActiveCell(ne=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,k.q)(1)).subscribe(()=>{const ye=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");ye&&(ne||(this._skipNextFocus=!0),ye.focus())})})}_isRangeStart(ne){return vo(ne,this.startValue,this.endValue)}_isRangeEnd(ne){return Lo(ne,this.startValue,this.endValue)}_isInRange(ne){return Do(ne,this.startValue,this.endValue,this.isRange)}_isComparisonStart(ne){return vo(ne,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(ne,ye,Ze){if(!this._isComparisonStart(ne)||this._isRangeStart(ne)||!this._isInRange(ne))return!1;let bt=this.rows[ye][Ze-1];if(!bt){const yr=this.rows[ye-1];bt=yr&&yr[yr.length-1]}return bt&&!this._isRangeEnd(bt.compareValue)}_isComparisonBridgeEnd(ne,ye,Ze){if(!this._isComparisonEnd(ne)||this._isRangeEnd(ne)||!this._isInRange(ne))return!1;let bt=this.rows[ye][Ze+1];if(!bt){const yr=this.rows[ye+1];bt=yr&&yr[0]}return bt&&!this._isRangeStart(bt.compareValue)}_isComparisonEnd(ne){return Lo(ne,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(ne){return Do(ne,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(ne){return this.comparisonStart===this.comparisonEnd&&ne===this.comparisonStart}_isPreviewStart(ne){return vo(ne,this.previewStart,this.previewEnd)}_isPreviewEnd(ne){return Lo(ne,this.previewStart,this.previewEnd)}_isInPreview(ne){return Do(ne,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(ne){let ye;if(go(ne)?ye=ne:go(ne.parentNode)&&(ye=ne.parentNode),ye){const Ze=ye.getAttribute("data-mat-row"),bt=ye.getAttribute("data-mat-col");if(Ze&&bt)return this.rows[parseInt(Ze)][parseInt(bt)]}return null}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.SBq),t.Y36(t.R0b))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",previewStart:"previewStart",previewEnd:"previewEnd",label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[t.TTD],attrs:Zo,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell",3,"ngClass","tabindex","mat-calendar-body-disabled","mat-calendar-body-active","mat-calendar-body-range-start","mat-calendar-body-range-end","mat-calendar-body-in-range","mat-calendar-body-comparison-bridge-start","mat-calendar-body-comparison-bridge-end","mat-calendar-body-comparison-start","mat-calendar-body-comparison-end","mat-calendar-body-in-comparison-range","mat-calendar-body-preview-start","mat-calendar-body-preview-end","mat-calendar-body-in-preview","width","paddingTop","paddingBottom","click",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],[1,"mat-calendar-body-cell-preview"]],template:function(ne,ye){1&ne&&(t.YNc(0,Xa,3,6,"tr",0),t.YNc(1,Ji,3,2,"tr",1)),2&ne&&(t.Q6J("ngIf",ye._firstRowOffset<ye.labelMinRequiredCells),t.xp6(1),t.Q6J("ngForOf",ye.rows))},directives:[ee.O5,ee.sg,ee.mk],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:none;cursor:pointer}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}@media(hover: none){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){background-color:transparent}}\n'],encapsulation:2,changeDetection:0}),Ye})();function go(Ye){return"TD"===Ye.nodeName}function vo(Ye,Tt,ne){return null!==ne&&Tt!==ne&&Ye<ne&&Ye===Tt}function Lo(Ye,Tt,ne){return null!==Tt&&Tt!==ne&&Ye>=Tt&&Ye===ne}function Do(Ye,Tt,ne,ye){return ye&&null!==Tt&&null!==ne&&Tt!==ne&&Ye>=Tt&&Ye<=ne}class pa{constructor(Tt,ne){this.start=Tt,this.end=ne}}let co=(()=>{class Ye{constructor(ne,ye){this.selection=ne,this._adapter=ye,this._selectionChanged=new l.xQ,this.selectionChanged=this._selectionChanged,this.selection=ne}updateSelection(ne,ye){const Ze=this.selection;this.selection=ne,this._selectionChanged.next({selection:ne,source:ye,oldValue:Ze})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(ne){return this._adapter.isDateInstance(ne)&&this._adapter.isValid(ne)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.LFG(void 0),t.LFG(g._A))},Ye.\u0275prov=t.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),yo=(()=>{class Ye extends co{constructor(ne){super(null,ne)}add(ne){super.updateSelection(ne,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const ne=new Ye(this._adapter);return ne.updateSelection(this.selection,this),ne}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.LFG(g._A))},Ye.\u0275prov=t.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const Bo={provide:co,deps:[[new t.FiY,new t.tp0,co],g._A],useFactory:function(Ye,Tt){return Ye||new yo(Tt)}},Gi=new t.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let _t=(()=>{class Ye{constructor(ne,ye,Ze,bt,yr){this._changeDetectorRef=ne,this._dateFormats=ye,this._dateAdapter=Ze,this._dir=bt,this._rangeStrategy=yr,this._rerenderSubscription=_a.w.EMPTY,this.selectedChange=new t.vpe,this._userSelection=new t.vpe,this.activeDateChange=new t.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(ne){const ye=this._activeDate,Ze=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(Ze,this.minDate,this.maxDate),this._hasSameMonthAndYear(ye,this._activeDate)||this._init()}get selected(){return this._selected}set selected(ne){this._selected=ne instanceof pa?ne:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(ne){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get maxDate(){return this._maxDate}set maxDate(ne){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,w.O)(null)).subscribe(()=>this._init())}ngOnChanges(ne){const ye=ne.comparisonStart||ne.comparisonEnd;ye&&!ye.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(ne){const ye=ne.value,Ze=this._dateAdapter.getYear(this.activeDate),bt=this._dateAdapter.getMonth(this.activeDate),yr=this._dateAdapter.createDate(Ze,bt,ye);let Ur,_n;this._selected instanceof pa?(Ur=this._getDateInCurrentMonth(this._selected.start),_n=this._getDateInCurrentMonth(this._selected.end)):Ur=_n=this._getDateInCurrentMonth(this._selected),(Ur!==ye||_n!==ye)&&this.selectedChange.emit(yr),this._userSelection.emit({value:yr,event:ne.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(ne){const ye=this._activeDate,Ze=this._isRtl();switch(ne.keyCode){case f.oh:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,Ze?1:-1);break;case f.SV:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,Ze?-1:1);break;case f.LH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case f.JH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case f.Sd:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case f.uR:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case f.Ku:this.activeDate=ne.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case f.VM:this.activeDate=ne.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case f.K5:case f.L_:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&ne.preventDefault());case f.hY:return void(null!=this._previewEnd&&!(0,f.Vb)(ne)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:ne}),ne.preventDefault(),ne.stopPropagation()));default:return}this._dateAdapter.compareDate(ye,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),ne.preventDefault()}_handleCalendarBodyKeyup(ne){(ne.keyCode===f.L_||ne.keyCode===f.K5)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:ne}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let ne=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(ne)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(ne){this._matCalendarBody._focusActiveCell(ne)}_previewChanged({event:ne,value:ye}){if(this._rangeStrategy){const bt=this._rangeStrategy.createPreview(ye?ye.rawValue:null,this.selected,ne);this._previewStart=this._getCellCompareValue(bt.start),this._previewEnd=this._getCellCompareValue(bt.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const ne=this._dateAdapter.getFirstDayOfWeek(),ye=this._dateAdapter.getDayOfWeekNames("narrow");let bt=this._dateAdapter.getDayOfWeekNames("long").map((yr,Ur)=>({long:yr,narrow:ye[Ur]}));this._weekdays=bt.slice(ne).concat(bt.slice(0,ne))}_createWeekCells(){const ne=this._dateAdapter.getNumDaysInMonth(this.activeDate),ye=this._dateAdapter.getDateNames();this._weeks=[[]];for(let Ze=0,bt=this._firstWeekOffset;Ze<ne;Ze++,bt++){7==bt&&(this._weeks.push([]),bt=0);const yr=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),Ze+1),Ur=this._shouldEnableDate(yr),_n=this._dateAdapter.format(yr,this._dateFormats.display.dateA11yLabel),jn=this.dateClass?this.dateClass(yr,"month"):void 0;this._weeks[this._weeks.length-1].push(new ss(Ze+1,ye[Ze],_n,Ur,jn,this._getCellCompareValue(yr),yr))}}_shouldEnableDate(ne){return!!ne&&(!this.minDate||this._dateAdapter.compareDate(ne,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(ne,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(ne))}_getDateInCurrentMonth(ne){return ne&&this._hasSameMonthAndYear(ne,this.activeDate)?this._dateAdapter.getDate(ne):null}_hasSameMonthAndYear(ne,ye){return!(!ne||!ye||this._dateAdapter.getMonth(ne)!=this._dateAdapter.getMonth(ye)||this._dateAdapter.getYear(ne)!=this._dateAdapter.getYear(ye))}_getCellCompareValue(ne){if(ne){const ye=this._dateAdapter.getYear(ne),Ze=this._dateAdapter.getMonth(ne),bt=this._dateAdapter.getDate(ne);return new Date(ye,Ze,bt).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(ne){ne instanceof pa?(this._rangeStart=this._getCellCompareValue(ne.start),this._rangeEnd=this._getCellCompareValue(ne.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(ne),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(ne){return!this.dateFilter||this.dateFilter(ne)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.sBO),t.Y36(g.sG,8),t.Y36(g._A,8),t.Y36(S.Is,8),t.Y36(Gi,8))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-month-view"]],viewQuery:function(ne,ye){if(1&ne&&t.Gf(Wo,5),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._matCalendarBody=Ze.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[t.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"mat-calendar-abbr"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"table",0),t.TgZ(1,"thead",1),t.TgZ(2,"tr"),t.YNc(3,Eo,3,3,"th",2),t.qZA(),t.TgZ(4,"tr"),t._UZ(5,"th",3),t.qZA(),t.qZA(),t.TgZ(6,"tbody",4),t.NdJ("selectedValueChange",function(bt){return ye._dateSelected(bt)})("previewChange",function(bt){return ye._previewChanged(bt)})("keyup",function(bt){return ye._handleCalendarBodyKeyup(bt)})("keydown",function(bt){return ye._handleCalendarBodyKeydown(bt)}),t.qZA(),t.qZA()),2&ne&&(t.xp6(3),t.Q6J("ngForOf",ye._weekdays),t.xp6(3),t.Q6J("label",ye._monthLabel)("rows",ye._weeks)("todayValue",ye._todayDate)("startValue",ye._rangeStart)("endValue",ye._rangeEnd)("comparisonStart",ye._comparisonRangeStart)("comparisonEnd",ye._comparisonRangeEnd)("previewStart",ye._previewStart)("previewEnd",ye._previewEnd)("isRange",ye._isRange)("labelMinRequiredCells",3)("activeCell",ye._dateAdapter.getDate(ye.activeDate)-1))},directives:[ee.sg,Wo],encapsulation:2,changeDetection:0}),Ye})(),rr=(()=>{class Ye{constructor(ne,ye,Ze){this._changeDetectorRef=ne,this._dateAdapter=ye,this._dir=Ze,this._rerenderSubscription=_a.w.EMPTY,this.selectedChange=new t.vpe,this.yearSelected=new t.vpe,this.activeDateChange=new t.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(ne){let ye=this._activeDate;const Ze=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(Ze,this.minDate,this.maxDate),ir(this._dateAdapter,ye,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(ne){this._selected=ne instanceof pa?ne:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne)),this._setSelectedYear(ne)}get minDate(){return this._minDate}set minDate(ne){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get maxDate(){return this._maxDate}set maxDate(ne){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,w.O)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const ye=this._dateAdapter.getYear(this._activeDate)-$t(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let Ze=0,bt=[];Ze<24;Ze++)bt.push(ye+Ze),4==bt.length&&(this._years.push(bt.map(yr=>this._createCellForYear(yr))),bt=[]);this._changeDetectorRef.markForCheck()}_yearSelected(ne){const ye=ne.value;this.yearSelected.emit(this._dateAdapter.createDate(ye,0,1));let Ze=this._dateAdapter.getMonth(this.activeDate),bt=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(ye,Ze,1));this.selectedChange.emit(this._dateAdapter.createDate(ye,Ze,Math.min(this._dateAdapter.getDate(this.activeDate),bt)))}_handleCalendarBodyKeydown(ne){const ye=this._activeDate,Ze=this._isRtl();switch(ne.keyCode){case f.oh:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Ze?1:-1);break;case f.SV:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Ze?-1:1);break;case f.LH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case f.JH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case f.Sd:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-$t(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case f.uR:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-$t(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case f.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,ne.altKey?-240:-24);break;case f.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,ne.altKey?240:24);break;case f.K5:case f.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(ye,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),ne.preventDefault()}_handleCalendarBodyKeyup(ne){(ne.keyCode===f.L_||ne.keyCode===f.K5)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:ne}),this._selectionKeyPressed=!1)}_getActiveCell(){return $t(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(ne){const ye=this._dateAdapter.createDate(ne,0,1),Ze=this._dateAdapter.getYearName(ye),bt=this.dateClass?this.dateClass(ye,"multi-year"):void 0;return new ss(ne,Ze,Ze,this._shouldEnableYear(ne),bt)}_shouldEnableYear(ne){if(null==ne||this.maxDate&&ne>this._dateAdapter.getYear(this.maxDate)||this.minDate&&ne<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let Ze=this._dateAdapter.createDate(ne,0,1);this._dateAdapter.getYear(Ze)==ne;Ze=this._dateAdapter.addCalendarDays(Ze,1))if(this.dateFilter(Ze))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(ne){if(this._selectedYear=null,ne instanceof pa){const ye=ne.start||ne.end;ye&&(this._selectedYear=this._dateAdapter.getYear(ye))}else ne&&(this._selectedYear=this._dateAdapter.getYear(ne))}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.sBO),t.Y36(g._A,8),t.Y36(S.Is,8))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-multi-year-view"]],viewQuery:function(ne,ye){if(1&ne&&t.Gf(Wo,5),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._matCalendarBody=Ze.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"table",0),t.TgZ(1,"thead",1),t.TgZ(2,"tr"),t._UZ(3,"th",2),t.qZA(),t.qZA(),t.TgZ(4,"tbody",3),t.NdJ("selectedValueChange",function(bt){return ye._yearSelected(bt)})("keyup",function(bt){return ye._handleCalendarBodyKeyup(bt)})("keydown",function(bt){return ye._handleCalendarBodyKeydown(bt)}),t.qZA(),t.qZA()),2&ne&&(t.xp6(4),t.Q6J("rows",ye._years)("todayValue",ye._todayYear)("startValue",ye._selectedYear)("endValue",ye._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",ye._getActiveCell()))},directives:[Wo],encapsulation:2,changeDetection:0}),Ye})();function ir(Ye,Tt,ne,ye,Ze){const bt=Ye.getYear(Tt),yr=Ye.getYear(ne),Ur=sr(Ye,ye,Ze);return Math.floor((bt-Ur)/24)===Math.floor((yr-Ur)/24)}function $t(Ye,Tt,ne,ye){return function(Ye,Tt){return(Ye%24+24)%24}(Ye.getYear(Tt)-sr(Ye,ne,ye))}function sr(Ye,Tt,ne){let ye=0;return ne?ye=Ye.getYear(ne)-24+1:Tt&&(ye=Ye.getYear(Tt)),ye}let Tr=(()=>{class Ye{constructor(ne,ye,Ze,bt){this._changeDetectorRef=ne,this._dateFormats=ye,this._dateAdapter=Ze,this._dir=bt,this._rerenderSubscription=_a.w.EMPTY,this.selectedChange=new t.vpe,this.monthSelected=new t.vpe,this.activeDateChange=new t.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(ne){let ye=this._activeDate;const Ze=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(Ze,this.minDate,this.maxDate),this._dateAdapter.getYear(ye)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(ne){this._selected=ne instanceof pa?ne:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne)),this._setSelectedMonth(ne)}get minDate(){return this._minDate}set minDate(ne){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get maxDate(){return this._maxDate}set maxDate(ne){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,w.O)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(ne){const ye=ne.value,Ze=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),ye,1);this.monthSelected.emit(Ze);const bt=this._dateAdapter.getNumDaysInMonth(Ze);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),ye,Math.min(this._dateAdapter.getDate(this.activeDate),bt)))}_handleCalendarBodyKeydown(ne){const ye=this._activeDate,Ze=this._isRtl();switch(ne.keyCode){case f.oh:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,Ze?1:-1);break;case f.SV:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,Ze?-1:1);break;case f.LH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case f.JH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case f.Sd:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case f.uR:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case f.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,ne.altKey?-10:-1);break;case f.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,ne.altKey?10:1);break;case f.K5:case f.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(ye,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),ne.preventDefault()}_handleCalendarBodyKeyup(ne){(ne.keyCode===f.L_||ne.keyCode===f.K5)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:ne}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let ne=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(ye=>ye.map(Ze=>this._createCellForMonth(Ze,ne[Ze]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(ne){return ne&&this._dateAdapter.getYear(ne)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(ne):null}_createCellForMonth(ne,ye){const Ze=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),ne,1),bt=this._dateAdapter.format(Ze,this._dateFormats.display.monthYearA11yLabel),yr=this.dateClass?this.dateClass(Ze,"year"):void 0;return new ss(ne,ye.toLocaleUpperCase(),bt,this._shouldEnableMonth(ne),yr)}_shouldEnableMonth(ne){const ye=this._dateAdapter.getYear(this.activeDate);if(null==ne||this._isYearAndMonthAfterMaxDate(ye,ne)||this._isYearAndMonthBeforeMinDate(ye,ne))return!1;if(!this.dateFilter)return!0;for(let bt=this._dateAdapter.createDate(ye,ne,1);this._dateAdapter.getMonth(bt)==ne;bt=this._dateAdapter.addCalendarDays(bt,1))if(this.dateFilter(bt))return!0;return!1}_isYearAndMonthAfterMaxDate(ne,ye){if(this.maxDate){const Ze=this._dateAdapter.getYear(this.maxDate),bt=this._dateAdapter.getMonth(this.maxDate);return ne>Ze||ne===Ze&&ye>bt}return!1}_isYearAndMonthBeforeMinDate(ne,ye){if(this.minDate){const Ze=this._dateAdapter.getYear(this.minDate),bt=this._dateAdapter.getMonth(this.minDate);return ne<Ze||ne===Ze&&ye<bt}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(ne){this._selectedMonth=ne instanceof pa?this._getMonthInCurrentYear(ne.start)||this._getMonthInCurrentYear(ne.end):this._getMonthInCurrentYear(ne)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.sBO),t.Y36(g.sG,8),t.Y36(g._A,8),t.Y36(S.Is,8))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-year-view"]],viewQuery:function(ne,ye){if(1&ne&&t.Gf(Wo,5),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._matCalendarBody=Ze.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"table",0),t.TgZ(1,"thead",1),t.TgZ(2,"tr"),t._UZ(3,"th",2),t.qZA(),t.qZA(),t.TgZ(4,"tbody",3),t.NdJ("selectedValueChange",function(bt){return ye._monthSelected(bt)})("keyup",function(bt){return ye._handleCalendarBodyKeyup(bt)})("keydown",function(bt){return ye._handleCalendarBodyKeydown(bt)}),t.qZA(),t.qZA()),2&ne&&(t.xp6(4),t.Q6J("label",ye._yearLabel)("rows",ye._months)("todayValue",ye._todayMonth)("startValue",ye._selectedMonth)("endValue",ye._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",ye._dateAdapter.getMonth(ye.activeDate)))},directives:[Wo],encapsulation:2,changeDetection:0}),Ye})(),Ar=0,Br=(()=>{class Ye{constructor(ne,ye,Ze,bt,yr){this._intl=ne,this.calendar=ye,this._dateAdapter=Ze,this._dateFormats=bt,this._buttonDescriptionId="mat-calendar-button-"+Ar++,this.calendar.stateChanges.subscribe(()=>yr.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const ye=this._dateAdapter.getYear(this.calendar.activeDate)-$t(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),Ze=ye+24-1,bt=this._dateAdapter.getYearName(this._dateAdapter.createDate(ye,0,1)),yr=this._dateAdapter.getYearName(this._dateAdapter.createDate(Ze,0,1));return this._intl.formatYearRange(bt,yr)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(ne,ye){return"month"==this.calendar.currentView?this._dateAdapter.getYear(ne)==this._dateAdapter.getYear(ye)&&this._dateAdapter.getMonth(ne)==this._dateAdapter.getMonth(ye):"year"==this.calendar.currentView?this._dateAdapter.getYear(ne)==this._dateAdapter.getYear(ye):ir(this._dateAdapter,ne,ye,this.calendar.minDate,this.calendar.maxDate)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(es),t.Y36((0,t.Gpc)(()=>un)),t.Y36(g._A,8),t.Y36(g.sG,8),t.Y36(t.sBO))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:lo,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","cdkAriaLive","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(ne,ye){1&ne&&(t.F$t(),t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return ye.currentPeriodClicked()}),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.O4$(),t.TgZ(5,"svg",3),t._UZ(6,"polygon",4),t.qZA(),t.qZA(),t.kcU(),t._UZ(7,"div",5),t.Hsn(8),t.TgZ(9,"button",6),t.NdJ("click",function(){return ye.previousClicked()}),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return ye.nextClicked()}),t.qZA(),t.qZA(),t.qZA()),2&ne&&(t.xp6(2),t.uIk("aria-label",ye.periodButtonLabel)("aria-describedby",ye._buttonDescriptionId),t.xp6(1),t.uIk("id",ye._buttonDescriptionId),t.xp6(1),t.Oqu(ye.periodButtonText),t.xp6(1),t.ekj("mat-calendar-invert","month"!==ye.calendar.currentView),t.xp6(4),t.Q6J("disabled",!ye.previousEnabled()),t.uIk("aria-label",ye.prevButtonLabel),t.xp6(1),t.Q6J("disabled",!ye.nextEnabled()),t.uIk("aria-label",ye.nextButtonLabel))},directives:[p.lW,u.Qr],encapsulation:2,changeDetection:0}),Ye})(),un=(()=>{class Ye{constructor(ne,ye,Ze,bt){this._dateAdapter=ye,this._dateFormats=Ze,this._changeDetectorRef=bt,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new t.vpe,this.yearSelected=new t.vpe,this.monthSelected=new t.vpe,this.viewChanged=new t.vpe(!0),this._userSelection=new t.vpe,this.stateChanges=new l.xQ,this._intlChanges=ne.changes.subscribe(()=>{bt.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(ne){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get selected(){return this._selected}set selected(ne){this._selected=ne instanceof pa?ne:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get minDate(){return this._minDate}set minDate(ne){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get maxDate(){return this._maxDate}set maxDate(ne){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get activeDate(){return this._clampedActiveDate}set activeDate(ne){this._clampedActiveDate=this._dateAdapter.clampDate(ne,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(ne){const ye=this._currentView!==ne?ne:null;this._currentView=ne,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),ye&&this.viewChanged.emit(ye)}ngAfterContentInit(){this._calendarHeaderPortal=new yn.C5(this.headerComponent||Br),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(ne){const ye=ne.minDate||ne.maxDate||ne.dateFilter;if(ye&&!ye.firstChange){const Ze=this._getCurrentViewComponent();Ze&&(this._changeDetectorRef.detectChanges(),Ze._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(ne){const ye=ne.value;(this.selected instanceof pa||ye&&!this._dateAdapter.sameDate(ye,this.selected))&&this.selectedChange.emit(ye),this._userSelection.emit(ne)}_yearSelectedInMultiYearView(ne){this.yearSelected.emit(ne)}_monthSelectedInYearView(ne){this.monthSelected.emit(ne)}_goToDateInView(ne,ye){this.activeDate=ne,this.currentView=ye}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(es),t.Y36(g._A,8),t.Y36(g.sG,8),t.Y36(t.sBO))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-calendar"]],viewQuery:function(ne,ye){if(1&ne&&(t.Gf(_t,5),t.Gf(Tr,5),t.Gf(rr,5)),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye.monthView=Ze.first),t.iGM(Ze=t.CRH())&&(ye.yearView=Ze.first),t.iGM(Ze=t.CRH())&&(ye.multiYearView=Ze.first)}},hostAttrs:[1,"mat-calendar"],inputs:{startView:"startView",startAt:"startAt",selected:"selected",minDate:"minDate",maxDate:"maxDate",headerComponent:"headerComponent",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[t._Bn([Bo]),t.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(ne,ye){1&ne&&(t.YNc(0,Aa,0,0,"ng-template",0),t.TgZ(1,"div",1),t.YNc(2,ro,1,8,"mat-month-view",2),t.YNc(3,mo,1,6,"mat-year-view",3),t.YNc(4,Mo,1,6,"mat-multi-year-view",4),t.qZA()),2&ne&&(t.Q6J("cdkPortalOutlet",ye._calendarHeaderPortal),t.xp6(1),t.Q6J("ngSwitch",ye.currentView),t.xp6(1),t.Q6J("ngSwitchCase","month"),t.xp6(1),t.Q6J("ngSwitchCase","year"),t.xp6(1),t.Q6J("ngSwitchCase","multi-year"))},directives:[yn.Pl,u.kH,ee.RF,ee.n9,_t,Tr,rr],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-abbr{text-decoration:none}\n'],encapsulation:2,changeDetection:0}),Ye})();const xn={transformPanel:(0,D.X$)("transformPanel",[(0,D.eR)("void => enter-dropdown",(0,D.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,D.F4)([(0,D.oB)({opacity:0,transform:"scale(1, 0.8)"}),(0,D.oB)({opacity:1,transform:"scale(1, 1)"})]))),(0,D.eR)("void => enter-dialog",(0,D.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,D.F4)([(0,D.oB)({opacity:0,transform:"scale(0.7)"}),(0,D.oB)({transform:"none",opacity:1})]))),(0,D.eR)("* => void",(0,D.jt)("100ms linear",(0,D.oB)({opacity:0})))]),fadeInCalendar:(0,D.X$)("fadeInCalendar",[(0,D.SB)("void",(0,D.oB)({opacity:0})),(0,D.SB)("enter",(0,D.oB)({opacity:1})),(0,D.eR)("void => *",(0,D.jt)("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let Fn=0;const Hn=new t.OlP("mat-datepicker-scroll-strategy"),qn={provide:Hn,deps:[a.aV],useFactory:function(Ye){return()=>Ye.scrollStrategies.reposition()}},wi=(0,g.pj)(class{constructor(Ye){this._elementRef=Ye}});let Li=(()=>{class Ye extends wi{constructor(ne,ye,Ze,bt,yr,Ur){super(ne),this._changeDetectorRef=ye,this._globalModel=Ze,this._dateAdapter=bt,this._rangeSelectionStrategy=yr,this._subscriptions=new _a.w,this._animationDone=new l.xQ,this._actionsPortal=null,this._closeButtonText=Ur.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(ne){const ye=this._model.selection,Ze=ne.value,bt=ye instanceof pa;if(bt&&this._rangeSelectionStrategy){const yr=this._rangeSelectionStrategy.selectionFinished(Ze,ye,ne.event);this._model.updateSelection(yr,this)}else Ze&&(bt||!this._dateAdapter.sameDate(Ze,ye))&&this._model.add(Ze);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(co),t.Y36(g._A),t.Y36(Gi,8),t.Y36(es))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-datepicker-content"]],viewQuery:function(ne,ye){if(1&ne&&t.Gf(un,5),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._calendar=Ze.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(ne,ye){1&ne&&t.WFA("@transformPanel.done",function(){return ye._animationDone.next()}),2&ne&&(t.d8E("@transformPanel",ye._animationState),t.ekj("mat-datepicker-content-touch",ye.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[t.qOj],decls:5,vars:20,consts:[["cdkTrapFocus","",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(ne,ye){1&ne&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-calendar",1),t.NdJ("yearSelected",function(bt){return ye.datepicker._selectYear(bt)})("monthSelected",function(bt){return ye.datepicker._selectMonth(bt)})("viewChanged",function(bt){return ye.datepicker._viewChanged(bt)})("_userSelection",function(bt){return ye._handleUserSelection(bt)}),t.qZA(),t.YNc(2,Va,0,0,"ng-template",2),t.TgZ(3,"button",3),t.NdJ("focus",function(){return ye._closeButtonFocused=!0})("blur",function(){return ye._closeButtonFocused=!1})("click",function(){return ye.datepicker.close()}),t._uU(4),t.qZA(),t.qZA()),2&ne&&(t.ekj("mat-datepicker-content-container-with-actions",ye._actionsPortal),t.xp6(1),t.Q6J("id",ye.datepicker.id)("ngClass",ye.datepicker.panelClass)("startAt",ye.datepicker.startAt)("startView",ye.datepicker.startView)("minDate",ye.datepicker._getMinDate())("maxDate",ye.datepicker._getMaxDate())("dateFilter",ye.datepicker._getDateFilter())("headerComponent",ye.datepicker.calendarHeaderComponent)("selected",ye._getSelected())("dateClass",ye.datepicker.dateClass)("comparisonStart",ye.comparisonStart)("comparisonEnd",ye.comparisonEnd)("@fadeInCalendar","enter"),t.xp6(1),t.Q6J("cdkPortalOutlet",ye._actionsPortal),t.xp6(1),t.ekj("cdk-visually-hidden",!ye._closeButtonFocused),t.Q6J("color",ye.color||"primary"),t.xp6(1),t.Oqu(ye._closeButtonText))},directives:[u.mK,un,ee.mk,yn.Pl,p.lW],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[xn.transformPanel,xn.fadeInCalendar]},changeDetection:0}),Ye})(),Ri=(()=>{class Ye{constructor(ne,ye,Ze,bt,yr,Ur,_n,jn,le){this._overlay=ye,this._ngZone=Ze,this._viewContainerRef=bt,this._dateAdapter=Ur,this._dir=_n,this._model=le,this._inputStateChanges=_a.w.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new t.vpe,this.monthSelected=new t.vpe,this.viewChanged=new t.vpe(!0),this.openedStream=new t.vpe,this.closedStream=new t.vpe,this._opened=!1,this.id="mat-datepicker-"+Fn++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new l.xQ,this._scrollStrategy=yr}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(ne){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(ne){this._color=ne}get touchUi(){return this._touchUi}set touchUi(ne){this._touchUi=(0,h.Ig)(ne)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(ne){const ye=(0,h.Ig)(ne);ye!==this._disabled&&(this._disabled=ye,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(ne){this._restoreFocus=(0,h.Ig)(ne)}get panelClass(){return this._panelClass}set panelClass(ne){this._panelClass=(0,h.du)(ne)}get opened(){return this._opened}set opened(ne){(0,h.Ig)(ne)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(ne){const ye=ne.xPosition||ne.yPosition;if(ye&&!ye.firstChange&&this._overlayRef){const Ze=this._overlayRef.getConfig().positionStrategy;Ze instanceof a._G&&(this._setConnectedPositions(Ze),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(ne){this._model.add(ne)}_selectYear(ne){this.yearSelected.emit(ne)}_selectMonth(ne){this.monthSelected.emit(ne)}_viewChanged(ne){this.viewChanged.emit(ne)}registerInput(ne){return this._inputStateChanges.unsubscribe(),this.datepickerInput=ne,this._inputStateChanges=ne.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(ne){this._actionsPortal=ne}removeActions(ne){ne===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=(0,xt.ht)(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const ye=this._componentRef.instance;ye._startExitAnimation(),ye._animationDone.pipe((0,k.q)(1)).subscribe(()=>this._destroyOverlay())}const ne=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(ne)):ne()}_applyPendingSelection(){var ne,ye;null===(ye=null===(ne=this._componentRef)||void 0===ne?void 0:ne.instance)||void 0===ye||ye._applyPendingSelection()}_forwardContentValues(ne){ne.datepicker=this,ne.color=this.color,ne._actionsPortal=this._actionsPortal}_openOverlay(){this._destroyOverlay();const ne=this.touchUi,ye=this.datepickerInput.getOverlayLabelId(),Ze=new yn.C5(Li,this._viewContainerRef),bt=this._overlayRef=this._overlay.create(new a.X_({positionStrategy:ne?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[ne?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:ne?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(ne?"dialog":"popup")})),yr=bt.overlayElement;yr.setAttribute("role","dialog"),ye&&yr.setAttribute("aria-labelledby",ye),ne&&yr.setAttribute("aria-modal","true"),this._getCloseStream(bt).subscribe(Ur=>{Ur&&Ur.preventDefault(),this.close()}),this._componentRef=bt.attach(Ze),this._forwardContentValues(this._componentRef.instance),ne||this._ngZone.onStable.pipe((0,k.q)(1)).subscribe(()=>bt.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const ne=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(ne)}_setConnectedPositions(ne){const ye="end"===this.xPosition?"end":"start",Ze="start"===ye?"end":"start",bt="above"===this.yPosition?"bottom":"top",yr="top"===bt?"bottom":"top";return ne.withPositions([{originX:ye,originY:yr,overlayX:ye,overlayY:bt},{originX:ye,originY:bt,overlayX:ye,overlayY:yr},{originX:Ze,originY:yr,overlayX:Ze,overlayY:bt},{originX:Ze,originY:bt,overlayX:Ze,overlayY:yr}])}_getCloseStream(ne){return(0,m.T)(ne.backdropClick(),ne.detachments(),ne.keydownEvents().pipe((0,T.h)(ye=>ye.keyCode===f.hY&&!(0,f.Vb)(ye)||this.datepickerInput&&(0,f.Vb)(ye,"altKey")&&ye.keyCode===f.LH)))}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.SBq),t.Y36(a.aV),t.Y36(t.R0b),t.Y36(t.s_b),t.Y36(Hn),t.Y36(g._A,8),t.Y36(S.Is,8),t.Y36(ee.K0,8),t.Y36(co))},Ye.\u0275dir=t.lG2({type:Ye,inputs:{startView:"startView",xPosition:"xPosition",yPosition:"yPosition",startAt:"startAt",color:"color",touchUi:"touchUi",disabled:"disabled",restoreFocus:"restoreFocus",panelClass:"panelClass",opened:"opened",calendarHeaderComponent:"calendarHeaderComponent",dateClass:"dateClass"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[t.TTD]}),Ye})(),Hi=(()=>{class Ye extends Ri{}return Ye.\u0275fac=function(){let Tt;return function(ye){return(Tt||(Tt=t.n5z(Ye)))(ye||Ye)}}(),Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[t._Bn([Bo,{provide:Ri,useExisting:Ye}]),t.qOj],decls:0,vars:0,template:function(ne,ye){},encapsulation:2,changeDetection:0}),Ye})();class Ui{constructor(Tt,ne){this.target=Tt,this.targetElement=ne,this.value=this.target.value}}let ba=(()=>{class Ye{constructor(ne,ye,Ze){this._elementRef=ne,this._dateAdapter=ye,this._dateFormats=Ze,this.dateChange=new t.vpe,this.dateInput=new t.vpe,this.stateChanges=new l.xQ,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=_a.w.EMPTY,this._localeSubscription=_a.w.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=bt=>{const yr=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(bt.value));return!yr||this._matchesFilter(yr)?null:{matDatepickerFilter:!0}},this._minValidator=bt=>{const yr=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(bt.value)),Ur=this._getMinDate();return!Ur||!yr||this._dateAdapter.compareDate(Ur,yr)<=0?null:{matDatepickerMin:{min:Ur,actual:yr}}},this._maxValidator=bt=>{const yr=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(bt.value)),Ur=this._getMaxDate();return!Ur||!yr||this._dateAdapter.compareDate(Ur,yr)>=0?null:{matDatepickerMax:{max:Ur,actual:yr}}},this._lastValueValid=!1,this._localeSubscription=ye.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(ne){this._assignValueProgrammatically(ne)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(ne){const ye=(0,h.Ig)(ne),Ze=this._elementRef.nativeElement;this._disabled!==ye&&(this._disabled=ye,this.stateChanges.next(void 0)),ye&&this._isInitialized&&Ze.blur&&Ze.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(ne){this._model=ne,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(ye=>{if(this._shouldHandleChangeEvent(ye)){const Ze=this._getValueFromModel(ye.selection);this._lastValueValid=this._isValidValue(Ze),this._cvaOnChange(Ze),this._onTouched(),this._formatValue(Ze),this.dateInput.emit(new Ui(this,this._elementRef.nativeElement)),this.dateChange.emit(new Ui(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(ne){(function(Ye,Tt){const ne=Object.keys(Ye);for(let ye of ne){const{previousValue:Ze,currentValue:bt}=Ye[ye];if(!Tt.isDateInstance(Ze)||!Tt.isDateInstance(bt))return!0;if(!Tt.sameDate(Ze,bt))return!0}return!1})(ne,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(ne){this._validatorOnChange=ne}validate(ne){return this._validator?this._validator(ne):null}writeValue(ne){this._assignValueProgrammatically(ne)}registerOnChange(ne){this._cvaOnChange=ne}registerOnTouched(ne){this._onTouched=ne}setDisabledState(ne){this.disabled=ne}_onKeydown(ne){ne.altKey&&ne.keyCode===f.JH&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),ne.preventDefault())}_onInput(ne){const ye=this._lastValueValid;let Ze=this._dateAdapter.parse(ne,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(Ze),Ze=this._dateAdapter.getValidDateOrNull(Ze),this._dateAdapter.sameDate(Ze,this.value)?(ne&&!this.value&&this._cvaOnChange(Ze),ye!==this._lastValueValid&&this._validatorOnChange()):(this._assignValue(Ze),this._cvaOnChange(Ze),this.dateInput.emit(new Ui(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Ui(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(ne){this._elementRef.nativeElement.value=ne?this._dateAdapter.format(ne,this._dateFormats.display.dateInput):""}_assignValue(ne){this._model?(this._assignValueToModel(ne),this._pendingValue=null):this._pendingValue=ne}_isValidValue(ne){return!ne||this._dateAdapter.isValid(ne)}_parentDisabled(){return!1}_assignValueProgrammatically(ne){ne=this._dateAdapter.deserialize(ne),this._lastValueValid=this._isValidValue(ne),ne=this._dateAdapter.getValidDateOrNull(ne),this._assignValue(ne),this._formatValue(ne)}_matchesFilter(ne){const ye=this._getDateFilter();return!ye||ye(ne)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.SBq),t.Y36(g._A,8),t.Y36(g.sG,8))},Ye.\u0275dir=t.lG2({type:Ye,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[t.TTD]}),Ye})();const ca={provide:C.JU,useExisting:(0,t.Gpc)(()=>da),multi:!0},ua={provide:C.Cf,useExisting:(0,t.Gpc)(()=>da),multi:!0};let da=(()=>{class Ye extends ba{constructor(ne,ye,Ze,bt){super(ne,ye,Ze),this._formField=bt,this._closedSubscription=_a.w.EMPTY,this._validator=C.kI.compose(super._getValidators())}set matDatepicker(ne){ne&&(this._datepicker=ne,this._closedSubscription=ne.closedStream.subscribe(()=>this._onTouched()),this._registerModel(ne.registerInput(this)))}get min(){return this._min}set min(ne){const ye=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne));this._dateAdapter.sameDate(ye,this._min)||(this._min=ye,this._validatorOnChange())}get max(){return this._max}set max(ne){const ye=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(ne));this._dateAdapter.sameDate(ye,this._max)||(this._max=ye,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(ne){const ye=this._matchesFilter(this.value);this._dateFilter=ne,this._matchesFilter(this.value)!==ye&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(ne){return ne}_assignValueToModel(ne){this._model&&this._model.updateSelection(ne,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(ne){return ne.source!==this}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.SBq),t.Y36(g._A,8),t.Y36(g.sG,8),t.Y36(s.G_,8))},Ye.\u0275dir=t.lG2({type:Ye,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(ne,ye){1&ne&&t.NdJ("input",function(bt){return ye._onInput(bt.target.value)})("change",function(){return ye._onChange()})("blur",function(){return ye._onBlur()})("keydown",function(bt){return ye._onKeydown(bt)}),2&ne&&(t.Ikx("disabled",ye.disabled),t.uIk("aria-haspopup",ye._datepicker?"dialog":null)("aria-owns",(null==ye._datepicker?null:ye._datepicker.opened)&&ye._datepicker.id||null)("min",ye.min?ye._dateAdapter.toIso8601(ye.min):null)("max",ye.max?ye._dateAdapter.toIso8601(ye.max):null)("data-mat-calendar",ye._datepicker?ye._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[t._Bn([ca,ua,{provide:Qe,useExisting:Ye}]),t.qOj]}),Ye})(),Ua=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275dir=t.lG2({type:Ye,selectors:[["","matDatepickerToggleIcon",""]]}),Ye})(),no=(()=>{class Ye{constructor(ne,ye,Ze){this._intl=ne,this._changeDetectorRef=ye,this._stateChanges=_a.w.EMPTY;const bt=Number(Ze);this.tabIndex=bt||0===bt?bt:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(ne){this._disabled=(0,h.Ig)(ne)}ngOnChanges(ne){ne.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(ne){this.datepicker&&!this.disabled&&(this.datepicker.open(),ne.stopPropagation())}_watchStateChanges(){const ne=this.datepicker?this.datepicker.stateChanges:(0,Co.of)(),ye=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:(0,Co.of)(),Ze=this.datepicker?(0,m.T)(this.datepicker.openedStream,this.datepicker.closedStream):(0,Co.of)();this._stateChanges.unsubscribe(),this._stateChanges=(0,m.T)(this._intl.changes,ne,ye,Ze).subscribe(()=>this._changeDetectorRef.markForCheck())}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(es),t.Y36(t.sBO),t.$8M("tabindex"))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-datepicker-toggle"]],contentQueries:function(ne,ye,Ze){if(1&ne&&t.Suo(Ze,Ua,5),2&ne){let bt;t.iGM(bt=t.CRH())&&(ye._customIcon=bt.first)}},viewQuery:function(ne,ye){if(1&ne&&t.Gf(ga,5),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._button=Ze.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(ne,ye){1&ne&&t.NdJ("click",function(bt){return ye._open(bt)}),2&ne&&(t.uIk("tabindex",null)("data-mat-calendar",ye.datepicker?ye.datepicker.id:null),t.ekj("mat-datepicker-toggle-active",ye.datepicker&&ye.datepicker.opened)("mat-accent",ye.datepicker&&"accent"===ye.datepicker.color)("mat-warn",ye.datepicker&&"warn"===ye.datepicker.color))},inputs:{tabIndex:"tabIndex",disabled:"disabled",datepicker:["for","datepicker"],ariaLabel:["aria-label","ariaLabel"],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[t.TTD],ngContentSelectors:As,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(ne,ye){1&ne&&(t.F$t(bs),t.TgZ(0,"button",0,1),t.YNc(2,Ja,2,0,"svg",2),t.Hsn(3),t.qZA()),2&ne&&(t.Q6J("disabled",ye.disabled)("disableRipple",ye.disableRipple),t.uIk("aria-haspopup",ye.datepicker?"dialog":null)("aria-label",ye.ariaLabel||ye._intl.openCalendarLabel)("tabindex",ye.disabled?-1:ye.tabIndex),t.xp6(2),t.Q6J("ngIf",!ye._customIcon))},directives:[p.lW,ee.O5],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),Ye})(),$r=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({providers:[es,qn],imports:[[ee.ez,p.ot,a.U8,u.rt,yn.eL,g.BQ],c.ZD]}),Ye})();const dn=["input"],hn=function(Ye){return{enterDuration:Ye}},wn=["*"],Ln=new t.OlP("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}});let En=0;const Yn={provide:C.JU,useExisting:(0,t.Gpc)(()=>oi),multi:!0};class Jn{constructor(Tt,ne){this.source=Tt,this.value=ne}}const si=new t.OlP("MatRadioGroup");let nn=(()=>{class Ye{constructor(ne){this._changeDetector=ne,this._value=null,this._name="mat-radio-group-"+En++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new t.vpe}get name(){return this._name}set name(ne){this._name=ne,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(ne){this._labelPosition="before"===ne?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(ne){this._value!==ne&&(this._value=ne,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(ne){this._selected=ne,this.value=ne?ne.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(ne){this._disabled=(0,h.Ig)(ne),this._markRadiosForCheck()}get required(){return this._required}set required(ne){this._required=(0,h.Ig)(ne),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(ne=>{ne.name=this.name,ne._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(ye=>{ye.checked=this.value===ye.value,ye.checked&&(this._selected=ye)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Jn(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(ne=>ne._markForCheck())}writeValue(ne){this.value=ne,this._changeDetector.markForCheck()}registerOnChange(ne){this._controlValueAccessorChangeFn=ne}registerOnTouched(ne){this.onTouched=ne}setDisabledState(ne){this.disabled=ne,this._changeDetector.markForCheck()}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(t.sBO))},Ye.\u0275dir=t.lG2({type:Ye,inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"}}),Ye})(),oi=(()=>{class Ye extends nn{}return Ye.\u0275fac=function(){let Tt;return function(ye){return(Tt||(Tt=t.n5z(Ye)))(ye||Ye)}}(),Ye.\u0275dir=t.lG2({type:Ye,selectors:[["mat-radio-group"]],contentQueries:function(ne,ye,Ze){if(1&ne&&t.Suo(Ze,Ai,5),2&ne){let bt;t.iGM(bt=t.CRH())&&(ye._radios=bt)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[t._Bn([Yn,{provide:si,useExisting:Ye}]),t.qOj]}),Ye})();class Bn{constructor(Tt){this._elementRef=Tt}}const Zn=(0,g.Kr)((0,g.sb)(Bn));let ii=(()=>{class Ye extends Zn{constructor(ne,ye,Ze,bt,yr,Ur,_n,jn){super(ye),this._changeDetector=Ze,this._focusMonitor=bt,this._radioDispatcher=yr,this._providerOverride=_n,this._uniqueId="mat-radio-"+ ++En,this.id=this._uniqueId,this.change=new t.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=ne,this._noopAnimations="NoopAnimations"===Ur,jn&&(this.tabIndex=(0,h.su)(jn,0)),this._removeUniqueSelectionListener=yr.listen((le,E)=>{le!==this.id&&E===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(ne){const ye=(0,h.Ig)(ne);this._checked!==ye&&(this._checked=ye,ye&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!ye&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),ye&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(ne){this._value!==ne&&(this._value=ne,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===ne),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(ne){this._labelPosition=ne}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(ne){this._setDisabled((0,h.Ig)(ne))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(ne){this._required=(0,h.Ig)(ne)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(ne){this._color=ne}get inputId(){return`${this.id||this._uniqueId}-input`}focus(ne,ye){ye?this._focusMonitor.focusVia(this._inputElement,ye,ne):this._inputElement.nativeElement.focus(ne)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(ne=>{!ne&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Jn(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(ne){ne.stopPropagation()}_onInputInteraction(ne){if(ne.stopPropagation(),!this.checked&&!this.disabled){const ye=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),ye&&this.radioGroup._emitChangeEvent())}}_setDisabled(ne){this._disabled!==ne&&(this._disabled=ne,this._changeDetector.markForCheck())}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(nn),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(u.tE),t.Y36(v.A8),t.Y36(String),t.Y36(void 0),t.Y36(String))},Ye.\u0275dir=t.lG2({type:Ye,viewQuery:function(ne,ye){if(1&ne&&t.Gf(dn,5),2&ne){let Ze;t.iGM(Ze=t.CRH())&&(ye._inputElement=Ze.first)}},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[t.qOj]}),Ye})(),Ai=(()=>{class Ye extends ii{constructor(ne,ye,Ze,bt,yr,Ur,_n,jn){super(ne,ye,Ze,bt,yr,Ur,_n,jn)}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(si,8),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(u.tE),t.Y36(v.A8),t.Y36(ct.Qb,8),t.Y36(Ln,8),t.$8M("tabindex"))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(ne,ye){1&ne&&t.NdJ("focus",function(){return ye._inputElement.nativeElement.focus()}),2&ne&&(t.uIk("tabindex",null)("id",ye.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),t.ekj("mat-radio-checked",ye.checked)("mat-radio-disabled",ye.disabled)("_mat-animation-noopable",ye._noopAnimations)("mat-primary","primary"===ye.color)("mat-accent","accent"===ye.color)("mat-warn","warn"===ye.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[t.qOj],ngContentSelectors:wn,decls:13,vars:20,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(ne,ye){if(1&ne&&(t.F$t(),t.TgZ(0,"label",0,1),t.TgZ(2,"span",2),t._UZ(3,"span",3),t._UZ(4,"span",4),t.TgZ(5,"input",5,6),t.NdJ("change",function(bt){return ye._onInputInteraction(bt)})("click",function(bt){return ye._onInputClick(bt)}),t.qZA(),t.TgZ(7,"span",7),t._UZ(8,"span",8),t.qZA(),t.qZA(),t.TgZ(9,"span",9),t.TgZ(10,"span",10),t._uU(11,"\xa0"),t.qZA(),t.Hsn(12),t.qZA(),t.qZA()),2&ne){const Ze=t.MAs(1);t.uIk("for",ye.inputId),t.xp6(5),t.Q6J("id",ye.inputId)("checked",ye.checked)("disabled",ye.disabled)("tabIndex",ye.tabIndex)("required",ye.required),t.uIk("name",ye.name)("value",ye.value)("aria-label",ye.ariaLabel)("aria-labelledby",ye.ariaLabelledby)("aria-describedby",ye.ariaDescribedby),t.xp6(2),t.Q6J("matRippleTrigger",Ze)("matRippleDisabled",ye._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",t.VKq(18,hn,ye._noopAnimations?0:150)),t.xp6(2),t.ekj("mat-radio-label-before","before"==ye.labelPosition)}},directives:[g.wG],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),Ye})(),zi=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({imports:[[g.si,g.BQ],g.BQ]}),Ye})();function Rn(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){return t.CHM(ne),t.oxw(2).openFiltersDialog()}),t.TgZ(1,"span"),t._uU(2,"Data Filters"),t.qZA(),t.qZA()}2&Ye&&t.Q6J("color","warn")}function ji(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"mat-radio-button",40,41),t.NdJ("click",function(Ze){t.CHM(ne);const bt=t.MAs(1);return t.oxw(2).checkState(Ze,bt)}),t._uU(2,"YoY (Year on Year)"),t.qZA()}}function Pi(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"mat-radio-button",42,43),t.NdJ("click",function(Ze){t.CHM(ne);const bt=t.MAs(1);return t.oxw(2).checkState(Ze,bt)}),t._uU(2,"QoQ (Quarter on Quarter)"),t.qZA()}}function xi(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"mat-radio-button",44,45),t.NdJ("click",function(Ze){t.CHM(ne);const bt=t.MAs(1);return t.oxw(2).checkState(Ze,bt)}),t._uU(2,"MoM (Month on Month)"),t.qZA()}}function Vi(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"mat-radio-button",46,47),t.NdJ("click",function(Ze){t.CHM(ne);const bt=t.MAs(1);return t.oxw(2).checkState(Ze,bt)}),t._uU(2,"WoW (Week on Week)"),t.qZA()}}function Di(Ye,Tt){1&Ye&&(t.TgZ(0,"div",48),t.TgZ(1,"button",49),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"circle",51),t._UZ(4,"path",52),t.qZA(),t._uU(5," Processing "),t.qZA(),t.qZA())}function ra(Ye,Tt){if(1&Ye&&(t.TgZ(0,"div",53),t._UZ(1,"plotly-plot",54),t.qZA()),2&Ye){const ne=t.oxw(2);t.xp6(1),t.Q6J("data",ne.graph.data)("layout",ne.graph.layout)("config",ne.graph.config)}}function li(Ye,Tt){if(1&Ye){const ne=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"div",22),t.TgZ(2,"mat-form-field",23),t.TgZ(3,"mat-label"),t._uU(4,"From"),t.qZA(),t._UZ(5,"input",24),t._UZ(6,"mat-datepicker-toggle",25),t.TgZ(7,"mat-datepicker",26,27),t.NdJ("monthSelected",function(Ze){t.CHM(ne);const bt=t.MAs(8);return t.oxw().updateMinDate(Ze,bt)}),t.qZA(),t.qZA(),t.TgZ(9,"mat-form-field",23),t.TgZ(10,"mat-label"),t._uU(11,"To"),t.qZA(),t._UZ(12,"input",24),t._UZ(13,"mat-datepicker-toggle",25),t.TgZ(14,"mat-datepicker",26,28),t.NdJ("monthSelected",function(Ze){t.CHM(ne);const bt=t.MAs(15);return t.oxw().updateMaxDate(Ze,bt)}),t.qZA(),t.qZA(),t.YNc(16,Rn,3,1,"button",29),t.qZA(),t.TgZ(17,"div",30),t.TgZ(18,"mat-radio-group",31),t.NdJ("ngModelChange",function(Ze){return t.CHM(ne),t.oxw().selectedGraphType=Ze}),t.YNc(19,ji,3,0,"mat-radio-button",32),t.YNc(20,Pi,3,0,"mat-radio-button",33),t.YNc(21,xi,3,0,"mat-radio-button",34),t.YNc(22,Vi,3,0,"mat-radio-button",35),t.qZA(),t.qZA(),t.YNc(23,Di,6,0,"div",36),t.YNc(24,ra,2,3,"div",37),t.TgZ(25,"div",38),t._uU(26,"Legend can be selected/de-selected."),t.qZA(),t.qZA()}if(2&Ye){const ne=t.MAs(8),ye=t.MAs(15),Ze=t.oxw();t.xp6(5),t.Q6J("value",Ze.filters.selectedMinDate)("matDatepicker",ne)("min",null==Ze.filters?null:Ze.filters.minDate)("max",null==Ze.filters?null:Ze.filters.maxDate),t.xp6(1),t.Q6J("for",ne),t.xp6(6),t.Q6J("value",Ze.filters.selectedMaxDate)("matDatepicker",ye)("min",null==Ze.filters?null:Ze.filters.minDate)("max",null==Ze.filters?null:Ze.filters.maxDate),t.xp6(1),t.Q6J("for",ye),t.xp6(3),t.Q6J("ngIf",null==Ze.graphData?null:Ze.graphData.type),t.xp6(2),t.Q6J("ngModel",Ze.selectedGraphType),t.xp6(1),t.Q6J("ngIf",null==Ze.variableDetails?null:Ze.variableDetails.yoy),t.xp6(1),t.Q6J("ngIf",null==Ze.variableDetails?null:Ze.variableDetails.qoq),t.xp6(1),t.Q6J("ngIf",null==Ze.variableDetails?null:Ze.variableDetails.mom),t.xp6(1),t.Q6J("ngIf",null==Ze.variableDetails?null:Ze.variableDetails.wow),t.xp6(1),t.Q6J("ngIf",Ze.loading),t.xp6(1),t.Q6J("ngIf",(null==Ze.graph||null==Ze.graph.data?null:Ze.graph.data.length)&&!Ze.loading)}}function Qi(Ye,Tt){1&Ye&&(t.TgZ(0,"div",55),t.TgZ(1,"span",56),t._uU(2,"No data available"),t.qZA(),t.qZA())}const qa={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},No=[{path:"graph",component:(()=>{class Ye extends class{constructor(Tt,ne,ye){this.plotlyService=Tt,this.matDialog=ne,this._snackBar=ye,this.filters={minDate:null,maxDate:null,selectedMinDate:null,selectedMaxDate:null},this.loading=!1,this.chartConfig={type:"scatter",mode:"lines",name:"Rupees (Crore)",line:{color:"#17BECF"}},this.selectedFilters={},this.availableFilters=[],this.selectedGraphType=null,this.varId=0}_prepareFilters(Tt){var ne;const ye=(Tt.x||[]).map(Ze=>new Date(Ze));this.filters.maxDate=new Date(Math.max.apply(null,ye)),this.filters.selectedMaxDate=new Date(Math.max.apply(null,ye)),this.filters.minDate=new Date(Math.min.apply(null,ye)),this.filters.selectedMinDate=new Date(Math.min.apply(null,ye)),"{}"===JSON.stringify(null===(ne=this.graphData)||void 0===ne?void 0:ne.type[0])?(delete this.graphData.type,this.loading=!1):this.graphData.type.forEach(Ze=>{this.availableFilters.some(bt=>JSON.stringify(bt)===JSON.stringify(Ze))||this.availableFilters.push(Ze)})}updateMinDate(Tt,ne){var ye,Ze,bt,yr;ne.close();const Ur=new Date(Tt);if(Ur>this.filters.selectedMaxDate)return this._snackBar.open("From Date can not be more then To Date"),void(this.filters.selectedMinDate=this.filters.minDate);if(this.filters.selectedMinDate=Ur,null===(Ze=null===(ye=this.graphData)||void 0===ye?void 0:ye.x)||void 0===Ze?void 0:Ze.length){const{x:_n,y:jn}=this.sortFromData(this.graphData,Ur);this.graph.data=[],this.graph.data.push(Object.assign({x:_n,y:jn},this.chartConfig))}else if(null===(yr=null===(bt=this.rupeesData)||void 0===bt?void 0:bt.x)||void 0===yr?void 0:yr.length){const{x:_n,y:jn}=this.sortFromData(this.rupeesData,Ur);this.graph.data=[],this.graph.data.push(Object.assign({x:_n,y:jn},{type:"scatter",mode:"lines",name:"Rupees (Crore)",line:{color:"#17BECF"}}));const le=this.sortFromData(this.dollarData,Ur);this.graph.data.push(Object.assign({x:le.x,y:le.y},{type:"scatter",mode:"lines",name:"Dollar (Million)",line:{color:"#f43f5e"}}))}}updateMaxDate(Tt,ne){var ye,Ze,bt,yr;ne.close();const Ur=new Date(Tt);if(Ur<this.filters.selectedMinDate)return this._snackBar.open("To Date can not be less then From Date"),void(this.filters.selectedMaxDate=this.filters.maxDate);if(this.filters.selectedMaxDate=Ur,null===(Ze=null===(ye=this.graphData)||void 0===ye?void 0:ye.x)||void 0===Ze?void 0:Ze.length){const{x:_n,y:jn}=this.sortToData(this.graphData,Ur);this.graph.data=[],this.graph.data.push(Object.assign({x:_n,y:jn},this.chartConfig))}else if(null===(yr=null===(bt=this.rupeesData)||void 0===bt?void 0:bt.x)||void 0===yr?void 0:yr.length){const{x:_n,y:jn}=this.sortToData(this.rupeesData,Ur);this.graph.data=[],this.graph.data.push(Object.assign({x:_n,y:jn},{type:"scatter",mode:"lines",name:"Rupees (Crore)",line:{color:"#17BECF"}}));const le=this.sortToData(this.dollarData,Ur);this.graph.data.push(Object.assign({x:le.x,y:le.y},{type:"scatter",mode:"lines",name:"Dollar (Million)",line:{color:"#f43f5e"}}))}}exportGraph(){const Tt=this.plotlyService.getInstanceByDivId("plotly-graph");this.plotlyService.getPlotly().then(ne=>{ne.downloadImage(Tt,{filename:"chart-data.png"})})}convertChartDataToCSV(Tt){var ne,yr,Ur;Ur=Tt||null,yr=Tt.lineDelimiter||"\n",Object.keys(Ur),ne=this.graph.layout.title.text,ne+=yr,ne+=`Date,${this.graphData.unit}`,ne+=yr;for(var _n=0;_n<Ur.x.length;_n++)ne+=`${Ur.x[_n]},${Ur.y[_n]}`,ne+=yr;return ne+yr}exportGraphasCSV(){for(var Tt="",ne=0;ne<this.graph.data.length;ne++)Tt+=this.convertChartDataToCSV(this.graph.data[ne]);if(null==Tt)return;Tt.match(/^data:text\/csv/i)||(Tt="data:text/csv;charset=utf-8,"+Tt);let Ze=encodeURI(Tt),bt=document.createElement("a");bt.setAttribute("href",Ze),bt.setAttribute("download","chart-data.csv"),document.body.appendChild(bt),bt.click(),document.body.removeChild(bt)}sortToData(Tt,ne){const ye=[],Ze=[],bt=Tt.y;return Tt.x.forEach((yr,Ur)=>{ne>new Date(yr)&&this.filters.selectedMinDate<new Date(yr)&&(ye.push(yr),Ze.push(bt[Ur]))}),{x:ye,y:Ze}}sortFromData(Tt,ne){const ye=[],Ze=[],bt=Tt.y;return Tt.x.forEach((yr,Ur)=>{ne<new Date(yr)&&this.filters.selectedMaxDate>new Date(yr)&&(ye.push(yr),Ze.push(bt[Ur]))}),{x:ye,y:Ze}}_prepareChartData(Tt={},ne="y Axis",ye="x Axis",Ze="Graph"){this.graph={data:[],layout:{hovermode:"x unified",title:{text:Ze,font:{size:24,color:"white"}},margin:{l:60,r:20,b:75,t:50,pad:4},autosize:!0,paper_bgcolor:"rgb(30,41,59)",plot_bgcolor:"rgb(30,41,59)",showlegend:!0,yaxis:{color:"#fff",title:{text:ne,font:{color:"#fff"}},fixedrange:!0},xaxis:{color:"#fff",title:{text:ye,font:{color:"#fff"}}},legend:Object.assign({xanchor:"center",yanchor:"top",x:.2,y:-.5,font:{color:"#fff"},margin:{t:20,b:20}},Tt),images:[{x:1,y:-.4,sizex:.1,sizey:.1,source:"assets/images/logo/logo-for-dark.svg",xanchor:"right",xref:"paper",yanchor:"top",yref:"paper"}]},config:{displayModeBar:!1,responsive:!0}}}openFiltersDialog(){this.matDialog.open(ze,{width:"70%",data:{filters:this.availableFilters,selected:this.selectedFilters,varId:this.varId}}).afterClosed().subscribe(ne=>{this.selectedFilters=ne.data,ne.response&&this.plotFilterCombinations(ne.response,ne.clearCall)})}showVariableNotes(){}plotFilterCombinations(Tt,ne=!1){const ye=this.graphData.type;let{x:Ze,y:bt}=Tt;if(ne)return this.graph.data=[],this.graphData=Tt,Ze=[],bt=[],this.graph.data.push(Object.assign({x:Ze,y:bt},this.chartConfig)),void(this.graphData.type=ye);this.graphData=Tt;let yr={};if(Tt.type){const _n=Tt.type;let jn={};yr[JSON.stringify(_n[0])]={x:[Ze[0]],y:[bt[0]]};for(let le=1;le<_n.length;le++){const E=JSON.stringify(_n[le]);yr[E]?(yr[E].x.push(Ze[le]),yr[E].y.push(bt[le])):(jn[JSON.stringify(_n[0])]={x:[Ze[0],...Ze],y:[bt[0],...bt]},yr[E]={x:[Ze[0]],y:[bt[0]]})}}this.graphData.type=ye,Object.keys(yr).forEach(_n=>{const jn=JSON.parse(_n),le=Object.keys(jn);let E="";le.forEach(q=>{""!=E&&(E+=", "),E+=` ${jn[q]} : ${q}`}),E.length>80&&(E=E.substring(0,70)+"<br>"+E.substring(70,E.length));const{x:O,y:B}=yr[_n];this.graph.data.push({x:O,y:B,name:E})})}checkState(Tt,ne){Tt.preventDefault(),this.selectedGraphType==ne.value?(ne.checked=!1,this.selectedGraphType=null,this.graphFilterChanged(!0)):(ne.checked=!0,this.selectedGraphType=ne.value,this.graphFilterChanged())}graphFilterChanged(Tt=!1){let ne={x:[],y:[]};1==this.selectedGraphType?ne=this.transformDataForYoY():2==this.selectedGraphType?ne=this.transformDataForMoM():3==this.selectedGraphType?ne=this.transformDataForQoQ():4==this.selectedGraphType?ne=this.transformDataForWoW():Tt&&(ne=this.transformDataForDoD()),this.graph.data=[];const{x:ye,y:Ze}=ne;let bt=[],yr="%{y}";Tt||(yr="<i>%{text:.2f}%<i>",Ze.forEach((Ur,_n)=>{if(Ze[_n-1]){let jn=Ze[_n]-Ze[_n-1];jn=jn/Ze[_n-1]*100,bt.push(jn)}else bt.push(0)})),this.graph.data.push(Object.assign({x:ye,y:Ze,hovertemplate:yr,text:bt},{type:"scatter",mode:"lines",name:this.graphData.unit,line:{color:"#17BECF"}}))}transformDataForYoY(){const Tt=this.graphData;let ne=[];Tt.x.forEach((bt,yr)=>{const Ur=new Date(bt).getFullYear();Tt.x[yr+1]?Ur!==new Date(Tt.x[yr+1]).getFullYear()&&ne.push(yr):ne.push(yr)});let ye=[],Ze=[];return ne.forEach(bt=>{ye.push(Tt.x[bt]),Ze.push(Tt.y[bt])}),{x:ye,y:Ze}}transformDataForMoM(){const Tt=this.graphData;let ne=[];Tt.x.forEach((bt,yr)=>{const Ur=new Date(bt).getMonth();Tt.x[yr+1]?Ur!==new Date(Tt.x[yr+1]).getMonth()&&ne.push(yr):ne.push(yr)});let ye=[],Ze=[];return ne.forEach(bt=>{ye.push(Tt.x[bt]),Ze.push(Tt.y[bt])}),{x:ye,y:Ze}}transformDataForWoW(){const Tt=this.graphData;let ne=[0],ye=new Date(Tt.x[0]).getDay();Tt.x.forEach((yr,Ur)=>{if(Tt.x[Ur+1]){const _n=new Date(Tt.x[Ur+1]).getDay();(ye>_n||_n-ye>=6)&&(ne.push(Ur),ye=_n)}else ne.push(Ur)});let Ze=[],bt=[];return ne.forEach(yr=>{Ze.push(Tt.x[yr]),bt.push(Tt.y[yr])}),{x:Ze,y:bt}}transformDataForDoD(){return this.graph.data=[],{x:this.graphData.x,y:this.graphData.y}}transformDataForQoQ(){const Tt=this.graphData;let ne=[],ye=1;Tt.x.forEach((yr,Ur)=>{const _n=new Date(yr).getMonth();if(ye=_n<=3?1:_n<=7?2:3,Tt.x[Ur+1]){const jn=new Date(Tt.x[Ur+1]).getMonth();1===ye?jn>3&&ne.push(Ur):2===ye?(jn>7||jn<4)&&ne.push(Ur):jn<8&&ne.push(Ur)}else ne.push(Ur)});let Ze=[],bt=[];return ne.forEach(yr=>{Ze.push(Tt.x[yr]),bt.push(Tt.y[yr])}),{x:Ze,y:bt}}}{constructor(ne,ye,Ze,bt,yr,Ur){super(Ze,bt,yr),this._dashboardService=ne,this._navigationService=ye,this.plotlyService=Ze,this.matDialog=bt,this._snackBar=yr,this.cookieService=Ur,this.defaultRegion="national",this.regions=Je,this.pageTitle="Component",this.isDataAvailable=!0,this.userCookie||this.showFirstTimePopup()}ngOnInit(){this._navigationService.currentActiveRoute.subscribe(ne=>{this.varId=ne.var_id,this.pageTitle=ne.title,this.varId&&(this.isDataAvailable=!0,this.getReportData(),this.getVariableNotes(),this.getVariableDetails())})}getReportData(){this.loading=!0,this._dashboardService.getData(this.varId).subscribe(ne=>{var ye;if("success"===ne.type&&ne.data.x){this.graphData=ne.data,this._prepareChartData({},null===(ye=this.graphData)||void 0===ye?void 0:ye.unit,"Date",this.pageTitle);const{x:Ze,y:bt}=ne.data;this.chartConfig.name=this.graphData.unit,this.graph.data.push(Object.assign({x:Ze,y:bt},this.chartConfig)),this.availableFilters=[],this.selectedFilters={},this._prepareFilters(ne.data)}else this.graphData={},this.graph.data=[],this.isDataAvailable=!1,this.loading=!1})}getVariableNotes(){this.variableNotes=null,this._dashboardService.getVariableNotes(this.varId).subscribe(ne=>{"success"===ne.type&&"No data exist"!==ne.message&&(this.variableNotes=ne.data)})}getVariableDetails(){this.variableDetails=null,this._dashboardService.getVariableDetails(this.varId).subscribe(ne=>{"success"===ne.type&&"No data exist"!==ne.message&&(this.variableDetails=ne.data)})}showVariableNotes(){this.matDialog.open(pr,{width:"70%",data:{pageTitle:this.pageTitle,variableNotes:this.variableNotes}})}showFirstTimePopup(){this.matDialog.open(cr,{width:"70%",disableClose:!0})}_prepareFilters(ne){var ye;const Ze=(ne.x||[]).map(bt=>new Date(bt));if(this.filters.maxDate=new Date(Math.max.apply(null,Ze)),this.filters.selectedMaxDate=new Date(Math.max.apply(null,Ze)),this.filters.minDate=new Date(Math.min.apply(null,Ze)),this.filters.selectedMinDate=new Date(Math.min.apply(null,Ze)),"{}"===JSON.stringify(null===(ye=this.graphData)||void 0===ye?void 0:ye.type[0]))delete this.graphData.type,this.loading=!1;else{const bt=Object.keys(this.graphData.type[0]);for(let _n=0;_n<bt.length;_n++)this.selectedFilters[bt[_n]]=this.graphData.type[0][bt[_n]];let yr=Object.keys(this.selectedFilters),Ur={};yr.forEach(_n=>{Ur[_n]=[this.selectedFilters[_n]]}),this._dashboardService.getFilteredData(Ur,this.varId).subscribe(_n=>{if("success"===_n.type&&_n.data){this.graph.data=[],this.graphData.x=_n.data.x,this.graphData.y=_n.data.y;let jn="%{y}";const{x:le,y:E}=_n.data;let O="";Object.keys(this.selectedFilters).forEach(q=>{""!=O&&(O+=", "),O+=`${this.selectedFilters[q]} : ${q} `}),O.length>80&&(O=O.substring(0,80)+"<br>"+O.substring(80,O.length)),this.graph.data.push({x:le,y:E,name:O,hovertemplate:jn}),this.loading=!1}}),this.graphData.type.forEach(_n=>{this.availableFilters.some(jn=>JSON.stringify(jn)===JSON.stringify(_n))||this.availableFilters.push(_n)})}}get userCookie(){return this.cookieService.get("cena")}}return Ye.\u0275fac=function(ne){return new(ne||Ye)(t.Y36(n),t.Y36(br.f),t.Y36(Sr),t.Y36(_.uw),t.Y36(Ma),t.Y36(pt))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["app-graph-component"]],features:[t._Bn([{provide:g.sG,useValue:qa}]),t.qOj],decls:34,vars:10,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"flex","gap-2","justify-center","items-center"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],["matTooltip","About this indicator",1,"cursor-pointer",3,"svgIcon","color","click"],[1,"flex","items-center","ml-6"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"color","matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["menu","matMenu"],["mat-menu-item",""],[3,"click"],[1,"sm:hidden"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"svgIcon"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","w-full","mt-8"],["class","sm:col-span-2 lg:col-span-3 dark flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden",4,"ngIf"],["class","sm:col-span-2 lg:col-span-3 dark flex-auto bg-card shadow rounded-2xl overflow-hidden text-center",4,"ngIf"],[1,"sm:col-span-2","lg:col-span-3","dark","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","justify-around","flex-wrap","mt-10"],["appearance","fill",1,"w-60","ml-5"],["matInput","",3,"value","matDatepicker","min","max"],["matSuffix","",3,"for"],["startView","multi-year",3,"monthSelected"],["fromPicker",""],["toPicker",""],["class","w-60 mt-7 ml-5 mr-5 rounded-lg","mat-raised-button","",3,"color","click",4,"ngIf"],[1,"flex","justify-center","m-5"],["aria-label","Select an option",3,"ngModel","ngModelChange"],["class","mr-3","value","1",3,"click",4,"ngIf"],["class","mr-3","value","3",3,"click",4,"ngIf"],["class","mr-3","value","2",3,"click",4,"ngIf"],["value","4",3,"click",4,"ngIf"],["class","flex items-center justify-center m-10",4,"ngIf"],["class","flex flex-col flex-auto mt-5 h-450",4,"ngIf"],[1,"text-red-600","ml-5","font-medium","text-sm","float-left"],["mat-raised-button","",1,"w-60","mt-7","ml-5","mr-5","rounded-lg",3,"color","click"],["value","1",1,"mr-3",3,"click"],["YoY",""],["value","3",1,"mr-3",3,"click"],["DoD",""],["value","2",1,"mr-3",3,"click"],["MoM",""],["value","4",3,"click"],["WoW",""],[1,"flex","items-center","justify-center","m-10"],[1,"inline-flex","items-center","px-4","py-2","font-semibold","leading-6","text-sm","shadow","rounded-md","text-white","bg-indigo-500","hover:bg-indigo-400","transition","ease-in-out","duration-150","cursor-not-allowed"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"flex","flex-col","flex-auto","mt-5","h-450"],["divId","plotly-graph",3,"data","layout","config"],[1,"sm:col-span-2","lg:col-span-3","dark","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden","text-center"],[1,"text-3xl","font-semibold","tracking-tight","leading-8","text-center","h-[50vh]"]],template:function(ne,ye){if(1&ne&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5),t.qZA(),t.TgZ(6,"mat-icon",5),t.NdJ("click",function(){return ye.showVariableNotes()}),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"button",7),t._UZ(9,"mat-icon",8),t.TgZ(10,"span",9),t._uU(11,"Export"),t.qZA(),t.qZA(),t.TgZ(12,"mat-menu",null,10),t.TgZ(14,"li",11),t.TgZ(15,"a",12),t.NdJ("click",function(){return ye.exportGraph()}),t._uU(16,"Export PNG"),t.qZA(),t.qZA(),t.TgZ(17,"li",11),t.TgZ(18,"a",12),t.NdJ("click",function(){return ye.exportGraphasCSV()}),t._uU(19,"Export CSV"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",13),t.TgZ(21,"button",14),t._UZ(22,"mat-icon",15),t.qZA(),t.TgZ(23,"mat-menu",null,16),t.TgZ(25,"button",17),t.NdJ("click",function(){return ye.exportGraph()}),t._uU(26,"Export PNG"),t.qZA(),t.TgZ(27,"button",17),t.NdJ("click",function(){return ye.exportGraphasCSV()}),t._uU(28,"Export CSV"),t.qZA(),t.TgZ(29,"button",11),t._uU(30,"Settings"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",18),t.YNc(32,li,27,18,"div",19),t.YNc(33,Qi,3,0,"div",20),t.qZA(),t.qZA(),t.qZA()),2&ne){const Ze=t.MAs(13),bt=t.MAs(24);t.xp6(5),t.hij("",ye.pageTitle," "),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:information-circle")("color","primary"),t.xp6(2),t.Q6J("color","primary")("matMenuTriggerFor",Ze),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:save"),t.xp6(12),t.Q6J("matMenuTriggerFor",bt),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:dots-vertical"),t.xp6(10),t.Q6J("ngIf",ye.isDataAvailable),t.xp6(1),t.Q6J("ngIf",!ye.isDataAvailable)}},directives:[_r.Hw,Oi.gM,p.lW,Yi.p6,Yi.VK,Yi.OP,ee.O5,s.KE,s.hX,Ie,da,no,s.R9,Hi,oi,C.JJ,C.On,Ai,Pr],styles:["[_nghost-%COMP%]   .h-450[_ngcontent-%COMP%]{height:450px}  .mat-radio-outer-circle{border-color:maroon!important}  .mat-radio-inner-circle{background-color:maroon!important}mat-radio-button[_ngcontent-%COMP%]   .mat-radio-label[_ngcontent-%COMP%]   .mat-radio-container[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{background-color:red}mat-radio-button[_ngcontent-%COMP%]   .mat-radio-label[_ngcontent-%COMP%]   .mat-radio-container[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%]{background-color:red}  .js-plotly-plot .plotly .main-svg .infolayer .legend{transform:translate(200px,350px);margin-bottom:20px}"]}),Ye})()},{path:"",redirectTo:"graph",pathMatch:"full"}];let xo=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({imports:[[d.Bz.forChild(No)],d.Bz]}),Ye})(),ls=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({imports:[[g.BQ,g.si],g.BQ]}),Ye})();const Ao=new t.OlP("mat-chips-default-options"),Oa={separatorKeyCodes:[f.K5]};let vs=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({providers:[g.rD,{provide:Ao,useValue:Oa}],imports:[[g.BQ]]}),Ye})();var Es=$(8918);vn.plotlyjs=Es;let ks=(()=>{class Ye{}return Ye.\u0275fac=function(ne){return new(ne||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({providers:[pt],imports:[[ee.ez,xo,Yi.Tx,_r.Ps,ls,p.ot,vn,C.u5,s.lN,et,$r,g.XK,ke,Xi,_.Is,vs,ke,zi,Oi.AV,Zt]]}),Ye})()}}]);